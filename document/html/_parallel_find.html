<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>source: Parallel Find</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">source
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_parallel_find.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Parallel Find</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>目录</h3>
<ul>
  <li class="level1">
    <a href="#ParallelFindIncludeTheHeader">Include the Header</a>
  </li>
  <li class="level1">
    <a href="#WhatIsAFindAlgorithm">What is a Find Algorithm?</a>
  </li>
  <li class="level1">
    <a href="#CreateAParallelFindIfTask">Create a Parallel Find-If Task</a>
  </li>
  <li class="level1">
    <a href="#ParallelFindCaptureIteratorsByReference">Capture Iterators by Reference</a>
  </li>
  <li class="level1">
    <a href="#CreateAParallelFindIfNotTask">Create a Parallel Find-If-Not Task</a>
  </li>
  <li class="level1">
    <a href="#ParallelFindMinMaxElement">Find the Smallest and the Largest Elements</a>
  </li>
  <li class="level1">
    <a href="#ParallelFindConfigureAPartitioner">Configure a Partitioner</a>
  </li>
</ul>
</div>
<div class="textblock"><p>Taskflow provides template functions for constructing tasks to perform parallel iterations over ranges of items.</p>
<h1><a class="anchor" id="ParallelFindIncludeTheHeader"></a>
Include the Header</h1>
<p>You need to include the header file, <code>taskflow/algorithm/find.hpp</code>, for using parallel-find algorithms.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="algorithm_2find_8hpp.html">taskflow/algorithm/find.hpp</a>&gt;</span></div>
<div class="ttc" id="aalgorithm_2find_8hpp_html"><div class="ttname"><a href="algorithm_2find_8hpp.html">find.hpp</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="WhatIsAFindAlgorithm"></a>
What is a Find Algorithm?</h1>
<p><a class="el" href="bench__gemm_8cpp.html#addc86e8508f14411ec98f521c520f875">A</a> find algorithm allows you to find an element in a range <code>[first, last)</code> that satisfies a specific criteria. The algorithm returns an iterator to the first found element in the range or returns <code>last</code> if there is no such iterator. Taskflow provides the following parallel-find algorithms:</p>
<ul>
<li><a class="el" href="classtf_1_1_flow_builder.html#a46a96f5889e6ac87b1ff8d6313b5f471" title="constructs a task to perform STL-styled find-if algorithm">tf::Taskflow::find_if(B first, E last, T&amp; result, UOP predicate, P part)</a></li>
<li><a class="el" href="classtf_1_1_flow_builder.html#a95fa2719fa7bbe7d171cf474ddb06726" title="constructs a task to perform STL-styled find-if-not algorithm">tf::Taskflow::find_if_not(B first, E last, T&amp; result, UOP predicate, P part)</a></li>
<li><a class="el" href="classtf_1_1_flow_builder.html#a6bf43eeaa81900084a472be1d36d46a6" title="constructs a task to perform STL-styled min-element algorithm">tf::Taskflow::min_element(B first, E last, T&amp; result, C comp, P part)</a></li>
<li><a class="el" href="classtf_1_1_flow_builder.html#a6be5d7f053a868647c3b9e0d9cdf6b68" title="constructs a task to perform STL-styled max-element algorithm">tf::Taskflow::max_element(B first, E last, T&amp; result, C comp, P part)</a></li>
</ul>
<h1><a class="anchor" id="CreateAParallelFindIfTask"></a>
Create a Parallel Find-If Task</h1>
<p><a class="el" href="classtf_1_1_flow_builder.html#a46a96f5889e6ac87b1ff8d6313b5f471" title="constructs a task to perform STL-styled find-if algorithm">tf::Taskflow::find_if</a> performs parallel iterations to find the first element in the range <code>[first, last)</code> that makes the given predicate return <code>true</code>. It resembles a parallel implementation of the following loop:</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> InputIt, <span class="keyword">typename</span> UnaryPredicate&gt;</div>
<div class="line">InputIt find_if(InputIt first, InputIt last, UnaryPredicate predicate) {</div>
<div class="line">  <span class="keywordflow">for</span>(; first != last; ++first) {</div>
<div class="line">    <span class="keywordflow">if</span>(predicate(*first)) {</div>
<div class="line">      <span class="keywordflow">return</span> first;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> last;</div>
<div class="line">}</div>
</div><!-- fragment --><p>The example below creates a task to find the element that is equal to 22 from an input range of 10 elements. The result will be stored in the forth argument passed by reference:</p>
<div class="fragment"><div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> = {1, 9, 22, 3, -6, 13, 12, 0, 9, 11};</div>
<div class="line">std::vector&lt;int&gt;::iterator <a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a>;</div>
<div class="line"><a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.find_if(</div>
<div class="line">  <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.begin(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.end(), [](<span class="keywordtype">int</span> <a class="code hl_variable" href="_bi_c_g_s_t_a_b__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>){ return i == 22; }, <a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a></div>
<div class="line">);</div>
<div class="line"><a class="code hl_variable" href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a>.run(<a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>);</div>
<div class="line">assert(*<a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a> == 22);</div>
<div class="ttc" id="a_bi_c_g_s_t_a_b__step__by__step_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="_bi_c_g_s_t_a_b__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>定义</b> BiCGSTAB_step_by_step.cpp:9</div></div>
<div class="ttc" id="abenchmarks_2scan_2scan_8hpp_html_ab7e6955a695fad0be513586926040b1a"><div class="ttname"><a href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a></div><div class="ttdeci">std::vector&lt; int &gt; input</div><div class="ttdef"><b>定义</b> scan.hpp:14</div></div>
<div class="ttc" id="aimgui__impl__opengl3__loader_8h_html_aa7f56a70231ed8bc64f97aa7c37fcb19"><div class="ttname"><a href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a></div><div class="ttdeci">GLuint GLuint64EXT * result</div><div class="ttdef"><b>定义</b> imgui_impl_opengl3_loader.h:446</div></div>
<div class="ttc" id="apoisson_8hpp_html_aa56fe360bb0ae38e0082f49e394ff825"><div class="ttname"><a href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a></div><div class="ttdeci">void taskflow(int nx, int ny, double dx, double dy, double *f, int itold, int itnew, double *u, double *unew, int block_size, unsigned num_threads)</div><div class="ttdef"><b>定义</b> taskflow.cpp:6</div></div>
<div class="ttc" id="athread__pool_8cpp_html_a543e564a8407bbeac15cb2d929fec755"><div class="ttname"><a href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a></div><div class="ttdeci">tf::Executor executor</div><div class="ttdef"><b>定义</b> thread_pool.cpp:6</div></div>
</div><!-- fragment --><h1><a class="anchor" id="ParallelFindCaptureIteratorsByReference"></a>
Capture Iterators by Reference</h1>
<p>You can pass iterators by reference using @std_ref to marshal parameters update between dependent tasks. This is especially useful when the range iterators are not known at the time of creating a find-if task, but need initialization from another task.</p>
<div class="fragment"><div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>;</div>
<div class="line">std::vector&lt;int&gt;::iterator <a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a>, first, last;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// task to set up the range iterators</span></div>
<div class="line"><a class="code hl_class" href="classtf_1_1_task.html">tf::Task</a> <a class="code hl_struct" href="structinit.html">init</a> = <a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.emplace([&amp;](){</div>
<div class="line">  <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> = {1, 9, 22, 3, -6, 13, 12, 0, 9, 11};</div>
<div class="line">  first = <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.begin(),</div>
<div class="line">  last  = <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.end();</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line"><span class="comment">// task to perform parallel find</span></div>
<div class="line"><a class="code hl_class" href="classtf_1_1_task.html">tf::Task</a> <a class="code hl_define" href="test__partitioner__whitebox_8h.html#a5c4cf3d37a4eee22275de22cb9619863">task</a> = <a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.find_if(</div>
<div class="line">  std::ref(first), std::ref(last), <a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a>, [](<span class="keywordtype">int</span> <a class="code hl_variable" href="_bi_c_g_s_t_a_b__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>){ <span class="keywordflow">return</span> <a class="code hl_variable" href="_bi_c_g_s_t_a_b__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> == 22; }</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="boing_8c.html#a2858154e2009b0e6e616f313177762bc">init</a>.precede(<a class="code hl_define" href="test__partitioner__whitebox_8h.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_variable" href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a>.<a class="code hl_function" href="classtf_1_1_executor.html#a519777f5783981d534e9e53b99712069">run</a>(<a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>);</div>
<div class="line">assert(*<a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a> == 22);</div>
<div class="ttc" id="aboing_8c_html_a2858154e2009b0e6e616f313177762bc"><div class="ttname"><a href="boing_8c.html#a2858154e2009b0e6e616f313177762bc">init</a></div><div class="ttdeci">void init(void)</div><div class="ttdef"><b>定义</b> boing.c:182</div></div>
<div class="ttc" id="aclasstf_1_1_executor_html_a519777f5783981d534e9e53b99712069"><div class="ttname"><a href="classtf_1_1_executor.html#a519777f5783981d534e9e53b99712069">tf::Executor::run</a></div><div class="ttdeci">tf::Future&lt; void &gt; run(Taskflow &amp;taskflow)</div><div class="ttdoc">runs a taskflow once</div><div class="ttdef"><b>定义</b> executor-dl.hpp:2067</div></div>
<div class="ttc" id="aclasstf_1_1_task_html"><div class="ttname"><a href="classtf_1_1_task.html">tf::Task</a></div><div class="ttdoc">class to create a task handle over a node in a taskflow graph</div><div class="ttdef"><b>定义</b> task.hpp:150</div></div>
<div class="ttc" id="astructinit_html"><div class="ttname"><a href="structinit.html">init</a></div><div class="ttdef"><b>定义</b> TutorialInplaceLU.cpp:2</div></div>
<div class="ttc" id="atest__partitioner__whitebox_8h_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="test__partitioner__whitebox_8h.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">#define task</div><div class="ttdef"><b>定义</b> test_partitioner_whitebox.h:76</div></div>
</div><!-- fragment --><p>In the above example, when <code>init</code> finishes, <code>input</code> has been initialized to 10 elements with <code>first</code> and <code>last</code> pointing to the data range of <code>input</code>. The find-if task will then work on this initialized range as a result of passing iterators by reference.</p>
<h1><a class="anchor" id="CreateAParallelFindIfNotTask"></a>
Create a Parallel Find-If-Not Task</h1>
<p><a class="el" href="classtf_1_1_flow_builder.html#a95fa2719fa7bbe7d171cf474ddb06726" title="constructs a task to perform STL-styled find-if-not algorithm">tf::Taskflow::find_if_not</a> performs parallel iterations to find the first element in the range <code>[first, last)</code> that makes the given predicate return <code>false</code>. It resembles a parallel implementation of the following loop:</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> InputIt, <span class="keyword">typename</span> UnaryPredicate&gt;</div>
<div class="line">InputIt find_if(InputIt first, InputIt last, UnaryPredicate predicate) {</div>
<div class="line">  <span class="keywordflow">for</span>(; first != last; ++first) {</div>
<div class="line">    <span class="keywordflow">if</span>(!predicate(*first)) {</div>
<div class="line">      <span class="keywordflow">return</span> first;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> last;</div>
<div class="line">}</div>
</div><!-- fragment --><p>The example below creates a task to find the element that is <em>NOT</em> equal to 22 from an input range of 10 elements. The result will be stored in the forth argument passed by reference:</p>
<div class="fragment"><div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> = {1, 1, 22, 1, 1, 1, 1, 1, 1, 1};</div>
<div class="line">std::vector&lt;int&gt;::iterator <a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a>;</div>
<div class="line"><a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.find_if_not(</div>
<div class="line">  <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.begin(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.end(), <a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a>, [](<span class="keywordtype">int</span> <a class="code hl_variable" href="_bi_c_g_s_t_a_b__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>){ return i == 1; }</div>
<div class="line">);</div>
<div class="line"><a class="code hl_variable" href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a>.run(<a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>);</div>
<div class="line">assert(*<a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a> == 22);</div>
</div><!-- fragment --><p>Similar to <a class="el" href="#ParallelFindCaptureIteratorsByReference">Capture Iterators by Reference</a>, iterators of <a class="el" href="classtf_1_1_flow_builder.html#a95fa2719fa7bbe7d171cf474ddb06726" title="constructs a task to perform STL-styled find-if-not algorithm">tf::Taskflow::find_if_not</a> are templated to allow passing iterators by reference using @std_ref. This is especially useful when the range iterators are not known at the time of creating a find-if-not task, but need initialization from another task.</p>
<h1><a class="anchor" id="ParallelFindMinMaxElement"></a>
Find the Smallest and the Largest Elements</h1>
<p><a class="el" href="classtf_1_1_flow_builder.html#a6bf43eeaa81900084a472be1d36d46a6" title="constructs a task to perform STL-styled min-element algorithm">tf::Taskflow::min_element</a> finds the smallest element in a range <code>[first, last)</code> using the given comparison function object. The example below finds the smallest element, i.e., -1, from an input range of 10 elements and stores the iterator to that smallest element in <code>result:</code> </p>
<div class="fragment"><div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> = {1, 1, 1, 1, 1, -1, 1, 1, 1, 1};</div>
<div class="line">std::vector&lt;int&gt;::iterator <a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a>;</div>
<div class="line"><a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.min_element(</div>
<div class="line">  <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.begin(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.end(), std::less&lt;int&gt;(), <a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a></div>
<div class="line">);</div>
<div class="line"><a class="code hl_variable" href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a>.run(<a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>).wait();</div>
<div class="line">assert(*<a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a> == -1);</div>
</div><!-- fragment --><p>Similarly, <a class="el" href="classtf_1_1_flow_builder.html#a6be5d7f053a868647c3b9e0d9cdf6b68" title="constructs a task to perform STL-styled max-element algorithm">tf::Taskflow::max_element</a> finds the largest element in a range <code>[first, last)</code> using the given comparison function object. The example below finds the largest element, i.e., 2, from an input range of 10 elements and stores the iterator to that largest element in <code>result:</code> </p>
<div class="fragment"><div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> = {1, 1, 1, 1, 1, 2, 1, 1, 1, 1};</div>
<div class="line">std::vector&lt;int&gt;::iterator <a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a>;</div>
<div class="line"><a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.max_element(</div>
<div class="line">  <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.begin(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.end(), std::less&lt;int&gt;(), <a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a></div>
<div class="line">);</div>
<div class="line"><a class="code hl_variable" href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a>.run(<a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>).wait();</div>
<div class="line">assert(*<a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a> == 2);</div>
</div><!-- fragment --><dl class="section attention"><dt>注意</dt><dd>When using <a class="el" href="classtf_1_1_flow_builder.html#a6be5d7f053a868647c3b9e0d9cdf6b68" title="constructs a task to perform STL-styled max-element algorithm">tf::Taskflow::max_element</a> to find the large element, we will still need to use std::less as our comparison function. Details can be referred to <a href="https://en.cppreference.com/w/cpp/algorithm/max_element">std::max_element</a>.</dd></dl>
<h1><a class="anchor" id="ParallelFindConfigureAPartitioner"></a>
Configure a Partitioner</h1>
<p>You can configure a partitioner for parallel-find tasks (<a class="el" href="classtf_1_1_flow_builder.html#a46a96f5889e6ac87b1ff8d6313b5f471" title="constructs a task to perform STL-styled find-if algorithm">tf::Taskflow::find_if</a>, <a class="el" href="classtf_1_1_flow_builder.html#a95fa2719fa7bbe7d171cf474ddb06726" title="constructs a task to perform STL-styled find-if-not algorithm">tf::Taskflow::find_if_not</a>, <a class="el" href="classtf_1_1_flow_builder.html#a6bf43eeaa81900084a472be1d36d46a6" title="constructs a task to perform STL-styled min-element algorithm">tf::Taskflow::min_element</a>, <a class="el" href="classtf_1_1_flow_builder.html#a6be5d7f053a868647c3b9e0d9cdf6b68" title="constructs a task to perform STL-styled max-element algorithm">tf::Taskflow::max_element</a>) to run with different scheduling methods, such as guided partitioning, dynamic partitioning, and static partitioning. The following example creates two parallel-find tasks using two different partitioners, one with the static partitioning algorithm and another one with the guided partitioning algorithm:</p>
<div class="fragment"><div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2for__each_2for__each_8hpp.html#ad86cbaae2e3f21959301250e9f7c2701">vec</a>(1024, -1);</div>
<div class="line">std::vector&lt;int&gt;::iterator <a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// create two partitioners with a chunk size of 10</span></div>
<div class="line"><a class="code hl_class" href="classtf_1_1_static_partitioner.html">tf::StaticPartitioner</a> static_partitioner(10);</div>
<div class="line"><a class="code hl_class" href="classtf_1_1_guided_partitioner.html">tf::GuidedPartitioner</a> guided_partitioner(10);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// create a parallel-find task with a static partitioner</span></div>
<div class="line"><a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.find_if(</div>
<div class="line">  <a class="code hl_variable" href="benchmarks_2for__each_2for__each_8hpp.html#ad86cbaae2e3f21959301250e9f7c2701">vec</a>.begin(), <a class="code hl_variable" href="benchmarks_2for__each_2for__each_8hpp.html#ad86cbaae2e3f21959301250e9f7c2701">vec</a>.end(), <a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a>, [&amp;](<span class="keywordtype">int</span> <a class="code hl_variable" href="_bi_c_g_s_t_a_b__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) { return i == -1; }, static_partitioner</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// create a parallel-find task with a guided partitioner</span></div>
<div class="line"><a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.find_if(</div>
<div class="line">  <a class="code hl_variable" href="benchmarks_2for__each_2for__each_8hpp.html#ad86cbaae2e3f21959301250e9f7c2701">vec</a>.begin(), <a class="code hl_variable" href="benchmarks_2for__each_2for__each_8hpp.html#ad86cbaae2e3f21959301250e9f7c2701">vec</a>.end(), <a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aa7f56a70231ed8bc64f97aa7c37fcb19">result</a>, [&amp;](<span class="keywordtype">int</span> <a class="code hl_variable" href="_bi_c_g_s_t_a_b__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) { return i == -1; }, guided_partitioner</div>
<div class="line">);</div>
<div class="ttc" id="abenchmarks_2for__each_2for__each_8hpp_html_ad86cbaae2e3f21959301250e9f7c2701"><div class="ttname"><a href="benchmarks_2for__each_2for__each_8hpp.html#ad86cbaae2e3f21959301250e9f7c2701">vec</a></div><div class="ttdeci">std::vector&lt; double &gt; vec</div><div class="ttdef"><b>定义</b> for_each.hpp:14</div></div>
<div class="ttc" id="aclasstf_1_1_guided_partitioner_html"><div class="ttname"><a href="classtf_1_1_guided_partitioner.html">tf::GuidedPartitioner</a></div><div class="ttdoc">class to construct a guided partitioner for scheduling parallel algorithms</div><div class="ttdef"><b>定义</b> partitioner.hpp:259</div></div>
<div class="ttc" id="aclasstf_1_1_static_partitioner_html"><div class="ttname"><a href="classtf_1_1_static_partitioner.html">tf::StaticPartitioner</a></div><div class="ttdoc">class to construct a static partitioner for scheduling parallel algorithms</div><div class="ttdef"><b>定义</b> partitioner.hpp:560</div></div>
</div><!-- fragment --><dl class="section attention"><dt>注意</dt><dd>By default, parallel-find tasks use <a class="el" href="namespacetf.html#ace2c5adcd5039483eebb6dbdbb6f33e3" title="default partitioner set to tf::GuidedPartitioner">tf::DefaultPartitioner</a> if no partitioner is specified. </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
