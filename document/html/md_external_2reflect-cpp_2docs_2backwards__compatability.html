<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>source: Maintaining backwards compatability</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">source
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_external_2reflect-cpp_2docs_2backwards__compatability.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Maintaining backwards compatability</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md523"></a></p>
<p>If you change your structs, you probably want to be able to interact with data generated by previous versions of your structs. This section explains how you can do that.</p>
<p>For the purpose of this section, any field of type <code>std::optional</code>, <code>std::shared_ptr</code> or <code>std::unique_ptr</code> is an optional field. Any other fields are required.</p>
<p>Please refer to the section on optional fields for details.</p>
<h1><a class="anchor" id="autotoc_md524"></a>
Rules</h1>
<p>The following rules apply:</p>
<ul>
<li>You <em>can</em> add optional fields.</li>
<li>You <em>can</em> remove any optional or required fields, if they are no longer needed.</li>
<li>You <em>can</em> change the field names of any optional fields.</li>
<li>You <em>can</em> change the order of any existing fields.</li>
<li>You <em>can not</em> add any required fields.</li>
<li>You <em>can not</em> change the field names of any required fields.</li>
</ul>
<h1><a class="anchor" id="autotoc_md525"></a>
API versioning</h1>
<p>If you find it difficult to follow the rules as stated above or you cannot guarantee that you will always be able to follow them in the future, you might want to use API versioning.</p>
<p>You can either use <code><a class="el" href="structrfl_1_1_tagged_union.html">rfl::TaggedUnion</a></code> or externally tagged variants:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>API_v_1_0 {</div>
<div class="line">  <span class="keyword">using </span>Tag = <a class="code hl_class" href="classrfl_1_1_literal.html">rfl::Literal</a>&lt;<span class="stringliteral">&quot;v1.0&quot;</span>&gt;;</div>
<div class="line">  ...</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>API_v_1_1 {</div>
<div class="line">  <span class="keyword">using </span>Tag = <a class="code hl_class" href="classrfl_1_1_literal.html">rfl::Literal</a>&lt;<span class="stringliteral">&quot;v1.1&quot;</span>&gt;;</div>
<div class="line">  ...</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">...</div>
<div class="line"> </div>
<div class="line">using APIs = <a class="code hl_struct" href="structrfl_1_1_tagged_union.html">rfl::TaggedUnion</a>&lt;<span class="stringliteral">&quot;version&quot;</span>, API_v_1_0, API_v_1_1, ...&gt;;</div>
<div class="ttc" id="aclassrfl_1_1_literal_html"><div class="ttname"><a href="classrfl_1_1_literal.html">rfl::Literal</a></div><div class="ttdef"><b>定义</b> Literal.hpp:26</div></div>
<div class="ttc" id="astructrfl_1_1_tagged_union_html"><div class="ttname"><a href="structrfl_1_1_tagged_union.html">rfl::TaggedUnion</a></div><div class="ttdef"><b>定义</b> TaggedUnion.hpp:14</div></div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">struct </span>API_v_1_0 {</div>
<div class="line">  ...</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>API_v_1_1 {</div>
<div class="line">  ...</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">...</div>
<div class="line"> </div>
<div class="line">using APIs = <a class="code hl_class" href="classrfl_1_1_variant.html">rfl::Variant</a>&lt;<a class="code hl_struct" href="structrfl_1_1_field.html">rfl::Field</a>&lt;<span class="stringliteral">&quot;v1.0&quot;</span>, API_v_1_0&gt;, <a class="code hl_struct" href="structrfl_1_1_field.html">rfl::Field</a>&lt;<span class="stringliteral">&quot;v1.1&quot;</span>, API_v_1_1&gt;, ...&gt;;</div>
<div class="ttc" id="aclassrfl_1_1_variant_html"><div class="ttname"><a href="classrfl_1_1_variant.html">rfl::Variant</a></div><div class="ttdef"><b>定义</b> Variant.hpp:22</div></div>
<div class="ttc" id="astructrfl_1_1_field_html"><div class="ttname"><a href="structrfl_1_1_field.html">rfl::Field</a></div><div class="ttdoc">Used to define a field in the NamedTuple.</div><div class="ttdef"><b>定义</b> Field.hpp:21</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
