<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>source: ff::ff_allocator类 参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">source
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classff_1_1ff__allocator.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public 成员函数</a> &#124;
<a href="#pub-attribs">Public 属性</a> &#124;
<a href="#pro-methods">Protected 成员函数</a> &#124;
<a href="#pri-methods">Private 成员函数</a> &#124;
<a href="#friends">友元</a> &#124;
<a href="classff_1_1ff__allocator-members.html">所有成员列表</a>  </div>
  <div class="headertitle"><div class="title">ff::ff_allocator类 参考</div></div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="classff_1_1ff__allocator.html" title="The ff_allocator, based on the idea of the Slab allocator">ff_allocator</a>, based on the idea of the <a href="http://www.ibm.com/developerworks/linux/library/l-linux-slab-allocator/" target="_blank">Slab allocator</a>  
 <a href="#details">更多...</a></p>

<p><code>#include &lt;<a class="el" href="allocator_8hpp_source.html">allocator.hpp</a>&gt;</code></p>
<div class="dynheader">
类 ff::ff_allocator 继承关系图:</div>
<div class="dyncontent">
<div class="center"><img src="classff_1_1ff__allocator__inherit__graph.png" border="0" usemap="#aff_1_1ff__allocator_inherit__map" alt="Inheritance graph"/></div>
<!-- MAP 0 -->
<center><span class="legend">[<a target="top" href="graph_legend.html">图例</a>]</span></center></div>
<div class="dynheader">
ff::ff_allocator 的协作图:</div>
<div class="dyncontent">
<div class="center"><img src="classff_1_1ff__allocator__coll__graph.png" border="0" usemap="#aff_1_1ff__allocator_coll__map" alt="Collaboration graph"/></div>
<!-- MAP 1 -->
<center><span class="legend">[<a target="top" href="graph_legend.html">图例</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public 成员函数</h2></td></tr>
<tr class="memitem:a8382d619374c20723c838afff6dc0585" id="r_a8382d619374c20723c838afff6dc0585"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sugar_8h.html#ae4f82344f573c70aa1066a2394bba345">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8382d619374c20723c838afff6dc0585">getslabs</a> (size_t <a class="el" href="imgui__impl__opengl3__loader_8h.html#ac42c05b5701aef6bab82675cf3b55fee">size</a>)</td></tr>
<tr class="separator:a8382d619374c20723c838afff6dc0585"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f4683ff1c69931dfc1edc6679c0b2cd" id="r_a3f4683ff1c69931dfc1edc6679c0b2cd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3f4683ff1c69931dfc1edc6679c0b2cd">ff_allocator</a> (size_t=0, const <a class="el" href="sugar_8h.html#ae4f82344f573c70aa1066a2394bba345">int</a> <a class="el" href="#ab4acffca209f242ece598bff4499ba9e">delayedReclaim</a>=0)</td></tr>
<tr class="memdesc:a3f4683ff1c69931dfc1edc6679c0b2cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default Constructor  <br /></td></tr>
<tr class="separator:a3f4683ff1c69931dfc1edc6679c0b2cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9787a0f1539c6f0bd559c9ab4d98442" id="r_aa9787a0f1539c6f0bd559c9ab4d98442"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa9787a0f1539c6f0bd559c9ab4d98442">~ff_allocator</a> ()</td></tr>
<tr class="separator:aa9787a0f1539c6f0bd559c9ab4d98442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4256355feee6ed6fd39a515da813fbcb" id="r_a4256355feee6ed6fd39a515da813fbcb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sugar_8h.html#ae4f82344f573c70aa1066a2394bba345">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4256355feee6ed6fd39a515da813fbcb">init</a> (const <a class="el" href="sugar_8h.html#ae4f82344f573c70aa1066a2394bba345">int</a> _nslabs[<a class="el" href="namespaceff.html#ac70617c84eb066a57e5d904bf5c3e62da9b057b825c2a8d1ab94ef55519344dd1">N_SLABBUFFER</a>]=0, <a class="el" href="sugar_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> prealloc=<a class="el" href="yyjson_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a>)</td></tr>
<tr class="memdesc:a4256355feee6ed6fd39a515da813fbcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">init the allocator  <br /></td></tr>
<tr class="separator:a4256355feee6ed6fd39a515da813fbcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09e650148ba1d77a17015eb302808714" id="r_a09e650148ba1d77a17015eb302808714"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sugar_8h.html#ae4f82344f573c70aa1066a2394bba345">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a09e650148ba1d77a17015eb302808714">registerAllocator</a> ()</td></tr>
<tr class="memdesc:a09e650148ba1d77a17015eb302808714"><td class="mdescLeft">&#160;</td><td class="mdescRight">register <a class="el" href="classff_1_1ff__allocator.html" title="The ff_allocator, based on the idea of the Slab allocator">ff_allocator</a> (get ownership)  <br /></td></tr>
<tr class="separator:a09e650148ba1d77a17015eb302808714"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc24fb135fae47a76d9c4581f7fe74ea" id="r_acc24fb135fae47a76d9c4581f7fe74ea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acc24fb135fae47a76d9c4581f7fe74ea">deregisterAllocator</a> (<a class="el" href="sugar_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> reclaimMemory=<a class="el" href="yyjson_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a>)</td></tr>
<tr class="memdesc:acc24fb135fae47a76d9c4581f7fe74ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">de-register the <a class="el" href="classff_1_1ff__allocator.html" title="The ff_allocator, based on the idea of the Slab allocator">ff_allocator</a> (release ownership)  <br /></td></tr>
<tr class="separator:acc24fb135fae47a76d9c4581f7fe74ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac09381e5eaa8279a60b7a191f2210174" id="r_ac09381e5eaa8279a60b7a191f2210174"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sugar_8h.html#ae4f82344f573c70aa1066a2394bba345">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac09381e5eaa8279a60b7a191f2210174">register4free</a> ()</td></tr>
<tr class="memdesc:ac09381e5eaa8279a60b7a191f2210174"><td class="mdescLeft">&#160;</td><td class="mdescRight">register for the free operation  <br /></td></tr>
<tr class="separator:ac09381e5eaa8279a60b7a191f2210174"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cfb8892d71d1fa72d233cc22b117dbf" id="r_a9cfb8892d71d1fa72d233cc22b117dbf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9cfb8892d71d1fa72d233cc22b117dbf">malloc</a> (size_t <a class="el" href="imgui__impl__opengl3__loader_8h.html#ac42c05b5701aef6bab82675cf3b55fee">size</a>)</td></tr>
<tr class="memdesc:a9cfb8892d71d1fa72d233cc22b117dbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">malloc  <br /></td></tr>
<tr class="separator:a9cfb8892d71d1fa72d233cc22b117dbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ad062e04d2c1739a089cbc0a60dda0b" id="r_a3ad062e04d2c1739a089cbc0a60dda0b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sugar_8h.html#ae4f82344f573c70aa1066a2394bba345">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3ad062e04d2c1739a089cbc0a60dda0b">posix_memalign</a> (<a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> **memptr, size_t alignment, size_t <a class="el" href="imgui__impl__opengl3__loader_8h.html#ac42c05b5701aef6bab82675cf3b55fee">size</a>)</td></tr>
<tr class="memdesc:a3ad062e04d2c1739a089cbc0a60dda0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">ff posix_memalign.  <br /></td></tr>
<tr class="separator:a3ad062e04d2c1739a089cbc0a60dda0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4fe08078fc1624b607c3a9fdd823350" id="r_ad4fe08078fc1624b607c3a9fdd823350"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad4fe08078fc1624b607c3a9fdd823350">free</a> (<a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> *<a class="el" href="yyjson_8h.html#a26c622783fa717b24fe0bbd3e060f74a">ptr</a>)</td></tr>
<tr class="memdesc:ad4fe08078fc1624b607c3a9fdd823350"><td class="mdescLeft">&#160;</td><td class="mdescRight">free  <br /></td></tr>
<tr class="separator:ad4fe08078fc1624b607c3a9fdd823350"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83e8958912ce97820addd8ad2ad999f7" id="r_a83e8958912ce97820addd8ad2ad999f7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a83e8958912ce97820addd8ad2ad999f7">realloc</a> (<a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> *<a class="el" href="yyjson_8h.html#a26c622783fa717b24fe0bbd3e060f74a">ptr</a>, size_t newsize)</td></tr>
<tr class="memdesc:a83e8958912ce97820addd8ad2ad999f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">realloc  <br /></td></tr>
<tr class="separator:a83e8958912ce97820addd8ad2ad999f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e72260f154d03da4edb766a5edfe116" id="r_a9e72260f154d03da4edb766a5edfe116"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9e72260f154d03da4edb766a5edfe116">growsup</a> (<a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> *<a class="el" href="yyjson_8h.html#a26c622783fa717b24fe0bbd3e060f74a">ptr</a>, size_t newsize)</td></tr>
<tr class="separator:a9e72260f154d03da4edb766a5edfe116"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public 属性</h2></td></tr>
<tr class="memitem:a83eef76f0a8022f2528e4e23d1ba5603" id="r_a83eef76f0a8022f2528e4e23d1ba5603"><td class="memItemLeft" align="right" valign="top"><a class="el" href="allocator_8hpp.html#a2fbd97af3a198200b674b6658fb90a50">ALLSTATS</a>(<a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> printstats(std::ostream &amp;out) { all_stats::instance() -&gt;<a class="el" href="runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h.html#a59025bfaf390e425b4e274c966a77557">print</a>(out);}) <a class="el" href="rml__server_8cpp.html#a6a1d6e1a12975a4e9a0b5b952e79eaad">private</a> <a class="el" href="classff_1_1_segment_allocator.html">SegmentAllocator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a83eef76f0a8022f2528e4e23d1ba5603">alloc</a> )</td></tr>
<tr class="separator:a83eef76f0a8022f2528e4e23d1ba5603"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4acffca209f242ece598bff4499ba9e" id="r_ab4acffca209f242ece598bff4499ba9e"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="sugar_8h.html#ae4f82344f573c70aa1066a2394bba345">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab4acffca209f242ece598bff4499ba9e">delayedReclaim</a></td></tr>
<tr class="separator:ab4acffca209f242ece598bff4499ba9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected 成员函数</h2></td></tr>
<tr class="memitem:a6fe7b7eef67f4bebfba3c705096a067d" id="r_a6fe7b7eef67f4bebfba3c705096a067d"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="sugar_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6fe7b7eef67f4bebfba3c705096a067d">free</a> (<a class="el" href="structff_1_1_buf__ctl.html">Buf_ctl</a> *buf)</td></tr>
<tr class="separator:a6fe7b7eef67f4bebfba3c705096a067d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1156e5f5142be9fa15d1b703e8032246" id="r_a1156e5f5142be9fa15d1b703e8032246"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1156e5f5142be9fa15d1b703e8032246">allocatedsize</a> ()</td></tr>
<tr class="separator:a1156e5f5142be9fa15d1b703e8032246"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private 成员函数</h2></td></tr>
<tr class="memitem:a632c9d399d139cee6317dc4fd3a625e6" id="r_a632c9d399d139cee6317dc4fd3a625e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structff_1_1_seg__ctl.html">Seg_ctl</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a632c9d399d139cee6317dc4fd3a625e6">getsegctl</a> (<a class="el" href="structff_1_1_buf__ctl.html">Buf_ctl</a> *buf)</td></tr>
<tr class="separator:a632c9d399d139cee6317dc4fd3a625e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbff514152f454289da91e44ffb5f49b" id="r_adbff514152f454289da91e44ffb5f49b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classff_1_1_slab_cache.html">SlabCache</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adbff514152f454289da91e44ffb5f49b">getslabs</a> (<a class="el" href="structff_1_1_buf__ctl.html">Buf_ctl</a> *buf)</td></tr>
<tr class="separator:adbff514152f454289da91e44ffb5f49b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
友元</h2></td></tr>
<tr class="memitem:a90dcaed0c9c7a0dc2f18aaa9468cc743" id="r_a90dcaed0c9c7a0dc2f18aaa9468cc743"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a90dcaed0c9c7a0dc2f18aaa9468cc743">FFAllocator</a></td></tr>
<tr class="separator:a90dcaed0c9c7a0dc2f18aaa9468cc743"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock"><p>The <a class="el" href="classff_1_1ff__allocator.html" title="The ff_allocator, based on the idea of the Slab allocator">ff_allocator</a>, based on the idea of the <a href="http://www.ibm.com/developerworks/linux/library/l-linux-slab-allocator/" target="_blank">Slab allocator</a> </p>
<p><a class="el" href="bench__gemm_8cpp.html#addc86e8508f14411ec98f521c520f875">A</a> <a class="el" href="classff_1_1ff__allocator.html" title="The ff_allocator, based on the idea of the Slab allocator">ff_allocator</a> is owner by a single <a class="el" href="classff_1_1ff__node.html" title="The FastFlow abstract contanier for a parallel activity (actor).">ff_node</a>, which is the <a class="el" href="classff_1_1ff__node.html" title="The FastFlow abstract contanier for a parallel activity (actor).">ff_node</a> which <code></code> it. The owner can <code> malloc/realloc/posix_memalign</code>. Other <a class="el" href="classff_1_1ff__node.html" title="The FastFlow abstract contanier for a parallel activity (actor).">ff_node</a> can <code class="param">free</code> provided they /p register4free. <a class="el" href="bench__gemm_8cpp.html#addc86e8508f14411ec98f521c520f875">A</a> <a class="el" href="classff_1_1ff__node.html" title="The FastFlow abstract contanier for a parallel activity (actor).">ff_node</a> can init more than one <a class="el" href="classff_1_1ff__allocator.html" title="The ff_allocator, based on the idea of the Slab allocator">ff_allocator</a>. Every violation cause unexpected results (e.g. segfault).</p>
<p>The <a class="el" href="classff_1_1ff__allocator.html" title="The ff_allocator, based on the idea of the Slab allocator">ff_allocator</a> works over the <a class="el" href="classff_1_1_slab_cache.html">SlabCache</a> and is tuned to outperform standard allocators' performance in a multi-threaded envirnoment. When it is initialised, it creates a (predefined) number of SlabCaches, each one containing a (predefined) number of buffers of different sizes, from 32 to 8192 bytes. The thread that calls first the allocator object and wants to allocate memory has to register itself to the shared leak queue. Only one thread can perform this operation. The allocator obtains memory from the pre-allocated <a class="el" href="classff_1_1_slab_cache.html">SlabCache</a>: if there is a slab (i.e. a buffer) big enough to contain an object of the requested size, the pointer to that buffer is passed to the thread that requested the memory. This latter thread has to register as well to the same shared leak queue, so that when it has finished its operations, it can return memory to the allocator thread.</p>
<dl class="section note"><dt>注解</dt><dd>Very efficient but delicate to use, expert only. Not designed to end-user but to build FastFlow pattern runtime support. Not expert should use <a class="el" href="classff_1_1_f_f_allocator.html">ff::FFAllocator</a>. </dd></dl>
</div><h2 class="groupheader">构造及析构函数说明</h2>
<a id="a3f4683ff1c69931dfc1edc6679c0b2cd" name="a3f4683ff1c69931dfc1edc6679c0b2cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f4683ff1c69931dfc1edc6679c0b2cd">&#9670;&#160;</a></span>ff_allocator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ff::ff_allocator::ff_allocator </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em></em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="sugar_8h.html#ae4f82344f573c70aa1066a2394bba345">int</a></td>          <td class="paramname"><span class="paramname"><em>delayedReclaim</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default Constructor </p>

</div>
</div>
<a id="aa9787a0f1539c6f0bd559c9ab4d98442" name="aa9787a0f1539c6f0bd559c9ab4d98442"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9787a0f1539c6f0bd559c9ab4d98442">&#9670;&#160;</a></span>~ff_allocator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual ff::ff_allocator::~ff_allocator </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">成员函数说明</h2>
<a id="a1156e5f5142be9fa15d1b703e8032246" name="a1156e5f5142be9fa15d1b703e8032246"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1156e5f5142be9fa15d1b703e8032246">&#9670;&#160;</a></span>allocatedsize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t ff::ff_allocator::allocatedsize </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="classff_1_1ff__allocator_a1156e5f5142be9fa15d1b703e8032246_cgraph.png" border="0" usemap="#aclassff_1_1ff__allocator_a1156e5f5142be9fa15d1b703e8032246_cgraph" alt=""/></div>
<!-- MAP 2 -->
</div>

</div>
</div>
<a id="acc24fb135fae47a76d9c4581f7fe74ea" name="acc24fb135fae47a76d9c4581f7fe74ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc24fb135fae47a76d9c4581f7fe74ea">&#9670;&#160;</a></span>deregisterAllocator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> ff::ff_allocator::deregisterAllocator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sugar_8h.html#abb452686968e48b67397da5f97445f5b">bool</a></td>          <td class="paramname"><span class="paramname"><em>reclaimMemory</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="yyjson_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>de-register the <a class="el" href="classff_1_1ff__allocator.html" title="The ff_allocator, based on the idea of the Slab allocator">ff_allocator</a> (release ownership) </p>
<p>Deregister the <a class="el" href="classff_1_1ff__allocator.html" title="The ff_allocator, based on the idea of the Slab allocator">ff_allocator</a> (i.e. release ownership) and reclaim allocated memory back to the allocator. Every <a class="el" href="classff_1_1ff__node.html" title="The FastFlow abstract contanier for a parallel activity (actor).">ff_node</a> can perform this action. No <code>malloc/realloc/posix_memalign</code> requires than one <a class="el" href="classff_1_1ff__node.html" title="The FastFlow abstract contanier for a parallel activity (actor).">ff_node</a> own the <a class="el" href="classff_1_1ff__allocator.html" title="The ff_allocator, based on the idea of the Slab allocator">ff_allocator</a></p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">reclaimMemory</td><td><code class="param">true</code> if reclaim; <code class="param">false</code> if deregister only </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="classff_1_1ff__allocator_acc24fb135fae47a76d9c4581f7fe74ea_cgraph.png" border="0" usemap="#aclassff_1_1ff__allocator_acc24fb135fae47a76d9c4581f7fe74ea_cgraph" alt=""/></div>
<!-- MAP 3 -->
</div>

</div>
</div>
<a id="a6fe7b7eef67f4bebfba3c705096a067d" name="a6fe7b7eef67f4bebfba3c705096a067d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fe7b7eef67f4bebfba3c705096a067d">&#9670;&#160;</a></span>free() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="sugar_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> ff::ff_allocator::free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structff_1_1_buf__ctl.html">Buf_ctl</a> *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel protected">protected</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>被 <a class="el" href="classff_1_1ffa__wrapper.html#ada3370f18adff1597c079ee64fb15329">ff::ffa_wrapper</a> 重载.</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="classff_1_1ff__allocator_a6fe7b7eef67f4bebfba3c705096a067d_cgraph.png" border="0" usemap="#aclassff_1_1ff__allocator_a6fe7b7eef67f4bebfba3c705096a067d_cgraph" alt=""/></div>
<!-- MAP 4 -->
</div>

</div>
</div>
<a id="ad4fe08078fc1624b607c3a9fdd823350" name="ad4fe08078fc1624b607c3a9fdd823350"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4fe08078fc1624b607c3a9fdd823350">&#9670;&#160;</a></span>free() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> ff::ff_allocator::free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> *</td>          <td class="paramname"><span class="paramname"><em>ptr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>free </p>
<p>free the requested memory chunk on a given <a class="el" href="classff_1_1ff__allocator.html" title="The ff_allocator, based on the idea of the Slab allocator">ff::ff_allocator</a> object.</p>
<p>The memory should have been allocated using <code class="param">malloc</code> on the same object (otherwise segfault), and the <a class="el" href="classff_1_1ff__node.html" title="The FastFlow abstract contanier for a parallel activity (actor).">ff_node</a> should have been <code class="param">ff::register4free()</code> on the calling <a class="el" href="classff_1_1ff__node.html">ff::ff_node</a>.</p>
<p>Wrong registering cause segfault or unspected behaviour.</p>
<dl class="section note"><dt>注解</dt><dd>Very efficient but delicate to use, expert only. Not designed to end-user but to build FastFlow pattern runtime support. Not expert should use <a class="el" href="classff_1_1_f_f_allocator.html">ff::FFAllocator</a></dd></dl>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>a pointer to the buffer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a632c9d399d139cee6317dc4fd3a625e6" name="a632c9d399d139cee6317dc4fd3a625e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a632c9d399d139cee6317dc4fd3a625e6">&#9670;&#160;</a></span>getsegctl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structff_1_1_seg__ctl.html">Seg_ctl</a> * ff::ff_allocator::getsegctl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structff_1_1_buf__ctl.html">Buf_ctl</a> *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="adbff514152f454289da91e44ffb5f49b" name="adbff514152f454289da91e44ffb5f49b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbff514152f454289da91e44ffb5f49b">&#9670;&#160;</a></span>getslabs() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classff_1_1_slab_cache.html">SlabCache</a> * ff::ff_allocator::getslabs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structff_1_1_buf__ctl.html">Buf_ctl</a> *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="classff_1_1ff__allocator_adbff514152f454289da91e44ffb5f49b_cgraph.png" border="0" usemap="#aclassff_1_1ff__allocator_adbff514152f454289da91e44ffb5f49b_cgraph" alt=""/></div>
<!-- MAP 5 -->
</div>

</div>
</div>
<a id="a8382d619374c20723c838afff6dc0585" name="a8382d619374c20723c838afff6dc0585"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8382d619374c20723c838afff6dc0585">&#9670;&#160;</a></span>getslabs() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sugar_8h.html#ae4f82344f573c70aa1066a2394bba345">int</a> ff::ff_allocator::getslabs </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>size</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="classff_1_1ff__allocator_a8382d619374c20723c838afff6dc0585_cgraph.png" border="0" usemap="#aclassff_1_1ff__allocator_a8382d619374c20723c838afff6dc0585_cgraph" alt=""/></div>
<!-- MAP 6 -->
</div>

</div>
</div>
<a id="a9e72260f154d03da4edb766a5edfe116" name="a9e72260f154d03da4edb766a5edfe116"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e72260f154d03da4edb766a5edfe116">&#9670;&#160;</a></span>growsup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> * ff::ff_allocator::growsup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> *</td>          <td class="paramname"><span class="paramname"><em>ptr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>newsize</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="classff_1_1ff__allocator_a9e72260f154d03da4edb766a5edfe116_cgraph.png" border="0" usemap="#aclassff_1_1ff__allocator_a9e72260f154d03da4edb766a5edfe116_cgraph" alt=""/></div>
<!-- MAP 7 -->
</div>

</div>
</div>
<a id="a4256355feee6ed6fd39a515da813fbcb" name="a4256355feee6ed6fd39a515da813fbcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4256355feee6ed6fd39a515da813fbcb">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sugar_8h.html#ae4f82344f573c70aa1066a2394bba345">int</a> ff::ff_allocator::init </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="sugar_8h.html#ae4f82344f573c70aa1066a2394bba345">int</a></td>          <td class="paramname"><span class="paramname"><em>_nslabs</em></span>[N_SLABBUFFER]<span class="paramdefsep"> = </span><span class="paramdefval">0</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sugar_8h.html#abb452686968e48b67397da5f97445f5b">bool</a></td>          <td class="paramname"><span class="paramname"><em>prealloc</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="yyjson_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>init the allocator </p>
<p>Initialise the allocator. This method is called by one <a class="el" href="classff_1_1ff__node.html" title="The FastFlow abstract contanier for a parallel activity (actor).">ff_node</a> for each data-path. (e.g. the Emitter in a Farm skeleton). It creates a number of SlabCaches objects, a number specified by the <code class="param">N_SLABBUFFER</code> constant. The size of each created segment goes from 32 (the first one created) to 8192 (the last). Typically the number of buffers in a slab segment decreases as the size of the slab increases.</p>
<p>Default: </p><div class="fragment"><div class="line">enum { N_SLABBUFFER=9, MAX_SLABBUFFER_SIZE=8192};</div>
<div class="line">const int buffersize[N_SLABBUFFER] = { 32, 64,128,256,512,1024,2048,4096,8192  };</div>
<div class="line">const int nslabs_default[N_SLABBUFFER] = { 512,512,512,512,128,  64,  32,  16,   8 };</div>
</div><!-- fragment --><p>The number of nslabs is dynamically increased if needed recaliming more memory from OS. This is a reltevely slow and not lock-free path of the code.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">_nslabs</td><td>an array specifying the allowed numbers of buffers in a <a class="el" href="classff_1_1_slab_cache.html">SlabCache</a> (overwrite <code class="param">nslabs_default</code> ) </td></tr>
    <tr><td class="paramname">prealloc</td><td>if \true use preallocated segments</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>0 if initialisation succedes; a negative value otherwise </dd></dl>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="classff_1_1ff__allocator_a4256355feee6ed6fd39a515da813fbcb_cgraph.png" border="0" usemap="#aclassff_1_1ff__allocator_a4256355feee6ed6fd39a515da813fbcb_cgraph" alt=""/></div>
<!-- MAP 8 -->
</div>

</div>
</div>
<a id="a9cfb8892d71d1fa72d233cc22b117dbf" name="a9cfb8892d71d1fa72d233cc22b117dbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cfb8892d71d1fa72d233cc22b117dbf">&#9670;&#160;</a></span>malloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> * ff::ff_allocator::malloc </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>size</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>malloc </p>
<p>Request to allocate <code class="param">size</code> bytes. If the size is too large, use OS malloc to get a new chunk of memory.</p>
<p>To be called on a <a class="el" href="classff_1_1ff__allocator.html">ff::ff_allocator</a> initialised via <code class="param">ff:<a class="el" href="#a4256355feee6ed6fd39a515da813fbcb" title="init the allocator">ff_allocator.init()</a></code> on the calling <a class="el" href="classff_1_1ff__node.html">ff::ff_node</a> (owner). Each <a class="el" href="classff_1_1ff__allocator.html">ff::ff_allocator</a> object is owned by the <a class="el" href="classff_1_1ff__node.html">ff::ff_node</a> which <code class="param">registerAllocator</code> it. Only the owner can malloc on it, whereas other <a class="el" href="classff_1_1ff__node.html" title="The FastFlow abstract contanier for a parallel activity (actor).">ff_node</a> can free. More than one <a class="el" href="classff_1_1ff__allocator.html">ff::ff_allocator</a> per <a class="el" href="classff_1_1ff__node.html" title="The FastFlow abstract contanier for a parallel activity (actor).">ff_node</a> can be defined.</p>
<p>Violating ownership cause segfault or unspected behaviour.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>the size of memory requested </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>pointer to allocated memory chunk</dd></dl>
<dl class="section note"><dt>注解</dt><dd>Very efficient but delicate to use, expert only. Not designed to end-user but to build FastFlow pattern runtime support. Not expert should use <a class="el" href="classff_1_1_f_f_allocator.html">ff::FFAllocator</a> </dd></dl>
<p>use standard allocator if the size is too big or we don't want to use the <a class="el" href="classff_1_1ff__allocator.html" title="The ff_allocator, based on the idea of the Slab allocator">ff_allocator</a> for that size</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="classff_1_1ff__allocator_a9cfb8892d71d1fa72d233cc22b117dbf_cgraph.png" border="0" usemap="#aclassff_1_1ff__allocator_a9cfb8892d71d1fa72d233cc22b117dbf_cgraph" alt=""/></div>
<!-- MAP 9 -->
</div>

</div>
</div>
<a id="a3ad062e04d2c1739a089cbc0a60dda0b" name="a3ad062e04d2c1739a089cbc0a60dda0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ad062e04d2c1739a089cbc0a60dda0b">&#9670;&#160;</a></span>posix_memalign()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sugar_8h.html#ae4f82344f573c70aa1066a2394bba345">int</a> ff::ff_allocator::posix_memalign </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> **</td>          <td class="paramname"><span class="paramname"><em>memptr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>alignment</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>size</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ff posix_memalign. </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">*memptr</td><td>pointer to a chunk of memory where the aligned memory will be returned </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">alignment</td><td>allocation's base address is an exact multiple of <code class="param">alignment</code>, which must be a power of 2 at least as large as sizeof(void *) </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">size</td><td>the size of memory requested. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>0 if successful; otherwise it returns an error value.</dd></dl>
<dl class="section note"><dt>注解</dt><dd>Very efficient but delicate to use, expert only. Not designed to end-user but to build FastFlow pattern runtime support. Not expert should use <a class="el" href="classff_1_1_f_f_allocator.html">ff::FFAllocator</a> </dd></dl>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="classff_1_1ff__allocator_a3ad062e04d2c1739a089cbc0a60dda0b_cgraph.png" border="0" usemap="#aclassff_1_1ff__allocator_a3ad062e04d2c1739a089cbc0a60dda0b_cgraph" alt=""/></div>
<!-- MAP 10 -->
</div>

</div>
</div>
<a id="a83e8958912ce97820addd8ad2ad999f7" name="a83e8958912ce97820addd8ad2ad999f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83e8958912ce97820addd8ad2ad999f7">&#9670;&#160;</a></span>realloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> * ff::ff_allocator::realloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> *</td>          <td class="paramname"><span class="paramname"><em>ptr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>newsize</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>realloc </p>
<p>It changes the size of the memory block pointed to by <code class="param">ptr</code> to <code class="param">newsize</code> bytes. If the size is too large, use OS malloc to get a new chunk of memory.</p>
<p>To be called on a <a class="el" href="classff_1_1ff__allocator.html">ff::ff_allocator</a> initialised via <code class="param"><a class="el" href="#a09e650148ba1d77a17015eb302808714" title="register ff_allocator (get ownership)">registerAllocator()</a></code> on the calling <a class="el" href="classff_1_1ff__node.html">ff::ff_node</a> (owner). Each <a class="el" href="classff_1_1ff__allocator.html">ff::ff_allocator</a> object is owned by the <a class="el" href="classff_1_1ff__node.html">ff::ff_node</a> which <code class="param">registerAllocator</code> it. Only the owner can malloc/realloc on it, whereas other <a class="el" href="classff_1_1ff__node.html" title="The FastFlow abstract contanier for a parallel activity (actor).">ff_node</a> can free. More than one <a class="el" href="classff_1_1ff__allocator.html">ff::ff_allocator</a> per <a class="el" href="classff_1_1ff__node.html" title="The FastFlow abstract contanier for a parallel activity (actor).">ff_node</a> can be defined.</p>
<p>Violating ownership cause segfault or unspected behaviour.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>the size of memory requested </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>pointer to allocated memory chunk</dd></dl>
<dl class="section note"><dt>注解</dt><dd>Very efficient but delicate to use, expert only. Not designed to end-user but to build FastFlow pattern runtime support. Not expert should use <a class="el" href="classff_1_1_f_f_allocator.html">ff::FFAllocator</a> </dd></dl>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="classff_1_1ff__allocator_a83e8958912ce97820addd8ad2ad999f7_cgraph.png" border="0" usemap="#aclassff_1_1ff__allocator_a83e8958912ce97820addd8ad2ad999f7_cgraph" alt=""/></div>
<!-- MAP 11 -->
</div>

</div>
</div>
<a id="ac09381e5eaa8279a60b7a191f2210174" name="ac09381e5eaa8279a60b7a191f2210174"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac09381e5eaa8279a60b7a191f2210174">&#9670;&#160;</a></span>register4free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sugar_8h.html#ae4f82344f573c70aa1066a2394bba345">int</a> ff::ff_allocator::register4free </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>register for the free operation </p>
<p>Threads different from the allocator (i.e. those threads that do not allocate memory) have to register themselves to the shared buffer by calling this method. In this way they are provided with a chunk of memory. Since they are registered, once their taks terminates they free the memory assigned and that memory returns back to the allocator thread's buffer, so that it can be reused. </p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="classff_1_1ff__allocator_ac09381e5eaa8279a60b7a191f2210174_cgraph.png" border="0" usemap="#aclassff_1_1ff__allocator_ac09381e5eaa8279a60b7a191f2210174_cgraph" alt=""/></div>
<!-- MAP 12 -->
</div>

</div>
</div>
<a id="a09e650148ba1d77a17015eb302808714" name="a09e650148ba1d77a17015eb302808714"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09e650148ba1d77a17015eb302808714">&#9670;&#160;</a></span>registerAllocator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sugar_8h.html#ae4f82344f573c70aa1066a2394bba345">int</a> ff::ff_allocator::registerAllocator </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>register <a class="el" href="classff_1_1ff__allocator.html" title="The ff_allocator, based on the idea of the Slab allocator">ff_allocator</a> (get ownership) </p>
<p>The <a class="el" href="classff_1_1ff__node.html" title="The FastFlow abstract contanier for a parallel activity (actor).">ff_node</a> that allocates memory have to call this method in order to register itself to the shared buffer. With this method, a <a class="el" href="classff_1_1ff__node.html" title="The FastFlow abstract contanier for a parallel activity (actor).">ff_node</a> is allowed to allocate memory. Only one <a class="el" href="classff_1_1ff__node.html" title="The FastFlow abstract contanier for a parallel activity (actor).">ff_node</a> can allocate memory.</p>
<dl class="section return"><dt>返回</dt><dd>0 if operation succedes, -1 otherwise </dd></dl>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="classff_1_1ff__allocator_a09e650148ba1d77a17015eb302808714_cgraph.png" border="0" usemap="#aclassff_1_1ff__allocator_a09e650148ba1d77a17015eb302808714_cgraph" alt=""/></div>
<!-- MAP 13 -->
</div>

</div>
</div>
<h2 class="groupheader">友元及相关符号说明</h2>
<a id="a90dcaed0c9c7a0dc2f18aaa9468cc743" name="a90dcaed0c9c7a0dc2f18aaa9468cc743"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90dcaed0c9c7a0dc2f18aaa9468cc743">&#9670;&#160;</a></span>FFAllocator</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classff_1_1_f_f_allocator.html">FFAllocator</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel friend">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">类成员变量说明</h2>
<a id="a83eef76f0a8022f2528e4e23d1ba5603" name="a83eef76f0a8022f2528e4e23d1ba5603"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83eef76f0a8022f2528e4e23d1ba5603">&#9670;&#160;</a></span>alloc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="allocator_8hpp.html#a2fbd97af3a198200b674b6658fb90a50">ALLSTATS</a> ( <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> printstats(std::ostream &amp; out) { all_stats::instance()-&gt;<a class="el" href="runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h.html#a59025bfaf390e425b4e274c966a77557">print</a>(out); } ) <a class="el" href="rml__server_8cpp.html#a6a1d6e1a12975a4e9a0b5b952e79eaad">private</a> <a class="el" href="classff_1_1_segment_allocator.html">SegmentAllocator</a> ff::ff_allocator::alloc) </td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab4acffca209f242ece598bff4499ba9e" name="ab4acffca209f242ece598bff4499ba9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4acffca209f242ece598bff4499ba9e">&#9670;&#160;</a></span>delayedReclaim</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="sugar_8h.html#ae4f82344f573c70aa1066a2394bba345">int</a> ff::ff_allocator::delayedReclaim</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>该类的文档由以下文件生成:<ul>
<li>external/taskflow/3rd-party/ff/<a class="el" href="allocator_8hpp_source.html">allocator.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceff.html">ff</a></li><li class="navelem"><a class="el" href="classff_1_1ff__allocator.html">ff_allocator</a></li>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
