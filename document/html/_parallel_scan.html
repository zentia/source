<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>source: Parallel Scan</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">source
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_parallel_scan.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Parallel Scan</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>目录</h3>
<ul>
  <li class="level1">
    <a href="#ParallelScanInclude">Include the Header</a>
  </li>
  <li class="level1">
    <a href="#WhatIsAScanOperation">What is a Scan Operation?</a>
  </li>
  <li class="level1">
    <a href="#CreateAParallelInclusiveScanTask">Create a Parallel Inclusive Scan Task</a>
  </li>
  <li class="level1">
    <a href="#CreateAParallelTransformInclusiveScanTask">Create a Parallel Transform-Inclusive Scan Task</a>
  </li>
  <li class="level1">
    <a href="#CreateAParallelExclusiveScanTask">Create a Parallel Exclusive Scan Task</a>
  </li>
  <li class="level1">
    <a href="#CreateAParallelTransformExclusiveScanTask">Create a Parallel Transform-Exclusive Scan Task</a>
  </li>
</ul>
</div>
<div class="textblock"><p>Taskflow provide template methods that construct tasks to perform parallel scan over a range of items.</p>
<h1><a class="anchor" id="ParallelScanInclude"></a>
Include the Header</h1>
<p>You need to include the header file, <code><a class="el" href="taskflow_2algorithm_2scan_8hpp.html">taskflow/algorithm/scan.hpp</a></code>, for creating a parallel-scan task.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="taskflow_2algorithm_2scan_8hpp.html">taskflow/algorithm/scan.hpp</a>&gt;</span></div>
<div class="ttc" id="ataskflow_2algorithm_2scan_8hpp_html"><div class="ttname"><a href="taskflow_2algorithm_2scan_8hpp.html">scan.hpp</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="WhatIsAScanOperation"></a>
What is a Scan Operation?</h1>
<p><a class="el" href="bench__gemm_8cpp.html#addc86e8508f14411ec98f521c520f875">A</a> parallel scan task performs the cumulative sum, also known as <em>prefix sum</em> or <em>scan</em>, of the input range and writes the result to the output range. Each element of the output range contains the running total of all earlier elements using the given binary operator for summation.</p>
<div class="image">
<img src="images/scan.png" alt=""/>
</div>
<h1><a class="anchor" id="CreateAParallelInclusiveScanTask"></a>
Create a Parallel Inclusive Scan Task</h1>
<p><a class="el" href="classtf_1_1_flow_builder.html#a1c2ace9290d83c2a006614a4d66ad588" title="creates an STL-styled parallel inclusive-scan task">tf::Taskflow::inclusive_scan(B first, E last, D d_first, BOP bop)</a> generates an <em>inclusive</em> scan, meaning that the N-th element of the output range is the sum of the first N input elements, so the N-th input element is included. For example, the code below performs an inclusive scan over five elements:</p>
<div class="fragment"><div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> = {1, 2, 3, 4, 5};</div>
<div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#a8390452002ecc7a0dadc5ae0dccc9b6c">output</a>(<a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.size())</div>
<div class="line"><a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.<a class="code hl_function" href="benchmarks_2scan_2tbb_8cpp.html#a9df94e2a15e55692c7dfbacdc9b838fd">inclusive_scan</a>(</div>
<div class="line">  <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.<a class="code hl_variable" href="ittnotify__static_8h.html#a50deeaccd8b2b4be185e1befc7860258">begin</a>(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.<a class="code hl_variable" href="ittnotify__static_8h.html#a30bf4ccd4623b7a8276bbc7f99e491c7">end</a>(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#a8390452002ecc7a0dadc5ae0dccc9b6c">output</a>.<a class="code hl_variable" href="ittnotify__static_8h.html#a50deeaccd8b2b4be185e1befc7860258">begin</a>(), <a class="code hl_namespace" href="namespacestd.html">std</a>::<a class="code hl_enumvalue" href="runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h.html#a8c33592060c5e5568b3fa116c71610baad7d18cfb3a0d8293e2f5d94ea30e04d2">plus</a>&lt;<span class="keywordtype">int</span>&gt;{}</div>
<div class="line">);</div>
<div class="line"><a class="code hl_variable" href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a>.run(<a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>).wait();</div>
<div class="line"><span class="comment">// output is {1, 3, 6, 10, 15}</span></div>
<div class="ttc" id="abenchmarks_2scan_2scan_8hpp_html_a8390452002ecc7a0dadc5ae0dccc9b6c"><div class="ttname"><a href="benchmarks_2scan_2scan_8hpp.html#a8390452002ecc7a0dadc5ae0dccc9b6c">output</a></div><div class="ttdeci">std::vector&lt; int &gt; output</div><div class="ttdef"><b>定义</b> scan.hpp:15</div></div>
<div class="ttc" id="abenchmarks_2scan_2scan_8hpp_html_ab7e6955a695fad0be513586926040b1a"><div class="ttname"><a href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a></div><div class="ttdeci">std::vector&lt; int &gt; input</div><div class="ttdef"><b>定义</b> scan.hpp:14</div></div>
<div class="ttc" id="abenchmarks_2scan_2tbb_8cpp_html_a9df94e2a15e55692c7dfbacdc9b838fd"><div class="ttname"><a href="benchmarks_2scan_2tbb_8cpp.html#a9df94e2a15e55692c7dfbacdc9b838fd">inclusive_scan</a></div><div class="ttdeci">T inclusive_scan(const std::vector&lt; T &gt; &amp;in, const T &amp;id, std::vector&lt; T &gt; &amp;out, Op op)</div><div class="ttdef"><b>定义</b> tbb.cpp:8</div></div>
<div class="ttc" id="aittnotify__static_8h_html_a30bf4ccd4623b7a8276bbc7f99e491c7"><div class="ttname"><a href="ittnotify__static_8h.html#a30bf4ccd4623b7a8276bbc7f99e491c7">end</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task __itt_model_task_instance ITT_FORMAT p void ITT_FORMAT p void ITT_FORMAT p void size_t ITT_FORMAT d void ITT_FORMAT p const wchar_t ITT_FORMAT s const char ITT_FORMAT s const char ITT_FORMAT s const char ITT_FORMAT s no args void ITT_FORMAT p size_t ITT_FORMAT d no args const wchar_t const wchar_t ITT_FORMAT s __itt_heap_function void size_t int ITT_FORMAT d __itt_heap_function void ITT_FORMAT p __itt_heap_function void void size_t int ITT_FORMAT d no args no args unsigned int ITT_FORMAT u const __itt_domain __itt_id ITT_FORMAT lu const __itt_domain __itt_id __itt_id __itt_string_handle ITT_FORMAT p const __itt_domain __itt_id ITT_FORMAT p const __itt_domain __itt_id __itt_timestamp __itt_timestamp end</div><div class="ttdef"><b>定义</b> ittnotify_static.h:182</div></div>
<div class="ttc" id="aittnotify__static_8h_html_a50deeaccd8b2b4be185e1befc7860258"><div class="ttname"><a href="ittnotify__static_8h.html#a50deeaccd8b2b4be185e1befc7860258">begin</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task __itt_model_task_instance ITT_FORMAT p void ITT_FORMAT p void ITT_FORMAT p void size_t ITT_FORMAT d void ITT_FORMAT p const wchar_t ITT_FORMAT s const char ITT_FORMAT s const char ITT_FORMAT s const char ITT_FORMAT s no args void ITT_FORMAT p size_t ITT_FORMAT d no args const wchar_t const wchar_t ITT_FORMAT s __itt_heap_function void size_t int ITT_FORMAT d __itt_heap_function void ITT_FORMAT p __itt_heap_function void void size_t int ITT_FORMAT d no args no args unsigned int ITT_FORMAT u const __itt_domain __itt_id ITT_FORMAT lu const __itt_domain __itt_id __itt_id __itt_string_handle ITT_FORMAT p const __itt_domain __itt_id ITT_FORMAT p const __itt_domain __itt_id __itt_timestamp begin</div><div class="ttdef"><b>定义</b> ittnotify_static.h:182</div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdoc">Extensions to the C++ standard library.</div><div class="ttdef"><b>定义</b> array.h:631</div></div>
<div class="ttc" id="apoisson_8hpp_html_aa56fe360bb0ae38e0082f49e394ff825"><div class="ttname"><a href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a></div><div class="ttdeci">void taskflow(int nx, int ny, double dx, double dy, double *f, int itold, int itnew, double *u, double *unew, int block_size, unsigned num_threads)</div><div class="ttdef"><b>定义</b> taskflow.cpp:6</div></div>
<div class="ttc" id="aruntime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h_html_a8c33592060c5e5568b3fa116c71610baad7d18cfb3a0d8293e2f5d94ea30e04d2"><div class="ttname"><a href="runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h.html#a8c33592060c5e5568b3fa116c71610baad7d18cfb3a0d8293e2f5d94ea30e04d2">sign::plus</a></div><div class="ttdeci">@ plus</div><div class="ttdef"><b>定义</b> base.h:700</div></div>
<div class="ttc" id="athread__pool_8cpp_html_a543e564a8407bbeac15cb2d929fec755"><div class="ttname"><a href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a></div><div class="ttdeci">tf::Executor executor</div><div class="ttdef"><b>定义</b> thread_pool.cpp:6</div></div>
</div><!-- fragment --><p>The output range may be the same as the input range, in which the scan operation is <em>in-place</em> with results written to the input range. For example, the code below performs an in-place inclusive scan over five elements:</p>
<div class="fragment"><div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> = {1, 2, 3, 4, 5};</div>
<div class="line"><a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.inclusive_scan(</div>
<div class="line">  <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.begin(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.end(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.begin(), std::plus&lt;int&gt;{}</div>
<div class="line">);</div>
<div class="line"><a class="code hl_variable" href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a>.run(<a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>).wait();</div>
<div class="line"><span class="comment">// input is {1, 3, 6, 10, 15}</span></div>
</div><!-- fragment --><p>Similar to <a class="el" href="classtf_1_1_flow_builder.html#a1c2ace9290d83c2a006614a4d66ad588" title="creates an STL-styled parallel inclusive-scan task">tf::Taskflow::inclusive_scan(B first, E last, D d_first, BOP bop)</a>, <a class="el" href="classtf_1_1_flow_builder.html#a0b589a5bbf9b18e6484fa9e554d39a39" title="creates an STL-styled parallel inclusive-scan task with an initial value">tf::Taskflow::inclusive_scan(B first, E last, D d_first, BOP bop, T init)</a> performs an inclusive scan but with an additional initial value <code>init</code>. For example, the code below performs an inclusive scan over five elements plus an initial value:</p>
<div class="fragment"><div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> = {1, 2, 3, 4, 5};</div>
<div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#a8390452002ecc7a0dadc5ae0dccc9b6c">output</a>(<a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.size());</div>
<div class="line"><span class="comment">// performs inclusive scan with an initial value</span></div>
<div class="line"><a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.inclusive_scan(</div>
<div class="line">  <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.begin(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.end(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#a8390452002ecc7a0dadc5ae0dccc9b6c">output</a>.begin(), std::plus&lt;int&gt;{}, -1</div>
<div class="line">);</div>
<div class="line"><a class="code hl_variable" href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a>.run(<a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>).wait();</div>
<div class="line"><span class="comment">// output is {0, 2, 5, 9, 14}</span></div>
</div><!-- fragment --><h1><a class="anchor" id="CreateAParallelTransformInclusiveScanTask"></a>
Create a Parallel Transform-Inclusive Scan Task</h1>
<p>You can transform elements in the input range before running inclusive scan using <a class="el" href="classtf_1_1_flow_builder.html#a82f3c3f49a2d52cd52f6eac07a659e9c" title="creates an STL-styled parallel transform-inclusive scan task">tf::Taskflow::transform_inclusive_scan(B first, E last, D d_first, BOP bop, UOP uop)</a> and <a class="el" href="classtf_1_1_flow_builder.html#a49f7e17d02c708035b9134d8c6c89f90" title="creates an STL-styled parallel transform-inclusive scan task">tf::Taskflow::transform_inclusive_scan(B first, E last, D d_first, BOP bop, UOP uop, T init)</a>. For example, the code below performs an inclusive scan over five transformed elements:</p>
<div class="fragment"><div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> = {1, 2, 3, 4, 5};</div>
<div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#a8390452002ecc7a0dadc5ae0dccc9b6c">output</a>(<a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.size());</div>
<div class="line"><a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.transform_inclusive_scan(</div>
<div class="line">  <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.begin(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.end(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#a8390452002ecc7a0dadc5ae0dccc9b6c">output</a>.begin(), std::plus&lt;int&gt;{}, </div>
<div class="line">  [] (<span class="keywordtype">int</span> item) { return -item; }</div>
<div class="line">);</div>
<div class="line"><a class="code hl_variable" href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a>.run(<a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>).wait();</div>
<div class="line"><span class="comment">// output is {-1, -3, -6, -10, -15}</span></div>
</div><!-- fragment --><p>You can also associate the transform-inclusive scan with an initial value using <a class="el" href="classtf_1_1_flow_builder.html#a49f7e17d02c708035b9134d8c6c89f90" title="creates an STL-styled parallel transform-inclusive scan task">tf::Taskflow::transform_inclusive_scan(B first, E last, D d_first, BOP bop, UOP uop, T init)</a>. Only elements in the input range will be transformed using <code>uop</code>, i.e., the initial value <code>init</code> does not participate in <code>uop</code>.</p>
<div class="fragment"><div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> = {1, 2, 3, 4, 5};</div>
<div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#a8390452002ecc7a0dadc5ae0dccc9b6c">output</a>(<a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.size());</div>
<div class="line"><a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.transform_inclusive_scan(</div>
<div class="line">  <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.begin(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.end(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#a8390452002ecc7a0dadc5ae0dccc9b6c">output</a>.begin(), std::plus&lt;int&gt;{}, </div>
<div class="line">  [] (<span class="keywordtype">int</span> item) { return -item; },</div>
<div class="line">  -1</div>
<div class="line">);</div>
<div class="line"><a class="code hl_variable" href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a>.run(<a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>).wait();</div>
<div class="line"><span class="comment">// output is {-2, -4, -7, -11, -16}</span></div>
</div><!-- fragment --><h1><a class="anchor" id="CreateAParallelExclusiveScanTask"></a>
Create a Parallel Exclusive Scan Task</h1>
<p><a class="el" href="classtf_1_1_flow_builder.html#a4e0d618d8eb0b3b2e5e00443a10bf512" title="creates an STL-styled parallel exclusive-scan task">tf::Taskflow::exclusive_scan(B first, E last, D d_first, T init, BOP bop)</a> generates an <em>exclusive</em> scan with the given initial value. The N-th element of the output range is the sum of the first N-1 input elements, so the N-th input element is included. For example, the code below performs an exclusive scan over five elements with an initial value -1:</p>
<div class="fragment"><div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> = {1, 2, 3, 4, 5};</div>
<div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#a8390452002ecc7a0dadc5ae0dccc9b6c">output</a>(<a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.size())</div>
<div class="line"><a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.<a class="code hl_function" href="benchmarks_2scan_2tbb_8cpp.html#a54b86a30e8eb88ad96d3cff44cb960c0">exclusive_scan</a>(</div>
<div class="line">  <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.<a class="code hl_variable" href="ittnotify__static_8h.html#a50deeaccd8b2b4be185e1befc7860258">begin</a>(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.<a class="code hl_variable" href="ittnotify__static_8h.html#a30bf4ccd4623b7a8276bbc7f99e491c7">end</a>(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#a8390452002ecc7a0dadc5ae0dccc9b6c">output</a>.<a class="code hl_variable" href="ittnotify__static_8h.html#a50deeaccd8b2b4be185e1befc7860258">begin</a>(), -1, <a class="code hl_namespace" href="namespacestd.html">std</a>::<a class="code hl_enumvalue" href="runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h.html#a8c33592060c5e5568b3fa116c71610baad7d18cfb3a0d8293e2f5d94ea30e04d2">plus</a>&lt;<span class="keywordtype">int</span>&gt;{}</div>
<div class="line">);</div>
<div class="line"><a class="code hl_variable" href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a>.run(<a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>).wait();</div>
<div class="line"><span class="comment">// output is {-1, 0, 2, 5, 9}</span></div>
<div class="ttc" id="abenchmarks_2scan_2tbb_8cpp_html_a54b86a30e8eb88ad96d3cff44cb960c0"><div class="ttname"><a href="benchmarks_2scan_2tbb_8cpp.html#a54b86a30e8eb88ad96d3cff44cb960c0">exclusive_scan</a></div><div class="ttdeci">T exclusive_scan(const std::vector&lt; T &gt; &amp;in, const T &amp;id, std::vector&lt; T &gt; &amp;out, Op op)</div><div class="ttdef"><b>定义</b> tbb.cpp:28</div></div>
</div><!-- fragment --><p>The output range may be the same as the input range, in which the scan operation is <em>in-place</em> with results written to the input range. For example, the code below performs an in-place exclusive scan over five elements with an initial -1:</p>
<div class="fragment"><div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> = {1, 2, 3, 4, 5};</div>
<div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#a8390452002ecc7a0dadc5ae0dccc9b6c">output</a>(<a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.size());</div>
<div class="line"><a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.exclusive_scan(</div>
<div class="line">  <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.begin(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.end(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#a8390452002ecc7a0dadc5ae0dccc9b6c">output</a>.begin(), -1, std::plus&lt;int&gt;{}</div>
<div class="line">);</div>
<div class="line"><a class="code hl_variable" href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a>.run(<a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>).wait();</div>
<div class="line"><span class="comment">// output is {-1, 0, 2, 5, 9}</span></div>
</div><!-- fragment --><h1><a class="anchor" id="CreateAParallelTransformExclusiveScanTask"></a>
Create a Parallel Transform-Exclusive Scan Task</h1>
<p>You can transform elements in the input range before running exclusive scan using <a class="el" href="classtf_1_1_flow_builder.html#a8549478ef819699b30f8daf88f04d577" title="creates an STL-styled parallel transform-exclusive scan task">tf::Taskflow::transform_exclusive_scan(B first, E last, D d_first, T init, BOP bop, UOP uop)</a>. For example, the code below performs an exclusive scan over five transformed elements:</p>
<div class="fragment"><div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> = {1, 2, 3, 4, 5};</div>
<div class="line">std::vector&lt;int&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#a8390452002ecc7a0dadc5ae0dccc9b6c">output</a>(<a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.size());</div>
<div class="line"><a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.transform_exclusive_scan(</div>
<div class="line">  <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.begin(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.end(), <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.begin(), -1, std::plus&lt;int&gt;{},</div>
<div class="line">  [](<span class="keywordtype">int</span> item) { return -item; }</div>
<div class="line">);</div>
<div class="line"><a class="code hl_variable" href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a>.run(<a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>).wait();</div>
<div class="line"><span class="comment">// output is {-1, -2, -4, -7, -11}</span></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
