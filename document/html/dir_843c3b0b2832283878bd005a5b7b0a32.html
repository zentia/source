<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>source: runtime/xxHash 目录参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">source
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_843c3b0b2832283878bd005a5b7b0a32.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">xxHash 目录参考</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
xxHash 的目录依赖关系图</div>
<div class="dyncontent">
<div class="center"><img src="dir_843c3b0b2832283878bd005a5b7b0a32_dep.png" border="0" usemap="#adir__843c3b0b2832283878bd005a5b7b0a32__dep" alt="runtime/xxHash"/></div>
<!-- MAP 0 -->
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="subdirs" name="subdirs"></a>
目录</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_1dd0b8ee4a0a0044b1a08a1fa0f2836b.html">cli</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_77b241fa334b1a496e7e69f73c5e28cd.html">cmake_unofficial</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_43719946888696fdb5d6753b2deb349e.html">doc</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_a6f2b00cf54332e4e79922feaf4bd016.html">fuzz</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_295429af828a0fb363edf59f9db0238a.html">tests</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
文件</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><a href="xxh3_8h_source.html"><span class="icondoc"></span></a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xxh3_8h.html">xxh3.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="icondoc"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xxh__x86dispatch_8c.html">xxh_x86dispatch.c</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><a href="xxh__x86dispatch_8h_source.html"><span class="icondoc"></span></a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xxh__x86dispatch_8h.html">xxh_x86dispatch.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="icondoc"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xxhash_8c.html">xxhash.c</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><a href="xxhash_8h_source.html"><span class="icondoc"></span></a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xxhash_8h.html">xxhash.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<p>xxHash is an Extremely fast Hash algorithm, processing at RAM speed limits. Code is highly portable, and produces hashes identical across all platforms (little / big endian). The library includes the following algorithms :</p><ul>
<li>XXH32 : generates 32-bit hashes, using 32-bit arithmetic</li>
<li>XXH64 : generates 64-bit hashes, using 64-bit arithmetic</li>
<li>XXH3 (since <code>v0.8.0</code>): generates 64 or 128-bit hashes, using vectorized arithmetic. The 128-bit variant is called XXH128.</li>
</ul>
<p>All variants successfully complete the <a href="https://code.google.com/p/smhasher/wiki/SMHasher">SMHasher</a> test suite which evaluates the quality of hash functions (collision, dispersion and randomness). Additional tests, which evaluate more thoroughly speed and collision properties of 64-bit hashes, <a href="https://github.com/Cyan4973/xxHash/tree/dev/tests">are also provided</a>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Branch   </th><th class="markdownTableHeadNone">Status    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">release   </td><td class="markdownTableBodyNone"><a href="https://github.com/Cyan4973/xxHash/actions?query=branch%3Arelease+"><img src="https://github.com/Cyan4973/xxHash/actions/workflows/ci.yml/badge.svg?branch=release" alt="Build Status" style="pointer-events: none;" class="inline"/></a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dev   </td><td class="markdownTableBodyNone"><a href="https://github.com/Cyan4973/xxHash/actions?query=branch%3Adev+"><img src="https://github.com/Cyan4973/xxHash/actions/workflows/ci.yml/badge.svg?branch=dev" alt="Build Status" style="pointer-events: none;" class="inline"/></a>   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md442"></a>
Benchmarks</h1>
<p>The benchmarked reference system uses an Intel i7-9700K cpu, and runs Ubuntu x64 20.04. The <a href="https://github.com/Cyan4973/xxHash/tree/release/tests/bench">open source benchmark program</a> is compiled with <code>clang</code> v10.0 using <code>-O3</code> flag.</p>
<p>| Hash Name | Width | Bandwidth (GB/s) | Small Data Velocity | Quality | Comment | | ------&mdash; | --&mdash; | -------------&mdash; | --&mdash; | &mdash; | &mdash; | | <b>XXH3</b> (SSE2) | 64 | 31.5 GB/s | 133.1 | 10 | <b>XXH128</b> (SSE2) | 128 | 29.6 GB/s | 118.1 | 10 | <em>RAM sequential read</em> | N/A | 28.0 GB/s | N/A | N/A | <em>for reference</em> | City64 | 64 | 22.0 GB/s | 76.6 | 10 | T1ha2 | 64 | 22.0 GB/s | 99.0 | 9 | Slightly worse <a href="https://github.com/Cyan4973/xxHash/wiki/Collision-ratio-comparison#collision-study">collisions</a> | City128 | 128 | 21.7 GB/s | 57.7 | 10 | <b>XXH64</b> | 64 | 19.4 GB/s | 71.0 | 10 | SpookyHash | 64 | 19.3 GB/s | 53.2 | 10 | Mum | 64 | 18.0 GB/s | 67.0 | 9 | Slightly worse <a href="https://github.com/Cyan4973/xxHash/wiki/Collision-ratio-comparison#collision-study">collisions</a> | <b>XXH32</b> | 32 | 9.7 GB/s | 71.9 | 10 | City32 | 32 | 9.1 GB/s | 66.0 | 10 | Murmur3 | 32 | 3.9 GB/s | 56.1 | 10 | SipHash | 64 | 3.0 GB/s | 43.2 | 10 | FNV64 | 64 | 1.2 GB/s | 62.7 | 5 | Poor avalanche properties | Blake2 | 256 | 1.1 GB/s | 5.1 | 10 | Cryptographic | SHA1 | 160 | 0.8 GB/s | 5.6 | 10 | Cryptographic but broken | MD5 | 128 | 0.6 GB/s | 7.8 | 10 | Cryptographic but broken</p>
<p>note 1: Small data velocity is a <em>rough</em> evaluation of algorithm's efficiency on small data. For more detailed analysis, please refer to next paragraph.</p>
<p>note 2: some algorithms feature <em>faster than RAM</em> speed. In which case, they can only reach their full speed potential when input is already in CPU cache (L3 or better). Otherwise, they max out on RAM speed limit.</p>
<h2><a class="anchor" id="autotoc_md443"></a>
Small data</h2>
<p>Performance on large data is only one part of the picture. Hashing is also very useful in constructions like hash tables and bloom filters. In these use cases, it's frequent to hash a lot of small data (starting at a few bytes). Algorithm's performance can be very different for such scenarios, since parts of the algorithm, such as initialization or finalization, become fixed cost. The impact of branch mis-prediction also becomes much more present.</p>
<p>XXH3 has been designed for excellent performance on both long and small inputs, which can be observed in the following graph:</p>
<p><img src="https://user-images.githubusercontent.com/750081/61976089-aedeab00-af9f-11e9-9239-e5375d6c080f.png" alt="XXH3, latency, random size" class="inline"/></p>
<p>For a more detailed analysis, please visit the wiki : <a href="https://github.com/Cyan4973/xxHash/wiki/Performance-comparison#benchmarks-concentrating-on-small-data-">https://github.com/Cyan4973/xxHash/wiki/Performance-comparison#benchmarks-concentrating-on-small-data-</a></p>
<h1><a class="anchor" id="autotoc_md444"></a>
Quality</h1>
<p>Speed is not the only property that matters. Produced hash values must respect excellent dispersion and randomness properties, so that any sub-section of it can be used to maximally spread out a table or index, as well as reduce the amount of collisions to the minimal theoretical level, following the <a href="https://en.wikipedia.org/wiki/Birthday_problem">birthday paradox</a>.</p>
<p><code>xxHash</code> has been tested with Austin Appleby's excellent SMHasher test suite, and passes all tests, ensuring reasonable quality levels. It also passes extended tests from <a href="https://github.com/rurban/smhasher">newer forks of SMHasher</a>, featuring additional scenarios and conditions.</p>
<p>Finally, xxHash provides its own <a href="https://github.com/Cyan4973/xxHash/tree/dev/tests/collisions">massive collision tester</a>, able to generate and compare billions of hashes to test the limits of 64-bit hash algorithms. On this front too, xxHash features good results, in line with the <a href="https://en.wikipedia.org/wiki/Birthday_problem">birthday paradox</a>. A more detailed analysis is documented <a href="https://github.com/Cyan4973/xxHash/wiki/Collision-ratio-comparison">in the wiki</a>.</p>
<h2><a class="anchor" id="autotoc_md445"></a>
Build modifiers</h2>
<p>The following macros can be set at compilation time to modify <code>libxxhash</code>'s behavior. They are generally disabled by default.</p>
<ul>
<li><code>XXH_INLINE_ALL</code>: Make all functions <code>inline</code>, implementation is directly included within <code><a class="el" href="xxhash_8h.html">xxhash.h</a></code>. Inlining functions is beneficial for speed, notably for small keys. It's <em>extremely effective</em> when key's length is expressed as <em>a compile time constant</em>, with performance improvements observed in the +200% range . See <a href="https://fastcompression.blogspot.com/2018/03/xxhash-for-small-keys-impressive-power.html">this article</a> for details.</li>
<li><code>XXH_PRIVATE_API</code>: same outcome as <code>XXH_INLINE_ALL</code>. Still available for legacy support. The name underlines that <code>XXH_*</code> symbol names will not be exported.</li>
<li><code>XXH_STATIC_LINKING_ONLY</code>: gives access to internal state declaration, required for static allocation. Incompatible with dynamic linking, due to risks of ABI changes.</li>
<li><code>XXH_NAMESPACE</code>: Prefixes all symbols with the value of <code>XXH_NAMESPACE</code>. This macro can only use compilable character set. Useful to evade symbol naming collisions, in case of multiple inclusions of xxHash's source code. Client applications still use the regular function names, as symbols are automatically translated through <code><a class="el" href="xxhash_8h.html">xxhash.h</a></code>.</li>
<li><code>XXH_FORCE_ALIGN_CHECK</code>: Use a faster direct read path when input is aligned. This option can result in dramatic performance improvement on architectures unable to load memory from unaligned addresses when input to hash happens to be aligned on 32 or 64-bit boundaries. It is (slightly) detrimental on platform with good unaligned memory access performance (same instruction for both aligned and unaligned accesses). This option is automatically disabled on <code>x86</code>, <code>x64</code> and <code>aarch64</code>, and enabled on all other platforms.</li>
<li><code>XXH_FORCE_MEMORY_ACCESS</code>: The default method <code>0</code> uses a portable <code>memcpy()</code> notation. Method <code>1</code> uses a gcc-specific <code>packed</code> attribute, which can provide better performance for some targets. Method <code>2</code> forces unaligned reads, which is not standard compliant, but might sometimes be the only way to extract better read performance. Method <code>3</code> uses a byteshift operation, which is best for old compilers which don't inline <code>memcpy()</code> or big-endian systems without a byteswap instruction.</li>
<li><code>XXH_CPU_LITTLE_ENDIAN</code>: By default, endianness is determined by a runtime test resolved at compile time. If, for some reason, the compiler cannot simplify the runtime test, it can cost performance. It's possible to skip auto-detection and simply state that the architecture is little-endian by setting this macro to 1. Setting it to 0 states big-endian.</li>
<li><code>XXH_ENABLE_AUTOVECTORIZE</code>: Auto-vectorization may be triggered for XXH32 and XXH64, depending on cpu vector capabilities and compiler version. Note: auto-vectorization tends to be triggered more easily with recent versions of <code>clang</code>. For XXH32, SSE4.1 or equivalent (NEON) is enough, while XXH64 requires AVX512. Unfortunately, auto-vectorization is generally detrimental to XXH performance. For this reason, the xxhash source code tries to prevent auto-vectorization by default. That being said, systems evolve, and this conclusion is not forthcoming. For example, it has been reported that recent Zen4 cpus are more likely to improve performance with vectorization. Therefore, should you prefer or want to test vectorized code, you can enable this flag: it will remove the no-vectorization protection code, thus making it more likely for XXH32 and XXH64 to be auto-vectorized.</li>
<li><code>XXH32_ENDJMP</code>: Switch multi-branch finalization stage of XXH32 by a single jump. This is generally undesirable for performance, especially when hashing inputs of random sizes. But depending on exact architecture and compiler, a jump might provide slightly better performance on small inputs. Disabled by default.</li>
<li><code>XXH_IMPORT</code>: MSVC specific: should only be defined for dynamic linking, as it prevents linkage errors.</li>
<li><code>XXH_NO_STDLIB</code>: Disable invocation of <code>&lt;stdlib.h&gt;</code> functions, notably <code><a class="el" href="mimalloc-override_8h.html#a99aa8fd9f4831e1b0fa9e1cdcde3e249">malloc()</a></code> and <code><a class="el" href="mimalloc-override_8h.html#a9d4b5df3530d1bc733070a4669ba6ebc">free()</a></code>. <code>libxxhash</code>'s <code>XXH*_createState()</code> will always fail and return <code>NULL</code>. But one-shot hashing (like <code><a class="el" href="group___x_x_h32__family.html#ga49360c30d0eef2cd4e20cabfe6ab1c55" title="Calculates the 32-bit hash of input using xxHash32.">XXH32()</a></code>) or streaming using statically allocated states still work as expected. This build flag is useful for embedded environments without dynamic allocation.</li>
<li><code>XXH_memcpy</code>, <code>XXH_memset</code>, <code>XXH_memcmp</code> : redirect <code>memcpy()</code>, <code>memset()</code> and <code>memcmp()</code> to some user-selected symbol at compile time. Redirecting all 3 removes the need to include <code>&lt;<a class="el" href="string_8h.html">string.h</a>&gt;</code> standard library.</li>
<li><code>XXH_NO_EXTERNC_GUARD</code>: When <code><a class="el" href="xxhash_8h.html">xxhash.h</a></code> is compiled in C++ mode, removes the <code>extern "C" { .. }</code> block guard.</li>
<li><code>XXH_DEBUGLEVEL</code> : When set to any value &gt;= 1, enables <code>assert()</code> statements. This (slightly) slows down execution, but may help finding bugs during debugging sessions.</li>
</ul>
<h3><a class="anchor" id="autotoc_md446"></a>
Binary size control</h3>
<ul>
<li><code>XXH_NO_XXH3</code> : removes symbols related to <code>XXH3</code> (both 64 &amp; 128 bits) from generated binary. <code>XXH3</code> is by far the largest contributor to <code>libxxhash</code> size, so it's useful to reduce binary size for applications which do not employ <code>XXH3</code>.</li>
<li><code>XXH_NO_LONG_LONG</code>: removes compilation of algorithms relying on 64-bit <code>long long</code> types which include <code>XXH3</code> and <code>XXH64</code>. Only <code>XXH32</code> will be compiled. Useful for targets (architectures and compilers) without 64-bit support.</li>
<li><code>XXH_NO_STREAM</code>: Disables the streaming API, limiting the library to single shot variants only.</li>
<li><code>XXH_NO_INLINE_HINTS</code>: By default, xxHash uses <code>__attribute__((always_inline))</code> and <code>__forceinline</code> to improve performance at the cost of code size. Defining this macro to 1 will mark all internal functions as <code>static</code>, allowing the compiler to decide whether to inline a function or not. This is very useful when optimizing for smallest binary size, and is automatically defined when compiling with <code>-O0</code>, <code>-Os</code>, <code>-Oz</code>, or <code>-fno-inline</code> on GCC and Clang. It may also be required to successfully compile using <code>-Og</code>, depending on compiler version.</li>
<li><code>XXH_SIZE_OPT</code>: <code>0</code>: default, optimize for speed <code>1</code>: default for <code>-Os</code> and <code>-Oz</code>: disables some speed hacks for size optimization <code>2</code>: makes code as small as possible, performance may cry</li>
</ul>
<h3><a class="anchor" id="autotoc_md447"></a>
Build modifiers specific for XXH3</h3>
<ul>
<li><code>XXH_VECTOR</code> : manually select a vector instruction set (default: auto-selected at compilation time). Available instruction sets are <code>XXH_SCALAR</code>, <code>XXH_SSE2</code>, <code>XXH_AVX2</code>, <code>XXH_AVX512</code>, <code>XXH_NEON</code> and <code>XXH_VSX</code>. Compiler may require additional flags to ensure proper support (for example, <code>gcc</code> on x86_64 requires <code>-mavx2</code> for <code>AVX2</code>, or <code>-mavx512f</code> for <code>AVX512</code>).</li>
<li><code>XXH_PREFETCH_DIST</code> : select prefetching distance. For close-to-metal adaptation to specific hardware platforms. XXH3 only.</li>
<li><code>XXH_NO_PREFETCH</code> : disable prefetching. Some platforms or situations may perform better without prefetching. XXH3 only.</li>
</ul>
<h3><a class="anchor" id="autotoc_md448"></a>
Makefile variables</h3>
<p>When compiling the Command Line Interface <code>xxhsum</code> using <code>make</code>, the following environment variables can also be set :</p><ul>
<li><code>DISPATCH=1</code> : use <code><a class="el" href="xxh__x86dispatch_8c.html">xxh_x86dispatch.c</a></code>, select at runtime between <code>scalar</code>, <code>sse2</code>, <code>avx2</code> or <code>avx512</code> instruction set. This option is only valid for <code>x86</code>/<code>x64</code> systems. It is enabled by default when target <code>x86</code>/<code>x64</code> is detected. It can be forcefully turned off using <code>DISPATCH=0</code>.</li>
<li><code>LIBXXH_DISPATCH=1</code> : same idea, implemented a runtime vector extension detector, but within <code>libxxhash</code>. This parameter is disabled by default. When enabled (only valid for <code>x86</code>/<code>x64</code> systems), new symbols published in <code><a class="el" href="xxh__x86dispatch_8h.html">xxh_x86dispatch.h</a></code> become accessible. At the time of this writing, it's required to include <code><a class="el" href="xxh__x86dispatch_8h.html">xxh_x86dispatch.h</a></code> in order to access the symbols with runtime vector extension detection.</li>
<li><code>XXH_1ST_SPEED_TARGET</code> : select an initial speed target, expressed in MB/s, for the first speed test in benchmark mode. Benchmark will adjust the target at subsequent iterations, but the first test is made "blindly" by targeting this speed. Currently conservatively set to 10 MB/s, to support very slow (emulated) platforms.</li>
<li><code>NODE_JS=1</code> : When compiling <code>xxhsum</code> for Node.js with Emscripten, this links the <code>NODERAWFS</code> library for unrestricted filesystem access and patches <code>isatty</code> to make the command line utility correctly detect the terminal. This does make the binary specific to Node.js.</li>
</ul>
<h2><a class="anchor" id="autotoc_md449"></a>
Building xxHash - Using vcpkg</h2>
<p>You can download and install xxHash using the <a href="https://github.com/Microsoft/vcpkg">vcpkg</a> dependency manager: </p><pre class="fragment">git clone https://github.com/Microsoft/vcpkg.git
cd vcpkg
./bootstrap-vcpkg.sh
./vcpkg integrate install
./vcpkg install xxhash
</pre><p>The xxHash port in vcpkg is kept up to date by Microsoft team members and community contributors. If the version is out of date, please <a href="https://github.com/Microsoft/vcpkg">create an issue or pull request</a> on the vcpkg repository.</p>
<h2><a class="anchor" id="autotoc_md450"></a>
Example</h2>
<p>The simplest example calls xxhash 64-bit variant as a one-shot function generating a hash value from a single buffer, and invoked from a C/C++ program:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="xxhash_8h.html">xxhash.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line">    (...)</div>
<div class="line">    <a class="code hl_typedef" href="group__public.html#ga3d2b19e87ac87eb107372946fce59b26">XXH64_hash_t</a> hash = <a class="code hl_function" href="group___x_x_h64__family.html#ga582b359c2b7a04d83837f58e72e60a09">XXH64</a>(<a class="code hl_define" href="sugar_8h.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a>, <a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a>, seed);</div>
<div class="line">}</div>
<div class="ttc" id="agroup___x_x_h64__family_html_ga582b359c2b7a04d83837f58e72e60a09"><div class="ttname"><a href="group___x_x_h64__family.html#ga582b359c2b7a04d83837f58e72e60a09">XXH64</a></div><div class="ttdeci">XXH_PUBLIC_API XXH_PUREF XXH64_hash_t XXH64(XXH_NOESCAPE const void *input, size_t length, XXH64_hash_t seed)</div><div class="ttdoc">Calculates the 64-bit hash of input using xxHash64.</div></div>
<div class="ttc" id="agroup__public_html_ga3d2b19e87ac87eb107372946fce59b26"><div class="ttname"><a href="group__public.html#ga3d2b19e87ac87eb107372946fce59b26">XXH64_hash_t</a></div><div class="ttdeci">unsigned long long XXH64_hash_t</div><div class="ttdef"><b>定义</b> xxhash.h:883</div></div>
<div class="ttc" id="aimgui__impl__opengl3__loader_8h_html_a3d1e3edfcf61ca2d831883e1afbad89e"><div class="ttname"><a href="imgui__impl__opengl3__loader_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a></div><div class="ttdeci">GLsizeiptr size</div><div class="ttdef"><b>定义</b> imgui_impl_opengl3_loader.h:272</div></div>
<div class="ttc" id="asugar_8h_html_aaadc06b5dac8070de2c8677210967bdb"><div class="ttname"><a href="sugar_8h.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a></div><div class="ttdeci">#define buffer</div><div class="ttdef"><b>定义</b> sugar.h:84</div></div>
<div class="ttc" id="axxhash_8h_html"><div class="ttname"><a href="xxhash_8h.html">xxhash.h</a></div></div>
</div><!-- fragment --><p>Streaming variant is more involved, but makes it possible to provide data incrementally:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;stdlib.h&quot;</span>   <span class="comment">/* abort() */</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="xxhash_8h.html">xxhash.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="group__public.html#ga3d2b19e87ac87eb107372946fce59b26">XXH64_hash_t</a> calcul_hash_streaming(FileHandler fh)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* create a hash state */</span></div>
<div class="line">    <a class="code hl_typedef" href="group___x_x_h64__family.html#ga0702bdbc80b0cf9e94f2379f7d839b8c">XXH64_state_t</a>* <span class="keyword">const</span> state = <a class="code hl_function" href="group___x_x_h64__family.html#gad10695b225a47b31a9952545547f9f81">XXH64_createState</a>();</div>
<div class="line">    <span class="keywordflow">if</span> (state==<a class="code hl_define" href="eabase_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) abort();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">size_t</span> <span class="keyword">const</span> bufferSize = SOME_SIZE;</div>
<div class="line">    <span class="keywordtype">void</span>* <span class="keyword">const</span> <a class="code hl_define" href="sugar_8h.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a> = <a class="code hl_define" href="mimalloc-override_8h.html#a99aa8fd9f4831e1b0fa9e1cdcde3e249">malloc</a>(bufferSize);</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_define" href="sugar_8h.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a>==<a class="code hl_define" href="eabase_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) abort();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialize state with selected seed */</span></div>
<div class="line">    <a class="code hl_typedef" href="group__public.html#ga3d2b19e87ac87eb107372946fce59b26">XXH64_hash_t</a> <span class="keyword">const</span> seed = 0;   <span class="comment">/* or any other value */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="group___x_x_h64__family.html#ga3d9aebe63b2d4687808385c70460de1a">XXH64_reset</a>(state, seed) == <a class="code hl_enumvalue" href="group__public.html#gga5020905455674b8c83c1dbc73f0d3534a462a18276729783125c7116cf102667f">XXH_ERROR</a>) abort();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Feed the state with input data, any size, any number of times */</span></div>
<div class="line">    (...)</div>
<div class="line">    <span class="keywordflow">while</span> ( <span class="comment">/* some data left */</span> ) {</div>
<div class="line">        <span class="keywordtype">size_t</span> <span class="keyword">const</span> <a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#a011fc24f10426c01349e94a4edd4b0d5">length</a> = get_more_data(<a class="code hl_define" href="sugar_8h.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a>, bufferSize, fh);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code hl_function" href="group___x_x_h64__family.html#ga8cf987b6f8910fea00aa458b6a513e01">XXH64_update</a>(state, <a class="code hl_define" href="sugar_8h.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a>, <a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#a011fc24f10426c01349e94a4edd4b0d5">length</a>) == <a class="code hl_enumvalue" href="group__public.html#gga5020905455674b8c83c1dbc73f0d3534a462a18276729783125c7116cf102667f">XXH_ERROR</a>) abort();</div>
<div class="line">        (...)</div>
<div class="line">    }</div>
<div class="line">    (...)</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Produce the final hash value */</span></div>
<div class="line">    <a class="code hl_typedef" href="group__public.html#ga3d2b19e87ac87eb107372946fce59b26">XXH64_hash_t</a> <span class="keyword">const</span> hash = <a class="code hl_function" href="group___x_x_h64__family.html#ga964952da5970b334e217412a05d869ca">XXH64_digest</a>(state);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* State could be re-used; but in this example, it is simply freed  */</span></div>
<div class="line">    <a class="code hl_define" href="mimalloc-override_8h.html#a9d4b5df3530d1bc733070a4669ba6ebc">free</a>(<a class="code hl_define" href="sugar_8h.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a>);</div>
<div class="line">    <a class="code hl_function" href="group___x_x_h64__family.html#gae490ef51db9c960da09189c2774cf82e">XXH64_freeState</a>(state);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> hash;</div>
<div class="line">}</div>
<div class="ttc" id="aeabase_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="eabase_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>定义</b> eabase.h:83</div></div>
<div class="ttc" id="agroup___x_x_h64__family_html_ga0702bdbc80b0cf9e94f2379f7d839b8c"><div class="ttname"><a href="group___x_x_h64__family.html#ga0702bdbc80b0cf9e94f2379f7d839b8c">XXH64_state_t</a></div><div class="ttdeci">struct XXH64_state_s XXH64_state_t</div><div class="ttdoc">The opaque state struct for the XXH64 streaming API.</div><div class="ttdef"><b>定义</b> xxhash.h:927</div></div>
<div class="ttc" id="agroup___x_x_h64__family_html_ga3d9aebe63b2d4687808385c70460de1a"><div class="ttname"><a href="group___x_x_h64__family.html#ga3d9aebe63b2d4687808385c70460de1a">XXH64_reset</a></div><div class="ttdeci">XXH_PUBLIC_API XXH_errorcode XXH64_reset(XXH_NOESCAPE XXH64_state_t *statePtr, XXH64_hash_t seed)</div><div class="ttdoc">Resets an XXH64_state_t to begin a new hash.</div></div>
<div class="ttc" id="agroup___x_x_h64__family_html_ga8cf987b6f8910fea00aa458b6a513e01"><div class="ttname"><a href="group___x_x_h64__family.html#ga8cf987b6f8910fea00aa458b6a513e01">XXH64_update</a></div><div class="ttdeci">XXH_PUBLIC_API XXH_errorcode XXH64_update(XXH_NOESCAPE XXH64_state_t *statePtr, XXH_NOESCAPE const void *input, size_t length)</div><div class="ttdoc">Consumes a block of input to an XXH64_state_t.</div></div>
<div class="ttc" id="agroup___x_x_h64__family_html_ga964952da5970b334e217412a05d869ca"><div class="ttname"><a href="group___x_x_h64__family.html#ga964952da5970b334e217412a05d869ca">XXH64_digest</a></div><div class="ttdeci">XXH_PUBLIC_API XXH_PUREF XXH64_hash_t XXH64_digest(XXH_NOESCAPE const XXH64_state_t *statePtr)</div><div class="ttdoc">Returns the calculated hash value from an XXH64_state_t.</div></div>
<div class="ttc" id="agroup___x_x_h64__family_html_gad10695b225a47b31a9952545547f9f81"><div class="ttname"><a href="group___x_x_h64__family.html#gad10695b225a47b31a9952545547f9f81">XXH64_createState</a></div><div class="ttdeci">XXH_PUBLIC_API XXH_MALLOCF XXH64_state_t * XXH64_createState(void)</div><div class="ttdoc">Allocates an XXH64_state_t.</div></div>
<div class="ttc" id="agroup___x_x_h64__family_html_gae490ef51db9c960da09189c2774cf82e"><div class="ttname"><a href="group___x_x_h64__family.html#gae490ef51db9c960da09189c2774cf82e">XXH64_freeState</a></div><div class="ttdeci">XXH_PUBLIC_API XXH_errorcode XXH64_freeState(XXH64_state_t *statePtr)</div><div class="ttdoc">Frees an XXH64_state_t.</div></div>
<div class="ttc" id="agroup__public_html_gga5020905455674b8c83c1dbc73f0d3534a462a18276729783125c7116cf102667f"><div class="ttname"><a href="group__public.html#gga5020905455674b8c83c1dbc73f0d3534a462a18276729783125c7116cf102667f">XXH_ERROR</a></div><div class="ttdeci">@ XXH_ERROR</div><div class="ttdef"><b>定义</b> xxhash.h:574</div></div>
<div class="ttc" id="aimgui__impl__opengl3__loader_8h_html_a011fc24f10426c01349e94a4edd4b0d5"><div class="ttname"><a href="imgui__impl__opengl3__loader_8h.html#a011fc24f10426c01349e94a4edd4b0d5">length</a></div><div class="ttdeci">GLsizei GLsizei * length</div><div class="ttdef"><b>定义</b> imgui_impl_opengl3_loader.h:314</div></div>
<div class="ttc" id="amimalloc-override_8h_html_a99aa8fd9f4831e1b0fa9e1cdcde3e249"><div class="ttname"><a href="mimalloc-override_8h.html#a99aa8fd9f4831e1b0fa9e1cdcde3e249">malloc</a></div><div class="ttdeci">#define malloc(n)</div><div class="ttdef"><b>定义</b> mimalloc-override.h:21</div></div>
<div class="ttc" id="amimalloc-override_8h_html_a9d4b5df3530d1bc733070a4669ba6ebc"><div class="ttname"><a href="mimalloc-override_8h.html#a9d4b5df3530d1bc733070a4669ba6ebc">free</a></div><div class="ttdeci">#define free(p)</div><div class="ttdef"><b>定义</b> mimalloc-override.h:24</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md451"></a>
License</h2>
<p>The library files <code><a class="el" href="xxhash_8c.html">xxhash.c</a></code> and <code><a class="el" href="xxhash_8h.html">xxhash.h</a></code> are BSD licensed. The utility <code>xxhsum</code> is GPL licensed.</p>
<h2><a class="anchor" id="autotoc_md452"></a>
Other programming languages</h2>
<p>Beyond the C reference version, xxHash is also available from many different programming languages, thanks to great contributors. They are <a href="http://www.xxhash.com/#other-languages">listed here</a>.</p>
<h2><a class="anchor" id="autotoc_md453"></a>
Packaging status</h2>
<p>Many distributions bundle a package manager which allows easy xxhash installation as both a <code>libxxhash</code> library and <code>xxhsum</code> command line interface.</p>
<p><a href="https://repology.org/project/xxhash/versions"><img src="https://repology.org/badge/vertical-allrepos/xxhash.svg" alt="Packaging status" style="pointer-events: none;" class="inline"/></a></p>
<h2><a class="anchor" id="autotoc_md454"></a>
Special Thanks</h2>
<ul>
<li>Takayuki Matsuoka, aka @t-mat, for creating <code>xxhsum -c</code> and great support during early xxh releases</li>
<li>Mathias Westerdahl, aka @JCash, for introducing the first version of <code>XXH64</code></li>
<li>Devin Hussey, aka @easyaspi314, for incredible low-level optimizations on <code>XXH3</code> and <code>XXH128</code> </li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_cb031e414f281a658b23dddb30bb9d2c.html">runtime</a></li><li class="navelem"><a class="el" href="dir_843c3b0b2832283878bd005a5b7b0a32.html">xxHash</a></li>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
