<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>source: cds::urcu::general_buffered&lt; Buffer, Lock, Backoff &gt; 模板类 参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">source
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classcds_1_1urcu_1_1general__buffered.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public 类型</a> &#124;
<a href="#pub-methods">Public 成员函数</a> &#124;
<a href="#pub-static-methods">静态 Public 成员函数</a> &#124;
<a href="classcds_1_1urcu_1_1general__buffered-members.html">所有成员列表</a>  </div>
  <div class="headertitle"><div class="title">cds::urcu::general_buffered&lt; Buffer, Lock, Backoff &gt; 模板类 参考</div></div>
</div><!--header-->
<div class="contents">

<p>User-space general-purpose RCU with deferred (buffered) reclamation  
 <a href="#details">更多...</a></p>

<p><code>#include &lt;<a class="el" href="general__buffered_8h_source.html">cds/urcu/general_buffered.h</a>&gt;</code></p>
<div class="dynheader">
类 cds::urcu::general_buffered&lt; Buffer, Lock, Backoff &gt; 继承关系图:</div>
<div class="dyncontent">
<div class="center"><img src="classcds_1_1urcu_1_1general__buffered__inherit__graph.png" border="0" usemap="#acds_1_1urcu_1_1general__buffered_3_01_buffer_00_01_lock_00_01_backoff_01_4_inherit__map" alt="Inheritance graph"/></div>
<!-- MAP 0 -->
<center><span class="legend">[<a target="top" href="graph_legend.html">图例</a>]</span></center></div>
<div class="dynheader">
cds::urcu::general_buffered&lt; Buffer, Lock, Backoff &gt; 的协作图:</div>
<div class="dyncontent">
<div class="center"><img src="classcds_1_1urcu_1_1general__buffered__coll__graph.png" border="0" usemap="#acds_1_1urcu_1_1general__buffered_3_01_buffer_00_01_lock_00_01_backoff_01_4_coll__map" alt="Collaboration graph"/></div>
<!-- MAP 1 -->
<center><span class="legend">[<a target="top" href="graph_legend.html">图例</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public 类型</h2></td></tr>
<tr class="memitem:ae4fff792af4e24cf67d379c9be1b8170" id="r_ae4fff792af4e24cf67d379c9be1b8170"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structcds_1_1urcu_1_1general__buffered__tag.html">general_buffered_tag</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae4fff792af4e24cf67d379c9be1b8170">rcu_tag</a></td></tr>
<tr class="memdesc:ae4fff792af4e24cf67d379c9be1b8170"><td class="mdescLeft">&#160;</td><td class="mdescRight">RCU tag  <br /></td></tr>
<tr class="separator:ae4fff792af4e24cf67d379c9be1b8170"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29c81aecd8f106a334802ecc0d43f080" id="r_a29c81aecd8f106a334802ecc0d43f080"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="struct_buffer.html">Buffer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a29c81aecd8f106a334802ecc0d43f080">buffer_type</a></td></tr>
<tr class="memdesc:a29c81aecd8f106a334802ecc0d43f080"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="struct_buffer.html">Buffer</a> type  <br /></td></tr>
<tr class="separator:a29c81aecd8f106a334802ecc0d43f080"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ff7b1df771ccc12637131699c0f7501" id="r_a6ff7b1df771ccc12637131699c0f7501"><td class="memItemLeft" align="right" valign="top">typedef Lock&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6ff7b1df771ccc12637131699c0f7501">lock_type</a></td></tr>
<tr class="memdesc:a6ff7b1df771ccc12637131699c0f7501"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock type  <br /></td></tr>
<tr class="separator:a6ff7b1df771ccc12637131699c0f7501"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a7a7089c8e44f0d0e7597e00d471b8b" id="r_a1a7a7089c8e44f0d0e7597e00d471b8b"><td class="memItemLeft" align="right" valign="top">typedef Backoff&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1a7a7089c8e44f0d0e7597e00d471b8b">back_off</a></td></tr>
<tr class="memdesc:a1a7a7089c8e44f0d0e7597e00d471b8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Back-off type  <br /></td></tr>
<tr class="separator:a1a7a7089c8e44f0d0e7597e00d471b8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84b7dee0092dce0ca54240d33998dd5f" id="r_a84b7dee0092dce0ca54240d33998dd5f"><td class="memItemLeft" align="right" valign="top">typedef base_class::thread_gc&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a84b7dee0092dce0ca54240d33998dd5f">thread_gc</a></td></tr>
<tr class="memdesc:a84b7dee0092dce0ca54240d33998dd5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread-side RCU part  <br /></td></tr>
<tr class="separator:a84b7dee0092dce0ca54240d33998dd5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c4a5a630752ce1a550bcca38be27379" id="r_a3c4a5a630752ce1a550bcca38be27379"><td class="memItemLeft" align="right" valign="top">typedef thread_gc::scoped_lock&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3c4a5a630752ce1a550bcca38be27379">scoped_lock</a></td></tr>
<tr class="memdesc:a3c4a5a630752ce1a550bcca38be27379"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access lock class  <br /></td></tr>
<tr class="separator:a3c4a5a630752ce1a550bcca38be27379"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public 成员函数</h2></td></tr>
<tr class="memitem:afc1bce4f826e6d9fa23e39906417f841" id="r_afc1bce4f826e6d9fa23e39906417f841"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afc1bce4f826e6d9fa23e39906417f841">retire_ptr</a> (<a class="el" href="namespacecds_1_1urcu.html#a9fd06318cc85d4d956ba7fb8152083c1">retired_ptr</a> &amp;<a class="el" href="main-override_8cpp.html#a117104b82864d3b23ec174af6d392709">p</a>) override</td></tr>
<tr class="memdesc:afc1bce4f826e6d9fa23e39906417f841"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retire <code class="param">p</code> pointer  <br /></td></tr>
<tr class="separator:afc1bce4f826e6d9fa23e39906417f841"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d6bfc4f3f1e901a6f1c83d1dc556597" id="r_a3d6bfc4f3f1e901a6f1c83d1dc556597"><td class="memTemplParams" colspan="2">template&lt;typename ForwardIterator&gt; </td></tr>
<tr class="memitem:a3d6bfc4f3f1e901a6f1c83d1dc556597"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a3d6bfc4f3f1e901a6f1c83d1dc556597">batch_retire</a> (ForwardIterator itFirst, ForwardIterator itLast)</td></tr>
<tr class="memdesc:a3d6bfc4f3f1e901a6f1c83d1dc556597"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retires the pointer chain [<code class="param">itFirst</code>, <code class="param">itLast</code>)  <br /></td></tr>
<tr class="separator:a3d6bfc4f3f1e901a6f1c83d1dc556597"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac09e384f0f60495b261e1faaa4cc0f6" id="r_aac09e384f0f60495b261e1faaa4cc0f6"><td class="memTemplParams" colspan="2">template&lt;typename Func&gt; </td></tr>
<tr class="memitem:aac09e384f0f60495b261e1faaa4cc0f6"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#aac09e384f0f60495b261e1faaa4cc0f6">batch_retire</a> (Func <a class="el" href="_cwise__array__power__array_8cpp.html#a9cb86ff854760bf91a154f2724a9101d">e</a>)</td></tr>
<tr class="memdesc:aac09e384f0f60495b261e1faaa4cc0f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retires the pointer chain until <code class="param">Func</code> returns <code class="param">nullptr</code> retired pointer  <br /></td></tr>
<tr class="separator:aac09e384f0f60495b261e1faaa4cc0f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4be33babbe429d7a7b1e49ad488a356" id="r_aa4be33babbe429d7a7b1e49ad488a356"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa4be33babbe429d7a7b1e49ad488a356">synchronize</a> ()</td></tr>
<tr class="memdesc:aa4be33babbe429d7a7b1e49ad488a356"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait to finish a grace period and then clear the buffer  <br /></td></tr>
<tr class="separator:aa4be33babbe429d7a7b1e49ad488a356"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada64554fc4ede8f2d9013398b6c56b97" id="r_ada64554fc4ede8f2d9013398b6c56b97"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ada64554fc4ede8f2d9013398b6c56b97">capacity</a> () const</td></tr>
<tr class="memdesc:ada64554fc4ede8f2d9013398b6c56b97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns internal buffer capacity  <br /></td></tr>
<tr class="separator:ada64554fc4ede8f2d9013398b6c56b97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
静态 Public 成员函数</h2></td></tr>
<tr class="memitem:ab3771e86b3ae06883345891d7d943d0e" id="r_ab3771e86b3ae06883345891d7d943d0e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classcds_1_1urcu_1_1general__buffered.html">general_buffered</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab3771e86b3ae06883345891d7d943d0e">instance</a> ()</td></tr>
<tr class="memdesc:ab3771e86b3ae06883345891d7d943d0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns singleton instance  <br /></td></tr>
<tr class="separator:ab3771e86b3ae06883345891d7d943d0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36d71a01bc161dda1f24cfbaa94a8b2d" id="r_a36d71a01bc161dda1f24cfbaa94a8b2d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="sugar_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a36d71a01bc161dda1f24cfbaa94a8b2d">isUsed</a> ()</td></tr>
<tr class="memdesc:a36d71a01bc161dda1f24cfbaa94a8b2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the singleton is created and ready to use  <br /></td></tr>
<tr class="separator:a36d71a01bc161dda1f24cfbaa94a8b2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac15e2a9d98a8cb85b3157d51fbb2ccc6" id="r_ac15e2a9d98a8cb85b3157d51fbb2ccc6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac15e2a9d98a8cb85b3157d51fbb2ccc6">Construct</a> (size_t nBufferCapacity=256)</td></tr>
<tr class="memdesc:ac15e2a9d98a8cb85b3157d51fbb2ccc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates singleton object  <br /></td></tr>
<tr class="separator:ac15e2a9d98a8cb85b3157d51fbb2ccc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a979ec4ed65bf6664f054b9e368a01a5d" id="r_a979ec4ed65bf6664f054b9e368a01a5d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a979ec4ed65bf6664f054b9e368a01a5d">Destruct</a> (<a class="el" href="sugar_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> bDetachAll=<a class="el" href="yyjson_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>)</td></tr>
<tr class="memdesc:a979ec4ed65bf6664f054b9e368a01a5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys singleton object  <br /></td></tr>
<tr class="separator:a979ec4ed65bf6664f054b9e368a01a5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;class <a class="el" href="struct_buffer.html">Buffer</a> = cds::container::VyukovMPMCCycleQueue&lt; epoch_retired_ptr &gt;, class Lock = std::mutex, class Backoff = cds::backoff::Default&gt;<br />
class cds::urcu::general_buffered&lt; Buffer, Lock, Backoff &gt;</div><p>User-space general-purpose RCU with deferred (buffered) reclamation </p>
<p>This URCU implementation contains an internal buffer where retired objects are accumulated. When the buffer becomes full, the RCU <code class="param">synchronize</code> function is called that waits until all reader/updater threads end up their read-side critical sections, i.e. until the RCU quiescent state will come. After that the buffer and all retired objects are freed. This synchronization cycle may be called in any thread that calls <code class="param">retire_ptr</code> function.</p>
<p>The <code class="param"><a class="el" href="struct_buffer.html">Buffer</a></code> contains items of <a class="el" href="namespacecds_1_1urcu.html#cds_urcu_retired_ptr">epoch_retired_ptr</a> type and it should support a queue interface with three function:</p><ul>
<li><code> bool push( retired_ptr&amp; p ) </code> - places the retired pointer <code class="param">p</code> into queue. If the function returns <code class="param">false</code> it means that the buffer is full and RCU synchronization cycle must be processed.</li>
<li><code>bool pop( retired_ptr&amp; p ) </code> - pops queue's head item into <code class="param">p</code> parameter; if the queue is empty this function must return <code class="param">false</code> </li>
<li><code>size_t <a class="el" href="imgui__impl__opengl3__loader_8h.html#ac42c05b5701aef6bab82675cf3b55fee">size()</a></code> - returns queue's item count.</li>
</ul>
<p>The buffer is considered as full if <code class="param"><a class="el" href="test__concurrent__queue_8cpp.html#a262227aa72b9cc1db7b9a80d7f295211">push()</a></code> returns <code class="param">false</code> or the buffer size reaches the RCU threshold.</p>
<p>There is a wrapper <a class="el" href="classcds_1_1urcu_1_1gc_3_01general__buffered_3_01_buffer_00_01_lock_00_01_backoff_01_4_01_4.html#cds_urcu_general_buffered_gc">gc&lt;general_buffered&gt;</a> for <code class="param">general_buffered</code> class that provides unified RCU interface. You should use this wrapper class instead <code class="param">general_buffered</code> </p>
<p>Template arguments:</p><ul>
<li><code class="param"><a class="el" href="struct_buffer.html">Buffer</a></code> - buffer type. Default is <code class="param"><a class="el" href="classcds_1_1container_1_1_vyukov_m_p_m_c_cycle_queue.html" title="Vyukov&#39;s MPMC bounded queue">cds::container::VyukovMPMCCycleQueue</a></code> </li>
<li><code class="param">Lock</code> - mutex type, default is <code class="param">std::mutex</code> </li>
<li><code class="param">Backoff</code> - back-off schema, default is <a class="el" href="namespacecds_1_1backoff.html#a0f64f7bc371e3ad006fba5bd855d6e96" title="Default backoff strategy">cds::backoff::Default</a> </li>
</ul>
</div><h2 class="groupheader">成员类型定义说明</h2>
<a id="a1a7a7089c8e44f0d0e7597e00d471b8b" name="a1a7a7089c8e44f0d0e7597e00d471b8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a7a7089c8e44f0d0e7597e00d471b8b">&#9670;&#160;</a></span>back_off</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="struct_buffer.html">Buffer</a> = cds::container::VyukovMPMCCycleQueue&lt; epoch_retired_ptr &gt;, class Lock = std::mutex, class Backoff = cds::backoff::Default&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef Backoff <a class="el" href="classcds_1_1urcu_1_1general__buffered.html">cds::urcu::general_buffered</a>&lt; <a class="el" href="struct_buffer.html">Buffer</a>, Lock, Backoff &gt;::back_off</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Back-off type </p>

</div>
</div>
<a id="a29c81aecd8f106a334802ecc0d43f080" name="a29c81aecd8f106a334802ecc0d43f080"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29c81aecd8f106a334802ecc0d43f080">&#9670;&#160;</a></span>buffer_type</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="struct_buffer.html">Buffer</a> = cds::container::VyukovMPMCCycleQueue&lt; epoch_retired_ptr &gt;, class Lock = std::mutex, class Backoff = cds::backoff::Default&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="struct_buffer.html">Buffer</a> <a class="el" href="classcds_1_1urcu_1_1general__buffered.html">cds::urcu::general_buffered</a>&lt; <a class="el" href="struct_buffer.html">Buffer</a>, Lock, Backoff &gt;::buffer_type</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="struct_buffer.html">Buffer</a> type </p>

</div>
</div>
<a id="a6ff7b1df771ccc12637131699c0f7501" name="a6ff7b1df771ccc12637131699c0f7501"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ff7b1df771ccc12637131699c0f7501">&#9670;&#160;</a></span>lock_type</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="struct_buffer.html">Buffer</a> = cds::container::VyukovMPMCCycleQueue&lt; epoch_retired_ptr &gt;, class Lock = std::mutex, class Backoff = cds::backoff::Default&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef Lock <a class="el" href="classcds_1_1urcu_1_1general__buffered.html">cds::urcu::general_buffered</a>&lt; <a class="el" href="struct_buffer.html">Buffer</a>, Lock, Backoff &gt;::lock_type</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lock type </p>

</div>
</div>
<a id="ae4fff792af4e24cf67d379c9be1b8170" name="ae4fff792af4e24cf67d379c9be1b8170"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4fff792af4e24cf67d379c9be1b8170">&#9670;&#160;</a></span>rcu_tag</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="struct_buffer.html">Buffer</a> = cds::container::VyukovMPMCCycleQueue&lt; epoch_retired_ptr &gt;, class Lock = std::mutex, class Backoff = cds::backoff::Default&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structcds_1_1urcu_1_1general__buffered__tag.html">general_buffered_tag</a> <a class="el" href="classcds_1_1urcu_1_1general__buffered.html">cds::urcu::general_buffered</a>&lt; <a class="el" href="struct_buffer.html">Buffer</a>, Lock, Backoff &gt;::rcu_tag</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>RCU tag </p>

</div>
</div>
<a id="a3c4a5a630752ce1a550bcca38be27379" name="a3c4a5a630752ce1a550bcca38be27379"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c4a5a630752ce1a550bcca38be27379">&#9670;&#160;</a></span>scoped_lock</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="struct_buffer.html">Buffer</a> = cds::container::VyukovMPMCCycleQueue&lt; epoch_retired_ptr &gt;, class Lock = std::mutex, class Backoff = cds::backoff::Default&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef thread_gc::scoped_lock <a class="el" href="classcds_1_1urcu_1_1general__buffered.html">cds::urcu::general_buffered</a>&lt; <a class="el" href="struct_buffer.html">Buffer</a>, Lock, Backoff &gt;::scoped_lock</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Access lock class </p>

</div>
</div>
<a id="a84b7dee0092dce0ca54240d33998dd5f" name="a84b7dee0092dce0ca54240d33998dd5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84b7dee0092dce0ca54240d33998dd5f">&#9670;&#160;</a></span>thread_gc</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="struct_buffer.html">Buffer</a> = cds::container::VyukovMPMCCycleQueue&lt; epoch_retired_ptr &gt;, class Lock = std::mutex, class Backoff = cds::backoff::Default&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef base_class::thread_gc <a class="el" href="classcds_1_1urcu_1_1general__buffered.html">cds::urcu::general_buffered</a>&lt; <a class="el" href="struct_buffer.html">Buffer</a>, Lock, Backoff &gt;::thread_gc</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Thread-side RCU part </p>

</div>
</div>
<h2 class="groupheader">成员函数说明</h2>
<a id="a3d6bfc4f3f1e901a6f1c83d1dc556597" name="a3d6bfc4f3f1e901a6f1c83d1dc556597"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d6bfc4f3f1e901a6f1c83d1dc556597">&#9670;&#160;</a></span>batch_retire() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="struct_buffer.html">Buffer</a> = cds::container::VyukovMPMCCycleQueue&lt; epoch_retired_ptr &gt;, class Lock = std::mutex, class Backoff = cds::backoff::Default&gt; </div>
<div class="memtemplate">
template&lt;typename ForwardIterator&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> <a class="el" href="classcds_1_1urcu_1_1general__buffered.html">cds::urcu::general_buffered</a>&lt; <a class="el" href="struct_buffer.html">Buffer</a>, Lock, Backoff &gt;::batch_retire </td>
          <td>(</td>
          <td class="paramtype">ForwardIterator</td>          <td class="paramname"><span class="paramname"><em>itFirst</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ForwardIterator</td>          <td class="paramname"><span class="paramname"><em>itLast</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retires the pointer chain [<code class="param">itFirst</code>, <code class="param">itLast</code>) </p>

</div>
</div>
<a id="aac09e384f0f60495b261e1faaa4cc0f6" name="aac09e384f0f60495b261e1faaa4cc0f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac09e384f0f60495b261e1faaa4cc0f6">&#9670;&#160;</a></span>batch_retire() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="struct_buffer.html">Buffer</a> = cds::container::VyukovMPMCCycleQueue&lt; epoch_retired_ptr &gt;, class Lock = std::mutex, class Backoff = cds::backoff::Default&gt; </div>
<div class="memtemplate">
template&lt;typename Func&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> <a class="el" href="classcds_1_1urcu_1_1general__buffered.html">cds::urcu::general_buffered</a>&lt; <a class="el" href="struct_buffer.html">Buffer</a>, Lock, Backoff &gt;::batch_retire </td>
          <td>(</td>
          <td class="paramtype">Func</td>          <td class="paramname"><span class="paramname"><em>e</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retires the pointer chain until <code class="param">Func</code> returns <code class="param">nullptr</code> retired pointer </p>

</div>
</div>
<a id="ada64554fc4ede8f2d9013398b6c56b97" name="ada64554fc4ede8f2d9013398b6c56b97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada64554fc4ede8f2d9013398b6c56b97">&#9670;&#160;</a></span>capacity()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="struct_buffer.html">Buffer</a> = cds::container::VyukovMPMCCycleQueue&lt; epoch_retired_ptr &gt;, class Lock = std::mutex, class Backoff = cds::backoff::Default&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classcds_1_1urcu_1_1general__buffered.html">cds::urcu::general_buffered</a>&lt; <a class="el" href="struct_buffer.html">Buffer</a>, Lock, Backoff &gt;::capacity </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns internal buffer capacity </p>

</div>
</div>
<a id="ac15e2a9d98a8cb85b3157d51fbb2ccc6" name="ac15e2a9d98a8cb85b3157d51fbb2ccc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac15e2a9d98a8cb85b3157d51fbb2ccc6">&#9670;&#160;</a></span>Construct()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="struct_buffer.html">Buffer</a> = cds::container::VyukovMPMCCycleQueue&lt; epoch_retired_ptr &gt;, class Lock = std::mutex, class Backoff = cds::backoff::Default&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> <a class="el" href="classcds_1_1urcu_1_1general__buffered.html">cds::urcu::general_buffered</a>&lt; <a class="el" href="struct_buffer.html">Buffer</a>, Lock, Backoff &gt;::Construct </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>nBufferCapacity</em></span><span class="paramdefsep"> = </span><span class="paramdefval">256</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates singleton object </p>
<p>The <code class="param">nBufferCapacity</code> parameter defines RCU threshold. </p>

</div>
</div>
<a id="a979ec4ed65bf6664f054b9e368a01a5d" name="a979ec4ed65bf6664f054b9e368a01a5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a979ec4ed65bf6664f054b9e368a01a5d">&#9670;&#160;</a></span>Destruct()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="struct_buffer.html">Buffer</a> = cds::container::VyukovMPMCCycleQueue&lt; epoch_retired_ptr &gt;, class Lock = std::mutex, class Backoff = cds::backoff::Default&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> <a class="el" href="classcds_1_1urcu_1_1general__buffered.html">cds::urcu::general_buffered</a>&lt; <a class="el" href="struct_buffer.html">Buffer</a>, Lock, Backoff &gt;::Destruct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sugar_8h.html#abb452686968e48b67397da5f97445f5b">bool</a></td>          <td class="paramname"><span class="paramname"><em>bDetachAll</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="yyjson_8h.html#a65e9886d74aaee76545e83dd09011727">false</a></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroys singleton object </p>

</div>
</div>
<a id="ab3771e86b3ae06883345891d7d943d0e" name="ab3771e86b3ae06883345891d7d943d0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3771e86b3ae06883345891d7d943d0e">&#9670;&#160;</a></span>instance()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="struct_buffer.html">Buffer</a> = cds::container::VyukovMPMCCycleQueue&lt; epoch_retired_ptr &gt;, class Lock = std::mutex, class Backoff = cds::backoff::Default&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classcds_1_1urcu_1_1general__buffered.html">general_buffered</a> * <a class="el" href="classcds_1_1urcu_1_1general__buffered.html">cds::urcu::general_buffered</a>&lt; <a class="el" href="struct_buffer.html">Buffer</a>, Lock, Backoff &gt;::instance </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns singleton instance </p>

</div>
</div>
<a id="a36d71a01bc161dda1f24cfbaa94a8b2d" name="a36d71a01bc161dda1f24cfbaa94a8b2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36d71a01bc161dda1f24cfbaa94a8b2d">&#9670;&#160;</a></span>isUsed()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="struct_buffer.html">Buffer</a> = cds::container::VyukovMPMCCycleQueue&lt; epoch_retired_ptr &gt;, class Lock = std::mutex, class Backoff = cds::backoff::Default&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="sugar_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> <a class="el" href="classcds_1_1urcu_1_1general__buffered.html">cds::urcu::general_buffered</a>&lt; <a class="el" href="struct_buffer.html">Buffer</a>, Lock, Backoff &gt;::isUsed </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if the singleton is created and ready to use </p>

</div>
</div>
<a id="afc1bce4f826e6d9fa23e39906417f841" name="afc1bce4f826e6d9fa23e39906417f841"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc1bce4f826e6d9fa23e39906417f841">&#9670;&#160;</a></span>retire_ptr()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="struct_buffer.html">Buffer</a> = cds::container::VyukovMPMCCycleQueue&lt; epoch_retired_ptr &gt;, class Lock = std::mutex, class Backoff = cds::backoff::Default&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> <a class="el" href="classcds_1_1urcu_1_1general__buffered.html">cds::urcu::general_buffered</a>&lt; <a class="el" href="struct_buffer.html">Buffer</a>, Lock, Backoff &gt;::retire_ptr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecds_1_1urcu.html#a9fd06318cc85d4d956ba7fb8152083c1">retired_ptr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>p</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel override">override</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retire <code class="param">p</code> pointer </p>
<p>The method pushes <code class="param">p</code> pointer to internal buffer. When the buffer becomes full <a class="el" href="#aa4be33babbe429d7a7b1e49ad488a356">synchronize</a> function is called to wait for the end of grace period and then to free all pointers from the buffer. </p>

</div>
</div>
<a id="aa4be33babbe429d7a7b1e49ad488a356" name="aa4be33babbe429d7a7b1e49ad488a356"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4be33babbe429d7a7b1e49ad488a356">&#9670;&#160;</a></span>synchronize()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="struct_buffer.html">Buffer</a> = cds::container::VyukovMPMCCycleQueue&lt; epoch_retired_ptr &gt;, class Lock = std::mutex, class Backoff = cds::backoff::Default&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> <a class="el" href="classcds_1_1urcu_1_1general__buffered.html">cds::urcu::general_buffered</a>&lt; <a class="el" href="struct_buffer.html">Buffer</a>, Lock, Backoff &gt;::synchronize </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait to finish a grace period and then clear the buffer </p>

</div>
</div>
<hr/>该类的文档由以下文件生成:<ul>
<li>external/libcds/cds/urcu/details/<a class="el" href="gpb_8h_source.html">gpb.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacecds.html">cds</a></li><li class="navelem"><a class="el" href="namespacecds_1_1urcu.html">urcu</a></li><li class="navelem"><a class="el" href="classcds_1_1urcu_1_1general__buffered.html">general_buffered</a></li>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
