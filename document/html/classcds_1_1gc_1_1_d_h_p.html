<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>source: cds::gc::DHP类 参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">source
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classcds_1_1gc_1_1_d_h_p.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">类</a> &#124;
<a href="#pub-types">Public 类型</a> &#124;
<a href="#pub-methods">Public 成员函数</a> &#124;
<a href="#pub-static-methods">静态 Public 成员函数</a> &#124;
<a href="classcds_1_1gc_1_1_d_h_p-members.html">所有成员列表</a>  </div>
  <div class="headertitle"><div class="title">cds::gc::DHP类 参考<div class="ingroups"><a class="el" href="group__cds__garbage__collector.html">Garbage collectors</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Dynamic (adaptie) Hazard Pointer SMR  
 <a href="#details">更多...</a></p>

<p><code>#include &lt;<a class="el" href="dhp_8h_source.html">dhp.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
类</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1_d_h_p_1_1_guard.html">Guard</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dynamic Hazard Pointer guard  <a href="classcds_1_1gc_1_1_d_h_p_1_1_guard.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1_d_h_p_1_1_guard_array.html">GuardArray</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of Dynamic Hazard Pointer guards  <a href="classcds_1_1gc_1_1_d_h_p_1_1_guard_array.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1_d_h_p_1_1guarded__ptr.html">guarded_ptr</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Guarded pointer  <a href="classcds_1_1gc_1_1_d_h_p_1_1guarded__ptr.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public 类型</h2></td></tr>
<tr class="memitem:ad6f94dbe36ebd1a1a1fdd6457d95db25" id="r_ad6f94dbe36ebd1a1a1fdd6457d95db25"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad6f94dbe36ebd1a1a1fdd6457d95db25">guarded_pointer</a></td></tr>
<tr class="memdesc:ad6f94dbe36ebd1a1a1fdd6457d95db25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Native guarded pointer type  <br /></td></tr>
<tr class="separator:ad6f94dbe36ebd1a1a1fdd6457d95db25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3299cac0d2f7284ceeae5f6e4619b746" id="r_a3299cac0d2f7284ceeae5f6e4619b746"><td class="memTemplParams" colspan="2">template&lt;typename <a class="el" href="_tutorial__sparse__example_8cpp.html#af639fb96631ba0018f0b2259fc95edfb">T</a>&gt; </td></tr>
<tr class="memitem:a3299cac0d2f7284ceeae5f6e4619b746"><td class="memTemplItemLeft" align="right" valign="top">using&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a3299cac0d2f7284ceeae5f6e4619b746">atomic_ref</a> = atomics::atomic&lt;<a class="el" href="_tutorial__sparse__example_8cpp.html#af639fb96631ba0018f0b2259fc95edfb">T</a> *&gt;</td></tr>
<tr class="memdesc:a3299cac0d2f7284ceeae5f6e4619b746"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomic reference  <br /></td></tr>
<tr class="separator:a3299cac0d2f7284ceeae5f6e4619b746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eb8a07cdcb5f14cebed712e3b7a73de" id="r_a6eb8a07cdcb5f14cebed712e3b7a73de"><td class="memTemplParams" colspan="2">template&lt;typename <a class="el" href="_tutorial__sparse__example_8cpp.html#af639fb96631ba0018f0b2259fc95edfb">T</a>&gt; </td></tr>
<tr class="memitem:a6eb8a07cdcb5f14cebed712e3b7a73de"><td class="memTemplItemLeft" align="right" valign="top">using&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a6eb8a07cdcb5f14cebed712e3b7a73de">atomic_type</a> = atomics::atomic&lt;<a class="el" href="_tutorial__sparse__example_8cpp.html#af639fb96631ba0018f0b2259fc95edfb">T</a>&gt;</td></tr>
<tr class="memdesc:a6eb8a07cdcb5f14cebed712e3b7a73de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomic type  <br /></td></tr>
<tr class="separator:a6eb8a07cdcb5f14cebed712e3b7a73de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affeae2a85fb8e80b2e280086d9ef7f8e" id="r_affeae2a85fb8e80b2e280086d9ef7f8e"><td class="memTemplParams" colspan="2">template&lt;typename MarkedPtr&gt; </td></tr>
<tr class="memitem:affeae2a85fb8e80b2e280086d9ef7f8e"><td class="memTemplItemLeft" align="right" valign="top">using&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#affeae2a85fb8e80b2e280086d9ef7f8e">atomic_marked_ptr</a> = atomics::atomic&lt;MarkedPtr&gt;</td></tr>
<tr class="memdesc:affeae2a85fb8e80b2e280086d9ef7f8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomic marked pointer  <br /></td></tr>
<tr class="separator:affeae2a85fb8e80b2e280086d9ef7f8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c85a7e0369b9cb15cd2925b46acbe2c" id="r_a9c85a7e0369b9cb15cd2925b46acbe2c"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structcds_1_1gc_1_1dhp_1_1stat.html">dhp::stat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9c85a7e0369b9cb15cd2925b46acbe2c">stat</a></td></tr>
<tr class="memdesc:a9c85a7e0369b9cb15cd2925b46acbe2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal statistics  <br /></td></tr>
<tr class="separator:a9c85a7e0369b9cb15cd2925b46acbe2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public 成员函数</h2></td></tr>
<tr class="memitem:afd5726364310a74bc0a9aefbc3facd26" id="r_afd5726364310a74bc0a9aefbc3facd26"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afd5726364310a74bc0a9aefbc3facd26">DHP</a> (size_t nInitialHazardPtrCount=16)</td></tr>
<tr class="memdesc:afd5726364310a74bc0a9aefbc3facd26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes DHP memory manager singleton  <br /></td></tr>
<tr class="separator:afd5726364310a74bc0a9aefbc3facd26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d83af864d44020c228b8247c9cdc557" id="r_a1d83af864d44020c228b8247c9cdc557"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1d83af864d44020c228b8247c9cdc557">~DHP</a> ()</td></tr>
<tr class="memdesc:a1d83af864d44020c228b8247c9cdc557"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys DHP memory manager  <br /></td></tr>
<tr class="separator:a1d83af864d44020c228b8247c9cdc557"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
静态 Public 成员函数</h2></td></tr>
<tr class="memitem:a93ec7fc6a2fb39c98c0338846b90636b" id="r_a93ec7fc6a2fb39c98c0338846b90636b"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="sugar_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a93ec7fc6a2fb39c98c0338846b90636b">check_available_guards</a> (size_t)</td></tr>
<tr class="memdesc:a93ec7fc6a2fb39c98c0338846b90636b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if count of hazard pointer is no less than <code class="param">nCountNeeded</code>  <br /></td></tr>
<tr class="separator:a93ec7fc6a2fb39c98c0338846b90636b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addaff9c937beaa650a3134505736a145" id="r_addaff9c937beaa650a3134505736a145"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#addaff9c937beaa650a3134505736a145">set_memory_allocator</a> (<a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> *(*alloc_func)(size_t <a class="el" href="imgui__impl__opengl3__loader_8h.html#ac42c05b5701aef6bab82675cf3b55fee">size</a>), <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>(*free_func)(<a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> *<a class="el" href="main-override_8cpp.html#a117104b82864d3b23ec174af6d392709">p</a>))</td></tr>
<tr class="memdesc:addaff9c937beaa650a3134505736a145"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set memory management functions  <br /></td></tr>
<tr class="separator:addaff9c937beaa650a3134505736a145"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec005e48c74a32a050d143719ccab042" id="r_aec005e48c74a32a050d143719ccab042"><td class="memTemplParams" colspan="2">template&lt;typename <a class="el" href="_tutorial__sparse__example_8cpp.html#af639fb96631ba0018f0b2259fc95edfb">T</a>&gt; </td></tr>
<tr class="memitem:aec005e48c74a32a050d143719ccab042"><td class="memTemplItemLeft" align="right" valign="top">static <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#aec005e48c74a32a050d143719ccab042">retire</a> (<a class="el" href="_tutorial__sparse__example_8cpp.html#af639fb96631ba0018f0b2259fc95edfb">T</a> *<a class="el" href="main-override_8cpp.html#a117104b82864d3b23ec174af6d392709">p</a>, <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>(*<a class="el" href="structfunc.html">func</a>)(<a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> *))</td></tr>
<tr class="memdesc:aec005e48c74a32a050d143719ccab042"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retire pointer <code class="param">p</code> with function <code class="param">pFunc</code>  <br /></td></tr>
<tr class="separator:aec005e48c74a32a050d143719ccab042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a599e8517bcf88bfb2f609007867e1512" id="r_a599e8517bcf88bfb2f609007867e1512"><td class="memTemplParams" colspan="2">template&lt;class Disposer, typename <a class="el" href="_tutorial__sparse__example_8cpp.html#af639fb96631ba0018f0b2259fc95edfb">T</a>&gt; </td></tr>
<tr class="memitem:a599e8517bcf88bfb2f609007867e1512"><td class="memTemplItemLeft" align="right" valign="top">static <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a599e8517bcf88bfb2f609007867e1512">retire</a> (<a class="el" href="_tutorial__sparse__example_8cpp.html#af639fb96631ba0018f0b2259fc95edfb">T</a> *<a class="el" href="main-override_8cpp.html#a117104b82864d3b23ec174af6d392709">p</a>)</td></tr>
<tr class="memdesc:a599e8517bcf88bfb2f609007867e1512"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retire pointer <code class="param">p</code> with functor of type <code class="param">Disposer</code>  <br /></td></tr>
<tr class="separator:a599e8517bcf88bfb2f609007867e1512"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0adf84336449c28e4e4e50b4ac8154f0" id="r_a0adf84336449c28e4e4e50b4ac8154f0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="sugar_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0adf84336449c28e4e4e50b4ac8154f0">isUsed</a> ()</td></tr>
<tr class="memdesc:a0adf84336449c28e4e4e50b4ac8154f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if Dynamic Hazard Pointer GC is constructed and may be used  <br /></td></tr>
<tr class="separator:a0adf84336449c28e4e4e50b4ac8154f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d5865baa42a93fc72a7878723408ce2" id="r_a0d5865baa42a93fc72a7878723408ce2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0d5865baa42a93fc72a7878723408ce2">scan</a> ()</td></tr>
<tr class="memdesc:a0d5865baa42a93fc72a7878723408ce2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forced GC cycle call for current thread  <br /></td></tr>
<tr class="separator:a0d5865baa42a93fc72a7878723408ce2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f74f3a7573638d7ca5161e45494f90b" id="r_a2f74f3a7573638d7ca5161e45494f90b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2f74f3a7573638d7ca5161e45494f90b">force_dispose</a> ()</td></tr>
<tr class="memdesc:a2f74f3a7573638d7ca5161e45494f90b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synonym for <code class="param"><a class="el" href="#a0d5865baa42a93fc72a7878723408ce2" title="Forced GC cycle call for current thread">scan()</a></code>  <br /></td></tr>
<tr class="separator:a2f74f3a7573638d7ca5161e45494f90b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaf4f1c5e616c98fa64a35df04c1dd85" id="r_abaf4f1c5e616c98fa64a35df04c1dd85"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abaf4f1c5e616c98fa64a35df04c1dd85">statistics</a> (<a class="el" href="#a9c85a7e0369b9cb15cd2925b46acbe2c">stat</a> &amp;st)</td></tr>
<tr class="memdesc:abaf4f1c5e616c98fa64a35df04c1dd85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns internal statistics  <br /></td></tr>
<tr class="separator:abaf4f1c5e616c98fa64a35df04c1dd85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42fa95f8b290c889f21e4d4c5d20d6ae" id="r_a42fa95f8b290c889f21e4d4c5d20d6ae"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="compiler_2defs_8h.html#a4ac8e9c4ea6b38586b0189153d1f38c9">CDS_EXPORT_API</a> <a class="el" href="#a9c85a7e0369b9cb15cd2925b46acbe2c">stat</a> const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a42fa95f8b290c889f21e4d4c5d20d6ae">postmortem_statistics</a> ()</td></tr>
<tr class="memdesc:a42fa95f8b290c889f21e4d4c5d20d6ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns post-mortem statistics  <br /></td></tr>
<tr class="separator:a42fa95f8b290c889f21e4d4c5d20d6ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock"><p>Dynamic (adaptie) Hazard Pointer SMR </p>
<p>Implementation of Dynamic (adaptive) Hazard Pointer SMR</p>
<p>Sources:</p><ul>
<li>[2002] Maged M.Michael "Safe memory reclamation for dynamic lock-freeobjects using atomic reads and writes"</li>
<li>[2003] Maged M.Michael "Hazard Pointers: Safe memory reclamation for lock-free objects"</li>
<li>[2004] Andrei Alexandrescy, Maged Michael "Lock-free Data Structures with Hazard Pointers"</li>
</ul>
<p>DHP is an adaptive variant of classic <code class="param"><a class="el" href="namespacecds_1_1gc.html#af0523881f089593a7559d194ee2b5dd9" title="Default Hazard Pointer schema with hp::details::DefaultTLSManager">cds::gc::HP</a></code>, see <a class="el" href="group__cds__garbage__collector.html">Compare HP implementation</a></p>
<dl class="section note"><dt>注解</dt><dd>Internally, DHP depends on free-list implementation. There are DCAS-based free-list <code class="param"><a class="el" href="classcds_1_1intrusive_1_1_tagged_free_list.html" title="Lock-free free list based on tagged pointers (required double-width CAS)">cds::intrusive::TaggedFreeList</a></code> and more complicated CAS-based free-list <code class="param"><a class="el" href="classcds_1_1intrusive_1_1_free_list.html" title="Lock-free free list">cds::intrusive::FreeList</a></code>. For x86 architecture and GCC/clang, libcds selects appropriate free-list based on <code class="param">-mcx16</code> compiler flag. You may manually disable DCAS support specifying <code class="param">-DCDS_DISABLE_128BIT_ATOMIC</code> for 64bit build or <code class="param">-DCDS_DISABLE_64BIT_ATOMIC</code> for 32bit build in compiler command line. All your projects and libcds MUST be compiled with the same flags - either with DCAS support or without it. For MS VC++ compiler DCAS is not supported.</dd></dl>
<p>See <a class="el" href="E:/source/external/libcds/cds/details/defs.h#cds_how_to_use">How to use</a> section for details how to apply SMR. </p>
</div><h2 class="groupheader">成员类型定义说明</h2>
<a id="affeae2a85fb8e80b2e280086d9ef7f8e" name="affeae2a85fb8e80b2e280086d9ef7f8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affeae2a85fb8e80b2e280086d9ef7f8e">&#9670;&#160;</a></span>atomic_marked_ptr</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MarkedPtr&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#affeae2a85fb8e80b2e280086d9ef7f8e">cds::gc::DHP::atomic_marked_ptr</a> = atomics::atomic&lt;MarkedPtr&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atomic marked pointer </p>

</div>
</div>
<a id="a3299cac0d2f7284ceeae5f6e4619b746" name="a3299cac0d2f7284ceeae5f6e4619b746"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3299cac0d2f7284ceeae5f6e4619b746">&#9670;&#160;</a></span>atomic_ref</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename <a class="el" href="_tutorial__sparse__example_8cpp.html#af639fb96631ba0018f0b2259fc95edfb">T</a>&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#a3299cac0d2f7284ceeae5f6e4619b746">cds::gc::DHP::atomic_ref</a> = atomics::atomic&lt;<a class="el" href="_tutorial__sparse__example_8cpp.html#af639fb96631ba0018f0b2259fc95edfb">T</a> *&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atomic reference </p>

</div>
</div>
<a id="a6eb8a07cdcb5f14cebed712e3b7a73de" name="a6eb8a07cdcb5f14cebed712e3b7a73de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6eb8a07cdcb5f14cebed712e3b7a73de">&#9670;&#160;</a></span>atomic_type</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename <a class="el" href="_tutorial__sparse__example_8cpp.html#af639fb96631ba0018f0b2259fc95edfb">T</a>&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#a6eb8a07cdcb5f14cebed712e3b7a73de">cds::gc::DHP::atomic_type</a> = atomics::atomic&lt;<a class="el" href="_tutorial__sparse__example_8cpp.html#af639fb96631ba0018f0b2259fc95edfb">T</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atomic type </p>

</div>
</div>
<a id="ad6f94dbe36ebd1a1a1fdd6457d95db25" name="ad6f94dbe36ebd1a1a1fdd6457d95db25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6f94dbe36ebd1a1a1fdd6457d95db25">&#9670;&#160;</a></span>guarded_pointer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>* <a class="el" href="#ad6f94dbe36ebd1a1a1fdd6457d95db25">cds::gc::DHP::guarded_pointer</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Native guarded pointer type </p>

</div>
</div>
<a id="a9c85a7e0369b9cb15cd2925b46acbe2c" name="a9c85a7e0369b9cb15cd2925b46acbe2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c85a7e0369b9cb15cd2925b46acbe2c">&#9670;&#160;</a></span>stat</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structcds_1_1gc_1_1dhp_1_1stat.html">dhp::stat</a> <a class="el" href="#a9c85a7e0369b9cb15cd2925b46acbe2c">cds::gc::DHP::stat</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Internal statistics </p>

</div>
</div>
<h2 class="groupheader">构造及析构函数说明</h2>
<a id="afd5726364310a74bc0a9aefbc3facd26" name="afd5726364310a74bc0a9aefbc3facd26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd5726364310a74bc0a9aefbc3facd26">&#9670;&#160;</a></span>DHP()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cds::gc::DHP::DHP </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>nInitialHazardPtrCount</em></span><span class="paramdefsep"> = </span><span class="paramdefval">16</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel explicit">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes DHP memory manager singleton </p>
<p>Constructor creates and initializes DHP global object. DHP object should be created before using CDS data structure based on <code class="param">cds::gc::DHP</code>. Usually, it is created in the beginning of <code class="param"><a class="el" href="main-override-static_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main()</a></code> function. After creating of global object you may use CDS data structures based on <code class="param">cds::gc::DHP</code>.</p>
<p><code class="param">nInitialThreadGuardCount</code> - initial count of guard allocated for each thread. When a thread is initialized the GC allocates local guard pool for the thread from a common guard pool. By perforce the local thread's guard pool is grown automatically from common pool. When the thread terminated its guard pool is backed to common GC's pool. </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">nInitialHazardPtrCount</td><td>Initial number of hazard pointer per thread </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1d83af864d44020c228b8247c9cdc557" name="a1d83af864d44020c228b8247c9cdc557"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d83af864d44020c228b8247c9cdc557">&#9670;&#160;</a></span>~DHP()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cds::gc::DHP::~DHP </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroys DHP memory manager </p>
<p>The destructor destroys DHP global object. After calling of this function you may <b>NOT</b> use CDS data structures based on <code class="param">cds::gc::DHP</code>. Usually, DHP object is destroyed at the end of your <code class="param"><a class="el" href="main-override-static_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main()</a></code>. </p>

</div>
</div>
<h2 class="groupheader">成员函数说明</h2>
<a id="a93ec7fc6a2fb39c98c0338846b90636b" name="a93ec7fc6a2fb39c98c0338846b90636b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93ec7fc6a2fb39c98c0338846b90636b">&#9670;&#160;</a></span>check_available_guards()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static constexpr <a class="el" href="sugar_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> cds::gc::DHP::check_available_guards </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span><span class="mlabel constexpr">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if count of hazard pointer is no less than <code class="param">nCountNeeded</code> </p>
<p>The function always returns <code class="param">true</code> since the guard count is unlimited for <code class="param">gc::DHP</code> garbage collector. </p>

</div>
</div>
<a id="a2f74f3a7573638d7ca5161e45494f90b" name="a2f74f3a7573638d7ca5161e45494f90b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f74f3a7573638d7ca5161e45494f90b">&#9670;&#160;</a></span>force_dispose()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> cds::gc::DHP::force_dispose </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Synonym for <code class="param"><a class="el" href="#a0d5865baa42a93fc72a7878723408ce2" title="Forced GC cycle call for current thread">scan()</a></code> </p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="classcds_1_1gc_1_1_d_h_p_a2f74f3a7573638d7ca5161e45494f90b_cgraph.png" border="0" usemap="#aclasscds_1_1gc_1_1_d_h_p_a2f74f3a7573638d7ca5161e45494f90b_cgraph" alt=""/></div>
<!-- MAP 0 -->
</div>

</div>
</div>
<a id="a0adf84336449c28e4e4e50b4ac8154f0" name="a0adf84336449c28e4e4e50b4ac8154f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0adf84336449c28e4e4e50b4ac8154f0">&#9670;&#160;</a></span>isUsed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="sugar_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> cds::gc::DHP::isUsed </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if Dynamic Hazard Pointer GC is constructed and may be used </p>

</div>
</div>
<a id="a42fa95f8b290c889f21e4d4c5d20d6ae" name="a42fa95f8b290c889f21e4d4c5d20d6ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42fa95f8b290c889f21e4d4c5d20d6ae">&#9670;&#160;</a></span>postmortem_statistics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_2defs_8h.html#a4ac8e9c4ea6b38586b0189153d1f38c9">CDS_EXPORT_API</a> <a class="el" href="#a9c85a7e0369b9cb15cd2925b46acbe2c">cds::gc::DHP::stat</a> const  &amp; cds::gc::DHP::postmortem_statistics </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns post-mortem statistics </p>
<p>Post-mortem statistics is gathered in the <code class="param">DHP</code> object destructor and can be accessible after destructing the global <code class="param">DHP</code> object.</p>
<dl class="section note"><dt>注解</dt><dd>Internal statistics is available only if you compile <code class="param">libcds</code> and your program with <code class="param">-DCDS_ENABLE_HPSTAT</code>.</dd></dl>
<p>Usage: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="main-override-static_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="namespacecds.html#ae14cc7bb67e75ea6ed18a82f3380d2c0">cds::Initialize</a>();</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Initialize DHP SMR</span></div>
<div class="line">        <a class="code hl_class" href="classcds_1_1gc_1_1_d_h_p.html">cds::gc::DHP</a> <a class="code hl_namespace" href="namespacecds_1_1gc_1_1dhp.html">dhp</a>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// deal with DHP-based data structured</span></div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// DHP object destroyed</span></div>
<div class="line">    <span class="comment">// Get total post-mortem statistics</span></div>
<div class="line">    <a class="code hl_typedef" href="#a9c85a7e0369b9cb15cd2925b46acbe2c">cds::gc::DHP::stat</a> <span class="keyword">const</span>&amp; st = <a class="code hl_function" href="#a42fa95f8b290c889f21e4d4c5d20d6ae">cds::gc::DHP::postmortem_statistics</a>();</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="printf_8h.html#aee3ed3a831f25f07e7be3919fff2203a">printf</a>( <span class="stringliteral">&quot;DHP statistics:\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  thread count           = %llu\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  guard allocated        = %llu\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  guard freed            = %llu\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  retired data count     = %llu\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  free data count        = %llu\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  scan() call count      = %llu\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  help_scan() call count = %llu\n&quot;</span>,</div>
<div class="line">        st.<a class="code hl_variable" href="structcds_1_1gc_1_1dhp_1_1stat.html#a5e49c933308355dac28c93fed8038cfb">thread_rec_count</a>,</div>
<div class="line">        st.<a class="code hl_variable" href="structcds_1_1gc_1_1dhp_1_1stat.html#a67b79f01f3a4027703624745c40e9c52">guard_allocated</a>, st.<a class="code hl_variable" href="structcds_1_1gc_1_1dhp_1_1stat.html#a29f36d62fa4c2d1f441188b613cd1944">guard_freed</a>,</div>
<div class="line">        st.<a class="code hl_variable" href="structcds_1_1gc_1_1dhp_1_1stat.html#a21839e45101bd6ae8d68963f550a2b7b">retired_count</a>, st.<a class="code hl_variable" href="structcds_1_1gc_1_1dhp_1_1stat.html#af9a44851f0c028f66064d0b44e8eaedf">free_count</a>,</div>
<div class="line">        st.<a class="code hl_variable" href="structcds_1_1gc_1_1dhp_1_1stat.html#a1d0d2015438250beaf5d6602f36bd3f3">scan_count</a>, st.<a class="code hl_variable" href="structcds_1_1gc_1_1dhp_1_1stat.html#a981160606e6dd2f13db97f88c6e74ad8">help_scan_count</a></div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="namespacecds.html#a9ca275d587d2b0b11ded25220718a049">cds::Terminate</a>();</div>
<div class="line">}</div>
<div class="ttc" id="aclasscds_1_1gc_1_1_d_h_p_html"><div class="ttname"><a href="classcds_1_1gc_1_1_d_h_p.html">cds::gc::DHP</a></div><div class="ttdoc">Dynamic (adaptie) Hazard Pointer SMR</div><div class="ttdef"><b>定义</b> dhp.h:669</div></div>
<div class="ttc" id="aclasscds_1_1gc_1_1_d_h_p_html_a42fa95f8b290c889f21e4d4c5d20d6ae"><div class="ttname"><a href="#a42fa95f8b290c889f21e4d4c5d20d6ae">cds::gc::DHP::postmortem_statistics</a></div><div class="ttdeci">static CDS_EXPORT_API stat const &amp; postmortem_statistics()</div><div class="ttdoc">Returns post-mortem statistics</div><div class="ttdef"><b>定义</b> dhp.cpp:522</div></div>
<div class="ttc" id="aclasscds_1_1gc_1_1_d_h_p_html_a9c85a7e0369b9cb15cd2925b46acbe2c"><div class="ttname"><a href="#a9c85a7e0369b9cb15cd2925b46acbe2c">cds::gc::DHP::stat</a></div><div class="ttdeci">dhp::stat stat</div><div class="ttdoc">Internal statistics</div><div class="ttdef"><b>定义</b> dhp.h:687</div></div>
<div class="ttc" id="amain-override-static_8c_html_ae66f6b31b5ad750f1fe042a706a4e3d4"><div class="ttname"><a href="main-override-static_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a></div><div class="ttdeci">int main()</div><div class="ttdef"><b>定义</b> main-override-static.c:32</div></div>
<div class="ttc" id="anamespacecds_1_1gc_1_1dhp_html"><div class="ttname"><a href="namespacecds_1_1gc_1_1dhp.html">cds::gc::dhp</a></div><div class="ttdoc">Dynamic (adaptive) Hazard Pointer implementation details</div><div class="ttdef"><b>定义</b> dhp.h:20</div></div>
<div class="ttc" id="anamespacecds_html_a9ca275d587d2b0b11ded25220718a049"><div class="ttname"><a href="namespacecds.html#a9ca275d587d2b0b11ded25220718a049">cds::Terminate</a></div><div class="ttdeci">static void Terminate()</div><div class="ttdoc">Terminate CDS library</div><div class="ttdef"><b>定义</b> init.h:70</div></div>
<div class="ttc" id="anamespacecds_html_ae14cc7bb67e75ea6ed18a82f3380d2c0"><div class="ttname"><a href="namespacecds.html#ae14cc7bb67e75ea6ed18a82f3380d2c0">cds::Initialize</a></div><div class="ttdeci">static void Initialize(unsigned int nFeatureFlags=0)</div><div class="ttdoc">Initialize CDS library</div><div class="ttdef"><b>定义</b> init.h:38</div></div>
<div class="ttc" id="aprintf_8h_html_aee3ed3a831f25f07e7be3919fff2203a"><div class="ttname"><a href="printf_8h.html#aee3ed3a831f25f07e7be3919fff2203a">printf</a></div><div class="ttdeci">auto printf(string_view fmt, const T &amp;... args) -&gt; int</div><div class="ttdef"><b>定义</b> printf.h:621</div></div>
<div class="ttc" id="astructcds_1_1gc_1_1dhp_1_1stat_html_a1d0d2015438250beaf5d6602f36bd3f3"><div class="ttname"><a href="structcds_1_1gc_1_1dhp_1_1stat.html#a1d0d2015438250beaf5d6602f36bd3f3">cds::gc::dhp::stat::scan_count</a></div><div class="ttdeci">size_t scan_count</div><div class="ttdoc">Count of scan() call</div><div class="ttdef"><b>定义</b> dhp.h:403</div></div>
<div class="ttc" id="astructcds_1_1gc_1_1dhp_1_1stat_html_a21839e45101bd6ae8d68963f550a2b7b"><div class="ttname"><a href="structcds_1_1gc_1_1dhp_1_1stat.html#a21839e45101bd6ae8d68963f550a2b7b">cds::gc::dhp::stat::retired_count</a></div><div class="ttdeci">size_t retired_count</div><div class="ttdoc">Count of retired pointers</div><div class="ttdef"><b>定义</b> dhp.h:401</div></div>
<div class="ttc" id="astructcds_1_1gc_1_1dhp_1_1stat_html_a29f36d62fa4c2d1f441188b613cd1944"><div class="ttname"><a href="structcds_1_1gc_1_1dhp_1_1stat.html#a29f36d62fa4c2d1f441188b613cd1944">cds::gc::dhp::stat::guard_freed</a></div><div class="ttdeci">size_t guard_freed</div><div class="ttdoc">Count of freed HP guards</div><div class="ttdef"><b>定义</b> dhp.h:400</div></div>
<div class="ttc" id="astructcds_1_1gc_1_1dhp_1_1stat_html_a5e49c933308355dac28c93fed8038cfb"><div class="ttname"><a href="structcds_1_1gc_1_1dhp_1_1stat.html#a5e49c933308355dac28c93fed8038cfb">cds::gc::dhp::stat::thread_rec_count</a></div><div class="ttdeci">size_t thread_rec_count</div><div class="ttdoc">Count of thread records</div><div class="ttdef"><b>定义</b> dhp.h:406</div></div>
<div class="ttc" id="astructcds_1_1gc_1_1dhp_1_1stat_html_a67b79f01f3a4027703624745c40e9c52"><div class="ttname"><a href="structcds_1_1gc_1_1dhp_1_1stat.html#a67b79f01f3a4027703624745c40e9c52">cds::gc::dhp::stat::guard_allocated</a></div><div class="ttdeci">size_t guard_allocated</div><div class="ttdoc">Count of allocated HP guards</div><div class="ttdef"><b>定义</b> dhp.h:399</div></div>
<div class="ttc" id="astructcds_1_1gc_1_1dhp_1_1stat_html_a981160606e6dd2f13db97f88c6e74ad8"><div class="ttname"><a href="structcds_1_1gc_1_1dhp_1_1stat.html#a981160606e6dd2f13db97f88c6e74ad8">cds::gc::dhp::stat::help_scan_count</a></div><div class="ttdeci">size_t help_scan_count</div><div class="ttdoc">Count of help_scan() call</div><div class="ttdef"><b>定义</b> dhp.h:404</div></div>
<div class="ttc" id="astructcds_1_1gc_1_1dhp_1_1stat_html_af9a44851f0c028f66064d0b44e8eaedf"><div class="ttname"><a href="structcds_1_1gc_1_1dhp_1_1stat.html#af9a44851f0c028f66064d0b44e8eaedf">cds::gc::dhp::stat::free_count</a></div><div class="ttdeci">size_t free_count</div><div class="ttdoc">Count of free pointers</div><div class="ttdef"><b>定义</b> dhp.h:402</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a599e8517bcf88bfb2f609007867e1512" name="a599e8517bcf88bfb2f609007867e1512"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a599e8517bcf88bfb2f609007867e1512">&#9670;&#160;</a></span>retire() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Disposer, typename <a class="el" href="_tutorial__sparse__example_8cpp.html#af639fb96631ba0018f0b2259fc95edfb">T</a>&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> cds::gc::DHP::retire </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_tutorial__sparse__example_8cpp.html#af639fb96631ba0018f0b2259fc95edfb">T</a> *</td>          <td class="paramname"><span class="paramname"><em>p</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retire pointer <code class="param">p</code> with functor of type <code class="param">Disposer</code> </p>
<p>The function places pointer <code class="param">p</code> to array of pointers ready for removing. (so called retired pointer array). The pointer can be safely removed when no hazard pointer points to it.</p>
<p>Deleting the pointer is an invocation of some object of type <code class="param">Disposer</code>; the interface of <code class="param">Disposer</code> is: </p><div class="fragment"><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><span class="keyword">struct </span>disposer {</div>
<div class="line">    <span class="keywordtype">void</span> operator()( <a class="code hl_define" href="test__overwrite__node_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a> * <a class="code hl_variable" href="main-override_8cpp.html#a117104b82864d3b23ec174af6d392709">p</a> )    ;   <span class="comment">// disposing operator</span></div>
<div class="line">};</div>
<div class="ttc" id="amain-override_8cpp_html_a117104b82864d3b23ec174af6d392709"><div class="ttname"><a href="main-override_8cpp.html#a117104b82864d3b23ec174af6d392709">p</a></div><div class="ttdeci">static void * p</div><div class="ttdef"><b>定义</b> main-override.cpp:75</div></div>
<div class="ttc" id="atest__overwrite__node_8cpp_html_a0acb682b8260ab1c60b918599864e2e5"><div class="ttname"><a href="test__overwrite__node_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a></div><div class="ttdeci">#define T</div><div class="ttdef"><b>定义</b> test_overwrite_node.cpp:29</div></div>
</div><!-- fragment --><p> Since the functor call can happen at any time after <code class="param"><a class="el" href="#aec005e48c74a32a050d143719ccab042" title="Retire pointer p with function pFunc">retire()</a></code> call, additional restrictions are imposed to <code class="param">Disposer</code> type:</p><ul>
<li>it should be stateless functor</li>
<li>it should be default-constructible</li>
<li>the result of functor call with argument <code class="param">p</code> should not depend on where the functor will be called.</li>
</ul>
<dl class="section user"><dt>Examples:</dt><dd>Operator <code class="param">delete</code> functor: <div class="fragment"><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><span class="keyword">struct </span>disposer {</div>
<div class="line">    <span class="keywordtype">void</span> operator ()( <a class="code hl_define" href="test__overwrite__node_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a> * <a class="code hl_variable" href="main-override_8cpp.html#a117104b82864d3b23ec174af6d392709">p</a> ) {</div>
<div class="line">        <span class="keyword">delete</span> <a class="code hl_variable" href="main-override_8cpp.html#a117104b82864d3b23ec174af6d392709">p</a>;</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// How to call HP::retire method</span></div>
<div class="line"><span class="keywordtype">int</span> * <a class="code hl_variable" href="main-override_8cpp.html#a117104b82864d3b23ec174af6d392709">p</a> = <span class="keyword">new</span> <a class="code hl_define" href="sugar_8h.html#ae4f82344f573c70aa1066a2394bba345">int</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// ... use p in lock-free manner</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="#aec005e48c74a32a050d143719ccab042">cds::gc::DHP::retire&lt;disposer&gt;</a>( <a class="code hl_variable" href="main-override_8cpp.html#a117104b82864d3b23ec174af6d392709">p</a> ) ;   <span class="comment">// place p to retired pointer array of DHP SMR</span></div>
<div class="ttc" id="aclasscds_1_1gc_1_1_d_h_p_html_aec005e48c74a32a050d143719ccab042"><div class="ttname"><a href="#aec005e48c74a32a050d143719ccab042">cds::gc::DHP::retire</a></div><div class="ttdeci">static void retire(T *p, void(*func)(void *))</div><div class="ttdoc">Retire pointer p with function pFunc</div><div class="ttdef"><b>定义</b> dhp.h:1347</div></div>
<div class="ttc" id="asugar_8h_html_ae4f82344f573c70aa1066a2394bba345"><div class="ttname"><a href="sugar_8h.html#ae4f82344f573c70aa1066a2394bba345">int</a></div><div class="ttdeci">#define int</div><div class="ttdef"><b>定义</b> sugar.h:37</div></div>
</div><!-- fragment --></dd></dl>
<p><a class="el" href="struct_functor.html">Functor</a> based on <code class="param">std::allocator</code> : </p><div class="fragment"><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Alloc = std::allocator&lt;<span class="keywordtype">int</span>&gt; &gt;</div>
<div class="line"><span class="keyword">struct </span>disposer {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line">    <span class="keywordtype">void</span> operator()( <a class="code hl_define" href="test__overwrite__node_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a> * <a class="code hl_variable" href="main-override_8cpp.html#a117104b82864d3b23ec174af6d392709">p</a> ) {</div>
<div class="line">        <span class="keyword">typedef</span> <span class="keyword">typename</span> Alloc::templare rebind&lt;T&gt;::other alloc_t;</div>
<div class="line">        alloc_t <a class="code hl_variable" href="_cwise__product_8cpp.html#ad2cbe4616e813eb9af81732dca777b24">a</a>;</div>
<div class="line">        <a class="code hl_variable" href="_cwise__product_8cpp.html#ad2cbe4616e813eb9af81732dca777b24">a</a>.destroy( <a class="code hl_variable" href="main-override_8cpp.html#a117104b82864d3b23ec174af6d392709">p</a> );</div>
<div class="line">        <a class="code hl_variable" href="_cwise__product_8cpp.html#ad2cbe4616e813eb9af81732dca777b24">a</a>.deallocate( <a class="code hl_variable" href="main-override_8cpp.html#a117104b82864d3b23ec174af6d392709">p</a>, 1 );</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="ttc" id="a_cwise__product_8cpp_html_ad2cbe4616e813eb9af81732dca777b24"><div class="ttname"><a href="_cwise__product_8cpp.html#ad2cbe4616e813eb9af81732dca777b24">a</a></div><div class="ttdeci">Array33i a</div><div class="ttdef"><b>定义</b> Cwise_product.cpp:1</div></div>
</div><!-- fragment --> <div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="classcds_1_1gc_1_1_d_h_p_a599e8517bcf88bfb2f609007867e1512_cgraph.png" border="0" usemap="#aclasscds_1_1gc_1_1_d_h_p_a599e8517bcf88bfb2f609007867e1512_cgraph" alt=""/></div>
<!-- MAP 1 -->
</div>

</div>
</div>
<a id="aec005e48c74a32a050d143719ccab042" name="aec005e48c74a32a050d143719ccab042"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec005e48c74a32a050d143719ccab042">&#9670;&#160;</a></span>retire() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename <a class="el" href="_tutorial__sparse__example_8cpp.html#af639fb96631ba0018f0b2259fc95edfb">T</a>&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> cds::gc::DHP::retire </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_tutorial__sparse__example_8cpp.html#af639fb96631ba0018f0b2259fc95edfb">T</a> *</td>          <td class="paramname"><span class="paramname"><em>p</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>(*</td>          <td class="paramname"><span class="paramname"><em>func&#160;</em></span>)(<a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> *)&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retire pointer <code class="param">p</code> with function <code class="param">pFunc</code> </p>
<p>The function places pointer <code class="param">p</code> to array of pointers ready for removing. (so called retired pointer array). The pointer can be safely removed when no hazard pointer points to it. <code class="param">func</code> is a disposer: when <code class="param">p</code> can be safely removed, <code class="param">func</code> is called. </p>

</div>
</div>
<a id="a0d5865baa42a93fc72a7878723408ce2" name="a0d5865baa42a93fc72a7878723408ce2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d5865baa42a93fc72a7878723408ce2">&#9670;&#160;</a></span>scan()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> cds::gc::DHP::scan </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Forced GC cycle call for current thread </p>
<p>Usually, this function should not be called directly. </p>

</div>
</div>
<a id="addaff9c937beaa650a3134505736a145" name="addaff9c937beaa650a3134505736a145"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addaff9c937beaa650a3134505736a145">&#9670;&#160;</a></span>set_memory_allocator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> cds::gc::DHP::set_memory_allocator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> *(*</td>          <td class="paramname"><span class="paramname"><em>alloc_func&#160;</em></span>)(size_t <a class="el" href="imgui__impl__opengl3__loader_8h.html#ac42c05b5701aef6bab82675cf3b55fee">size</a>), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a>(*</td>          <td class="paramname"><span class="paramname"><em>free_func&#160;</em></span>)(<a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> *<a class="el" href="main-override_8cpp.html#a117104b82864d3b23ec174af6d392709">p</a>)&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set memory management functions </p>
<dl class="section note"><dt>注解</dt><dd>This function may be called <b>BEFORE</b> creating an instance of Dynamic Hazard Pointer SMR</dd></dl>
<p>SMR object allocates some memory for thread-specific data and for creating SMR object. By default, a standard <code class="param">new</code> and <code class="param">delete</code> operators are used for this. </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc_func</td><td><code class="param"><a class="el" href="mimalloc-override_8h.html#a99aa8fd9f4831e1b0fa9e1cdcde3e249">malloc()</a></code> function  </td></tr>
    <tr><td class="paramname">free_func</td><td><code class="param"><a class="el" href="mimalloc-override_8h.html#a9d4b5df3530d1bc733070a4669ba6ebc">free()</a></code> function </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abaf4f1c5e616c98fa64a35df04c1dd85" name="abaf4f1c5e616c98fa64a35df04c1dd85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaf4f1c5e616c98fa64a35df04c1dd85">&#9670;&#160;</a></span>statistics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="ittnotify__static_8h.html#a61af67d9d838a9497ca5b188dabc1aa0">void</a> cds::gc::DHP::statistics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a9c85a7e0369b9cb15cd2925b46acbe2c">stat</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>st</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns internal statistics </p>
<p>The function clears <code class="param">st</code> before gathering statistics.</p>
<dl class="section note"><dt>注解</dt><dd>Internal statistics is available only if you compile <code class="param">libcds</code> and your program with <code class="param">-DCDS_ENABLE_HPSTAT</code>. </dd></dl>

</div>
</div>
<hr/>该类的文档由以下文件生成:<ul>
<li>external/libcds/cds/gc/<a class="el" href="dhp_8h_source.html">dhp.h</a></li>
<li>external/libcds/src/<a class="el" href="dhp_8cpp.html">dhp.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacecds.html">cds</a></li><li class="navelem"><a class="el" href="namespacecds_1_1gc.html">gc</a></li><li class="navelem"><a class="el" href="classcds_1_1gc_1_1_d_h_p.html">DHP</a></li>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
