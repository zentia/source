<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>source: Structs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">source
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_external_2reflect-cpp_2docs_2concepts_2structs.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Structs</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md551"></a></p>
<p>Structs can be set up as follows:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>Person {</div>
<div class="line">    std::string first_name;</div>
<div class="line">    std::string last_name;</div>
<div class="line">    std::vector&lt;Person&gt; children;</div>
<div class="line">};</div>
</div><!-- fragment --><p>You can initilize your struct like this:</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> bart = Person{.first_name = <span class="stringliteral">&quot;Bart&quot;</span>,</div>
<div class="line">                         .last_name = <span class="stringliteral">&quot;Simpson&quot;</span>,</div>
<div class="line">                         .children = std::vector&lt;Person&gt;()};</div>
</div><!-- fragment --><p>JSON uses camel case, but C++ uses snake case, so you might want to rename your fields:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>Person {</div>
<div class="line">    <a class="code hl_struct" href="structrfl_1_1_rename.html">rfl::Rename</a>&lt;<span class="stringliteral">&quot;firstName&quot;</span>, std::string&gt; first_name;</div>
<div class="line">    <a class="code hl_struct" href="structrfl_1_1_rename.html">rfl::Rename</a>&lt;<span class="stringliteral">&quot;lastName&quot;</span>, std::string&gt; last_name;</div>
<div class="line">    std::vector&lt;Person&gt; children;</div>
<div class="line">};</div>
<div class="ttc" id="astructrfl_1_1_rename_html"><div class="ttname"><a href="structrfl_1_1_rename.html">rfl::Rename</a></div><div class="ttdef"><b>定义</b> Rename.hpp:19</div></div>
</div><!-- fragment --><p>You can also initialize fields in the struct declaration itself:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>Person {</div>
<div class="line">    <a class="code hl_struct" href="structrfl_1_1_rename.html">rfl::Rename</a>&lt;<span class="stringliteral">&quot;firstName&quot;</span>, std::string&gt; first_name;</div>
<div class="line">    <a class="code hl_struct" href="structrfl_1_1_rename.html">rfl::Rename</a>&lt;<span class="stringliteral">&quot;lastName&quot;</span>, std::string&gt; last_name = <span class="stringliteral">&quot;Simpson&quot;</span>;</div>
<div class="line">    std::vector&lt;Person&gt; children;</div>
<div class="line">};</div>
</div><!-- fragment --><p>Because you now have explicitly set this field, you do not have to do this every time:</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> bart = Person{.first_name = <span class="stringliteral">&quot;Bart&quot;</span>};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> lisa = Person{.first_name = <span class="stringliteral">&quot;Lisa&quot;</span>};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> maggie = Person{.first_name = <span class="stringliteral">&quot;Maggie&quot;</span>};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> homer = Person{.first_name = <span class="stringliteral">&quot;Homer&quot;</span>,</div>
<div class="line">                          .children = std::vector&lt;Person&gt;({bart, lisa, maggie})};</div>
</div><!-- fragment --><p>You can write this to a JSON string:</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> json_string = <a class="code hl_function" href="namespacerfl_1_1json.html#af39a23539424555b8c970d12a58e547f">rfl::json::write</a>(homer);</div>
<div class="ttc" id="anamespacerfl_1_1json_html_af39a23539424555b8c970d12a58e547f"><div class="ttname"><a href="namespacerfl_1_1json.html#af39a23539424555b8c970d12a58e547f">rfl::json::write</a></div><div class="ttdeci">std::string write(const auto &amp;_obj, const yyjson_write_flag _flag=0)</div><div class="ttdoc">Returns a JSON string.</div><div class="ttdef"><b>定义</b> write.hpp:26</div></div>
</div><!-- fragment --><div class="fragment"><div class="line">{&quot;firstName&quot;:&quot;Homer&quot;,&quot;lastName&quot;:&quot;Simpson&quot;,&quot;children&quot;:[{&quot;firstName&quot;:&quot;Bart&quot;,&quot;lastName&quot;:&quot;Simpson&quot;,&quot;children&quot;:[]},{&quot;firstName&quot;:&quot;Lisa&quot;,&quot;lastName&quot;:&quot;Simpson&quot;,&quot;children&quot;:[]},{&quot;firstName&quot;:&quot;Maggie&quot;,&quot;lastName&quot;:&quot;Simpson&quot;,&quot;children&quot;:[]}]}</div>
</div><!-- fragment --><p>And you can parse it back into a struct:</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> homer = <a class="code hl_function" href="namespacerfl_1_1json.html#a905573518eca04a9c269d1bb32de7dd1">rfl::json::read&lt;Person&gt;</a>(json_string).value();</div>
<div class="ttc" id="anamespacerfl_1_1json_html_a905573518eca04a9c269d1bb32de7dd1"><div class="ttname"><a href="namespacerfl_1_1json.html#a905573518eca04a9c269d1bb32de7dd1">rfl::json::read</a></div><div class="ttdeci">auto read(const InputVarType &amp;_obj)</div><div class="ttdoc">Parses an object from a JSON var.</div><div class="ttdef"><b>定义</b> read.hpp:26</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md552"></a>
Important note</h1>
<p><b>Do not create custom constructors on the structs.</b></p>
<p>reflect-cpp needs to be able to create the structs like this:</p>
<div class="fragment"><div class="line">Person{<span class="stringliteral">&quot;Bart&quot;</span>, <span class="stringliteral">&quot;Simpson&quot;</span>, ...};</div>
</div><!-- fragment --><p>But if you create a custom constructor, then C++ will no longer allow this kind of constructions.</p>
<p>If you want to create the struct from one of your classes (the most like reason, you want to create custom constructors in the first place), you might want to check out the section on <a class="el" href="md_external_2reflect-cpp_2docs_2concepts_2custom__classes.html">custom classes</a> or <a class="el" href="md_external_2reflect-cpp_2docs_2custom__parser.html">custom parsers</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
