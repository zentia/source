<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>source: Text Processing Pipeline</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">source
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_text_processing_pipeline.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Text Processing Pipeline</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>目录</h3>
<ul>
  <li class="level1">
    <a href="#FormulateTheTextProcessingPipelineProblem">Formulate the Text Processing Pipeline Problem</a>
  </li>
  <li class="level1">
    <a href="#CreateAParallelTextPipeline">Create a Text Processing Pipeline</a>
    <ul>
      <li class="level2">
        <a href="#TextPipelineDefineTheDataBuffer">Define the Data Buffer</a>
      </li>
      <li class="level2">
        <a href="#TextPipelineDefineThePipes">Define the Pipes</a>
      </li>
      <li class="level2">
        <a href="#TextPipelineDefineTheTaskGraph">Define the Task Graph</a>
      </li>
      <li class="level2">
        <a href="#TextPipelineSubmitTheTaskGraph">Submit the Task Graph</a>
      </li>
    </ul>
  </li>
</ul>
</div>
<div class="textblock"><p>We study a text processing pipeline that finds the most frequent character of each string from an input source. Parallelism exhibits in the form of a three-stage pipeline that transforms the input string to a final pair type.</p>
<h1><a class="anchor" id="FormulateTheTextProcessingPipelineProblem"></a>
Formulate the Text Processing Pipeline Problem</h1>
<p>Given an input vector of strings, we want to compute the most frequent character for each string using a series of transform operations. For example:</p>
<div class="fragment"><div class="line">{.shell-session} </div>
<div class="line"><span class="preprocessor"># input strings</span></div>
<div class="line">abade</div>
<div class="line">ddddf</div>
<div class="line">eefge</div>
<div class="line">xyzzd</div>
<div class="line">ijjjj</div>
<div class="line">jiiii</div>
<div class="line">kkijk</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># output</span></div>
<div class="line"><a class="code hl_variable" href="_cwise__product_8cpp.html#ad2cbe4616e813eb9af81732dca777b24">a</a>:2</div>
<div class="line"><a class="code hl_variable" href="ittnotify__static_8h.html#a5f135fd1e66a03efd5275434478e0d97">d</a>:4</div>
<div class="line"><a class="code hl_function" href="_cwise__array__power__array_8cpp.html#a9cb86ff854760bf91a154f2724a9101d">e</a>:3</div>
<div class="line">z:2</div>
<div class="line"><a class="code hl_variable" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a>:4</div>
<div class="line"><a class="code hl_variable" href="_bi_c_g_s_t_a_b__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>:4</div>
<div class="line">k:3</div>
<div class="ttc" id="a_bi_c_g_s_t_a_b__step__by__step_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="_bi_c_g_s_t_a_b__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>定义</b> BiCGSTAB_step_by_step.cpp:9</div></div>
<div class="ttc" id="a_cwise__array__power__array_8cpp_html_a9cb86ff854760bf91a154f2724a9101d"><div class="ttname"><a href="_cwise__array__power__array_8cpp.html#a9cb86ff854760bf91a154f2724a9101d">e</a></div><div class="ttdeci">Array&lt; double, 1, 3 &gt; e(1./3., 0.5, 2.)</div></div>
<div class="ttc" id="a_cwise__product_8cpp_html_ad2cbe4616e813eb9af81732dca777b24"><div class="ttname"><a href="_cwise__product_8cpp.html#ad2cbe4616e813eb9af81732dca777b24">a</a></div><div class="ttdeci">Array33i a</div><div class="ttdef"><b>定义</b> Cwise_product.cpp:1</div></div>
<div class="ttc" id="aittnotify__static_8h_html_a5f135fd1e66a03efd5275434478e0d97"><div class="ttname"><a href="ittnotify__static_8h.html#a5f135fd1e66a03efd5275434478e0d97">d</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d</div><div class="ttdef"><b>定义</b> ittnotify_static.h:109</div></div>
<div class="ttc" id="atut__arithmetic__redux__minmax_8cpp_html_a39513f0f8d942bf9ef17b2e87ac6d34e"><div class="ttname"><a href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a></div><div class="ttdeci">std::ptrdiff_t j</div><div class="ttdef"><b>定义</b> tut_arithmetic_redux_minmax.cpp:2</div></div>
</div><!-- fragment --><p>We decompose the algorithm into three stages:</p>
<ol type="1">
<li>read a <code>std::string</code> from the input vector</li>
<li>generate a <code>std::unorder_map&lt;char, size_t&gt;</code> frequency map from the string</li>
<li>reduce the most frequent character to a <code>std::pair&lt;char, size_t&gt;</code> from the map</li>
</ol>
<p>The first and the third stages process inputs and generate results in serial, and the second stage can run in parallel. The algorithm is a perfect fit to pipeline parallelism, as different stages can overlap with each other in time across parallel lines.</p>
<h1><a class="anchor" id="CreateAParallelTextPipeline"></a>
Create a Text Processing Pipeline</h1>
<p>We create a pipeline of three pipes (stages) and two parallel lines to solve the problem. The number of parallel lines is a tunable parameter. In most cases, we can just use <code>std::thread::hardware_concurrency</code> as the line count. The first pipe reads an input string from the vector in order, the second pipe transforms the input string from the first pipe to a frequency map in parallel, and the third pipe reduces the frequency map to find the most frequent character. The overall implementation is shown below:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="taskflow_8hpp.html">taskflow/taskflow.hpp</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="taskflow_2algorithm_2pipeline_8hpp.html">taskflow/algorithm/pipeline.hpp</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Function: format the map</span></div>
<div class="line">std::string <a class="code hl_function" href="text__pipeline_8cpp.html#ad45572fd1ae363b2ff4dc6cef8a12073">format_map</a>(<span class="keyword">const</span> std::unordered_map&lt;char, size_t&gt;&amp; <a class="code hl_namespace" href="namespacemap.html">map</a>) {</div>
<div class="line">  std::ostringstream oss;</div>
<div class="line">  <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [<a class="code hl_variable" href="_bi_c_g_s_t_a_b__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a>] : <a class="code hl_namespace" href="namespacemap.html">map</a>) {</div>
<div class="line">    oss &lt;&lt; <a class="code hl_variable" href="_bi_c_g_s_t_a_b__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; <a class="code hl_variable" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a> &lt;&lt; <span class="charliteral">&#39; &#39;</span>;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> oss.str();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="main-override-static_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>() {</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_class" href="classtf_1_1_taskflow.html">tf::Taskflow</a> <a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>(<span class="stringliteral">&quot;text-filter pipeline&quot;</span>);</div>
<div class="line">  <a class="code hl_class" href="classtf_1_1_executor.html">tf::Executor</a> <a class="code hl_variable" href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_lines = 2;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// input data </span></div>
<div class="line">  std::vector&lt;std::string&gt; <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> = {</div>
<div class="line">    <span class="stringliteral">&quot;abade&quot;</span>, </div>
<div class="line">    <span class="stringliteral">&quot;ddddf&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;eefge&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;xyzzd&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;ijjjj&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;jiiii&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;kkijk&quot;</span></div>
<div class="line">  };</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// custom data storage</span></div>
<div class="line">  <span class="keyword">using </span><a class="code hl_typedef" href="time__async__return_8cpp.html#a3a4aad394acbc16c69c7c736f90f19b3">data_type</a> = std::variant&lt;</div>
<div class="line">    std::string, std::unordered_map&lt;char, size_t&gt;, std::pair&lt;char, size_t&gt;</div>
<div class="line">  &gt;;</div>
<div class="line">  std::array&lt;data_type, num_lines&gt; mybuffer;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// the pipeline consists of three pipes (serial-parallel-serial)</span></div>
<div class="line">  <span class="comment">// and up to two concurrent scheduling tokens</span></div>
<div class="line">  tf::Pipeline pl(num_lines,</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// first pipe processes the input data</span></div>
<div class="line">    tf::Pipe{<a class="code hl_enumvalue" href="namespacetf.html#abb7a11e41fd457f69e7ff45d4c769564a7b804a28d6154ab8007287532037f1d0">tf::PipeType::SERIAL</a>, [&amp;](tf::Pipeflow&amp; pf) {</div>
<div class="line">      <span class="keywordflow">if</span>(pf.token() == <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.size()) {</div>
<div class="line">        pf.stop();</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code hl_function" href="printf_8h.html#aee3ed3a831f25f07e7be3919fff2203a">printf</a>(<span class="stringliteral">&quot;stage 1: input token = %s\n&quot;</span>, <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>[pf.token()].c_str());</div>
<div class="line">        mybuffer[pf.line()] = <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>[pf.token()];</div>
<div class="line">      }</div>
<div class="line">    }},</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// second pipe counts the frequency of each character</span></div>
<div class="line">    tf::Pipe{<a class="code hl_enumvalue" href="namespacetf.html#abb7a11e41fd457f69e7ff45d4c769564adf13a99b035d6f0bce4f44ab18eec8eb">tf::PipeType::PARALLEL</a>, [&amp;](tf::Pipeflow&amp; pf) {</div>
<div class="line">      std::unordered_map&lt;char, size_t&gt; <a class="code hl_typedef" href="namespaceluisa.html#a6c13a591c2cf8fcdcfbfd6f6678a211c">map</a>;</div>
<div class="line">      <span class="keywordflow">for</span>(<span class="keyword">auto</span> <a class="code hl_variable" href="bench_vec_add_8cpp.html#a41689956983587b085f9da3e48f31d99">c</a> : <a class="code hl_function" href="namespacestd.html#aae41d8280b7ccc3f0e0a0be2dab21c8f">std::get&lt;std::string&gt;</a>(mybuffer[pf.line()])) {</div>
<div class="line">        <a class="code hl_typedef" href="namespaceluisa.html#a6c13a591c2cf8fcdcfbfd6f6678a211c">map</a>[<a class="code hl_variable" href="bench_vec_add_8cpp.html#a41689956983587b085f9da3e48f31d99">c</a>]++;</div>
<div class="line">      }</div>
<div class="line">      <a class="code hl_function" href="printf_8h.html#aee3ed3a831f25f07e7be3919fff2203a">printf</a>(<span class="stringliteral">&quot;stage 2: map = %s\n&quot;</span>, <a class="code hl_function" href="text__pipeline_8cpp.html#ad45572fd1ae363b2ff4dc6cef8a12073">format_map</a>(map).c_str());</div>
<div class="line">      mybuffer[pf.line()] = <a class="code hl_typedef" href="namespaceluisa.html#a6c13a591c2cf8fcdcfbfd6f6678a211c">map</a>;</div>
<div class="line">    }},</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// third pipe reduces the most frequent character</span></div>
<div class="line">    tf::Pipe{<a class="code hl_enumvalue" href="namespacetf.html#abb7a11e41fd457f69e7ff45d4c769564a7b804a28d6154ab8007287532037f1d0">tf::PipeType::SERIAL</a>, [&amp;mybuffer](tf::Pipeflow&amp; pf) {</div>
<div class="line">      <span class="keyword">auto</span>&amp; <a class="code hl_typedef" href="namespaceluisa.html#a6c13a591c2cf8fcdcfbfd6f6678a211c">map</a> = <a class="code hl_function" href="namespacestd.html#aae41d8280b7ccc3f0e0a0be2dab21c8f">std::get&lt;std::unordered_map&lt;char, size_t&gt;</a>&gt;(mybuffer[pf.line()]);</div>
<div class="line">      <span class="keyword">auto</span> sol = std::max_element(<a class="code hl_typedef" href="namespaceluisa.html#a6c13a591c2cf8fcdcfbfd6f6678a211c">map</a>.<a class="code hl_function" href="classeastl_1_1map.html#a92b72981ba789f5936c796db34125e98">begin</a>(), <a class="code hl_typedef" href="namespaceluisa.html#a6c13a591c2cf8fcdcfbfd6f6678a211c">map</a>.<a class="code hl_function" href="classeastl_1_1map.html#a0aa421eb4c2be356df919fd892307369">end</a>(), [](<span class="keyword">auto</span>&amp; <a class="code hl_variable" href="_cwise__product_8cpp.html#ad2cbe4616e813eb9af81732dca777b24">a</a>, <span class="keyword">auto</span>&amp; <a class="code hl_variable" href="offscreen_8c.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>){</div>
<div class="line">        return a.second &lt; b.second;</div>
<div class="line">      });</div>
<div class="line">      <a class="code hl_function" href="printf_8h.html#aee3ed3a831f25f07e7be3919fff2203a">printf</a>(<span class="stringliteral">&quot;stage 3: %c:%zu\n&quot;</span>, sol-&gt;first, sol-&gt;second);</div>
<div class="line">      <span class="comment">// not necessary to store the last-stage data, just for demo purpose</span></div>
<div class="line">      mybuffer[pf.line()] = *sol;  </div>
<div class="line">    }}</div>
<div class="line">  );</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// build the pipeline graph using composition</span></div>
<div class="line">  tf::Task <a class="code hl_function" href="boing_8c.html#a2858154e2009b0e6e616f313177762bc">init</a> = <a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.emplace([](){ std::cout &lt;&lt; <span class="stringliteral">&quot;ready\n&quot;</span>; })</div>
<div class="line">                          .<a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aab18cfce5ee7c6881ae04f18be70d94a">name</a>(<span class="stringliteral">&quot;starting pipeline&quot;</span>);</div>
<div class="line">  tf::Task <a class="code hl_define" href="test__partitioner__whitebox_8h.html#a5c4cf3d37a4eee22275de22cb9619863">task</a> = <a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.composed_of(pl)</div>
<div class="line">                          .name(<span class="stringliteral">&quot;pipeline&quot;</span>);</div>
<div class="line">  tf::Task stop = <a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.emplace([](){ std::cout &lt;&lt; <span class="stringliteral">&quot;stopped\n&quot;</span>; })</div>
<div class="line">                          .<a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aab18cfce5ee7c6881ae04f18be70d94a">name</a>(<span class="stringliteral">&quot;pipeline stopped&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// create task dependency</span></div>
<div class="line">  <a class="code hl_function" href="boing_8c.html#a2858154e2009b0e6e616f313177762bc">init</a>.precede(<a class="code hl_define" href="test__partitioner__whitebox_8h.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>);</div>
<div class="line">  <a class="code hl_define" href="test__partitioner__whitebox_8h.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>.precede(stop);</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// dump the pipeline graph structure (with composition)</span></div>
<div class="line">  <a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.dump(std::cout);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// run the pipeline</span></div>
<div class="line">  <a class="code hl_variable" href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a>.<a class="code hl_function" href="classtf_1_1_executor.html#a519777f5783981d534e9e53b99712069">run</a>(<a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>).wait();</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="abench_vec_add_8cpp_html_a41689956983587b085f9da3e48f31d99"><div class="ttname"><a href="bench_vec_add_8cpp.html#a41689956983587b085f9da3e48f31d99">c</a></div><div class="ttdeci">Scalar Scalar * c</div><div class="ttdef"><b>定义</b> benchVecAdd.cpp:17</div></div>
<div class="ttc" id="abenchmarks_2scan_2scan_8hpp_html_ab7e6955a695fad0be513586926040b1a"><div class="ttname"><a href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a></div><div class="ttdeci">std::vector&lt; int &gt; input</div><div class="ttdef"><b>定义</b> scan.hpp:14</div></div>
<div class="ttc" id="aboing_8c_html_a2858154e2009b0e6e616f313177762bc"><div class="ttname"><a href="boing_8c.html#a2858154e2009b0e6e616f313177762bc">init</a></div><div class="ttdeci">void init(void)</div><div class="ttdef"><b>定义</b> boing.c:182</div></div>
<div class="ttc" id="aclasseastl_1_1map_html_a0aa421eb4c2be356df919fd892307369"><div class="ttname"><a href="classeastl_1_1map.html#a0aa421eb4c2be356df919fd892307369">eastl::map::end</a></div><div class="ttdeci">iterator end() EA_NOEXCEPT</div></div>
<div class="ttc" id="aclasseastl_1_1map_html_a92b72981ba789f5936c796db34125e98"><div class="ttname"><a href="classeastl_1_1map.html#a92b72981ba789f5936c796db34125e98">eastl::map::begin</a></div><div class="ttdeci">iterator begin() EA_NOEXCEPT</div></div>
<div class="ttc" id="aclasstf_1_1_executor_html"><div class="ttname"><a href="classtf_1_1_executor.html">tf::Executor</a></div><div class="ttdoc">class to create an executor for running a taskflow graph</div><div class="ttdef"><b>定义</b> executor-dl.hpp:51</div></div>
<div class="ttc" id="aclasstf_1_1_executor_html_a519777f5783981d534e9e53b99712069"><div class="ttname"><a href="classtf_1_1_executor.html#a519777f5783981d534e9e53b99712069">tf::Executor::run</a></div><div class="ttdeci">tf::Future&lt; void &gt; run(Taskflow &amp;taskflow)</div><div class="ttdoc">runs a taskflow once</div><div class="ttdef"><b>定义</b> executor-dl.hpp:2067</div></div>
<div class="ttc" id="aclasstf_1_1_taskflow_html"><div class="ttname"><a href="classtf_1_1_taskflow.html">tf::Taskflow</a></div><div class="ttdoc">class to create a taskflow object</div><div class="ttdef"><b>定义</b> taskflow.hpp:67</div></div>
<div class="ttc" id="aimgui__impl__opengl3__loader_8h_html_aab18cfce5ee7c6881ae04f18be70d94a"><div class="ttname"><a href="imgui__impl__opengl3__loader_8h.html#aab18cfce5ee7c6881ae04f18be70d94a">name</a></div><div class="ttdeci">const GLchar * name</div><div class="ttdef"><b>定义</b> imgui_impl_opengl3_loader.h:312</div></div>
<div class="ttc" id="amain-override-static_8c_html_ae66f6b31b5ad750f1fe042a706a4e3d4"><div class="ttname"><a href="main-override-static_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a></div><div class="ttdeci">int main()</div><div class="ttdef"><b>定义</b> main-override-static.c:32</div></div>
<div class="ttc" id="anamespaceluisa_html_a6c13a591c2cf8fcdcfbfd6f6678a211c"><div class="ttname"><a href="namespaceluisa.html#a6c13a591c2cf8fcdcfbfd6f6678a211c">luisa::map</a></div><div class="ttdeci">eastl::map&lt; Key, Value, Compare, allocator &gt; map</div><div class="ttdef"><b>定义</b> map.h:45</div></div>
<div class="ttc" id="anamespacemap_html"><div class="ttname"><a href="namespacemap.html">map</a></div><div class="ttdef"><b>定义</b> map_del3.cpp:8</div></div>
<div class="ttc" id="anamespacestd_html_aae41d8280b7ccc3f0e0a0be2dab21c8f"><div class="ttname"><a href="namespacestd.html#aae41d8280b7ccc3f0e0a0be2dab21c8f">std::get</a></div><div class="ttdeci">constexpr auto &amp; get(rfl::Tuple&lt; Types... &gt; &amp;_tup)</div><div class="ttdoc">Gets an element by index.</div><div class="ttdef"><b>定义</b> Tuple.hpp:264</div></div>
<div class="ttc" id="anamespacetf_html_abb7a11e41fd457f69e7ff45d4c769564a7b804a28d6154ab8007287532037f1d0"><div class="ttname"><a href="namespacetf.html#abb7a11e41fd457f69e7ff45d4c769564a7b804a28d6154ab8007287532037f1d0">tf::PipeType::SERIAL</a></div><div class="ttdeci">@ SERIAL</div><div class="ttdoc">serial type</div><div class="ttdef"><b>定义</b> pipeline.hpp:201</div></div>
<div class="ttc" id="anamespacetf_html_abb7a11e41fd457f69e7ff45d4c769564adf13a99b035d6f0bce4f44ab18eec8eb"><div class="ttname"><a href="namespacetf.html#abb7a11e41fd457f69e7ff45d4c769564adf13a99b035d6f0bce4f44ab18eec8eb">tf::PipeType::PARALLEL</a></div><div class="ttdeci">@ PARALLEL</div><div class="ttdoc">parallel type</div><div class="ttdef"><b>定义</b> pipeline.hpp:199</div></div>
<div class="ttc" id="aoffscreen_8c_html_a846c9667e34d56c560bb7f0ac6e173f6"><div class="ttname"><a href="offscreen_8c.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a></div><div class="ttdeci">float b</div><div class="ttdef"><b>定义</b> offscreen.c:42</div></div>
<div class="ttc" id="apoisson_8hpp_html_aa56fe360bb0ae38e0082f49e394ff825"><div class="ttname"><a href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a></div><div class="ttdeci">void taskflow(int nx, int ny, double dx, double dy, double *f, int itold, int itnew, double *u, double *unew, int block_size, unsigned num_threads)</div><div class="ttdef"><b>定义</b> taskflow.cpp:6</div></div>
<div class="ttc" id="aprintf_8h_html_aee3ed3a831f25f07e7be3919fff2203a"><div class="ttname"><a href="printf_8h.html#aee3ed3a831f25f07e7be3919fff2203a">printf</a></div><div class="ttdeci">auto printf(string_view fmt, const T &amp;... args) -&gt; int</div><div class="ttdef"><b>定义</b> printf.h:621</div></div>
<div class="ttc" id="ataskflow_2algorithm_2pipeline_8hpp_html"><div class="ttname"><a href="taskflow_2algorithm_2pipeline_8hpp.html">pipeline.hpp</a></div><div class="ttdoc">pipeline include file</div></div>
<div class="ttc" id="ataskflow_8hpp_html"><div class="ttname"><a href="taskflow_8hpp.html">taskflow.hpp</a></div><div class="ttdoc">main taskflow include file</div></div>
<div class="ttc" id="atest__partitioner__whitebox_8h_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="test__partitioner__whitebox_8h.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">#define task</div><div class="ttdef"><b>定义</b> test_partitioner_whitebox.h:76</div></div>
<div class="ttc" id="atext__pipeline_8cpp_html_ad45572fd1ae363b2ff4dc6cef8a12073"><div class="ttname"><a href="text__pipeline_8cpp.html#ad45572fd1ae363b2ff4dc6cef8a12073">format_map</a></div><div class="ttdeci">std::string format_map(const std::unordered_map&lt; char, size_t &gt; &amp;map)</div><div class="ttdef"><b>定义</b> text_pipeline.cpp:39</div></div>
<div class="ttc" id="athread__pool_8cpp_html_a543e564a8407bbeac15cb2d929fec755"><div class="ttname"><a href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a></div><div class="ttdeci">tf::Executor executor</div><div class="ttdef"><b>定义</b> thread_pool.cpp:6</div></div>
<div class="ttc" id="atime__async__return_8cpp_html_a3a4aad394acbc16c69c7c736f90f19b3"><div class="ttname"><a href="time__async__return_8cpp.html#a3a4aad394acbc16c69c7c736f90f19b3">data_type</a></div><div class="ttdeci">int data_type</div><div class="ttdef"><b>定义</b> time_async_return.cpp:90</div></div>
</div><!-- fragment --><h2><a class="anchor" id="TextPipelineDefineTheDataBuffer"></a>
Define the Data Buffer</h2>
<p>Taskflow does not provide any data abstraction to perform pipeline scheduling, but give users full control over data management in their applications. In this example, we create an one-dimensional buffer of a @std_variant data type to store the output of each pipe in a uniform storage:</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_typedef" href="time__async__return_8cpp.html#a3a4aad394acbc16c69c7c736f90f19b3">data_type</a> = std::variant&lt;</div>
<div class="line">  std::string, std::unordered_map&lt;char, size_t&gt;, std::pair&lt;char, size_t&gt;</div>
<div class="line">&gt;;</div>
<div class="line">std::array&lt;std::array&lt;data_type, num_pipes&gt;, num_lines&gt; mybuffer;</div>
</div><!-- fragment --><dl class="section attention"><dt>注意</dt><dd>One-dimensional buffer is sufficient because Taskflow enables only one scheduling token per line at a time.</dd></dl>
<h2><a class="anchor" id="TextPipelineDefineThePipes"></a>
Define the Pipes</h2>
<p>The first pipe reads one string and puts it in the corresponding entry at the buffer, <code>mybuffer[pf.line()]</code>. Since we read in each string in order, we declare the pipe as a serial type:</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="classtf_1_1_pipe.html">tf::Pipe</a>{<a class="code hl_enumvalue" href="namespacetf.html#abb7a11e41fd457f69e7ff45d4c769564a7b804a28d6154ab8007287532037f1d0">tf::PipeType::SERIAL</a>, [&amp;](<a class="code hl_class" href="classtf_1_1_pipeflow.html">tf::Pipeflow</a>&amp; pf) {</div>
<div class="line">  <span class="keywordflow">if</span>(pf.token() == <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>.size()) {</div>
<div class="line">    pf.stop();</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    mybuffer[pf.line()] = <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>[pf.token()];</div>
<div class="line">    <a class="code hl_function" href="printf_8h.html#aee3ed3a831f25f07e7be3919fff2203a">printf</a>(<span class="stringliteral">&quot;stage 1: input token = %s\n&quot;</span>, <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a>[pf.token()].c_str());</div>
<div class="line">  }</div>
<div class="line">}},</div>
<div class="ttc" id="aclasstf_1_1_pipe_html"><div class="ttname"><a href="classtf_1_1_pipe.html">tf::Pipe</a></div><div class="ttdoc">class to create a pipe object for a pipeline stage</div><div class="ttdef"><b>定义</b> pipeline.hpp:228</div></div>
<div class="ttc" id="aclasstf_1_1_pipeflow_html"><div class="ttname"><a href="classtf_1_1_pipeflow.html">tf::Pipeflow</a></div><div class="ttdoc">class to create a pipeflow object used by the pipe callable</div><div class="ttdef"><b>定义</b> pipeline.hpp:102</div></div>
</div><!-- fragment --><p>The second pipe needs to get the input string from the previous pipe and then transforms that input string into a frequency map that records the occurrence of each character in the string. As multiple transforms can operate simultaneously, we declare the pipe as a parallel type:</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="classtf_1_1_pipe.html">tf::Pipe</a>{<a class="code hl_enumvalue" href="namespacetf.html#abb7a11e41fd457f69e7ff45d4c769564adf13a99b035d6f0bce4f44ab18eec8eb">tf::PipeType::PARALLEL</a>, [&amp;](<a class="code hl_class" href="classtf_1_1_pipeflow.html">tf::Pipeflow</a>&amp; pf) {</div>
<div class="line">  std::unordered_map&lt;char, size_t&gt; <a class="code hl_namespace" href="namespacemap.html">map</a>;</div>
<div class="line">  <span class="keywordflow">for</span>(<span class="keyword">auto</span> <a class="code hl_variable" href="bench_vec_add_8cpp.html#a41689956983587b085f9da3e48f31d99">c</a> : <a class="code hl_function" href="namespacestd.html#aae41d8280b7ccc3f0e0a0be2dab21c8f">std::get&lt;std::string&gt;</a>(mybuffer[pf.line()])) {</div>
<div class="line">    <a class="code hl_namespace" href="namespacemap.html">map</a>[<a class="code hl_variable" href="bench_vec_add_8cpp.html#a41689956983587b085f9da3e48f31d99">c</a>]++;</div>
<div class="line">  }</div>
<div class="line">  mybuffer[pf.line()] = <a class="code hl_namespace" href="namespacemap.html">map</a>;</div>
<div class="line">  <a class="code hl_function" href="printf_8h.html#aee3ed3a831f25f07e7be3919fff2203a">printf</a>(<span class="stringliteral">&quot;stage 2: map = %s\n&quot;</span>, <a class="code hl_function" href="text__pipeline_8cpp.html#ad45572fd1ae363b2ff4dc6cef8a12073">format_map</a>(<a class="code hl_namespace" href="namespacemap.html">map</a>).c_str());</div>
<div class="line">}}</div>
</div><!-- fragment --><p>Similarly, the third pipe needs to get the input frequency map from the previous pipe and then reduces the result to find the most frequent character. We may not need to store the result in the buffer but other places defined by the application (e.g., an output file). As we want to output the result in the same order as the input, we declare the pipe as a serial type:</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="classtf_1_1_pipe.html">tf::Pipe</a>{<a class="code hl_enumvalue" href="namespacetf.html#abb7a11e41fd457f69e7ff45d4c769564a7b804a28d6154ab8007287532037f1d0">tf::PipeType::SERIAL</a>, [&amp;mybuffer](<a class="code hl_class" href="classtf_1_1_pipeflow.html">tf::Pipeflow</a>&amp; pf) {</div>
<div class="line">  <span class="keyword">auto</span>&amp; <a class="code hl_namespace" href="namespacemap.html">map</a> = <a class="code hl_function" href="namespacestd.html#aae41d8280b7ccc3f0e0a0be2dab21c8f">std::get&lt;std::unordered_map&lt;char, size_t&gt;</a>&gt;(mybuffer[pf.line()]);</div>
<div class="line">  <span class="keyword">auto</span> sol = std::max_element(<a class="code hl_namespace" href="namespacemap.html">map</a>.begin(), <a class="code hl_namespace" href="namespacemap.html">map</a>.end(), [](<span class="keyword">auto</span>&amp; <a class="code hl_variable" href="_cwise__product_8cpp.html#ad2cbe4616e813eb9af81732dca777b24">a</a>, <span class="keyword">auto</span>&amp; <a class="code hl_variable" href="offscreen_8c.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>){</div>
<div class="line">    return a.second &lt; b.second;</div>
<div class="line">  });</div>
<div class="line">  <a class="code hl_function" href="printf_8h.html#aee3ed3a831f25f07e7be3919fff2203a">printf</a>(<span class="stringliteral">&quot;stage 3: %c:%zu\n&quot;</span>, sol-&gt;first, sol-&gt;second);</div>
<div class="line">}}</div>
</div><!-- fragment --><h2><a class="anchor" id="TextPipelineDefineTheTaskGraph"></a>
Define the Task Graph</h2>
<p>To build up the taskflow graph for the pipeline, we create a module task out of the pipeline structure and connect it with two tasks that outputs messages before and after the pipeline:</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="classtf_1_1_task.html">tf::Task</a> <a class="code hl_struct" href="structinit.html">init</a> = <a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.emplace([](){ std::cout &lt;&lt; <span class="stringliteral">&quot;ready\n&quot;</span>; })</div>
<div class="line">                        .<a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aab18cfce5ee7c6881ae04f18be70d94a">name</a>(<span class="stringliteral">&quot;starting pipeline&quot;</span>);</div>
<div class="line"><a class="code hl_class" href="classtf_1_1_task.html">tf::Task</a> <a class="code hl_define" href="test__partitioner__whitebox_8h.html#a5c4cf3d37a4eee22275de22cb9619863">task</a> = <a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.composed_of(pl)</div>
<div class="line">                        .name(<span class="stringliteral">&quot;pipeline&quot;</span>);</div>
<div class="line"><a class="code hl_class" href="classtf_1_1_task.html">tf::Task</a> stop = <a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>.emplace([](){ std::cout &lt;&lt; <span class="stringliteral">&quot;stopped\n&quot;</span>; })</div>
<div class="line">                        .<a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#aab18cfce5ee7c6881ae04f18be70d94a">name</a>(<span class="stringliteral">&quot;pipeline stopped&quot;</span>);</div>
<div class="line"><a class="code hl_struct" href="structinit.html">init</a>.precede(<a class="code hl_define" href="test__partitioner__whitebox_8h.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>);</div>
<div class="line"><a class="code hl_define" href="test__partitioner__whitebox_8h.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>.precede(stop);</div>
<div class="ttc" id="aclasstf_1_1_task_html"><div class="ttname"><a href="classtf_1_1_task.html">tf::Task</a></div><div class="ttdoc">class to create a task handle over a node in a taskflow graph</div><div class="ttdef"><b>定义</b> task.hpp:150</div></div>
<div class="ttc" id="astructinit_html"><div class="ttname"><a href="structinit.html">init</a></div><div class="ttdef"><b>定义</b> TutorialInplaceLU.cpp:2</div></div>
</div><!-- fragment --><h2><a class="anchor" id="TextPipelineSubmitTheTaskGraph"></a>
Submit the Task Graph</h2>
<p>Finally, we submit the taskflow to the execution and run it once:</p>
<div class="fragment"><div class="line"><a class="code hl_variable" href="thread__pool_8cpp.html#a543e564a8407bbeac15cb2d929fec755">executor</a>.run(<a class="code hl_function" href="poisson_8hpp.html#aa56fe360bb0ae38e0082f49e394ff825">taskflow</a>).wait();</div>
</div><!-- fragment --><p>As the second stage is a parallel pipe, the output may interleave. One possible result is shown below:</p>
<div class="fragment"><div class="line">{.shell-session} </div>
<div class="line">ready</div>
<div class="line">stage 1: <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> token = abade</div>
<div class="line">stage 1: <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> token = ddddf</div>
<div class="line">stage 2: <a class="code hl_namespace" href="namespacemap.html">map</a> = <a class="code hl_function" href="cxx11__tensor__map_8cpp.html#a7f507fea02198f6cb81c86640c7b1a4e">f</a>:1 <a class="code hl_variable" href="ittnotify__static_8h.html#a5f135fd1e66a03efd5275434478e0d97">d</a>:4 </div>
<div class="line">stage 2: <a class="code hl_namespace" href="namespacemap.html">map</a> = <a class="code hl_function" href="_cwise__array__power__array_8cpp.html#a9cb86ff854760bf91a154f2724a9101d">e</a>:1 <a class="code hl_variable" href="ittnotify__static_8h.html#a5f135fd1e66a03efd5275434478e0d97">d</a>:1 <a class="code hl_variable" href="_cwise__product_8cpp.html#ad2cbe4616e813eb9af81732dca777b24">a</a>:2 <a class="code hl_variable" href="offscreen_8c.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>:1 </div>
<div class="line">stage 3: <a class="code hl_variable" href="_cwise__product_8cpp.html#ad2cbe4616e813eb9af81732dca777b24">a</a>:2</div>
<div class="line">stage 1: <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> token = eefge</div>
<div class="line">stage 2: <a class="code hl_namespace" href="namespacemap.html">map</a> = <a class="code hl_variable" href="offscreen_8c.html#a8cf17d727651616de6f2b79ef32170cd">g</a>:1 <a class="code hl_function" href="_cwise__array__power__array_8cpp.html#a9cb86ff854760bf91a154f2724a9101d">e</a>:3 <a class="code hl_function" href="cxx11__tensor__map_8cpp.html#a7f507fea02198f6cb81c86640c7b1a4e">f</a>:1 </div>
<div class="line">stage 3: <a class="code hl_variable" href="ittnotify__static_8h.html#a5f135fd1e66a03efd5275434478e0d97">d</a>:4</div>
<div class="line">stage 1: <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> token = xyzzd</div>
<div class="line">stage 3: <a class="code hl_function" href="_cwise__array__power__array_8cpp.html#a9cb86ff854760bf91a154f2724a9101d">e</a>:3</div>
<div class="line">stage 1: <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> token = ijjjj</div>
<div class="line">stage 2: <a class="code hl_namespace" href="namespacemap.html">map</a> = z:2 <a class="code hl_variable" href="offscreen_8c.html#a5fd331c99e778f04762be6d8173eb4d2">x</a>:1 <a class="code hl_variable" href="ittnotify__static_8h.html#a5f135fd1e66a03efd5275434478e0d97">d</a>:1 <a class="code hl_typedef" href="imgui__impl__opengl3__loader_8h.html#a5e247fc24ceb70d83f6ad59149b8910a">y</a>:1 </div>
<div class="line">stage 3: z:2</div>
<div class="line">stage 1: <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> token = jiiii</div>
<div class="line">stage 2: <a class="code hl_namespace" href="namespacemap.html">map</a> = <a class="code hl_variable" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a>:4 <a class="code hl_variable" href="_bi_c_g_s_t_a_b__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>:1 </div>
<div class="line">stage 3: <a class="code hl_variable" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a>:4</div>
<div class="line">stage 2: <a class="code hl_namespace" href="namespacemap.html">map</a> = <a class="code hl_variable" href="_bi_c_g_s_t_a_b__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>:4 <a class="code hl_variable" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a>:1 </div>
<div class="line">stage 1: <a class="code hl_variable" href="benchmarks_2scan_2scan_8hpp.html#ab7e6955a695fad0be513586926040b1a">input</a> token = kkijk</div>
<div class="line">stage 3: <a class="code hl_variable" href="_bi_c_g_s_t_a_b__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>:4</div>
<div class="line">stage 2: <a class="code hl_namespace" href="namespacemap.html">map</a> = <a class="code hl_variable" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a>:1 k:3 <a class="code hl_variable" href="_bi_c_g_s_t_a_b__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>:1 </div>
<div class="line">stage 3: k:3</div>
<div class="line">stopped</div>
<div class="ttc" id="acxx11__tensor__map_8cpp_html_a7f507fea02198f6cb81c86640c7b1a4e"><div class="ttname"><a href="cxx11__tensor__map_8cpp.html#a7f507fea02198f6cb81c86640c7b1a4e">f</a></div><div class="ttdeci">static int f(const TensorMap&lt; Tensor&lt; int, 3 &gt; &gt; &amp;tensor)</div><div class="ttdef"><b>定义</b> cxx11_tensor_map.cpp:238</div></div>
<div class="ttc" id="aimgui__impl__opengl3__loader_8h_html_a5e247fc24ceb70d83f6ad59149b8910a"><div class="ttname"><a href="imgui__impl__opengl3__loader_8h.html#a5e247fc24ceb70d83f6ad59149b8910a">y</a></div><div class="ttdeci">GLint y</div><div class="ttdef"><b>定义</b> imgui_impl_opengl3_loader.h:188</div></div>
<div class="ttc" id="aoffscreen_8c_html_a5fd331c99e778f04762be6d8173eb4d2"><div class="ttname"><a href="offscreen_8c.html#a5fd331c99e778f04762be6d8173eb4d2">x</a></div><div class="ttdeci">float x</div><div class="ttdef"><b>定义</b> offscreen.c:41</div></div>
<div class="ttc" id="aoffscreen_8c_html_a8cf17d727651616de6f2b79ef32170cd"><div class="ttname"><a href="offscreen_8c.html#a8cf17d727651616de6f2b79ef32170cd">g</a></div><div class="ttdeci">float g</div><div class="ttdef"><b>定义</b> offscreen.c:42</div></div>
</div><!-- fragment --><p>We can see seven outputs at the third stage that show the most frequent character for each of the seven strings in order (<code>a:2</code>, <code>d:4</code>, <code>e:3</code>, <code>z:2</code>, <code>j:4</code>, <code>i:4</code>, <code>k:3</code>). The taskflow graph of this pipeline workload is shown below:</p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
