\doxysection{ff\+::SWSR\+\_\+\+Ptr\+\_\+\+Buffer类 参考}
\hypertarget{classff_1_1_s_w_s_r___ptr___buffer}{}\label{classff_1_1_s_w_s_r___ptr___buffer}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}


SPSC bound channel (Single-\/\+Writer/\+Single-\/\+Reader)  




{\ttfamily \#include $<$buffer.\+hpp$>$}

\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_a6b0a3e18ec0a6a7447f7195daeb1f795}{SWSR\+\_\+\+Ptr\+\_\+\+Buffer}} (unsigned long \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}, const \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}=\mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}})
\item 
\mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_a89b06abc1175858480e249ca0abf2972}{\texorpdfstring{$\sim$}{\string~}\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer}} ()
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_ad1db7c944552c0c75f4dfdc8dd88e7f9}{init}} (const \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} startatlineend=\mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}})
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_a2700fc8ac668868195894ca54aedacaa}{empty}} ()
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_a92ae06039c2a3f41373c219f5261ed00}{available}} ()
\item 
size\+\_\+t \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_a726fbb988d5ba7d3479042310e523e6f}{buffersize}} () const
\item 
size\+\_\+t \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_ab1505d4dc9b2832d357f2f57f7acc86a}{changesize}} (size\+\_\+t newsz)
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_a77bed50b424708f67cc629a540586fba}{push}} (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}const \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}})
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_a7c0877a5780564072b03a0ae91899e9b}{multipush}} (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}const \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}\mbox{[}$\,$\mbox{]}, \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}})
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_af1f3fbe8bafd0b14fd33e23413de2492}{inc}} ()
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_ab1e24ef6aa082aca6d1b2d12d10abbbd}{pop}} (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}})
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_abd84ec859d5427fa32c0806642df4fb7}{top}} () const
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_af3b0e2082546fd8f8a30e9243ea76d04}{reset}} (const \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} startatlineend=\mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}})
\item 
unsigned long \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_a56f6275dd54d75f275f47bc31df2d115}{length}} () const
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_a215ae0dcb3504f9c3fd74efd204cc94e}{mp\+\_\+push}} (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}const)
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_a307debac34e5b4b563b46b9343e25f8c}{mc\+\_\+pop}} (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*})
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_a5cf9cff3d2111a5b183eca9855ea9c95}{is\+Fixed\+Size}} () const
\end{DoxyCompactItemize}
\doxysubsubsection*{Public 属性}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}(SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_abffd83123edd022cf2d91d702ad3fecf}{push\+PMF}} )(\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}const)
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}(SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_a1df906e356b5045d7332afa43f6babe9}{pop\+PMF}} )(\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*})
\end{DoxyCompactItemize}
\doxysubsubsection*{Private 类型}
\begin{DoxyCompactItemize}
\item 
enum \{ \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_a41d5971043f5b6862905bc7392aed88aa6cdc8efe9ce512fc3982f6704642122e}{MULTIPUSH\+\_\+\+BUFFER\+\_\+\+SIZE}} =16
 \}
\end{DoxyCompactItemize}
\doxysubsubsection*{Private 属性}
\begin{DoxyCompactItemize}
\item 
volatile unsigned long \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_adb9eafb6b9832b17e5a4091ecd6b3901}{pread}}
\item 
volatile unsigned long \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_a9f3b26c3fe43e566835c991bfc0cc310}{pwrite}}
\item 
size\+\_\+t \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_aca07cf88341eafa6cc45d95a2c911b18}{size}}
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classff_1_1_s_w_s_r___ptr___buffer_a337875fd92896f514d6ba2f5a398c624}{buf}}
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
SPSC bound channel (Single-\/\+Writer/\+Single-\/\+Reader) 

This class describes the SWSR circular buffer, used in Fast\+Flow to implement a lock-\/free (wait-\/free) bounded FIFO queue. No lock is needed around pop and push methods.

\doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} single NULL value is used to indicate buffer full and buffer empty conditions.

This class is defined in \doxylink{buffer_8hpp}{buffer.\+hpp} 

\doxysubsection{成员枚举类型说明}
\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_a41d5971043f5b6862905bc7392aed88a}\doxysubsubsection{\texorpdfstring{anonymous enum}{anonymous enum}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_a41d5971043f5b6862905bc7392aed88a} 
anonymous enum\hspace{0.3cm}{\ttfamily [private]}}

experimentally we found that a good value is between 2 and 6 cache lines (16 to 48 entries respectively) \begin{DoxyEnumFields}[2]{枚举值}
\raisebox{\heightof{T}}[0pt][0pt]{\index{MULTIPUSH\_BUFFER\_SIZE@{MULTIPUSH\_BUFFER\_SIZE}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!MULTIPUSH\_BUFFER\_SIZE@{MULTIPUSH\_BUFFER\_SIZE}}}\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_a41d5971043f5b6862905bc7392aed88aa6cdc8efe9ce512fc3982f6704642122e}\label{classff_1_1_s_w_s_r___ptr___buffer_a41d5971043f5b6862905bc7392aed88aa6cdc8efe9ce512fc3982f6704642122e} 
MULTIPUSH\+\_\+\+BUFFER\+\_\+\+SIZE&\\
\hline

\end{DoxyEnumFields}


\doxysubsection{构造及析构函数说明}
\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_a6b0a3e18ec0a6a7447f7195daeb1f795}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!SWSR\_Ptr\_Buffer@{SWSR\_Ptr\_Buffer}}
\index{SWSR\_Ptr\_Buffer@{SWSR\_Ptr\_Buffer}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{SWSR\_Ptr\_Buffer()}{SWSR\_Ptr\_Buffer()}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_a6b0a3e18ec0a6a7447f7195daeb1f795} 
ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer (\begin{DoxyParamCaption}\item[{unsigned long}]{n}{, }\item[{const \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}}]{}{ = {\ttfamily \mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}}}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Constructor.


\begin{DoxyParams}{参数}
{\em n} & the size of the buffer \\
\hline
\end{DoxyParams}
函数调用图\+:
% FIG 0
\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_a89b06abc1175858480e249ca0abf2972}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!````~SWSR\_Ptr\_Buffer@{\texorpdfstring{$\sim$}{\string~}SWSR\_Ptr\_Buffer}}
\index{````~SWSR\_Ptr\_Buffer@{\texorpdfstring{$\sim$}{\string~}SWSR\_Ptr\_Buffer}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}SWSR\_Ptr\_Buffer()}{\string~SWSR\_Ptr\_Buffer()}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_a89b06abc1175858480e249ca0abf2972} 
ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::\texorpdfstring{$\sim$}{\string~}\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Default destructor 函数调用图\+:
% FIG 1


\doxysubsection{成员函数说明}
\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_a92ae06039c2a3f41373c219f5261ed00}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!available@{available}}
\index{available@{available}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{available()}{available()}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_a92ae06039c2a3f41373c219f5261ed00} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::available (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

It returns true if there is at least one room in the buffer. \Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_a726fbb988d5ba7d3479042310e523e6f}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!buffersize@{buffersize}}
\index{buffersize@{buffersize}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{buffersize()}{buffersize()}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_a726fbb988d5ba7d3479042310e523e6f} 
size\+\_\+t ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::buffersize (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

It returns the size of the buffer.

\begin{DoxyReturn}{返回}
The size of the buffer. 
\end{DoxyReturn}
\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_ab1505d4dc9b2832d357f2f57f7acc86a}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!changesize@{changesize}}
\index{changesize@{changesize}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{changesize()}{changesize()}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_ab1505d4dc9b2832d357f2f57f7acc86a} 
size\+\_\+t ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::changesize (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{newsz}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

It changes the size of the queue WITHOUT reallocating the internal buffer. It should be used mainly for reducing the size of the queue or to restore it after is has been previously reduced.

WARNING\+: this is very a dangerous operation if executed while the queue is being used; if wrongly used, it may lead to data loss or memory corruption! \Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_a2700fc8ac668868195894ca54aedacaa}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!empty@{empty}}
\index{empty@{empty}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{empty()}{empty()}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_a2700fc8ac668868195894ca54aedacaa} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::empty (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

It returns true if the buffer is empty. \Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_af1f3fbe8bafd0b14fd33e23413de2492}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!inc@{inc}}
\index{inc@{inc}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{inc()}{inc()}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_af1f3fbe8bafd0b14fd33e23413de2492} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::inc (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

It is like pop but doesn\textquotesingle{}t copy any data.

\begin{DoxyReturn}{返回}
{\ttfamily true} is alway returned. 
\end{DoxyReturn}
\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_ad1db7c944552c0c75f4dfdc8dd88e7f9}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!init@{init}}
\index{init@{init}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_ad1db7c944552c0c75f4dfdc8dd88e7f9} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::init (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}}]{startatlineend}{ = {\ttfamily \mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}}}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

It initialise the buffer. Allocate space ({\ttfamily size}) of possibly aligned memory and reset the pointers (read pointer and write pointer) by placing them at the beginning of the buffer.

\begin{DoxyReturn}{返回}
TODO 
\end{DoxyReturn}
函数调用图\+:
% FIG 2
\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_a5cf9cff3d2111a5b183eca9855ea9c95}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!isFixedSize@{isFixedSize}}
\index{isFixedSize@{isFixedSize}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{isFixedSize()}{isFixedSize()}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_a5cf9cff3d2111a5b183eca9855ea9c95} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::is\+Fixed\+Size (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_a56f6275dd54d75f275f47bc31df2d115}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!length@{length}}
\index{length@{length}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{length()}{length()}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_a56f6275dd54d75f275f47bc31df2d115} 
unsigned long ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::length (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

It returns the length of the buffer (i.\+e. the actual number of elements it contains) \Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_a307debac34e5b4b563b46b9343e25f8c}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!mc\_pop@{mc\_pop}}
\index{mc\_pop@{mc\_pop}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{mc\_pop()}{mc\_pop()}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_a307debac34e5b4b563b46b9343e25f8c} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::mc\+\_\+pop (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_a215ae0dcb3504f9c3fd74efd204cc94e}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!mp\_push@{mp\_push}}
\index{mp\_push@{mp\_push}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{mp\_push()}{mp\_push()}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_a215ae0dcb3504f9c3fd74efd204cc94e} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::mp\+\_\+push (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*} const}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_a7c0877a5780564072b03a0ae91899e9b}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!multipush@{multipush}}
\index{multipush@{multipush}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{multipush()}{multipush()}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_a7c0877a5780564072b03a0ae91899e9b} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::multipush (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}const}]{data}{\mbox{[}$\,$\mbox{]}, }\item[{\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{len}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

The multipush method, which pushes a batch of elements (array) in the queue. NOTE\+: len should be a multiple of longx\+Cache\+Line/sizeof(void\texorpdfstring{$\ast$}{*}) \Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_ab1e24ef6aa082aca6d1b2d12d10abbbd}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!pop@{pop}}
\index{pop@{pop}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{pop()}{pop()}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_ab1e24ef6aa082aca6d1b2d12d10abbbd} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::pop (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{data}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Pop method\+: get the next value from the FIFO buffer.


\begin{DoxyParams}{参数}
{\em data} & Pointer to the location where to store the data popped from the buffer. \\
\hline
\end{DoxyParams}
函数调用图\+:
% FIG 3
\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_a77bed50b424708f67cc629a540586fba}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!push@{push}}
\index{push@{push}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{push()}{push()}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_a77bed50b424708f67cc629a540586fba} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::push (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}const}]{data}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Push method\+: push the input value into the queue. \doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} Write Memory \doxylink{classff_1_1_barrier}{Barrier} (WMB) ensures that all previous memory writes are visible to the other processors before any later write is executed. This is an "{}expensive"{} memory fence operation needed in all the architectures with a weak-\/ordering memory model, where stores can be executed out-\/of-\/order (e.\+g. Power\+Pc). This is a no-\/op on Intel x86/x86-\/64 CPUs.


\begin{DoxyParams}{参数}
{\em data} & \doxylink{test__parallel__while_8cpp_a17f27895c682e0ef36fa430ec3c815df}{Element} to be pushed in the buffer\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
TODO 
\end{DoxyReturn}
Write Memory \doxylink{classff_1_1_barrier}{Barrier}\+: ensure all previous memory write are visible to the other processors before any later writes are executed. This is an "{}expensive"{} memory fence operation needed in all the architectures with a weak-\/ordering memory model where stores can be executed out-\/or-\/order (e.\+g. Powerpc). This is a no-\/op on Intel x86/x86-\/64 CPUs.函数调用图\+:
% FIG 4
\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_af3b0e2082546fd8f8a30e9243ea76d04}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!reset@{reset}}
\index{reset@{reset}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_af3b0e2082546fd8f8a30e9243ea76d04} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::reset (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}}]{startatlineend}{ = {\ttfamily \mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}}}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Reset the buffer and move {\ttfamily read} and {\ttfamily write} pointers to the beginning of the buffer (i.\+e. position 0). Also, the entire buffer is cleaned and set to 0 This is a good starting point if the multipush method will be used in order to reduce cache trashing.\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_abd84ec859d5427fa32c0806642df4fb7}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!top@{top}}
\index{top@{top}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{top()}{top()}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_abd84ec859d5427fa32c0806642df4fb7} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*} ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::top (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

It returns the "{}head"{} of the buffer, i.\+e. the element pointed by the read pointer (it is a FIFO queue, so {\ttfamily push} on the tail and {\ttfamily pop} from the head).

\begin{DoxyReturn}{返回}
The head of the buffer. 
\end{DoxyReturn}


\doxysubsection{类成员变量说明}
\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_a337875fd92896f514d6ba2f5a398c624}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!buf@{buf}}
\index{buf@{buf}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{buf}{buf}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_a337875fd92896f514d6ba2f5a398c624} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::buf\hspace{0.3cm}{\ttfamily [private]}}

\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_a1df906e356b5045d7332afa43f6babe9}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!popPMF@{popPMF}}
\index{popPMF@{popPMF}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{popPMF}{popPMF}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_a1df906e356b5045d7332afa43f6babe9} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}(SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::\texorpdfstring{$\ast$}{*} ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::pop\+PMF) (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*})}

\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_adb9eafb6b9832b17e5a4091ecd6b3901}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!pread@{pread}}
\index{pread@{pread}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{pread}{pread}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_adb9eafb6b9832b17e5a4091ecd6b3901} 
volatile unsigned long ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::pread\hspace{0.3cm}{\ttfamily [private]}}

\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_abffd83123edd022cf2d91d702ad3fecf}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!pushPMF@{pushPMF}}
\index{pushPMF@{pushPMF}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{pushPMF}{pushPMF}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_abffd83123edd022cf2d91d702ad3fecf} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}(SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::\texorpdfstring{$\ast$}{*} ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::push\+PMF) (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}const)}

\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_a9f3b26c3fe43e566835c991bfc0cc310}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!pwrite@{pwrite}}
\index{pwrite@{pwrite}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{pwrite}{pwrite}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_a9f3b26c3fe43e566835c991bfc0cc310} 
volatile unsigned long ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::pwrite\hspace{0.3cm}{\ttfamily [private]}}

\Hypertarget{classff_1_1_s_w_s_r___ptr___buffer_aca07cf88341eafa6cc45d95a2c911b18}\index{ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}!size@{size}}
\index{size@{size}!ff::SWSR\_Ptr\_Buffer@{ff::SWSR\_Ptr\_Buffer}}
\doxysubsubsection{\texorpdfstring{size}{size}}
{\footnotesize\ttfamily \label{classff_1_1_s_w_s_r___ptr___buffer_aca07cf88341eafa6cc45d95a2c911b18} 
size\+\_\+t ff\+::\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer\+::size\hspace{0.3cm}{\ttfamily [private]}}



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/taskflow/3rd-\/party/ff/\mbox{\hyperlink{buffer_8hpp}{buffer.\+hpp}}\end{DoxyCompactItemize}
