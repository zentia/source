\doxysection{tf\+::Chrome\+Observer类 参考}
\hypertarget{classtf_1_1_chrome_observer}{}\label{classtf_1_1_chrome_observer}\index{tf::ChromeObserver@{tf::ChromeObserver}}


class to create an observer based on Chrome tracing format  




{\ttfamily \#include $<$observer.\+hpp$>$}



类 tf\+::Chrome\+Observer 继承关系图\+:
% FIG 0


tf\+::Chrome\+Observer 的协作图\+:
% FIG 1
\doxysubsubsection*{类}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structtf_1_1_chrome_observer_1_1_segment}{Segment}}
\item 
struct \mbox{\hyperlink{structtf_1_1_chrome_observer_1_1_timeline}{Timeline}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1_chrome_observer_a5df3852d8525cabafee696d5f77b3fd7}{dump}} (std\+::ostream \&\mbox{\hyperlink{doctest_8h_a116af65cb5e924b33ad9d9ecd7a783f3}{ostream}}) const
\begin{DoxyCompactList}\small\item\em dumps the timelines into a @\+Chrome\+Tracing format through an output stream \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{classtf_1_1_chrome_observer_a414d60cee91db1d3924636fcea5f4ea7}{dump}} () const
\begin{DoxyCompactList}\small\item\em dumps the timelines into a @\+Chrome\+Tracing format \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1_chrome_observer_a3948e57186155a6934c100447cb9332d}{clear}} ()
\begin{DoxyCompactList}\small\item\em clears the timeline data \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classtf_1_1_chrome_observer_a44032b7607de5dd929683739f4df9ef2}{num\+\_\+tasks}} () const
\begin{DoxyCompactList}\small\item\em queries the number of tasks observed \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public 成员函数 继承自 \mbox{\hyperlink{classtf_1_1_observer_interface}{tf\+::\+Observer\+Interface}}}
\begin{DoxyCompactItemize}
\item 
virtual \mbox{\hyperlink{classtf_1_1_observer_interface_adfd71c3af3ae2ea4f41eed26c1b6f604}{\texorpdfstring{$\sim$}{\string~}\+Observer\+Interface}} ()=\mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}}
\begin{DoxyCompactList}\small\item\em virtual destructor \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1_chrome_observer_aa8d5d9c3d0de7e7006d27079d8eb3888}{set\+\_\+up}} (size\+\_\+t num\+\_\+workers) override final
\begin{DoxyCompactList}\small\item\em constructor-\/like method to call when the executor observer is fully created \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1_chrome_observer_a6fa502ca5ef6bfb9d2168db190125855}{on\+\_\+entry}} (\mbox{\hyperlink{classtf_1_1_worker_view}{Worker\+View}} \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}, \mbox{\hyperlink{classtf_1_1_task_view}{Task\+View}} task\+\_\+view) override final
\begin{DoxyCompactList}\small\item\em method to call before a worker thread executes a closure \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1_chrome_observer_a62ae8c50814d285d29e50a322461a803}{on\+\_\+exit}} (\mbox{\hyperlink{classtf_1_1_worker_view}{Worker\+View}} \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}, \mbox{\hyperlink{classtf_1_1_task_view}{Task\+View}} task\+\_\+view) override final
\begin{DoxyCompactList}\small\item\em method to call after a worker thread executed a closure \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private 属性}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structtf_1_1_chrome_observer_1_1_timeline}{Timeline}} \mbox{\hyperlink{classtf_1_1_chrome_observer_aee57a7a03bb4af2aadd2fdefbebd9e7b}{\+\_\+timeline}}
\end{DoxyCompactItemize}
\doxysubsubsection*{友元}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classtf_1_1_chrome_observer_a763b2f90bc53f92d680a635fe28e858e}{Executor}}
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
class to create an observer based on Chrome tracing format 

\doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} \doxylink{classtf_1_1_chrome_observer}{tf\+::\+Chrome\+Observer} inherits \doxylink{classtf_1_1_observer_interface}{tf\+::\+Observer\+Interface} and defines methods to dump the observed thread activities into a format that can be visualized through @\+Chrome\+Tracing.


\begin{DoxyCode}{0}
\DoxyCodeLine{tf::Taskflow\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}};}
\DoxyCodeLine{tf::Executor\ \mbox{\hyperlink{thread__pool_8cpp_a543e564a8407bbeac15cb2d929fec755}{executor}};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ insert\ tasks\ into\ taskflow}}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}
\DoxyCodeLine{\ \ }
\DoxyCodeLine{\textcolor{comment}{//\ create\ a\ custom\ observer}}
\DoxyCodeLine{std::shared\_ptr<tf::ChromeObserver>\ \mbox{\hyperlink{test__basics_8cpp_ae362ef40752341c76d5edd1d99e46918}{observer}}\ =\ \mbox{\hyperlink{thread__pool_8cpp_a543e564a8407bbeac15cb2d929fec755}{executor}}.\mbox{\hyperlink{classtf_1_1_executor_aff77def96ae740d648dd84e571237c83}{make\_observer}}<tf::ChromeObserver>();}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ run\ the\ taskflow}}
\DoxyCodeLine{\mbox{\hyperlink{thread__pool_8cpp_a543e564a8407bbeac15cb2d929fec755}{executor}}.\mbox{\hyperlink{classtf_1_1_executor_a519777f5783981d534e9e53b99712069}{run}}(\mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}}).wait();}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ dump\ the\ thread\ activities\ to\ a\ chrome-\/tracing\ format.}}
\DoxyCodeLine{\mbox{\hyperlink{test__basics_8cpp_ae362ef40752341c76d5edd1d99e46918}{observer}}-\/>dump(std::cout);}

\end{DoxyCode}
 

\doxysubsection{成员函数说明}
\Hypertarget{classtf_1_1_chrome_observer_a3948e57186155a6934c100447cb9332d}\index{tf::ChromeObserver@{tf::ChromeObserver}!clear@{clear}}
\index{clear@{clear}!tf::ChromeObserver@{tf::ChromeObserver}}
\doxysubsubsection{\texorpdfstring{clear()}{clear()}}
{\footnotesize\ttfamily \label{classtf_1_1_chrome_observer_a3948e57186155a6934c100447cb9332d} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tf\+::\+Chrome\+Observer\+::clear (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



clears the timeline data 

\Hypertarget{classtf_1_1_chrome_observer_a414d60cee91db1d3924636fcea5f4ea7}\index{tf::ChromeObserver@{tf::ChromeObserver}!dump@{dump}}
\index{dump@{dump}!tf::ChromeObserver@{tf::ChromeObserver}}
\doxysubsubsection{\texorpdfstring{dump()}{dump()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classtf_1_1_chrome_observer_a414d60cee91db1d3924636fcea5f4ea7} 
std\+::string tf\+::\+Chrome\+Observer\+::dump (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



dumps the timelines into a @\+Chrome\+Tracing format 

函数调用图\+:
% FIG 2
\Hypertarget{classtf_1_1_chrome_observer_a5df3852d8525cabafee696d5f77b3fd7}\index{tf::ChromeObserver@{tf::ChromeObserver}!dump@{dump}}
\index{dump@{dump}!tf::ChromeObserver@{tf::ChromeObserver}}
\doxysubsubsection{\texorpdfstring{dump()}{dump()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classtf_1_1_chrome_observer_a5df3852d8525cabafee696d5f77b3fd7} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tf\+::\+Chrome\+Observer\+::dump (\begin{DoxyParamCaption}\item[{std\+::ostream \&}]{ostream}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



dumps the timelines into a @\+Chrome\+Tracing format through an output stream 

\Hypertarget{classtf_1_1_chrome_observer_a44032b7607de5dd929683739f4df9ef2}\index{tf::ChromeObserver@{tf::ChromeObserver}!num\_tasks@{num\_tasks}}
\index{num\_tasks@{num\_tasks}!tf::ChromeObserver@{tf::ChromeObserver}}
\doxysubsubsection{\texorpdfstring{num\_tasks()}{num\_tasks()}}
{\footnotesize\ttfamily \label{classtf_1_1_chrome_observer_a44032b7607de5dd929683739f4df9ef2} 
size\+\_\+t tf\+::\+Chrome\+Observer\+::num\+\_\+tasks (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



queries the number of tasks observed 

\Hypertarget{classtf_1_1_chrome_observer_a6fa502ca5ef6bfb9d2168db190125855}\index{tf::ChromeObserver@{tf::ChromeObserver}!on\_entry@{on\_entry}}
\index{on\_entry@{on\_entry}!tf::ChromeObserver@{tf::ChromeObserver}}
\doxysubsubsection{\texorpdfstring{on\_entry()}{on\_entry()}}
{\footnotesize\ttfamily \label{classtf_1_1_chrome_observer_a6fa502ca5ef6bfb9d2168db190125855} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tf\+::\+Chrome\+Observer\+::on\+\_\+entry (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtf_1_1_worker_view}{Worker\+View}}}]{wv}{, }\item[{\mbox{\hyperlink{classtf_1_1_task_view}{Task\+View}}}]{task\+\_\+view}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [final]}, {\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}}



method to call before a worker thread executes a closure 


\begin{DoxyParams}{参数}
{\em wv} & an immutable view of this worker thread \\
\hline
{\em task\+\_\+view} & a constant wrapper object to the task \\
\hline
\end{DoxyParams}


实现了 \mbox{\hyperlink{classtf_1_1_observer_interface_a8225fcacb03089677a1efc4b16b734cc}{tf\+::\+Observer\+Interface}}.

函数调用图\+:
% FIG 3
\Hypertarget{classtf_1_1_chrome_observer_a62ae8c50814d285d29e50a322461a803}\index{tf::ChromeObserver@{tf::ChromeObserver}!on\_exit@{on\_exit}}
\index{on\_exit@{on\_exit}!tf::ChromeObserver@{tf::ChromeObserver}}
\doxysubsubsection{\texorpdfstring{on\_exit()}{on\_exit()}}
{\footnotesize\ttfamily \label{classtf_1_1_chrome_observer_a62ae8c50814d285d29e50a322461a803} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tf\+::\+Chrome\+Observer\+::on\+\_\+exit (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtf_1_1_worker_view}{Worker\+View}}}]{wv}{, }\item[{\mbox{\hyperlink{classtf_1_1_task_view}{Task\+View}}}]{task\+\_\+view}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [final]}, {\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}}



method to call after a worker thread executed a closure 


\begin{DoxyParams}{参数}
{\em wv} & an immutable view of this worker thread \\
\hline
{\em task\+\_\+view} & a constant wrapper object to the task \\
\hline
\end{DoxyParams}


实现了 \mbox{\hyperlink{classtf_1_1_observer_interface_aa22f5378154653f08d9a58326bda4754}{tf\+::\+Observer\+Interface}}.

函数调用图\+:
% FIG 4
\Hypertarget{classtf_1_1_chrome_observer_aa8d5d9c3d0de7e7006d27079d8eb3888}\index{tf::ChromeObserver@{tf::ChromeObserver}!set\_up@{set\_up}}
\index{set\_up@{set\_up}!tf::ChromeObserver@{tf::ChromeObserver}}
\doxysubsubsection{\texorpdfstring{set\_up()}{set\_up()}}
{\footnotesize\ttfamily \label{classtf_1_1_chrome_observer_aa8d5d9c3d0de7e7006d27079d8eb3888} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tf\+::\+Chrome\+Observer\+::set\+\_\+up (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{num\+\_\+workers}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [final]}, {\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}}



constructor-\/like method to call when the executor observer is fully created 


\begin{DoxyParams}{参数}
{\em num\+\_\+workers} & the number of the worker threads in the executor \\
\hline
\end{DoxyParams}


实现了 \mbox{\hyperlink{classtf_1_1_observer_interface_a41e6e62f12bf9d9dc4fa74632f6825d9}{tf\+::\+Observer\+Interface}}.



\doxysubsection{友元及相关符号说明}
\Hypertarget{classtf_1_1_chrome_observer_a763b2f90bc53f92d680a635fe28e858e}\index{tf::ChromeObserver@{tf::ChromeObserver}!Executor@{Executor}}
\index{Executor@{Executor}!tf::ChromeObserver@{tf::ChromeObserver}}
\doxysubsubsection{\texorpdfstring{Executor}{Executor}}
{\footnotesize\ttfamily \label{classtf_1_1_chrome_observer_a763b2f90bc53f92d680a635fe28e858e} 
friend class \mbox{\hyperlink{classtf_1_1_executor}{Executor}}\hspace{0.3cm}{\ttfamily [friend]}}



\doxysubsection{类成员变量说明}
\Hypertarget{classtf_1_1_chrome_observer_aee57a7a03bb4af2aadd2fdefbebd9e7b}\index{tf::ChromeObserver@{tf::ChromeObserver}!\_timeline@{\_timeline}}
\index{\_timeline@{\_timeline}!tf::ChromeObserver@{tf::ChromeObserver}}
\doxysubsubsection{\texorpdfstring{\_timeline}{\_timeline}}
{\footnotesize\ttfamily \label{classtf_1_1_chrome_observer_aee57a7a03bb4af2aadd2fdefbebd9e7b} 
\mbox{\hyperlink{structtf_1_1_chrome_observer_1_1_timeline}{Timeline}} tf\+::\+Chrome\+Observer\+::\+\_\+timeline\hspace{0.3cm}{\ttfamily [private]}}



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/taskflow/taskflow/core/\mbox{\hyperlink{observer_8hpp}{observer.\+hpp}}\end{DoxyCompactItemize}
