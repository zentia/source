\doxysection{gp\+\_\+decl.\+h}
\hypertarget{gp__decl_8h_source}{}\label{gp__decl_8h_source}\index{external/libcds/cds/urcu/details/gp\_decl.h@{external/libcds/cds/urcu/details/gp\_decl.h}}
\mbox{\hyperlink{gp__decl_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ (c)\ 2006-\/2018\ Maxim\ Khizhinsky}}
\DoxyCodeLine{00002\ \textcolor{comment}{//}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ Distributed\ under\ the\ Boost\ Software\ License,\ Version\ 1.0.\ (See\ accompanying}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ file\ LICENSE\ or\ copy\ at\ http://www.boost.org/LICENSE\_1\_0.txt)}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#ifndef\ CDSLIB\_URCU\_DETAILS\_GP\_DECL\_H}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#define\ CDSLIB\_URCU\_DETAILS\_GP\_DECL\_H}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{external_2libcds_2cds_2urcu_2details_2base_8h}{cds/urcu/details/base.h}}>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{cache__line_8h}{cds/user\_setup/cache\_line.h}}>}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00013\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds}{cds}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds_1_1urcu}{urcu}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds_1_1urcu_1_1details}{details}}\ \{}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \ \ \ \ \textcolor{comment}{//\ We\ could\ derive\ thread\_data\ from\ thread\_list\_record}}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{comment}{//\ but\ in\ this\ case\ m\_nAccessControl\ would\ have\ offset\ !=\ 0}}
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{comment}{//\ that\ is\ not\ so\ efficiently}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#\ \ \ define\ CDS\_GPURCU\_DECLARE\_THREAD\_DATA(tag\_)\ \(\backslash\)}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\ \ \ \ template\ <>\ struct\ thread\_data<tag\_>\ \{\ \(\backslash\)}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ atomics::atomic<uint32\_t>\ \ \ \ \ \ \ \ m\_nAccessControl\ ;\ \(\backslash\)}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ thread\_list\_record<\ thread\_data\ >\ \ \ m\_list\ ;\ \(\backslash\)}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ char\ pad\_[cds::c\_nCacheLineSize];\ \(\backslash\)}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ thread\_data():\ m\_nAccessControl(0)\ \{\}\ \(\backslash\)}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ explicit\ thread\_data(\ OS::ThreadId\ owner\ ):\ m\_nAccessControl(0),\ m\_list(owner)\ \{\}\ \(\backslash\)}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \string~thread\_data()\ \{\}\ \(\backslash\)}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\ \ \ \ \}}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \ \ CDS\_GPURCU\_DECLARE\_THREAD\_DATA(\ general\_instant\_tag\ );}
\DoxyCodeLine{00029\ \ \ \ \ CDS\_GPURCU\_DECLARE\_THREAD\_DATA(\ general\_buffered\_tag\ );}
\DoxyCodeLine{00030\ \ \ \ \ CDS\_GPURCU\_DECLARE\_THREAD\_DATA(\ general\_threaded\_tag\ );}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#\ \ \ undef\ CDS\_GPURCU\_DECLARE\_THREAD\_DATA}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ RCUtag>}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keyword}{struct\ }gp\_singleton\_instance}
\DoxyCodeLine{00036\ \ \ \ \ \{}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{compiler_2defs_8h_a4ac8e9c4ea6b38586b0189153d1f38c9}{CDS\_EXPORT\_API}}\ singleton\_vtbl\ *\ \ \ \ \ s\_pRCU;}
\DoxyCodeLine{00038\ \ \ \ \ \};}
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#if\ !(\ CDS\_COMPILER\ ==\ CDS\_COMPILER\_MSVC\ ||\ (CDS\_COMPILER\ ==\ CDS\_COMPILER\_INTEL\ \&\&\ CDS\_OS\_INTERFACE\ ==\ CDS\_OSI\_WINDOWS))}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keyword}{template}<>\ \mbox{\hyperlink{compiler_2defs_8h_a4ac8e9c4ea6b38586b0189153d1f38c9}{CDS\_EXPORT\_API}}\ singleton\_vtbl\ *\ \mbox{\hyperlink{namespacecds_1_1urcu_1_1details_a7d3c53e5ee21457b8d500ca7ce016f62}{gp\_singleton\_instance<\ general\_instant\_tag\ >::s\_pRCU}};}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{template}<>\ \mbox{\hyperlink{compiler_2defs_8h_a4ac8e9c4ea6b38586b0189153d1f38c9}{CDS\_EXPORT\_API}}\ singleton\_vtbl\ *\ \mbox{\hyperlink{namespacecds_1_1urcu_1_1details_ab2ae01321a429e16f19eb2d9f748db1e}{gp\_singleton\_instance<\ general\_buffered\_tag\ >::s\_pRCU}};}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keyword}{template}<>\ \mbox{\hyperlink{compiler_2defs_8h_a4ac8e9c4ea6b38586b0189153d1f38c9}{CDS\_EXPORT\_API}}\ singleton\_vtbl\ *\ \mbox{\hyperlink{namespacecds_1_1urcu_1_1details_a671d174a9dadb41847e051b976c17251}{gp\_singleton\_instance<\ general\_threaded\_tag\ >::s\_pRCU}};}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ GPRCUtag>}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keyword}{class\ }gp\_thread\_gc}
\DoxyCodeLine{00047\ \ \ \ \ \{}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ GPRCUtag\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rcu\_tag;}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ rcu\_tag::rcu\_class\ rcu\_class;}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ thread\_data<\ rcu\_tag\ >\ \ \ \ \ \ thread\_record;}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ cds::urcu::details::scoped\_lock<\ gp\_thread\_gc\ >\ scoped\_lock;}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ thread\_record\ *\ get\_thread\_record();}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ gp\_thread\_gc();}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \string~gp\_thread\_gc();}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ access\_lock();}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ access\_unlock();}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ is\_locked();}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Disposer,\ \textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ retire(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ retire(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ +[](\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ \{\ Disposer()(\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}*\textcolor{keyword}{>}(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ ));\ \});}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ retire(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \textcolor{keywordtype}{void}\ (*\ pFunc)(\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ *))}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1urcu_a9fd06318cc85d4d956ba7fb8152083c1}{retired\_ptr}}\ rp(\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}\ *\textcolor{keyword}{>}(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ ),\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{namespacecds_1_1urcu_a914791bb9ca62963d05a12cb5271f7d5}{free\_retired\_ptr\_func}}\textcolor{keyword}{>}(\ pFunc\ ));}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ retire(\ rp\ );}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ retire(\ retired\_ptr\&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ gp\_singleton\_instance<\ rcu\_tag\ >::s\_pRCU\ );}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ gp\_singleton\_instance<\ rcu\_tag\ >::s\_pRCU-\/>retire\_ptr(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ );}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00086\ \ \ \ \ \};}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \textcolor{preprocessor}{\#\ \ \ define\ CDS\_GP\_RCU\_DECLARE\_THREAD\_GC(\ tag\_\ )\ template\ <>\ class\ thread\_gc<tag\_>:\ public\ gp\_thread\_gc<tag\_>\ \{\}}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ CDS\_GP\_RCU\_DECLARE\_THREAD\_GC(\ general\_instant\_tag\ \ );}
\DoxyCodeLine{00091\ \ \ \ \ CDS\_GP\_RCU\_DECLARE\_THREAD\_GC(\ general\_buffered\_tag\ );}
\DoxyCodeLine{00092\ \ \ \ \ CDS\_GP\_RCU\_DECLARE\_THREAD\_GC(\ general\_threaded\_tag\ );}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \textcolor{preprocessor}{\#\ \ \ undef\ CDS\_GP\_RCU\_DECLARE\_THREAD\_GC}}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ RCUtag>}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keyword}{class\ }gp\_singleton:\ \textcolor{keyword}{public}\ singleton\_vtbl}
\DoxyCodeLine{00098\ \ \ \ \ \{}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ RCUtag\ \ rcu\_tag;}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ cds::urcu::details::thread\_gc<\ rcu\_tag\ >\ \ \ thread\_gc;}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ thread\_gc::thread\_record\ \ \ thread\_record;}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ gp\_singleton\_instance<\ rcu\_tag\ >\ \ \ \ rcu\_instance;}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ atomics::atomic<uint32\_t>\ \ \ \ m\_nGlobalControl;}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ thread\_list<\ rcu\_tag\ >\ \ \ \ \ \ \ \ \ \ m\_ThreadList;}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ gp\_singleton()}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ :\ m\_nGlobalControl(1)}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \string~gp\_singleton()}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ gp\_singleton\ *\ \mbox{\hyperlink{ittnotify__static_8h_a73b55cf9365a83ac86bac9da2dada5ee}{instance}}()}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\ gp\_singleton\ *\textcolor{keyword}{>}(\ rcu\_instance::s\_pRCU\ );}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ isUsed()}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rcu\_instance::s\_pRCU\ !=\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ retire\_ptr(\ retired\_ptr\&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ =\ 0;}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keyword}{public}:\ \textcolor{comment}{//\ thread\_gc\ interface}}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ thread\_record\ *\ attach\_thread()}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_ThreadList.alloc();}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ detach\_thread(\ thread\_record\ *\ pRec\ )}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ m\_ThreadList.retire(\ pRec\ );}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ global\_control\_word(\ atomics::memory\_order\ mo\ )\textcolor{keyword}{\ const}}
\DoxyCodeLine{00145\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_nGlobalControl.load(\ mo\ );}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ check\_grace\_period(\ thread\_record\ *\ pRec\ )\ \textcolor{keyword}{const};}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Backoff>}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ flip\_and\_wait(\ Backoff\&\ bkoff\ );}
\DoxyCodeLine{00154\ \ \ \ \ \};}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \textcolor{preprocessor}{\#\ \ \ define\ CDS\_GP\_RCU\_DECLARE\_SINGLETON(\ tag\_\ )\ \(\backslash\)}}
\DoxyCodeLine{00157\ \textcolor{preprocessor}{\ \ \ \ template\ <>\ class\ singleton<\ tag\_\ >\ \{\ \(\backslash\)}}
\DoxyCodeLine{00158\ \textcolor{preprocessor}{\ \ \ \ public:\ \(\backslash\)}}
\DoxyCodeLine{00159\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ typedef\ tag\_\ \ rcu\_tag\ ;\ \(\backslash\)}}
\DoxyCodeLine{00160\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ typedef\ cds::urcu::details::thread\_gc<\ rcu\_tag\ >\ \ \ thread\_gc\ ;\ \(\backslash\)}}
\DoxyCodeLine{00161\ \textcolor{preprocessor}{\ \ \ \ protected:\ \(\backslash\)}}
\DoxyCodeLine{00162\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ typedef\ thread\_gc::thread\_record\ \ \ \ \ \ \ \ \ \ \ \ thread\_record\ ;\ \(\backslash\)}}
\DoxyCodeLine{00163\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ typedef\ gp\_singleton\_instance<\ rcu\_tag\ >\ \ \ \ rcu\_instance\ \ ;\ \(\backslash\)}}
\DoxyCodeLine{00164\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ typedef\ gp\_singleton<\ rcu\_tag\ >\ \ \ \ \ \ \ \ \ \ \ \ \ rcu\_singleton\ ;\ \(\backslash\)}}
\DoxyCodeLine{00165\ \textcolor{preprocessor}{\ \ \ \ public:\ \(\backslash\)}}
\DoxyCodeLine{00166\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ static\ bool\ isUsed()\ \{\ return\ rcu\_singleton::isUsed()\ ;\ \}\ \(\backslash\)}}
\DoxyCodeLine{00167\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ static\ rcu\_singleton\ *\ instance()\ \{\ assert(\ rcu\_instance::s\_pRCU\ );\ return\ static\_cast<rcu\_singleton\ *>(\ rcu\_instance::s\_pRCU\ );\ \}\ \(\backslash\)}}
\DoxyCodeLine{00168\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ static\ thread\_record\ *\ attach\_thread()\ \{\ return\ instance()-\/>attach\_thread()\ ;\ \}\ \(\backslash\)}}
\DoxyCodeLine{00169\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ static\ void\ detach\_thread(\ thread\_record\ *\ pRec\ )\ \{\ return\ instance()-\/>detach\_thread(\ pRec\ )\ ;\ \}\ \(\backslash\)}}
\DoxyCodeLine{00170\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ static\ uint32\_t\ global\_control\_word(\ atomics::memory\_order\ mo\ )\ \{\ return\ instance()-\/>global\_control\_word(\ mo\ )\ ;\ \}\ \(\backslash\)}}
\DoxyCodeLine{00171\ \textcolor{preprocessor}{\ \ \ \ \}}}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \ \ \ \ CDS\_GP\_RCU\_DECLARE\_SINGLETON(\ general\_instant\_tag\ \ );}
\DoxyCodeLine{00174\ \ \ \ \ CDS\_GP\_RCU\_DECLARE\_SINGLETON(\ general\_buffered\_tag\ );}
\DoxyCodeLine{00175\ \ \ \ \ CDS\_GP\_RCU\_DECLARE\_SINGLETON(\ general\_threaded\_tag\ );}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \textcolor{preprocessor}{\#\ \ \ undef\ CDS\_GP\_RCU\_DECLARE\_SINGLETON}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \}\}\}\ \textcolor{comment}{//\ namespace\ cds::urcu::details}}
\DoxyCodeLine{00180\ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \#ifndef\ CDSLIB\_URCU\_DETAILS\_GP\_DECL\_H}}

\end{DoxyCode}
