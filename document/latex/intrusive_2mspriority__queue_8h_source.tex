\doxysection{mspriority\+\_\+queue.\+h}
\hypertarget{intrusive_2mspriority__queue_8h_source}{}\label{intrusive_2mspriority__queue_8h_source}\index{external/libcds/cds/intrusive/mspriority\_queue.h@{external/libcds/cds/intrusive/mspriority\_queue.h}}
\mbox{\hyperlink{intrusive_2mspriority__queue_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ (c)\ 2006-\/2018\ Maxim\ Khizhinsky}}
\DoxyCodeLine{00002\ \textcolor{comment}{//}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ Distributed\ under\ the\ Boost\ Software\ License,\ Version\ 1.0.\ (See\ accompanying}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ file\ LICENSE\ or\ copy\ at\ http://www.boost.org/LICENSE\_1\_0.txt)}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#ifndef\ CDSLIB\_INTRUSIVE\_MSPRIORITY\_QUEUE\_H}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#define\ CDSLIB\_INTRUSIVE\_MSPRIORITY\_QUEUE\_H}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <mutex>}\ \ \textcolor{comment}{//\ std::unique\_lock}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{external_2libcds_2cds_2intrusive_2details_2base_8h}{cds/intrusive/details/base.h}}>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{sync_2spinlock_8h}{cds/sync/spinlock.h}}>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{cds_2os_2thread_8h}{cds/os/thread.h}}>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{bit__reverse__counter_8h}{cds/details/bit\_reverse\_counter.h}}>}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{intrusive_2options_8h}{cds/intrusive/options.h}}>}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{external_2libcds_2cds_2opt_2buffer_8h}{cds/opt/buffer.h}}>}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{external_2libcds_2cds_2opt_2compare_8h}{cds/opt/compare.h}}>}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{bounded__container_8h}{cds/details/bounded\_container.h}}>}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds}{cds}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds_1_1intrusive}{intrusive}}\ \{}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds_1_1intrusive_1_1mspriority__queue}{mspriority\_queue}}\ \{}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Counter\ =\ cds::atomicity::event\_counter>}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat}{stat}}\ \{}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_counter}{Counter}}\ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_abc2d8b9cccafb99db47e809893303fef}{event\_counter}}\ ;\ }
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_abc2d8b9cccafb99db47e809893303fef}{event\_counter}}\ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_abe778649ea2d6b8421707196e35c46b6}{m\_nPushCount}};\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_abc2d8b9cccafb99db47e809893303fef}{event\_counter}}\ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_a5b0e5d54fc4adb47de4b50420642abc4}{m\_nPopCount}};\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_abc2d8b9cccafb99db47e809893303fef}{event\_counter}}\ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_a4a90f4cb36e2f4f3d01659f68ff615ab}{m\_nPushFailCount}};\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_abc2d8b9cccafb99db47e809893303fef}{event\_counter}}\ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_af10e20d69508f4a7919883abe2cc4566}{m\_nPopFailCount}};\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_abc2d8b9cccafb99db47e809893303fef}{event\_counter}}\ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_aa8b8bc066790914020523f9d6f0e51cd}{m\_nPushHeapifySwapCount}};\ }
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_abc2d8b9cccafb99db47e809893303fef}{event\_counter}}\ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_af11ff9175d9aec5fb8e4520f07bbe302}{m\_nPopHeapifySwapCount}};\ \ }
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_abc2d8b9cccafb99db47e809893303fef}{event\_counter}}\ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_aef9b4034466e32705b61a72b16a40c55}{m\_nItemMovedTop}};\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_abc2d8b9cccafb99db47e809893303fef}{event\_counter}}\ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_a1de6ee0360fa8b288f95a2ad0e25ac48}{m\_nItemMovedUp}};\ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_abc2d8b9cccafb99db47e809893303fef}{event\_counter}}\ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_a334e79e2ce8239d63d8053d419cf46e7}{m\_nPushEmptyPass}};\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onPushSuccess()\ \ \ \ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_abe778649ea2d6b8421707196e35c46b6}{m\_nPushCount}}\ \ \ \ \ \ \ \ \ \ \ \ ;\}}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onPopSuccess()\ \ \ \ \ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_a5b0e5d54fc4adb47de4b50420642abc4}{m\_nPopCount}}\ \ \ \ \ \ \ \ \ \ \ \ \ ;\}}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onPushFailed()\ \ \ \ \ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_a4a90f4cb36e2f4f3d01659f68ff615ab}{m\_nPushFailCount}}\ \ \ \ \ \ \ \ ;\}}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onPopFailed()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_af10e20d69508f4a7919883abe2cc4566}{m\_nPopFailCount}}\ \ \ \ \ \ \ \ \ ;\}}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onPushHeapifySwap()\ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_aa8b8bc066790914020523f9d6f0e51cd}{m\_nPushHeapifySwapCount}}\ ;\}}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onPopHeapifySwap()\ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_af11ff9175d9aec5fb8e4520f07bbe302}{m\_nPopHeapifySwapCount}}\ \ ;\}}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onItemMovedTop()\ \ \ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_aef9b4034466e32705b61a72b16a40c55}{m\_nItemMovedTop}}\ \ \ \ \ \ \ \ \ ;\}}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onItemMovedUp()\ \ \ \ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_a1de6ee0360fa8b288f95a2ad0e25ac48}{m\_nItemMovedUp}}\ \ \ \ \ \ \ \ \ \ ;\}}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onPushEmptyPass()\ \ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1stat_a334e79e2ce8239d63d8053d419cf46e7}{m\_nPushEmptyPass}}\ \ \ \ \ \ \ \ ;\}}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1empty__stat}{empty\_stat}}\ \{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onPushSuccess()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onPopSuccess()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onPushFailed()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onPopFailed()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onPushHeapifySwap()\textcolor{keyword}{\ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onPopHeapifySwap()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onItemMovedTop()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onItemMovedUp()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onPushEmptyPass()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1traits}{traits}}\ \{}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classcds_1_1opt_1_1v_1_1initialized__dynamic__buffer}{opt::v::initialized\_dynamic\_buffer<void\ *>}}\ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1traits_a9130d950b355a18e174293adb87e1c35}{buffer}};}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structcds_1_1opt_1_1none}{opt::none}}\ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1traits_a23c9f08976e567364d9b3a946f1037fc}{compare}};}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structcds_1_1opt_1_1none}{opt::none}}\ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1traits_a951a41d5732fe3619ab3876b1f32906b}{less}};}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{namespacecds_1_1sync_a3d645de2cdf4530abac4f1ba0d293ba6}{cds::sync::spin}}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1traits_ac6c38807dc289dbc1ecd118fb9a4380b}{lock\_type}};}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{namespacecds_1_1backoff_a0f64f7bc371e3ad006fba5bd855d6e96}{backoff::Default}}\ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1traits_aa1a4b3f0dc90e4e080137370600faede}{back\_off}};}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1empty__stat}{empty\_stat}}\ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1traits_aab3a61319d2f0f53877a2199674c4dff}{stat}};}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}...\ Options>}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1make__traits}{make\_traits}}\ \{}
\DoxyCodeLine{00125\ \textcolor{preprocessor}{\#\ \ \ ifdef\ CDS\_DOXYGEN\_INVOKED}}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ implementation\_defined\ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1make__traits_a6448052654fb48afdf76692088a68f19}{type}}\ ;\ \ \ }
\DoxyCodeLine{00127\ \textcolor{preprocessor}{\#\ \ \ else}}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structcds_1_1opt_1_1make__options}{cds::opt::make\_options}}<}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structcds_1_1opt_1_1find__type__traits}{cds::opt::find\_type\_traits}}<\ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1traits}{traits}},\ Options...\ >\mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1make__traits_a6448052654fb48afdf76692088a68f19}{::type}}}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ,Options...}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ >\mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1make__traits_a6448052654fb48afdf76692088a68f19}{::type}}\ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1mspriority__queue_1_1make__traits_a6448052654fb48afdf76692088a68f19}{type}};}
\DoxyCodeLine{00132\ \textcolor{preprocessor}{\#\ \ \ endif}}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \ \ \}\ \ \ \textcolor{comment}{//\ namespace\ mspriority\_queue}}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{class}\ Traits\ =\ mspriority\_queue::traits\ >}
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a7c93c99c2002d8b11c33c1f22304251c}{MSPriorityQueue}}:\ \textcolor{keyword}{public}\ \mbox{\hyperlink{structcds_1_1bounded__container}{cds::bounded\_container}}}
\DoxyCodeLine{00165\ \ \ \ \ \{}
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ad01978a4b9f2690cd1020391a4687a26}{value\_type}}\ \ ;\ \ \ }
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ Traits\ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ac072144b63970269117f96d4f9bc093d}{traits}}\ \ \ \ \ \ ;\ \ \ }
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \textcolor{preprocessor}{\#\ \ \ ifdef\ CDS\_DOXYGEN\_INVOKED}}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ implementation\_defined\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a47d051699ae582df48427b4231a13f25}{key\_comparator}}\ \ ;\ \ \ \ }
\DoxyCodeLine{00172\ \textcolor{preprocessor}{\#\ \ \ else}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ opt::details::make\_comparator<\ value\_type,\ traits\ >::type\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a47d051699ae582df48427b4231a13f25}{key\_comparator}};}
\DoxyCodeLine{00174\ \textcolor{preprocessor}{\#\ \ \ endif}}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::lock\_type\ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_af4c18a24067044c74998389480cd88c3}{lock\_type}};\ \ \ }
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::back\_off\ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a00c6933d7b93bc2fdebde99f0d61ef72}{back\_off}};\ \ \ \ }
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::stat\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a31cbd344725243b7d849621e9bef1e6d}{stat}};\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ cds::bitop::bit\_reverse\_counter<>\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ac702a5fc66ade172de561f6e1d97f737}{item\_counter}};}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{namespacecds_1_1_o_s_1_1posix_aa5d1cef6c4dd410d6d21c851201bfc40}{cds::OS::ThreadId}}\ \ \ tag\_type;}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum}\ tag\_value\ \{}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ Available\ \ \ =\ -\/1,}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__containers_8cpp_ac3e3346bc6f9bb504e43495424c91a51}{Empty}}\ \ \ \ \ \ \ =\ 0}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }node\ \{}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ value\_type\ *\ \ \ \ \ \ \ \ m\_pVal\ \ ;\ \ \ }
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ tag\_type\ \textcolor{keyword}{volatile}\ \ \ m\_nTag\ \ ;\ \ \ }
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{mutable}\ lock\_type\ \ \ m\_Lock\ \ ;\ \ \ }
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ node()}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ m\_pVal(\ nullptr\ )}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ,\ m\_nTag(\ tag\_type(\mbox{\hyperlink{test__containers_8cpp_ac3e3346bc6f9bb504e43495424c91a51}{Empty}}))}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}()}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_Lock.lock();}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ unlock()}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_Lock.unlock();}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::buffer::template\ rebind<node>::other\ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a1edcc9e61417ebb79e06be8c636e2ac8}{buffer\_type}}\ ;\ \ \ }
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ item\_counter::counter\_type\ \ \ \ \mbox{\hyperlink{tbbmalloc_2statistics_8h_a88d7e7c1f1ccad444adb066d12334d4a}{counter\_type}};}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ac702a5fc66ade172de561f6e1d97f737}{item\_counter}}\ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_aa73203fa10c41e515b821b1919226816}{m\_ItemCounter}}\ \ \ ;\ \ \ }
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{keyword}{mutable}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_af4c18a24067044c74998389480cd88c3}{lock\_type}}\ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a7b482d5a2dfee16ed8544604382cb5e8}{m\_Lock}}\ \ \ \ \ \ \ \ \ \ ;\ \ \ }
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a1edcc9e61417ebb79e06be8c636e2ac8}{buffer\_type}}\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a0eae2853ad41b56be8af78d0c4ff32e9}{m\_Heap}}\ \ \ \ \ \ \ \ \ \ ;\ \ \ }
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a31cbd344725243b7d849621e9bef1e6d}{stat}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ab08f69764a7890f2b8c82c1989c7a61d}{m\_Stat}}\ \ \ \ \ \ \ \ \ \ ;\ \ \ }
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a7c93c99c2002d8b11c33c1f22304251c}{MSPriorityQueue}}(\ \textcolor{keywordtype}{size\_t}\ nCapacity\ )}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a0eae2853ad41b56be8af78d0c4ff32e9}{m\_Heap}}(\ nCapacity\ )}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a27df47804a9074890681878aa6378349}{\string~MSPriorityQueue}}()}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a5f67f16d1ed8b9b083f3302ce2f0950f}{clear}}();}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a2f2221418f3f09a6247fae29b5ea25b5}{push}}(\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ad01978a4b9f2690cd1020391a4687a26}{value\_type}}\&\ val\ )}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ tag\_type\ \textcolor{keyword}{const}\ curId\ =\ \mbox{\hyperlink{namespacecds_1_1_o_s_1_1posix_a083987470e15085707e4665d15d66307}{cds::OS::get\_current\_thread\_id}}();}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Insert\ new\ item\ at\ bottom\ of\ the\ heap}}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a7b482d5a2dfee16ed8544604382cb5e8}{m\_Lock}}.lock();}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_aa73203fa10c41e515b821b1919226816}{m\_ItemCounter}}.value()\ >=\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_adc5fcf956dc57cf95442c3c7bff6ef04}{capacity}}())\ \{}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ heap\ is\ full}}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a7b482d5a2dfee16ed8544604382cb5e8}{m\_Lock}}.unlock();}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ab08f69764a7890f2b8c82c1989c7a61d}{m\_Stat}}.onPushFailed();}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbbmalloc_2statistics_8h_a88d7e7c1f1ccad444adb066d12334d4a}{counter\_type}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_aa73203fa10c41e515b821b1919226816}{m\_ItemCounter}}.inc();}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a0eae2853ad41b56be8af78d0c4ff32e9}{m\_Heap}}.capacity());}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ node\&\ refNode\ =\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a0eae2853ad41b56be8af78d0c4ff32e9}{m\_Heap}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}];}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ refNode.lock();}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a7b482d5a2dfee16ed8544604382cb5e8}{m\_Lock}}.unlock();}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ refNode.m\_nTag\ ==\ tag\_type(\ \mbox{\hyperlink{test__containers_8cpp_ac3e3346bc6f9bb504e43495424c91a51}{Empty}}\ ));}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ refNode.m\_pVal\ ==\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ refNode.m\_pVal\ =\ \&val;}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ refNode.m\_nTag\ =\ curId;}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ refNode.unlock();}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Move\ item\ towards\ top\ of\ heap\ while\ it\ has\ a\ higher\ priority\ than\ its\ parent}}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ heapify\_after\_push(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ curId\ );}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ab08f69764a7890f2b8c82c1989c7a61d}{m\_Stat}}.onPushSuccess();}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ad01978a4b9f2690cd1020391a4687a26}{value\_type}}\ *\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a30b1c806392f4c20026fc55ef642377e}{pop}}()}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ node\&\ refTop\ =\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a0eae2853ad41b56be8af78d0c4ff32e9}{m\_Heap}}[1];}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a7b482d5a2dfee16ed8544604382cb5e8}{m\_Lock}}.lock();}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_aa73203fa10c41e515b821b1919226816}{m\_ItemCounter}}.value()\ ==\ 0\ )\ \{}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ heap\ is\ empty}}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a7b482d5a2dfee16ed8544604382cb5e8}{m\_Lock}}.unlock();}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ab08f69764a7890f2b8c82c1989c7a61d}{m\_Stat}}.onPopFailed();}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbbmalloc_2statistics_8h_a88d7e7c1f1ccad444adb066d12334d4a}{counter\_type}}\ nBottom\ =\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_aa73203fa10c41e515b821b1919226816}{m\_ItemCounter}}.dec();}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ nBottom\ <\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a0eae2853ad41b56be8af78d0c4ff32e9}{m\_Heap}}.capacity());}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ nBottom\ >\ 0\ );}
\DoxyCodeLine{00306\ }
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ refTop.lock();}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nBottom\ ==\ 1\ )\ \{}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ refTop.m\_nTag\ =\ tag\_type(\ \mbox{\hyperlink{test__containers_8cpp_ac3e3346bc6f9bb504e43495424c91a51}{Empty}}\ );}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ad01978a4b9f2690cd1020391a4687a26}{value\_type}}\ *\ pVal\ =\ refTop.m\_pVal;}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ refTop.m\_pVal\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ refTop.unlock();}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a7b482d5a2dfee16ed8544604382cb5e8}{m\_Lock}}.unlock();}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ab08f69764a7890f2b8c82c1989c7a61d}{m\_Stat}}.onPopSuccess();}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pVal;}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ node\&\ refBottom\ =\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a0eae2853ad41b56be8af78d0c4ff32e9}{m\_Heap}}[nBottom];}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \ \ \ \ refBottom.lock();}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a7b482d5a2dfee16ed8544604382cb5e8}{m\_Lock}}.unlock();}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ refBottom.m\_nTag\ =\ tag\_type(\mbox{\hyperlink{test__containers_8cpp_ac3e3346bc6f9bb504e43495424c91a51}{Empty}});}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ad01978a4b9f2690cd1020391a4687a26}{value\_type}}\ *\ pVal\ =\ refBottom.m\_pVal;}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ refBottom.m\_pVal\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \ \ \ \ refBottom.unlock();}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ refTop.m\_nTag\ ==\ tag\_type(\mbox{\hyperlink{test__containers_8cpp_ac3e3346bc6f9bb504e43495424c91a51}{Empty}}))\ \{}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ nBottom\ ==\ nTop}}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ refTop.unlock();}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ab08f69764a7890f2b8c82c1989c7a61d}{m\_Stat}}.onPopSuccess();}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pVal;}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacestd_a3acbe51b6415e9284430194bf04944e1}{std::swap}}(\ refTop.m\_pVal,\ pVal\ );}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \ \ refTop.m\_nTag\ =\ tag\_type(\ Available\ );}
\DoxyCodeLine{00335\ }
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ refTop\ will\ be\ unlocked\ inside\ heapify\_after\_pop}}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \ \ \ \ heapify\_after\_pop(\ \&refTop\ );}
\DoxyCodeLine{00338\ }
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ab08f69764a7890f2b8c82c1989c7a61d}{m\_Stat}}.onPopSuccess();}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pVal;}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00344\ }
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a5f67f16d1ed8b9b083f3302ce2f0950f}{clear}}()}
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a246efde081a31a3479af3c658ab21045}{clear\_with}}(\ [](\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ad01978a4b9f2690cd1020391a4687a26}{value\_type}}\ \textcolor{keyword}{const}\&\ \textcolor{comment}{/*src*/}\ )\ \{\}\ );}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00353\ }
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a246efde081a31a3479af3c658ab21045}{clear\_with}}(\ Func\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ad01978a4b9f2690cd1020391a4687a26}{value\_type}}\ *\ pVal;}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ ((\ pVal\ =\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a30b1c806392f4c20026fc55ef642377e}{pop}}())\ !=\ \textcolor{keyword}{nullptr}\ )}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(\ *pVal\ );}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00373\ }
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ae82e495da24543c38612930bf7c3e242}{empty}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00376\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a5c06ef04a7aac92a7f24c76ee52dbaa4}{size}}()\ ==\ 0;}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00379\ }
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a55982bf9af4f35486efa3a828cef40ca}{full}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00382\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a5c06ef04a7aac92a7f24c76ee52dbaa4}{size}}()\ ==\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_adc5fcf956dc57cf95442c3c7bff6ef04}{capacity}}();}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00385\ }
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a5c06ef04a7aac92a7f24c76ee52dbaa4}{size}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00388\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \ \ \ \ std::unique\_lock<lock\_type>\ l(\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a7b482d5a2dfee16ed8544604382cb5e8}{m\_Lock}}\ );}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_aa73203fa10c41e515b821b1919226816}{m\_ItemCounter}}.value());}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00392\ }
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_adc5fcf956dc57cf95442c3c7bff6ef04}{capacity}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00395\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ m\_Heap[0]\ is\ not\ used}}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a0eae2853ad41b56be8af78d0c4ff32e9}{m\_Heap}}.capacity()\ -\/\ 1;}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00399\ }
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a31cbd344725243b7d849621e9bef1e6d}{stat}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ac55bd5c2c5069408e02587e2018939e3}{statistics}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00402\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ab08f69764a7890f2b8c82c1989c7a61d}{m\_Stat}};}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00405\ }
\DoxyCodeLine{00406\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00408\ }
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ heapify\_after\_push(\ \mbox{\hyperlink{tbbmalloc_2statistics_8h_a88d7e7c1f1ccad444adb066d12334d4a}{counter\_type}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ tag\_type\ curId\ )}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a47d051699ae582df48427b4231a13f25}{key\_comparator}}\ \ cmp;}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a00c6933d7b93bc2fdebde99f0d61ef72}{back\_off}}\ \ \ \ \ \ \ \ bkoff;}
\DoxyCodeLine{00413\ }
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Move\ item\ towards\ top\ of\ the\ heap\ while\ it\ has\ higher\ priority\ than\ parent}}
\DoxyCodeLine{00415\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ >\ 1\ )\ \{}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ bProgress\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbbmalloc_2statistics_8h_a88d7e7c1f1ccad444adb066d12334d4a}{counter\_type}}\ nParent\ =\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ /\ 2;}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\&\ refParent\ =\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a0eae2853ad41b56be8af78d0c4ff32e9}{m\_Heap}}[nParent];}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ refParent.lock();}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\&\ refItem\ =\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a0eae2853ad41b56be8af78d0c4ff32e9}{m\_Heap}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}];}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ refItem.lock();}
\DoxyCodeLine{00422\ }
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ refParent.m\_nTag\ ==\ tag\_type(Available)\ \&\&\ refItem.m\_nTag\ ==\ curId\ )\ \{}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ cmp(\ *refItem.m\_pVal,\ *refParent.m\_pVal\ )\ >\ 0\ )\ \{}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacestd_a3acbe51b6415e9284430194bf04944e1}{std::swap}}(\ refItem.m\_nTag,\ refParent.m\_nTag\ );}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacestd_a3acbe51b6415e9284430194bf04944e1}{std::swap}}(\ refItem.m\_pVal,\ refParent.m\_pVal\ );}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ab08f69764a7890f2b8c82c1989c7a61d}{m\_Stat}}.onPushHeapifySwap();}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ nParent;}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ refItem.m\_nTag\ =\ tag\_type(Available);}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ refParent.m\_nTag\ ==\ tag\_type(\ \mbox{\hyperlink{test__containers_8cpp_ac3e3346bc6f9bb504e43495424c91a51}{Empty}}\ ))\ \{}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ab08f69764a7890f2b8c82c1989c7a61d}{m\_Stat}}.onItemMovedTop();}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ refItem.m\_nTag\ !=\ curId\ )\ \{}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ab08f69764a7890f2b8c82c1989c7a61d}{m\_Stat}}.onItemMovedUp();}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ nParent;}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ab08f69764a7890f2b8c82c1989c7a61d}{m\_Stat}}.onPushEmptyPass();}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bProgress\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00447\ }
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ refItem.unlock();}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ refParent.unlock();}
\DoxyCodeLine{00450\ }
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !bProgress\ )}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bkoff();}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bkoff.reset();}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ ==\ 1\ )\ \{}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}\&\ refItem\ =\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a0eae2853ad41b56be8af78d0c4ff32e9}{m\_Heap}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}];}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ refItem.lock();}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ refItem.m\_nTag\ ==\ curId\ )}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ refItem.m\_nTag\ =\ tag\_type(Available);}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ refItem.unlock();}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00465\ }
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ heapify\_after\_pop(\ node\ *\ pParent\ )}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a47d051699ae582df48427b4231a13f25}{key\_comparator}}\ cmp;}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbbmalloc_2statistics_8h_a88d7e7c1f1ccad444adb066d12334d4a}{counter\_type}}\ \textcolor{keyword}{const}\ nCapacity\ =\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a0eae2853ad41b56be8af78d0c4ff32e9}{m\_Heap}}.capacity();}
\DoxyCodeLine{00470\ }
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbbmalloc_2statistics_8h_a88d7e7c1f1ccad444adb066d12334d4a}{counter\_type}}\ nParent\ =\ 1;}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \mbox{\hyperlink{tbbmalloc_2statistics_8h_a88d7e7c1f1ccad444adb066d12334d4a}{counter\_type}}\ nChild\ =\ nParent\ *\ 2;\ nChild\ <\ nCapacity;\ nChild\ *=\ 2\ )\ \{}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}*\ pChild\ =\ \&\mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a0eae2853ad41b56be8af78d0c4ff32e9}{m\_Heap}}[\ nChild\ ];}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pChild-\/>lock();}
\DoxyCodeLine{00475\ }
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pChild-\/>m\_nTag\ ==\ tag\_type(\ \mbox{\hyperlink{test__containers_8cpp_ac3e3346bc6f9bb504e43495424c91a51}{Empty}}\ ))\ \{}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pChild-\/>unlock();}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00480\ }
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbbmalloc_2statistics_8h_a88d7e7c1f1ccad444adb066d12334d4a}{counter\_type}}\ \textcolor{keyword}{const}\ nRight\ =\ nChild\ +\ 1;}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nRight\ <\ nCapacity\ )\ \{}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}\&\ refRight\ =\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_a0eae2853ad41b56be8af78d0c4ff32e9}{m\_Heap}}[nRight];}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ refRight.lock();}
\DoxyCodeLine{00485\ }
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ refRight.m\_nTag\ !=\ tag\_type(\ \mbox{\hyperlink{test__containers_8cpp_ac3e3346bc6f9bb504e43495424c91a51}{Empty}}\ )\ \&\&\ cmp(\ *refRight.m\_pVal,\ *pChild-\/>m\_pVal\ )\ >\ 0\ )\ \{}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ get\ right\ child}}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pChild-\/>unlock();}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nChild\ =\ nRight;}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pChild\ =\ \&refRight;}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ refRight.unlock();}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00495\ }
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ child\ has\ higher\ priority\ than\ parent\ then\ swap}}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Otherwise\ stop}}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ cmp(\ *pChild-\/>m\_pVal,\ *pParent-\/>m\_pVal\ )\ >\ 0\ )\ \{}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacestd_a3acbe51b6415e9284430194bf04944e1}{std::swap}}(\ pParent-\/>m\_nTag,\ pChild-\/>m\_nTag\ );}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacestd_a3acbe51b6415e9284430194bf04944e1}{std::swap}}(\ pParent-\/>m\_pVal,\ pChild-\/>m\_pVal\ );}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pParent-\/>unlock();}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_priority_queue_ab08f69764a7890f2b8c82c1989c7a61d}{m\_Stat}}.onPopHeapifySwap();}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nParent\ =\ nChild;}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pParent\ =\ pChild;}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pChild-\/>unlock();}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \ \ \ \ pParent-\/>unlock();}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00514\ \ \ \ \ \};}
\DoxyCodeLine{00515\ }
\DoxyCodeLine{00516\ \}\}\ \textcolor{comment}{//\ namespace\ cds::intrusive}}
\DoxyCodeLine{00517\ }
\DoxyCodeLine{00518\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \#ifndef\ CDSLIB\_INTRUSIVE\_MSPRIORITY\_QUEUE\_H}}

\end{DoxyCode}
