\doxysection{tbb\+::internal\+::\+\_\+\+\_\+\+TBB\+\_\+\+Init\+Once类 参考}
\hypertarget{classtbb_1_1internal_1_1_____t_b_b___init_once}{}\label{classtbb_1_1internal_1_1_____t_b_b___init_once}\index{tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}}


Class that supports \doxylink{struct_t_b_b}{TBB} initialization.  




{\ttfamily \#include $<$tbb\+\_\+main.\+h$>$}

\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtbb_1_1internal_1_1_____t_b_b___init_once_a38012fc1dc4a713f1b5b46f58dfec319}{\+\_\+\+\_\+\+TBB\+\_\+\+Init\+Once}} ()
\begin{DoxyCompactList}\small\item\em Add initial reference to resources. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtbb_1_1internal_1_1_____t_b_b___init_once_aef2402e6d0b42fc5521b9f4ed008af11}{\texorpdfstring{$\sim$}{\string~}\+\_\+\+\_\+\+TBB\+\_\+\+Init\+Once}} ()
\begin{DoxyCompactList}\small\item\em Remove the initial reference to resources. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{静态 Public 成员函数}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1_____t_b_b___init_once_a49dd7a4f24e456e32c17d6f179b1afa4}{lock}} ()
\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1_____t_b_b___init_once_a75be47587acf7b182b90c2d692dd0646}{unlock}} ()
\item 
static \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtbb_1_1internal_1_1_____t_b_b___init_once_a3d6e09b5b23edf10600c2ae2e6469659}{initialization\+\_\+done}} ()
\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1_____t_b_b___init_once_aeb552d69cd0db07e0ec3526c22e8899a}{add\+\_\+ref}} ()
\begin{DoxyCompactList}\small\item\em Add reference to resources. If first reference added, acquire the resources. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1_____t_b_b___init_once_a78b2b1b7265cdedc9ea3689fff04ac35}{remove\+\_\+ref}} ()
\begin{DoxyCompactList}\small\item\em Remove reference to resources. If last reference removed, release the resources. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{静态 Private 成员函数}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1_____t_b_b___init_once_a50e64d03595370dd74e647b9afb8a57d}{acquire\+\_\+resources}} ()
\begin{DoxyCompactList}\small\item\em Platform specific code to acquire resources. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1_____t_b_b___init_once_a2c3140ed4391cefe6ffd40f2805d5904}{release\+\_\+resources}} ()
\begin{DoxyCompactList}\small\item\em Platform specific code to release resources. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{静态 Private 属性}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic}}$<$ \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} $>$ \mbox{\hyperlink{classtbb_1_1internal_1_1_____t_b_b___init_once_ab0e82632f3aab5f5df8ca76c046456a0}{count}}
\begin{DoxyCompactList}\small\item\em \doxylink{struct_counter}{Counter} of references to global shared resources such as TLS. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtbb_1_1internal_1_1_____t_b_b___init_once_a43d19e17016f6db6d0e8357db03a5bd9}{Initialization\+Done}}
\begin{DoxyCompactList}\small\item\em Specifies if the one-\/time initializations has been done. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{gcc__generic_8h_ac46502f7ed83eb6f654aecd2c13fb6b0}{\+\_\+\+\_\+\+TBB\+\_\+atomic\+\_\+flag}} \mbox{\hyperlink{classtbb_1_1internal_1_1_____t_b_b___init_once_af3ab19a5309fb4e4ad2974ed2296000d}{Initialization\+Lock}}
\begin{DoxyCompactList}\small\item\em Global initialization lock \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{友元}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1_____t_b_b___init_once_a536ca941d7993a110b2516f64b4057bb}{Do\+One\+Time\+Initializations}} ()
\begin{DoxyCompactList}\small\item\em Performs thread-\/safe lazy one-\/time general \doxylink{struct_t_b_b}{TBB} initialization. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1_____t_b_b___init_once_a83e47342e44b72ff9c1ce08f75a7dbc2}{ITT\+\_\+\+Do\+Unsafe\+One\+Time\+Initialization}} ()
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
Class that supports \doxylink{struct_t_b_b}{TBB} initialization. 

It handles acquisition and release of global resources (e.\+g. TLS) during startup and shutdown, as well as synchronization for Do\+One\+Time\+Initializations. 

\doxysubsection{构造及析构函数说明}
\Hypertarget{classtbb_1_1internal_1_1_____t_b_b___init_once_a38012fc1dc4a713f1b5b46f58dfec319}\index{tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}!\_\_TBB\_InitOnce@{\_\_TBB\_InitOnce}}
\index{\_\_TBB\_InitOnce@{\_\_TBB\_InitOnce}!tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}}
\doxysubsubsection{\texorpdfstring{\_\_TBB\_InitOnce()}{\_\_TBB\_InitOnce()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1_____t_b_b___init_once_a38012fc1dc4a713f1b5b46f58dfec319} 
tbb\+::internal\+::\+\_\+\+\_\+\+TBB\+\_\+\+Init\+Once\+::\+\_\+\+\_\+\+TBB\+\_\+\+Init\+Once (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Add initial reference to resources. 

We assume that dynamic loading of the library prevents any other threads from entering the library until this constructor has finished running. 函数调用图\+:
% FIG 0
\Hypertarget{classtbb_1_1internal_1_1_____t_b_b___init_once_aef2402e6d0b42fc5521b9f4ed008af11}\index{tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}!````~\_\_TBB\_InitOnce@{\texorpdfstring{$\sim$}{\string~}\_\_TBB\_InitOnce}}
\index{````~\_\_TBB\_InitOnce@{\texorpdfstring{$\sim$}{\string~}\_\_TBB\_InitOnce}!tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}\_\_TBB\_InitOnce()}{\string~\_\_TBB\_InitOnce()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1_____t_b_b___init_once_aef2402e6d0b42fc5521b9f4ed008af11} 
tbb\+::internal\+::\+\_\+\+\_\+\+TBB\+\_\+\+Init\+Once\+::\texorpdfstring{$\sim$}{\string~}\+\_\+\+\_\+\+TBB\+\_\+\+Init\+Once (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Remove the initial reference to resources. 

This is not necessarily the last reference if other threads are still running. 函数调用图\+:
% FIG 1


\doxysubsection{成员函数说明}
\Hypertarget{classtbb_1_1internal_1_1_____t_b_b___init_once_a50e64d03595370dd74e647b9afb8a57d}\index{tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}!acquire\_resources@{acquire\_resources}}
\index{acquire\_resources@{acquire\_resources}!tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}}
\doxysubsubsection{\texorpdfstring{acquire\_resources()}{acquire\_resources()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1_____t_b_b___init_once_a50e64d03595370dd74e647b9afb8a57d} 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::internal\+::\+\_\+\+\_\+\+TBB\+\_\+\+Init\+Once\+::acquire\+\_\+resources (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Platform specific code to acquire resources. 

\Hypertarget{classtbb_1_1internal_1_1_____t_b_b___init_once_aeb552d69cd0db07e0ec3526c22e8899a}\index{tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}!add\_ref@{add\_ref}}
\index{add\_ref@{add\_ref}!tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}}
\doxysubsubsection{\texorpdfstring{add\_ref()}{add\_ref()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1_____t_b_b___init_once_aeb552d69cd0db07e0ec3526c22e8899a} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::internal\+::\+\_\+\+\_\+\+TBB\+\_\+\+Init\+Once\+::add\+\_\+ref (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Add reference to resources. If first reference added, acquire the resources. 

函数调用图\+:
% FIG 2
\Hypertarget{classtbb_1_1internal_1_1_____t_b_b___init_once_a3d6e09b5b23edf10600c2ae2e6469659}\index{tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}!initialization\_done@{initialization\_done}}
\index{initialization\_done@{initialization\_done}!tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}}
\doxysubsubsection{\texorpdfstring{initialization\_done()}{initialization\_done()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1_____t_b_b___init_once_a3d6e09b5b23edf10600c2ae2e6469659} 
static \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} tbb\+::internal\+::\+\_\+\+\_\+\+TBB\+\_\+\+Init\+Once\+::initialization\+\_\+done (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

\Hypertarget{classtbb_1_1internal_1_1_____t_b_b___init_once_a49dd7a4f24e456e32c17d6f179b1afa4}\index{tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}!lock@{lock}}
\index{lock@{lock}!tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}}
\doxysubsubsection{\texorpdfstring{lock()}{lock()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1_____t_b_b___init_once_a49dd7a4f24e456e32c17d6f179b1afa4} 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::internal\+::\+\_\+\+\_\+\+TBB\+\_\+\+Init\+Once\+::lock (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

\Hypertarget{classtbb_1_1internal_1_1_____t_b_b___init_once_a2c3140ed4391cefe6ffd40f2805d5904}\index{tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}!release\_resources@{release\_resources}}
\index{release\_resources@{release\_resources}!tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}}
\doxysubsubsection{\texorpdfstring{release\_resources()}{release\_resources()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1_____t_b_b___init_once_a2c3140ed4391cefe6ffd40f2805d5904} 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::internal\+::\+\_\+\+\_\+\+TBB\+\_\+\+Init\+Once\+::release\+\_\+resources (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Platform specific code to release resources. 

\Hypertarget{classtbb_1_1internal_1_1_____t_b_b___init_once_a78b2b1b7265cdedc9ea3689fff04ac35}\index{tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}!remove\_ref@{remove\_ref}}
\index{remove\_ref@{remove\_ref}!tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}}
\doxysubsubsection{\texorpdfstring{remove\_ref()}{remove\_ref()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1_____t_b_b___init_once_a78b2b1b7265cdedc9ea3689fff04ac35} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::internal\+::\+\_\+\+\_\+\+TBB\+\_\+\+Init\+Once\+::remove\+\_\+ref (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Remove reference to resources. If last reference removed, release the resources. 

函数调用图\+:
% FIG 3
\Hypertarget{classtbb_1_1internal_1_1_____t_b_b___init_once_a75be47587acf7b182b90c2d692dd0646}\index{tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}!unlock@{unlock}}
\index{unlock@{unlock}!tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}}
\doxysubsubsection{\texorpdfstring{unlock()}{unlock()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1_____t_b_b___init_once_a75be47587acf7b182b90c2d692dd0646} 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::internal\+::\+\_\+\+\_\+\+TBB\+\_\+\+Init\+Once\+::unlock (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



\doxysubsection{友元及相关符号说明}
\Hypertarget{classtbb_1_1internal_1_1_____t_b_b___init_once_a536ca941d7993a110b2516f64b4057bb}\index{tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}!DoOneTimeInitializations@{DoOneTimeInitializations}}
\index{DoOneTimeInitializations@{DoOneTimeInitializations}!tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}}
\doxysubsubsection{\texorpdfstring{DoOneTimeInitializations}{DoOneTimeInitializations}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1_____t_b_b___init_once_a536ca941d7993a110b2516f64b4057bb} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} Do\+One\+Time\+Initializations (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [friend]}}



Performs thread-\/safe lazy one-\/time general \doxylink{struct_t_b_b}{TBB} initialization. 

\Hypertarget{classtbb_1_1internal_1_1_____t_b_b___init_once_a83e47342e44b72ff9c1ce08f75a7dbc2}\index{tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}!ITT\_DoUnsafeOneTimeInitialization@{ITT\_DoUnsafeOneTimeInitialization}}
\index{ITT\_DoUnsafeOneTimeInitialization@{ITT\_DoUnsafeOneTimeInitialization}!tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}}
\doxysubsubsection{\texorpdfstring{ITT\_DoUnsafeOneTimeInitialization}{ITT\_DoUnsafeOneTimeInitialization}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1_____t_b_b___init_once_a83e47342e44b72ff9c1ce08f75a7dbc2} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} ITT\+\_\+\+Do\+Unsafe\+One\+Time\+Initialization (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [friend]}}



\doxysubsection{类成员变量说明}
\Hypertarget{classtbb_1_1internal_1_1_____t_b_b___init_once_ab0e82632f3aab5f5df8ca76c046456a0}\index{tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}!count@{count}}
\index{count@{count}!tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}}
\doxysubsubsection{\texorpdfstring{count}{count}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1_____t_b_b___init_once_ab0e82632f3aab5f5df8ca76c046456a0} 
\mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic}}$<$ \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} $>$ tbb\+::internal\+::\+\_\+\+\_\+\+TBB\+\_\+\+Init\+Once\+::count\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



\doxylink{struct_counter}{Counter} of references to global shared resources such as TLS. 

\Hypertarget{classtbb_1_1internal_1_1_____t_b_b___init_once_a43d19e17016f6db6d0e8357db03a5bd9}\index{tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}!InitializationDone@{InitializationDone}}
\index{InitializationDone@{InitializationDone}!tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}}
\doxysubsubsection{\texorpdfstring{InitializationDone}{InitializationDone}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1_____t_b_b___init_once_a43d19e17016f6db6d0e8357db03a5bd9} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} tbb\+::internal\+::\+\_\+\+\_\+\+TBB\+\_\+\+Init\+Once\+::\+Initialization\+Done\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Specifies if the one-\/time initializations has been done. 

Flag that is set to true after one-\/time initializations are done. \Hypertarget{classtbb_1_1internal_1_1_____t_b_b___init_once_af3ab19a5309fb4e4ad2974ed2296000d}\index{tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}!InitializationLock@{InitializationLock}}
\index{InitializationLock@{InitializationLock}!tbb::internal::\_\_TBB\_InitOnce@{tbb::internal::\_\_TBB\_InitOnce}}
\doxysubsubsection{\texorpdfstring{InitializationLock}{InitializationLock}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1_____t_b_b___init_once_af3ab19a5309fb4e4ad2974ed2296000d} 
\mbox{\hyperlink{gcc__generic_8h_ac46502f7ed83eb6f654aecd2c13fb6b0}{\+\_\+\+\_\+\+TBB\+\_\+atomic\+\_\+flag}} tbb\+::internal\+::\+\_\+\+\_\+\+TBB\+\_\+\+Init\+Once\+::\+Initialization\+Lock\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Global initialization lock 

Scenarios are possible when tools interop has to be initialized before the \doxylink{struct_t_b_b}{TBB} itself. This imposes a requirement that the global initialization lock has to support valid static initialization, and does not issue any tool notifications in any build mode. 

该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/taskflow/3rd-\/party/tbb/src/tbb/\mbox{\hyperlink{tbb__main_8h}{tbb\+\_\+main.\+h}}\item 
external/taskflow/3rd-\/party/tbb/src/tbb/\mbox{\hyperlink{tbb__main_8cpp}{tbb\+\_\+main.\+cpp}}\end{DoxyCompactItemize}
