\chapter{Structs}
\hypertarget{md_external_2reflect-cpp_2docs_2concepts_2structs}{}\label{md_external_2reflect-cpp_2docs_2concepts_2structs}\index{Structs@{Structs}}
\label{md_external_2reflect-cpp_2docs_2concepts_2structs_autotoc_md551}%
\Hypertarget{md_external_2reflect-cpp_2docs_2concepts_2structs_autotoc_md551}%


Structs can be set up as follows\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct\ }Person\ \{}
\DoxyCodeLine{\ \ \ \ std::string\ first\_name;}
\DoxyCodeLine{\ \ \ \ std::string\ last\_name;}
\DoxyCodeLine{\ \ \ \ std::vector<Person>\ children;}
\DoxyCodeLine{\};}

\end{DoxyCode}


You can initilize your struct like this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ bart\ =\ Person\{.first\_name\ =\ \textcolor{stringliteral}{"{}Bart"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .last\_name\ =\ \textcolor{stringliteral}{"{}Simpson"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .children\ =\ std::vector<Person>()\};}

\end{DoxyCode}


JSON uses camel case, but C++ uses snake case, so you might want to rename your fields\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct\ }Person\ \{}
\DoxyCodeLine{\ \ \ \ rfl::Rename<\textcolor{stringliteral}{"{}firstName"{}},\ std::string>\ first\_name;}
\DoxyCodeLine{\ \ \ \ rfl::Rename<\textcolor{stringliteral}{"{}lastName"{}},\ std::string>\ last\_name;}
\DoxyCodeLine{\ \ \ \ std::vector<Person>\ children;}
\DoxyCodeLine{\};}

\end{DoxyCode}


You can also initialize fields in the struct declaration itself\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct\ }Person\ \{}
\DoxyCodeLine{\ \ \ \ rfl::Rename<\textcolor{stringliteral}{"{}firstName"{}},\ std::string>\ first\_name;}
\DoxyCodeLine{\ \ \ \ rfl::Rename<\textcolor{stringliteral}{"{}lastName"{}},\ std::string>\ last\_name\ =\ \textcolor{stringliteral}{"{}Simpson"{}};}
\DoxyCodeLine{\ \ \ \ std::vector<Person>\ children;}
\DoxyCodeLine{\};}

\end{DoxyCode}


Because you now have explicitly set this field, you do not have to do this every time\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ bart\ =\ Person\{.first\_name\ =\ \textcolor{stringliteral}{"{}Bart"{}}\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ lisa\ =\ Person\{.first\_name\ =\ \textcolor{stringliteral}{"{}Lisa"{}}\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ maggie\ =\ Person\{.first\_name\ =\ \textcolor{stringliteral}{"{}Maggie"{}}\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ homer\ =\ Person\{.first\_name\ =\ \textcolor{stringliteral}{"{}Homer"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .children\ =\ std::vector<Person>(\{bart,\ lisa,\ maggie\})\};}

\end{DoxyCode}


You can write this to a JSON string\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ json\_string\ =\ \mbox{\hyperlink{namespacerfl_1_1json_af39a23539424555b8c970d12a58e547f}{rfl::json::write}}(homer);}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{\{"{}firstName"{}:"{}Homer"{},"{}lastName"{}:"{}Simpson"{},"{}children"{}:[\{"{}firstName"{}:"{}Bart"{},"{}lastName"{}:"{}Simpson"{},"{}children"{}:[]\},\{"{}firstName"{}:"{}Lisa"{},"{}lastName"{}:"{}Simpson"{},"{}children"{}:[]\},\{"{}firstName"{}:"{}Maggie"{},"{}lastName"{}:"{}Simpson"{},"{}children"{}:[]\}]\}}

\end{DoxyCode}


And you can parse it back into a struct\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ homer\ =\ \mbox{\hyperlink{namespacerfl_1_1json_a905573518eca04a9c269d1bb32de7dd1}{rfl::json::read<Person>}}(json\_string).value();}

\end{DoxyCode}
\hypertarget{md_external_2reflect-cpp_2docs_2concepts_2structs_autotoc_md552}{}\doxysection{\texorpdfstring{Important note}{Important note}}\label{md_external_2reflect-cpp_2docs_2concepts_2structs_autotoc_md552}
{\bfseries{Do not create custom constructors on the structs.}}

reflect-\/cpp needs to be able to create the structs like this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{Person\{\textcolor{stringliteral}{"{}Bart"{}},\ \textcolor{stringliteral}{"{}Simpson"{}},\ ...\};}

\end{DoxyCode}


But if you create a custom constructor, then C++ will no longer allow this kind of constructions.

If you want to create the struct from one of your classes (the most like reason, you want to create custom constructors in the first place), you might want to check out the section on \doxysectlink{md_external_2reflect-cpp_2docs_2concepts_2custom__classes}{custom classes}{0} or \doxysectlink{md_external_2reflect-cpp_2docs_2custom__parser}{custom parsers}{0}. 