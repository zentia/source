\doxysection{tbb\+::spin\+\_\+rw\+\_\+mutex\+\_\+v3\+::scoped\+\_\+lock类 参考}
\hypertarget{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock}{}\label{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock}\index{tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}}


The scoped locking pattern  




{\ttfamily \#include $<$spin\+\_\+rw\+\_\+mutex.\+h$>$}



类 tbb\+::spin\+\_\+rw\+\_\+mutex\+\_\+v3\+::scoped\+\_\+lock 继承关系图\+:
% FIG 0


tbb\+::spin\+\_\+rw\+\_\+mutex\+\_\+v3\+::scoped\+\_\+lock 的协作图\+:
% FIG 1
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_a285b355121772c874a7ecaaf4d347224}{scoped\+\_\+lock}} ()
\begin{DoxyCompactList}\small\item\em Construct lock that has not acquired a mutex. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_a0a2e15358575f7651446bca13a5a2674}{scoped\+\_\+lock}} (\mbox{\hyperlink{classtbb_1_1spin__rw__mutex}{spin\+\_\+rw\+\_\+mutex}} \&\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}, \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{json_2write__and__read_8hpp_a8d72d49ed34d37da786334a55f22b909}{write}}=\mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}})
\begin{DoxyCompactList}\small\item\em Acquire lock on given mutex. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_a5c27ca2e0c9db960a9a7430082ff7edd}{\texorpdfstring{$\sim$}{\string~}scoped\+\_\+lock}} ()
\begin{DoxyCompactList}\small\item\em Release lock (if lock is held). \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_a6d49df365396ab314e78ba07c6b96433}{acquire}} (\mbox{\hyperlink{classtbb_1_1spin__rw__mutex}{spin\+\_\+rw\+\_\+mutex}} \&\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}, \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{json_2write__and__read_8hpp_a8d72d49ed34d37da786334a55f22b909}{write}}=\mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}})
\begin{DoxyCompactList}\small\item\em Acquire lock on given mutex. \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_afbe5de57eadc457518df7a1bb0d30c00}{upgrade\+\_\+to\+\_\+writer}} ()
\begin{DoxyCompactList}\small\item\em Upgrade reader to become a writer. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_a99e279a995a51abfb87b865e886949f8}{release}} ()
\begin{DoxyCompactList}\small\item\em Release lock. \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_aa693c05221d977856a98270a255fe5df}{downgrade\+\_\+to\+\_\+reader}} ()
\begin{DoxyCompactList}\small\item\em Downgrade writer to become a reader. \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_abf17ada91882fd70f139c503c0220f16}{try\+\_\+acquire}} (\mbox{\hyperlink{classtbb_1_1spin__rw__mutex}{spin\+\_\+rw\+\_\+mutex}} \&\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}, \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{json_2write__and__read_8hpp_a8d72d49ed34d37da786334a55f22b909}{write}}=\mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}})
\begin{DoxyCompactList}\small\item\em Try acquire lock on given mutex. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected 属性}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtbb_1_1spin__rw__mutex}{spin\+\_\+rw\+\_\+mutex}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_a8d70c5a2348e30a6979bfbf677328dc4}{mutex}}
\begin{DoxyCompactList}\small\item\em The pointer to the current mutex that is held, or NULL if no mutex is held. \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_acfd129dc5106ad1129ba803e67311050}{is\+\_\+writer}}
\begin{DoxyCompactList}\small\item\em If mutex!=NULL, then is\+\_\+writer is true if holding a writer lock, false if holding a reader lock. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
The scoped locking pattern 

It helps to avoid the common problem of forgetting to release lock. It also nicely provides the "{}node"{} for queuing locks. 

\doxysubsection{构造及析构函数说明}
\Hypertarget{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_a285b355121772c874a7ecaaf4d347224}\index{tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}!scoped\_lock@{scoped\_lock}}
\index{scoped\_lock@{scoped\_lock}!tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{scoped\_lock()}{scoped\_lock()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_a285b355121772c874a7ecaaf4d347224} 
tbb\+::spin\+\_\+rw\+\_\+mutex\+\_\+v3\+::scoped\+\_\+lock\+::scoped\+\_\+lock (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Construct lock that has not acquired a mutex. 

Equivalent to zero-\/initialization of \texorpdfstring{$\ast$}{*}this. \Hypertarget{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_a0a2e15358575f7651446bca13a5a2674}\index{tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}!scoped\_lock@{scoped\_lock}}
\index{scoped\_lock@{scoped\_lock}!tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{scoped\_lock()}{scoped\_lock()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_a0a2e15358575f7651446bca13a5a2674} 
tbb\+::spin\+\_\+rw\+\_\+mutex\+\_\+v3\+::scoped\+\_\+lock\+::scoped\+\_\+lock (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtbb_1_1spin__rw__mutex}{spin\+\_\+rw\+\_\+mutex}} \&}]{m}{, }\item[{\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}}]{write}{ = {\ttfamily \mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}}}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Acquire lock on given mutex. 

函数调用图\+:
% FIG 2
\Hypertarget{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_a5c27ca2e0c9db960a9a7430082ff7edd}\index{tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}!````~scoped\_lock@{\texorpdfstring{$\sim$}{\string~}scoped\_lock}}
\index{````~scoped\_lock@{\texorpdfstring{$\sim$}{\string~}scoped\_lock}!tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}scoped\_lock()}{\string~scoped\_lock()}}
{\footnotesize\ttfamily \label{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_a5c27ca2e0c9db960a9a7430082ff7edd} 
tbb\+::spin\+\_\+rw\+\_\+mutex\+\_\+v3\+::scoped\+\_\+lock\+::\texorpdfstring{$\sim$}{\string~}scoped\+\_\+lock (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Release lock (if lock is held). 

函数调用图\+:
% FIG 3


\doxysubsection{成员函数说明}
\Hypertarget{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_a6d49df365396ab314e78ba07c6b96433}\index{tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}!acquire@{acquire}}
\index{acquire@{acquire}!tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{acquire()}{acquire()}}
{\footnotesize\ttfamily \label{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_a6d49df365396ab314e78ba07c6b96433} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::spin\+\_\+rw\+\_\+mutex\+\_\+v3\+::scoped\+\_\+lock\+::acquire (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtbb_1_1spin__rw__mutex}{spin\+\_\+rw\+\_\+mutex}} \&}]{m}{, }\item[{\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}}]{write}{ = {\ttfamily \mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}}}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Acquire lock on given mutex. 

函数调用图\+:
% FIG 4
\Hypertarget{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_aa693c05221d977856a98270a255fe5df}\index{tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}!downgrade\_to\_reader@{downgrade\_to\_reader}}
\index{downgrade\_to\_reader@{downgrade\_to\_reader}!tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{downgrade\_to\_reader()}{downgrade\_to\_reader()}}
{\footnotesize\ttfamily \label{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_aa693c05221d977856a98270a255fe5df} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} tbb\+::spin\+\_\+rw\+\_\+mutex\+\_\+v3\+::scoped\+\_\+lock\+::downgrade\+\_\+to\+\_\+reader (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Downgrade writer to become a reader. 

\Hypertarget{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_a99e279a995a51abfb87b865e886949f8}\index{tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}!release@{release}}
\index{release@{release}!tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{release()}{release()}}
{\footnotesize\ttfamily \label{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_a99e279a995a51abfb87b865e886949f8} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::spin\+\_\+rw\+\_\+mutex\+\_\+v3\+::scoped\+\_\+lock\+::release (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Release lock. 

\Hypertarget{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_abf17ada91882fd70f139c503c0220f16}\index{tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}!try\_acquire@{try\_acquire}}
\index{try\_acquire@{try\_acquire}!tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{try\_acquire()}{try\_acquire()}}
{\footnotesize\ttfamily \label{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_abf17ada91882fd70f139c503c0220f16} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} tbb\+::spin\+\_\+rw\+\_\+mutex\+\_\+v3\+::scoped\+\_\+lock\+::try\+\_\+acquire (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtbb_1_1spin__rw__mutex}{spin\+\_\+rw\+\_\+mutex}} \&}]{m}{, }\item[{\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}}]{write}{ = {\ttfamily \mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}}}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Try acquire lock on given mutex. 

函数调用图\+:
% FIG 5
\Hypertarget{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_afbe5de57eadc457518df7a1bb0d30c00}\index{tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}!upgrade\_to\_writer@{upgrade\_to\_writer}}
\index{upgrade\_to\_writer@{upgrade\_to\_writer}!tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{upgrade\_to\_writer()}{upgrade\_to\_writer()}}
{\footnotesize\ttfamily \label{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_afbe5de57eadc457518df7a1bb0d30c00} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} tbb\+::spin\+\_\+rw\+\_\+mutex\+\_\+v3\+::scoped\+\_\+lock\+::upgrade\+\_\+to\+\_\+writer (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Upgrade reader to become a writer. 

Returns whether the upgrade happened without releasing and re-\/acquiring the lock 

\doxysubsection{类成员变量说明}
\Hypertarget{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_acfd129dc5106ad1129ba803e67311050}\index{tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}!is\_writer@{is\_writer}}
\index{is\_writer@{is\_writer}!tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{is\_writer}{is\_writer}}
{\footnotesize\ttfamily \label{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_acfd129dc5106ad1129ba803e67311050} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} tbb\+::spin\+\_\+rw\+\_\+mutex\+\_\+v3\+::scoped\+\_\+lock\+::is\+\_\+writer\hspace{0.3cm}{\ttfamily [protected]}}



If mutex!=NULL, then is\+\_\+writer is true if holding a writer lock, false if holding a reader lock. 

Not defined if not holding a lock. \Hypertarget{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_a8d70c5a2348e30a6979bfbf677328dc4}\index{tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}!mutex@{mutex}}
\index{mutex@{mutex}!tbb::spin\_rw\_mutex\_v3::scoped\_lock@{tbb::spin\_rw\_mutex\_v3::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{mutex}{mutex}}
{\footnotesize\ttfamily \label{classtbb_1_1spin__rw__mutex__v3_1_1scoped__lock_a8d70c5a2348e30a6979bfbf677328dc4} 
\mbox{\hyperlink{classtbb_1_1spin__rw__mutex}{spin\+\_\+rw\+\_\+mutex}}\texorpdfstring{$\ast$}{*} tbb\+::spin\+\_\+rw\+\_\+mutex\+\_\+v3\+::scoped\+\_\+lock\+::mutex\hspace{0.3cm}{\ttfamily [protected]}}



The pointer to the current mutex that is held, or NULL if no mutex is held. 



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/taskflow/3rd-\/party/tbb/include/tbb/\mbox{\hyperlink{spin__rw__mutex_8h}{spin\+\_\+rw\+\_\+mutex.\+h}}\end{DoxyCompactItemize}
