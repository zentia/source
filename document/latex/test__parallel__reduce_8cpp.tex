\doxysection{external/taskflow/3rd-\/party/tbb/src/test/test\+\_\+parallel\+\_\+reduce.cpp 文件参考}
\hypertarget{test__parallel__reduce_8cpp}{}\label{test__parallel__reduce_8cpp}\index{external/taskflow/3rd-\/party/tbb/src/test/test\_parallel\_reduce.cpp@{external/taskflow/3rd-\/party/tbb/src/test/test\_parallel\_reduce.cpp}}
{\ttfamily \#include "{}tbb/parallel\+\_\+reduce.\+h"{}}\newline
{\ttfamily \#include "{}tbb/atomic.\+h"{}}\newline
{\ttfamily \#include "{}harness\+\_\+assert.\+h"{}}\newline
{\ttfamily \#include "{}harness.\+h"{}}\newline
{\ttfamily \#include "{}tbb/tick\+\_\+count.\+h"{}}\newline
{\ttfamily \#include "{}tbb/blocked\+\_\+range.\+h"{}}\newline
{\ttfamily \#include "{}harness\+\_\+concurrency\+\_\+tracker.\+h"{}}\newline
{\ttfamily \#include "{}tbb/task\+\_\+scheduler\+\_\+init.\+h"{}}\newline
{\ttfamily \#include "{}harness\+\_\+cpu.\+h"{}}\newline
{\ttfamily \#include "{}test\+\_\+partitioner.\+h"{}}\newline
test\+\_\+parallel\+\_\+reduce.\+cpp 的引用(Include)关系图\+:
% FIG 0
\doxysubsubsection*{类}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_minimal_range}{Minimal\+Range}}
\begin{DoxyCompactList}\small\item\em Class with public interface that is exactly minimal requirements for \doxylink{test__parallel__scan_8cpp_a7bc3babd450e7afd1af6c7616d0547f7}{Range} concept \end{DoxyCompactList}\item 
class \mbox{\hyperlink{class_foo_body}{Foo\+Body$<$ Pad $>$}}
\begin{DoxyCompactList}\small\item\em \doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} range object whose only public members are those required by the parallel\+\_\+for.\+h body concept. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{struct_sum}{Sum}}
\item 
class \mbox{\hyperlink{class_accumulator}{Accumulator$<$ T $>$}}
\item 
class \mbox{\hyperlink{class_parallel_sum_tester}{Parallel\+Sum\+Tester}}
\item 
class \mbox{\hyperlink{class_rot_op}{Rot\+Op}}
\item 
struct \mbox{\hyperlink{struct_reduce_body}{Reduce\+Body$<$ Op $>$}}
\item 
struct \mbox{\hyperlink{structharness__default__partitioner}{harness\+\_\+default\+\_\+partitioner}}
\begin{DoxyCompactList}\small\item\em Type-\/tag for automatic testing algorithm deduction \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structparallel__deterministic__reduce__invoker}{parallel\+\_\+deterministic\+\_\+reduce\+\_\+invoker$<$ Body, Partitioner $>$}}
\item 
struct \mbox{\hyperlink{structparallel__deterministic__reduce__invoker_3_01_body_00_01harness__default__partitioner_01_4}{parallel\+\_\+deterministic\+\_\+reduce\+\_\+invoker$<$ Body, harness\+\_\+default\+\_\+partitioner $>$}}
\item 
struct \mbox{\hyperlink{structparallel__deterministic__reduce__lambda__invoker}{parallel\+\_\+deterministic\+\_\+reduce\+\_\+lambda\+\_\+invoker$<$ Result\+Type, Partitioner $>$}}
\item 
struct \mbox{\hyperlink{structparallel__deterministic__reduce__lambda__invoker_3_01_result_type_00_01harness__default__partitioner_01_4}{parallel\+\_\+deterministic\+\_\+reduce\+\_\+lambda\+\_\+invoker$<$ Result\+Type, harness\+\_\+default\+\_\+partitioner $>$}}
\item 
struct \mbox{\hyperlink{class_body}{Body$<$ A $>$}}
\end{DoxyCompactItemize}
\doxysubsubsection*{命名空间}
\begin{DoxyCompactItemize}
\item 
namespace \mbox{\hyperlink{namespaceunsupported}{unsupported}}
\begin{DoxyCompactList}\small\item\em Define overloads of parallel\+\_\+deterministic\+\_\+reduce that accept "{}undesired"{} types of partitioners \end{DoxyCompactList}\item 
namespace \mbox{\hyperlink{namespaceinteraction__with__range__and__partitioner}{interaction\+\_\+with\+\_\+range\+\_\+and\+\_\+partitioner}}
\end{DoxyCompactItemize}
\doxysubsubsection*{类型定义}
\begin{DoxyCompactItemize}
\item 
typedef \mbox{\hyperlink{eabase_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\+\_\+t}} \mbox{\hyperlink{test__parallel__reduce_8cpp_aac3e1a5e422a80a86b55a5c15b106ba9}{Value\+Type}}
\end{DoxyCompactItemize}
\doxysubsubsection*{函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{test__parallel__reduce_8cpp_a0809ced0069e67c5b241de3d758d8bbc}{Flog}} (\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{test__pipeline_8cpp_af0f4b8ab4b5ede51caf4b8feeeeecab2}{nthread}}, \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} interference=\mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}})
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{test__parallel__reduce_8cpp_ad5f02c829fce9c14802a46f16e9281d2}{Parallel\+Sum}} ()
\item 
{\footnotesize template$<$typename \mbox{\hyperlink{test__parallel__scan_8cpp_a7bc3babd450e7afd1af6c7616d0547f7}{Range}}, typename \mbox{\hyperlink{class_body}{Body}}$>$ }\\\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{namespaceunsupported_ae5f255f06dca7fed3a79b94daebf9a9e}{unsupported\+::parallel\+\_\+deterministic\+\_\+reduce}} (const \mbox{\hyperlink{test__parallel__scan_8cpp_a7bc3babd450e7afd1af6c7616d0547f7}{Range}} \&, \mbox{\hyperlink{class_body}{Body}} \&, const tbb\+::auto\+\_\+partitioner \&)
\item 
{\footnotesize template$<$typename \mbox{\hyperlink{test__parallel__scan_8cpp_a7bc3babd450e7afd1af6c7616d0547f7}{Range}}, typename \mbox{\hyperlink{class_body}{Body}}$>$ }\\\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{namespaceunsupported_ac4df4954a26fecdf5815fda1dcc44def}{unsupported\+::parallel\+\_\+deterministic\+\_\+reduce}} (const \mbox{\hyperlink{test__parallel__scan_8cpp_a7bc3babd450e7afd1af6c7616d0547f7}{Range}} \&, \mbox{\hyperlink{class_body}{Body}} \&, tbb\+::affinity\+\_\+partitioner \&)
\item 
{\footnotesize template$<$typename \mbox{\hyperlink{test__parallel__scan_8cpp_a7bc3babd450e7afd1af6c7616d0547f7}{Range}}, typename \mbox{\hyperlink{struct_value}{Value}}, typename Real\+Body, typename Reduction$>$ }\\\mbox{\hyperlink{struct_value}{Value}} \mbox{\hyperlink{namespaceunsupported_a7efd33b97c23efccd5d0ae8dbb806789}{unsupported\+::parallel\+\_\+deterministic\+\_\+reduce}} (const \mbox{\hyperlink{test__parallel__scan_8cpp_a7bc3babd450e7afd1af6c7616d0547f7}{Range}} \&, const \mbox{\hyperlink{struct_value}{Value}} \&\mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}}, const Real\+Body \&, const Reduction \&, const tbb\+::auto\+\_\+partitioner \&)
\item 
{\footnotesize template$<$typename \mbox{\hyperlink{test__parallel__scan_8cpp_a7bc3babd450e7afd1af6c7616d0547f7}{Range}}, typename \mbox{\hyperlink{struct_value}{Value}}, typename Real\+Body, typename Reduction$>$ }\\\mbox{\hyperlink{struct_value}{Value}} \mbox{\hyperlink{namespaceunsupported_a6fd05badd6be0ff59be3be209bd67620}{unsupported\+::parallel\+\_\+deterministic\+\_\+reduce}} (const \mbox{\hyperlink{test__parallel__scan_8cpp_a7bc3babd450e7afd1af6c7616d0547f7}{Range}} \&, const \mbox{\hyperlink{struct_value}{Value}} \&\mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}}, const Real\+Body \&, const Reduction \&, tbb\+::affinity\+\_\+partitioner \&)
\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{test__parallel__reduce_8cpp_a5f09213e3dfc8856e3f51eb981ab7ab8}{Test\+Unsupported\+Partitioners}} ()
\item 
{\footnotesize template$<$class Partitioner$>$ }\\\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{test__parallel__reduce_8cpp_a052135046901a09a887c075b63533355}{Test\+Deterministic\+Reduction\+For}} ()
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{test__parallel__reduce_8cpp_a4f76ed380e84b1fcbe3803e79aa93c57}{Test\+Deterministic\+Reduction}} ()
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{namespaceinteraction__with__range__and__partitioner_a56e4ee029a9059b80d051ce90f7eec0c}{interaction\+\_\+with\+\_\+range\+\_\+and\+\_\+partitioner\+::test}} ()
\item 
\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{test__parallel__reduce_8cpp_ac7bfd5b2c3dd5c7fdbd14f64c92d9c5f}{Test\+Main}} ()
\begin{DoxyCompactList}\small\item\em Entry point to a \doxylink{struct_t_b_b}{TBB} unit test application \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{变量}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{tbb\+::atomic}}$<$ long $>$ \mbox{\hyperlink{test__parallel__reduce_8cpp_a156af0caf591b5ee2aaed472b8aaae83}{Fork\+Count}}
\item 
static \mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{tbb\+::atomic}}$<$ long $>$ \mbox{\hyperlink{test__parallel__reduce_8cpp_ace3b0f0186c0aaa1c3eda4809ab1312d}{Foo\+Body\+Count}}
\end{DoxyCompactItemize}


\doxysubsection{类型定义说明}
\Hypertarget{test__parallel__reduce_8cpp_aac3e1a5e422a80a86b55a5c15b106ba9}\index{test\_parallel\_reduce.cpp@{test\_parallel\_reduce.cpp}!ValueType@{ValueType}}
\index{ValueType@{ValueType}!test\_parallel\_reduce.cpp@{test\_parallel\_reduce.cpp}}
\doxysubsubsection{\texorpdfstring{ValueType}{ValueType}}
{\footnotesize\ttfamily \label{test__parallel__reduce_8cpp_aac3e1a5e422a80a86b55a5c15b106ba9} 
typedef \mbox{\hyperlink{eabase_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\+\_\+t}} \mbox{\hyperlink{test__parallel__reduce_8cpp_aac3e1a5e422a80a86b55a5c15b106ba9}{Value\+Type}}}



\doxysubsection{函数说明}
\Hypertarget{test__parallel__reduce_8cpp_a0809ced0069e67c5b241de3d758d8bbc}\index{test\_parallel\_reduce.cpp@{test\_parallel\_reduce.cpp}!Flog@{Flog}}
\index{Flog@{Flog}!test\_parallel\_reduce.cpp@{test\_parallel\_reduce.cpp}}
\doxysubsubsection{\texorpdfstring{Flog()}{Flog()}}
{\footnotesize\ttfamily \label{test__parallel__reduce_8cpp_a0809ced0069e67c5b241de3d758d8bbc} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} Flog (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{nthread}{, }\item[{\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}}]{interference}{ = {\ttfamily \mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}}}}\end{DoxyParamCaption})}

\Hypertarget{test__parallel__reduce_8cpp_ad5f02c829fce9c14802a46f16e9281d2}\index{test\_parallel\_reduce.cpp@{test\_parallel\_reduce.cpp}!ParallelSum@{ParallelSum}}
\index{ParallelSum@{ParallelSum}!test\_parallel\_reduce.cpp@{test\_parallel\_reduce.cpp}}
\doxysubsubsection{\texorpdfstring{ParallelSum()}{ParallelSum()}}
{\footnotesize\ttfamily \label{test__parallel__reduce_8cpp_ad5f02c829fce9c14802a46f16e9281d2} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} Parallel\+Sum (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

函数调用图\+:
% FIG 1
\Hypertarget{test__parallel__reduce_8cpp_a4f76ed380e84b1fcbe3803e79aa93c57}\index{test\_parallel\_reduce.cpp@{test\_parallel\_reduce.cpp}!TestDeterministicReduction@{TestDeterministicReduction}}
\index{TestDeterministicReduction@{TestDeterministicReduction}!test\_parallel\_reduce.cpp@{test\_parallel\_reduce.cpp}}
\doxysubsubsection{\texorpdfstring{TestDeterministicReduction()}{TestDeterministicReduction()}}
{\footnotesize\ttfamily \label{test__parallel__reduce_8cpp_a4f76ed380e84b1fcbe3803e79aa93c57} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} Test\+Deterministic\+Reduction (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

函数调用图\+:
% FIG 2
\Hypertarget{test__parallel__reduce_8cpp_a052135046901a09a887c075b63533355}\index{test\_parallel\_reduce.cpp@{test\_parallel\_reduce.cpp}!TestDeterministicReductionFor@{TestDeterministicReductionFor}}
\index{TestDeterministicReductionFor@{TestDeterministicReductionFor}!test\_parallel\_reduce.cpp@{test\_parallel\_reduce.cpp}}
\doxysubsubsection{\texorpdfstring{TestDeterministicReductionFor()}{TestDeterministicReductionFor()}}
{\footnotesize\ttfamily \label{test__parallel__reduce_8cpp_a052135046901a09a887c075b63533355} 
template$<$class Partitioner$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} Test\+Deterministic\+Reduction\+For (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

函数调用图\+:
% FIG 3
\Hypertarget{test__parallel__reduce_8cpp_ac7bfd5b2c3dd5c7fdbd14f64c92d9c5f}\index{test\_parallel\_reduce.cpp@{test\_parallel\_reduce.cpp}!TestMain@{TestMain}}
\index{TestMain@{TestMain}!test\_parallel\_reduce.cpp@{test\_parallel\_reduce.cpp}}
\doxysubsubsection{\texorpdfstring{TestMain()}{TestMain()}}
{\footnotesize\ttfamily \label{test__parallel__reduce_8cpp_ac7bfd5b2c3dd5c7fdbd14f64c92d9c5f} 
\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} Test\+Main (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Entry point to a \doxylink{struct_t_b_b}{TBB} unit test application 

It MUST be defined by the test application.

If HARNESS\+\_\+\+NO\+\_\+\+PARSE\+\_\+\+COMMAND\+\_\+\+LINE macro was not explicitly set before including \doxylink{harness_8h}{harness.\+h}, then global variables Min\+Thread, and Max\+Thread will be available and initialized when it is called.

Returns \doxylink{namespace_harness_af69f2621193acb5830367304bef3ffdbadcc4d407b25d6323252f96a52263ac64}{Harness\+::\+Done} when the tests passed successfully. When the test fail, it must not return, calling exit(errcode) or abort() instead. When the test is not supported for the given platform/compiler/etc, it should return \doxylink{namespace_harness_af69f2621193acb5830367304bef3ffdbac7fec41a351710612372f06ff2b2871b}{Harness\+::\+Skipped}.

To provide non-\/standard variant of \doxylink{main-override-static_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}{main()} for the test, define HARNESS\+\_\+\+CUSTOM\+\_\+\+MAIN before including \doxylink{harness_8h}{harness.\+h} \+\_\+\+\_\+\+TBB\+\_\+\+CPP11\+\_\+\+STD\+\_\+\+PLACEHOLDERS\+\_\+\+LINKING\+\_\+\+BROKEN

\+\_\+\+\_\+\+TBB\+\_\+\+SSE\+\_\+\+STACK\+\_\+\+ALIGNMENT\+\_\+\+BROKEN函数调用图\+:
% FIG 4
\Hypertarget{test__parallel__reduce_8cpp_a5f09213e3dfc8856e3f51eb981ab7ab8}\index{test\_parallel\_reduce.cpp@{test\_parallel\_reduce.cpp}!TestUnsupportedPartitioners@{TestUnsupportedPartitioners}}
\index{TestUnsupportedPartitioners@{TestUnsupportedPartitioners}!test\_parallel\_reduce.cpp@{test\_parallel\_reduce.cpp}}
\doxysubsubsection{\texorpdfstring{TestUnsupportedPartitioners()}{TestUnsupportedPartitioners()}}
{\footnotesize\ttfamily \label{test__parallel__reduce_8cpp_a5f09213e3dfc8856e3f51eb981ab7ab8} 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} Test\+Unsupported\+Partitioners (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\doxylink{struct_check}{Check} that other types of partitioners are not supported (auto, affinity) In the case of "{}unsupported"{} API unexpectedly sneaking into namespace tbb, this test should result in a compilation error due to overload resolution ambiguity 函数调用图\+:
% FIG 5


\doxysubsection{变量说明}
\Hypertarget{test__parallel__reduce_8cpp_ace3b0f0186c0aaa1c3eda4809ab1312d}\index{test\_parallel\_reduce.cpp@{test\_parallel\_reduce.cpp}!FooBodyCount@{FooBodyCount}}
\index{FooBodyCount@{FooBodyCount}!test\_parallel\_reduce.cpp@{test\_parallel\_reduce.cpp}}
\doxysubsubsection{\texorpdfstring{FooBodyCount}{FooBodyCount}}
{\footnotesize\ttfamily \label{test__parallel__reduce_8cpp_ace3b0f0186c0aaa1c3eda4809ab1312d} 
\mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{tbb\+::atomic}}$<$long$>$ Foo\+Body\+Count\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{test__parallel__reduce_8cpp_a156af0caf591b5ee2aaed472b8aaae83}\index{test\_parallel\_reduce.cpp@{test\_parallel\_reduce.cpp}!ForkCount@{ForkCount}}
\index{ForkCount@{ForkCount}!test\_parallel\_reduce.cpp@{test\_parallel\_reduce.cpp}}
\doxysubsubsection{\texorpdfstring{ForkCount}{ForkCount}}
{\footnotesize\ttfamily \label{test__parallel__reduce_8cpp_a156af0caf591b5ee2aaed472b8aaae83} 
\mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{tbb\+::atomic}}$<$long$>$ Fork\+Count\hspace{0.3cm}{\ttfamily [static]}}

