\doxysection{variable.\+h}
\hypertarget{variable_8h_source}{}\label{variable_8h_source}\index{runtime/ast/variable.h@{runtime/ast/variable.h}}
\mbox{\hyperlink{variable_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{type_8h}{runtime/ast/type.h}}>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{usage_8h}{runtime/ast/usage.h}}>}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceluisa}{luisa}}\ \{}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceluisa_1_1compute}{compute}}\ \{}
\DoxyCodeLine{00009\ \textcolor{keyword}{class\ }CallableLibrary;}
\DoxyCodeLine{00010\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail}{detail}}\ \{}
\DoxyCodeLine{00011\ \textcolor{keyword}{class\ }FunctionBuilder;}
\DoxyCodeLine{00012\ \}\textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{class\ }\mbox{\hyperlink{dll__export_8h_af35f96669b7399486e26bc85317958f8}{LC\_AST\_API}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a4f274f6f4298942bc1428f03f75d396e}{Variable}}\ \{}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keyword}{enum\ struct}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9}{Tag}}\ :\ \mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \{}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ data}}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a54b4c4075463b2e02cd69f5cd139b5b2}{LOCAL}},}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a049518eb4dc1859c7cebbe15876cfd63}{SHARED}},}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ reference}}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9adcd320d017d7f3c317bc8b234287bc9f}{REFERENCE}},}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ resources}}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a17de626bcae5109bb2f7a66dfc4a8a1d}{BUFFER}},}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a3f92f542bd9ec48f912b9350e22736ac}{TEXTURE}},}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a2a1e0b48665018895cd7cc3c60d733ef}{BINDLESS\_ARRAY}},}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a91685fafbbbbe2c47c6a79c29180a27e}{ACCEL}},}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ builtins}}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a7357f16006a5da1aec211f71da0c4f7f}{THREAD\_ID}},}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9af0c5b72fb1e0b3edc2a8165f71dfa4d9}{BLOCK\_ID}},}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a626d0781d3db86b4230626f32fb8187c}{DISPATCH\_ID}},}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a54e0cd2201c1d96935ccdb3e4d5e04cf}{DISPATCH\_SIZE}},}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9ab9550a096e7d401d4806458cef3523e0}{KERNEL\_ID}},}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a1a8bcb5d570d93ddc8b85fe19f49e689}{WARP\_LANE\_COUNT}},}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a34f91913a54f1c48a996031debf0b772}{WARP\_LANE\_ID}},}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a2967e7cb8153a425206abbfdd43b3509}{OBJECT\_ID}}}
\DoxyCodeLine{00043\ \ \ \ \ \};}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_type}{Type}}\ *\mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a0e95515c41d7e70a666f7303829450bf}{\_type}}\{\textcolor{keyword}{nullptr}\};}
\DoxyCodeLine{00047\ \ \ \ \ \mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a78663de7f23e1742e72d79ea8af7f431}{\_uid}}\{\};}
\DoxyCodeLine{00048\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9}{Tag}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_af816411d409faf34ce222aa1b2c764bd}{\_tag}}\{\};}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_function_builder}{detail::FunctionBuilder}};}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_variable_aba23584d3ea15d15693145d5f9a97952}{CallableLibrary}};}
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a4f274f6f4298942bc1428f03f75d396e}{Variable}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_type}{Type}}\ *\mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a47037f45f57a0f670f6b576de07d98aa}{type}},\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9}{Tag}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a0450ef2bdba64f9d690253880c722944}{tag}},\ \mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a1cd18fe2a209dc574cca551a2c18f885}{uid}})\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00056\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a35b702f150689c1752728afd2ad854bb}{Variable}}()\ noexcept\ =\ \mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}};}
\DoxyCodeLine{00057\ \ \ \ \ [[nodiscard]]\ auto\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a47037f45f57a0f670f6b576de07d98aa}{type}}()\ const\ noexcept\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a0e95515c41d7e70a666f7303829450bf}{\_type}};\ \}}
\DoxyCodeLine{00058\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a1cd18fe2a209dc574cca551a2c18f885}{uid}}()\ const\ noexcept\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a78663de7f23e1742e72d79ea8af7f431}{\_uid}};\ \}}
\DoxyCodeLine{00059\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a0450ef2bdba64f9d690253880c722944}{tag}}()\ const\ noexcept\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_af816411d409faf34ce222aa1b2c764bd}{\_tag}};\ \}}
\DoxyCodeLine{00060\ \ \ \ \ [[nodiscard]]\ \mbox{\hyperlink{eabase_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\_t}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a328b28f8e451548d9a99d80411c9ba62}{hash}}()\ const\ noexcept;}
\DoxyCodeLine{00061\ \ \ \ \ [[nodiscard]]\ auto\ operator==(\mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a4f274f6f4298942bc1428f03f75d396e}{Variable}}\ rhs)\ const\ noexcept\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a78663de7f23e1742e72d79ea8af7f431}{\_uid}}\ ==\ rhs.\_uid;\ \}}
\DoxyCodeLine{00062\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a4ccc0c51a11c5bbccc8c9727d7fe014d}{is\_local}}()\ const\ noexcept\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_af816411d409faf34ce222aa1b2c764bd}{\_tag}}\ ==\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a54b4c4075463b2e02cd69f5cd139b5b2}{Tag::LOCAL}};\ \}}
\DoxyCodeLine{00063\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a2d8c5a3bcb30947766d00b90b7a8de47}{is\_shared}}()\ const\ noexcept\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_af816411d409faf34ce222aa1b2c764bd}{\_tag}}\ ==\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a049518eb4dc1859c7cebbe15876cfd63}{Tag::SHARED}};\ \}}
\DoxyCodeLine{00064\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_ae5f6a164e5b14fef93cea35a64f50131}{is\_reference}}()\ const\ noexcept\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_af816411d409faf34ce222aa1b2c764bd}{\_tag}}\ ==\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9adcd320d017d7f3c317bc8b234287bc9f}{Tag::REFERENCE}};\ \}}
\DoxyCodeLine{00065\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a82fa2d55d5a83fff37f727c93811b609}{is\_resource}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_af816411d409faf34ce222aa1b2c764bd}{\_tag}}\ ==\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a17de626bcae5109bb2f7a66dfc4a8a1d}{Tag::BUFFER}}\ ||}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_af816411d409faf34ce222aa1b2c764bd}{\_tag}}\ ==\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a3f92f542bd9ec48f912b9350e22736ac}{Tag::TEXTURE}}\ ||}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_af816411d409faf34ce222aa1b2c764bd}{\_tag}}\ ==\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a2a1e0b48665018895cd7cc3c60d733ef}{Tag::BINDLESS\_ARRAY}}\ ||}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_af816411d409faf34ce222aa1b2c764bd}{\_tag}}\ ==\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a91685fafbbbbe2c47c6a79c29180a27e}{Tag::ACCEL}};}
\DoxyCodeLine{00070\ \ \ \ \ \}}
\DoxyCodeLine{00071\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_afa2fada59a201023e1959786c4d31f76}{is\_builtin}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_af816411d409faf34ce222aa1b2c764bd}{\_tag}}\ ==\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a7357f16006a5da1aec211f71da0c4f7f}{Tag::THREAD\_ID}}\ ||}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_af816411d409faf34ce222aa1b2c764bd}{\_tag}}\ ==\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9af0c5b72fb1e0b3edc2a8165f71dfa4d9}{Tag::BLOCK\_ID}}\ ||}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_af816411d409faf34ce222aa1b2c764bd}{\_tag}}\ ==\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a626d0781d3db86b4230626f32fb8187c}{Tag::DISPATCH\_ID}}\ ||}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_af816411d409faf34ce222aa1b2c764bd}{\_tag}}\ ==\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a54e0cd2201c1d96935ccdb3e4d5e04cf}{Tag::DISPATCH\_SIZE}}\ ||}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_af816411d409faf34ce222aa1b2c764bd}{\_tag}}\ ==\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9ab9550a096e7d401d4806458cef3523e0}{Tag::KERNEL\_ID}}\ ||}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_af816411d409faf34ce222aa1b2c764bd}{\_tag}}\ ==\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a1a8bcb5d570d93ddc8b85fe19f49e689}{Tag::WARP\_LANE\_COUNT}}\ ||}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_af816411d409faf34ce222aa1b2c764bd}{\_tag}}\ ==\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a34f91913a54f1c48a996031debf0b772}{Tag::WARP\_LANE\_ID}}\ ||}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_af816411d409faf34ce222aa1b2c764bd}{\_tag}}\ ==\ \mbox{\hyperlink{classluisa_1_1compute_1_1_variable_a97c817f3ab5b3c548d276029093404c9a2967e7cb8153a425206abbfdd43b3509}{Tag::OBJECT\_ID}};}
\DoxyCodeLine{00080\ \ \ \ \ \}}
\DoxyCodeLine{00081\ \};}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \}\textcolor{comment}{//\ namespace\ compute}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \textcolor{keyword}{template}<>}
\DoxyCodeLine{00086\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1hash}{hash}}<\mbox{\hyperlink{namespaceluisa_1_1compute}{compute}}::Variable>\ \{}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1hash_3_01compute_1_1_variable_01_4_aa6ba15bf24a0d1efe46c0f1a6ec3607b}{is\_avalanching}}\ =\ \mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}};}
\DoxyCodeLine{00088\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structluisa_1_1hash_3_01compute_1_1_variable_01_4_af365d13b5cccb961114afb59849411ab}{operator()}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_variable}{compute::Variable}}\ v)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ \{\ \textcolor{keywordflow}{return}\ v.hash();\ \}}
\DoxyCodeLine{00089\ \};}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \}\textcolor{comment}{//\ namespace\ luisa}}

\end{DoxyCode}
