\chapter{JSON schema}
\hypertarget{md_external_2reflect-cpp_2docs_2json__schema}{}\label{md_external_2reflect-cpp_2docs_2json__schema}\index{JSON schema@{JSON schema}}
\label{md_external_2reflect-cpp_2docs_2json__schema_autotoc_md601}%
\Hypertarget{md_external_2reflect-cpp_2docs_2json__schema_autotoc_md601}%


JSON schemata are a powerful tool for expressing the expected structure of your input. You can use it to validate your input before you even send it to your C++ backend, which will result in better UX.

It can also be used for code generation. For instance, tools such as \href{https://app.quicktype.io/}{\texttt{ https\+://app.\+quicktype.\+io/}} allow you to generate code in multiple programming languages from the JSON schema (even though the validations are usually omitted).

If you are interacting with Python, we warmly recommend \href{https://docs.pydantic.dev/latest/integrations/datamodel_code_generator/}{\texttt{ https\+://docs.\+pydantic.\+dev/latest/integrations/datamodel\+\_\+code\+\_\+generator/}}. This allows you to generate Pydantic dataclasses, including the validation, from the JSON schema.

Note that this is only supported for JSON, not for other formats.\hypertarget{md_external_2reflect-cpp_2docs_2json__schema_autotoc_md602}{}\doxysection{\texorpdfstring{Basic idea}{Basic idea}}\label{md_external_2reflect-cpp_2docs_2json__schema_autotoc_md602}
Suppose you have a struct like this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct\ }Person\ \{}
\DoxyCodeLine{\ \ std::string\ first\_name;}
\DoxyCodeLine{\ \ std::string\ last\_name;}
\DoxyCodeLine{\ \ \mbox{\hyperlink{namespacerfl_a12c736fb0b0b2ecae42c2ba1b4b61c08}{rfl::Email}}\ email;}
\DoxyCodeLine{\ \ std::vector<Person>\ children;}
\DoxyCodeLine{\ \ \textcolor{keywordtype}{float}\ salary;}
\DoxyCodeLine{\};}

\end{DoxyCode}


You can generate a JSON schema like this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ std::string\ json\_schema\ =\ \mbox{\hyperlink{namespacerfl_1_1json_a88db200032568f881dc57ded6b138608}{rfl::json::to\_schema<Person>}}(\mbox{\hyperlink{namespacerfl_1_1json_aa6d42da654d6b357271b28dbc309ac75}{rfl::json::pretty}});}

\end{DoxyCode}


You do not have to pass {\ttfamily \doxylink{namespacerfl_1_1json_aa6d42da654d6b357271b28dbc309ac75}{rfl\+::json\+::pretty}}, but for the purposes of this documentation it is better to do so.

This will result in the following JSON schema\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ "{}\$schema"{}:\ "{}https://json-\/schema.org/draft/2020-\/12/schema"{},}
\DoxyCodeLine{\ \ \ \ "{}\$ref"{}:\ "{}\#/definitions/Person"{},}
\DoxyCodeLine{\ \ \ \ "{}definitions"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ "{}Person"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}type"{}:\ "{}object"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}properties"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}children"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}type"{}:\ "{}array"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}items"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}\$ref"{}:\ "{}\#/definitions/Person"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}email"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}type"{}:\ "{}string"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}pattern"{}:\ "{}\string^[a-\/zA-\/Z0-\/9.\_\%+\(\backslash\)\(\backslash\)-\/]+@[a-\/zA-\/Z0-\/9.\(\backslash\)\(\backslash\)-\/]+\(\backslash\)\(\backslash\).[a-\/zA-\/Z]\{2,\}\$"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}first\_name"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}type"{}:\ "{}string"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}last\_name"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}type"{}:\ "{}string"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}salary"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}type"{}:\ "{}number"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}required"{}:\ [}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}children"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}email"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}first\_name"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}last\_name"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}salary"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


You can insert this into the tools mentioned above and see the generated code.\hypertarget{md_external_2reflect-cpp_2docs_2json__schema_autotoc_md603}{}\doxysection{\texorpdfstring{Adding descriptions}{Adding descriptions}}\label{md_external_2reflect-cpp_2docs_2json__schema_autotoc_md603}
JSON schemata also often contain descriptions. reflect-\/cpp supports this as well.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct\ }Person\ \{}
\DoxyCodeLine{\ \ std::string\ first\_name;}
\DoxyCodeLine{\ \ std::string\ last\_name;}
\DoxyCodeLine{\ \ rfl::Description<\textcolor{stringliteral}{"{}Must\ be\ a\ proper\ email\ in\ the\ form\ xxx@xxx.xxx."{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerfl_a12c736fb0b0b2ecae42c2ba1b4b61c08}{rfl::Email}}>}
\DoxyCodeLine{\ \ \ \ \ \ email;}
\DoxyCodeLine{\ \ rfl::Description<}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{stringliteral}{"{}The\ person's\ children.\ Pass\ an\ empty\ array\ for\ no\ children."{}},}
\DoxyCodeLine{\ \ \ \ \ \ std::vector<Person>>}
\DoxyCodeLine{\ \ \ \ \ \ children;}
\DoxyCodeLine{\ \ \textcolor{keywordtype}{float}\ salary;}
\DoxyCodeLine{\};}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ std::string\ json\_schema\ =\ \mbox{\hyperlink{namespacerfl_1_1json_a88db200032568f881dc57ded6b138608}{rfl::json::to\_schema<Person>}}(\mbox{\hyperlink{namespacerfl_1_1json_aa6d42da654d6b357271b28dbc309ac75}{rfl::json::pretty}});}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ "{}\$schema"{}:\ "{}https://json-\/schema.org/draft/2020-\/12/schema"{},}
\DoxyCodeLine{\ \ \ \ "{}\$ref"{}:\ "{}\#/definitions/Person"{},}
\DoxyCodeLine{\ \ \ \ "{}definitions"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ "{}Person"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}type"{}:\ "{}object"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}properties"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}children"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}type"{}:\ "{}array"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}description"{}:\ "{}The\ person's\ children.\ Pass\ an\ empty\ array\ for\ no\ children."{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}items"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}\$ref"{}:\ "{}\#/definitions/Person"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}email"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}type"{}:\ "{}string"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}description"{}:\ "{}Must\ be\ a\ proper\ email\ in\ the\ form\ xxx@xxx.xxx."{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}pattern"{}:\ "{}\string^[a-\/zA-\/Z0-\/9.\_\%+\(\backslash\)\(\backslash\)-\/]+@[a-\/zA-\/Z0-\/9.\(\backslash\)\(\backslash\)-\/]+\(\backslash\)\(\backslash\).[a-\/zA-\/Z]\{2,\}\$"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}first\_name"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}type"{}:\ "{}string"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}last\_name"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}type"{}:\ "{}string"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}salary"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}type"{}:\ "{}number"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}required"{}:\ [}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}children"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}email"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}first\_name"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}last\_name"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}salary"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


You also add a description to the entire JSON schema\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ std::string\ json\_schema\ =\ \mbox{\hyperlink{namespacerfl_1_1json_a88db200032568f881dc57ded6b138608}{rfl::json::to\_schema}}<}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{structrfl_1_1_description}{rfl::Description}}<\textcolor{stringliteral}{"{}JSON\ schema\ that\ describes\ the\ required\ "{}}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}attributes\ for\ the\ person\ class."{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Person>>(\mbox{\hyperlink{namespacerfl_1_1json_aa6d42da654d6b357271b28dbc309ac75}{rfl::json::pretty}});}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ "{}\$schema"{}:\ "{}https://json-\/schema.org/draft/2020-\/12/schema"{},}
\DoxyCodeLine{\ \ \ \ "{}\$ref"{}:\ "{}\#/definitions/Person"{},}
\DoxyCodeLine{\ \ \ \ "{}description"{}:\ "{}JSON\ schema\ that\ describes\ the\ required\ attributes\ for\ the\ person\ class."{},}
\DoxyCodeLine{\ \ \ \ "{}definitions"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ "{}Person"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}type"{}:\ "{}object"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}properties"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}children"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}type"{}:\ "{}array"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}description"{}:\ "{}The\ person's\ children.\ Pass\ an\ empty\ array\ for\ no\ children."{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}items"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}\$ref"{}:\ "{}\#/definitions/Person"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}email"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}type"{}:\ "{}string"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}description"{}:\ "{}Must\ be\ a\ proper\ email\ in\ the\ form\ xxx@xxx.xxx."{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}pattern"{}:\ "{}\string^[a-\/zA-\/Z0-\/9.\_\%+\(\backslash\)\(\backslash\)-\/]+@[a-\/zA-\/Z0-\/9.\(\backslash\)\(\backslash\)-\/]+\(\backslash\)\(\backslash\).[a-\/zA-\/Z]\{2,\}\$"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}first\_name"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}type"{}:\ "{}string"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}last\_name"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}type"{}:\ "{}string"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}salary"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}type"{}:\ "{}number"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}required"{}:\ [}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}children"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}email"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}first\_name"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}last\_name"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}salary"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
 