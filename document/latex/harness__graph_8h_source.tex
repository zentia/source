\doxysection{harness\+\_\+graph.\+h}
\hypertarget{harness__graph_8h_source}{}\label{harness__graph_8h_source}\index{external/taskflow/3rd-\/party/tbb/src/test/harness\_graph.h@{external/taskflow/3rd-\/party/tbb/src/test/harness\_graph.h}}
\mbox{\hyperlink{harness__graph_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#ifndef\ harness\_graph\_H}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#define\ harness\_graph\_H}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{harness_8h}{harness.h}}"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{harness__barrier_8h}{harness\_barrier.h}}"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{flow__graph_8h}{tbb/flow\_graph.h}}"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{null__rw__mutex_8h}{tbb/null\_rw\_mutex.h}}"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2include_2tbb_2atomic_8h}{tbb/atomic.h}}"{}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{concurrent__unordered__map_8h}{tbb/concurrent\_unordered\_map.h}}"{}}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{task_8h}{tbb/task.h}}"{}}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{task__scheduler__init_8h}{tbb/task\_scheduler\_init.h}}"{}}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ "{}tbb/compat/condition\_variable"{}}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{mutex_8h}{tbb/mutex.h}}"{}}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{tbb__thread_8h}{tbb/tbb\_thread.h}}"{}}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespacetbb_1_1flow_1_1internal_a7f0430b0f8c67715b53b4e1bfedadc00}{tbb::flow::internal::SUCCESSFULLY\_ENQUEUED}};}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#define\ WAIT\_MAX\ 2000000}}
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#define\ BACKOFF\_WAIT(ex,msg)\ \(\backslash\)}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\{\ \(\backslash\)}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\ \ \ \ int\ wait\_cnt\ =\ 0;\ \(\backslash\)}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\ \ \ \ tbb::internal::atomic\_backoff\ backoff;\ \(\backslash\)}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\ \ \ \ do\ \{\ \(\backslash\)}}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ backoff.pause();\ \(\backslash\)}}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ ++wait\_cnt;\ \(\backslash\)}}
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\ \ \ \ \}\ \(\backslash\)}}
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\ \ \ \ while(\ (ex)\ \&\&\ (wait\_cnt\ <\ WAIT\_MAX));\ \(\backslash\)}}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\ \ \ \ ASSERT(wait\_cnt\ <\ WAIT\_MAX,\ msg);\ \(\backslash\)}}
\DoxyCodeLine{00049\ \textcolor{preprocessor}{\}}}
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\#define\ BACKOFF\_WAIT\_NOASSERT(ex,msg)\ \(\backslash\)}}
\DoxyCodeLine{00051\ \textcolor{preprocessor}{\{\ \(\backslash\)}}
\DoxyCodeLine{00052\ \textcolor{preprocessor}{\ \ \ \ int\ wait\_cnt\ =\ 0;\ \(\backslash\)}}
\DoxyCodeLine{00053\ \textcolor{preprocessor}{\ \ \ \ tbb::internal::atomic\_backoff\ backoff;\ \(\backslash\)}}
\DoxyCodeLine{00054\ \textcolor{preprocessor}{\ \ \ \ do\ \{\ \(\backslash\)}}
\DoxyCodeLine{00055\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ backoff.pause();\ \(\backslash\)}}
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ ++wait\_cnt;\ \(\backslash\)}}
\DoxyCodeLine{00057\ \textcolor{preprocessor}{\ \ \ \ \}\ \(\backslash\)}}
\DoxyCodeLine{00058\ \textcolor{preprocessor}{\ \ \ \ while(\ (ex)\ \&\&\ (wait\_cnt\ <\ WAIT\_MAX));\ \(\backslash\)}}
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\ \ \ \ if(wait\_cnt\ >=\ WAIT\_MAX)\ REMARK("{}\%s\(\backslash\)n"{},msg);\ \(\backslash\)}}
\DoxyCodeLine{00060\ \textcolor{preprocessor}{\}}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \textcolor{comment}{//\ Needed\ conversion\ to\ and\ from\ continue\_msg,\ but\ didn't\ want\ to\ add}}
\DoxyCodeLine{00063\ \textcolor{comment}{//\ conversion\ operators\ to\ the\ class,\ since\ we\ don't\ want\ it\ in\ general,}}
\DoxyCodeLine{00064\ \textcolor{comment}{//\ only\ in\ these\ tests.}}
\DoxyCodeLine{00065\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ InputType,\ \textcolor{keyword}{typename}\ OutputType>}
\DoxyCodeLine{00066\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structconverter}{converter}}\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keyword}{static}\ OutputType\ \mbox{\hyperlink{structconverter_aa6f6cee2b54437aebb69c2a1030a53bd}{convert\_value}}(\textcolor{keyword}{const}\ InputType\ \&\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ OutputType(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{00069\ \ \ \ \ \}}
\DoxyCodeLine{00070\ \};}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ InputType>}
\DoxyCodeLine{00073\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structconverter}{converter}}<InputType,\mbox{\hyperlink{namespacetbb}{tbb}}::flow::continue\_msg>\ \{}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keyword}{static}\ tbb::flow::continue\_msg\ \mbox{\hyperlink{structconverter_3_01_input_type_00_01tbb_1_1flow_1_1continue__msg_01_4_aae5c383e0b8f6575de98d1aa04c04ec9}{convert\_value}}(\textcolor{keyword}{const}\ InputType\ \&\textcolor{comment}{/*i*/})\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ tbb::flow::continue\_msg();}
\DoxyCodeLine{00076\ \ \ \ \ \}}
\DoxyCodeLine{00077\ \};}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OutputType>}
\DoxyCodeLine{00080\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structconverter}{converter}}<\mbox{\hyperlink{namespacetbb}{tbb}}::flow::continue\_msg,OutputType>\ \{}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keyword}{static}\ OutputType\ \mbox{\hyperlink{structconverter_3_01tbb_1_1flow_1_1continue__msg_00_01_output_type_01_4_ac954928bf59a57c6945dccd7523a8079}{convert\_value}}(\textcolor{keyword}{const}\ tbb::flow::continue\_msg\ \&\textcolor{comment}{/*i*/})\ \{}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ OutputType();}
\DoxyCodeLine{00083\ \ \ \ \ \}}
\DoxyCodeLine{00084\ \};}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \textcolor{comment}{//\ helper\ for\ multifunction\_node\ tests.}}
\DoxyCodeLine{00087\ \textcolor{keyword}{template}<\textcolor{keywordtype}{size\_t}\ N>}
\DoxyCodeLine{00088\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structmof__helper}{mof\_helper}}\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ InputType,\ \textcolor{keyword}{typename}\ ports\_type>}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structmof__helper_a77de4607930c7aeafb99b767877da2a4}{output\_converted\_value}}(\textcolor{keyword}{const}\ InputType\ \&\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ \mbox{\hyperlink{classgate}{ports\_type}}\ \&\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}})tbb::flow::get<N-\/1>(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}).try\_put(\mbox{\hyperlink{structconverter}{converter}}<InputType,\textcolor{keyword}{typename}\ tbb::flow::tuple\_element<N-\/1,ports\_type>::type::output\_type>::convert\_value(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}));}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structmof__helper_a77de4607930c7aeafb99b767877da2a4}{output\_converted\_value}}<\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}-\/1>(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}});}
\DoxyCodeLine{00093\ \ \ \ \ \}}
\DoxyCodeLine{00094\ \};}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \textcolor{keyword}{template}<>}
\DoxyCodeLine{00097\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structmof__helper}{mof\_helper}}<1>\ \{}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ InputType,\ \textcolor{keyword}{typename}\ ports\_type>}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structmof__helper_3_011_01_4_a6859c8f1acec8f93c59da8f9e2bfbcb0}{output\_converted\_value}}(\textcolor{keyword}{const}\ InputType\ \&\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ \mbox{\hyperlink{classgate}{ports\_type}}\ \&\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ just\ emit\ a\ default-\/constructed\ object}}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}})tbb::flow::get<0>(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}).try\_put(\mbox{\hyperlink{structconverter}{converter}}<InputType,\textcolor{keyword}{typename}\ tbb::flow::tuple\_element<0,ports\_type>::type::output\_type>::convert\_value(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}));}
\DoxyCodeLine{00102\ \ \ \ \ \}}
\DoxyCodeLine{00103\ \};}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ InputType,\ \textcolor{keyword}{typename}\ OutputType\ >}
\DoxyCodeLine{00106\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structharness__graph__default__functor}{harness\_graph\_default\_functor}}\ \{}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keyword}{static}\ OutputType\ \mbox{\hyperlink{structharness__graph__default__functor_a2d4d81137b4a567a664f930204c601c7}{construct}}(\ InputType\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ )\ \{}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ OutputType(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}});}
\DoxyCodeLine{00109\ \ \ \ \ \}}
\DoxyCodeLine{00110\ \};}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ OutputType\ >}
\DoxyCodeLine{00113\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structharness__graph__default__functor}{harness\_graph\_default\_functor}}<\ \mbox{\hyperlink{namespacetbb}{tbb}}::flow::continue\_msg,\ OutputType\ >\ \{}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keyword}{static}\ OutputType\ \mbox{\hyperlink{structharness__graph__default__functor_3_01tbb_1_1flow_1_1continue__msg_00_01_output_type_01_4_ada00d9ee8c1e4f920dd293fa20756c2d}{construct}}(\ tbb::flow::continue\_msg\ )\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ OutputType();}
\DoxyCodeLine{00116\ \ \ \ \ \}}
\DoxyCodeLine{00117\ \};}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ InputType\ >}
\DoxyCodeLine{00120\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structharness__graph__default__functor}{harness\_graph\_default\_functor}}<\ InputType,\ \mbox{\hyperlink{namespacetbb}{tbb}}::flow::continue\_msg\ >\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keyword}{static}\ tbb::flow::continue\_msg\ \mbox{\hyperlink{structharness__graph__default__functor_3_01_input_type_00_01tbb_1_1flow_1_1continue__msg_01_4_acef042a6c935d5320af8ba3eca591f59}{construct}}(\ InputType\ )\ \{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ tbb::flow::continue\_msg();}
\DoxyCodeLine{00123\ \ \ \ \ \}}
\DoxyCodeLine{00124\ \};}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \textcolor{keyword}{template}<\ >}
\DoxyCodeLine{00127\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structharness__graph__default__functor}{harness\_graph\_default\_functor}}<\ \mbox{\hyperlink{namespacetbb}{tbb}}::flow::continue\_msg,\ tbb::flow::continue\_msg\ >\ \{}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keyword}{static}\ tbb::flow::continue\_msg\ \mbox{\hyperlink{structharness__graph__default__functor_3_01tbb_1_1flow_1_1continue__msg_00_01tbb_1_1flow_1_1continue__msg_01_4_ae6a25b22a1bd892b5cdab93cbc60f483}{construct}}(\ tbb::flow::continue\_msg\ )\ \{}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ tbb::flow::continue\_msg();}
\DoxyCodeLine{00130\ \ \ \ \ \}}
\DoxyCodeLine{00131\ \};}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ InputType,\ \textcolor{keyword}{typename}\ OutputSet>}
\DoxyCodeLine{00134\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structharness__graph__default__multifunction__functor}{harness\_graph\_default\_multifunction\_functor}}\ \{}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structharness__graph__default__multifunction__functor_a83f679d063940cec991b383c42e82561}{N}}\ =\ tbb::flow::tuple\_size<OutputSet>::value;}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ tbb::flow::multifunction\_node<InputType,OutputSet>::output\_ports\_type\ \mbox{\hyperlink{structharness__graph__default__multifunction__functor_a956e5cbceb209e3932ceca67ace6f222}{ports\_type}};}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structharness__graph__default__multifunction__functor_a06b35ccc3bcb19ccbedcb3096fbd8b9e}{construct}}(\textcolor{keyword}{const}\ InputType\ \&\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ \mbox{\hyperlink{structharness__graph__default__multifunction__functor_a956e5cbceb209e3932ceca67ace6f222}{ports\_type}}\ \&\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})\ \{}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structmof__helper_a77de4607930c7aeafb99b767877da2a4}{mof\_helper<N>::output\_converted\_value}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}});}
\DoxyCodeLine{00139\ \ \ \ \ \}}
\DoxyCodeLine{00140\ \};}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00143\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ InputType,\ \textcolor{keyword}{typename}\ OutputType\ >}
\DoxyCodeLine{00144\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structharness__graph__executor}{harness\_graph\_executor}}\ \{}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keyword}{typedef}\ OutputType\ (*\mbox{\hyperlink{structharness__graph__executor_a44175ee5eae11c2d42fbe0169c12b944}{function\_ptr\_type}})(\ InputType\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ );}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ RW>}
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structharness__graph__executor_1_1mutex__holder}{mutex\_holder}}\ \{\ \textcolor{keyword}{static}\ RW\ \mbox{\hyperlink{structharness__graph__executor_1_1mutex__holder_a6fdb94fb76f451d873dda77ec2a8df21}{mutex}};\ \};}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{structharness__graph__executor_a44175ee5eae11c2d42fbe0169c12b944}{function\_ptr\_type}}\ \mbox{\hyperlink{structharness__graph__executor_a49a94fae5e235c370737cc790565d5c3}{fptr}};}
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keyword}{static}\ tbb::atomic<size\_t>\ \mbox{\hyperlink{structharness__graph__executor_af0fcd730c0d370ab88a104cc709273b4}{execute\_count}};}
\DoxyCodeLine{00153\ \ \ \ \ \textcolor{keyword}{static}\ tbb::atomic<size\_t>\ \mbox{\hyperlink{structharness__graph__executor_a079e78a85c527f4ec5e136b872d0b7cf}{current\_executors}};}
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structharness__graph__executor_a00aa3dfb696a62986d26c143383fad94}{max\_executors}};}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ OutputType\ \mbox{\hyperlink{structharness__graph__executor_ac41a80aba49bfa67becad7f3af86922e}{func}}(\ InputType\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ )\ \{}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}};\ \textcolor{comment}{//\ Declaration\ separate\ from\ initialization\ to\ avoid\ ICC\ internal\ error\ on\ IA-\/64\ architecture}}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}\ =\ \mbox{\hyperlink{structharness__graph__executor_a079e78a85c527f4ec5e136b872d0b7cf}{current\_executors}}.fetch\_and\_increment();}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{structharness__graph__executor_a00aa3dfb696a62986d26c143383fad94}{max\_executors}}\ ==\ 0\ ||\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}\ <=\ \mbox{\hyperlink{structharness__graph__executor_a00aa3dfb696a62986d26c143383fad94}{max\_executors}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{structharness__graph__executor_af0fcd730c0d370ab88a104cc709273b4}{execute\_count}};}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ OutputType\ \mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a3eb30a79de469336df46f4f5f0bfb84f}{v2}}\ =\ (*fptr)(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}});}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__graph__executor_a079e78a85c527f4ec5e136b872d0b7cf}{current\_executors}}.fetch\_and\_decrement();}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a3eb30a79de469336df46f4f5f0bfb84f}{v2}};}
\DoxyCodeLine{00164\ \ \ \ \ \}}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ RW\ >}
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ OutputType\ \mbox{\hyperlink{structharness__graph__executor_a9dbd81d48f683b5f9f5d8ad05e7c6b73}{tfunc}}(\ InputType\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ )\ \{}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Invocations\ allowed\ to\ be\ concurrent,\ the\ lock\ is\ acquired\ in\ shared\ ("{}read"{})\ mode.}}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ A\ test\ can\ take\ it\ exclusively,\ thus\ creating\ a\ barrier\ for\ invocations.}}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ RW::scoped\_lock\ l(\ \mbox{\hyperlink{structharness__graph__executor_1_1mutex__holder_a6fdb94fb76f451d873dda77ec2a8df21}{mutex\_holder<RW>::mutex}},\ \textcolor{comment}{/*write=*/}\textcolor{keyword}{false}\ );}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structharness__graph__executor_ac41a80aba49bfa67becad7f3af86922e}{func}}(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}});}
\DoxyCodeLine{00172\ \ \ \ \ \}}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ RW\ >}
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structharness__graph__executor_1_1tfunctor_a6c219251faf6ccca120a9f62b2bd8a0b}{tfunctor}}\ \{}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ tbb::atomic<size\_t>\ \mbox{\hyperlink{structharness__graph__executor_1_1tfunctor_ae0984e13c97a8dba1d90c3181d264e45}{my\_execute\_count}};}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__graph__executor_1_1tfunctor_a6c219251faf6ccca120a9f62b2bd8a0b}{tfunctor}}()\ \{\ \mbox{\hyperlink{structharness__graph__executor_1_1tfunctor_ae0984e13c97a8dba1d90c3181d264e45}{my\_execute\_count}}\ =\ 0;\ \}}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__graph__executor_1_1tfunctor_ab87215127857893b709adbc5b7a9d012}{tfunctor}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structharness__graph__executor_1_1tfunctor_a6c219251faf6ccca120a9f62b2bd8a0b}{tfunctor}}\ \&\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )\ \{\ \mbox{\hyperlink{structharness__graph__executor_1_1tfunctor_ae0984e13c97a8dba1d90c3181d264e45}{my\_execute\_count}}\ =\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}.my\_execute\_count;\ \}}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ OutputType\ \mbox{\hyperlink{structharness__graph__executor_1_1tfunctor_a8f8531589bd48f864e8a363953c57e79}{operator()}}(\ InputType\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ )\ \{}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ RW::scoped\_lock\ l(\ \mbox{\hyperlink{structharness__graph__executor_1_1mutex__holder_a6fdb94fb76f451d873dda77ec2a8df21}{harness\_graph\_executor::mutex\_holder<RW>::mutex}},\ \textcolor{comment}{/*write=*/}\textcolor{keyword}{false}\ );}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__graph__executor_1_1tfunctor_ae0984e13c97a8dba1d90c3181d264e45}{my\_execute\_count}}.fetch\_and\_increment();}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structharness__graph__executor_ac41a80aba49bfa67becad7f3af86922e}{harness\_graph\_executor::func}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00184\ \ \ \ \ \};}
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structharness__graph__executor_1_1tfunctor}{tfunctor<tbb::null\_rw\_mutex>}}\ \mbox{\hyperlink{structharness__graph__executor_a245b60dd4e566848470f27e5de56461b}{functor}};}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \};}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00190\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ InputType,\ \textcolor{keyword}{typename}\ OutputTuple\ >}
\DoxyCodeLine{00191\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structharness__graph__multifunction__executor}{harness\_graph\_multifunction\_executor}}\ \{}
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ tbb::flow::multifunction\_node<InputType,OutputTuple>::output\_ports\_type\ \mbox{\hyperlink{structharness__graph__multifunction__executor_aba4d89577f59d4cc5f485aabde3b494e}{ports\_type}};}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ tbb::flow::tuple\_element<0,OutputTuple>::type\ \mbox{\hyperlink{structharness__graph__multifunction__executor_a9778fe18f160b30462f2c5464d04597c}{OutputType}};}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}\ (*\mbox{\hyperlink{structharness__graph__multifunction__executor_a8a8b20c5f99325e51e8c28b0e960c3b7}{mfunction\_ptr\_type}})(\ \textcolor{keyword}{const}\ InputType\&\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}},\ \mbox{\hyperlink{structharness__graph__multifunction__executor_aba4d89577f59d4cc5f485aabde3b494e}{ports\_type}}\ \&\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ );}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ RW>}
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structharness__graph__multifunction__executor_1_1mutex__holder}{mutex\_holder}}\ \{\ \textcolor{keyword}{static}\ RW\ \mbox{\hyperlink{structharness__graph__multifunction__executor_1_1mutex__holder_aca3a26701e1eae9804b2afe5d1272677}{mutex}};\ \};}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{structharness__graph__multifunction__executor_a8a8b20c5f99325e51e8c28b0e960c3b7}{mfunction\_ptr\_type}}\ \mbox{\hyperlink{structharness__graph__multifunction__executor_a50e8ef245658135ef4fe8167fe614b99}{fptr}};}
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keyword}{static}\ tbb::atomic<size\_t>\ \mbox{\hyperlink{structharness__graph__multifunction__executor_a5da1b8a1dfcbc7e15ff10c4aca110828}{execute\_count}};}
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keyword}{static}\ tbb::atomic<size\_t>\ \mbox{\hyperlink{structharness__graph__multifunction__executor_a7907a02a9709c467a5d23f763c94f751}{current\_executors}};}
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structharness__graph__multifunction__executor_a23040aed77c5344015af3e7432b68fed}{max\_executors}};}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structharness__graph__multifunction__executor_adcddcbeac9acabdabf66c9fe2f36411c}{empty\_func}}(\ \textcolor{keyword}{const}\ InputType\&,\ \mbox{\hyperlink{structharness__graph__multifunction__executor_aba4d89577f59d4cc5f485aabde3b494e}{ports\_type}}\&\ )\ \{}
\DoxyCodeLine{00206\ \ \ \ \ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structharness__graph__multifunction__executor_a4e901a06738818182fb95f23a2e51be1}{func}}(\ \textcolor{keyword}{const}\ InputType\ \&\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}},\ \mbox{\hyperlink{structharness__graph__multifunction__executor_aba4d89577f59d4cc5f485aabde3b494e}{ports\_type}}\ \&\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ \{}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}};\ \textcolor{comment}{//\ Declaration\ separate\ from\ initialization\ to\ avoid\ ICC\ internal\ error\ on\ IA-\/64\ architecture}}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}\ =\ \mbox{\hyperlink{structharness__graph__multifunction__executor_a7907a02a9709c467a5d23f763c94f751}{current\_executors}}.fetch\_and\_increment();}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{structharness__graph__multifunction__executor_a23040aed77c5344015af3e7432b68fed}{max\_executors}}\ ==\ 0\ ||\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}\ <=\ \mbox{\hyperlink{structharness__graph__multifunction__executor_a23040aed77c5344015af3e7432b68fed}{max\_executors}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(tbb::flow::tuple\_size<OutputTuple>::value\ ==\ 1,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{structharness__graph__multifunction__executor_a5da1b8a1dfcbc7e15ff10c4aca110828}{execute\_count}};}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ (*fptr)(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}},\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}});}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__graph__multifunction__executor_a7907a02a9709c467a5d23f763c94f751}{current\_executors}}.fetch\_and\_decrement();}
\DoxyCodeLine{00216\ \ \ \ \ \}}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \ \ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ RW\ >}
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structharness__graph__multifunction__executor_a8e20acb2bcf840b92b474eceb8b554fe}{tfunc}}(\ \textcolor{keyword}{const}\ InputType\&\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}},\ \mbox{\hyperlink{structharness__graph__multifunction__executor_aba4d89577f59d4cc5f485aabde3b494e}{ports\_type}}\ \&\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ \{}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Shared\ lock\ in\ invocations,\ exclusive\ in\ a\ test;\ see\ a\ comment\ in\ harness\_graph\_executor.}}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ RW::scoped\_lock\ l(\ \mbox{\hyperlink{structharness__graph__multifunction__executor_1_1mutex__holder_aca3a26701e1eae9804b2afe5d1272677}{mutex\_holder<RW>::mutex}},\ \textcolor{comment}{/*write=*/}\textcolor{keyword}{false}\ );}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__graph__multifunction__executor_a4e901a06738818182fb95f23a2e51be1}{func}}(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}},\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}});}
\DoxyCodeLine{00223\ \ \ \ \ \}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ RW\ >}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structharness__graph__multifunction__executor_1_1tfunctor_a8bf6c2e615b8da8815b4bc47e8ec2506}{tfunctor}}\ \{}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ tbb::atomic<size\_t>\ \mbox{\hyperlink{structharness__graph__multifunction__executor_1_1tfunctor_a782e9a8550d0e7fa8d48e90ccfdcc758}{my\_execute\_count}};}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__graph__multifunction__executor_1_1tfunctor_a8bf6c2e615b8da8815b4bc47e8ec2506}{tfunctor}}()\ \{\ \mbox{\hyperlink{structharness__graph__multifunction__executor_1_1tfunctor_a782e9a8550d0e7fa8d48e90ccfdcc758}{my\_execute\_count}}\ =\ 0;\ \}}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__graph__multifunction__executor_1_1tfunctor_abb87d7ac71a9cc2b415211b393b81686}{tfunctor}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structharness__graph__multifunction__executor_1_1tfunctor_a8bf6c2e615b8da8815b4bc47e8ec2506}{tfunctor}}\ \&\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )\ \{\ \mbox{\hyperlink{structharness__graph__multifunction__executor_1_1tfunctor_a782e9a8550d0e7fa8d48e90ccfdcc758}{my\_execute\_count}}\ =\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}.my\_execute\_count;\ \}}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structharness__graph__multifunction__executor_1_1tfunctor_a07dddb15e8a5d7771440406d434f9269}{operator()}}(\ \textcolor{keyword}{const}\ InputType\ \&\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ \mbox{\hyperlink{structharness__graph__multifunction__executor_aba4d89577f59d4cc5f485aabde3b494e}{ports\_type}}\ \&\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ \{}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ RW::scoped\_lock\ l(\ \mbox{\hyperlink{structharness__graph__multifunction__executor_1_1mutex__holder_aca3a26701e1eae9804b2afe5d1272677}{harness\_graph\_multifunction\_executor::mutex\_holder<RW>::mutex}},\ \textcolor{comment}{/*write=*/}\textcolor{keyword}{false}\ );}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__graph__multifunction__executor_1_1tfunctor_a782e9a8550d0e7fa8d48e90ccfdcc758}{my\_execute\_count}}.fetch\_and\_increment();}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__graph__multifunction__executor_a4e901a06738818182fb95f23a2e51be1}{harness\_graph\_multifunction\_executor::func}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}});}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00235\ \ \ \ \ \};}
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structharness__graph__multifunction__executor_1_1tfunctor}{tfunctor<tbb::null\_rw\_mutex>}}\ \mbox{\hyperlink{structharness__graph__multifunction__executor_a1767461c4605f17b8f8d5e0a92fd2262}{functor}};}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \};}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ \textcolor{comment}{//\ static\ vars\ for\ function\_node\ tests}}
\DoxyCodeLine{00241\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ InputType,\ \textcolor{keyword}{typename}\ OutputType\ >}
\DoxyCodeLine{00242\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ RW\ >}
\DoxyCodeLine{00243\ RW\ \mbox{\hyperlink{structharness__graph__executor_1_1mutex__holder}{harness\_graph\_executor<InputType,\ OutputType>::mutex\_holder}}<RW>\mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{::mutex}};}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ InputType,\ \textcolor{keyword}{typename}\ OutputType\ >}
\DoxyCodeLine{00246\ tbb::atomic<size\_t>\ \mbox{\hyperlink{structharness__graph__executor_af0fcd730c0d370ab88a104cc709273b4}{harness\_graph\_executor<InputType,\ OutputType>::execute\_count}};}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ InputType,\ \textcolor{keyword}{typename}\ OutputType\ >}
\DoxyCodeLine{00249\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structharness__graph__executor_a44175ee5eae11c2d42fbe0169c12b944}{harness\_graph\_executor<InputType,\ OutputType>::function\_ptr\_type}}\ \mbox{\hyperlink{structharness__graph__executor_a49a94fae5e235c370737cc790565d5c3}{harness\_graph\_executor<InputType,\ OutputType>::fptr}}}
\DoxyCodeLine{00250\ \ \ \ \ =\ \mbox{\hyperlink{structharness__graph__default__functor_a2d4d81137b4a567a664f930204c601c7}{harness\_graph\_default\_functor<\ InputType,\ OutputType\ >::construct}};}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ InputType,\ \textcolor{keyword}{typename}\ OutputType\ >}
\DoxyCodeLine{00253\ tbb::atomic<size\_t>\ \mbox{\hyperlink{structharness__graph__executor_a079e78a85c527f4ec5e136b872d0b7cf}{harness\_graph\_executor<InputType,\ OutputType>::current\_executors}};}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ InputType,\ \textcolor{keyword}{typename}\ OutputType\ >}
\DoxyCodeLine{00256\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structharness__graph__executor_a00aa3dfb696a62986d26c143383fad94}{harness\_graph\_executor<InputType,\ OutputType>::max\_executors}}\ =\ 0;}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \textcolor{comment}{//\ static\ vars\ for\ multifunction\_node\ tests}}
\DoxyCodeLine{00259\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ InputType,\ \textcolor{keyword}{typename}\ OutputTuple\ >}
\DoxyCodeLine{00260\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ RW\ >}
\DoxyCodeLine{00261\ RW\ \mbox{\hyperlink{structharness__graph__multifunction__executor_1_1mutex__holder}{harness\_graph\_multifunction\_executor<InputType,\ OutputTuple>::mutex\_holder}}<RW>\mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{::mutex}};}
\DoxyCodeLine{00262\ }
\DoxyCodeLine{00263\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ InputType,\ \textcolor{keyword}{typename}\ OutputTuple\ >}
\DoxyCodeLine{00264\ tbb::atomic<size\_t>\ \mbox{\hyperlink{structharness__graph__multifunction__executor_a5da1b8a1dfcbc7e15ff10c4aca110828}{harness\_graph\_multifunction\_executor<InputType,\ OutputTuple>::execute\_count}};}
\DoxyCodeLine{00265\ }
\DoxyCodeLine{00266\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ InputType,\ \textcolor{keyword}{typename}\ OutputTuple\ >}
\DoxyCodeLine{00267\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structharness__graph__multifunction__executor_a8a8b20c5f99325e51e8c28b0e960c3b7}{harness\_graph\_multifunction\_executor<InputType,\ OutputTuple>::mfunction\_ptr\_type}}\ \mbox{\hyperlink{structharness__graph__multifunction__executor_a50e8ef245658135ef4fe8167fe614b99}{harness\_graph\_multifunction\_executor<InputType,\ OutputTuple>::fptr}}}
\DoxyCodeLine{00268\ \ \ \ \ =\ \mbox{\hyperlink{structharness__graph__default__multifunction__functor_a06b35ccc3bcb19ccbedcb3096fbd8b9e}{harness\_graph\_default\_multifunction\_functor<\ InputType,\ OutputTuple\ >::construct}};}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ InputType,\ \textcolor{keyword}{typename}\ OutputTuple\ >}
\DoxyCodeLine{00271\ tbb::atomic<size\_t>\ \mbox{\hyperlink{structharness__graph__multifunction__executor_a7907a02a9709c467a5d23f763c94f751}{harness\_graph\_multifunction\_executor<InputType,\ OutputTuple>::current\_executors}};}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00273\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ InputType,\ \textcolor{keyword}{typename}\ OutputTuple\ >}
\DoxyCodeLine{00274\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structharness__graph__multifunction__executor_a23040aed77c5344015af3e7432b68fed}{harness\_graph\_multifunction\_executor<InputType,\ OutputTuple>::max\_executors}}\ =\ 0;}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00277\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ T\ >}
\DoxyCodeLine{00278\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structharness__counting__receiver_ab6dbf512c62d2f9a48fceb3f8cb1953b}{harness\_counting\_receiver}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classtbb_1_1flow_1_1interface11_1_1receiver}{tbb::flow::receiver}}<T>,\ \mbox{\hyperlink{class_no_assign_acb5f52ed820065725301a8152ccc2eb3}{NoAssign}}\ \{}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \ \ \ \ tbb::atomic<\ size\_t\ >\ \mbox{\hyperlink{structharness__counting__receiver_aeaa4eb5eb283464012ef33d88ba8cb90}{my\_count}};}
\DoxyCodeLine{00281\ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{structharness__counting__receiver_ab51cf44f7d0ad3547070ee4445ea3691}{max\_value}};}
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structharness__counting__receiver_ab94707bbd76e04d1d9fab79bc12bfebc}{num\_copies}};}
\DoxyCodeLine{00283\ \ \ \ \ tbb::flow::graph\&\ \mbox{\hyperlink{structharness__counting__receiver_ae0cfb8ed28e11b2b2a0d17b22db9eaca}{my\_graph}};}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \ \ \ \ \mbox{\hyperlink{structharness__counting__receiver_ab6dbf512c62d2f9a48fceb3f8cb1953b}{harness\_counting\_receiver}}(tbb::flow::graph\&\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}})\ :\ \mbox{\hyperlink{structharness__counting__receiver_ab94707bbd76e04d1d9fab79bc12bfebc}{num\_copies}}(1),\ \mbox{\hyperlink{structharness__counting__receiver_ae0cfb8ed28e11b2b2a0d17b22db9eaca}{my\_graph}}(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}})\ \{}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__counting__receiver_aeaa4eb5eb283464012ef33d88ba8cb90}{my\_count}}\ =\ 0;}
\DoxyCodeLine{00287\ \ \ \ \ \}}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00289\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structharness__counting__receiver_a4b4445d7ebd58afa2c1137fcd3e9956c}{initialize\_map}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}\ )\ \{}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__counting__receiver_aeaa4eb5eb283464012ef33d88ba8cb90}{my\_count}}\ =\ 0;}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__counting__receiver_ab51cf44f7d0ad3547070ee4445ea3691}{max\_value}}\ =\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}};}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__counting__receiver_ab94707bbd76e04d1d9fab79bc12bfebc}{num\_copies}}\ =\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}};}
\DoxyCodeLine{00293\ \ \ \ \ \}}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00295\ \ \ \ \ tbb::flow::graph\&\ \mbox{\hyperlink{structharness__counting__receiver_ab19ce2bcf6a7fc0c4d5c38638f9c514e}{graph\_reference}}()\ const\ \_\_TBB\_override\ \{}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structharness__counting__receiver_ae0cfb8ed28e11b2b2a0d17b22db9eaca}{my\_graph}};}
\DoxyCodeLine{00297\ \ \ \ \ \}}
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00299\ \ \ \ \ tbb::task\ *\mbox{\hyperlink{structharness__counting__receiver_a8cdf3e7bebb1ed01acab211bd261bb82}{try\_put\_task}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\ )\ \_\_TBB\_override\ \{}
\DoxyCodeLine{00300\ \ \ \ \ \ \ ++\mbox{\hyperlink{structharness__counting__receiver_aeaa4eb5eb283464012ef33d88ba8cb90}{my\_count}};}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{const\_cast<}tbb::task\ *\textcolor{keyword}{>}(\mbox{\hyperlink{harness__graph_8h_a7f0430b0f8c67715b53b4e1bfedadc00}{SUCCESSFULLY\_ENQUEUED}});}
\DoxyCodeLine{00302\ \ \ \ \ \}}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00304\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structharness__counting__receiver_a1bc999345ca09e3e5bce023a3a2d325e}{validate}}()\ \{}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ =\ \mbox{\hyperlink{structharness__counting__receiver_aeaa4eb5eb283464012ef33d88ba8cb90}{my\_count}};}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ ==\ \mbox{\hyperlink{structharness__counting__receiver_ab94707bbd76e04d1d9fab79bc12bfebc}{num\_copies}}*\mbox{\hyperlink{structharness__counting__receiver_ab51cf44f7d0ad3547070ee4445ea3691}{max\_value}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00307\ \ \ \ \ \}}
\DoxyCodeLine{00308\ }
\DoxyCodeLine{00309\ \textcolor{preprocessor}{\#if\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION}}
\DoxyCodeLine{00310\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classtbb_1_1flow_1_1interface11_1_1receiver}{tbb::flow::receiver<T>::built\_predecessors\_type}}\ built\_predecessors\_type;}
\DoxyCodeLine{00311\ \ \ \ \ built\_predecessors\_type\ mbp;}
\DoxyCodeLine{00312\ \ \ \ \ built\_predecessors\_type\ \&built\_predecessors()\ \_\_TBB\_override\ \{\ \textcolor{keywordflow}{return}\ mbp;\ \}}
\DoxyCodeLine{00313\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ tbb::flow::receiver<T>::predecessor\_list\_type\ predecessor\_list\_type;}
\DoxyCodeLine{00314\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classtbb_1_1flow_1_1receiver_a6dbeaeebd0208170958667345b2bfed1}{tbb::flow::receiver<T>::predecessor\_type}}\ \mbox{\hyperlink{classtbb_1_1flow_1_1interface11_1_1receiver_a6dbeaeebd0208170958667345b2bfed1}{predecessor\_type}};}
\DoxyCodeLine{00315\ \ \ \ \ \textcolor{keywordtype}{void}\ internal\_add\_built\_predecessor(\mbox{\hyperlink{classtbb_1_1flow_1_1interface11_1_1receiver_a6dbeaeebd0208170958667345b2bfed1}{predecessor\_type}}\ \&)\ \_\_TBB\_override\ \{\}}
\DoxyCodeLine{00316\ \ \ \ \ \textcolor{keywordtype}{void}\ internal\_delete\_built\_predecessor(\mbox{\hyperlink{classtbb_1_1flow_1_1interface11_1_1receiver_a6dbeaeebd0208170958667345b2bfed1}{predecessor\_type}}\ \&)\ \_\_TBB\_override\ \{\}}
\DoxyCodeLine{00317\ \ \ \ \ \textcolor{keywordtype}{void}\ copy\_predecessors(predecessor\_list\_type\ \&)\ \_\_TBB\_override\ \{\ \}}
\DoxyCodeLine{00318\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ predecessor\_count()\ \_\_TBB\_override\ \{\ \textcolor{keywordflow}{return}\ 0;\ \}}
\DoxyCodeLine{00319\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00320\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structharness__counting__receiver_a2543ecfe34b6bca88cdc9612c09f0704}{reset\_receiver}}(tbb::flow::reset\_flags\ \textcolor{comment}{/*f*/})\ \_\_TBB\_override\ \{\ \mbox{\hyperlink{structharness__counting__receiver_aeaa4eb5eb283464012ef33d88ba8cb90}{my\_count}}\ =\ 0;\ \}}
\DoxyCodeLine{00321\ \};}
\DoxyCodeLine{00322\ }
\DoxyCodeLine{00324\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ T\ >}
\DoxyCodeLine{00325\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structharness__mapped__receiver_a5912486a9dfc561b26c482ffce93177e}{harness\_mapped\_receiver}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classtbb_1_1flow_1_1interface11_1_1receiver}{tbb::flow::receiver}}<T>,\ \mbox{\hyperlink{class_no_copy_a495bdeffea1eda9d33e338e5b5cd2313}{NoCopy}}\ \{}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00327\ \ \ \ \ tbb::atomic<\ size\_t\ >\ \mbox{\hyperlink{structharness__mapped__receiver_a635b2b62fa469c6d3f0e985b49d2daab}{my\_count}};}
\DoxyCodeLine{00328\ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{structharness__mapped__receiver_a2b70063e4d0dbf671f7b2caa1406a305}{max\_value}};}
\DoxyCodeLine{00329\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structharness__mapped__receiver_ac13c6ae19702298159c11df7041a9de0}{num\_copies}};}
\DoxyCodeLine{00330\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classtbb_1_1interface5_1_1concurrent__unordered__map}{tbb::concurrent\_unordered\_map<\ T,\ tbb::atomic<\ size\_t\ >}}\ >\ \mbox{\hyperlink{structharness__mapped__receiver_af7581a6f98d140b4d704e857f3993aa1}{map\_type}};}
\DoxyCodeLine{00331\ \ \ \ \ \mbox{\hyperlink{structharness__mapped__receiver_af7581a6f98d140b4d704e857f3993aa1}{map\_type}}\ *\mbox{\hyperlink{structharness__mapped__receiver_a06317e3c8de4ff6b01f975c8f2573f0e}{my\_map}};}
\DoxyCodeLine{00332\ \ \ \ \ tbb::flow::graph\&\ \mbox{\hyperlink{structharness__mapped__receiver_aa93dd99e273eaec6c93078a9d8b6537f}{my\_graph}};}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00334\ \ \ \ \ \mbox{\hyperlink{structharness__mapped__receiver_a5912486a9dfc561b26c482ffce93177e}{harness\_mapped\_receiver}}(tbb::flow::graph\&\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}})\ :\ \mbox{\hyperlink{structharness__mapped__receiver_a06317e3c8de4ff6b01f975c8f2573f0e}{my\_map}}(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}),\ \mbox{\hyperlink{structharness__mapped__receiver_aa93dd99e273eaec6c93078a9d8b6537f}{my\_graph}}(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}})\ \{}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__mapped__receiver_a635b2b62fa469c6d3f0e985b49d2daab}{my\_count}}\ =\ 0;}
\DoxyCodeLine{00336\ \ \ \ \ \}}
\DoxyCodeLine{00337\ }
\DoxyCodeLine{00338\ \ \ \ \ \mbox{\hyperlink{structharness__mapped__receiver_a19bba16baa1eccf10b2b43072b1333bd}{\string~harness\_mapped\_receiver}}()\ \{}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{structharness__mapped__receiver_a06317e3c8de4ff6b01f975c8f2573f0e}{my\_map}}\ )\ \textcolor{keyword}{delete}\ \mbox{\hyperlink{structharness__mapped__receiver_a06317e3c8de4ff6b01f975c8f2573f0e}{my\_map}};}
\DoxyCodeLine{00340\ \ \ \ \ \}}
\DoxyCodeLine{00341\ }
\DoxyCodeLine{00342\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structharness__mapped__receiver_a2a9cf0be0b8460ab0c170caab114408d}{initialize\_map}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}\ )\ \{}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__mapped__receiver_a635b2b62fa469c6d3f0e985b49d2daab}{my\_count}}\ =\ 0;}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__mapped__receiver_a2b70063e4d0dbf671f7b2caa1406a305}{max\_value}}\ =\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}};}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__mapped__receiver_ac13c6ae19702298159c11df7041a9de0}{num\_copies}}\ =\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}};}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{structharness__mapped__receiver_a06317e3c8de4ff6b01f975c8f2573f0e}{my\_map}}\ )\ \textcolor{keyword}{delete}\ \mbox{\hyperlink{structharness__mapped__receiver_a06317e3c8de4ff6b01f975c8f2573f0e}{my\_map}};}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__mapped__receiver_a06317e3c8de4ff6b01f975c8f2573f0e}{my\_map}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{structharness__mapped__receiver_af7581a6f98d140b4d704e857f3993aa1}{map\_type}};}
\DoxyCodeLine{00348\ \ \ \ \ \}}
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00350\ \ \ \ \ tbb::task\ *\ \mbox{\hyperlink{structharness__mapped__receiver_aff8c4ca09f89b78000ec3da587baa84a}{try\_put\_task}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ \_\_TBB\_override\ \{}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{structharness__mapped__receiver_a06317e3c8de4ff6b01f975c8f2573f0e}{my\_map}}\ )\ \{}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ tbb::atomic<size\_t>\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}};}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ =\ 1;}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ std::pair<\ typename\ map\_type::iterator,\ bool\ >\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ \ (*my\_map).insert(\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classtbb_1_1interface5_1_1concurrent__unordered__map_a9260034417dde6b3810347c5e347a9f8}{map\_type::value\_type}}(\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}},\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ )\ );}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.second\ ==\ \textcolor{keyword}{false}\ )\ \{}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.first-\/>second.fetch\_and\_increment();}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ <\ \mbox{\hyperlink{structharness__mapped__receiver_ac13c6ae19702298159c11df7041a9de0}{num\_copies}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{structharness__mapped__receiver_a635b2b62fa469c6d3f0e985b49d2daab}{my\_count}};}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{const\_cast<}tbb::task\ *\textcolor{keyword}{>}(\mbox{\hyperlink{harness__graph_8h_a7f0430b0f8c67715b53b4e1bfedadc00}{SUCCESSFULLY\_ENQUEUED}});}
\DoxyCodeLine{00363\ \ \ \ \ \}}
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00365\ \ \ \ \ tbb::flow::graph\&\ \mbox{\hyperlink{structharness__mapped__receiver_ae0bf15647a8dad9b856b2662d4284648}{graph\_reference}}()\ const\ \_\_TBB\_override\ \{}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structharness__mapped__receiver_aa93dd99e273eaec6c93078a9d8b6537f}{my\_graph}};}
\DoxyCodeLine{00367\ \ \ \ \ \}}
\DoxyCodeLine{00368\ }
\DoxyCodeLine{00369\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structharness__mapped__receiver_ab968af1265fa735944c23ef33f937580}{validate}}()\ \{}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{structharness__mapped__receiver_a06317e3c8de4ff6b01f975c8f2573f0e}{my\_map}}\ )\ \{}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ (size\_t)\mbox{\hyperlink{structharness__mapped__receiver_a2b70063e4d0dbf671f7b2caa1406a305}{max\_value}};\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ )\ \{}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ =\ (*my\_map)[(\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}})\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}];}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ ==\ \mbox{\hyperlink{structharness__mapped__receiver_ac13c6ae19702298159c11df7041a9de0}{num\_copies}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ =\ \mbox{\hyperlink{structharness__mapped__receiver_a635b2b62fa469c6d3f0e985b49d2daab}{my\_count}};}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ ==\ \mbox{\hyperlink{structharness__mapped__receiver_ac13c6ae19702298159c11df7041a9de0}{num\_copies}}*\mbox{\hyperlink{structharness__mapped__receiver_a2b70063e4d0dbf671f7b2caa1406a305}{max\_value}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00379\ \ \ \ \ \}}
\DoxyCodeLine{00380\ \textcolor{preprocessor}{\#if\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION}}
\DoxyCodeLine{00381\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classtbb_1_1flow_1_1interface11_1_1receiver}{tbb::flow::receiver<T>::built\_predecessors\_type}}\ built\_predecessors\_type;}
\DoxyCodeLine{00382\ \ \ \ \ built\_predecessors\_type\ mbp;}
\DoxyCodeLine{00383\ \ \ \ \ built\_predecessors\_type\ \&built\_predecessors()\ \_\_TBB\_override\ \{\ \textcolor{keywordflow}{return}\ mbp;\ \}}
\DoxyCodeLine{00384\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ tbb::flow::receiver<T>::predecessor\_list\_type\ predecessor\_list\_type;}
\DoxyCodeLine{00385\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classtbb_1_1flow_1_1receiver_a6dbeaeebd0208170958667345b2bfed1}{tbb::flow::receiver<T>::predecessor\_type}}\ \mbox{\hyperlink{classtbb_1_1flow_1_1interface11_1_1receiver_a6dbeaeebd0208170958667345b2bfed1}{predecessor\_type}};}
\DoxyCodeLine{00386\ \ \ \ \ \textcolor{keywordtype}{void}\ internal\_add\_built\_predecessor(\mbox{\hyperlink{classtbb_1_1flow_1_1interface11_1_1receiver_a6dbeaeebd0208170958667345b2bfed1}{predecessor\_type}}\ \&)\ \_\_TBB\_override\ \{\}}
\DoxyCodeLine{00387\ \ \ \ \ \textcolor{keywordtype}{void}\ internal\_delete\_built\_predecessor(\mbox{\hyperlink{classtbb_1_1flow_1_1interface11_1_1receiver_a6dbeaeebd0208170958667345b2bfed1}{predecessor\_type}}\ \&)\ \_\_TBB\_override\ \{\}}
\DoxyCodeLine{00388\ \ \ \ \ \textcolor{keywordtype}{void}\ copy\_predecessors(predecessor\_list\_type\ \&)\ \_\_TBB\_override\ \{\ \}}
\DoxyCodeLine{00389\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ predecessor\_count()\ \_\_TBB\_override\ \{\ \textcolor{keywordflow}{return}\ 0;\ \}}
\DoxyCodeLine{00390\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00391\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structharness__mapped__receiver_a25beb5f335031762d6bdf7aa2c3eac44}{reset\_receiver}}(tbb::flow::reset\_flags\ \textcolor{comment}{/*f*/})\ \_\_TBB\_override\ \{}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__mapped__receiver_a635b2b62fa469c6d3f0e985b49d2daab}{my\_count}}\ =\ 0;}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{structharness__mapped__receiver_a06317e3c8de4ff6b01f975c8f2573f0e}{my\_map}})\ \textcolor{keyword}{delete}\ \mbox{\hyperlink{structharness__mapped__receiver_a06317e3c8de4ff6b01f975c8f2573f0e}{my\_map}};}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__mapped__receiver_a06317e3c8de4ff6b01f975c8f2573f0e}{my\_map}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{structharness__mapped__receiver_af7581a6f98d140b4d704e857f3993aa1}{map\_type}};}
\DoxyCodeLine{00395\ \ \ \ \ \}}
\DoxyCodeLine{00396\ }
\DoxyCodeLine{00397\ \};}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00400\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ T\ >}
\DoxyCodeLine{00401\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structharness__counting__sender_aaa0749890bf88a0b2f8f6ed05c7a02a3}{harness\_counting\_sender}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classtbb_1_1flow_1_1interface11_1_1sender}{tbb::flow::sender}}<T>,\ \mbox{\hyperlink{class_no_copy_a495bdeffea1eda9d33e338e5b5cd2313}{NoCopy}}\ \{}
\DoxyCodeLine{00402\ }
\DoxyCodeLine{00403\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classtbb_1_1flow_1_1sender_a23e26315b54a31eed085ff92bd414056}{tbb::flow::sender<T>::successor\_type}}\ \mbox{\hyperlink{structharness__counting__sender_ad4621407f5bcc46d46a4b427cb94d137}{successor\_type}};}
\DoxyCodeLine{00404\ \ \ \ \ tbb::atomic<\ successor\_type\ *\ >\ \mbox{\hyperlink{structharness__counting__sender_a3675486ad2d706e8a94c544f343bf2bc}{my\_receiver}};}
\DoxyCodeLine{00405\ \ \ \ \ tbb::atomic<\ size\_t\ >\ \mbox{\hyperlink{structharness__counting__sender_ab56684e3e1651d590d3f80df141b86c0}{my\_count}};}
\DoxyCodeLine{00406\ \ \ \ \ tbb::atomic<\ size\_t\ >\ \mbox{\hyperlink{structharness__counting__sender_a11384c3161f511b23e4680801a9733e0}{my\_received}};}
\DoxyCodeLine{00407\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structharness__counting__sender_a44005b4fd5333d2dfee7bba98c153855}{my\_limit}};}
\DoxyCodeLine{00408\ }
\DoxyCodeLine{00409\ \ \ \ \ \mbox{\hyperlink{structharness__counting__sender_aaa0749890bf88a0b2f8f6ed05c7a02a3}{harness\_counting\_sender}}(\ )\ :\ \mbox{\hyperlink{structharness__counting__sender_a44005b4fd5333d2dfee7bba98c153855}{my\_limit}}(\string~size\_t(0))\ \{}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__counting__sender_a3675486ad2d706e8a94c544f343bf2bc}{my\_receiver}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__counting__sender_ab56684e3e1651d590d3f80df141b86c0}{my\_count}}\ =\ 0;}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__counting__sender_a11384c3161f511b23e4680801a9733e0}{my\_received}}\ =\ 0;}
\DoxyCodeLine{00413\ \ \ \ \ \}}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00415\ \ \ \ \ \mbox{\hyperlink{structharness__counting__sender_a81ed0e41dd400629cfe35b195d24a1dc}{harness\_counting\_sender}}(\ \textcolor{keywordtype}{size\_t}\ limit\ )\ :\ \mbox{\hyperlink{structharness__counting__sender_a44005b4fd5333d2dfee7bba98c153855}{my\_limit}}(limit)\ \{}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__counting__sender_a3675486ad2d706e8a94c544f343bf2bc}{my\_receiver}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__counting__sender_ab56684e3e1651d590d3f80df141b86c0}{my\_count}}\ =\ 0;}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__counting__sender_a11384c3161f511b23e4680801a9733e0}{my\_received}}\ =\ 0;}
\DoxyCodeLine{00419\ \ \ \ \ \}}
\DoxyCodeLine{00420\ }
\DoxyCodeLine{00421\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structharness__counting__sender_adf6434216f47a674f0cd157baa221b38}{register\_successor}}(\ \mbox{\hyperlink{structharness__counting__sender_ad4621407f5bcc46d46a4b427cb94d137}{successor\_type}}\ \&\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ )\ \_\_TBB\_override\ \{}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__counting__sender_a3675486ad2d706e8a94c544f343bf2bc}{my\_receiver}}\ =\ \&\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}};}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00424\ \ \ \ \ \}}
\DoxyCodeLine{00425\ }
\DoxyCodeLine{00426\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structharness__counting__sender_ae6bde1df2f5bcf13bc42bbaab48cdec1}{remove\_successor}}(\ \mbox{\hyperlink{structharness__counting__sender_ad4621407f5bcc46d46a4b427cb94d137}{successor\_type}}\ \&\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ )\ \_\_TBB\_override\ \{}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__counting__sender_ad4621407f5bcc46d46a4b427cb94d137}{successor\_type}}\ *\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \mbox{\hyperlink{structharness__counting__sender_a3675486ad2d706e8a94c544f343bf2bc}{my\_receiver}}.fetch\_and\_store(\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ ==\ \&\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00430\ \ \ \ \ \}}
\DoxyCodeLine{00431\ }
\DoxyCodeLine{00432\ \textcolor{preprocessor}{\#if\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION}}
\DoxyCodeLine{00433\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classtbb_1_1flow_1_1interface11_1_1sender}{tbb::flow::sender<T>::successor\_list\_type}}\ successor\_list\_type;}
\DoxyCodeLine{00434\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classtbb_1_1flow_1_1interface11_1_1sender}{tbb::flow::sender<T>::built\_successors\_type}}\ built\_successors\_type;}
\DoxyCodeLine{00435\ \ \ \ \ built\_successors\_type\ bst;}
\DoxyCodeLine{00436\ \ \ \ \ built\_successors\_type\ \&built\_successors()\ \_\_TBB\_override\ \{\ \textcolor{keywordflow}{return}\ bst;\ \}}
\DoxyCodeLine{00437\ \ \ \ \ \textcolor{keywordtype}{void}\ internal\_add\_built\_successor(\ \mbox{\hyperlink{structharness__counting__sender_ad4621407f5bcc46d46a4b427cb94d137}{successor\_type}}\ \&)\ \_\_TBB\_override\ \{\}}
\DoxyCodeLine{00438\ \ \ \ \ \textcolor{keywordtype}{void}\ internal\_delete\_built\_successor(\ \mbox{\hyperlink{structharness__counting__sender_ad4621407f5bcc46d46a4b427cb94d137}{successor\_type}}\ \&)\ \_\_TBB\_override\ \{\}}
\DoxyCodeLine{00439\ \ \ \ \ \textcolor{keywordtype}{void}\ copy\_successors(successor\_list\_type\ \&)\ \_\_TBB\_override\ \{\ \}}
\DoxyCodeLine{00440\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ successor\_count()\ \_\_TBB\_override\ \{\ \textcolor{keywordflow}{return}\ 0;\ \}}
\DoxyCodeLine{00441\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00442\ }
\DoxyCodeLine{00443\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structharness__counting__sender_adede6b55fd33d3325de7b51932f20131}{try\_get}}(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ )\ \_\_TBB\_override\ \{}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ \mbox{\hyperlink{structharness__counting__sender_ab56684e3e1651d590d3f80df141b86c0}{my\_count}}.fetch\_and\_increment();}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ \mbox{\hyperlink{structharness__counting__sender_a44005b4fd5333d2dfee7bba98c153855}{my\_limit}}\ )\ \{}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ );}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{structharness__counting__sender_a11384c3161f511b23e4680801a9733e0}{my\_received}};}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00452\ \ \ \ \ \}}
\DoxyCodeLine{00453\ }
\DoxyCodeLine{00454\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structharness__counting__sender_afac56be0e014c8276714f61840a22ac0}{try\_put\_once}}()\ \{}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__counting__sender_ad4621407f5bcc46d46a4b427cb94d137}{successor\_type}}\ *\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \mbox{\hyperlink{structharness__counting__sender_a3675486ad2d706e8a94c544f343bf2bc}{my\_receiver}};}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ \mbox{\hyperlink{structharness__counting__sender_ab56684e3e1651d590d3f80df141b86c0}{my\_count}}.fetch\_and\_increment();}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>try\_put(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ )\ )\ \{}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{structharness__counting__sender_a11384c3161f511b23e4680801a9733e0}{my\_received}};}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00463\ \ \ \ \ \}}
\DoxyCodeLine{00464\ }
\DoxyCodeLine{00465\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structharness__counting__sender_afa17253c96f035c450d33281c4e8fc66}{try\_put\_until\_false}}()\ \{}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__counting__sender_ad4621407f5bcc46d46a4b427cb94d137}{successor\_type}}\ *\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \mbox{\hyperlink{structharness__counting__sender_a3675486ad2d706e8a94c544f343bf2bc}{my\_receiver}};}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ \mbox{\hyperlink{structharness__counting__sender_ab56684e3e1651d590d3f80df141b86c0}{my\_count}}.fetch\_and\_increment();}
\DoxyCodeLine{00468\ }
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>try\_put(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ )\ )\ \{}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{structharness__counting__sender_a11384c3161f511b23e4680801a9733e0}{my\_received}};}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ \mbox{\hyperlink{structharness__counting__sender_ab56684e3e1651d590d3f80df141b86c0}{my\_count}}.fetch\_and\_increment();}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00473\ \ \ \ \ \}}
\DoxyCodeLine{00474\ }
\DoxyCodeLine{00475\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structharness__counting__sender_a9e9a671123c7d8156b9634ae4ba04e54}{try\_put\_until\_limit}}()\ \{}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structharness__counting__sender_ad4621407f5bcc46d46a4b427cb94d137}{successor\_type}}\ *\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \mbox{\hyperlink{structharness__counting__sender_a3675486ad2d706e8a94c544f343bf2bc}{my\_receiver}};}
\DoxyCodeLine{00477\ }
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ (\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}})\mbox{\hyperlink{structharness__counting__sender_a44005b4fd5333d2dfee7bba98c153855}{my\_limit}};\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ )\ \{}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>try\_put(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ ),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{structharness__counting__sender_a11384c3161f511b23e4680801a9733e0}{my\_received}};}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{structharness__counting__sender_a11384c3161f511b23e4680801a9733e0}{my\_received}}\ ==\ \mbox{\hyperlink{structharness__counting__sender_a44005b4fd5333d2dfee7bba98c153855}{my\_limit}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00483\ \ \ \ \ \}}
\DoxyCodeLine{00484\ }
\DoxyCodeLine{00485\ \};}
\DoxyCodeLine{00486\ }
\DoxyCodeLine{00487\ \textcolor{comment}{//\ test\ for\ resets\ of\ buffer-\/type\ nodes.}}
\DoxyCodeLine{00488\ tbb::atomic<int>\ \mbox{\hyperlink{harness__graph_8h_a3f08fd7f09226fb95375878c6193019f}{serial\_fn\_state0}};}
\DoxyCodeLine{00489\ tbb::atomic<int>\ \mbox{\hyperlink{harness__graph_8h_a096e4bb1de1159387fb2f271d6c96c09}{serial\_fn\_state1}};}
\DoxyCodeLine{00490\ tbb::atomic<int>\ \mbox{\hyperlink{harness__graph_8h_a5c9d50c5d28be121ab7d80ff5aa5c1f3}{serial\_continue\_state0}};}
\DoxyCodeLine{00491\ }
\DoxyCodeLine{00492\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00493\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structserial__fn__body_a8075578b94eea06e80b99341792c30de}{serial\_fn\_body}}\ \{}
\DoxyCodeLine{00494\ \ \ \ \ tbb::atomic<int>\ *\mbox{\hyperlink{structserial__fn__body_a36c7843424d4a351cb536cad8a7ac2b6}{\_flag}};}
\DoxyCodeLine{00495\ \ \ \ \ \mbox{\hyperlink{structserial__fn__body_a8075578b94eea06e80b99341792c30de}{serial\_fn\_body}}(tbb::atomic<int>\ \&myatomic)\ :\ \mbox{\hyperlink{structserial__fn__body_a36c7843424d4a351cb536cad8a7ac2b6}{\_flag}}(\&myatomic)\ \{\ \}}
\DoxyCodeLine{00496\ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{structserial__fn__body_aca95c7145ebb7382ef13521c1b3b6bd3}{operator()}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ in)\ \{}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(*\mbox{\hyperlink{structserial__fn__body_a36c7843424d4a351cb536cad8a7ac2b6}{\_flag}}\ ==\ 0)\ \{}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \ \ \ \ *\mbox{\hyperlink{structserial__fn__body_a36c7843424d4a351cb536cad8a7ac2b6}{\_flag}}\ =\ 1;}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ wait\ until\ we\ are\ released}}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \ \ \ \ tbb::internal::atomic\_backoff\ backoff;}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ backoff.pause();}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}(*\mbox{\hyperlink{structserial__fn__body_a36c7843424d4a351cb536cad8a7ac2b6}{\_flag}}\ ==\ 1);}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ return\ value}}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ in;}
\DoxyCodeLine{00507\ \ \ \ \ \}}
\DoxyCodeLine{00508\ \};}
\DoxyCodeLine{00509\ }
\DoxyCodeLine{00510\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00511\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structserial__continue__body_a5c16c3cb4e30318455f72bdca904e31d}{serial\_continue\_body}}\ \{}
\DoxyCodeLine{00512\ \ \ \ \ tbb::atomic<int>\ *\mbox{\hyperlink{structserial__continue__body_a80bb65a698fa043c20e2f77d0fe9a041}{\_flag}};}
\DoxyCodeLine{00513\ \ \ \ \ \mbox{\hyperlink{structserial__continue__body_a5c16c3cb4e30318455f72bdca904e31d}{serial\_continue\_body}}(tbb::atomic<int>\ \&myatomic)\ :\ \mbox{\hyperlink{structserial__continue__body_a80bb65a698fa043c20e2f77d0fe9a041}{\_flag}}(\&myatomic)\ \{\}}
\DoxyCodeLine{00514\ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{structserial__continue__body_a70083712f1f3564f9d16bcda8d10c6de}{operator()}}(\textcolor{keyword}{const}\ tbb::flow::continue\_msg\&\ \textcolor{comment}{/*in*/})\ \{}
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ signal\ we\ have\ received\ a\ value}}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ *\mbox{\hyperlink{structserial__continue__body_a80bb65a698fa043c20e2f77d0fe9a041}{\_flag}}\ =\ 1;}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ wait\ until\ we\ are\ released}}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ tbb::internal::atomic\_backoff\ backoff;}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \ \ \ \ backoff.pause();}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}(*\mbox{\hyperlink{structserial__continue__body_a80bb65a698fa043c20e2f77d0fe9a041}{\_flag}}\ ==\ 1);}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ return\ value}}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}})1;}
\DoxyCodeLine{00524\ \ \ \ \ \}}
\DoxyCodeLine{00525\ \};}
\DoxyCodeLine{00526\ }
\DoxyCodeLine{00527\ \textcolor{preprocessor}{\#if\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION}}
\DoxyCodeLine{00528\ }
\DoxyCodeLine{00529\ }
\DoxyCodeLine{00530\ \textcolor{comment}{//\ walk\ two\ lists\ via\ iterator,\ match\ elements\ of\ each,\ in\ possibly-\/different\ ordder,\ and}}
\DoxyCodeLine{00531\ \textcolor{comment}{//\ return\ true\ if\ all\ elements\ of\ sv\ appear\ in\ tv.}}
\DoxyCodeLine{00532\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ SV,\ \textcolor{keyword}{typename}\ TV>}
\DoxyCodeLine{00533\ \textcolor{keywordtype}{bool}\ lists\_match(SV\ \&sv,\ \mbox{\hyperlink{bench_geometry_8cpp_ac577f30699af989f6a11455ace567c24a818aafb4e6e34b988f90964cd884b8a2}{TV}}\ \&tv)\ \{}
\DoxyCodeLine{00534\ \ \ \ \ \textcolor{keywordflow}{if}(sv.size()\ !=\ tv.size())\ \{}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00536\ \ \ \ \ \}}
\DoxyCodeLine{00537\ \ \ \ \ std::vector<bool>\ bv(sv.size(),\ \textcolor{keyword}{false});}
\DoxyCodeLine{00538\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{typename}\ TV::iterator\ itv\ =\ tv.begin();\ itv\ !=\ tv.end();\ ++itv)\ \{}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ ibv\ =\ 0;}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{typename}\ SV::iterator\ isv\ =\ sv.begin();\ isv\ !=\ sv.end();\ ++isv)\ \{}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!bv[ibv])\ \{}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(*itv\ ==\ *isv)\ \{}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bv[ibv]\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ found\_it;;}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \ \ \ \ ++ibv;}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00550\ found\_it:}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00552\ \ \ \ \ \}}
\DoxyCodeLine{00553\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00554\ \}}
\DoxyCodeLine{00555\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{/*\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00556\ }
\DoxyCodeLine{00557\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ BufferType>}
\DoxyCodeLine{00558\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{harness__graph_8h_a49f4585591027f99a695d57f03895ab5}{test\_resets}}()\ \{}
\DoxyCodeLine{00559\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ NN\ =\ 3;}
\DoxyCodeLine{00560\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1task__scheduler__init}{tbb::task\_scheduler\_init}}\ \mbox{\hyperlink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init}}(4);}
\DoxyCodeLine{00561\ \ \ \ \ tbb::task\_group\_context\ \ \ tgc;}
\DoxyCodeLine{00562\ \ \ \ \ tbb::flow::graph\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}(tgc);}
\DoxyCodeLine{00563\ \ \ \ \ BufferType\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b0(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}});}
\DoxyCodeLine{00564\ \ \ \ \ tbb::flow::queue\_node<T>\ \ q0(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}});}
\DoxyCodeLine{00565\ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}};}
\DoxyCodeLine{00566\ \ \ \ \ \textcolor{keywordtype}{bool}\ nFound[NN];}
\DoxyCodeLine{00567\ }
\DoxyCodeLine{00568\ \ \ \ \ \textcolor{comment}{//\ reset\ empties\ buffer}}
\DoxyCodeLine{00569\ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ NN;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \ \ b0.try\_put(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ nFound[(\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}})\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00572\ \ \ \ \ \}}
\DoxyCodeLine{00573\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{00574\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.reset();}
\DoxyCodeLine{00575\ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(!b0.try\_get(\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}),\ \textcolor{stringliteral}{"{}reset\ did\ not\ empty\ buffer"{}});}
\DoxyCodeLine{00576\ }
\DoxyCodeLine{00577\ \ \ \ \ \textcolor{comment}{//\ reset\ doesn't\ delete\ edge}}
\DoxyCodeLine{00578\ }
\DoxyCodeLine{00579\ \ \ \ \ tbb::flow::make\_edge(b0,q0);}
\DoxyCodeLine{00580\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.reset();}
\DoxyCodeLine{00581\ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ NN;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ b0.try\_put(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{00583\ \ \ \ \ \}}
\DoxyCodeLine{00584\ }
\DoxyCodeLine{00585\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{00586\ \ \ \ \ \textcolor{keywordflow}{for}(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ NN;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(q0.try\_get(\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}),\ \textcolor{stringliteral}{"{}Missing\ value\ from\ buffer"{}});}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(!nFound[(\textcolor{keywordtype}{int})\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}],\ \textcolor{stringliteral}{"{}Duplicate\ value\ found"{}});}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \ \ nFound[(\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}})\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00590\ \ \ \ \ \}}
\DoxyCodeLine{00591\ }
\DoxyCodeLine{00592\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ ii\ =\ 0;\ ii\ <\ NN;\ ++ii)\ \{}
\DoxyCodeLine{00593\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(nFound[ii],\ \textcolor{stringliteral}{"{}missing\ value"{}});}
\DoxyCodeLine{00594\ \ \ \ \ \}}
\DoxyCodeLine{00595\ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(!q0.try\_get(\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}),\ \textcolor{stringliteral}{"{}Extra\ values\ in\ output"{}});}
\DoxyCodeLine{00596\ }
\DoxyCodeLine{00597\ \ \ \ \ \textcolor{comment}{//\ reset\ reverses\ a\ reversed\ edge.}}
\DoxyCodeLine{00598\ \ \ \ \ \textcolor{comment}{//\ we\ will\ use\ a\ serial\ rejecting\ node\ to\ get\ the\ edge\ to\ reverse.}}
\DoxyCodeLine{00599\ \ \ \ \ tbb::flow::function\_node<T,\ T,\ tbb::flow::rejecting>\ sfn(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ \mbox{\hyperlink{namespacetbb_1_1flow_a7bec4a3445fea3cd5974119730dea98fa76917a07891f92f41cfe7b357e1fa874}{tbb::flow::serial}},\ \mbox{\hyperlink{structserial__fn__body}{serial\_fn\_body<T>}}(\mbox{\hyperlink{harness__graph_8h_a3f08fd7f09226fb95375878c6193019f}{serial\_fn\_state0}}));}
\DoxyCodeLine{00600\ \ \ \ \ tbb::flow::queue\_node<T>\ outq(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}});}
\DoxyCodeLine{00601\ \ \ \ \ tbb::flow::remove\_edge(b0,q0);}
\DoxyCodeLine{00602\ \ \ \ \ tbb::flow::make\_edge(b0,\ sfn);}
\DoxyCodeLine{00603\ \ \ \ \ tbb::flow::make\_edge(sfn,outq);}
\DoxyCodeLine{00604\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();\ \ \textcolor{comment}{//\ wait\ for\ all\ the\ tasks\ started\ by\ building\ the\ graph\ are\ done.}}
\DoxyCodeLine{00605\ \ \ \ \ \mbox{\hyperlink{harness__graph_8h_a3f08fd7f09226fb95375878c6193019f}{serial\_fn\_state0}}\ =\ 0;}
\DoxyCodeLine{00606\ }
\DoxyCodeLine{00607\ \ \ \ \ \textcolor{comment}{//\ b0\ -\/-\/-\/-\/-\/-\/>\ sfn\ -\/-\/-\/-\/-\/-\/>\ outq}}
\DoxyCodeLine{00608\ }
\DoxyCodeLine{00609\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ icnt\ =\ 0;\ icnt\ <\ 2;\ ++icnt)\ \{}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{00611\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__graph_8h_a3f08fd7f09226fb95375878c6193019f}{serial\_fn\_state0}}\ =\ 0;}
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ b0.try\_put((\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}})0);\ \ \textcolor{comment}{//\ will\ start\ sfn}}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ wait\ until\ function\_node\ starts}}
\DoxyCodeLine{00614\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__graph_8h_a96e9ece27a82cead76327fe15278a6db}{BACKOFF\_WAIT}}(\mbox{\hyperlink{harness__graph_8h_a3f08fd7f09226fb95375878c6193019f}{serial\_fn\_state0}}\ ==\ 0,\textcolor{stringliteral}{"{}Timed\ out\ waiting\ for\ function\_node\ to\ start"{}});}
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ now\ the\ function\_node\ is\ executing.}}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ will\ start\ a\ task\ to\ forward\ the\ second\ item}}
\DoxyCodeLine{00617\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ to\ the\ serial\ function\ node}}
\DoxyCodeLine{00618\ \ \ \ \ \ \ \ \ b0.try\_put((\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}})1);\ \ \textcolor{comment}{//\ first\ item\ will\ be\ consumed\ by\ task\ completing\ the\ execution}}
\DoxyCodeLine{00619\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__graph_8h_ae43af7e86526548ca59a72ef40033276}{BACKOFF\_WAIT\_NOASSERT}}(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.root\_task()-\/>ref\_count()\ >=\ 3,\textcolor{stringliteral}{"{}Timed\ out\ waiting\ try\_put\ task\ to\ wind\ down"{}});}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ b0.try\_put((\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}})2);\ \ \textcolor{comment}{//\ second\ item\ will\ remain\ after\ cancellation}}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ now\ wait\ for\ the\ task\ that\ attempts\ to\ forward\ the\ buffer\ item\ to}}
\DoxyCodeLine{00622\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ complete.}}
\DoxyCodeLine{00623\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__graph_8h_ae43af7e86526548ca59a72ef40033276}{BACKOFF\_WAIT\_NOASSERT}}(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.root\_task()-\/>ref\_count()\ >=\ 3,\textcolor{stringliteral}{"{}Timed\ out\ waiting\ for\ tasks\ to\ wind\ down"{}});}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ now\ cancel\ the\ graph.}}
\DoxyCodeLine{00625\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(tgc.cancel\_group\_execution(),\ \textcolor{stringliteral}{"{}task\ group\ already\ cancelled"{}});}
\DoxyCodeLine{00626\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__graph_8h_a3f08fd7f09226fb95375878c6193019f}{serial\_fn\_state0}}\ =\ 0;\ \ \textcolor{comment}{//\ release\ the\ function\_node.}}
\DoxyCodeLine{00627\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();\ \ \textcolor{comment}{//\ wait\ for\ all\ the\ tasks\ to\ complete.}}
\DoxyCodeLine{00628\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ check\ that\ at\ most\ one\ output\ reached\ the\ queue\_node}}
\DoxyCodeLine{00629\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ outt;}
\DoxyCodeLine{00630\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ outt2;}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ got\_item1\ =\ outq.try\_get(outt);}
\DoxyCodeLine{00632\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ got\_item2\ =\ outq.try\_get(outt2);}
\DoxyCodeLine{00633\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ either\ the\ output\ queue\ was\ empty\ (if\ the\ function\_node\ tested\ for\ cancellation\ before\ putting\ the}}
\DoxyCodeLine{00634\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ result\ to\ the\ queue)\ or\ there\ was\ one\ element\ in\ the\ queue\ (the\ 0).}}
\DoxyCodeLine{00635\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(!got\_item1\ ||\ ((\textcolor{keywordtype}{int})outt\ ==\ 0\ \&\&\ !got\_item2),\ \textcolor{stringliteral}{"{}incorrect\ output\ from\ function\_node"{}});}
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ edge\ between\ the\ buffer\ and\ the\ function\_node\ should\ be\ reversed,\ and\ the\ last}}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ message\ we\ put\ in\ the\ buffer\ should\ still\ be\ there.\ \ We\ can't\ directly\ test\ for\ the}}
\DoxyCodeLine{00638\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ edge\ reversal.}}
\DoxyCodeLine{00639\ \ \ \ \ \ \ \ \ got\_item1\ =\ b0.try\_get(outt);}
\DoxyCodeLine{00640\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(got\_item1,\ \textcolor{stringliteral}{"{}\ buffer\ lost\ a\ message"{}});}
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(2\ ==\ (\textcolor{keywordtype}{int})outt\ ||\ 1\ ==\ (\textcolor{keywordtype}{int})outt,\ \textcolor{stringliteral}{"{}\ buffer\ had\ incorrect\ message"{}});\ \ \textcolor{comment}{//\ the\ one\ not\ consumed\ by\ the\ node.}}
\DoxyCodeLine{00642\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.is\_cancelled(),\ \textcolor{stringliteral}{"{}Graph\ was\ not\ cancelled"{}});}
\DoxyCodeLine{00643\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.reset();}
\DoxyCodeLine{00644\ \ \ \ \ \}\ \ \textcolor{comment}{//\ icnt}}
\DoxyCodeLine{00645\ }
\DoxyCodeLine{00646\ \ \ \ \ \textcolor{comment}{//\ reset\ with\ remove\_edge\ removes\ edge.\ \ (icnt\ ==0\ =>\ forward\ edge,\ 1\ =>\ reversed\ edge}}
\DoxyCodeLine{00647\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ icnt\ =\ 0;\ icnt\ <\ 2;\ ++icnt)\ \{}
\DoxyCodeLine{00648\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(icnt\ ==\ 1)\ \{}
\DoxyCodeLine{00649\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ set\ up\ reversed\ edge}}
\DoxyCodeLine{00650\ \ \ \ \ \ \ \ \ \ \ \ \ tbb::flow::make\_edge(b0,\ sfn);}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \ \ \ \ tbb::flow::make\_edge(sfn,outq);}
\DoxyCodeLine{00652\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__graph_8h_a3f08fd7f09226fb95375878c6193019f}{serial\_fn\_state0}}\ =\ 0;}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ \ \ \ \ b0.try\_put((\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}})0);\ \ \textcolor{comment}{//\ starts\ up\ the\ function\ node}}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \ \ \ \ b0.try\_put((\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}})1);\ \ \textcolor{comment}{//\ shoyuld\ reverse\ the\ edge}}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__graph_8h_a96e9ece27a82cead76327fe15278a6db}{BACKOFF\_WAIT}}(\mbox{\hyperlink{harness__graph_8h_a3f08fd7f09226fb95375878c6193019f}{serial\_fn\_state0}}\ ==\ 0,\textcolor{stringliteral}{"{}Timed\ out\ waiting\ for\ edge\ reversal"{}});}
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(tgc.cancel\_group\_execution(),\ \textcolor{stringliteral}{"{}task\ group\ already\ cancelled"{}});}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__graph_8h_a3f08fd7f09226fb95375878c6193019f}{serial\_fn\_state0}}\ =\ 0;\ \ \textcolor{comment}{//\ release\ the\ function\_node.}}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();\ \ \textcolor{comment}{//\ wait\ for\ all\ the\ tasks\ to\ complete.}}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.reset(tbb::flow::rf\_clear\_edges);}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ test\ that\ no\ one\ is\ a\ successor\ to\ the\ buffer\ now.}}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__graph_8h_a3f08fd7f09226fb95375878c6193019f}{serial\_fn\_state0}}\ =\ 1;\ \ \textcolor{comment}{//\ let\ the\ function\_node\ go\ if\ it\ gets\ an\ input\ message}}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \ \ b0.try\_put((\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}})23);}
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{00665\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}((\textcolor{keywordtype}{int})\mbox{\hyperlink{harness__graph_8h_a3f08fd7f09226fb95375878c6193019f}{serial\_fn\_state0}}\ ==\ 1,\ \textcolor{stringliteral}{"{}function\_node\ executed\ when\ it\ shouldn't"{}});}
\DoxyCodeLine{00666\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ outt;}
\DoxyCodeLine{00667\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(b0.try\_get(outt)\ \&\&\ (\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}})23\ ==\ outt,\ \textcolor{stringliteral}{"{}node\ lost\ its\ input"{}});}
\DoxyCodeLine{00668\ \ \ \ \ \}}
\DoxyCodeLine{00669\ \}}
\DoxyCodeLine{00670\ }
\DoxyCodeLine{00671\ \textcolor{preprocessor}{\#if\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION}}
\DoxyCodeLine{00672\ }
\DoxyCodeLine{00673\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ NODE\_TYPE\ >}
\DoxyCodeLine{00674\ \textcolor{keyword}{class\ }test\_buffer\_base\_extract\ \{}
\DoxyCodeLine{00675\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00676\ \ \ \ \ tbb::flow::graph\ \&\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}};}
\DoxyCodeLine{00677\ \ \ \ \ NODE\_TYPE\ \&in0;}
\DoxyCodeLine{00678\ \ \ \ \ NODE\_TYPE\ \&in1;}
\DoxyCodeLine{00679\ \ \ \ \ NODE\_TYPE\ \&middle;}
\DoxyCodeLine{00680\ \ \ \ \ NODE\_TYPE\ \&out0;}
\DoxyCodeLine{00681\ \ \ \ \ NODE\_TYPE\ \&out1;}
\DoxyCodeLine{00682\ \ \ \ \ NODE\_TYPE\ *ins[2];}
\DoxyCodeLine{00683\ \ \ \ \ NODE\_TYPE\ *outs[2];}
\DoxyCodeLine{00684\ \ \ \ \ \textcolor{keyword}{typename}\ NODE\_TYPE::successor\_type\ *ms\_ptr;}
\DoxyCodeLine{00685\ \ \ \ \ \textcolor{keyword}{typename}\ NODE\_TYPE::predecessor\_type\ *mp\_ptr;}
\DoxyCodeLine{00686\ }
\DoxyCodeLine{00687\ \ \ \ \ \textcolor{keyword}{typename}\ NODE\_TYPE::predecessor\_list\_type\ in0\_p\_list;}
\DoxyCodeLine{00688\ \ \ \ \ \textcolor{keyword}{typename}\ NODE\_TYPE::successor\_list\_type\ in0\_s\_list;}
\DoxyCodeLine{00689\ \ \ \ \ \textcolor{keyword}{typename}\ NODE\_TYPE::predecessor\_list\_type\ in1\_p\_list;}
\DoxyCodeLine{00690\ \ \ \ \ \textcolor{keyword}{typename}\ NODE\_TYPE::successor\_list\_type\ in1\_s\_list;}
\DoxyCodeLine{00691\ \ \ \ \ \textcolor{keyword}{typename}\ NODE\_TYPE::predecessor\_list\_type\ out0\_p\_list;}
\DoxyCodeLine{00692\ \ \ \ \ \textcolor{keyword}{typename}\ NODE\_TYPE::successor\_list\_type\ out0\_s\_list;}
\DoxyCodeLine{00693\ \ \ \ \ \textcolor{keyword}{typename}\ NODE\_TYPE::predecessor\_list\_type\ out1\_p\_list;}
\DoxyCodeLine{00694\ \ \ \ \ \textcolor{keyword}{typename}\ NODE\_TYPE::successor\_list\_type\ out1\_s\_list;}
\DoxyCodeLine{00695\ \ \ \ \ \textcolor{keyword}{typename}\ NODE\_TYPE::predecessor\_list\_type\ mp\_list;}
\DoxyCodeLine{00696\ \ \ \ \ \textcolor{keyword}{typename}\ NODE\_TYPE::predecessor\_list\_type::iterator\ mp\_list\_iter;}
\DoxyCodeLine{00697\ \ \ \ \ \textcolor{keyword}{typename}\ NODE\_TYPE::successor\_list\_type\ ms\_list;}
\DoxyCodeLine{00698\ \ \ \ \ \textcolor{keyword}{typename}\ NODE\_TYPE::successor\_list\_type::iterator\ ms\_list\_iter;}
\DoxyCodeLine{00699\ }
\DoxyCodeLine{00700\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_up\_lists()\ \{}
\DoxyCodeLine{00701\ \ \ \ \ \ \ \ \ in0\_p\_list.clear();}
\DoxyCodeLine{00702\ \ \ \ \ \ \ \ \ in0\_s\_list.clear();}
\DoxyCodeLine{00703\ \ \ \ \ \ \ \ \ in1\_p\_list.clear();}
\DoxyCodeLine{00704\ \ \ \ \ \ \ \ \ in1\_s\_list.clear();}
\DoxyCodeLine{00705\ \ \ \ \ \ \ \ \ mp\_list.clear();}
\DoxyCodeLine{00706\ \ \ \ \ \ \ \ \ ms\_list.clear();}
\DoxyCodeLine{00707\ \ \ \ \ \ \ \ \ out0\_p\_list.clear();}
\DoxyCodeLine{00708\ \ \ \ \ \ \ \ \ out0\_s\_list.clear();}
\DoxyCodeLine{00709\ \ \ \ \ \ \ \ \ out1\_p\_list.clear();}
\DoxyCodeLine{00710\ \ \ \ \ \ \ \ \ out1\_s\_list.clear();}
\DoxyCodeLine{00711\ \ \ \ \ \ \ \ \ in0.copy\_predecessors(in0\_p\_list);}
\DoxyCodeLine{00712\ \ \ \ \ \ \ \ \ in0.copy\_successors(in0\_s\_list);}
\DoxyCodeLine{00713\ \ \ \ \ \ \ \ \ in1.copy\_predecessors(in1\_p\_list);}
\DoxyCodeLine{00714\ \ \ \ \ \ \ \ \ in1.copy\_successors(in1\_s\_list);}
\DoxyCodeLine{00715\ \ \ \ \ \ \ \ \ middle.copy\_predecessors(mp\_list);}
\DoxyCodeLine{00716\ \ \ \ \ \ \ \ \ middle.copy\_successors(ms\_list);}
\DoxyCodeLine{00717\ \ \ \ \ \ \ \ \ out0.copy\_predecessors(out0\_p\_list);}
\DoxyCodeLine{00718\ \ \ \ \ \ \ \ \ out0.copy\_successors(out0\_s\_list);}
\DoxyCodeLine{00719\ \ \ \ \ \ \ \ \ out1.copy\_predecessors(out1\_p\_list);}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ out1.copy\_successors(out1\_s\_list);}
\DoxyCodeLine{00721\ \ \ \ \ \}}
\DoxyCodeLine{00722\ }
\DoxyCodeLine{00723\ \ \ \ \ \textcolor{keywordtype}{void}\ make\_and\_validate\_full\_graph()\ \{}
\DoxyCodeLine{00724\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \ \ in0\ \ \ \ \ \ \ \ \ \ \ out0\ \ */}}
\DoxyCodeLine{00725\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \ \ \ \ \ \ \(\backslash\)\ \ \ \ \ \ \ /\ \ \ \ \ \ \ */}}
\DoxyCodeLine{00726\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \ \ \ \ \ \ \ \ middle\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00727\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \ \ \ \ \ \ /\ \ \ \ \ \ \ \(\backslash\)\ \ \ \ \ \ \ */}}
\DoxyCodeLine{00728\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \ \ in1\ \ \ \ \ \ \ \ \ \ \ out1\ \ */}}
\DoxyCodeLine{00729\ \ \ \ \ \ \ \ \ tbb::flow::make\_edge(\ in0,\ middle\ );}
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ tbb::flow::make\_edge(\ in1,\ middle\ );}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \ \ tbb::flow::make\_edge(\ middle,\ out0\ );}
\DoxyCodeLine{00732\ \ \ \ \ \ \ \ \ tbb::flow::make\_edge(\ middle,\ out1\ );}
\DoxyCodeLine{00733\ }
\DoxyCodeLine{00734\ \ \ \ \ \ \ \ \ set\_up\_lists();}
\DoxyCodeLine{00735\ }
\DoxyCodeLine{00736\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ in0.predecessor\_count()\ ==\ 0\ \&\&\ in0\_p\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ predecessors"{}}\ );}
\DoxyCodeLine{00737\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ in0.successor\_count()\ ==\ 1\ \&\&\ in0\_s\_list.size()\ ==\ 1\ \&\&\ *(in0\_s\_list.begin())\ ==\ ms\_ptr,\ \textcolor{stringliteral}{"{}expected\ 1\ successor"{}}\ );}
\DoxyCodeLine{00738\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ in1.predecessor\_count()\ ==\ 0\ \&\&\ in1\_p\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ predecessors"{}}\ );}
\DoxyCodeLine{00739\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ in1.successor\_count()\ ==\ 1\ \&\&\ in1\_s\_list.size()\ ==\ 1\ \&\&\ *(in1\_s\_list.begin())\ ==\ ms\_ptr,\ \textcolor{stringliteral}{"{}expected\ 1\ successor"{}}\ );}
\DoxyCodeLine{00740\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ middle.predecessor\_count()\ ==\ 2\ \&\&\ mp\_list.size()\ ==\ 2,\ \textcolor{stringliteral}{"{}expected\ 2\ predecessors"{}}\ );}
\DoxyCodeLine{00741\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ middle.successor\_count()\ ==\ 2\ \&\&\ ms\_list.size()\ ==\ 2,\ \textcolor{stringliteral}{"{}expected\ 2\ successors"{}}\ );}
\DoxyCodeLine{00742\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ out0.predecessor\_count()\ ==\ 1\ \&\&\ out0\_p\_list.size()\ ==\ 1\ \&\&\ *(out0\_p\_list.begin())\ ==\ mp\_ptr,\ \textcolor{stringliteral}{"{}expected\ 1\ predecessor"{}}\ );}
\DoxyCodeLine{00743\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ out0.successor\_count()\ ==\ 0\ \&\&\ out0\_s\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ successors"{}}\ );}
\DoxyCodeLine{00744\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ out1.predecessor\_count()\ ==\ 1\ \&\&\ out1\_p\_list.size()\ ==\ 1\ \&\&\ *(out1\_p\_list.begin())\ ==\ mp\_ptr,\ \textcolor{stringliteral}{"{}expected\ 1\ predecessor"{}}\ );}
\DoxyCodeLine{00745\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ out1.successor\_count()\ ==\ 0\ \&\&\ out1\_s\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ successors"{}}\ );}
\DoxyCodeLine{00746\ }
\DoxyCodeLine{00747\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ first\_pred\ =\ *(mp\_list.begin())\ ==\ ins[0]\ ?\ 0\ :\ (\ *(mp\_list.begin())\ ==\ ins[1]\ ?\ 1\ :\ -\/1\ );}
\DoxyCodeLine{00748\ \ \ \ \ \ \ \ \ mp\_list\_iter\ =\ mp\_list.begin();\ ++mp\_list\_iter;}
\DoxyCodeLine{00749\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ second\_pred\ =\ *mp\_list\_iter\ ==\ ins[0]\ ?\ 0\ :\ (\ *mp\_list\_iter\ ==\ ins[1]\ ?\ 1\ :\ -\/1\ );}
\DoxyCodeLine{00750\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ first\_pred\ !=\ -\/1\ \&\&\ second\_pred\ !=\ -\/1\ \&\&\ first\_pred\ !=\ second\_pred,\ \textcolor{stringliteral}{"{}bad\ predecessor(s)\ for\ middle"{}}\ );}
\DoxyCodeLine{00751\ }
\DoxyCodeLine{00752\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ first\_succ\ =\ *(ms\_list.begin())\ ==\ outs[0]\ ?\ 0\ :\ (\ *(ms\_list.begin())\ ==\ outs[1]\ ?\ 1\ :\ -\/1\ );}
\DoxyCodeLine{00753\ \ \ \ \ \ \ \ \ ms\_list\_iter\ =\ ++(ms\_list.begin());}
\DoxyCodeLine{00754\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ second\_succ\ =\ *ms\_list\_iter\ ==\ outs[0]\ ?\ 0\ :\ (\ *ms\_list\_iter\ ==\ outs[1]\ ?\ 1\ :\ -\/1\ );}
\DoxyCodeLine{00755\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ first\_succ\ !=\ -\/1\ \&\&\ second\_succ\ !=\ -\/1\ \&\&\ first\_succ\ !=\ second\_succ,\ \textcolor{stringliteral}{"{}bad\ successor(s)\ for\ middle"{}}\ );}
\DoxyCodeLine{00756\ }
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ in0.try\_put(1);}
\DoxyCodeLine{00758\ \ \ \ \ \ \ \ \ in1.try\_put(2);}
\DoxyCodeLine{00759\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{00760\ }
\DoxyCodeLine{00761\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ 0;}
\DoxyCodeLine{00762\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ 0;}
\DoxyCodeLine{00763\ }
\DoxyCodeLine{00764\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ in0.try\_get(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ ==\ \textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}buffer\ should\ not\ have\ a\ value"{}}\ );}
\DoxyCodeLine{00765\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ in1.try\_get(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ ==\ \textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}buffer\ should\ not\ have\ a\ value"{}}\ );}
\DoxyCodeLine{00766\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ middle.try\_get(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ ==\ \textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}buffer\ should\ not\ have\ a\ value"{}}\ );}
\DoxyCodeLine{00767\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ out0.try\_get(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ )\ \{}
\DoxyCodeLine{00768\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ (\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ ==\ 1\ ||\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ ==\ 2)\ \&\&\ (\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\&\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}})\ ==\ 0,\ \textcolor{stringliteral}{"{}duplicate\ value"{}}\ );}
\DoxyCodeLine{00769\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ |=\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}};}
\DoxyCodeLine{00770\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{00771\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00772\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ out1.try\_get(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ )\ \{}
\DoxyCodeLine{00773\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ (\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ ==\ 1\ ||\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ ==\ 2)\ \&\&\ (\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\&\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}})\ ==\ 0,\ \textcolor{stringliteral}{"{}duplicate\ value"{}}\ );}
\DoxyCodeLine{00774\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ |=\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}};}
\DoxyCodeLine{00775\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{00776\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00777\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ ==\ 3,\ \textcolor{stringliteral}{"{}not\ all\ values\ received"{}}\ );}
\DoxyCodeLine{00778\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{00779\ \ \ \ \ \}}
\DoxyCodeLine{00780\ }
\DoxyCodeLine{00781\ \ \ \ \ \textcolor{keywordtype}{void}\ validate\_half\_graph()\ \{}
\DoxyCodeLine{00782\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \ \ in0\ \ \ \ \ \ \ \ \ \ \ out0\ \ */}}
\DoxyCodeLine{00783\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00784\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \ \ \ \ \ \ \ \ middle\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00785\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \ \ \ \ \ \ /\ \ \ \ \ \ \ \(\backslash\)\ \ \ \ \ \ \ */}}
\DoxyCodeLine{00786\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \ \ in1\ \ \ \ \ \ \ \ \ \ \ out1\ \ */}}
\DoxyCodeLine{00787\ \ \ \ \ \ \ \ \ set\_up\_lists();}
\DoxyCodeLine{00788\ }
\DoxyCodeLine{00789\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ in0.predecessor\_count()\ ==\ 0\ \&\&\ in0\_p\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ predecessors"{}}\ );}
\DoxyCodeLine{00790\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ in0.successor\_count()\ ==\ 0\ \&\&\ in0\_s\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ successors"{}}\ );}
\DoxyCodeLine{00791\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ in1.predecessor\_count()\ ==\ 0\ \&\&\ in1\_p\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ predecessors"{}}\ );}
\DoxyCodeLine{00792\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ in1.successor\_count()\ ==\ 1\ \&\&\ in1\_s\_list.size()\ ==\ 1\ \&\&\ *(in1\_s\_list.begin())\ ==\ ms\_ptr,\ \textcolor{stringliteral}{"{}expected\ 1\ successor"{}}\ );}
\DoxyCodeLine{00793\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ middle.predecessor\_count()\ ==\ 1\ \&\&\ mp\_list.size()\ ==\ 1,\ \textcolor{stringliteral}{"{}expected\ 1\ predecessor"{}}\ );}
\DoxyCodeLine{00794\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ middle.successor\_count()\ ==\ 1\ \&\&\ ms\_list.size()\ ==\ 1,\ \textcolor{stringliteral}{"{}expected\ 1\ successor"{}}\ );}
\DoxyCodeLine{00795\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ out0.predecessor\_count()\ ==\ 0\ \&\&\ out0\_p\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ predecessors"{}}\ );}
\DoxyCodeLine{00796\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ out0.successor\_count()\ ==\ 0\ \&\&\ out0\_s\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ successors"{}}\ );}
\DoxyCodeLine{00797\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ out1.predecessor\_count()\ ==\ 1\ \&\&\ out1\_p\_list.size()\ ==\ 1\ \&\&\ *(out1\_p\_list.begin())\ ==\ mp\_ptr,\ \textcolor{stringliteral}{"{}expected\ 1\ predecessor"{}}\ );}
\DoxyCodeLine{00798\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ out1.successor\_count()\ ==\ 0\ \&\&\ out1\_s\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ successors"{}}\ );}
\DoxyCodeLine{00799\ }
\DoxyCodeLine{00800\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ middle.predecessor\_count()\ ==\ 1\ \&\&\ mp\_list.size()\ ==\ 1,\ \textcolor{stringliteral}{"{}expected\ two\ predecessors"{}}\ );}
\DoxyCodeLine{00801\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ middle.successor\_count()\ ==\ 1\ \&\&\ ms\_list.size()\ ==\ 1,\ \textcolor{stringliteral}{"{}expected\ two\ successors"{}}\ );}
\DoxyCodeLine{00802\ }
\DoxyCodeLine{00803\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ *(mp\_list.begin())\ ==\ ins[1],\ \textcolor{stringliteral}{"{}incorrect\ predecessor"{}}\ );}
\DoxyCodeLine{00804\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ *(ms\_list.begin())\ ==\ outs[1],\ \textcolor{stringliteral}{"{}incorrect\ successor"{}}\ );}
\DoxyCodeLine{00805\ }
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ in0.try\_put(1);}
\DoxyCodeLine{00807\ \ \ \ \ \ \ \ \ in1.try\_put(2);}
\DoxyCodeLine{00808\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{00809\ }
\DoxyCodeLine{00810\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ 0;}
\DoxyCodeLine{00811\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ in0.try\_get(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ ==\ \textcolor{keyword}{true}\ \&\&\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ ==\ 1,\ \textcolor{stringliteral}{"{}buffer\ should\ have\ a\ value\ of\ 1"{}}\ );}
\DoxyCodeLine{00812\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ in1.try\_get(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ ==\ \textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}buffer\ should\ not\ have\ a\ value"{}}\ );}
\DoxyCodeLine{00813\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ middle.try\_get(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ ==\ \textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}buffer\ should\ not\ have\ a\ value"{}}\ );}
\DoxyCodeLine{00814\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ out0.try\_get(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ ==\ \textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}buffer\ should\ not\ have\ a\ value"{}}\ );}
\DoxyCodeLine{00815\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ out1.try\_get(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ ==\ \textcolor{keyword}{true}\ \&\&\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ ==\ 2,\ \textcolor{stringliteral}{"{}buffer\ should\ have\ a\ value\ of\ 2"{}}\ );}
\DoxyCodeLine{00816\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{00817\ \ \ \ \ \}}
\DoxyCodeLine{00818\ }
\DoxyCodeLine{00819\ \ \ \ \ \textcolor{keywordtype}{void}\ validate\_empty\_graph()\ \{}
\DoxyCodeLine{00820\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \ \ in0\ \ \ \ \ \ \ \ \ \ \ out0\ \ */}}
\DoxyCodeLine{00821\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00822\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \ \ \ \ \ \ \ \ middle\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00823\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00824\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \ \ in1\ \ \ \ \ \ \ \ \ \ \ out1\ \ */}}
\DoxyCodeLine{00825\ \ \ \ \ \ \ \ \ set\_up\_lists();}
\DoxyCodeLine{00826\ }
\DoxyCodeLine{00827\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ in0.predecessor\_count()\ ==\ 0\ \&\&\ in0\_p\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ predecessors"{}}\ );}
\DoxyCodeLine{00828\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ in0.successor\_count()\ ==\ 0\ \&\&\ in0\_s\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ successors"{}}\ );}
\DoxyCodeLine{00829\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ in1.predecessor\_count()\ ==\ 0\ \&\&\ in1\_p\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ predecessors"{}}\ );}
\DoxyCodeLine{00830\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ in1.successor\_count()\ ==\ 0\ \&\&\ in1\_s\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ successors"{}}\ );}
\DoxyCodeLine{00831\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ middle.predecessor\_count()\ ==\ 0\ \&\&\ mp\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ predecessors"{}}\ );}
\DoxyCodeLine{00832\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ middle.successor\_count()\ ==\ 0\ \&\&\ ms\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ successors"{}}\ );}
\DoxyCodeLine{00833\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ out0.predecessor\_count()\ ==\ 0\ \&\&\ out0\_p\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ predecessors"{}}\ );}
\DoxyCodeLine{00834\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ out0.successor\_count()\ ==\ 0\ \&\&\ out0\_s\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ successors"{}}\ );}
\DoxyCodeLine{00835\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ out1.predecessor\_count()\ ==\ 0\ \&\&\ out1\_p\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ predecessors"{}}\ );}
\DoxyCodeLine{00836\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ out1.successor\_count()\ ==\ 0\ \&\&\ out1\_s\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ successors"{}}\ );}
\DoxyCodeLine{00837\ }
\DoxyCodeLine{00838\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ middle.predecessor\_count()\ ==\ 0\ \&\&\ mp\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ predecessors"{}}\ );}
\DoxyCodeLine{00839\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ middle.successor\_count()\ ==\ 0\ \&\&\ ms\_list.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}expected\ 0\ successors"{}}\ );}
\DoxyCodeLine{00840\ }
\DoxyCodeLine{00841\ \ \ \ \ \ \ \ \ in0.try\_put(1);}
\DoxyCodeLine{00842\ \ \ \ \ \ \ \ \ in1.try\_put(2);}
\DoxyCodeLine{00843\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{00844\ }
\DoxyCodeLine{00845\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ 0;}
\DoxyCodeLine{00846\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ in0.try\_get(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ ==\ \textcolor{keyword}{true}\ \&\&\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ ==\ 1,\ \textcolor{stringliteral}{"{}buffer\ should\ have\ a\ value\ of\ 1"{}}\ );}
\DoxyCodeLine{00847\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ in1.try\_get(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ ==\ \textcolor{keyword}{true}\ \&\&\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ ==\ 2,\ \textcolor{stringliteral}{"{}buffer\ should\ have\ a\ value\ of\ 2"{}}\ );}
\DoxyCodeLine{00848\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ middle.try\_get(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ ==\ \textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}buffer\ should\ not\ have\ a\ value"{}}\ );}
\DoxyCodeLine{00849\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ out0.try\_get(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ ==\ \textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}buffer\ should\ not\ have\ a\ value"{}}\ );}
\DoxyCodeLine{00850\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ out1.try\_get(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ ==\ \textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}buffer\ should\ not\ have\ a\ value"{}}\ );}
\DoxyCodeLine{00851\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{00852\ \ \ \ \ \}}
\DoxyCodeLine{00853\ }
\DoxyCodeLine{00854\ \ \ \ \ \textcolor{comment}{//\ forbid\ the\ ecompiler\ generation\ of\ operator=\ (VS2012\ warning)}}
\DoxyCodeLine{00855\ \ \ \ \ test\_buffer\_base\_extract\&\ operator=(test\_buffer\_base\_extract\ \&\ \textcolor{comment}{/*other*/});}
\DoxyCodeLine{00856\ }
\DoxyCodeLine{00857\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00858\ }
\DoxyCodeLine{00859\ \ \ \ \ test\_buffer\_base\_extract(tbb::flow::graph\ \&\_g,\ NODE\_TYPE\ \&i0,\ NODE\_TYPE\ \&i1,\ NODE\_TYPE\ \&\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}},\ NODE\_TYPE\ \&o0,\ NODE\_TYPE\ \&o1)\ :}
\DoxyCodeLine{00860\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}(\_g),\ in0(i0),\ in1(i1),\ middle(\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}),\ out0(o0),\ out1(o1)\ \{}
\DoxyCodeLine{00861\ \ \ \ \ \ \ \ \ ins[0]\ =\ \&in0;}
\DoxyCodeLine{00862\ \ \ \ \ \ \ \ \ ins[1]\ =\ \&in1;}
\DoxyCodeLine{00863\ \ \ \ \ \ \ \ \ outs[0]\ =\ \&out0;}
\DoxyCodeLine{00864\ \ \ \ \ \ \ \ \ outs[1]\ =\ \&out1;}
\DoxyCodeLine{00865\ \ \ \ \ \ \ \ \ ms\_ptr\ =\ \textcolor{keyword}{static\_cast<}\ typename\ NODE\_TYPE::successor\_type\ *\ \textcolor{keyword}{>}(\&middle);}
\DoxyCodeLine{00866\ \ \ \ \ \ \ \ \ mp\_ptr\ =\ \textcolor{keyword}{static\_cast<}\ typename\ NODE\_TYPE::predecessor\_type\ *\textcolor{keyword}{>}(\&middle);}
\DoxyCodeLine{00867\ \ \ \ \ \}}
\DoxyCodeLine{00868\ }
\DoxyCodeLine{00869\ \ \ \ \ \textcolor{keyword}{virtual}\ \string~test\_buffer\_base\_extract()\ \{\}}
\DoxyCodeLine{00870\ }
\DoxyCodeLine{00871\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{test__async__node_8cpp_a9e73c3339f877043a84c28ec39132c5b}{run\_tests}}()\ \{}
\DoxyCodeLine{00872\ \ \ \ \ \ \ \ \ make\_and\_validate\_full\_graph();}
\DoxyCodeLine{00873\ }
\DoxyCodeLine{00874\ \ \ \ \ \ \ \ \ in0.extract();}
\DoxyCodeLine{00875\ \ \ \ \ \ \ \ \ out0.extract();}
\DoxyCodeLine{00876\ \ \ \ \ \ \ \ \ validate\_half\_graph();}
\DoxyCodeLine{00877\ }
\DoxyCodeLine{00878\ \ \ \ \ \ \ \ \ in1.extract();}
\DoxyCodeLine{00879\ \ \ \ \ \ \ \ \ out1.extract();}
\DoxyCodeLine{00880\ \ \ \ \ \ \ \ \ validate\_empty\_graph();}
\DoxyCodeLine{00881\ }
\DoxyCodeLine{00882\ \ \ \ \ \ \ \ \ make\_and\_validate\_full\_graph();}
\DoxyCodeLine{00883\ }
\DoxyCodeLine{00884\ \ \ \ \ \ \ \ \ middle.extract();}
\DoxyCodeLine{00885\ \ \ \ \ \ \ \ \ validate\_empty\_graph();}
\DoxyCodeLine{00886\ }
\DoxyCodeLine{00887\ \ \ \ \ \ \ \ \ make\_and\_validate\_full\_graph();}
\DoxyCodeLine{00888\ \ \ \ \ \}}
\DoxyCodeLine{00889\ }
\DoxyCodeLine{00890\ \};}
\DoxyCodeLine{00891\ }
\DoxyCodeLine{00892\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ NODE\_TYPE\ >}
\DoxyCodeLine{00893\ \textcolor{keyword}{class\ }test\_buffer\_extract\ :\ \textcolor{keyword}{public}\ test\_buffer\_base\_extract<NODE\_TYPE>\ \{}
\DoxyCodeLine{00894\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00895\ \ \ \ \ tbb::flow::graph\ my\_g;}
\DoxyCodeLine{00896\ \ \ \ \ NODE\_TYPE\ my\_in0;}
\DoxyCodeLine{00897\ \ \ \ \ NODE\_TYPE\ my\_in1;}
\DoxyCodeLine{00898\ \ \ \ \ NODE\_TYPE\ my\_middle;}
\DoxyCodeLine{00899\ \ \ \ \ NODE\_TYPE\ my\_out0;}
\DoxyCodeLine{00900\ \ \ \ \ NODE\_TYPE\ my\_out1;}
\DoxyCodeLine{00901\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00902\ \ \ \ \ test\_buffer\_extract()\ :\ test\_buffer\_base\_extract<NODE\_TYPE>(\ my\_g,\ my\_in0,\ my\_in1,\ my\_middle,\ my\_out0,\ my\_out1),}
\DoxyCodeLine{00903\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_in0(my\_g),\ my\_in1(my\_g),\ my\_middle(my\_g),\ my\_out0(my\_g),\ my\_out1(my\_g)\ \{\ \}}
\DoxyCodeLine{00904\ \};}
\DoxyCodeLine{00905\ }
\DoxyCodeLine{00906\ \textcolor{keyword}{template}<\ >}
\DoxyCodeLine{00907\ \textcolor{keyword}{class\ }test\_buffer\_extract<\ \mbox{\hyperlink{namespacetbb}{tbb}}::flow::sequencer\_node<int>\ >\ :\ \textcolor{keyword}{public}\ test\_buffer\_base\_extract<\ tbb::flow::sequencer\_node<int>\ >\ \{}
\DoxyCodeLine{00908\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00909\ \ \ \ \ \textcolor{keyword}{typedef}\ tbb::flow::sequencer\_node<int>\ my\_node\_t;}
\DoxyCodeLine{00910\ \ \ \ \ tbb::flow::graph\ my\_g;}
\DoxyCodeLine{00911\ \ \ \ \ my\_node\_t\ my\_in0;}
\DoxyCodeLine{00912\ \ \ \ \ my\_node\_t\ my\_in1;}
\DoxyCodeLine{00913\ \ \ \ \ my\_node\_t\ my\_middle;}
\DoxyCodeLine{00914\ \ \ \ \ my\_node\_t\ my\_out0;}
\DoxyCodeLine{00915\ \ \ \ \ my\_node\_t\ my\_out1;}
\DoxyCodeLine{00916\ }
\DoxyCodeLine{00917\ \ \ \ \ \textcolor{keyword}{typedef}\ tbb::atomic<size\_t>\ \mbox{\hyperlink{perf__sched_8cpp_a798d46b16cade6e2f6eb0ed4f25e8aa1}{count\_t}};}
\DoxyCodeLine{00918\ \ \ \ \ \mbox{\hyperlink{perf__sched_8cpp_a798d46b16cade6e2f6eb0ed4f25e8aa1}{count\_t}}\ middle\_count;}
\DoxyCodeLine{00919\ \ \ \ \ \mbox{\hyperlink{perf__sched_8cpp_a798d46b16cade6e2f6eb0ed4f25e8aa1}{count\_t}}\ out0\_count;}
\DoxyCodeLine{00920\ \ \ \ \ \mbox{\hyperlink{perf__sched_8cpp_a798d46b16cade6e2f6eb0ed4f25e8aa1}{count\_t}}\ out1\_count;}
\DoxyCodeLine{00921\ }
\DoxyCodeLine{00922\ \ \ \ \ \textcolor{keyword}{struct\ }always\_zero\ \{\ \textcolor{keywordtype}{size\_t}\ operator()(\textcolor{keywordtype}{int})\ \{\ \textcolor{keywordflow}{return}\ 0;\ \}\ \};}
\DoxyCodeLine{00923\ \ \ \ \ \textcolor{keyword}{struct\ }always\_inc\ \{}
\DoxyCodeLine{00924\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{perf__sched_8cpp_a798d46b16cade6e2f6eb0ed4f25e8aa1}{count\_t}}\ *\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}};}
\DoxyCodeLine{00925\ \ \ \ \ \ \ \ \ always\_inc(\mbox{\hyperlink{perf__sched_8cpp_a798d46b16cade6e2f6eb0ed4f25e8aa1}{count\_t}}\ \&\_c)\ :\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}(\&\_c)\ \{\}}
\DoxyCodeLine{00926\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ operator()(\textcolor{keywordtype}{int})\ \{}
\DoxyCodeLine{00927\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}-\/>fetch\_and\_increment();}
\DoxyCodeLine{00928\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00929\ \ \ \ \ \};}
\DoxyCodeLine{00930\ }
\DoxyCodeLine{00931\ \ \ \ \ \textcolor{keywordtype}{void}\ set\_up\_lists()\ \_\_TBB\_override\ \{}
\DoxyCodeLine{00932\ \ \ \ \ \ \ \ \ middle\_count\ =\ 0;}
\DoxyCodeLine{00933\ \ \ \ \ \ \ \ \ out0\_count\ =\ 0;}
\DoxyCodeLine{00934\ \ \ \ \ \ \ \ \ out1\_count\ =\ 0;}
\DoxyCodeLine{00935\ \ \ \ \ \ \ \ \ my\_g.reset();\ \textcolor{comment}{//\ reset\ the\ sequencer\ nodes\ to\ start\ at\ 0\ again}}
\DoxyCodeLine{00936\ \ \ \ \ \ \ \ \ test\_buffer\_base\_extract<\ my\_node\_t\ >::set\_up\_lists();}
\DoxyCodeLine{00937\ \ \ \ \ \}}
\DoxyCodeLine{00938\ }
\DoxyCodeLine{00939\ }
\DoxyCodeLine{00940\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00941\ \ \ \ \ test\_buffer\_extract()\ :\ test\_buffer\_base\_extract<my\_node\_t>(\ my\_g,\ my\_in0,\ my\_in1,\ my\_middle,\ my\_out0,\ my\_out1),}
\DoxyCodeLine{00942\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_in0(my\_g,\ always\_zero()),\ my\_in1(my\_g,\ always\_zero()),\ my\_middle(my\_g,\ always\_inc(middle\_count)),}
\DoxyCodeLine{00943\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_out0(my\_g,\ always\_inc(out0\_count)),\ my\_out1(my\_g,\ always\_inc(out1\_count))\ \{}
\DoxyCodeLine{00944\ \ \ \ \ \}}
\DoxyCodeLine{00945\ \};}
\DoxyCodeLine{00946\ }
\DoxyCodeLine{00947\ \textcolor{comment}{//\ test\ for\ simple\ node\ that\ has\ one\ input,\ one\ output\ (overwrite\_node,\ write\_once\_node,\ limiter\_node)}}
\DoxyCodeLine{00948\ \textcolor{comment}{//\ decrement\ tests\ have\ to\ be\ done\ separately.}}
\DoxyCodeLine{00949\ \textcolor{keyword}{template}<\textcolor{keyword}{template}<\ \textcolor{keyword}{class}\ >\ \textcolor{keyword}{class\ }NType,\ \textcolor{keyword}{typename}\ ItemType>}
\DoxyCodeLine{00950\ \textcolor{keywordtype}{void}\ test\_extract\_on\_node()\ \{}
\DoxyCodeLine{00951\ \ \ \ \ tbb::flow::graph\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}};}
\DoxyCodeLine{00952\ \ \ \ \ ItemType\ dont\_care;}
\DoxyCodeLine{00953\ \ \ \ \ NType<ItemType>\ node0(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}});}
\DoxyCodeLine{00954\ \ \ \ \ tbb::flow::queue\_node<ItemType>\ q0(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}});}
\DoxyCodeLine{00955\ \ \ \ \ tbb::flow::queue\_node<ItemType>\ q1(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}});}
\DoxyCodeLine{00956\ \ \ \ \ tbb::flow::queue\_node<ItemType>\ q2(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}});}
\DoxyCodeLine{00957\ \ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ 2;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00958\ \ \ \ \ \ \ \ \ tbb::flow::make\_edge(q0,node0);}
\DoxyCodeLine{00959\ \ \ \ \ \ \ \ \ tbb::flow::make\_edge(q1,node0);}
\DoxyCodeLine{00960\ \ \ \ \ \ \ \ \ tbb::flow::make\_edge(node0,\ q2);}
\DoxyCodeLine{00961\ \ \ \ \ \ \ \ \ q0.try\_put(ItemType(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}));}
\DoxyCodeLine{00962\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{00963\ }
\DoxyCodeLine{00964\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ q0\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00965\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \(\backslash\)\ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00966\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \ \(\backslash\)\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00967\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \ \ \ node0\ -\/-\/\ q2\ */}}
\DoxyCodeLine{00968\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ \ /\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00969\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ /\ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00970\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ q1\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00971\ }
\DoxyCodeLine{00972\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(node0.predecessor\_count()\ ==\ 2\ \&\&\ q0.successor\_count()\ ==\ 1\ \&\&\ q1.successor\_count()\ ==\ 1,\ \textcolor{stringliteral}{"{}bad\ predecessor\ count"{}});}
\DoxyCodeLine{00973\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(node0.successor\_count()\ ==\ 1\ \&\&\ q2.predecessor\_count()\ ==\ 1,\ \textcolor{stringliteral}{"{}bad\ successor\ count"{}});}
\DoxyCodeLine{00974\ }
\DoxyCodeLine{00975\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(q2.try\_get(dont\_care)\ \&\&\ \textcolor{keywordtype}{int}(dont\_care)\ ==\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ \textcolor{stringliteral}{"{}item\ not\ forwarded"{}});}
\DoxyCodeLine{00976\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ NType<ItemType>::successor\_list\_type\ sv,\ sv1;}
\DoxyCodeLine{00977\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ NType<ItemType>::predecessor\_list\_type\ pv,\ pv1;}
\DoxyCodeLine{00978\ }
\DoxyCodeLine{00979\ \ \ \ \ \ \ \ \ pv1.push\_back(\&q0);}
\DoxyCodeLine{00980\ \ \ \ \ \ \ \ \ pv1.push\_back(\&q1);}
\DoxyCodeLine{00981\ \ \ \ \ \ \ \ \ sv1.push\_back(\&q2);}
\DoxyCodeLine{00982\ \ \ \ \ \ \ \ \ node0.copy\_predecessors(pv);}
\DoxyCodeLine{00983\ \ \ \ \ \ \ \ \ node0.copy\_successors(sv);}
\DoxyCodeLine{00984\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(lists\_match(pv,pv1),\ \textcolor{stringliteral}{"{}predecessor\ vector\ incorrect"{}});}
\DoxyCodeLine{00985\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(lists\_match(sv,sv1),\ \textcolor{stringliteral}{"{}successor\ vector\ incorrect"{}});}
\DoxyCodeLine{00986\ }
\DoxyCodeLine{00987\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ ==\ 0)\ \{}
\DoxyCodeLine{00988\ \ \ \ \ \ \ \ \ \ \ \ \ node0.extract();}
\DoxyCodeLine{00989\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00990\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00991\ \ \ \ \ \ \ \ \ \ \ \ \ q0.extract();}
\DoxyCodeLine{00992\ \ \ \ \ \ \ \ \ \ \ \ \ q1.extract();}
\DoxyCodeLine{00993\ \ \ \ \ \ \ \ \ \ \ \ \ q2.extract();}
\DoxyCodeLine{00994\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00995\ }
\DoxyCodeLine{00996\ \ \ \ \ \ \ \ \ q0.try\_put(ItemType(2));}
\DoxyCodeLine{00997\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{00998\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(!q2.try\_get(dont\_care),\ \textcolor{stringliteral}{"{}node0\ not\ disconnected"{}});}
\DoxyCodeLine{00999\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(q0.try\_get(dont\_care),\ \textcolor{stringliteral}{"{}q0\ empty\ (should\ have\ one\ item)"{}});}
\DoxyCodeLine{01000\ }
\DoxyCodeLine{01001\ \ \ \ \ \ \ \ \ node0.copy\_predecessors(pv);}
\DoxyCodeLine{01002\ \ \ \ \ \ \ \ \ node0.copy\_successors(sv);}
\DoxyCodeLine{01003\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(node0.predecessor\_count()\ ==\ 0\ \&\&\ q0.successor\_count()\ ==\ 0\ \&\&\ q1.successor\_count()\ ==\ 0,\ \textcolor{stringliteral}{"{}error\ in\ pred\ count\ after\ extract"{}});}
\DoxyCodeLine{01004\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(pv.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}error\ in\ pred\ array\ count\ after\ extract"{}});}
\DoxyCodeLine{01005\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(node0.successor\_count()\ ==\ 0\ \&\&\ q2.predecessor\_count()\ ==\ 0,\ \textcolor{stringliteral}{"{}error\ in\ succ\ count\ after\ extract"{}});}
\DoxyCodeLine{01006\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(sv.size()\ ==\ 0,\ \textcolor{stringliteral}{"{}error\ in\ succ\ array\ count\ after\ extract"{}});}
\DoxyCodeLine{01007\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{01008\ \ \ \ \ \}}
\DoxyCodeLine{01009\ \}}
\DoxyCodeLine{01010\ }
\DoxyCodeLine{01011\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION}}
\DoxyCodeLine{01012\ }
\DoxyCodeLine{01013\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ NodeType>}
\DoxyCodeLine{01014\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{harness__graph_8h_a48150a20db9d73e47a9ea11973d72c72}{test\_input\_ports\_return\_ref}}(NodeType\&\ mip\_node)\ \{}
\DoxyCodeLine{01015\ \ \ \ \ \textcolor{keyword}{typename}\ NodeType::input\_ports\_type\&\ input\_ports1\ =\ mip\_node.input\_ports();}
\DoxyCodeLine{01016\ \ \ \ \ \textcolor{keyword}{typename}\ NodeType::input\_ports\_type\&\ input\_ports2\ =\ mip\_node.input\_ports();}
\DoxyCodeLine{01017\ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\&input\_ports1\ ==\ \&input\_ports2,\ \textcolor{stringliteral}{"{}input\_ports()\ should\ return\ reference"{}});}
\DoxyCodeLine{01018\ \}}
\DoxyCodeLine{01019\ }
\DoxyCodeLine{01020\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ NodeType>}
\DoxyCodeLine{01021\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{harness__graph_8h_a9b6ade3c12c42ffa236168f0f6b9a537}{test\_output\_ports\_return\_ref}}(NodeType\&\ mop\_node)\ \{}
\DoxyCodeLine{01022\ \ \ \ \ \textcolor{keyword}{typename}\ NodeType::output\_ports\_type\&\ output\_ports1\ =\ mop\_node.output\_ports();}
\DoxyCodeLine{01023\ \ \ \ \ \textcolor{keyword}{typename}\ NodeType::output\_ports\_type\&\ output\_ports2\ =\ mop\_node.output\_ports();}
\DoxyCodeLine{01024\ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\&output\_ports1\ ==\ \&output\_ports2,\ \textcolor{stringliteral}{"{}output\_ports()\ should\ return\ reference"{}});}
\DoxyCodeLine{01025\ \}}
\DoxyCodeLine{01026\ }
\DoxyCodeLine{01027\ \textcolor{keyword}{template}<\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}>\ \textcolor{keyword}{class\ }ReservingNodeType,\ \textcolor{keyword}{typename}\ DataType,\ \textcolor{keywordtype}{bool}\ DoClear\ >}
\DoxyCodeLine{01028\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classharness__reserving__body_aebcf65b82e882d9a1d2bf9a98ef1eba7}{harness\_reserving\_body}}\ :\ \mbox{\hyperlink{class_no_assign_acb5f52ed820065725301a8152ccc2eb3}{NoAssign}}\ \{}
\DoxyCodeLine{01029\ \ \ \ \ ReservingNodeType<DataType>\ \&\mbox{\hyperlink{classharness__reserving__body_a2464f51efa57e19359b34494b70d7c01}{my\_reserving\_node}};}
\DoxyCodeLine{01030\ \ \ \ \ tbb::flow::buffer\_node<DataType>\ \&\mbox{\hyperlink{classharness__reserving__body_a8f261115830047000ad993ccc0c71b69}{my\_buffer\_node}};}
\DoxyCodeLine{01031\ \textcolor{keyword}{public}:}
\DoxyCodeLine{01032\ \ \ \ \ \mbox{\hyperlink{classharness__reserving__body_aebcf65b82e882d9a1d2bf9a98ef1eba7}{harness\_reserving\_body}}(ReservingNodeType<DataType>\ \&reserving\_node,\ tbb::flow::buffer\_node<DataType>\ \&bn)\ :\ \mbox{\hyperlink{classharness__reserving__body_a2464f51efa57e19359b34494b70d7c01}{my\_reserving\_node}}(reserving\_node),\ \mbox{\hyperlink{classharness__reserving__body_a8f261115830047000ad993ccc0c71b69}{my\_buffer\_node}}(bn)\ \{\}}
\DoxyCodeLine{01033\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classharness__reserving__body_a3e1ca95a06f8f781d8a599f93955d862}{operator()}}(DataType\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{01034\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classharness__reserving__body_a2464f51efa57e19359b34494b70d7c01}{my\_reserving\_node}}.try\_put(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{01035\ \textcolor{preprocessor}{\#if\ \_MSC\_VER\ \&\&\ !\_\_INTEL\_COMPILER}}
\DoxyCodeLine{01036\ \textcolor{preprocessor}{\#pragma\ warning\ (push)}}
\DoxyCodeLine{01037\ \textcolor{preprocessor}{\#pragma\ warning\ (disable:\ 4127)\ \ }\textcolor{comment}{/*\ suppress\ conditional\ expression\ is\ constant\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{01038\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01039\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (DoClear)\ \{}
\DoxyCodeLine{01040\ \textcolor{preprocessor}{\#if\ \_MSC\_VER\ \&\&\ !\_\_INTEL\_COMPILER}}
\DoxyCodeLine{01041\ \textcolor{preprocessor}{\#pragma\ warning\ (pop)}}
\DoxyCodeLine{01042\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01043\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classharness__reserving__body_a2464f51efa57e19359b34494b70d7c01}{my\_reserving\_node}}.clear();}
\DoxyCodeLine{01044\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01045\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classharness__reserving__body_a8f261115830047000ad993ccc0c71b69}{my\_buffer\_node}}.try\_put(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{01046\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classharness__reserving__body_a2464f51efa57e19359b34494b70d7c01}{my\_reserving\_node}}.try\_put(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{01047\ \ \ \ \ \}}
\DoxyCodeLine{01048\ \};}
\DoxyCodeLine{01049\ }
\DoxyCodeLine{01050\ \textcolor{keyword}{template}<\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}>\ \textcolor{keyword}{class\ }ReservingNodeType,\ \textcolor{keyword}{typename}\ DataType\ >}
\DoxyCodeLine{01051\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{harness__graph_8h_a61044c71b2cf79bccfe2478b80dec3e5}{test\_reserving\_nodes}}()\ \{}
\DoxyCodeLine{01052\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ =\ 300;}
\DoxyCodeLine{01053\ }
\DoxyCodeLine{01054\ \ \ \ \ tbb::flow::graph\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}};}
\DoxyCodeLine{01055\ }
\DoxyCodeLine{01056\ \ \ \ \ ReservingNodeType<DataType>\ reserving\_n(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}});}
\DoxyCodeLine{01057\ }
\DoxyCodeLine{01058\ \ \ \ \ tbb::flow::buffer\_node<DataType>\ buffering\_n(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}});}
\DoxyCodeLine{01059\ \ \ \ \ tbb::flow::join\_node<\ tbb::flow::tuple<DataType,\ DataType>,\ tbb::flow::reserving\ >\ join\_n(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}});}
\DoxyCodeLine{01060\ \ \ \ \ \mbox{\hyperlink{structharness__counting__receiver}{harness\_counting\_receiver<\ tbb::flow::tuple<DataType,\ DataType>}}\ >\ end\_receiver(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}});}
\DoxyCodeLine{01061\ }
\DoxyCodeLine{01062\ \ \ \ \ tbb::flow::make\_edge(reserving\_n,\ tbb::flow::input\_port<0>(join\_n));}
\DoxyCodeLine{01063\ \ \ \ \ tbb::flow::make\_edge(buffering\_n,\ tbb::flow::input\_port<1>(join\_n));}
\DoxyCodeLine{01064\ \ \ \ \ tbb::flow::make\_edge(join\_n,\ end\_receiver);}
\DoxyCodeLine{01065\ }
\DoxyCodeLine{01066\ \ \ \ \ \mbox{\hyperlink{harness_8h_ad5b2c9cf4e169014b7919debb3c91d45}{NativeParallelFor}}(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ \mbox{\hyperlink{classharness__reserving__body}{harness\_reserving\_body<ReservingNodeType,\ DataType,\ false>}}(reserving\_n,\ buffering\_n));}
\DoxyCodeLine{01067\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{01068\ }
\DoxyCodeLine{01069\ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(end\_receiver.\mbox{\hyperlink{structharness__counting__receiver_aeaa4eb5eb283464012ef33d88ba8cb90}{my\_count}}\ ==\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{01070\ }
\DoxyCodeLine{01071\ \ \ \ \ \textcolor{comment}{//\ Should\ not\ hang}}
\DoxyCodeLine{01072\ \ \ \ \ \mbox{\hyperlink{harness_8h_ad5b2c9cf4e169014b7919debb3c91d45}{NativeParallelFor}}(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ \mbox{\hyperlink{classharness__reserving__body}{harness\_reserving\_body<ReservingNodeType,\ DataType,\ true>}}(reserving\_n,\ buffering\_n));}
\DoxyCodeLine{01073\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{01074\ }
\DoxyCodeLine{01075\ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(end\_receiver.\mbox{\hyperlink{structharness__counting__receiver_aeaa4eb5eb283464012ef33d88ba8cb90}{my\_count}}\ ==\ 2\ *\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{01076\ \}}
\DoxyCodeLine{01077\ }
\DoxyCodeLine{01078\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacelightweight__testing}{lightweight\_testing}}\ \{}
\DoxyCodeLine{01079\ }
\DoxyCodeLine{01080\ \textcolor{keyword}{typedef}\ tbb::flow::tuple<int,\ int>\ \mbox{\hyperlink{namespacelightweight__testing_a2b46626c0c08e16351e9b3be52d6548b}{output\_tuple\_type}};}
\DoxyCodeLine{01081\ }
\DoxyCodeLine{01082\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ NodeType>}
\DoxyCodeLine{01083\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classlightweight__testing_1_1native__loop__body_a490f6a0ad9403d09ec8d5b5ccd176423}{native\_loop\_body}}\ :\ \mbox{\hyperlink{class_no_assign_acb5f52ed820065725301a8152ccc2eb3}{NoAssign}}\ \{}
\DoxyCodeLine{01084\ \ \ \ \ NodeType\&\ \mbox{\hyperlink{classlightweight__testing_1_1native__loop__body_aa1b052e42fe8bfa11cbeb9dd6dbe5616}{my\_node}};}
\DoxyCodeLine{01085\ \textcolor{keyword}{public}:}
\DoxyCodeLine{01086\ \ \ \ \ \mbox{\hyperlink{classlightweight__testing_1_1native__loop__body_a490f6a0ad9403d09ec8d5b5ccd176423}{native\_loop\_body}}(NodeType\&\ node)\ :\ \mbox{\hyperlink{classlightweight__testing_1_1native__loop__body_aa1b052e42fe8bfa11cbeb9dd6dbe5616}{my\_node}}(node)\ \{\}}
\DoxyCodeLine{01087\ }
\DoxyCodeLine{01088\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classlightweight__testing_1_1native__loop__body_a28c20aa104fb63661b5742274875176d}{operator()}}(\textcolor{keywordtype}{int})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{01089\ \ \ \ \ \ \ \ \ tbb::tbb\_thread::id\ this\_id\ =\ \mbox{\hyperlink{namespacetbb_1_1this__tbb__thread_aca0255d2952986275a6f2575118f822f}{tbb::this\_tbb\_thread::get\_id}}();}
\DoxyCodeLine{01090\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classlightweight__testing_1_1native__loop__body_aa1b052e42fe8bfa11cbeb9dd6dbe5616}{my\_node}}.try\_put(this\_id);}
\DoxyCodeLine{01091\ \ \ \ \ \}}
\DoxyCodeLine{01092\ \};}
\DoxyCodeLine{01093\ }
\DoxyCodeLine{01094\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classlightweight__testing_1_1concurrency__checker__body_abb84ae2169ae9c6d572d2d6612f2dd4d}{concurrency\_checker\_body}}\ \{}
\DoxyCodeLine{01095\ \textcolor{keyword}{public}:}
\DoxyCodeLine{01096\ \ \ \ \ tbb::atomic<unsigned>\ \mbox{\hyperlink{classlightweight__testing_1_1concurrency__checker__body_a3c391533ae887cbe3222af39c37bf507}{my\_body\_count}};}
\DoxyCodeLine{01097\ }
\DoxyCodeLine{01098\ \ \ \ \ \mbox{\hyperlink{classlightweight__testing_1_1concurrency__checker__body_abb84ae2169ae9c6d572d2d6612f2dd4d}{concurrency\_checker\_body}}()\ \{}
\DoxyCodeLine{01099\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classlightweight__testing_1_1concurrency__checker__body_a3c391533ae887cbe3222af39c37bf507}{my\_body\_count}}\ =\ 0;}
\DoxyCodeLine{01100\ \ \ \ \ \}}
\DoxyCodeLine{01101\ }
\DoxyCodeLine{01102\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ gateway\_type>}
\DoxyCodeLine{01103\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classlightweight__testing_1_1concurrency__checker__body_aa0a70876ca74053483fb036366739e9e}{operator()}}(\textcolor{keyword}{const}\ tbb::tbb\_thread::id\&\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}},\ gateway\_type\&)\ \{}
\DoxyCodeLine{01104\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classlightweight__testing_1_1concurrency__checker__body_ad9ceb6028587c15aae704c603e9c05d6}{increase\_and\_check}}(\mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}});}
\DoxyCodeLine{01105\ \ \ \ \ \}}
\DoxyCodeLine{01106\ }
\DoxyCodeLine{01107\ \ \ \ \ \mbox{\hyperlink{namespacelightweight__testing_a2b46626c0c08e16351e9b3be52d6548b}{output\_tuple\_type}}\ \mbox{\hyperlink{classlightweight__testing_1_1concurrency__checker__body_a3b709feab1e078c3734978ad45525ef0}{operator()}}(\textcolor{keyword}{const}\ tbb::tbb\_thread::id\&\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}})\ \{}
\DoxyCodeLine{01108\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classlightweight__testing_1_1concurrency__checker__body_ad9ceb6028587c15aae704c603e9c05d6}{increase\_and\_check}}(\mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}});}
\DoxyCodeLine{01109\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacelightweight__testing_a2b46626c0c08e16351e9b3be52d6548b}{output\_tuple\_type}}();}
\DoxyCodeLine{01110\ \ \ \ \ \}}
\DoxyCodeLine{01111\ }
\DoxyCodeLine{01112\ \textcolor{keyword}{private}:}
\DoxyCodeLine{01113\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classlightweight__testing_1_1concurrency__checker__body_ad9ceb6028587c15aae704c603e9c05d6}{increase\_and\_check}}(\textcolor{keyword}{const}\ tbb::tbb\_thread::id\&\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}})\ \{}
\DoxyCodeLine{01114\ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{classlightweight__testing_1_1concurrency__checker__body_a3c391533ae887cbe3222af39c37bf507}{my\_body\_count}};}
\DoxyCodeLine{01115\ \ \ \ \ \ \ \ \ tbb::tbb\_thread::id\ body\_thread\_id\ =\ \mbox{\hyperlink{namespacetbb_1_1this__tbb__thread_aca0255d2952986275a6f2575118f822f}{tbb::this\_tbb\_thread::get\_id}}();}
\DoxyCodeLine{01116\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}}\ ==\ body\_thread\_id,\ \textcolor{stringliteral}{"{}Body\ executed\ as\ not\ lightweight"{}});}
\DoxyCodeLine{01117\ \ \ \ \ \}}
\DoxyCodeLine{01118\ \};}
\DoxyCodeLine{01119\ }
\DoxyCodeLine{01120\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ NodeType>}
\DoxyCodeLine{01121\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacelightweight__testing_abf351cbb068152ec580cd00812b96762}{test\_unlimited\_lightweight\_execution}}(\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}})\ \{}
\DoxyCodeLine{01122\ \ \ \ \ tbb::flow::graph\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}};}
\DoxyCodeLine{01123\ \ \ \ \ NodeType\ node(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ \mbox{\hyperlink{namespacetbb_1_1flow_a7bec4a3445fea3cd5974119730dea98fa055f73cf8d1365373099754b89cb9ac4}{tbb::flow::unlimited}},\ \mbox{\hyperlink{classlightweight__testing_1_1concurrency__checker__body}{concurrency\_checker\_body}}());}
\DoxyCodeLine{01124\ }
\DoxyCodeLine{01125\ \ \ \ \ \mbox{\hyperlink{harness_8h_ad5b2c9cf4e169014b7919debb3c91d45}{NativeParallelFor}}(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ \mbox{\hyperlink{classlightweight__testing_1_1native__loop__body}{native\_loop\_body<NodeType>}}(node));}
\DoxyCodeLine{01126\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{01127\ }
\DoxyCodeLine{01128\ \ \ \ \ \mbox{\hyperlink{classlightweight__testing_1_1concurrency__checker__body}{concurrency\_checker\_body}}\ body\ =\ tbb::flow::copy\_body<concurrency\_checker\_body>(node);}
\DoxyCodeLine{01129\ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(body.\mbox{\hyperlink{classlightweight__testing_1_1concurrency__checker__body_a3c391533ae887cbe3222af39c37bf507}{my\_body\_count}}\ ==\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ \textcolor{stringliteral}{"{}Body\ needs\ to\ be\ executed\ N\ times"{}});}
\DoxyCodeLine{01130\ \}}
\DoxyCodeLine{01131\ }
\DoxyCodeLine{01132\ \textcolor{comment}{//\ Using\ TBB\ implementation\ of\ condition\ variable}}
\DoxyCodeLine{01133\ \textcolor{comment}{//\ not\ to\ include\ std\ header,\ which\ has\ problems\ with\ old\ GCC}}
\DoxyCodeLine{01134\ \textcolor{keyword}{using\ }tbb::interface5::condition\_variable;}
\DoxyCodeLine{01135\ \textcolor{keyword}{using\ }tbb::interface5::unique\_lock;}
\DoxyCodeLine{01136\ }
\DoxyCodeLine{01137\ tbb::mutex\ \mbox{\hyperlink{namespacelightweight__testing_a448879c1355284d9fc288871d9953f42}{m}};}
\DoxyCodeLine{01138\ condition\_variable\ \mbox{\hyperlink{namespacelightweight__testing_a8775cf238b6004a5726b13d05951b2ce}{lightweight\_condition}};}
\DoxyCodeLine{01139\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacelightweight__testing_ad072b894f26771e91e83e502befb4e67}{work\_submitted}};}
\DoxyCodeLine{01140\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacelightweight__testing_a46b659a9ac0642faf68e5c8e6de0aa24}{lightweight\_work\_processed}};}
\DoxyCodeLine{01141\ }
\DoxyCodeLine{01142\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ NodeType>}
\DoxyCodeLine{01143\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classlightweight__testing_1_1native__loop__limited__body_a152775ad8dd4b9a32bbe39cc3c890d61}{native\_loop\_limited\_body}}\ :\ \mbox{\hyperlink{class_no_assign_acb5f52ed820065725301a8152ccc2eb3}{NoAssign}}\ \{}
\DoxyCodeLine{01144\ \ \ \ \ NodeType\&\ \mbox{\hyperlink{classlightweight__testing_1_1native__loop__limited__body_a5c6b038f1613d090d734089bdc7ad45f}{my\_node}};}
\DoxyCodeLine{01145\ \ \ \ \ \mbox{\hyperlink{class_harness_1_1_spin_barrier}{Harness::SpinBarrier}}\&\ \mbox{\hyperlink{classlightweight__testing_1_1native__loop__limited__body_ad0ce9c444b5c10bacd7d6236151f2573}{my\_barrier}};}
\DoxyCodeLine{01146\ \textcolor{keyword}{public}:}
\DoxyCodeLine{01147\ \ \ \ \ \mbox{\hyperlink{classlightweight__testing_1_1native__loop__limited__body_a152775ad8dd4b9a32bbe39cc3c890d61}{native\_loop\_limited\_body}}(NodeType\&\ node,\ \mbox{\hyperlink{class_harness_1_1_spin_barrier}{Harness::SpinBarrier}}\&\ \mbox{\hyperlink{test__condition__variable_8h_a66a856f373cb24d6a669f2635ce27f18}{barrier}}):}
\DoxyCodeLine{01148\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classlightweight__testing_1_1native__loop__limited__body_a5c6b038f1613d090d734089bdc7ad45f}{my\_node}}(node),\ \mbox{\hyperlink{classlightweight__testing_1_1native__loop__limited__body_ad0ce9c444b5c10bacd7d6236151f2573}{my\_barrier}}(\mbox{\hyperlink{test__condition__variable_8h_a66a856f373cb24d6a669f2635ce27f18}{barrier}})\ \{\}}
\DoxyCodeLine{01149\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classlightweight__testing_1_1native__loop__limited__body_a51ee353e3600a07ff7441b090afeb14e}{operator()}}(\textcolor{keywordtype}{int})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{01150\ \ \ \ \ \ \ \ \ tbb::tbb\_thread::id\ this\_id\ =\ \mbox{\hyperlink{namespacetbb_1_1this__tbb__thread_aca0255d2952986275a6f2575118f822f}{tbb::this\_tbb\_thread::get\_id}}();}
\DoxyCodeLine{01151\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classlightweight__testing_1_1native__loop__limited__body_a5c6b038f1613d090d734089bdc7ad45f}{my\_node}}.try\_put(this\_id);}
\DoxyCodeLine{01152\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!\mbox{\hyperlink{namespacelightweight__testing_a46b659a9ac0642faf68e5c8e6de0aa24}{lightweight\_work\_processed}})\ \{}
\DoxyCodeLine{01153\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classlightweight__testing_1_1native__loop__limited__body_ad0ce9c444b5c10bacd7d6236151f2573}{my\_barrier}}.wait();}
\DoxyCodeLine{01154\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacelightweight__testing_ad072b894f26771e91e83e502befb4e67}{work\_submitted}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01155\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacelightweight__testing_a8775cf238b6004a5726b13d05951b2ce}{lightweight\_condition}}.notify\_all();}
\DoxyCodeLine{01156\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01157\ \ \ \ \ \}}
\DoxyCodeLine{01158\ \};}
\DoxyCodeLine{01159\ }
\DoxyCodeLine{01160\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structlightweight__testing_1_1condition__predicate}{condition\_predicate}}\ \{}
\DoxyCodeLine{01161\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structlightweight__testing_1_1condition__predicate_ac8e9eaa2569e7259271fbe3142db931e}{operator()}}()\ \{}
\DoxyCodeLine{01162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacelightweight__testing_ad072b894f26771e91e83e502befb4e67}{work\_submitted}};}
\DoxyCodeLine{01163\ \ \ \ \ \}}
\DoxyCodeLine{01164\ \};}
\DoxyCodeLine{01165\ }
\DoxyCodeLine{01166\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_a84f2c6e7a92ec984097ca3fb54c9df38}{limited\_lightweight\_checker\_body}}\ \{}
\DoxyCodeLine{01167\ \textcolor{keyword}{public}:}
\DoxyCodeLine{01168\ \ \ \ \ tbb::atomic<unsigned>\ \mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_aa331d827b1936500f42a9dd067872061}{my\_body\_count}};}
\DoxyCodeLine{01169\ \ \ \ \ tbb::atomic<unsigned>\ \mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_a88a08f540b58f4133e8788a74da11679}{my\_lightweight\_count}};}
\DoxyCodeLine{01170\ \ \ \ \ tbb::atomic<unsigned>\ \mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_ab33bb0919e948086ec54fa9366ea8cd2}{my\_task\_count}};}
\DoxyCodeLine{01171\ \ \ \ \ \mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_a84f2c6e7a92ec984097ca3fb54c9df38}{limited\_lightweight\_checker\_body}}()\ \{}
\DoxyCodeLine{01172\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_aa331d827b1936500f42a9dd067872061}{my\_body\_count}}\ =\ 0;}
\DoxyCodeLine{01173\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_a88a08f540b58f4133e8788a74da11679}{my\_lightweight\_count}}\ =\ 0;}
\DoxyCodeLine{01174\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_ab33bb0919e948086ec54fa9366ea8cd2}{my\_task\_count}}\ =\ 0;}
\DoxyCodeLine{01175\ \ \ \ \ \}}
\DoxyCodeLine{01176\ \textcolor{keyword}{private}:}
\DoxyCodeLine{01177\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_ac862bbe9901fe4dec65624dd4587d228}{increase\_and\_check}}(\textcolor{keyword}{const}\ tbb::tbb\_thread::id\&\ \textcolor{comment}{/*input*/})\ \{}
\DoxyCodeLine{01178\ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_aa331d827b1936500f42a9dd067872061}{my\_body\_count}};}
\DoxyCodeLine{01179\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_task\ =\ tbb::task::self().state()\ ==\ tbb::task::executing;}
\DoxyCodeLine{01180\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(is\_task)\ \{}
\DoxyCodeLine{01181\ \ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_ab33bb0919e948086ec54fa9366ea8cd2}{my\_task\_count}};}
\DoxyCodeLine{01182\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01183\ \ \ \ \ \ \ \ \ \ \ \ \ unique\_lock<tbb::mutex>\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{namespacelightweight__testing_a448879c1355284d9fc288871d9953f42}{m}});}
\DoxyCodeLine{01184\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacelightweight__testing_a8775cf238b6004a5726b13d05951b2ce}{lightweight\_condition}}.wait(\mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}},\ \mbox{\hyperlink{structlightweight__testing_1_1condition__predicate}{condition\_predicate}}());}
\DoxyCodeLine{01185\ \ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_a88a08f540b58f4133e8788a74da11679}{my\_lightweight\_count}};}
\DoxyCodeLine{01186\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacelightweight__testing_a46b659a9ac0642faf68e5c8e6de0aa24}{lightweight\_work\_processed}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01187\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01188\ \ \ \ \ \}}
\DoxyCodeLine{01189\ \textcolor{keyword}{public}:}
\DoxyCodeLine{01190\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ gateway\_type>}
\DoxyCodeLine{01191\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_a8ed10420643634734ce1fee5b060e78e}{operator()}}(\textcolor{keyword}{const}\ tbb::tbb\_thread::id\&\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}},\ gateway\_type\&)\ \{}
\DoxyCodeLine{01192\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_ac862bbe9901fe4dec65624dd4587d228}{increase\_and\_check}}(\mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}});}
\DoxyCodeLine{01193\ \ \ \ \ \}}
\DoxyCodeLine{01194\ \ \ \ \ \mbox{\hyperlink{namespacelightweight__testing_a2b46626c0c08e16351e9b3be52d6548b}{output\_tuple\_type}}\ \mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_ad9e9fafedc2c8c00a32320ce5540c0ee}{operator()}}(\textcolor{keyword}{const}\ tbb::tbb\_thread::id\&\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}})\ \{}
\DoxyCodeLine{01195\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_ac862bbe9901fe4dec65624dd4587d228}{increase\_and\_check}}(\mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}});}
\DoxyCodeLine{01196\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacelightweight__testing_a2b46626c0c08e16351e9b3be52d6548b}{output\_tuple\_type}}();}
\DoxyCodeLine{01197\ \ \ \ \ \}}
\DoxyCodeLine{01198\ \};}
\DoxyCodeLine{01199\ }
\DoxyCodeLine{01200\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ NodeType>}
\DoxyCodeLine{01201\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacelightweight__testing_a35228d449083329293176db6ca9e9883}{test\_limited\_lightweight\_execution}}(\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ \textcolor{keywordtype}{unsigned}\ concurrency)\ \{}
\DoxyCodeLine{01202\ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(concurrency\ !=\ \mbox{\hyperlink{namespacetbb_1_1flow_a7bec4a3445fea3cd5974119730dea98fa055f73cf8d1365373099754b89cb9ac4}{tbb::flow::unlimited}},}
\DoxyCodeLine{01203\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Test\ for\ limited\ concurrency\ cannot\ be\ called\ with\ unlimited\ concurrency\ argument"{}});}
\DoxyCodeLine{01204\ \ \ \ \ tbb::flow::graph\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}};}
\DoxyCodeLine{01205\ \ \ \ \ NodeType\ node(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ concurrency,\ \mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body}{limited\_lightweight\_checker\_body}}());}
\DoxyCodeLine{01206\ \ \ \ \ \textcolor{comment}{//\ Execute\ first\ body\ as\ lightweight,\ then\ wait\ for\ all\ other\ threads\ to\ fill\ internal\ buffer.}}
\DoxyCodeLine{01207\ \ \ \ \ \textcolor{comment}{//\ Then\ unblock\ the\ lightweightd\ thread\ and\ check\ if\ other\ body\ executions\ are\ inside\ TBB\ task.}}
\DoxyCodeLine{01208\ \ \ \ \ \mbox{\hyperlink{class_harness_1_1_spin_barrier}{Harness::SpinBarrier}}\ \mbox{\hyperlink{test__condition__variable_8h_a66a856f373cb24d6a669f2635ce27f18}{barrier}}(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ -\/\ concurrency);}
\DoxyCodeLine{01209\ \ \ \ \ \mbox{\hyperlink{harness_8h_ad5b2c9cf4e169014b7919debb3c91d45}{NativeParallelFor}}(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ \mbox{\hyperlink{classlightweight__testing_1_1native__loop__limited__body}{native\_loop\_limited\_body<NodeType>}}(node,\ \mbox{\hyperlink{test__condition__variable_8h_a66a856f373cb24d6a669f2635ce27f18}{barrier}}));}
\DoxyCodeLine{01210\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.wait\_for\_all();}
\DoxyCodeLine{01211\ \ \ \ \ \mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body}{limited\_lightweight\_checker\_body}}\ body\ =\ tbb::flow::copy\_body<limited\_lightweight\_checker\_body>(node);}
\DoxyCodeLine{01212\ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(body.\mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_aa331d827b1936500f42a9dd067872061}{my\_body\_count}}\ ==\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ \textcolor{stringliteral}{"{}Body\ needs\ to\ be\ executed\ N\ times"{}});}
\DoxyCodeLine{01213\ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(body.\mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_a88a08f540b58f4133e8788a74da11679}{my\_lightweight\_count}}\ ==\ concurrency,\ \textcolor{stringliteral}{"{}Body\ needs\ to\ be\ executed\ as\ lightweight\ once"{}});}
\DoxyCodeLine{01214\ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(body.\mbox{\hyperlink{classlightweight__testing_1_1limited__lightweight__checker__body_ab33bb0919e948086ec54fa9366ea8cd2}{my\_task\_count}}\ ==\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ -\/\ concurrency,\ \textcolor{stringliteral}{"{}Body\ needs\ to\ be\ executed\ as\ not\ lightweight\ N\ -\/\ 1\ times"{}});}
\DoxyCodeLine{01215\ \ \ \ \ \mbox{\hyperlink{namespacelightweight__testing_ad072b894f26771e91e83e502befb4e67}{work\_submitted}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01216\ \ \ \ \ \mbox{\hyperlink{namespacelightweight__testing_a46b659a9ac0642faf68e5c8e6de0aa24}{lightweight\_work\_processed}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01217\ \}}
\DoxyCodeLine{01218\ }
\DoxyCodeLine{01219\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ NodeType>}
\DoxyCodeLine{01220\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacelightweight__testing_a6cfe410b8c2f86064f29a76a119f3e62}{test\_lightweight}}(\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}})\ \{}
\DoxyCodeLine{01221\ \ \ \ \ \mbox{\hyperlink{namespacelightweight__testing_abf351cbb068152ec580cd00812b96762}{test\_unlimited\_lightweight\_execution<NodeType>}}(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}});}
\DoxyCodeLine{01222\ \ \ \ \ \mbox{\hyperlink{namespacelightweight__testing_a35228d449083329293176db6ca9e9883}{test\_limited\_lightweight\_execution<NodeType>}}(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ \mbox{\hyperlink{namespacetbb_1_1flow_a7bec4a3445fea3cd5974119730dea98fa76917a07891f92f41cfe7b357e1fa874}{tbb::flow::serial}});}
\DoxyCodeLine{01223\ \ \ \ \ \mbox{\hyperlink{namespacelightweight__testing_a35228d449083329293176db6ca9e9883}{test\_limited\_lightweight\_execution<NodeType>}}(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ (\mbox{\hyperlink{namespacestd_ac7b9885417769949d76890454b6d072e}{std::min}})(tbb::tbb\_thread::hardware\_concurrency()\ /\ 2,\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}/2));}
\DoxyCodeLine{01224\ \}}
\DoxyCodeLine{01225\ }
\DoxyCodeLine{01226\ \textcolor{keyword}{template}<\textcolor{keyword}{template}<\textcolor{keyword}{typename},\ \textcolor{keyword}{typename},\ \textcolor{keyword}{typename},\ \textcolor{keyword}{typename}>\ \textcolor{keyword}{class\ }NodeType>}
\DoxyCodeLine{01227\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacelightweight__testing_a2d792d69247f519642a226cb93b1cbee}{test}}(\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}})\ \{}
\DoxyCodeLine{01228\ \ \ \ \ \textcolor{keyword}{typedef}\ tbb::tbb\_thread::id\ input\_type;}
\DoxyCodeLine{01229\ \textcolor{preprocessor}{\#if\ TBB\_DEPRECATED\_FLOW\_NODE\_ALLOCATOR}}
\DoxyCodeLine{01230\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classtbb_1_1cache__aligned__allocator}{tbb::cache\_aligned\_allocator<input\_type>}}\ allocator\_type;}
\DoxyCodeLine{01231\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01232\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structtbb_1_1flow_1_1interface11_1_1null__type}{tbb::flow::interface11::null\_type}}\ allocator\_type;}
\DoxyCodeLine{01233\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01234\ \ \ \ \ \textcolor{keyword}{typedef}\ NodeType<input\_type,\ output\_tuple\_type,\ tbb::flow::queueing\_lightweight,\ allocator\_type>\ node\_type;}
\DoxyCodeLine{01235\ \ \ \ \ \mbox{\hyperlink{namespacelightweight__testing_a6cfe410b8c2f86064f29a76a119f3e62}{test\_lightweight<node\_type>}}(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}});}
\DoxyCodeLine{01236\ \}}
\DoxyCodeLine{01237\ }
\DoxyCodeLine{01238\ \}}
\DoxyCodeLine{01239\ }
\DoxyCodeLine{01240\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
