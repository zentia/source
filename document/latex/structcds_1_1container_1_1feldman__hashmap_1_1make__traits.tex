\doxysection{cds\+::container\+::feldman\+\_\+hashmap\+::make\+\_\+traits\texorpdfstring{$<$}{<} Options \texorpdfstring{$>$}{>} 模板结构体 参考}
\hypertarget{structcds_1_1container_1_1feldman__hashmap_1_1make__traits}{}\label{structcds_1_1container_1_1feldman__hashmap_1_1make__traits}\index{cds::container::feldman\_hashmap::make\_traits$<$ Options $>$@{cds::container::feldman\_hashmap::make\_traits$<$ Options $>$}}


Metafunction converting option list to {\ttfamily \doxylink{structcds_1_1container_1_1feldman__hashmap_1_1traits}{feldman\+\_\+hashmap\+::traits}}  




{\ttfamily \#include $<$feldman\+\_\+hashmap\+\_\+base.\+h$>$}

\doxysubsubsection*{Public 类型}
\begin{DoxyCompactItemize}
\item 
typedef \mbox{\hyperlink{structcds_1_1opt_1_1make__options}{cds\+::opt\+::make\+\_\+options}}$<$ typenamecds\+::opt\+::find\+\_\+type\+\_\+traits$<$ \mbox{\hyperlink{structcds_1_1container_1_1feldman__hashmap_1_1traits}{traits}}, Options... $>$\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{\+::type}}, Options... $>$\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{\+::type}} \mbox{\hyperlink{structcds_1_1container_1_1feldman__hashmap_1_1make__traits_a23db79001af9a9a01d533af4a34a4f33}{type}}
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
\subsubsection*{template$<$typename... Options$>$\newline
struct cds\+::container\+::feldman\+\_\+hashmap\+::make\+\_\+traits$<$ Options $>$}
Metafunction converting option list to {\ttfamily \doxylink{structcds_1_1container_1_1feldman__hashmap_1_1traits}{feldman\+\_\+hashmap\+::traits}} 

Supported {\ttfamily Options} are\+:
\begin{DoxyItemize}
\item {\ttfamily \doxylink{structcds_1_1opt_1_1hash}{opt\+::hash}} -\/ a hash functor, default is {\ttfamily std\+::hash}   {\ttfamily \doxylink{classcds_1_1container_1_1_feldman_hash_map}{Feldman\+Hash\+Map}} may use any hash functor converting a key to fixed-\/sized bit-\/string, for example, \href{https://en.wikipedia.org/wiki/Secure_Hash_Algorithm}{\texttt{ SHA1, SHA2}}, \href{https://en.wikipedia.org/wiki/MurmurHash}{\texttt{ Murmur\+Hash}}, \href{https://en.wikipedia.org/wiki/CityHash}{\texttt{ City\+Hash}} or its successor \href{https://code.google.com/p/farmhash/}{\texttt{ Farm\+Hash}}.
\end{DoxyItemize}

If you use a fixed-\/sized key you can use it directly instead of a hash. In such case {\ttfamily traits\+::hash} should be specified as {\ttfamily \doxylink{structcds_1_1opt_1_1none}{opt\+::none}}. However, if you want to use the hash values or if your key type is not fixed-\/sized you must specify a proper hash functor in your traits. For example\+: fixed-\/sized key -\/ IP4 address map 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Key\ -\/\ IP\ address}}
\DoxyCodeLine{\textcolor{keyword}{struct\ }ip4\_address\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}\ ip[4];}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ IP\ compare}}
\DoxyCodeLine{\textcolor{keyword}{struct\ }ip4\_cmp\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{int}\ operator()(\ ip4\_address\ \textcolor{keyword}{const}\&\ lhs,\ ip4\_address\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}}\ )\textcolor{keyword}{\ const}}
\DoxyCodeLine{\textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ memcmp(\ \&lhs,\ \&\mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}},\ \textcolor{keyword}{sizeof}(lhs));}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Value\ -\/\ statistics\ for\ the\ IP\ address}}
\DoxyCodeLine{\textcolor{keyword}{struct\ }statistics\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ ...}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Traits}}
\DoxyCodeLine{\textcolor{comment}{//\ Key\ type\ (ip4\_addr)\ is\ fixed-\/sized\ so\ we\ may\ use\ the\ map\ without\ any\ hash\ functor}}
\DoxyCodeLine{\textcolor{keyword}{struct\ }ip4\_map\_traits:\ \textcolor{keyword}{public}\ cds::container::multilevl\_hashmap::traits}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{typedef}\ ip4\_cmp\ \ \mbox{\hyperlink{namespacedetail_a1c8903223d22f77cec931b5649c72d4e}{compare}};}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ IP4\ address\ -\/\ statistics\ map}}
\DoxyCodeLine{\textcolor{keyword}{typedef}\ cds::container::FeldmanHashMap<\ cds::gc::HP,\ ip4\_address,\ statistics,\ ip4\_map\_traits\ >\ ip4\_map;}

\end{DoxyCode}


variable-\/size key requires a hash functor\+: URL map 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Value\ -\/\ statistics\ for\ the\ URL}}
\DoxyCodeLine{\textcolor{keyword}{struct\ }statistics\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ ...}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Traits}}
\DoxyCodeLine{\textcolor{comment}{//\ Key\ type\ (std::string)\ is\ variable-\/sized\ so\ we\ must\ provide\ a\ hash\ functor\ in\ our\ traits}}
\DoxyCodeLine{\textcolor{comment}{//\ We\ do\ not\ specify\ any\ comparing\ predicate\ (less\ or\ compare)\ so\ <tt>\ std::less<std::string>\ </tt>\ will\ be\ used\ by\ default}}
\DoxyCodeLine{\textcolor{keyword}{struct\ }url\_map\_traits:\ \textcolor{keyword}{public}\ cds::container::multilevl\_hashmap::traits}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{typedef}\ std::hash<std::string>\ \mbox{\hyperlink{namespacenlohmann_1_1detail_a679e5e522ac6afa5d5923292fab450b8}{hash}};}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ URL\ statistics\ map}}
\DoxyCodeLine{\textcolor{keyword}{typedef}\ cds::container::FeldmanHashMap<\ cds::gc::HP,\ std::string,\ statistics,\ url\_map\_traits\ >\ url\_map;}

\end{DoxyCode}
   
\begin{DoxyItemize}
\item {\ttfamily \doxylink{namespacecds_1_1container_1_1feldman__hashmap_aac464218e5e7db50daf81f91633977e0}{feldman\+\_\+hashmap\+::hash\+\_\+size}} -\/ the size of hash value in bytes.   By default, the size of hash value is {\ttfamily sizeof( hash\+\_\+type )} where {\ttfamily hash\+\_\+type} is type of {\ttfamily \doxylink{structhash}{hash()}} result or {\ttfamily sizeof( key )} if you use fixed-\/sized key.
\end{DoxyItemize}

Sometimes that size is wrong, for example, for that 6-\/byte key\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct\ }key\_type\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}};}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{eabase_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t}}\ \ \ \ subkey;}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{static\_assert}(\ \textcolor{keyword}{sizeof}(\ key\_type\ )\ ==\ 6,\ \textcolor{stringliteral}{"{}Key\ type\ size\ mismatch"{}}\ );}

\end{DoxyCode}
 Here {\ttfamily sizeof( key\+\_\+type ) == 8} so {\ttfamily static\+\_\+assert} will be thrown.

For that case you can specify {\ttfamily \doxylink{namespacecds_1_1container_1_1feldman__hashmap_aac464218e5e7db50daf81f91633977e0}{hash\+\_\+size}} explicitly.

\doxylink{struct_value}{Value} {\ttfamily 0} means auto-\/calculated {\ttfamily sizeof( key\+\_\+type )}.   
\begin{DoxyItemize}
\item {\ttfamily \doxylink{structcds_1_1opt_1_1allocator}{opt\+::allocator}} -\/ item allocator   Default is \doxylink{external_2libcds_2cds_2user__setup_2allocator_8h_ad5fb7e3cbe8cf24295f0ea3c165a2d82}{CDS\+\_\+\+DEFAULT\+\_\+\+ALLOCATOR}   
\item {\ttfamily \doxylink{structcds_1_1opt_1_1node__allocator}{opt\+::node\+\_\+allocator}} -\/ array node allocator.     Allocator for array nodes. The allocator is used for creating {\ttfamily head\+Node} and {\ttfamily array\+Node} when the set grows. Default is \doxylink{external_2libcds_2cds_2user__setup_2allocator_8h_ad5fb7e3cbe8cf24295f0ea3c165a2d82}{CDS\+\_\+\+DEFAULT\+\_\+\+ALLOCATOR}      
\item {\ttfamily \doxylink{structcds_1_1opt_1_1compare}{opt\+::compare}} -\/ hash comparison functor. No default functor is provided. If the option is not specified, the {\ttfamily \doxylink{structcds_1_1opt_1_1less}{opt\+::less}} is used.
\item {\ttfamily \doxylink{structcds_1_1opt_1_1less}{opt\+::less}} -\/ specifies binary predicate used for hash comparison.     If {\ttfamily less} and {\ttfamily compare} are not specified, {\ttfamily memcmp()} -\/like \doxylink{namespacecds_1_1container_1_1feldman__hashmap_ab458e6b05519422e67d4ad3662618eb3}{bit-\/wise hash comparator} is used because the hash value is treated as fixed-\/sized bit-\/string.      
\item {\ttfamily \doxylink{structcds_1_1opt_1_1back__off}{opt\+::back\+\_\+off}} -\/ back-\/off strategy used. If the option is not specified, the {\ttfamily \doxylink{namespacecds_1_1backoff_a0f64f7bc371e3ad006fba5bd855d6e96}{cds\+::backoff\+::\+Default}} is used.
\item {\ttfamily \doxylink{structcds_1_1opt_1_1item__counter}{opt\+::item\+\_\+counter}} -\/ the type of item counting feature.     The item counting is an important part of {\ttfamily \doxylink{classcds_1_1container_1_1_feldman_hash_set}{Feldman\+Hash\+Set}} algorithm\+: the {\ttfamily empty()} member function depends on correct item counting. Therefore, {\ttfamily \doxylink{classcds_1_1atomicity_1_1empty__item__counter}{atomicity\+::empty\+\_\+item\+\_\+counter}} is not allowed as a type of the option.
\end{DoxyItemize}

Default is {\ttfamily \doxylink{classcds_1_1atomicity_1_1item__counter}{atomicity\+::item\+\_\+counter}}. To avoid false sharing you can aldo use {\ttfamily \doxylink{classcds_1_1atomicity_1_1cache__friendly__item__counter}{atomicity\+::cache\+\_\+friendly\+\_\+item\+\_\+counter}}      
\begin{DoxyItemize}
\item {\ttfamily \doxylink{structcds_1_1opt_1_1memory__model}{opt\+::memory\+\_\+model}} -\/ C++ memory ordering model. Can be {\ttfamily \doxylink{structcds_1_1opt_1_1v_1_1relaxed__ordering}{opt\+::v\+::relaxed\+\_\+ordering}} (relaxed memory model, the default) or {\ttfamily \doxylink{structcds_1_1opt_1_1v_1_1sequential__consistent}{opt\+::v\+::sequential\+\_\+consistent}} (sequentially consisnent memory model).
\item {\ttfamily \doxylink{structcds_1_1opt_1_1stat}{opt\+::stat}} -\/ internal statistics. By default, it is disabled ({\ttfamily \doxylink{namespacecds_1_1container_1_1feldman__hashmap_a9c445ff90ac81d9b87bf45e2f47a1592}{feldman\+\_\+hashmap\+::empty\+\_\+stat}}). To enable it use {\ttfamily \doxylink{namespacecds_1_1container_1_1feldman__hashmap_a2f7dbfa506c13b68c25266a34da85597}{feldman\+\_\+hashmap\+::stat}} 
\item {\ttfamily \doxylink{structcds_1_1opt_1_1rcu__check__deadlock}{opt\+::rcu\+\_\+check\+\_\+deadlock}} -\/ a deadlock checking policy for \doxylink{classcds_1_1intrusive_1_1_feldman_hash_set_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_t_00_01_traits_01_4_cds_intrusive_FeldmanHashSet_rcu}{RCU-\/based Feldman\+Hash\+Set} Default is {\ttfamily \doxylink{structcds_1_1opt_1_1v_1_1rcu__throw__deadlock}{opt\+::v\+::rcu\+\_\+throw\+\_\+deadlock}} 
\end{DoxyItemize}

\doxysubsection{成员类型定义说明}
\Hypertarget{structcds_1_1container_1_1feldman__hashmap_1_1make__traits_a23db79001af9a9a01d533af4a34a4f33}\index{cds::container::feldman\_hashmap::make\_traits$<$ Options $>$@{cds::container::feldman\_hashmap::make\_traits$<$ Options $>$}!type@{type}}
\index{type@{type}!cds::container::feldman\_hashmap::make\_traits$<$ Options $>$@{cds::container::feldman\_hashmap::make\_traits$<$ Options $>$}}
\doxysubsubsection{\texorpdfstring{type}{type}}
{\footnotesize\ttfamily \label{structcds_1_1container_1_1feldman__hashmap_1_1make__traits_a23db79001af9a9a01d533af4a34a4f33} 
template$<$typename... Options$>$ \\
typedef \mbox{\hyperlink{structcds_1_1opt_1_1make__options}{cds\+::opt\+::make\+\_\+options}}$<$typenamecds\+::opt\+::find\+\_\+type\+\_\+traits$<$\mbox{\hyperlink{structcds_1_1container_1_1feldman__hashmap_1_1traits}{traits}},Options...$>$\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{\+::type}},Options...$>$\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{\+::type}} \mbox{\hyperlink{structcds_1_1container_1_1feldman__hashmap_1_1make__traits}{cds\+::container\+::feldman\+\_\+hashmap\+::make\+\_\+traits}}$<$ Options $>$\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{\+::type}}}



该结构体的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/libcds/cds/container/details/\mbox{\hyperlink{feldman__hashmap__base_8h}{feldman\+\_\+hashmap\+\_\+base.\+h}}\end{DoxyCompactItemize}
