\doxysection{parallel\+\_\+for\+\_\+internals.\+hpp}
\hypertarget{parallel__for__internals_8hpp_source}{}\label{parallel__for__internals_8hpp_source}\index{external/taskflow/3rd-\/party/ff/parallel\_for\_internals.hpp@{external/taskflow/3rd-\/party/ff/parallel\_for\_internals.hpp}}
\mbox{\hyperlink{parallel__for__internals_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ -\/*-\/\ Mode:\ C++;\ tab-\/width:\ 4;\ c-\/basic-\/offset:\ 4;\ indent-\/tabs-\/mode:\ nil\ -\/*-\/\ */}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00010\ \ }
\DoxyCodeLine{00011\ \textcolor{comment}{/*\ ***************************************************************************}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ \ FastFlow\ is\ free\ software;\ you\ can\ redistribute\ it\ and/or\ modify\ it}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ \ under\ the\ terms\ of\ the\ GNU\ Lesser\ General\ Public\ License\ version\ 3\ as}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ \ published\ by\ the\ Free\ Software\ Foundation.}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *\ \ Starting\ from\ version\ 3.0.1\ FastFlow\ is\ dual\ licensed\ under\ the\ GNU\ LGPLv3}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ \ or\ MIT\ License\ (https://github.com/ParaGroup/WindFlow/blob/vers3.x/LICENSE.MIT)}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ \ This\ program\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,\ but\ WITHOUT}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *\ \ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of\ MERCHANTABILITY\ or}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ *\ \ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the\ GNU\ Lesser\ General\ Public}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ *\ \ License\ for\ more\ details.}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00024\ \textcolor{comment}{\ *\ \ You\ should\ have\ received\ a\ copy\ of\ the\ GNU\ Lesser\ General\ Public\ License}}
\DoxyCodeLine{00025\ \textcolor{comment}{\ *\ \ along\ with\ this\ program;\ if\ not,\ write\ to\ the\ Free\ Software\ Foundation,}}
\DoxyCodeLine{00026\ \textcolor{comment}{\ *\ \ Inc.,\ 59\ Temple\ Place\ -\/\ Suite\ 330,\ Boston,\ MA\ 02111-\/1307,\ USA.}}
\DoxyCodeLine{00027\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00028\ \textcolor{comment}{\ ****************************************************************************}}
\DoxyCodeLine{00029\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{comment}{/*}}
\DoxyCodeLine{00032\ \textcolor{comment}{\ *\ \ -\/\ Author:\ }}
\DoxyCodeLine{00033\ \textcolor{comment}{\ *\ \ \ \ \ Massimo\ Torquati\ <torquati@di.unipi.it>}}
\DoxyCodeLine{00034\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00035\ \textcolor{comment}{\ *\ \ \ \ History:\ }}
\DoxyCodeLine{00036\ \textcolor{comment}{\ *\ \ \ \ \ \ -\/\ started\ in\ May\ 2013}}
\DoxyCodeLine{00037\ \textcolor{comment}{\ *\ \ \ \ \ \ -\/\ January\ 2014:\ code\ optimized}}
\DoxyCodeLine{00038\ \textcolor{comment}{\ *\ \ \ \ \ \ -\/\ February\ 2014:\ }}
\DoxyCodeLine{00039\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ -\/\ avoided\ to\ start\ the\ Scheduler\ thread\ if\ it\ is\ not\ needed}}
\DoxyCodeLine{00040\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ A\ new\ (non\ lock-\/free)\ decentralized\ scheduler\ has\ been\ implemented\ }}
\DoxyCodeLine{00041\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ for\ the\ case\ when\ adding\ an\ extra\ thread\ is\ not\ useful.}}
\DoxyCodeLine{00042\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ -\/\ introduced\ the\ parallel\_for\ functions}}
\DoxyCodeLine{00043\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ -\/\ added\ the\ ParallelFor\ and\ ParallelForReduce\ classes}}
\DoxyCodeLine{00044\ \textcolor{comment}{\ *\ \ \ \ \ \ -\/\ June\ 2014:}}
\DoxyCodeLine{00045\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ -\/\ parallel\_for\_static}}
\DoxyCodeLine{00046\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00047\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \textcolor{preprocessor}{\#ifndef\ FF\_PARFOR\_INTERNALS\_HPP}}
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\#define\ FF\_PARFOR\_INTERNALS\_HPP}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \textcolor{comment}{//\ \#ifndef\ \_\_INTEL\_COMPILER}}
\DoxyCodeLine{00053\ \textcolor{comment}{//\ //\ see\ http://www.stroustrup.com/C++11FAQ.html\#11}}
\DoxyCodeLine{00054\ \textcolor{comment}{//\ \#if\ \_\_cplusplus\ <=\ 199711L}}
\DoxyCodeLine{00055\ \textcolor{comment}{//\ \#error\ "{}parallel\_for\ requires\ C++11\ features"{}}}
\DoxyCodeLine{00056\ \textcolor{comment}{//\ \#endif}}
\DoxyCodeLine{00057\ \textcolor{comment}{//\ \#endif}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\#include\ <atomic>}}
\DoxyCodeLine{00060\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\#include\ <deque>}}
\DoxyCodeLine{00062\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00063\ \textcolor{preprocessor}{\#include\ <cmath>}}
\DoxyCodeLine{00064\ \textcolor{preprocessor}{\#include\ <functional>}}
\DoxyCodeLine{00065\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{lb_8hpp}{ff/lb.hpp}}>}}
\DoxyCodeLine{00066\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{node_8hpp}{ff/node.hpp}}>}}
\DoxyCodeLine{00067\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{farm_8hpp}{ff/farm.hpp}}>}}
\DoxyCodeLine{00068\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{spin-lock_8hpp}{ff/spin-\/lock.hpp}}>}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \textcolor{keyword}{enum}\ \{\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}}=-\/1\};}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \textcolor{preprocessor}{\#ifdef\ FF\_PARFOR\_PASSIVE\_NOSTEALING}}
\DoxyCodeLine{00073\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ dummyTask;}
\DoxyCodeLine{00074\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ globalSchedRunning;}
\DoxyCodeLine{00075\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \textcolor{preprocessor}{\#if\ defined(\_\_ICC)}}
\DoxyCodeLine{00078\ \textcolor{preprocessor}{\#define\ PRAGMA\_IVDEP\ \_Pragma("{}ivdep"{})}}
\DoxyCodeLine{00079\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00080\ \textcolor{preprocessor}{\#define\ PRAGMA\_IVDEP}}
\DoxyCodeLine{00081\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceff}{ff}}\ \{}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Parallel\ For/Reduce\ Macros\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{comment}{/*\ Usage\ example:}}
\DoxyCodeLine{00087\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //\ loop\ parallelization\ using\ 3\ workers}}
\DoxyCodeLine{00088\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //\ and\ a\ minimum\ task\ grain\ of\ 2}}
\DoxyCodeLine{00089\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wthread\ =\ 3;}}
\DoxyCodeLine{00090\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ grain\ =\ 2;}}
\DoxyCodeLine{00091\ \textcolor{comment}{\ \ \ \ \ *\ \ for(int\ i=0;i<N;++i)\ \ \ \ \ \ \ \ FF\_PARFOR\_BEGIN(for,i,0,N,1,grain,wthread)\ \{}}
\DoxyCodeLine{00092\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ A[i]=f(i)\ \ \ \ \ \ \ \ \ \ -\/-\/-\/-\/>\ \ \ \ A[i]=f(i);}}
\DoxyCodeLine{00093\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ FF\_PARFOR\_END(for);}}
\DoxyCodeLine{00094\ \textcolor{comment}{\ \ \ \ \ *\ }}
\DoxyCodeLine{00095\ \textcolor{comment}{\ \ \ \ \ *\ \ \ parallel\ for\ +\ reduction:}}
\DoxyCodeLine{00096\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ }}
\DoxyCodeLine{00097\ \textcolor{comment}{\ \ \ \ \ *\ \ s=4;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }}
\DoxyCodeLine{00098\ \textcolor{comment}{\ \ \ \ \ *\ \ for(int\ i=0;i<N;++i)\ \ \ \ \ \ \ \ FF\_PARFORREDUCE\_BEGIN(for,s,0,i,0,N,1,grain,wthread)\ \{}}
\DoxyCodeLine{00099\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ s*=f(i)\ \ \ \ \ \ \ \ \ \ \ \ -\/-\/-\/-\/>\ \ \ \ s*=f(i);}}
\DoxyCodeLine{00100\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ FF\_PARFORREDUCE\_END(for,s,*);}}
\DoxyCodeLine{00101\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00102\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }}
\DoxyCodeLine{00103\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FF\_PARFOR\_INIT(pf,maxwthread);}}
\DoxyCodeLine{00104\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ....}}
\DoxyCodeLine{00105\ \textcolor{comment}{\ \ \ \ \ *\ \ while(k<nTime)\ \{\ \ \ \ \ \ \ \ \ \ \ \ while(k<nTime)\ \{}}
\DoxyCodeLine{00106\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ for(int\ i=0;i<N;++i)\ \ \ \ \ \ \ \ FF\_PARFORREDUCE\_START(pf,s,0,i,0,N,1,grain,wthread)\ \{}}
\DoxyCodeLine{00107\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ s*=f(i,k);\ \ \ \ \ \ \ -\/-\/-\/-\/>\ \ \ \ \ \ \ s*=f(i,k);}}
\DoxyCodeLine{00108\ \textcolor{comment}{\ \ \ \ \ *\ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ FF\_PARFORREDUCE\_STOP(pf,s,*);}}
\DoxyCodeLine{00109\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{00110\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ....}}
\DoxyCodeLine{00111\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00112\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FF\_PARFOR\_DONE(pf);}}
\DoxyCodeLine{00113\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00114\ \textcolor{comment}{\ \ \ \ \ *\ }}
\DoxyCodeLine{00115\ \textcolor{comment}{\ \ \ \ \ *\ \ NOTE:\ inside\ the\ body\ of\ the\ PARFOR/PARFORREDUCE,\ it\ is\ possible\ to\ use\ the\ }}
\DoxyCodeLine{00116\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ '\_ff\_thread\_id'\ const\ integer\ variable\ to\ identify\ the\ thread\ id\ }}
\DoxyCodeLine{00117\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ running\ the\ sequential\ portion\ of\ the\ loop.}}
\DoxyCodeLine{00118\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00129\ \textcolor{preprocessor}{\#define\ FF\_PARFOR\_BEGIN(name,\ idx,\ begin,\ end,\ step,\ chunk,\ nw)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00130\ \textcolor{preprocessor}{\ \ \ \ ff\_forall\_farm<forallreduce\_W<int>\ >\ name(nw,false,true);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00131\ \textcolor{preprocessor}{\ \ \ \ name.setloop(begin,end,step,chunk,nw);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00132\ \textcolor{preprocessor}{\ \ \ \ auto\ F\_\#\#name\ =\ [\&]\ (const\ long\ ff\_start\_\#\#idx,\ const\ long\ ff\_stop\_\#\#idx,\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00133\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ int\ \_ff\_thread\_id,\ const\ int)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00134\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ FF\_IGNORE\_UNUSED(\_ff\_thread\_id);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00135\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ PRAGMA\_IVDEP;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00136\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ for(long\ idx=ff\_start\_\#\#idx;idx<ff\_stop\_\#\#idx;idx+=step)\ }}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{comment}{/*\ This\ is\ equivalent\ to\ the\ above\ one\ except\ that\ the\ user\ has\ to\ define}}
\DoxyCodeLine{00139\ \textcolor{comment}{\ \ \ \ \ *\ the\ for\ loop\ in\ the\ range\ (ff\_start\_idx,ff\_stop\_idx(}}
\DoxyCodeLine{00140\ \textcolor{comment}{\ \ \ \ \ *\ This\ can\ be\ useful\ if\ you\ have\ to\ perform\ some\ actions\ before\ starting}}
\DoxyCodeLine{00141\ \textcolor{comment}{\ \ \ \ \ *\ the\ local\ loop\ and/or\ some\ actions\ after\ the\ local\ loop\ finishes.}}
\DoxyCodeLine{00142\ \textcolor{comment}{\ \ \ \ \ *\ The\ onoff\ parameter\ allow\ to\ disable/enable\ the\ scheduler\ thread\ }}
\DoxyCodeLine{00143\ \textcolor{comment}{\ \ \ \ \ *\ (by\ default\ the\ scheduler\ is\ active.}}
\DoxyCodeLine{00144\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00145\ \textcolor{preprocessor}{\#define\ FF\_PARFOR\_BEGIN\_IDX(name,\ idx,\ begin,\ end,\ step,\ chunk,\ nw,\ onoff)\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00146\ \textcolor{preprocessor}{\ \ \ \ ff\_forall\_farm<forallreduce\_W<int>\ >\ name(nw,false,true);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00147\ \textcolor{preprocessor}{\ \ \ \ name.setloop(begin,end,step,chunk,\ nw);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00148\ \textcolor{preprocessor}{\ \ \ \ name.disableScheduler(onoff);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00149\ \textcolor{preprocessor}{\ \ \ \ auto\ F\_\#\#name\ =\ [\&]\ (const\ long\ ff\_start\_idx,\ const\ long\ ff\_stop\_idx,\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00150\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ int\ \_ff\_thread\_id,\ const\ int)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00151\ \textcolor{preprocessor}{\ \ \ \ }\textcolor{comment}{/*\ here\ you\ have\ to\ define\ the\ for\ loop\ using\ ff\_start/stop\_idx\ \ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \textcolor{preprocessor}{\#define\ FF\_PARFOR\_END(name)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00155\ \textcolor{preprocessor}{\ \ \ \ \};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00156\ \textcolor{preprocessor}{\ \ \ \ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00157\ \textcolor{preprocessor}{\ \ \ \ \ \ if\ (name.getnw()>1)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00158\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ name.setF(F\_\#\#name);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00159\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ if\ (name.run\_and\_wait\_end()<0)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00160\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ error("{}running\ parallel\ for\(\backslash\)n"{});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00161\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00162\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ else\ F\_\#\#name(name.startIdx(),name.stopIdx(),0,0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00163\ \textcolor{preprocessor}{\ \ \ \ \}}}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \ \ }
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00181\ \textcolor{preprocessor}{\#define\ FF\_PARFORREDUCE\_BEGIN(name,\ var,identity,\ idx,begin,end,step,\ chunk,\ nw)\ \ \(\backslash\)}}
\DoxyCodeLine{00182\ \textcolor{preprocessor}{\ \ \ \ ff\_forall\_farm<forallreduce\_W<decltype(var)>\ >\ name(nw,false,true);\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00183\ \textcolor{preprocessor}{\ \ \ \ name.setloop(begin,end,step,chunk,nw);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00184\ \textcolor{preprocessor}{\ \ \ \ auto\ idtt\_\#\#name\ =identity;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00185\ \textcolor{preprocessor}{\ \ \ \ auto\ F\_\#\#name\ =[\&](const\ long\ start,const\ long\ stop,const\ int\ \_ff\_thread\_id,\ \ \(\backslash\)}}
\DoxyCodeLine{00186\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decltype(var)\ \&var)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00187\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ FF\_IGNORE\_UNUSED(\_ff\_thread\_id);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00188\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ PRAGMA\_IVDEP;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00189\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ for(long\ idx=start;idx<stop;idx+=step)}}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \textcolor{preprocessor}{\#define\ FF\_PARFORREDUCE\_BEGIN\_IDX(name,\ var,identity,\ idx,begin,end,step,\ chunk,\ nw,\ onoff)\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00192\ \textcolor{preprocessor}{\ \ \ \ ff\_forall\_farm<forallreduce\_W<decltype(var)>\ >\ name(nw,false,true);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00193\ \textcolor{preprocessor}{\ \ \ \ name.setloop(begin,end,step,chunk,nw);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00194\ \textcolor{preprocessor}{\ \ \ \ name.disableScheduler(onoff);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00195\ \textcolor{preprocessor}{\ \ \ \ auto\ idtt\_\#\#name\ =identity;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00196\ \textcolor{preprocessor}{\ \ \ \ auto\ F\_\#\#name\ =[\&](const\ long\ ff\_start\_idx,const\ long\ ff\_stop\_idx,const\ int\ \_ff\_thread\_id,\ \(\backslash\)}}
\DoxyCodeLine{00197\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decltype(var)\ \&var)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00198\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ FF\_IGNORE\_UNUSED(\_ff\_thread\_id);}}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \ \ }
\DoxyCodeLine{00202\ \textcolor{preprocessor}{\#define\ FF\_PARFORREDUCE\_END(name,\ var,\ op)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00203\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00204\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ if\ (name.getnw()>1)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00205\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ auto\ ovar\_\#\#name\ =\ var;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00206\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ name.setF(F\_\#\#name,idtt\_\#\#name);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00207\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ if\ (name.run\_and\_wait\_end()<0)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00208\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ error("{}running\ forall\_\#\#name\(\backslash\)n"{});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00209\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00210\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ var\ =\ ovar\_\#\#name;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00211\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ for(size\_t\ i=0;i<name.getnw();++i)\ \ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00212\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ op\#\#=\ name.getres(i);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00213\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00214\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00215\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ var\ =\ ovar\_\#\#name;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00216\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ F\_\#\#name(name.startIdx(),name.stopIdx(),0,var);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00217\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \textcolor{preprocessor}{\#define\ FF\_PARFORREDUCE\_F\_END(name,\ var,\ F)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00221\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00222\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ if\ (name.getnw()>1)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00223\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ auto\ ovar\_\#\#name\ =\ var;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00224\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ name.setF(F\_\#\#name,idtt\_\#\#name);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00225\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ if\ (name.run\_and\_wait\_end()<0)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00226\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ error("{}running\ ff\_forall\_farm\ (reduce\ F\ end)\(\backslash\)n"{});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00227\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ var\ =\ ovar\_\#\#name;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00228\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ for(size\_t\ i=0;i<name.getnw();++i)\ \ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00229\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ F(var,name.getres(i));\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00230\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00231\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00232\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ F\_\#\#name(name.startIdx(),name.stopIdx(),0,var);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00233\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{comment}{/*\ FF\_PARFOR\_START\ and\ FF\_PARFOR\_STOP\ have\ the\ same\ meaning\ of\ }}
\DoxyCodeLine{00239\ \textcolor{comment}{\ \ \ \ \ *\ FF\_PARFOR\_BEGIN\ and\ FF\_PARFOR\_END\ but\ they\ have\ to\ be\ used\ in\ }}
\DoxyCodeLine{00240\ \textcolor{comment}{\ \ \ \ \ *\ conjunction\ with\ \ FF\_PARFOR\_INIT\ FF\_PARFOR\_END.}}
\DoxyCodeLine{00241\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00242\ \textcolor{comment}{\ \ \ \ \ *\ The\ same\ is\ for\ FF\_PARFORREDUCE\_START/STOP.}}
\DoxyCodeLine{00243\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00244\ \textcolor{preprocessor}{\#define\ FF\_PARFOR\_INIT(name,\ nw)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00245\ \textcolor{preprocessor}{\ \ \ \ ff\_forall\_farm<forallreduce\_W<int>\ >\ *name\ =\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00246\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ new\ ff\_forall\_farm<forallreduce\_W<int>\ >(nw)}}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \textcolor{preprocessor}{\#define\ FF\_PARFOR\_DECL(name)\ \ \ \ \ \ \ \ \ ff\_forall\_farm<forallreduce\_W<int>\ >\ *\ name}}
\DoxyCodeLine{00249\ \textcolor{preprocessor}{\#define\ FF\_PARFOR\_ASSIGN(name,nw)\ \ \ \ name=new\ ff\_forall\_farm<forallreduce\_W<int>\ >(nw)}}
\DoxyCodeLine{00250\ \textcolor{preprocessor}{\#define\ FF\_PARFOR\_DONE(name)\ \ \ \ \ \ \ \ \ name-\/>stop();\ name-\/>wait();\ delete\ name;}}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \textcolor{preprocessor}{\#define\ FF\_PARFORREDUCE\_INIT(name,\ type,\ nw)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00253\ \textcolor{preprocessor}{\ \ \ \ ff\_forall\_farm<forallreduce\_W<type>\ >\ *name\ =\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00254\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ new\ ff\_forall\_farm<forallreduce\_W<type>\ >(nw)}}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \textcolor{preprocessor}{\#define\ FF\_PARFORREDUCE\_DECL(name,type)\ \ \ \ \ \ ff\_forall\_farm<forallreduce\_W<type>\ >\ *\ name}}
\DoxyCodeLine{00257\ \textcolor{preprocessor}{\#define\ FF\_PARFORREDUCE\_ASSIGN(name,type,nw)\ name=\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00258\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ new\ ff\_forall\_farm<forallreduce\_W<type>\ >(nw)}}
\DoxyCodeLine{00259\ \textcolor{preprocessor}{\#define\ FF\_PARFORREDUCE\_DONE(name)\ \ \ \ \ \ \ \ \ \ \ name-\/>stop();name-\/>wait();delete\ name}}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ \textcolor{preprocessor}{\#define\ FF\_PARFOR\_START(name,\ idx,\ begin,\ end,\ step,\ chunk,\ nw)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00262\ \textcolor{preprocessor}{\ \ \ \ name-\/>setloop(begin,end,step,chunk,nw);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00263\ \textcolor{preprocessor}{\ \ \ \ auto\ F\_\#\#name\ =\ [\&]\ (const\ long\ ff\_start\_\#\#idx,\ const\ long\ ff\_stop\_\#\#idx,\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00264\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ int\ \_ff\_thread\_id,\ const\ int)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00265\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ FF\_IGNORE\_UNUSED(\_ff\_thread\_id);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00266\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ PRAGMA\_IVDEP;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00267\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ for(long\ idx=ff\_start\_\#\#idx;idx<ff\_stop\_\#\#idx;idx+=step)\ }}
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00269\ \textcolor{preprocessor}{\#define\ FF\_PARFOR2\_START(name,\ idx,\ begin,\ end,\ step,\ chunk,\ nw)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00270\ \textcolor{preprocessor}{\ \ \ \ name-\/>setloop(begin,end,step,chunk,nw);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00271\ \textcolor{preprocessor}{\ \ \ \ auto\ F\_\#\#name\ =\ [\&]\ (const\ long\ ff\_start\_\#\#idx,\ const\ long\ ff\_stop\_\#\#idx,\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00272\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ int\ \_ff\_thread\_id,\ const\ int)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00273\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ FF\_IGNORE\_UNUSED(\_ff\_thread\_id);}}
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{comment}{/*\ here\ you\ have\ to\ define\ the\ for\ loop\ using\ ff\_start/stop\_\#\#idx\ \ */}}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00276\ \textcolor{comment}{/*\ this\ is\ equivalent\ to\ FF\_PARFOR2\_START\ but\ the\ start/stop\ indexes\ have\ a\ fixed\ name\ */}}
\DoxyCodeLine{00277\ \textcolor{preprocessor}{\#define\ FF\_PARFOR\_START\_IDX(name,\ idx,\ begin,\ end,\ step,\ chunk,\ nw)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00278\ \textcolor{preprocessor}{\ \ \ \ name-\/>setloop(begin,end,step,chunk,nw);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00279\ \textcolor{preprocessor}{\ \ \ \ auto\ F\_\#\#name\ =\ [\&]\ (const\ long\ ff\_start\_idx,\ const\ long\ ff\_stop\_idx,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00280\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ int\ \_ff\_thread\_id,\ const\ int)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00281\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ FF\_IGNORE\_UNUSED(\_ff\_thread\_id);}}
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{comment}{/*\ here\ you\ have\ to\ define\ the\ for\ loop\ using\ ff\_start/stop\_idx\ \ */}}
\DoxyCodeLine{00283\ }
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \textcolor{comment}{//\ just\ another\ variat\ that\ may\ be\ used\ together\ with\ FF\_PARFORREDUCE\_INIT}}
\DoxyCodeLine{00286\ \textcolor{preprocessor}{\#define\ FF\_PARFOR\_T\_START(name,\ type,\ idx,\ begin,\ end,\ step,\ chunk,\ nw)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00287\ \textcolor{preprocessor}{\ \ \ \ name-\/>setloop(begin,end,step,chunk,nw);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00288\ \textcolor{preprocessor}{\ \ \ \ auto\ F\_\#\#name\ =\ [\&]\ (const\ long\ ff\_start\_\#\#idx,\ const\ long\ ff\_stop\_\#\#idx,\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00289\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ int\ \_ff\_thread\_id,\ const\ type\&)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00290\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ FF\_IGNORE\_UNUSED(\_ff\_thread\_id);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00291\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ PRAGMA\_IVDEP;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00292\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ for(long\ idx=ff\_start\_\#\#idx;idx<ff\_stop\_\#\#idx;idx+=step)\ }}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00295\ \textcolor{comment}{//\ just\ another\ variat\ that\ may\ be\ used\ together\ with\ FF\_PARFORREDUCE\_INIT}}
\DoxyCodeLine{00296\ \textcolor{preprocessor}{\#define\ FF\_PARFOR\_T\_START\_STATIC(name,\ type,\ idx,\ begin,\ end,\ step,\ chunk,\ nw)\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00297\ \textcolor{preprocessor}{\ \ \ \ assert(chunk<=0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00298\ \textcolor{preprocessor}{\ \ \ \ name-\/>setloop(begin,end,step,chunk,nw);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00299\ \textcolor{preprocessor}{\ \ \ \ auto\ F\_\#\#name\ =\ [\&]\ (const\ long\ ff\_start\_\#\#idx,\ const\ long\ ff\_stop\_\#\#idx,\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00300\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ int\ \_ff\_thread\_id,\ const\ type\&)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00301\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ const\ long\ \_ff\_jump0=(name-\/>getnw())*(-\/chunk*step);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00302\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ const\ long\ \_ff\_jump1=(-\/chunk*step);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00303\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ FF\_IGNORE\_UNUSED(\_ff\_thread\_id);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00304\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ PRAGMA\_IVDEP;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00305\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ for(long\ \_ff\_\#\#idx=ff\_start\_\#\#idx;\_ff\_\#\#idx<ff\_stop\_\#\#idx;\_ff\_\#\#idx+=\_ff\_jump0)\ \ \(\backslash\)}}
\DoxyCodeLine{00306\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ for(long\ idx=\_ff\_\#\#idx,\_ff\_end\_\#\#idx=std::min(ff\_stop\_\#\#idx,\_ff\_\#\#idx\ +\_ff\_jump1);\ \(\backslash\)}}
\DoxyCodeLine{00307\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx<\_ff\_end\_\#\#idx;idx+=step)}}
\DoxyCodeLine{00308\ }
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \textcolor{preprocessor}{\#define\ FF\_PARFOR\_T\_START\_IDX(name,\ type,\ idx,\ begin,\ end,step,chunk,\ nw)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00311\ \textcolor{preprocessor}{\ \ \ \ name-\/>setloop(begin,end,step,chunk,nw);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00312\ \textcolor{preprocessor}{\ \ \ \ auto\ F\_\#\#name\ =\ [\&]\ (const\ long\ ff\_start\_idx,\ const\ long\ ff\_stop\_idx,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00313\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ int\ \_ff\_thread\_id,\ const\ type\&)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00314\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ FF\_IGNORE\_UNUSED(\_ff\_thread\_id);}}
\DoxyCodeLine{00315\ \ \ \ \ \textcolor{comment}{/*\ here\ you\ have\ to\ use\ the\ fixed\ indexes\ ff\_idx\_start,\ ff\_idx\_stop\ */}}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ \textcolor{preprocessor}{\#define\ FF\_PARFOR\_STOP(name)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00318\ \textcolor{preprocessor}{\ \ \ \ \};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00319\ \textcolor{preprocessor}{\ \ \ \ if\ (name-\/>getnw()>1)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00320\ \textcolor{preprocessor}{\ \ \ \ \ \ name-\/>setF(F\_\#\#name);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00321\ \textcolor{preprocessor}{\ \ \ \ \ \ if\ (name-\/>run\_then\_freeze(name-\/>getnw())<0)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00322\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ error("{}running\ ff\_forall\_farm\ (name)\(\backslash\)n"{});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00323\ \textcolor{preprocessor}{\ \ \ \ \ \ name-\/>wait\_freezing();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00324\ \textcolor{preprocessor}{\ \ \ \ \}\ else\ F\_\#\#name(name-\/>startIdx(),name-\/>stopIdx(),0,0);}}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \textcolor{preprocessor}{\#define\ FF\_PARFOR\_T\_STOP(name,\ type)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00327\ \textcolor{preprocessor}{\ \ \ \ \};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00328\ \textcolor{preprocessor}{\ \ \ \ if\ (name-\/>getnw()>1)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00329\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ name-\/>setF(F\_\#\#name,\ type());\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00330\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ if\ (name-\/>run\_then\_freeze(name-\/>getnw())<0)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00331\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ error("{}running\ ff\_forall\_farm\ (name)\(\backslash\)n"{});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00332\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ name-\/>wait\_freezing();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00333\ \textcolor{preprocessor}{\ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00334\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ F\_\#\#name(name-\/>startIdx(),name-\/>stopIdx(),0,type());\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00335\ \textcolor{preprocessor}{\ \ \ \ \}}}
\DoxyCodeLine{00336\ \ \ \ \ }
\DoxyCodeLine{00337\ \textcolor{preprocessor}{\#define\ FF\_PARFORREDUCE\_START(name,\ var,identity,\ idx,begin,end,step,\ chunk,\ nw)\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00338\ \textcolor{preprocessor}{\ \ \ \ name-\/>setloop(begin,end,step,chunk,nw);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00339\ \textcolor{preprocessor}{\ \ \ \ auto\ idtt\_\#\#name\ =identity;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00340\ \textcolor{preprocessor}{\ \ \ \ auto\ F\_\#\#name\ =[\&](const\ long\ ff\_start\_\#\#idx,\ const\ long\ ff\_stop\_\#\#idx,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00341\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ int\ \_ff\_thread\_id,\ decltype(var)\ \&var)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00342\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ FF\_IGNORE\_UNUSED(\_ff\_thread\_id);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00343\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ PRAGMA\_IVDEP\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00344\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ for(long\ idx=ff\_start\_\#\#idx;idx<ff\_stop\_\#\#idx;idx+=step)\ }}
\DoxyCodeLine{00345\ }
\DoxyCodeLine{00346\ \textcolor{preprocessor}{\#define\ FF\_PARFORREDUCE\_START\_IDX(name,\ var,identity,\ idx,begin,end,step,\ chunk,\ nw)\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00347\ \textcolor{preprocessor}{\ \ \ \ name-\/>setloop(begin,end,step,chunk,nw);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00348\ \textcolor{preprocessor}{\ \ \ \ auto\ idtt\_\#\#name\ =identity;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00349\ \textcolor{preprocessor}{\ \ \ \ auto\ F\_\#\#name\ =[\&](const\ long\ ff\_start\_idx,\ const\ long\ ff\_stop\_idx,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00350\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ int\ \_ff\_thread\_id,\ decltype(var)\ \&var)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00351\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ FF\_IGNORE\_UNUSED(\_ff\_thread\_id);}}
\DoxyCodeLine{00352\ }
\DoxyCodeLine{00353\ }
\DoxyCodeLine{00354\ }
\DoxyCodeLine{00355\ \textcolor{preprocessor}{\#define\ FF\_PARFORREDUCE\_START\_STATIC(name,\ var,identity,\ idx,begin,end,step,\ chunk,\ nw)\ \ \(\backslash\)}}
\DoxyCodeLine{00356\ \textcolor{preprocessor}{\ \ \ \ assert(chunk<=0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00357\ \textcolor{preprocessor}{\ \ \ \ name-\/>setloop(begin,end,step,chunk,nw);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00358\ \textcolor{preprocessor}{\ \ \ \ auto\ idtt\_\#\#name\ =identity;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00359\ \textcolor{preprocessor}{\ \ \ \ auto\ F\_\#\#name\ =[\&](const\ long\ ff\_start\_\#\#idx,\ const\ long\ ff\_stop\_\#\#idx,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00360\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ int\ \_ff\_thread\_id,\ decltype(var)\ \&var)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00361\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ const\ long\ \_ff\_jump0=(name-\/>getnw())*(-\/chunk*step);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00362\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ const\ long\ \_ff\_jump1=(-\/chunk*step);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00363\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ PRAGMA\_IVDEP;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00364\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ for(long\ \_ff\_\#\#idx=ff\_start\_\#\#idx;\_ff\_\#\#idx<ff\_stop\_\#\#idx;\_ff\_\#\#idx+=\_ff\_jump0)\ \ \(\backslash\)}}
\DoxyCodeLine{00365\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ for(long\ idx=\_ff\_\#\#idx,\_ff\_end\_\#\#idx=std::min(ff\_stop\_\#\#idx,\_ff\_\#\#idx\ +\_ff\_jump1);\ \(\backslash\)}}
\DoxyCodeLine{00366\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx<\_ff\_end\_\#\#idx;idx+=step)}}
\DoxyCodeLine{00367\ }
\DoxyCodeLine{00368\ }
\DoxyCodeLine{00369\ \textcolor{preprocessor}{\#define\ FF\_PARFORREDUCE\_STOP(name,\ var,\ op)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00370\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00371\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ if\ (name-\/>getnw()>1)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00372\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ auto\ ovar\_\#\#name\ =\ var;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00373\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ name-\/>setF(F\_\#\#name,idtt\_\#\#name);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00374\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ if\ (name-\/>run\_then\_freeze(name-\/>getnw())<0)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00375\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ error("{}running\ ff\_forall\_farm\ (name)\(\backslash\)n"{});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00376\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ name-\/>wait\_freezing();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00377\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ var\ =\ ovar\_\#\#name;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00378\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ for(size\_t\ i=0;i<name-\/>getnw();++i)\ \ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00379\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ op\#\#=\ name-\/>getres(i);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00380\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00381\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00382\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ F\_\#\#name(name-\/>startIdx(),name-\/>stopIdx(),0,var);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00383\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{00384\ }
\DoxyCodeLine{00385\ }
\DoxyCodeLine{00386\ \textcolor{preprocessor}{\#define\ FF\_PARFORREDUCE\_F\_STOP(name,\ var,\ F)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00387\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00388\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ if\ (name-\/>getnw()>1)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00389\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ auto\ ovar\_\#\#name\ =\ var;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00390\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ name-\/>setF(F\_\#\#name,idtt\_\#\#name);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00391\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ if\ (name-\/>run\_then\_freeze(name-\/>getnw())<0)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00392\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ error("{}running\ ff\_forall\_farm\ (name)\(\backslash\)n"{});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00393\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ name-\/>wait\_freezing();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00394\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ var\ =\ ovar\_\#\#name;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00395\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ for(size\_t\ i=0;i<name-\/>getnw();++i)\ \ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00396\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ F(var,name-\/>getres(i));\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00397\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00398\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00399\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ F\_\#\#name(name-\/>startIdx(),name-\/>stopIdx(),0,var);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00400\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{00401\ }
\DoxyCodeLine{00402\ }
\DoxyCodeLine{00403\ }
\DoxyCodeLine{00404\ \textcolor{comment}{//}}
\DoxyCodeLine{00405\ \textcolor{comment}{//\ see\ NOTE\ in\ setloop\ to\ understand\ the\ meaning\ of\ 'default\ static'\ }}
\DoxyCodeLine{00406\ \textcolor{comment}{//\ 'static\ with\ grain\ size'\ and\ 'dynamic\ with\ grain\ size'}}
\DoxyCodeLine{00407\ \textcolor{comment}{//}}
\DoxyCodeLine{00408\ \textcolor{preprocessor}{\#define\ PARFOR\_STATIC(X)\ \ \ (X>0?-\/X:X)}}
\DoxyCodeLine{00409\ \textcolor{preprocessor}{\#define\ PARFOR\_DYNAMIC(X)\ \ (X<0?-\/X:X)}}
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00411\ \ \ \ \ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00413\ }
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00415\ \textcolor{comment}{//\ parallel\ for\ task,\ it\ represents\ a\ range\ (start,end(\ of\ indexes}}
\DoxyCodeLine{00416\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structff_1_1forall__task__t_acf6fd80ffafbdea54a5582bd7d0021d4}{forall\_task\_t}}\ \{}
\DoxyCodeLine{00417\ \ \ \ \ \mbox{\hyperlink{structff_1_1forall__task__t_acf6fd80ffafbdea54a5582bd7d0021d4}{forall\_task\_t}}()\ :\ \mbox{\hyperlink{structff_1_1forall__task__t_a4e1da7930d9939d3d5ef5dca255af734}{end}}(0)\ \{}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1forall__task__t_a7ddaed5e6e09d2ed705548c288081785}{start}}.store(0);\ \textcolor{comment}{//\ MA:\ consistency\ of\ store\ to\ be\ checked}}
\DoxyCodeLine{00419\ \ \ \ \ \}}
\DoxyCodeLine{00420\ \ \ \ \ \mbox{\hyperlink{structff_1_1forall__task__t_a39aa4a92d83779b2382db572575665f5}{forall\_task\_t}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structff_1_1forall__task__t_acf6fd80ffafbdea54a5582bd7d0021d4}{forall\_task\_t}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}):\mbox{\hyperlink{structff_1_1forall__task__t_a4e1da7930d9939d3d5ef5dca255af734}{end}}(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.\mbox{\hyperlink{structff_1_1forall__task__t_a4e1da7930d9939d3d5ef5dca255af734}{end}})\ \{}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1forall__task__t_a7ddaed5e6e09d2ed705548c288081785}{start}}.store(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.start.load(std::memory\_order\_relaxed));\ \textcolor{comment}{//\ MA:\ consistency\ of\ store\ to\ be\ checked}}
\DoxyCodeLine{00422\ \ \ \ \ \}}
\DoxyCodeLine{00423\ \ \ \ \ \mbox{\hyperlink{structff_1_1forall__task__t_acf6fd80ffafbdea54a5582bd7d0021d4}{forall\_task\_t}}\ \&\ \mbox{\hyperlink{structff_1_1forall__task__t_a16783ce493c5f57effb838c236c361d3}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structff_1_1forall__task__t_acf6fd80ffafbdea54a5582bd7d0021d4}{forall\_task\_t}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{\ }
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1forall__task__t_a7ddaed5e6e09d2ed705548c288081785}{start}}=\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.start.load(std::memory\_order\_relaxed),\ \mbox{\hyperlink{structff_1_1forall__task__t_a4e1da7930d9939d3d5ef5dca255af734}{end}}=\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.end;\ }
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};\ }
\DoxyCodeLine{00426\ \ \ \ \ \}}
\DoxyCodeLine{00427\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structff_1_1forall__task__t_a8e38f7c248840efe988a48d7abde49c2}{set}}(\textcolor{keywordtype}{long}\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}},\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}})\ \ \{\ \mbox{\hyperlink{structff_1_1forall__task__t_a7ddaed5e6e09d2ed705548c288081785}{start}}=\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}},\mbox{\hyperlink{structff_1_1forall__task__t_a4e1da7930d9939d3d5ef5dca255af734}{end}}=\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}};\ \}}
\DoxyCodeLine{00428\ }
\DoxyCodeLine{00429\ \ \ \ \ std::atomic\_long\ \mbox{\hyperlink{structff_1_1forall__task__t_a7ddaed5e6e09d2ed705548c288081785}{start}};}
\DoxyCodeLine{00430\ \ \ \ \ \textcolor{keywordtype}{long}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1forall__task__t_a4e1da7930d9939d3d5ef5dca255af734}{end}};}
\DoxyCodeLine{00431\ \};}
\DoxyCodeLine{00432\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structff_1_1data_pair_a2486eef9048f33528aceddc3ce890c8c}{dataPair}}\ \{}
\DoxyCodeLine{00433\ \ \ \ \ std::atomic\_long\ \mbox{\hyperlink{structff_1_1data_pair_a6e1e0a2f22b9850303cdb3d23901ff2e}{ntask}};}
\DoxyCodeLine{00434\ \ \ \ \ ALIGN\_TO\_PRE(\mbox{\hyperlink{config_8hpp_af89f60b07247176687889ade776c8e10}{CACHE\_LINE\_SIZE}})}
\DoxyCodeLine{00435\ \ \ \ \ \mbox{\hyperlink{structff_1_1forall__task__t}{forall\_task\_t}}\ \mbox{\hyperlink{structff_1_1data_pair_af0d61096359728ad5e8aefd707ad2d7f}{task}};}
\DoxyCodeLine{00436\ \ \ \ \ ALIGN\_TO\_POST(\mbox{\hyperlink{config_8hpp_af89f60b07247176687889ade776c8e10}{CACHE\_LINE\_SIZE}})}
\DoxyCodeLine{00437\ }
\DoxyCodeLine{00438\ \ \ \ \ \mbox{\hyperlink{structff_1_1data_pair_a2486eef9048f33528aceddc3ce890c8c}{dataPair}}():\mbox{\hyperlink{structff_1_1data_pair_af0d61096359728ad5e8aefd707ad2d7f}{task}}()\ \{}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1data_pair_a6e1e0a2f22b9850303cdb3d23901ff2e}{ntask}}.store(0);\ \textcolor{comment}{//\ MA:\ consistency\ of\ store\ to\ be\ checked}}
\DoxyCodeLine{00440\ \ \ \ \ \};}
\DoxyCodeLine{00441\ \ \ \ \ \mbox{\hyperlink{structff_1_1data_pair_adb1a332c97af2febe5ea43ccc5190c14}{dataPair}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structff_1_1data_pair_a2486eef9048f33528aceddc3ce890c8c}{dataPair}}\ \&\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}):\mbox{\hyperlink{structff_1_1data_pair_af0d61096359728ad5e8aefd707ad2d7f}{task}}(\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.\mbox{\hyperlink{structff_1_1data_pair_af0d61096359728ad5e8aefd707ad2d7f}{task}})\ \{}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1data_pair_a6e1e0a2f22b9850303cdb3d23901ff2e}{ntask}}.store(\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.ntask.load(std::memory\_order\_relaxed));\ \textcolor{comment}{//\ MA:\ consistency\ of\ store\ to\ be\ checked}}
\DoxyCodeLine{00443\ \ \ \ \ \}}
\DoxyCodeLine{00444\ \ \ \ \ \mbox{\hyperlink{structff_1_1data_pair_a2486eef9048f33528aceddc3ce890c8c}{dataPair}}\&\ \mbox{\hyperlink{structff_1_1data_pair_a45d4ef984467b886054769e4ca1e87a4}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structff_1_1data_pair_a2486eef9048f33528aceddc3ce890c8c}{dataPair}}\ \&\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}})\ \{\ \mbox{\hyperlink{structff_1_1data_pair_a6e1e0a2f22b9850303cdb3d23901ff2e}{ntask}}=\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.ntask.load(std::memory\_order\_relaxed),\ \mbox{\hyperlink{structff_1_1data_pair_af0d61096359728ad5e8aefd707ad2d7f}{task}}=\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.task;\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};\ \}}
\DoxyCodeLine{00445\ \};}
\DoxyCodeLine{00446\ }
\DoxyCodeLine{00447\ \textcolor{comment}{//\ compare\ functiong}}
\DoxyCodeLine{00448\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespaceff_a88339da7f9baf4b4ad178ea5d86b45a1}{data\_cmp}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structff_1_1data_pair}{dataPair}}\ \&\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}},\textcolor{keyword}{const}\ \mbox{\hyperlink{structff_1_1data_pair}{dataPair}}\ \&\mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}})\ \{}
\DoxyCodeLine{00449\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}.ntask\ <\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}.ntask;}
\DoxyCodeLine{00450\ \}}
\DoxyCodeLine{00451\ \textcolor{comment}{//\ delay\ function\ for\ worker\ threads}}
\DoxyCodeLine{00452\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceff_a4b4fb987f81b81b8b08c8d2825e6ac73}{workerlosetime\_in}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ aggressive)\ \{}
\DoxyCodeLine{00453\ \ \ \ \ \textcolor{keywordflow}{if}\ (aggressive)\ PAUSE();}
\DoxyCodeLine{00454\ \ \ \ \ \textcolor{keywordflow}{else}\ \mbox{\hyperlink{namespaceff_a971d873b94c8fe649b37150f789a0e86}{ff\_relax}}(0);}
\DoxyCodeLine{00455\ \}}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00457\ }
\DoxyCodeLine{00458\ \textcolor{comment}{//\ parallel\ for/reduce\ task\ scheduler}}
\DoxyCodeLine{00459\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classff_1_1forall___scheduler_a154fdf096759ba81dbed39857680f051}{forall\_Scheduler}}:\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classff_1_1ff__node_a53ab8b2244539766bdea3eb65cb04f9b}{ff\_node}}\ \{}
\DoxyCodeLine{00460\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00461\ \ \ \ \ std::vector<bool>\ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a7cfdf168785f3d51e125e876aac6c0cf}{eossent}};}
\DoxyCodeLine{00462\ \ \ \ \ std::vector<dataPair>\ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}};}
\DoxyCodeLine{00463\ \ \ \ \ std::atomic\_long\ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}};}
\DoxyCodeLine{00464\ \textcolor{preprocessor}{\#ifdef\ FF\_PARFOR\_PASSIVE\_NOSTEALING}}
\DoxyCodeLine{00465\ \ \ \ \ std::atomic\_long\ \ \ \ \ \ \ \_nextIteration;}
\DoxyCodeLine{00466\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00467\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00468\ \ \ \ \ \textcolor{comment}{//\ initialize\ the\ data\ vector}}
\DoxyCodeLine{00469\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classff_1_1forall___scheduler_a3a13daaa8156fa8c02686e967ea533ed}{init\_data}}(\mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}},\ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ \mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}})\ \{}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a2c05ee4a0e85ddcc081c8ec6321da350}{static\_scheduling}}\ =\ \textcolor{keyword}{false};\ \ \textcolor{comment}{//\ enable\ work\ stealing\ in\ the\ nextTaskConcurrent}}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ numtasks\ \ =\ std::lrint(std::ceil((\mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}}-\/\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}})/(\textcolor{keywordtype}{double})\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}}));}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ totalnumtasks\ \ \ =\ std::lrint(std::ceil(numtasks/(\textcolor{keywordtype}{double})\mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}));}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ tt\ \ \ \ \ =\ totalnumtasks;}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ ntxw\ =\ totalnumtasks\ /\ \mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}};}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ \ \ \ =\ totalnumtasks\ \%\ \mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}};}
\DoxyCodeLine{00476\ }
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ try\ to\ keep\ the\ n.\ of\ tasks\ per\ worker\ as\ smaller\ as\ possible}}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ntxw\ ==\ 0\ \&\&\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}>=1)\ \{\ \ ntxw\ =\ 1,\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ 0;\ \}}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}.resize(\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}});\ \mbox{\hyperlink{classff_1_1forall___scheduler_a7cfdf168785f3d51e125e876aac6c0cf}{eossent}}.resize(\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}});}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a86262b481d6916fa71d1d74d3f1107c1}{taskv}}.resize(8*\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}});\ \textcolor{comment}{//\ 8\ is\ the\ maximum\ n.\ of\ jumps,\ see\ the\ heuristic\ below}}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a04038464f5a9a613cd7c921c59f43f15}{skip1}}=\textcolor{keyword}{false},\mbox{\hyperlink{classff_1_1forall___scheduler_a3506b36e2f22ecb8d10d61b531cbd21d}{jump}}=0,\mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}}=-\/1;}
\DoxyCodeLine{00483\ }
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}},\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}=0,\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}};}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i<\_nw\ \&\&\ totalnumtasks>}}0;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ totalnumtasks-\/=\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ \ \ \ \ \ \ =\ ntxw\ +\ (\ (\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}>1\ \&\&\ (\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}))\ ?\ 1\ :\ 0\ );}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ \ \ \ \ \ \ =\ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}\ +\ (\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}*\mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}\ -\/\ 1)*\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}}\ +\ 1;}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}}\ \ \ \ \ =\ (\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}<\mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}})\ ?\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ :\ \mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}};}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].ntask=\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}};}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].task.set(\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}},\mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}});}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}\ \ \ =\ (\mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}}-\/1)+\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}};}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00493\ }
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (totalnumtasks)\ \{}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \ \ \ \ assert(totalnumtasks==1);}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ try\ to\ keep\ the\ n.\ of\ tasks\ per\ worker\ as\ smaller\ as\ possible}}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ntxw\ >\ 1)\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}}-\/1].ntask\ +=\ totalnumtasks;}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{\ -\/-\/tt,\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}*=2;\ \}}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}}-\/1].task.end\ =\ \mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}};}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \}\ }
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ printf("{}init\_data\(\backslash\)n"{});}}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ for(size\_t\ i=0;i<\_nw;++i)\ \{}}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ printf("{}W=\%ld\ \%ld\ <\%ld,\%ld>\(\backslash\)n"{},\ i,\ data[i].ntask.load(),\ data[i].task.start.load(),\ data[i].task.end);}}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \}}}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ printf("{}totaltasks=\%ld\(\backslash\)n"{},\ tt);}}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ tt;}
\DoxyCodeLine{00507\ \ \ \ \ \}\ \ \ \ }
\DoxyCodeLine{00508\ \ \ \ \ \textcolor{comment}{//\ initialize\ the\ data\ vector}}
\DoxyCodeLine{00509\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad5b74afdd4f75ff0ae846c230ee446c7}{init\_data\_static}}(\textcolor{keywordtype}{long}\ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}},\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}})\ \{}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ assert(\mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}\ <=\ 0);}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a2c05ee4a0e85ddcc081c8ec6321da350}{static\_scheduling}}\ =\ \textcolor{keyword}{true};\ \ \textcolor{comment}{//\ this\ forces\ static\ scheduling\ in\ the\ nextTaskConcurrent}}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a04038464f5a9a613cd7c921c59f43f15}{skip1}}=\textcolor{keyword}{false},\mbox{\hyperlink{classff_1_1forall___scheduler_a3506b36e2f22ecb8d10d61b531cbd21d}{jump}}=0,\mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}}=-\/1;}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}\ ==\ 0)\ \{\ }
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ default\ static\ scheduling,\ i.e.\ the\ iteration\ space\ is\ almost\ equally\ divided}}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ in\ contiguous\ chunks\ among\ threads}}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ numtasks\ \ =\ std::lrint(std::ceil((\mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}}-\/\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}})/(\textcolor{keywordtype}{double})\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}}));}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ totalnumtasks\ \ \ =\ (long)\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}};}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ \ \ \ \ \ \ \ \ \ \ \ \ =\ numtasks\ \%\ \mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}};}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ numtasks\ /\ long(\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}});}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}.resize(\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}});\ \mbox{\hyperlink{classff_1_1forall___scheduler_a86262b481d6916fa71d1d74d3f1107c1}{taskv}}.resize(\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}});\mbox{\hyperlink{classff_1_1forall___scheduler_a7cfdf168785f3d51e125e876aac6c0cf}{eossent}}.resize(\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}});}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}},\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}};}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ totalnumtasks>0;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},-\/-\/totalnumtasks)\ \{}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ \ \ \ \ \ \ =\ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}\ +\ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}\ -\/\ 1)*\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}}\ +\ 1\ +\ ((\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}})\ ?\ \mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}}\ :\ 0\ );}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}}\ \ \ \ \ =\ (\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}<\mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}})\ ?\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ :\ \mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}};}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].ntask=1;}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].task.set(\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}},\mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}});}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}\ \ \ =\ (\mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}}-\/1)+\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}};}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}})\ ++\mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}};}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}};}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ fill\ out\ the\ table\ with\ only\ the\ first\ task\ just\ to\ start\ the\ worker\ threads}}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ chunk\ =\ -\/\mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}};\ }
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}\ =\ \mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}};\ \textcolor{comment}{//\ needed\ because\ sendTask\ has\ to\ send\ the\ range\ (begin,\ stop(}}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ numtasks\ \ \ \ \ \ =\ std::lrint(std::ceil((\mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}}-\/\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}})/(\textcolor{keywordtype}{double})\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}}));}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ totalnumtasks\ =\ std::lrint(std::ceil(numtasks/(\textcolor{keywordtype}{double})chunk));}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ ntxw\ =\ (\mbox{\hyperlink{namespacestd_ac7b9885417769949d76890454b6d072e}{std::min}})(\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}},\ (\textcolor{keywordtype}{size\_t})totalnumtasks);}
\DoxyCodeLine{00541\ }
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<ntxw;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].ntask\ =\ 1;}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].task.set(\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}+\textcolor{keywordtype}{long}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})*chunk,\mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ printf("{}init\_data\_static\(\backslash\)n"{});}}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ for(size\_t\ i=0;i<\_nw;++i)\ \{}}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ long\ start=data[i].task.start;}}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ long\ ntask=data[i].ntask;}}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ printf("{}W=\%ld\ \%ld\ <\%ld,\%ld>\(\backslash\)n"{},\ i,\ ntask.load(),\ start.load(),\ data[i].task.end);}}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \}}}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ printf("{}total\ task=\%ld\(\backslash\)n"{},\ ntxw);}}
\DoxyCodeLine{00553\ }
\DoxyCodeLine{00554\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ntxw;}
\DoxyCodeLine{00555\ \ \ \ \ \}\ \ \ \ }
\DoxyCodeLine{00556\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00557\ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a154fdf096759ba81dbed39857680f051}{forall\_Scheduler}}(\mbox{\hyperlink{classff_1_1ff__node_a4507398d523881cfadefdf463bfa5962}{ff\_loadbalancer}}*\ \mbox{\hyperlink{classff_1_1forall___scheduler_a61f5c0d95ce28f84ff54876c5cec2f27}{lb}},\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}},\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}},\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ chunk,\ \textcolor{keywordtype}{size\_t}\ nw):}
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a61f5c0d95ce28f84ff54876c5cec2f27}{lb}}(\mbox{\hyperlink{classff_1_1forall___scheduler_a61f5c0d95ce28f84ff54876c5cec2f27}{lb}}),\mbox{\hyperlink{classff_1_1forall___scheduler_a41ee886f751f100aa8b3015106d04312}{\_start}}(\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}),\mbox{\hyperlink{classff_1_1forall___scheduler_aa5a124d42ca012a547abe7f6a078b29e}{\_stop}}(\mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}}),\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}}(step),\mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}(chunk),\mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}}(0),\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}}(nw),}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a3506b36e2f22ecb8d10d61b531cbd21d}{jump}}(0),\mbox{\hyperlink{classff_1_1forall___scheduler_a04038464f5a9a613cd7c921c59f43f15}{skip1}}(\mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}}),\mbox{\hyperlink{classff_1_1forall___scheduler_ac906a62973bb111ebc9a93b708f33055}{workersspinwait}}(\mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}}),\mbox{\hyperlink{classff_1_1forall___scheduler_a2c05ee4a0e85ddcc081c8ec6321da350}{static\_scheduling}}(\mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}})\ \{}
\DoxyCodeLine{00560\ \textcolor{preprocessor}{\#ifdef\ FF\_PARFOR\_PASSIVE\_NOSTEALING}}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \ \ \_nextIteration\ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_a41ee886f751f100aa8b3015106d04312}{\_start}};}
\DoxyCodeLine{00562\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}}.store(-\/1);\ \textcolor{comment}{//\ MA:\ consistency\ of\ store\ to\ be\ checked}}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}<=0)\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}}\ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad5b74afdd4f75ff0ae846c230ee446c7}{init\_data\_static}}(\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}},\mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}});}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}}\ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_a3a13daaa8156fa8c02686e967ea533ed}{init\_data}}(\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}},\mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}});}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ assert(\mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}}>=1);}
\DoxyCodeLine{00567\ \ \ \ \ \}}
\DoxyCodeLine{00568\ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a2fa26eb43fc1ad4436a1e61198a06e8b}{forall\_Scheduler}}(\mbox{\hyperlink{classff_1_1ff__node_a4507398d523881cfadefdf463bfa5962}{ff\_loadbalancer}}*\ \mbox{\hyperlink{classff_1_1forall___scheduler_a61f5c0d95ce28f84ff54876c5cec2f27}{lb}},\ \textcolor{keywordtype}{size\_t}\ nw):}
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a61f5c0d95ce28f84ff54876c5cec2f27}{lb}}(\mbox{\hyperlink{classff_1_1forall___scheduler_a61f5c0d95ce28f84ff54876c5cec2f27}{lb}}),\mbox{\hyperlink{classff_1_1forall___scheduler_a41ee886f751f100aa8b3015106d04312}{\_start}}(0),\mbox{\hyperlink{classff_1_1forall___scheduler_aa5a124d42ca012a547abe7f6a078b29e}{\_stop}}(0),\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}}(1),\mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}(1),\mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}}(0),\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}}(nw),}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a3506b36e2f22ecb8d10d61b531cbd21d}{jump}}(0),\mbox{\hyperlink{classff_1_1forall___scheduler_a04038464f5a9a613cd7c921c59f43f15}{skip1}}(\mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}}),\mbox{\hyperlink{classff_1_1forall___scheduler_ac906a62973bb111ebc9a93b708f33055}{workersspinwait}}(\mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}}),\mbox{\hyperlink{classff_1_1forall___scheduler_a2c05ee4a0e85ddcc081c8ec6321da350}{static\_scheduling}}(\mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}})\ \{}
\DoxyCodeLine{00571\ \textcolor{preprocessor}{\#ifdef\ FF\_PARFOR\_PASSIVE\_NOSTEALING}}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \_nextIteration\ =\ 0;}
\DoxyCodeLine{00573\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}}.store(-\/1);\ \textcolor{comment}{//\ MA:\ consistency\ of\ store\ to\ be\ checked}}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}}\ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_a3a13daaa8156fa8c02686e967ea533ed}{init\_data}}(0,0);}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ assert(\mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}}==0);}
\DoxyCodeLine{00577\ \ \ \ \ \}}
\DoxyCodeLine{00578\ }
\DoxyCodeLine{00579\ \textcolor{preprocessor}{\#ifdef\ FF\_PARFOR\_PASSIVE\_NOSTEALING}}
\DoxyCodeLine{00580\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ canUseNoStealing()\{}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ !globalSchedRunning\ \&\&\ !\mbox{\hyperlink{classff_1_1forall___scheduler_a2c05ee4a0e85ddcc081c8ec6321da350}{static\_scheduling}}\ \&\&\ \mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}}\ ==\ 1\ \&\&\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}\ ==\ 1;}
\DoxyCodeLine{00582\ \ \ \ \ \}}
\DoxyCodeLine{00583\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00584\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classff_1_1forall___scheduler_acde0545fe3971858aa6afac8810d465f}{sendTask}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ skipmore=\textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00585\ \textcolor{preprocessor}{\#ifdef\ FF\_PARFOR\_PASSIVE\_NOSTEALING}}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(canUseNoStealing())\{}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Just\ start\ the\ workers\ and\ die.}}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ wid=0;wid<\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}};++wid)\ \{}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a61f5c0d95ce28f84ff54876c5cec2f27}{lb}}-\/>ff\_send\_out\_to((\textcolor{keywordtype}{void}*)\ \&dummyTask,\ (\textcolor{keywordtype}{int})\ wid);}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00593\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ remaining\ \ \ \ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}};}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ endchunk\ =\ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}-\/1)*\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}}\ +\ 1;}
\DoxyCodeLine{00596\ }
\DoxyCodeLine{00597\ \ \ \ \ more:}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ wid=0;wid<\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}};++wid)\ \{}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[wid].ntask\ >0)\ \{}
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}\ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[wid].task.start;}
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}}\ \ \ =\ (\mbox{\hyperlink{namespacestd_ac7b9885417769949d76890454b6d072e}{std::min}})(\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}+endchunk,\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[wid].\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}.end);}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a86262b481d6916fa71d1d74d3f1107c1}{taskv}}[wid+\mbox{\hyperlink{classff_1_1forall___scheduler_a3506b36e2f22ecb8d10d61b531cbd21d}{jump}}].set(\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}},\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}});}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a61f5c0d95ce28f84ff54876c5cec2f27}{lb}}-\/>ff\_send\_out\_to(\&\mbox{\hyperlink{classff_1_1forall___scheduler_a86262b481d6916fa71d1d74d3f1107c1}{taskv}}[wid+\mbox{\hyperlink{classff_1_1forall___scheduler_a3506b36e2f22ecb8d10d61b531cbd21d}{jump}}],\ (\textcolor{keywordtype}{int})\ wid);}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/remaining,\ -\/-\/\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[wid].ntask;}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[wid].task).\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}\ =\ (\mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}}-\/1)+\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}};\ \ }
\DoxyCodeLine{00606\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a7cfdf168785f3d51e125e876aac6c0cf}{eossent}}[wid]=\textcolor{keyword}{false};}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a04038464f5a9a613cd7c921c59f43f15}{skip1}}=\textcolor{keyword}{true};\ \textcolor{comment}{//skip2=skip3=true;}}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00609\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ January\ 2014\ (massimo):\ this\ heuristic\ maight\ not\ be\ the\ best\ option\ in\ presence\ }}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ of\ very\ high\ load\ imbalance\ between\ iterations.\ }}
\DoxyCodeLine{00611\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Update:\ removed\ skip2\ and\ skip3\ so\ that\ it\ is\ less\ aggressive\ !}}
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a3506b36e2f22ecb8d10d61b531cbd21d}{jump}}+=long(\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}});}
\DoxyCodeLine{00614\ \ \ \ \ \ \ \ \ assert((\mbox{\hyperlink{classff_1_1forall___scheduler_a3506b36e2f22ecb8d10d61b531cbd21d}{jump}}\ /\ \mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}})\ <=\ 8);}
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ heuristic:\ try\ to\ assign\ more\ task\ at\ the\ very\ beginning}}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!skipmore\ \&\&\ !\mbox{\hyperlink{classff_1_1forall___scheduler_a04038464f5a9a613cd7c921c59f43f15}{skip1}}\ \&\&\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}}>=4*\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}})\ \ \ \{\ \mbox{\hyperlink{classff_1_1forall___scheduler_a04038464f5a9a613cd7c921c59f43f15}{skip1}}=\textcolor{keyword}{true};\ \textcolor{keywordflow}{goto}\ more;\}\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00617\ \ \ \ \ \ \ \ \ \textcolor{comment}{//if\ (!skip2\ \&\&\ totaltasks>=64*\_nw)\ \ \{\ skip1=false;\ skip2=true;\ goto\ moretask;\}}}
\DoxyCodeLine{00618\ \ \ \ \ \ \ \ \ \textcolor{comment}{//if\ (!skip3\ \&\&\ totaltasks>=1024*\_nw)\{\ skip1=false;\ skip2=false;\ skip3=true;\ goto\ moretask;\}}}
\DoxyCodeLine{00619\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (remaining>0);}
\DoxyCodeLine{00620\ \ \ \ \ \}}
\DoxyCodeLine{00621\ }
\DoxyCodeLine{00622\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1forall___scheduler_a4df2914ea848a0c858c3c859a33e3177}{sendWakeUp}}()\ \{}
\DoxyCodeLine{00623\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \textcolor{keywordtype}{id}=0;\textcolor{keywordtype}{id}<\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}};++\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}})\ \{}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a86262b481d6916fa71d1d74d3f1107c1}{taskv}}[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}].set(0,0);}
\DoxyCodeLine{00625\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a61f5c0d95ce28f84ff54876c5cec2f27}{lb}}-\/>ff\_send\_out\_to(\&\mbox{\hyperlink{classff_1_1forall___scheduler_a86262b481d6916fa71d1d74d3f1107c1}{taskv}}[\textcolor{keywordtype}{id}],\ \textcolor{keywordtype}{int}(\textcolor{keywordtype}{id}));}
\DoxyCodeLine{00626\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00627\ \ \ \ \ \}}
\DoxyCodeLine{00628\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classff_1_1forall___scheduler_a08b61710aaa3c443c99476548157f2f3}{nextTaskConcurrentNoStealing}}(\mbox{\hyperlink{structff_1_1forall__task__t}{forall\_task\_t}}\ *\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ wid)\ \{\ \ }
\DoxyCodeLine{00629\ \textcolor{preprocessor}{\#ifdef\ FF\_PARFOR\_PASSIVE\_NOSTEALING}}
\DoxyCodeLine{00630\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ \_nextIteration.fetch\_add(\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}});}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ >=\ \mbox{\hyperlink{classff_1_1forall___scheduler_aa5a124d42ca012a547abe7f6a078b29e}{\_stop}})\{\textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\}}
\DoxyCodeLine{00632\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}-\/>set(\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}},\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ +\ \mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}});}
\DoxyCodeLine{00633\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00634\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00635\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{config_8hpp_a1aebef44e18bd3f2833fea929c783695}{FF\_IGNORE\_UNUSED}}(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}});}
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{config_8hpp_a1aebef44e18bd3f2833fea929c783695}{FF\_IGNORE\_UNUSED}}(wid);}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}To\ use\ nextTaskConcurrentNoStealing\ you\ need\ to\ define\ macro\ FF\_PARFOR\_PASSIVE\_NOSTEALING\(\backslash\)n"{}});}
\DoxyCodeLine{00638\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00639\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00640\ \ \ \ \ \}}
\DoxyCodeLine{00641\ }
\DoxyCodeLine{00642\ \ \ \ \ \textcolor{comment}{//\ this\ method\ is\ accessed\ concurrently\ by\ all\ worker\ threads}}
\DoxyCodeLine{00643\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classff_1_1forall___scheduler_a5d901861bc15ce9805ecdc23572997aa}{nextTaskConcurrent}}(\mbox{\hyperlink{structff_1_1forall__task__t}{forall\_task\_t}}\ *\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ wid)\ \{}
\DoxyCodeLine{00644\ \textcolor{preprocessor}{\#ifdef\ FF\_PARFOR\_PASSIVE\_NOSTEALING}}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(canUseNoStealing())\{}
\DoxyCodeLine{00646\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1forall___scheduler_a08b61710aaa3c443c99476548157f2f3}{nextTaskConcurrentNoStealing}}(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}},\ wid);}
\DoxyCodeLine{00647\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00648\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00649\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ endchunk\ =\ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}-\/1)*\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}}\ +\ 1;\ \textcolor{comment}{//\ next\ end-\/point}}
\DoxyCodeLine{00650\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keywordtype}{id}\ \ =\ wid;}
\DoxyCodeLine{00651\ \ \ \ \ L1:}
\DoxyCodeLine{00652\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\textcolor{keywordtype}{id}].ntask.load(std::memory\_order\_acquire)>0)\ \{}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ oldstart\ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}].task.start.load(std::memory\_order\_relaxed);}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}}\ \ \ \ \ \ =\ (\mbox{\hyperlink{namespacestd_ac7b9885417769949d76890454b6d072e}{std::min}})(oldstart+endchunk,\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\textcolor{keywordtype}{id}].\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}.end);}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ newstart\ =\ (\mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}}-\/1)+\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}};}
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\textcolor{keywordtype}{id}].\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}.start.compare\_exchange\_weak(oldstart,\ newstart,}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::memory\_order\_release,}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::memory\_order\_relaxed))\ \{}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a4b4fb987f81b81b8b08c8d2825e6ac73}{workerlosetime\_in}}(\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw\ <=\ lb-\/>}}getnworkers());}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ L1;\ \textcolor{comment}{//\ restart\ the\ sequence\ from\ the\ beginning}}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ after\ fetch\_sub\ ntask\ may\ be\ less\ than\ 0}}
\DoxyCodeLine{00665\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}].ntask.fetch\_sub(1,std::memory\_order\_release);\ \ \ }
\DoxyCodeLine{00666\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (oldstart<\mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}})\ \{\ \textcolor{comment}{//\ it\ might\ be\ possible\ that\ oldstart\ ==\ end}}
\DoxyCodeLine{00667\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}-\/>set(oldstart,\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}});\ }
\DoxyCodeLine{00668\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00669\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00670\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00671\ }
\DoxyCodeLine{00672\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ no\ available\ task\ for\ the\ current\ thread}}
\DoxyCodeLine{00673\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forall___scheduler_a2c05ee4a0e85ddcc081c8ec6321da350}{static\_scheduling}})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \ \ \ \ \ \textcolor{comment}{//\ <-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00674\ }
\DoxyCodeLine{00675\ \textcolor{preprocessor}{\#if\ !defined(PARFOR\_MULTIPLE\_TASKS\_STEALING)}}
\DoxyCodeLine{00676\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ following\ scheduling\ policy\ for\ the\ tasks\ focuses\ mostly\ to\ load-\/balancing}}
\DoxyCodeLine{00677\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \_maxid\ =\ 0,\ ntask\ =\ 0;}
\DoxyCodeLine{00678\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}}.load(std::memory\_order\_acquire)<0)}
\DoxyCodeLine{00679\ \ \ \ \ \ \ \ \ \ \ \ \ \_maxid\ =\ (long)\ (std::max\_element(\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}.begin(),\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}.end(),\mbox{\hyperlink{namespaceff_a88339da7f9baf4b4ad178ea5d86b45a1}{data\_cmp}})\ -\/\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}.begin());}
\DoxyCodeLine{00680\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \_maxid\ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}};}
\DoxyCodeLine{00681\ \ \ \ \ \ \ \ \ ntask\ \ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\_maxid].ntask.load(std::memory\_order\_relaxed);}
\DoxyCodeLine{00682\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ntask>0)\ \{\ }
\DoxyCodeLine{00683\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_maxid\ !=\ \mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}})\ \mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}}.store(\_maxid,\ std::memory\_order\_release);}
\DoxyCodeLine{00684\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{id}\ =\ \_maxid;\ }
\DoxyCodeLine{00685\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ L1;\ }
\DoxyCodeLine{00686\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00687\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ no\ more\ tasks,\ exit}}
\DoxyCodeLine{00688\ }
\DoxyCodeLine{00689\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00690\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ following\ scheduling\ policy\ for\ the\ tasks\ is\ a\ little\ bit\ more\ }}
\DoxyCodeLine{00691\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ complex\ and\ costly.\ It\ tries\ to\ find\ a\ trade-\/off\ between\ }}
\DoxyCodeLine{00692\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ task-\/to-\/thread\ localy\ and\ load-\/balancing\ by\ moving\ a\ bunch\ of\ tasks\ }}
\DoxyCodeLine{00693\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ from\ one\ thread\ to\ another\ one}}
\DoxyCodeLine{00694\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \_maxid\ =\ 0,\ ntask\ =\ 0;}
\DoxyCodeLine{00695\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}}.load(std::memory\_order\_acquire)<0)}
\DoxyCodeLine{00696\ \ \ \ \ \ \ \ \ \ \ \ \ \_maxid\ =\ (std::max\_element(\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}.begin(),\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}.end(),\mbox{\hyperlink{namespaceff_a88339da7f9baf4b4ad178ea5d86b45a1}{data\_cmp}})\ -\/\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}.begin());}
\DoxyCodeLine{00697\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \_maxid\ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}};}
\DoxyCodeLine{00698\ \ \ \ \ L2:}
\DoxyCodeLine{00699\ \ \ \ \ \ \ \ \ ntask\ \ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\_maxid].ntask.load(std::memory\_order\_relaxed);}
\DoxyCodeLine{00700\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ntask>0)\ \{\ }
\DoxyCodeLine{00701\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_maxid\ !=\ \mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}})\ \mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}}.store(\_maxid,\ std::memory\_order\_release);}
\DoxyCodeLine{00702\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ntask<=3)\ \{\ \textcolor{keywordtype}{id}\ =\ \_maxid;\ \textcolor{keywordflow}{goto}\ L1;\ \}}
\DoxyCodeLine{00703\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00704\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ try\ to\ steal\ half\ of\ the\ tasks\ remaining\ to\ \_maxid}}
\DoxyCodeLine{00705\ }
\DoxyCodeLine{00706\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ oldstart\ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\_maxid].task.start.load(std::memory\_order\_relaxed);}
\DoxyCodeLine{00707\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}\ =\ ((\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\_maxid].task.end-\/oldstart)/\mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}})\ >>\ 1;}
\DoxyCodeLine{00708\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}<=3)\ \{\ \textcolor{keywordtype}{id}\ =\ \_maxid;\ \textcolor{keywordflow}{goto}\ L1;\ \}}
\DoxyCodeLine{00709\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ newstart\ =\ oldstart\ +\ (\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}*\mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}-\/1)*\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}}\ +1;}
\DoxyCodeLine{00710\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\_maxid].\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}.start.compare\_exchange\_weak(oldstart,\ newstart,}
\DoxyCodeLine{00711\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::memory\_order\_release,}
\DoxyCodeLine{00712\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::memory\_order\_relaxed))\ \{}
\DoxyCodeLine{00713\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a4b4fb987f81b81b8b08c8d2825e6ac73}{workerlosetime\_in}}(\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw\ <=\ lb-\/>}}getnworkers());}
\DoxyCodeLine{00714\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ L2;\ \textcolor{comment}{//\ restart\ the\ sequence\ from\ the\ beginning}}
\DoxyCodeLine{00715\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00716\ \ \ \ \ \ \ \ \ \ \ \ \ assert(newstart\ <=\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\_maxid].\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}.end);}
\DoxyCodeLine{00717\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00718\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\_maxid].ntask.fetch\_sub(\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}},\ std::memory\_order\_release);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00719\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[wid].task.start.store(oldstart,\ std::memory\_order\_relaxed);}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[wid].task.end\ =\ newstart;}
\DoxyCodeLine{00721\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[wid].ntask.store(\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}},\ std::memory\_order\_release);}
\DoxyCodeLine{00722\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{id}\ =\ wid;}
\DoxyCodeLine{00723\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ L1;}
\DoxyCodeLine{00724\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00725\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00726\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ }
\DoxyCodeLine{00727\ \ \ \ \ \}}
\DoxyCodeLine{00728\ \ \ \ \ }
\DoxyCodeLine{00729\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classff_1_1forall___scheduler_a46b01225bbf73f9646b8e88ed8c32d2e}{nextTask}}(\mbox{\hyperlink{structff_1_1forall__task__t}{forall\_task\_t}}\ *\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ wid)\ \{}
\DoxyCodeLine{00730\ \textcolor{preprocessor}{\#ifdef\ FF\_PARFOR\_PASSIVE\_NOSTEALING}}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(canUseNoStealing())\{}
\DoxyCodeLine{00732\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1forall___scheduler_a08b61710aaa3c443c99476548157f2f3}{nextTaskConcurrentNoStealing}}(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}},\ wid);}
\DoxyCodeLine{00733\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00734\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00735\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ endchunk\ =\ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}-\/1)*\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}}\ +\ 1;}
\DoxyCodeLine{00736\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id}\ \ =\ wid;}
\DoxyCodeLine{00737\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\textcolor{keywordtype}{id}].ntask)\ \{}
\DoxyCodeLine{00738\ \ \ \ \ \ \ \ \ L1:}
\DoxyCodeLine{00739\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}\ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}].task.start;}
\DoxyCodeLine{00740\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}}\ =\ (\mbox{\hyperlink{namespacestd_ac7b9885417769949d76890454b6d072e}{std::min}})(\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}+endchunk,\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\textcolor{keywordtype}{id}].\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}.end);}
\DoxyCodeLine{00741\ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}].ntask,\ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}].task).\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}\ =\ (\mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}}-\/1)+\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}};}
\DoxyCodeLine{00742\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}-\/>set(\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}},\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}});}
\DoxyCodeLine{00743\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00744\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00745\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ no\ available\ task\ for\ the\ current\ thread}}
\DoxyCodeLine{00746\ \textcolor{preprocessor}{\#if\ !defined(PARFOR\_MULTIPLE\_TASKS\_STEALING)}}
\DoxyCodeLine{00747\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ following\ scheduling\ policy\ for\ the\ tasks\ focuses\ mostly\ to\ load-\/balancing}}
\DoxyCodeLine{00748\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}}<0)\ \ \{\ \textcolor{comment}{//check\ if\ maxid\ has\ been\ set}}
\DoxyCodeLine{00749\ \ \ \ \ \ \ \ \ L2:}
\DoxyCodeLine{00750\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}}\ =\ (long)\ (std::max\_element(\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}.begin(),\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}.end(),\mbox{\hyperlink{namespaceff_a88339da7f9baf4b4ad178ea5d86b45a1}{data\_cmp}})\ -\/\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}.begin());}
\DoxyCodeLine{00751\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}}].ntask\ >\ 0)\ \{}
\DoxyCodeLine{00752\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{id}=\mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}};}
\DoxyCodeLine{00753\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ L1;}
\DoxyCodeLine{00754\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00755\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ no\ more\ tasks,\ exit}}
\DoxyCodeLine{00756\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}}].ntask\ >\ 0)\ \{\ }
\DoxyCodeLine{00758\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{id}=\mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}};}
\DoxyCodeLine{00759\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ L1;}
\DoxyCodeLine{00760\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00761\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ L2;}
\DoxyCodeLine{00762\ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00763\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00764\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ flag=\textcolor{keyword}{false};}
\DoxyCodeLine{00765\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}}<0)\ \ \{}
\DoxyCodeLine{00766\ \ \ \ \ \ \ \ \ L2:}
\DoxyCodeLine{00767\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}}\ =\ (std::max\_element(\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}.begin(),\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}.end(),\mbox{\hyperlink{namespaceff_a88339da7f9baf4b4ad178ea5d86b45a1}{data\_cmp}})\ -\/\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}.begin());}
\DoxyCodeLine{00768\ \ \ \ \ \ \ \ \ \ \ \ \ flag=\textcolor{keyword}{true};}
\DoxyCodeLine{00769\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00770\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{id}\ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_aa7b38343f7719ca671fd1fcd2c3641db}{maxid}};}
\DoxyCodeLine{00771\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\textcolor{keywordtype}{id}].ntask>0)\ \{}
\DoxyCodeLine{00772\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\textcolor{keywordtype}{id}].ntask<=3)\ \textcolor{keywordflow}{goto}\ L1;}
\DoxyCodeLine{00773\ }
\DoxyCodeLine{00774\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ steal\ half\ of\ the\ tasks}}
\DoxyCodeLine{00775\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}\ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}].ntask\ >>\ 1,\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}].ntask\ \&\ 0x1;\ }
\DoxyCodeLine{00776\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}].ntask\ \ =\ \mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}};}
\DoxyCodeLine{00777\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[wid].ntask\ =\ \mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}+\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}};}
\DoxyCodeLine{00778\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[wid].task.end\ \ \ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}].task.end;}
\DoxyCodeLine{00779\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}].task.end\ \ \ \ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}].task.start\ +\ (\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}*\mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}-\/1)*\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}}\ +1;}
\DoxyCodeLine{00780\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[wid].task.start\ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad1582706cf3e38c4ec1e4214478a05cf}{data}}[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}].task.end;}
\DoxyCodeLine{00781\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{id}\ =\ wid;}
\DoxyCodeLine{00782\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ L1;}
\DoxyCodeLine{00783\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (!flag)\ \textcolor{keywordflow}{goto}\ L2;}
\DoxyCodeLine{00784\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00785\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ }
\DoxyCodeLine{00786\ \ \ \ \ \}}
\DoxyCodeLine{00787\ }
\DoxyCodeLine{00788\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{classff_1_1forall___scheduler_ab36264b64d9301afcebe9cccb2d685b4}{svc}}(\textcolor{keywordtype}{void}*\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00789\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}==\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{}
\DoxyCodeLine{00790\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}}==0)\ \{\ \mbox{\hyperlink{classff_1_1forall___scheduler_a61f5c0d95ce28f84ff54876c5cec2f27}{lb}}-\/>broadcast\_task(\mbox{\hyperlink{classff_1_1ff__node_a57ce59be19900e98cce03412a099738a}{GO\_OUT}});\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__node_a57ce59be19900e98cce03412a099738a}{GO\_OUT}};\}}
\DoxyCodeLine{00791\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_acde0545fe3971858aa6afac8810d465f}{sendTask}}();}
\DoxyCodeLine{00792\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__node_aeb850854e59fe44fe3c0ddcb76263de8}{GO\_ON}};\ }
\DoxyCodeLine{00793\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00794\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ wid\ =\ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a61f5c0d95ce28f84ff54876c5cec2f27}{lb}}-\/>get\_channel\_id();}
\DoxyCodeLine{00795\ \ \ \ \ \ \ \ \ assert(wid>=0);}
\DoxyCodeLine{00796\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (-\/-\/\mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}}\ <=0)\ \{}
\DoxyCodeLine{00797\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classff_1_1forall___scheduler_a7cfdf168785f3d51e125e876aac6c0cf}{eossent}}[wid])\ \{}
\DoxyCodeLine{00798\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a61f5c0d95ce28f84ff54876c5cec2f27}{lb}}-\/>ff\_send\_out\_to(\mbox{\hyperlink{classff_1_1forall___scheduler_ac906a62973bb111ebc9a93b708f33055}{workersspinwait}}?\mbox{\hyperlink{classff_1_1ff__node_a35c10ab7f946623d0c9a64371ba25b3b}{EOS\_NOFREEZE}}:\mbox{\hyperlink{classff_1_1ff__node_a57ce59be19900e98cce03412a099738a}{GO\_OUT}},\ \textcolor{keywordtype}{int}(wid));}
\DoxyCodeLine{00799\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a7cfdf168785f3d51e125e876aac6c0cf}{eossent}}[wid]=\textcolor{keyword}{true};}
\DoxyCodeLine{00800\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00801\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__node_a57ce59be19900e98cce03412a099738a}{GO\_OUT}};}
\DoxyCodeLine{00802\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00803\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forall___scheduler_a46b01225bbf73f9646b8e88ed8c32d2e}{nextTask}}((\mbox{\hyperlink{structff_1_1forall__task__t}{forall\_task\_t}}*)\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}},\ (\textcolor{keywordtype}{int})\ wid))\ \mbox{\hyperlink{classff_1_1forall___scheduler_a61f5c0d95ce28f84ff54876c5cec2f27}{lb}}-\/>ff\_send\_out\_to(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}},\ \textcolor{keywordtype}{int}(wid));\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00804\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \ \{}
\DoxyCodeLine{00805\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classff_1_1forall___scheduler_a7cfdf168785f3d51e125e876aac6c0cf}{eossent}}[wid])\ \{}
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a61f5c0d95ce28f84ff54876c5cec2f27}{lb}}-\/>ff\_send\_out\_to((\mbox{\hyperlink{classff_1_1forall___scheduler_ac906a62973bb111ebc9a93b708f33055}{workersspinwait}}?\mbox{\hyperlink{classff_1_1ff__node_a35c10ab7f946623d0c9a64371ba25b3b}{EOS\_NOFREEZE}}:\mbox{\hyperlink{classff_1_1ff__node_a57ce59be19900e98cce03412a099738a}{GO\_OUT}}),\ \textcolor{keywordtype}{int}(wid));}
\DoxyCodeLine{00807\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a7cfdf168785f3d51e125e876aac6c0cf}{eossent}}[wid]=\textcolor{keyword}{true};}
\DoxyCodeLine{00808\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00809\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00810\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__node_aeb850854e59fe44fe3c0ddcb76263de8}{GO\_ON}};}
\DoxyCodeLine{00811\ \ \ \ \ \}}
\DoxyCodeLine{00812\ }
\DoxyCodeLine{00813\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1forall___scheduler_a728a9b2c8c7b5afd177d146c3364160c}{setloop}}(\textcolor{keywordtype}{long}\ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}},\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}},\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ chunk,\ \textcolor{keywordtype}{size\_t}\ nw)\ \{}
\DoxyCodeLine{00814\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a41ee886f751f100aa8b3015106d04312}{\_start}}=\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}},\ \mbox{\hyperlink{classff_1_1forall___scheduler_aa5a124d42ca012a547abe7f6a078b29e}{\_stop}}=\mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}},\ \mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}}=step,\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}=chunk,\ \mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}}=nw;}
\DoxyCodeLine{00815\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00816\ \textcolor{preprocessor}{\#ifdef\ FF\_PARFOR\_PASSIVE\_NOSTEALING}}
\DoxyCodeLine{00817\ \ \ \ \ \ \ \ \ \_nextIteration\ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_a41ee886f751f100aa8b3015106d04312}{\_start}};}
\DoxyCodeLine{00818\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00819\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}}<=0)\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}}\ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad5b74afdd4f75ff0ae846c230ee446c7}{init\_data\_static}}(\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}},\mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}});}
\DoxyCodeLine{00820\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}}\ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_a3a13daaa8156fa8c02686e967ea533ed}{init\_data}}(\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}},\mbox{\hyperlink{classff_1_1ff__node_a94d7a6d3bc2af21a2c6e0da1a7d911ea}{stop}});}
\DoxyCodeLine{00821\ }
\DoxyCodeLine{00822\ \ \ \ \ \ \ \ \ assert(\mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}}>=1);\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00823\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ adjust\ the\ number\ of\ workers\ that\ have\ to\ be\ started}}
\DoxyCodeLine{00824\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}}/(\textcolor{keywordtype}{double})\mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}})\ <=\ 1.0\ ||\ (\mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}}==1)\ )}
\DoxyCodeLine{00825\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}}\ =\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}};}
\DoxyCodeLine{00826\ \ \ \ \ \}}
\DoxyCodeLine{00827\ }
\DoxyCodeLine{00828\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{classff_1_1forall___scheduler_a1c5812ca1097bffb93f280f6446523ef}{startIdx}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1forall___scheduler_a41ee886f751f100aa8b3015106d04312}{\_start}};\}}
\DoxyCodeLine{00829\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{classff_1_1forall___scheduler_a5fa8ac73dcac68b1195697b4d0d351f3}{stopIdx}}()\textcolor{keyword}{\ \ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1forall___scheduler_aa5a124d42ca012a547abe7f6a078b29e}{\_stop}};\}}
\DoxyCodeLine{00830\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{classff_1_1forall___scheduler_a27311e5bfc5a5b3c7276c404df166ef0}{stepIdx}}()\textcolor{keyword}{\ \ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}};\}}
\DoxyCodeLine{00831\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classff_1_1forall___scheduler_a83b3ca8a1953dcfdd8ade70584ecb66f}{running}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}};\ \}}
\DoxyCodeLine{00832\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1forall___scheduler_aa2653b17cbaff5efed56eb37ac5d356d}{workersSpinWait}}()\ \{\ \mbox{\hyperlink{classff_1_1forall___scheduler_ac906a62973bb111ebc9a93b708f33055}{workersspinwait}}=\textcolor{keyword}{true};\}}
\DoxyCodeLine{00833\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad31b2b7295a9eb1e224a35c1b7bce79d}{getnumtasks}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}};\}}
\DoxyCodeLine{00834\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00835\ \ \ \ \ \textcolor{comment}{//\ the\ following\ fields\ are\ used\ only\ by\ the\ scheduler\ thread}}
\DoxyCodeLine{00836\ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a4507398d523881cfadefdf463bfa5962}{ff\_loadbalancer}}\ *\mbox{\hyperlink{classff_1_1forall___scheduler_a61f5c0d95ce28f84ff54876c5cec2f27}{lb}};}
\DoxyCodeLine{00837\ \ \ \ \ \textcolor{keywordtype}{long}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a41ee886f751f100aa8b3015106d04312}{\_start}},\mbox{\hyperlink{classff_1_1forall___scheduler_aa5a124d42ca012a547abe7f6a078b29e}{\_stop}},\mbox{\hyperlink{classff_1_1forall___scheduler_a31fe3504ce4d3f1e3a6ad699d81037a8}{\_step}};\ \ \textcolor{comment}{//\ for\ step}}
\DoxyCodeLine{00838\ \ \ \ \ \textcolor{keywordtype}{long}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad8cef6d973939e5f5900cf6f7bb48aa7}{\_chunk}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ a\ chunk\ of\ indexes}}
\DoxyCodeLine{00839\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ad8dbf8bc715dee1b37c70822fa2275cb}{totaltasks}};\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ total\ n.\ of\ tasks}}
\DoxyCodeLine{00840\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a4f70c12391523dba2fed576b54224497}{\_nw}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ num.\ of\ workers}}
\DoxyCodeLine{00841\ \ \ \ \ \textcolor{keywordtype}{long}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a3506b36e2f22ecb8d10d61b531cbd21d}{jump}};}
\DoxyCodeLine{00842\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a04038464f5a9a613cd7c921c59f43f15}{skip1}};}
\DoxyCodeLine{00843\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_ac906a62973bb111ebc9a93b708f33055}{workersspinwait}};}
\DoxyCodeLine{00844\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler_a2c05ee4a0e85ddcc081c8ec6321da350}{static\_scheduling}};}
\DoxyCodeLine{00845\ \ \ \ \ std::vector<forall\_task\_t>\ \mbox{\hyperlink{classff_1_1forall___scheduler_a86262b481d6916fa71d1d74d3f1107c1}{taskv}};}
\DoxyCodeLine{00846\ \};}
\DoxyCodeLine{00847\ }
\DoxyCodeLine{00848\ \textcolor{comment}{//\ parallel\ for/reduce\ \ worker\ node}}
\DoxyCodeLine{00849\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Tres>}
\DoxyCodeLine{00850\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classff_1_1forallreduce___w_ae01883cc3c800452fd5940b6221c1007}{forallreduce\_W}}:\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classff_1_1ff__node_a53ab8b2244539766bdea3eb65cb04f9b}{ff\_node}}\ \{}
\DoxyCodeLine{00851\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00852\ \ \ \ \ \textcolor{keyword}{typedef}\ Tres\ \mbox{\hyperlink{classff_1_1forallreduce___w_a843e09c77320b8a2e87cb440bed06e0e}{Tres\_t}};}
\DoxyCodeLine{00853\ \ \ \ \ \textcolor{keyword}{typedef}\ std::function<\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{long},\textcolor{keyword}{const}\ \textcolor{keywordtype}{long},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int},\ Tres\&)>\ \mbox{\hyperlink{classff_1_1forallreduce___w_aeeb4cf2b436e3cf6d27bc09658ed6452}{F\_t}};}
\DoxyCodeLine{00854\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00855\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1forallreduce___w_a7b2ff0330327c8653d3b9d7ca2784bc2}{losetime\_in}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long})\ \{}
\DoxyCodeLine{00856\ \ \ \ \ \ \ \ \ \textcolor{comment}{//FFTRACE(lostpopticks+=ff\_node::TICKS2WAIT;\ ++popwait);\ //\ FIX}}
\DoxyCodeLine{00857\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a4b4fb987f81b81b8b08c8d2825e6ac73}{workerlosetime\_in}}(\mbox{\hyperlink{classff_1_1forallreduce___w_ab0907e72b003e9f0b03ad9a99c86b7b8}{aggressive}});}
\DoxyCodeLine{00858\ \ \ \ \ \}}
\DoxyCodeLine{00859\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00860\ \ \ \ \ \mbox{\hyperlink{classff_1_1forallreduce___w_ae01883cc3c800452fd5940b6221c1007}{forallreduce\_W}}(\mbox{\hyperlink{classff_1_1forall___scheduler}{forall\_Scheduler}}\ *\textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1forallreduce___w_a908f5f96d58c0bd58ee53106306aab88}{sched}},\ \mbox{\hyperlink{structff_1_1ff_barrier}{ffBarrier}}\ *\textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1forallreduce___w_a871c9cdefc05cc499455ad76f4ca32cc}{loopbar}},\ \mbox{\hyperlink{classff_1_1forallreduce___w_aeeb4cf2b436e3cf6d27bc09658ed6452}{F\_t}}\ \mbox{\hyperlink{classff_1_1forallreduce___w_a29693040ed5f4aa9eb0d60ced20ea393}{F}}):}
\DoxyCodeLine{00861\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forallreduce___w_a908f5f96d58c0bd58ee53106306aab88}{sched}}(\mbox{\hyperlink{classff_1_1forallreduce___w_a908f5f96d58c0bd58ee53106306aab88}{sched}}),\mbox{\hyperlink{classff_1_1forallreduce___w_a871c9cdefc05cc499455ad76f4ca32cc}{loopbar}}(\mbox{\hyperlink{classff_1_1forallreduce___w_a871c9cdefc05cc499455ad76f4ca32cc}{loopbar}}),\ \mbox{\hyperlink{classff_1_1forallreduce___w_ac17145cf1ca9a2768c89ffc103ba93a8}{schedRunning}}(\mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}}),\ }
\DoxyCodeLine{00862\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forallreduce___w_adf41f408516c10b59a7bc1cf499f6458}{spinwait}}(\mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}}),\ \mbox{\hyperlink{classff_1_1forallreduce___w_ab0907e72b003e9f0b03ad9a99c86b7b8}{aggressive}}(\mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}}),\mbox{\hyperlink{classff_1_1forallreduce___w_a29693040ed5f4aa9eb0d60ced20ea393}{F}}(\mbox{\hyperlink{classff_1_1forallreduce___w_a29693040ed5f4aa9eb0d60ced20ea393}{F}})\ \{\}}
\DoxyCodeLine{00863\ \ \ \ \ }
\DoxyCodeLine{00864\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1forallreduce___w_a56e9050b26577a290af9b657da5f118e}{setSchedRunning}}(\textcolor{keywordtype}{bool}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}})\ \{\ \mbox{\hyperlink{classff_1_1forallreduce___w_ac17145cf1ca9a2768c89ffc103ba93a8}{schedRunning}}\ =\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}};\ \}}
\DoxyCodeLine{00865\ }
\DoxyCodeLine{00866\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{classff_1_1forallreduce___w_aff0c63c12731abf8f7795693cebdb321}{svc}}(\textcolor{keywordtype}{void}*\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00867\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ =\ (\mbox{\hyperlink{structff_1_1forall__task__t}{forall\_task\_t}}*)\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}};}
\DoxyCodeLine{00868\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classff_1_1ff__node_adb9f904fd4d880a67c2bf6c7e14bd82f}{myid}}\ =\ \mbox{\hyperlink{classff_1_1ff__node_a32d30503e0a33406841d77bc1f4dc2e2}{get\_my\_id}}();}
\DoxyCodeLine{00869\ }
\DoxyCodeLine{00870\ \textcolor{preprocessor}{\#ifdef\ FF\_PARFOR\_PASSIVE\_NOSTEALING}}
\DoxyCodeLine{00871\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1forall__task__t}{forall\_task\_t}}\ tmptask;}
\DoxyCodeLine{00872\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ !=\ (\textcolor{keywordtype}{void}*)\ \&dummyTask\ ||\ \mbox{\hyperlink{classff_1_1forallreduce___w_ac17145cf1ca9a2768c89ffc103ba93a8}{schedRunning}})\{}
\DoxyCodeLine{00873\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forallreduce___w_a29693040ed5f4aa9eb0d60ced20ea393}{F}}(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}-\/>start,\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}-\/>end,\mbox{\hyperlink{classff_1_1ff__node_adb9f904fd4d880a67c2bf6c7e14bd82f}{myid}},\mbox{\hyperlink{classff_1_1forallreduce___w_af3b2bcd4861d7ebd3f311355025c4c49}{res}});}
\DoxyCodeLine{00874\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forallreduce___w_ac17145cf1ca9a2768c89ffc103ba93a8}{schedRunning}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}};}
\DoxyCodeLine{00875\ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{00876\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ =\ \&tmptask;}
\DoxyCodeLine{00877\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00878\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00879\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forallreduce___w_a29693040ed5f4aa9eb0d60ced20ea393}{F}}(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}-\/>start,\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}-\/>end,\mbox{\hyperlink{classff_1_1ff__node_adb9f904fd4d880a67c2bf6c7e14bd82f}{myid}},\mbox{\hyperlink{classff_1_1forallreduce___w_af3b2bcd4861d7ebd3f311355025c4c49}{res}});}
\DoxyCodeLine{00880\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forallreduce___w_ac17145cf1ca9a2768c89ffc103ba93a8}{schedRunning}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}};}
\DoxyCodeLine{00881\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00882\ }
\DoxyCodeLine{00883\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ code\ below\ is\ executed\ only\ if\ the\ scheduler\ thread\ is\ not\ running}}
\DoxyCodeLine{00884\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\mbox{\hyperlink{classff_1_1forallreduce___w_a908f5f96d58c0bd58ee53106306aab88}{sched}}-\/>nextTaskConcurrent(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}},\mbox{\hyperlink{classff_1_1ff__node_adb9f904fd4d880a67c2bf6c7e14bd82f}{myid}}))}
\DoxyCodeLine{00885\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forallreduce___w_a29693040ed5f4aa9eb0d60ced20ea393}{F}}(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}-\/>start,\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}-\/>end,\mbox{\hyperlink{classff_1_1ff__node_adb9f904fd4d880a67c2bf6c7e14bd82f}{myid}},\mbox{\hyperlink{classff_1_1forallreduce___w_af3b2bcd4861d7ebd3f311355025c4c49}{res}});}
\DoxyCodeLine{00886\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00887\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forallreduce___w_adf41f408516c10b59a7bc1cf499f6458}{spinwait}})\ \{}
\DoxyCodeLine{00888\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forallreduce___w_a871c9cdefc05cc499455ad76f4ca32cc}{loopbar}}-\/>doBarrier(\mbox{\hyperlink{classff_1_1ff__node_adb9f904fd4d880a67c2bf6c7e14bd82f}{myid}});}
\DoxyCodeLine{00889\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__node_aeb850854e59fe44fe3c0ddcb76263de8}{GO\_ON}};}
\DoxyCodeLine{00890\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00891\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__node_a57ce59be19900e98cce03412a099738a}{GO\_OUT}};}
\DoxyCodeLine{00892\ \ \ \ \ \}}
\DoxyCodeLine{00893\ }
\DoxyCodeLine{00894\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1forallreduce___w_a94489c397978c4b46d1f71cbc4007947}{enableSpinWait}}()\ \{\ \ \mbox{\hyperlink{classff_1_1forallreduce___w_adf41f408516c10b59a7bc1cf499f6458}{spinwait}}=\textcolor{keyword}{true};\ \}}
\DoxyCodeLine{00895\ }
\DoxyCodeLine{00896\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1forallreduce___w_ae8f1d11978fc15df214c36cdf6b808e0}{setF}}(\mbox{\hyperlink{classff_1_1forallreduce___w_aeeb4cf2b436e3cf6d27bc09658ed6452}{F\_t}}\ \_F,\ \textcolor{keyword}{const}\ Tres\&\ idtt,\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}=\textcolor{keyword}{true})\ \{\ }
\DoxyCodeLine{00897\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forallreduce___w_a29693040ed5f4aa9eb0d60ced20ea393}{F}}=\_F,\ \mbox{\hyperlink{classff_1_1forallreduce___w_af3b2bcd4861d7ebd3f311355025c4c49}{res}}=idtt,\ \mbox{\hyperlink{classff_1_1forallreduce___w_ab0907e72b003e9f0b03ad9a99c86b7b8}{aggressive}}=\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}};}
\DoxyCodeLine{00898\ \ \ \ \ \}}
\DoxyCodeLine{00899\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ Tres\&\ \mbox{\hyperlink{classff_1_1forallreduce___w_a45b8a090a9bff56ba1d1c4b36c8f4aa4}{getres}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1forallreduce___w_af3b2bcd4861d7ebd3f311355025c4c49}{res}};\ \}}
\DoxyCodeLine{00900\ }
\DoxyCodeLine{00901\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00902\ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler}{forall\_Scheduler}}\ *\textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1forallreduce___w_a908f5f96d58c0bd58ee53106306aab88}{sched}};}
\DoxyCodeLine{00903\ \ \ \ \ \mbox{\hyperlink{structff_1_1ff_barrier}{ffBarrier}}\ *\textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1forallreduce___w_a871c9cdefc05cc499455ad76f4ca32cc}{loopbar}};}
\DoxyCodeLine{00904\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classff_1_1forallreduce___w_ac17145cf1ca9a2768c89ffc103ba93a8}{schedRunning}};\ \ \ \ }
\DoxyCodeLine{00905\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00906\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classff_1_1forallreduce___w_adf41f408516c10b59a7bc1cf499f6458}{spinwait}},\mbox{\hyperlink{classff_1_1forallreduce___w_ab0907e72b003e9f0b03ad9a99c86b7b8}{aggressive}};}
\DoxyCodeLine{00907\ \ \ \ \ \mbox{\hyperlink{classff_1_1forallreduce___w_aeeb4cf2b436e3cf6d27bc09658ed6452}{F\_t}}\ \ \mbox{\hyperlink{classff_1_1forallreduce___w_a29693040ed5f4aa9eb0d60ced20ea393}{F}};}
\DoxyCodeLine{00908\ \ \ \ \ Tres\ \mbox{\hyperlink{classff_1_1forallreduce___w_af3b2bcd4861d7ebd3f311355025c4c49}{res}};}
\DoxyCodeLine{00909\ \};}
\DoxyCodeLine{00910\ }
\DoxyCodeLine{00911\ }
\DoxyCodeLine{00912\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classff_1_1forallpipereduce___w_ac12d1cb3c513d8abc8fb9c0c725b59da}{forallpipereduce\_W}}:\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classff_1_1forallreduce___w_ae01883cc3c800452fd5940b6221c1007}{forallreduce\_W}}<ff\_buffernode>\ \{}
\DoxyCodeLine{00913\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00914\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structff_1_1ff__buffernode}{ff\_buffernode}}\ \mbox{\hyperlink{classff_1_1forallpipereduce___w_a499605259633110737608f21c139a6f3}{Tres\_t}};}
\DoxyCodeLine{00915\ \ \ \ \ \textcolor{keyword}{typedef}\ std::function<\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{long},\textcolor{keyword}{const}\ \textcolor{keywordtype}{long},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int},\ \mbox{\hyperlink{structff_1_1ff__buffernode}{ff\_buffernode}}\&)>\ \mbox{\hyperlink{classff_1_1forallpipereduce___w_aa4710b7c78aa79f3e15d8b6a05f087a7}{F\_t}};}
\DoxyCodeLine{00916\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00917\ \ \ \ \ \mbox{\hyperlink{classff_1_1forallpipereduce___w_ac12d1cb3c513d8abc8fb9c0c725b59da}{forallpipereduce\_W}}(\mbox{\hyperlink{classff_1_1forall___scheduler}{forall\_Scheduler}}\ *\textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1forallreduce___w_a908f5f96d58c0bd58ee53106306aab88}{sched}},\mbox{\hyperlink{structff_1_1ff_barrier}{ffBarrier}}\ *\textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1forallreduce___w_a871c9cdefc05cc499455ad76f4ca32cc}{loopbar}},\ \mbox{\hyperlink{classff_1_1forallpipereduce___w_aa4710b7c78aa79f3e15d8b6a05f087a7}{F\_t}}\ \mbox{\hyperlink{classff_1_1forallreduce___w_a29693040ed5f4aa9eb0d60ced20ea393}{F}}):}
\DoxyCodeLine{00918\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forallreduce___w_ae01883cc3c800452fd5940b6221c1007}{forallreduce\_W}}<\mbox{\hyperlink{structff_1_1ff__buffernode}{ff\_buffernode}}>(\mbox{\hyperlink{classff_1_1forallreduce___w_a908f5f96d58c0bd58ee53106306aab88}{sched}},\mbox{\hyperlink{classff_1_1forallreduce___w_a871c9cdefc05cc499455ad76f4ca32cc}{loopbar}},\mbox{\hyperlink{classff_1_1forallreduce___w_a29693040ed5f4aa9eb0d60ced20ea393}{F}})\ \{}
\DoxyCodeLine{00919\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forallreduce___w_af3b2bcd4861d7ebd3f311355025c4c49}{res}}.set(8192,\textcolor{keyword}{false},\mbox{\hyperlink{classff_1_1ff__node_a32d30503e0a33406841d77bc1f4dc2e2}{get\_my\_id}}());}
\DoxyCodeLine{00920\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forallreduce___w_af3b2bcd4861d7ebd3f311355025c4c49}{res}}.init\_blocking\_stuff();}
\DoxyCodeLine{00921\ \ \ \ \ \}}
\DoxyCodeLine{00922\ }
\DoxyCodeLine{00923\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{classff_1_1forallpipereduce___w_a0c2a8ff4836d48504ec20b4b8029b335}{svc}}(\textcolor{keywordtype}{void}*\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00924\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ =\ (\mbox{\hyperlink{structff_1_1forall__task__t}{forall\_task\_t}}*)\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}};}
\DoxyCodeLine{00925\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classff_1_1ff__node_adb9f904fd4d880a67c2bf6c7e14bd82f}{myid}}\ =\ \mbox{\hyperlink{classff_1_1ff__node_a32d30503e0a33406841d77bc1f4dc2e2}{get\_my\_id}}();}
\DoxyCodeLine{00926\ }
\DoxyCodeLine{00927\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forallreduce___w_a29693040ed5f4aa9eb0d60ced20ea393}{F}}(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}-\/>start,\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}-\/>end,\mbox{\hyperlink{classff_1_1ff__node_adb9f904fd4d880a67c2bf6c7e14bd82f}{myid}},\mbox{\hyperlink{classff_1_1forallreduce___w_af3b2bcd4861d7ebd3f311355025c4c49}{res}});}
\DoxyCodeLine{00928\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forallreduce___w_ac17145cf1ca9a2768c89ffc103ba93a8}{schedRunning}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}};}
\DoxyCodeLine{00929\ }
\DoxyCodeLine{00930\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ code\ below\ is\ executed\ only\ if\ the\ scheduler\ thread\ is\ not\ running}}
\DoxyCodeLine{00931\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\mbox{\hyperlink{classff_1_1forallreduce___w_a908f5f96d58c0bd58ee53106306aab88}{sched}}-\/>nextTaskConcurrent(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}},\mbox{\hyperlink{classff_1_1ff__node_adb9f904fd4d880a67c2bf6c7e14bd82f}{myid}}))}
\DoxyCodeLine{00932\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forallreduce___w_a29693040ed5f4aa9eb0d60ced20ea393}{F}}(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}-\/>start,\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}-\/>end,\mbox{\hyperlink{classff_1_1ff__node_adb9f904fd4d880a67c2bf6c7e14bd82f}{myid}},\mbox{\hyperlink{classff_1_1forallreduce___w_af3b2bcd4861d7ebd3f311355025c4c49}{res}});}
\DoxyCodeLine{00933\ }
\DoxyCodeLine{00934\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1forallreduce___w_adf41f408516c10b59a7bc1cf499f6458}{spinwait}})\ \{}
\DoxyCodeLine{00935\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forallreduce___w_af3b2bcd4861d7ebd3f311355025c4c49}{res}}.ff\_send\_out(\mbox{\hyperlink{classff_1_1ff__node_a1e60cdd7d63155baf308086d38690567}{EOS}});}
\DoxyCodeLine{00936\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forallreduce___w_a871c9cdefc05cc499455ad76f4ca32cc}{loopbar}}-\/>doBarrier(\mbox{\hyperlink{classff_1_1ff__node_adb9f904fd4d880a67c2bf6c7e14bd82f}{myid}});}
\DoxyCodeLine{00937\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__node_aeb850854e59fe44fe3c0ddcb76263de8}{GO\_ON}};}
\DoxyCodeLine{00938\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00939\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__node_a57ce59be19900e98cce03412a099738a}{GO\_OUT}};}
\DoxyCodeLine{00940\ \ \ \ \ \}}
\DoxyCodeLine{00941\ \ \ \ \ }
\DoxyCodeLine{00942\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1forallpipereduce___w_af509b065da388430ed56679898697f00}{svc\_end}}()\ \{\ \mbox{\hyperlink{classff_1_1forallreduce___w_af3b2bcd4861d7ebd3f311355025c4c49}{res}}.ff\_send\_out(\mbox{\hyperlink{classff_1_1ff__node_a1e60cdd7d63155baf308086d38690567}{EOS}});\ \}}
\DoxyCodeLine{00943\ }
\DoxyCodeLine{00944\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1forallpipereduce___w_a02d3d53a8288facf51d69f2978b6ee5f}{setF}}(\mbox{\hyperlink{classff_1_1forallpipereduce___w_aa4710b7c78aa79f3e15d8b6a05f087a7}{F\_t}}\ \_F,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1forallpipereduce___w_a499605259633110737608f21c139a6f3}{Tres\_t}}\&,\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}=\textcolor{keyword}{true})\ \{\ }
\DoxyCodeLine{00945\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forallreduce___w_a29693040ed5f4aa9eb0d60ced20ea393}{F}}=\_F,\ \mbox{\hyperlink{classff_1_1forallreduce___w_ab0907e72b003e9f0b03ad9a99c86b7b8}{aggressive}}=\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}};}
\DoxyCodeLine{00946\ \ \ \ \ \}}
\DoxyCodeLine{00947\ }
\DoxyCodeLine{00948\ \ \ \ \ \textcolor{comment}{//\ The\ following\ methods\ are\ custom\ for\ this\ node\ which\ is\ not\ multi-\/output.\ FIX}}
\DoxyCodeLine{00949\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classff_1_1forallpipereduce___w_aa4eaa48252576a8a0dc6c7440b7767c4}{isMultiOutput}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{00950\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1forallpipereduce___w_a8d55b6c8a2fab5a65a71319af32aaee1}{get\_out\_nodes}}(\mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\ \&\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}})\ \{\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.push\_back(\&\mbox{\hyperlink{classff_1_1forallreduce___w_af3b2bcd4861d7ebd3f311355025c4c49}{res}});\ \}}
\DoxyCodeLine{00951\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1forallpipereduce___w_a565448f085524c7d482306bb61b34e0e}{get\_out\_nodes\_feedback}}(\mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\ \&\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}})\ \{\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.push\_back(\textcolor{keyword}{this});\ \}}
\DoxyCodeLine{00952\ \};}
\DoxyCodeLine{00953\ }
\DoxyCodeLine{00954\ }
\DoxyCodeLine{00955\ }
\DoxyCodeLine{00956\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Worker\_t>}
\DoxyCodeLine{00957\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classff_1_1ff__forall__farm_a853e08b55ff63d1c5a38d9b6aa0014ee}{ff\_forall\_farm}}:\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classff_1_1ff__farm_a9b16234269f61fb52814e520773fba3e}{ff\_farm}}\ \{}
\DoxyCodeLine{00958\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00959\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ Worker\_t::Tres\_t\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a8759b6a095d0ed5dfb89a37c13a8fd9a}{Tres\_t}};}
\DoxyCodeLine{00960\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ Worker\_t::F\_t\ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_a0b8133abec2426eb8918648ecf7f2cec}{F\_t}};}
\DoxyCodeLine{00961\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00962\ \ \ \ \ \textcolor{comment}{//\ removes\ possible\ EOS\ still\ in\ the\ input\ queues\ of\ the\ workers}}
\DoxyCodeLine{00963\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_ac39519d98090ff0cfb14a511a5dd1bd8}{resetqueues}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \_nw)\ \{}
\DoxyCodeLine{00964\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\ \&\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}\ =\ \mbox{\hyperlink{classff_1_1ff__farm_a67596a94ae016f648b2793a90b96a5de}{getWorkers}}();}
\DoxyCodeLine{00965\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\_nw;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>\mbox{\hyperlink{classff_1_1ff__farm_a99b75a304b6e523d9597ad13a5c8b9ce}{reset}}();}
\DoxyCodeLine{00966\ \ \ \ \ \}}
\DoxyCodeLine{00967\ \ \ \ \ \textcolor{comment}{//\ \ used\ just\ to\ redefine\ losetime\_in}}
\DoxyCodeLine{00968\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classff_1_1ff__forall__farm_1_1foralllb__t_a0b167a12293ee76c1fe97f2696896709}{foralllb\_t}}:\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classff_1_1ff__loadbalancer_a8b8f228fd4a63d3da50be60d2b28e699}{ff\_loadbalancer}}\ \{}
\DoxyCodeLine{00969\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00970\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_1_1foralllb__t_aa45c146cd44517dc65f9646d0bfd4cbd}{losetime\_in}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long})\ \{\ }
\DoxyCodeLine{00971\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\textcolor{keywordtype}{int})(\mbox{\hyperlink{classff_1_1ff__loadbalancer_a3b941ed604a60ad7356945071b6ed6d5}{getnworkers}}())>=\mbox{\hyperlink{classff_1_1ff__forall__farm_1_1foralllb__t_af520adb769e4dd289bffca3eee5cc731}{ncores}})\ \{}
\DoxyCodeLine{00972\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//FFTRACE(lostpopticks+=(100*TICKS2WAIT);++popwait);\ //\ FIX:\ adjust\ tracing}}
\DoxyCodeLine{00973\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a971d873b94c8fe649b37150f789a0e86}{ff\_relax}}(0);}
\DoxyCodeLine{00974\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00975\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \ \ \ }
\DoxyCodeLine{00976\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//FFTRACE(lostpushticks+=TICKS2WAIT;++pushwait);}}
\DoxyCodeLine{00977\ \ \ \ \ \ \ \ \ \ \ \ \ PAUSE();\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00978\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00979\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00980\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_1_1foralllb__t_a0b167a12293ee76c1fe97f2696896709}{foralllb\_t}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}):\mbox{\hyperlink{classff_1_1ff__loadbalancer_a8b8f228fd4a63d3da50be60d2b28e699}{ff\_loadbalancer}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}),\mbox{\hyperlink{classff_1_1ff__forall__farm_1_1foralllb__t_af520adb769e4dd289bffca3eee5cc731}{ncores}}(\mbox{\hyperlink{mapping__utils_8hpp_a48b4561032da858d15d02cb7179b0b53}{ff\_realNumCores}}())\ \{\}}
\DoxyCodeLine{00981\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_1_1foralllb__t_a1036d7d6d0225d2440b65cab00d1af42}{getNCores}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_1_1foralllb__t_af520adb769e4dd289bffca3eee5cc731}{ncores}};\}}
\DoxyCodeLine{00982\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00983\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_1_1foralllb__t_af520adb769e4dd289bffca3eee5cc731}{ncores}};}
\DoxyCodeLine{00984\ \ \ \ \ \};}
\DoxyCodeLine{00985\ \ \ \ \ }
\DoxyCodeLine{00986\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00987\ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_a8759b6a095d0ed5dfb89a37c13a8fd9a}{Tres\_t}}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_acccb2e771aa88afc8df6961d872b9948}{t}};\ \textcolor{comment}{//\ not\ used}}
\DoxyCodeLine{00988\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a97ee17008a55ea8778b292e51b4d1756}{numCores}};}
\DoxyCodeLine{00989\ \ \ \ \ \mbox{\hyperlink{structff_1_1ff_barrier}{ffBarrier}}\ *\mbox{\hyperlink{classff_1_1ff__forall__farm_a1565bface1388374d44c6860bb848ac1}{loopbar}};}
\DoxyCodeLine{00990\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00991\ }
\DoxyCodeLine{00992\ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_a853e08b55ff63d1c5a38d9b6aa0014ee}{ff\_forall\_farm}}(\mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ maxnw,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_af17988819c07da0586d0ab2eeb5555a7}{spinwait}}=\textcolor{keyword}{false},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a3b3a8b4bfc23c90a9412c486ff6d898a}{skipwarmup}}=\textcolor{keyword}{false},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ spinbarrier=\textcolor{keyword}{false}):}
\DoxyCodeLine{00993\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_a9b16234269f61fb52814e520773fba3e}{ff\_farm}}(\mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}},8*\mbox{\hyperlink{config_8hpp_a1c4f30863b8ed8d50b6eb98cee2f6f7c}{DEF\_MAX\_NUM\_WORKERS}},8*\mbox{\hyperlink{config_8hpp_a1c4f30863b8ed8d50b6eb98cee2f6f7c}{DEF\_MAX\_NUM\_WORKERS}},}
\DoxyCodeLine{00994\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}},\ \mbox{\hyperlink{config_8hpp_a1c4f30863b8ed8d50b6eb98cee2f6f7c}{DEF\_MAX\_NUM\_WORKERS}},\mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}}),\ \textcolor{comment}{//\ cleanup\ at\ exit\ !}}
\DoxyCodeLine{00995\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_a1565bface1388374d44c6860bb848ac1}{loopbar}}(\ (\mbox{\hyperlink{classff_1_1ff__forall__farm_af17988819c07da0586d0ab2eeb5555a7}{spinwait}}\ \&\&\ spinbarrier)\ ?\ }
\DoxyCodeLine{00996\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{structff_1_1ff_barrier}{ffBarrier}}*)(new\ \mbox{\hyperlink{classff_1_1spin_barrier}{spinBarrier}}(maxnw<=0?\mbox{\hyperlink{config_8hpp_a1c4f30863b8ed8d50b6eb98cee2f6f7c}{DEF\_MAX\_NUM\_WORKERS}}+1:(size\_t)(maxnw+1)))\ :}
\DoxyCodeLine{00997\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{structff_1_1ff_barrier}{ffBarrier}}*)(new\ \mbox{\hyperlink{classff_1_1_barrier}{Barrier}}(maxnw<=0?\mbox{\hyperlink{config_8hpp_a1c4f30863b8ed8d50b6eb98cee2f6f7c}{DEF\_MAX\_NUM\_WORKERS}}+1:(size\_t)(maxnw+1)))\ ),}
\DoxyCodeLine{00998\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_a3b3a8b4bfc23c90a9412c486ff6d898a}{skipwarmup}}(\mbox{\hyperlink{classff_1_1ff__forall__farm_a3b3a8b4bfc23c90a9412c486ff6d898a}{skipwarmup}}),\mbox{\hyperlink{classff_1_1ff__forall__farm_af17988819c07da0586d0ab2eeb5555a7}{spinwait}}(\mbox{\hyperlink{classff_1_1ff__forall__farm_af17988819c07da0586d0ab2eeb5555a7}{spinwait}})\ \{}
\DoxyCodeLine{00999\ }
\DoxyCodeLine{01000\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_1_1foralllb__t}{foralllb\_t}}*\ \_lb\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_1_1foralllb__t}{foralllb\_t}}(\mbox{\hyperlink{config_8hpp_a1c4f30863b8ed8d50b6eb98cee2f6f7c}{DEF\_MAX\_NUM\_WORKERS}});}
\DoxyCodeLine{01001\ \ \ \ \ \ \ \ \ assert(\_lb);}
\DoxyCodeLine{01002\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_a3068153fc80df8e02564c157b2f783c4}{ff\_farm::setlb}}(\_lb);}
\DoxyCodeLine{01003\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01004\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_a97ee17008a55ea8778b292e51b4d1756}{numCores}}\ =\ ((\mbox{\hyperlink{classff_1_1ff__forall__farm_1_1foralllb__t}{foralllb\_t}}*\textcolor{keyword}{const})\mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}())-\/>getNCores();}
\DoxyCodeLine{01005\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (maxnw<=0)\ maxnw=\mbox{\hyperlink{classff_1_1ff__forall__farm_a97ee17008a55ea8778b292e51b4d1756}{numCores}};}
\DoxyCodeLine{01006\ \ \ \ \ \ \ \ \ std::vector<ff\_node\ *>\ forall\_w;}
\DoxyCodeLine{01007\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ donothing=[](\textcolor{keyword}{const}\ long,\textcolor{keyword}{const}\ long,\textcolor{keyword}{const}\ \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}},\textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a8759b6a095d0ed5dfb89a37c13a8fd9a}{Tres\_t}}\&)\ -\/>\ \textcolor{keywordtype}{void}\ \{\ \};}
\DoxyCodeLine{01008\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler}{forall\_Scheduler}}\ *sched\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1forall___scheduler}{forall\_Scheduler}}(\mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}(),maxnw);}
\DoxyCodeLine{01009\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_a6ac3d4cd02f14fcc1e0f0474eea1fa44}{ff\_farm::add\_emitter}}(sched);}
\DoxyCodeLine{01010\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<(size\_t)maxnw;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})}
\DoxyCodeLine{01011\ \ \ \ \ \ \ \ \ \ \ \ \ forall\_w.push\_back(\textcolor{keyword}{new}\ Worker\_t(sched,\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a1565bface1388374d44c6860bb848ac1}{loopbar}},\ donothing));}
\DoxyCodeLine{01012\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_abcc6e24c3d7ca03c67e4206f829d1c0b}{ff\_farm::add\_workers}}(forall\_w);}
\DoxyCodeLine{01013\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_ad33e81a08a5b198f51fb1b7b5fed08ec}{ff\_farm::wrap\_around}}();}
\DoxyCodeLine{01014\ }
\DoxyCodeLine{01015\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ needed\ to\ avoid\ the\ initial\ barrier\ (see\ (**)\ below)}}
\DoxyCodeLine{01016\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__farm_a848992cce0933404c983529a57ef323b}{ff\_farm::prepare}}()\ <\ 0)\ }
\DoxyCodeLine{01017\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}running\ base\ forall\ farm(2)\(\backslash\)n"{}});}
\DoxyCodeLine{01018\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01019\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ NOTE:\ the\ warmup\ phase\ has\ to\ be\ done,\ if\ not\ now\ later\ on.\ }}
\DoxyCodeLine{01020\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ run\_then\_freeze\ method\ will\ fail\ if\ skipwarmup\ is\ true.}}
\DoxyCodeLine{01021\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classff_1_1ff__forall__farm_a3b3a8b4bfc23c90a9412c486ff6d898a}{skipwarmup}})\ \{}
\DoxyCodeLine{01022\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}=-\/1;}
\DoxyCodeLine{01023\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}()-\/>\mbox{\hyperlink{classff_1_1ff__loadbalancer_afcce87c8c005a29a1b182e16494857a0}{freeze}}();}
\DoxyCodeLine{01024\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}()-\/>\mbox{\hyperlink{classff_1_1ff__farm_a89ce87c93462adc209a3af4e3f2c5c23}{run}}()\ !=\ -\/1)\ }
\DoxyCodeLine{01025\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ \mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}()-\/>\mbox{\hyperlink{classff_1_1ff__loadbalancer_abb9d2268c1a5ea721f3c33186ef70a2f}{wait\_freezing}}();\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01026\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}<0)\ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}running\ base\ forall\ farm(1)\(\backslash\)n"{}});}
\DoxyCodeLine{01027\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01028\ }
\DoxyCodeLine{01029\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__forall__farm_af17988819c07da0586d0ab2eeb5555a7}{spinwait}})\ \{}
\DoxyCodeLine{01030\ \ \ \ \ \ \ \ \ \ \ \ \ sched-\/>\mbox{\hyperlink{classff_1_1forall___scheduler_aa2653b17cbaff5efed56eb37ac5d356d}{workersSpinWait}}();}
\DoxyCodeLine{01031\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<(size\_t)maxnw;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{01032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//auto\ w\ =\ (forallreduce\_W<Tres>*)forall\_w[i];}}
\DoxyCodeLine{01033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}\ =\ (Worker\_t*)forall\_w[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}];}
\DoxyCodeLine{01034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}-\/>enableSpinWait();}
\DoxyCodeLine{01035\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01036\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//resetqueues(maxnw);}}
\DoxyCodeLine{01037\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01038\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_a86ad840d47acf03add025d3f020c613c}{ff\_farm::cleanup\_all}}();\ \textcolor{comment}{//\ delete\ everything\ at\ exit}}
\DoxyCodeLine{01039\ \ \ \ \ \}}
\DoxyCodeLine{01040\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a2ddf366ba2e8b81435925344af3b4c76}{\string~ff\_forall\_farm}}()\ \{}
\DoxyCodeLine{01041\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__forall__farm_a1565bface1388374d44c6860bb848ac1}{loopbar}})\ \textcolor{keyword}{delete}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a1565bface1388374d44c6860bb848ac1}{loopbar}};}
\DoxyCodeLine{01042\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{ff\_farm::getlb}}())\ \textcolor{keyword}{delete}\ \mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{ff\_farm::getlb}}();}
\DoxyCodeLine{01043\ \ \ \ \ \}}
\DoxyCodeLine{01044\ }
\DoxyCodeLine{01045\ }
\DoxyCodeLine{01046\ \ \ \ \ \textcolor{comment}{//\ It\ returns\ true\ if\ the\ scheduler\ has\ to\ be\ started,\ false\ otherwise.}}
\DoxyCodeLine{01047\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{01048\ \ \ \ \ \textcolor{comment}{//\ Unless\ the\ removeSched\ flag\ is\ set,\ the\ scheduler\ thread\ will\ be\ started\ }}
\DoxyCodeLine{01049\ \ \ \ \ \textcolor{comment}{//\ only\ if\ there\ are\ less\ threads\ than\ cores\ AND\ if\ the\ number\ of\ tasks\ per\ thread\ }}
\DoxyCodeLine{01050\ \ \ \ \ \textcolor{comment}{//\ is\ greather\ than\ 1.\ In\ case\ of\ static\ scheduling\ (i.e.\ chunk<=0),\ the\ scheduler\ }}
\DoxyCodeLine{01051\ \ \ \ \ \textcolor{comment}{//\ is\ never\ started\ because\ numtasks\ ==\ nwtostart;}}
\DoxyCodeLine{01052\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{01053\ \ \ \ \ \textcolor{comment}{//\ By\ defining\ at\ compile\ time\ NO\_PARFOR\_SCHEDULER\_THREAD\ the\ }}
\DoxyCodeLine{01054\ \ \ \ \ \textcolor{comment}{//\ scheduler\ won't\ be\ started.}}
\DoxyCodeLine{01055\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{01056\ \ \ \ \ \textcolor{comment}{//\ To\ always\ start\ the\ scheduler\ thread,\ the\ PARFOR\_SCHEDULER\_THREAD\ }}
\DoxyCodeLine{01057\ \ \ \ \ \textcolor{comment}{//\ may\ be\ defined\ at\ compile\ time.}}
\DoxyCodeLine{01058\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{01059\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a9177da23c38a9311f2171048c8e84eb9}{startScheduler}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ nwtostart,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ numtasks)\textcolor{keyword}{\ const\ }\{\ }
\DoxyCodeLine{01060\ \textcolor{preprocessor}{\#if\ \ \ defined(NO\_PARFOR\_SCHEDULER\_THREAD)}}
\DoxyCodeLine{01061\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01062\ \textcolor{preprocessor}{\#elif\ defined(PARFOR\_SCHEDULER\_THREAD)}}
\DoxyCodeLine{01063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01064\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01065\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__forall__farm_ad7a3bf8fe4522a8a0117e569ab6618c9}{removeSched}})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ((numtasks\ >\ nwtostart)\ \&\&\ (nwtostart\ <\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a97ee17008a55ea8778b292e51b4d1756}{numCores}}));}
\DoxyCodeLine{01067\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01068\ \ \ \ \ \}}
\DoxyCodeLine{01069\ \ \ \ \ \textcolor{comment}{//\ set/reset\ removeSched\ flag}}
\DoxyCodeLine{01070\ \ \ \ \ \textcolor{comment}{//\ By\ calling\ this\ method\ with\ 'true'\ the\ scheduler\ will\ be\ disabled.}}
\DoxyCodeLine{01071\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{01072\ \ \ \ \ \textcolor{comment}{//\ NOTE:}}
\DoxyCodeLine{01073\ \ \ \ \ \textcolor{comment}{//\ Sometimes\ may\ be\ usefull\ (in\ terms\ of\ performance)\ to\ explicitly\ disable\ }}
\DoxyCodeLine{01074\ \ \ \ \ \textcolor{comment}{//\ the\ scheduler\ thread\ when\ \#numworkers\ >\ ff\_realNumCores()\ on\ systems\ where}}
\DoxyCodeLine{01075\ \ \ \ \ \textcolor{comment}{//\ ff\_numCores()\ >\ ff\_realNumCores()\ (i.e.\ HT\ or\ SMT\ is\ enabled)}}
\DoxyCodeLine{01076\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a3f27caac3e25ee0ee2fabfcfaf62254b}{disableScheduler}}(\textcolor{keywordtype}{bool}\ onoff=\textcolor{keyword}{true})\ \{\ \mbox{\hyperlink{classff_1_1ff__forall__farm_ad7a3bf8fe4522a8a0117e569ab6618c9}{removeSched}}=onoff;\ \}}
\DoxyCodeLine{01077\ }
\DoxyCodeLine{01078\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_ac58b496ed1142c5e250c68d2e5f199f4}{run\_then\_freeze}}(\mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ nw\_=-\/1)\ \{}
\DoxyCodeLine{01079\ \ \ \ \ \ \ \ \ assert(\mbox{\hyperlink{classff_1_1ff__forall__farm_a3b3a8b4bfc23c90a9412c486ff6d898a}{skipwarmup}}\ ==\ \textcolor{keyword}{false});}
\DoxyCodeLine{01080\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ nwtostart\ =\ (nw\_\ ==\ -\/1)?\mbox{\hyperlink{classff_1_1ff__farm_ae6192a38eca0601a767f4c01c93b79d2}{getNWorkers}}():nw\_;}
\DoxyCodeLine{01081\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ -\/1;}
\DoxyCodeLine{01082\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__forall__farm_ae411b087a7d016dcecc7ab7b25cc924a}{schedRunning}})\ \{}
\DoxyCodeLine{01083\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}()-\/>\mbox{\hyperlink{classff_1_1ff__loadbalancer_aaf2b4d10734d8aae7f7eba14eddccc02}{skipfirstpop}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01084\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__forall__farm_af17988819c07da0586d0ab2eeb5555a7}{spinwait}})\ \{}
\DoxyCodeLine{01085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ NOTE:\ here\ we\ have\ to\ be\ sure\ to\ send\ one\ task\ to\ each\ worker!}}
\DoxyCodeLine{01086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\mbox{\hyperlink{classff_1_1forall___scheduler}{forall\_Scheduler}}*)\mbox{\hyperlink{classff_1_1ff__farm_ad05568d154a61549f346beb386bde880}{getEmitter}}())-\/>sendTask(\textcolor{keyword}{true});}
\DoxyCodeLine{01087\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01088\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}=\mbox{\hyperlink{classff_1_1ff__farm_aae4b5318e8fdb4a62dfeccbece56a061}{ff\_farm::run\_then\_freeze}}(nwtostart);}
\DoxyCodeLine{01089\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__forall__farm_af17988819c07da0586d0ab2eeb5555a7}{spinwait}})\ \{}
\DoxyCodeLine{01091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ all\ worker\ threads\ have\ already\ crossed\ the\ barrier\ so\ it\ is\ safe\ to\ restart\ it}}
\DoxyCodeLine{01092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_a1565bface1388374d44c6860bb848ac1}{loopbar}}-\/>barrierSetup(nwtostart+1);}
\DoxyCodeLine{01093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ NOTE:\ here\ is\ not\ possible\ to\ use\ sendTask\ because\ otherwise\ there\ could\ be\ }}
\DoxyCodeLine{01094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ a\ race\ between\ the\ main\ thread\ and\ the\ workers\ in\ accessing\ the\ task\ table.}}
\DoxyCodeLine{01095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\mbox{\hyperlink{classff_1_1forall___scheduler}{forall\_Scheduler}}*)\mbox{\hyperlink{classff_1_1ff__farm_ad05568d154a61549f346beb386bde880}{getEmitter}}())-\/>sendWakeUp();\ }
\DoxyCodeLine{01096\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ }
\DoxyCodeLine{01097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\mbox{\hyperlink{classff_1_1forall___scheduler}{forall\_Scheduler}}*)\mbox{\hyperlink{classff_1_1ff__farm_ad05568d154a61549f346beb386bde880}{getEmitter}}())-\/>sendTask(\textcolor{keyword}{true});}
\DoxyCodeLine{01098\ }
\DoxyCodeLine{01099\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ \mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}()-\/>\mbox{\hyperlink{classff_1_1ff__loadbalancer_a37918d461d1750e68a5b3e6352ff85d6}{thawWorkers}}(\textcolor{keyword}{true},\ nwtostart);}
\DoxyCodeLine{01100\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01101\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}};}
\DoxyCodeLine{01102\ \ \ \ \ \}}
\DoxyCodeLine{01103\ }
\DoxyCodeLine{01104\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a19c47707ae1d7f4d70d00f9ec728d9d7}{run\_and\_wait\_end}}()\ \{}
\DoxyCodeLine{01105\ \ \ \ \ \ \ \ \ assert(\mbox{\hyperlink{classff_1_1ff__forall__farm_af17988819c07da0586d0ab2eeb5555a7}{spinwait}}\ ==\ \textcolor{keyword}{false});\ }
\DoxyCodeLine{01106\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ nwtostart\ =\ \mbox{\hyperlink{classff_1_1ff__forall__farm_af98e8a05ae13e0c39caa103775597ea7}{getnw}}();}
\DoxyCodeLine{01107\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}=\ -\/1;}
\DoxyCodeLine{01108\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__forall__farm_ae411b087a7d016dcecc7ab7b25cc924a}{schedRunning}})\ \{}
\DoxyCodeLine{01109\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//resetqueues(nwtostart);}}
\DoxyCodeLine{01110\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}()-\/>\mbox{\hyperlink{classff_1_1ff__loadbalancer_aaf2b4d10734d8aae7f7eba14eddccc02}{skipfirstpop}}(\textcolor{keyword}{true});\ }
\DoxyCodeLine{01111\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ (**)\ this\ way\ we\ avoid\ the\ initial\ barrier}}
\DoxyCodeLine{01112\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}()-\/>runlb()!=\ -\/1)\ \{}
\DoxyCodeLine{01113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}()-\/>runWorkers(nwtostart)!=-\/1)}
\DoxyCodeLine{01114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ \mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}()-\/>\mbox{\hyperlink{classff_1_1ff__loadbalancer_af25d07b977879bdcf073b8e93319cdc7}{wait}}();}
\DoxyCodeLine{01115\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01116\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01117\ \ \ \ \ \ \ \ \ \ \ \ \ ((\mbox{\hyperlink{classff_1_1forall___scheduler}{forall\_Scheduler}}*)\mbox{\hyperlink{classff_1_1ff__farm_ad05568d154a61549f346beb386bde880}{getEmitter}}())-\/>sendTask(\textcolor{keyword}{true});}
\DoxyCodeLine{01118\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}()-\/>runWorkers(nwtostart)\ !=\ -\/1)}
\DoxyCodeLine{01119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ \mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}()-\/>\mbox{\hyperlink{classff_1_1ff__loadbalancer_ad47973a696c2657395b382ca2d7a8225}{waitWorkers}}();}
\DoxyCodeLine{01120\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01121\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}};}
\DoxyCodeLine{01122\ \ \ \ \ \}}
\DoxyCodeLine{01123\ \ \ \ \ }
\DoxyCodeLine{01124\ \ \ \ \ \textcolor{comment}{//\ it\ puts\ all\ threads\ to\ sleep\ but\ does\ not\ disable\ the\ spinWait\ flag}}
\DoxyCodeLine{01125\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_ac599f4eaa27d4a8a5381701d51b4c606}{stopSpinning}}()\ \{}
\DoxyCodeLine{01126\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classff_1_1ff__forall__farm_af17988819c07da0586d0ab2eeb5555a7}{spinwait}})\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{01127\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ getnworkers()\ returns\ the\ number\ of\ threads\ that\ are\ running}}
\DoxyCodeLine{01128\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ it\ may\ be\ different\ from\ getnw()\ (i.e.\ the\ n.\ of\ threads\ currently\ }}
\DoxyCodeLine{01129\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ executing\ the\ parallel\ iterations)}}
\DoxyCodeLine{01130\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{empty_8c_af1f449cc09f8d36befcce07bc38c29c0}{running}}\ =\ \mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}()-\/>\mbox{\hyperlink{classff_1_1ff__loadbalancer_a3b941ed604a60ad7356945071b6ed6d5}{getnworkers}}();}
\DoxyCodeLine{01131\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{empty_8c_af1f449cc09f8d36befcce07bc38c29c0}{running}}\ ==\ (\textcolor{keywordtype}{size\_t})-\/1)\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{01132\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}()-\/>\mbox{\hyperlink{classff_1_1ff__loadbalancer_ac7ad975dce33bb5234c374800762d022}{freezeWorkers}}();}
\DoxyCodeLine{01133\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}()-\/>\mbox{\hyperlink{classff_1_1ff__loadbalancer_a09db6f6aebc0b4256667e74c398e8bab}{broadcast\_task}}(\mbox{\hyperlink{classff_1_1ff__node_a57ce59be19900e98cce03412a099738a}{GO\_OUT}});}
\DoxyCodeLine{01134\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}()-\/>\mbox{\hyperlink{classff_1_1ff__loadbalancer_aebe29b1e46a13796f063022e3f1a9037}{wait\_freezingWorkers}}();}
\DoxyCodeLine{01135\ \ \ \ \ \}}
\DoxyCodeLine{01136\ }
\DoxyCodeLine{01137\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_af4dc9232d5c9ab43290cc392263c82bf}{enableSpinning}}()\ \{}
\DoxyCodeLine{01138\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__forall__farm_af17988819c07da0586d0ab2eeb5555a7}{spinwait}})\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{01139\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\ \&\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}\ =\ \mbox{\hyperlink{classff_1_1ff__farm_a67596a94ae016f648b2793a90b96a5de}{getWorkers}}();}
\DoxyCodeLine{01140\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}.size();++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{01141\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}\ =\ (Worker\_t*)\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}];}
\DoxyCodeLine{01142\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}-\/>enableSpinWait();}
\DoxyCodeLine{01143\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01144\ \ \ \ \ \ \ \ \ ((\mbox{\hyperlink{classff_1_1forall___scheduler}{forall\_Scheduler}}*)\mbox{\hyperlink{classff_1_1ff__farm_ad05568d154a61549f346beb386bde880}{getEmitter}}())-\/>workersSpinWait();}
\DoxyCodeLine{01145\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_af17988819c07da0586d0ab2eeb5555a7}{spinwait}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01146\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{01147\ \ \ \ \ \}}
\DoxyCodeLine{01148\ }
\DoxyCodeLine{01149\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_ad48dca29b8d48b9f7c9fafd337618e59}{wait\_freezing}}()\ \{}
\DoxyCodeLine{01150\ \ \ \ \ \ \ \ \ \textcolor{comment}{//if\ (startScheduler(getnw()))\ return\ getlb()-\/>wait\_lb\_freezing();}}
\DoxyCodeLine{01151\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__forall__farm_ae411b087a7d016dcecc7ab7b25cc924a}{schedRunning}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}()-\/>\mbox{\hyperlink{classff_1_1ff__loadbalancer_a5a6b33859c10b61cec2130c6d58bc62f}{wait\_lb\_freezing}}();}
\DoxyCodeLine{01152\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__forall__farm_af17988819c07da0586d0ab2eeb5555a7}{spinwait}})\ \{\ }
\DoxyCodeLine{01153\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_a1565bface1388374d44c6860bb848ac1}{loopbar}}-\/>doBarrier(\mbox{\hyperlink{classff_1_1ff__forall__farm_af98e8a05ae13e0c39caa103775597ea7}{getnw}}());\ }
\DoxyCodeLine{01154\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{01155\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01156\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}()-\/>\mbox{\hyperlink{classff_1_1ff__loadbalancer_aebe29b1e46a13796f063022e3f1a9037}{wait\_freezingWorkers}}();}
\DoxyCodeLine{01157\ \ \ \ \ \}}
\DoxyCodeLine{01158\ \ \ \ \ }
\DoxyCodeLine{01159\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_ad96b830f42323f4cedeef0ba20995578}{wait}}()\ \{}
\DoxyCodeLine{01160\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__forall__farm_af17988819c07da0586d0ab2eeb5555a7}{spinwait}})\{}
\DoxyCodeLine{01161\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\ \&\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}\ =\ \mbox{\hyperlink{classff_1_1ff__farm_a67596a94ae016f648b2793a90b96a5de}{getWorkers}}();}
\DoxyCodeLine{01162\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}.size();++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ }
\DoxyCodeLine{01163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_ac198b3718c3dfc5c89291a4a7b2fa732}{getlb}}()-\/>\mbox{\hyperlink{classff_1_1ff__loadbalancer_a19ea5e6e2013226b016823987642287a}{ff\_send\_out\_to}}(\mbox{\hyperlink{classff_1_1ff__node_a1e60cdd7d63155baf308086d38690567}{EOS}},\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{01164\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01165\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__farm_aecfdf624552b6d156de35fb5db36604c}{ff\_farm::wait}}();}
\DoxyCodeLine{01166\ \ \ \ \ \}}
\DoxyCodeLine{01167\ }
\DoxyCodeLine{01168\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a1894029ecdfc699315f8fc15d23c8590}{setF}}(\mbox{\hyperlink{classff_1_1ff__forall__farm_a0b8133abec2426eb8918648ecf7f2cec}{F\_t}}\ \ \_F,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a8759b6a095d0ed5dfb89a37c13a8fd9a}{Tres\_t}}\&\ idtt=\mbox{\hyperlink{classff_1_1ff__forall__farm_a8759b6a095d0ed5dfb89a37c13a8fd9a}{Tres\_t}}())\ \{\ \textcolor{comment}{//(Tres)0)\ \{\ }}
\DoxyCodeLine{01169\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ nw\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{classff_1_1ff__forall__farm_af98e8a05ae13e0c39caa103775597ea7}{getnw}}();}
\DoxyCodeLine{01170\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\ \&\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}\ =\ \mbox{\hyperlink{classff_1_1ff__farm_a67596a94ae016f648b2793a90b96a5de}{getWorkers}}();}
\DoxyCodeLine{01171\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ aggressive\ mode\ enabled\ if\ the\ number\ of\ threads\ is\ less\ than}}
\DoxyCodeLine{01172\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ or\ equal\ to\ the\ number\ of\ cores}}
\DoxyCodeLine{01173\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac279d5806e9bbfc8bd0c0512b9c48fc0}{mode}}\ =\ (nw\ <=\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a97ee17008a55ea8778b292e51b4d1756}{numCores}});}
\DoxyCodeLine{01174\ \ \ \ \ }
\DoxyCodeLine{01175\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ NOTE:\ in\ case\ of\ static\ scheduling,\ the\ scheduler\ is\ never\ started\ !}}
\DoxyCodeLine{01176\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_ae411b087a7d016dcecc7ab7b25cc924a}{schedRunning}}\ =\ (!\mbox{\hyperlink{classff_1_1ff__forall__farm_ad7a3bf8fe4522a8a0117e569ab6618c9}{removeSched}}\ \&\&\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a9177da23c38a9311f2171048c8e84eb9}{startScheduler}}(nw,\ ((\mbox{\hyperlink{classff_1_1forall___scheduler}{forall\_Scheduler}}*)\mbox{\hyperlink{classff_1_1ff__farm_ad05568d154a61549f346beb386bde880}{getEmitter}}())-\/>getnumtasks()));}
\DoxyCodeLine{01177\ }
\DoxyCodeLine{01178\ \textcolor{preprocessor}{\#ifdef\ FF\_PARFOR\_PASSIVE\_NOSTEALING}}
\DoxyCodeLine{01179\ \ \ \ \ \ \ \ \ globalSchedRunning\ =\ \mbox{\hyperlink{classff_1_1ff__forall__farm_ae411b087a7d016dcecc7ab7b25cc924a}{schedRunning}};}
\DoxyCodeLine{01180\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01181\ }
\DoxyCodeLine{01182\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__forall__farm_ae411b087a7d016dcecc7ab7b25cc924a}{schedRunning}})\ \ \{}
\DoxyCodeLine{01183\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<nw;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{01184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//auto\ w\ =\ (forallreduce\_W<Tres>*)nodes[i];}}
\DoxyCodeLine{01185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}\ =\ (Worker\_t*)\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}];}
\DoxyCodeLine{01186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}-\/>setF(\_F,\ idtt,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac279d5806e9bbfc8bd0c0512b9c48fc0}{mode}});}
\DoxyCodeLine{01187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}-\/>setSchedRunning(\textcolor{keyword}{true});}
\DoxyCodeLine{01188\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01189\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01190\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<nw;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{01191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//auto\ w\ =\ (forallreduce\_W<Tres>*)nodes[i];}}
\DoxyCodeLine{01192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}\ =\ (Worker\_t*)\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}];}
\DoxyCodeLine{01193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}-\/>setF(\_F,\ idtt,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac279d5806e9bbfc8bd0c0512b9c48fc0}{mode}});}
\DoxyCodeLine{01194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}-\/>setSchedRunning(\textcolor{keyword}{false});}
\DoxyCodeLine{01195\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01196\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01197\ \ \ \ \ \}}
\DoxyCodeLine{01198\ \ \ \ \ \textcolor{comment}{/*\ NOTE:\ -\/\ chunk>0\ \ \ means\ dynamic\ scheduling\ with\ grain\ equal\ to\ chunk,\ that\ is,}}
\DoxyCodeLine{01199\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ no\ more\ than\ chunk\ iterations\ at\ a\ time\ is\ computed\ by\ }}
\DoxyCodeLine{01200\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ one\ thread}}
\DoxyCodeLine{01201\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ -\/\ chunk==0\ \ means\ default\ static\ scheduling,\ that\ is,\ a\ bunch\ of\ \string~(\#iteration/nw)\ }}
\DoxyCodeLine{01202\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ iterations\ per\ thread\ is\ computed\ by\ each\ thread}}
\DoxyCodeLine{01203\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ -\/\ chunk<0\ \ \ means\ static\ scheduling\ with\ grain\ equal\ to\ chunk,\ that\ is,}}
\DoxyCodeLine{01204\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ the\ iteration\ space\ is\ divided\ in\ chunks\ each\ one\ of\ no\ more\ }}
\DoxyCodeLine{01205\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ than\ chunk\ iterations.\ Then\ chunks\ are\ assigned\ to\ the\ threads\ }}
\DoxyCodeLine{01206\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ in\ a\ round-\/robin\ fashion.}}
\DoxyCodeLine{01207\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{01208\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a94f2dd94079d24f12957132b4e0d2fe6}{setloop}}(\textcolor{keywordtype}{long}\ \mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}},\textcolor{keywordtype}{long}\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}},\textcolor{keywordtype}{long}\ step,\textcolor{keywordtype}{long}\ chunk,\textcolor{keywordtype}{long}\ nw)\ \{}
\DoxyCodeLine{01209\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nw>(\mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}})\mbox{\hyperlink{classff_1_1ff__farm_ae6192a38eca0601a767f4c01c93b79d2}{getNWorkers}}())\ \{}
\DoxyCodeLine{01210\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}The\ number\ of\ threads\ specified\ is\ greater\ than\ the\ number\ set\ in\ the\ ParallelFor*\ constructor,\ it\ will\ be\ downsized\(\backslash\)n"{}});}
\DoxyCodeLine{01211\ \ \ \ \ \ \ \ \ \ \ \ \ nw\ =\ \mbox{\hyperlink{classff_1_1ff__farm_ae6192a38eca0601a767f4c01c93b79d2}{getNWorkers}}();}
\DoxyCodeLine{01212\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01213\ \ \ \ \ \ \ \ \ assert(nw<=(\mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}})\mbox{\hyperlink{classff_1_1ff__farm_ae6192a38eca0601a767f4c01c93b79d2}{getNWorkers}}());}
\DoxyCodeLine{01214\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1forall___scheduler}{forall\_Scheduler}}\ *sched\ =\ (\mbox{\hyperlink{classff_1_1forall___scheduler}{forall\_Scheduler}}*)\mbox{\hyperlink{classff_1_1ff__farm_ad05568d154a61549f346beb386bde880}{getEmitter}}();}
\DoxyCodeLine{01215\ \ \ \ \ \ \ \ \ sched-\/>\mbox{\hyperlink{classff_1_1forall___scheduler_a728a9b2c8c7b5afd177d146c3364160c}{setloop}}(\mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}},\mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}},step,chunk,(nw<=0)?\mbox{\hyperlink{classff_1_1ff__farm_ae6192a38eca0601a767f4c01c93b79d2}{getNWorkers}}():(\textcolor{keywordtype}{size\_t})nw);}
\DoxyCodeLine{01216\ \ \ \ \ \}}
\DoxyCodeLine{01217\ \ \ \ \ \textcolor{comment}{//\ return\ the\ number\ of\ workers\ running\ or\ supposed\ to\ run}}
\DoxyCodeLine{01218\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_af98e8a05ae13e0c39caa103775597ea7}{getnw}}()\ \{\ \textcolor{keywordflow}{return}\ ((\textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1forall___scheduler}{forall\_Scheduler}}*)\mbox{\hyperlink{classff_1_1ff__farm_ad05568d154a61549f346beb386bde880}{getEmitter}}())-\/>running();\ \}}
\DoxyCodeLine{01219\ \ \ \ \ }
\DoxyCodeLine{01220\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a8759b6a095d0ed5dfb89a37c13a8fd9a}{Tres\_t}}\&\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a1929691f66fe0136260b4bd8f2669c2c}{getres}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{01221\ \ \ \ \ \ \ \ \ \textcolor{comment}{//return\ \ ((forallreduce\_W<Tres>*)(getWorkers()[i]))-\/>getres();}}
\DoxyCodeLine{01222\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \ ((Worker\_t*)(\mbox{\hyperlink{classff_1_1ff__farm_a67596a94ae016f648b2793a90b96a5de}{getWorkers}}()[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]))-\/>getres();}
\DoxyCodeLine{01223\ \ \ \ \ \}}
\DoxyCodeLine{01224\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a80dc7afc2e7602d0f5493f97e596a4e1}{startIdx}}()\{\ \textcolor{keywordflow}{return}\ ((\textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1forall___scheduler}{forall\_Scheduler}}*)\mbox{\hyperlink{classff_1_1ff__farm_ad05568d154a61549f346beb386bde880}{getEmitter}}())-\/>startIdx();\ \}}
\DoxyCodeLine{01225\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a65a6495a4ef7cd39a3b484fe0306db1d}{stopIdx}}()\ \{\ \textcolor{keywordflow}{return}\ ((\textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1forall___scheduler}{forall\_Scheduler}}*)\mbox{\hyperlink{classff_1_1ff__farm_ad05568d154a61549f346beb386bde880}{getEmitter}}())-\/>stopIdx();\ \}}
\DoxyCodeLine{01226\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_aaee42c07466fcb08e042f0464b525dc0}{stepIdx}}()\ \{\ \textcolor{keywordflow}{return}\ ((\textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1forall___scheduler}{forall\_Scheduler}}*)\mbox{\hyperlink{classff_1_1ff__farm_ad05568d154a61549f346beb386bde880}{getEmitter}}())-\/>stepIdx();\ \}}
\DoxyCodeLine{01227\ }
\DoxyCodeLine{01228\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_af23ce60175a78beb3a6ceaf70a57fca6}{resetskipwarmup}}()\ \{\ assert(\mbox{\hyperlink{classff_1_1ff__forall__farm_a3b3a8b4bfc23c90a9412c486ff6d898a}{skipwarmup}});\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a3b3a8b4bfc23c90a9412c486ff6d898a}{skipwarmup}}=\textcolor{keyword}{false};\}}
\DoxyCodeLine{01229\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{01230\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_ad7a3bf8fe4522a8a0117e569ab6618c9}{removeSched}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01231\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_ae411b087a7d016dcecc7ab7b25cc924a}{schedRunning}}=\ \textcolor{keyword}{true};}
\DoxyCodeLine{01232\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_a3b3a8b4bfc23c90a9412c486ff6d898a}{skipwarmup}}\ \ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01233\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_af17988819c07da0586d0ab2eeb5555a7}{spinwait}}\ \ \ \ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01234\ \};}
\DoxyCodeLine{01235\ }
\DoxyCodeLine{01236\ \ \ \ \ }
\DoxyCodeLine{01237\ \}\ \textcolor{comment}{//\ namespace\ ff}}
\DoxyCodeLine{01238\ }
\DoxyCodeLine{01239\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ FF\_PARFOR\_INTERNALS\_HPP\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{01240\ \ \ \ \ }

\end{DoxyCode}
