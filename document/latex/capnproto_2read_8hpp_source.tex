\doxysection{read.\+hpp}
\hypertarget{capnproto_2read_8hpp_source}{}\label{capnproto_2read_8hpp_source}\index{external/reflect-\/cpp/include/rfl/capnproto/read.hpp@{external/reflect-\/cpp/include/rfl/capnproto/read.hpp}}
\mbox{\hyperlink{capnproto_2read_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ RFL\_CAPNPROTO\_READ\_HPP\_}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ RFL\_CAPNPROTO\_READ\_HPP\_}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <capnp/dynamic.h>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <capnp/serialize-\/packed.h>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <kj/io.h>}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <bit>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <istream>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <type\_traits>}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_processors_8hpp}{../Processors.hpp}}"{}}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_snake_case_to_camel_case_8hpp}{../SnakeCaseToCamelCase.hpp}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{strings_8hpp}{../internal/strings/strings.hpp}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{wrap__in__rfl__array__t_8hpp}{../internal/wrap\_in\_rfl\_array\_t.hpp}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{capnproto_2_parser_8hpp}{Parser.hpp}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{capnproto_2_reader_8hpp}{Reader.hpp}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{capnproto_2_schema_8hpp}{Schema.hpp}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{get__root__name_8hpp}{get\_root\_name.hpp}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{capnproto_2to__schema_8hpp}{to\_schema.hpp}}"{}}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacerfl_1_1capnproto}{rfl::capnproto}}\ \{}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespacerfl_1_1capnproto_af8f7b2173b5e74e20596abf4011793dc}{InputObjectType}}\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classrfl_1_1capnproto_1_1_reader_a8c57915930029c69c02173b94127f1ca}{Reader::InputObjectType}};}
\DoxyCodeLine{00026\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespacerfl_1_1capnproto_a8a657c1a76f0ebac71441c1d269f7765}{InputVarType}}\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classrfl_1_1capnproto_1_1_reader_ad967a6289bf1308b9a4139b9737a42f9}{Reader::InputVarType}};}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00029\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class\ }\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{class}...\ Ps>}
\DoxyCodeLine{00030\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacerfl_1_1capnproto_adeed5ace86b284cc00ea03de1c1d1fd8}{read}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{namespacerfl_1_1capnproto_a8a657c1a76f0ebac71441c1d269f7765}{InputVarType}}\&\ \_obj)\ \{}
\DoxyCodeLine{00031\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ \mbox{\hyperlink{classrfl_1_1capnproto_1_1_reader}{Reader}}();}
\DoxyCodeLine{00032\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacerfl_1_1capnproto_acf70a0a8337a2f4e824ad8a88acd2eff}{Parser}}<\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \mbox{\hyperlink{structrfl_1_1_processors}{Processors}}<\mbox{\hyperlink{structrfl_1_1_snake_case_to_camel_case}{SnakeCaseToCamelCase}},\ Ps...>>\mbox{\hyperlink{namespacerfl_1_1capnproto_adeed5ace86b284cc00ea03de1c1d1fd8}{::read}}(\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}},\ \_obj);}
\DoxyCodeLine{00033\ \}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class\ }\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{class}...\ Ps>}
\DoxyCodeLine{00037\ \mbox{\hyperlink{classrfl_1_1_result}{Result<internal::wrap\_in\_rfl\_array\_t<T>}}>\ \mbox{\hyperlink{namespacerfl_1_1capnproto_adeed5ace86b284cc00ea03de1c1d1fd8}{read}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \_bytes,}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \_size,}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classrfl_1_1capnproto_1_1_schema}{Schema<T>}}\&\ \_schema)\ \{}
\DoxyCodeLine{00040\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ array\_ptr\ =\ kj::ArrayPtr<const\ kj::byte>(}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \mbox{\hyperlink{namespacerfl_1_1internal_a0e3f14355090a86bc6064dff6368347b}{internal::ptr\_cast<const\ kj::byte*>}}(\_bytes),\ \_size);}
\DoxyCodeLine{00042\ \ \ \textcolor{keyword}{auto}\ input\_stream\ =\ kj::ArrayInputStream(array\_ptr);}
\DoxyCodeLine{00043\ \ \ \textcolor{keyword}{auto}\ message\_reader\ =\ capnp::PackedMessageReader(input\_stream);}
\DoxyCodeLine{00044\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ root\_name\ =\ \mbox{\hyperlink{namespacerfl_1_1capnproto_a27e98bd0c9bbadbf73c9bfef82d6292c}{get\_root\_name<std::remove\_cv\_t<T>}},\ Ps...>();}
\DoxyCodeLine{00045\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ root\_schema\ =\ \_schema.\mbox{\hyperlink{classrfl_1_1capnproto_1_1_schema_a88e3d1ef423afc4b6d03dff5e4ba6d27}{value}}().getNested(root\_name.c\_str());}
\DoxyCodeLine{00046\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ input\_var\ =\ \mbox{\hyperlink{namespacerfl_1_1capnproto_a8a657c1a76f0ebac71441c1d269f7765}{InputVarType}}\{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ message\_reader.getRoot<capnp::DynamicStruct>(root\_schema.asStruct())\};}
\DoxyCodeLine{00048\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacerfl_1_1capnproto_adeed5ace86b284cc00ea03de1c1d1fd8}{read}}<\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ Ps...>(input\_var);}
\DoxyCodeLine{00049\ \}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00052\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class\ }\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{class}...\ Ps>}
\DoxyCodeLine{00053\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacerfl_1_1capnproto_adeed5ace86b284cc00ea03de1c1d1fd8}{read}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \_bytes,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \_size)\ \{}
\DoxyCodeLine{00054\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacerfl_1_1capnproto_1_1schema}{schema}}\ =\ \mbox{\hyperlink{namespacerfl_1_1capnproto_a38e054f1b60ac90a0030316a2e2f2a74}{to\_schema<std::remove\_cvref\_t<T>}},\ Ps...>();}
\DoxyCodeLine{00055\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacerfl_1_1capnproto_adeed5ace86b284cc00ea03de1c1d1fd8}{read}}<\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ Ps...>(\_bytes,\ \_size,\ \mbox{\hyperlink{namespacerfl_1_1capnproto_1_1schema}{schema}});}
\DoxyCodeLine{00056\ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00059\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class\ }\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{class}...\ Ps>}
\DoxyCodeLine{00060\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacerfl_1_1capnproto_adeed5ace86b284cc00ea03de1c1d1fd8}{read}}(\textcolor{keyword}{const}\ std::vector<char>\&\ \_bytes,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classrfl_1_1capnproto_1_1_schema}{Schema<T>}}\&\ \_schema)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00061\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacerfl_1_1capnproto_adeed5ace86b284cc00ea03de1c1d1fd8}{read}}<\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ Ps...>(\_bytes.data(),\ \_bytes.size(),\ \_schema);}
\DoxyCodeLine{00062\ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00065\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class\ }\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{class}...\ Ps>}
\DoxyCodeLine{00066\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacerfl_1_1capnproto_adeed5ace86b284cc00ea03de1c1d1fd8}{read}}(\textcolor{keyword}{const}\ std::vector<char>\&\ \_bytes)\ \{}
\DoxyCodeLine{00067\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacerfl_1_1capnproto_adeed5ace86b284cc00ea03de1c1d1fd8}{read}}<\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ Ps...>(\_bytes.data(),\ \_bytes.size());}
\DoxyCodeLine{00068\ \}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00071\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class\ }\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{class}...\ Ps>}
\DoxyCodeLine{00072\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacerfl_1_1capnproto_adeed5ace86b284cc00ea03de1c1d1fd8}{read}}(std::istream\&\ \_stream)\ \{}
\DoxyCodeLine{00073\ \ \ std::istreambuf\_iterator<char>\ \mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}}(\_stream),\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}};}
\DoxyCodeLine{00074\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structbytes}{bytes}}\ =\ std::vector<char>(\mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}},\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}});}
\DoxyCodeLine{00075\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacerfl_1_1capnproto_adeed5ace86b284cc00ea03de1c1d1fd8}{read}}<\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ Ps...>(\mbox{\hyperlink{structbytes}{bytes}}.\mbox{\hyperlink{structbytes_ae91a5605d84aee2211330e166635bd4e}{data}}(),\ \mbox{\hyperlink{structbytes}{bytes}}.size());}
\DoxyCodeLine{00076\ \}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \}\ \ \textcolor{comment}{//\ namespace\ rfl::capnproto}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
