\doxysection{func.\+h}
\hypertarget{func_8h_source}{}\label{func_8h_source}\index{runtime/dsl/func.h@{runtime/dsl/func.h}}
\mbox{\hyperlink{func_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <type\_traits>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{core_2stl_2memory_8h}{runtime/core/stl/memory.h}}>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{core_2stl_2optional_8h}{runtime/core/stl/optional.h}}>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{external__function_8h}{runtime/ast/external\_function.h}}>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{command_8h}{runtime/runtime/rhi/command.h}}>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{device_8h}{runtime/runtime/device.h}}>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{shader_8h}{runtime/runtime/shader.h}}>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{arg_8h}{runtime/dsl/arg.h}}>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{var_8h}{runtime/dsl/var.h}}>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{dsl_2resource_8h}{runtime/dsl/resource.h}}>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{stmt_8h}{runtime/dsl/stmt.h}}>}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceluisa_1_1compute}{luisa::compute}}\ \{}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail}{detail}}\ \{}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00020\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1definition__to__prototype}{definition\_to\_prototype}}\ \{}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{namespaceluisa_a8c7f286c84142da9a0aca4e38c58ce59}{always\_false\_v<T>}},\ \textcolor{stringliteral}{"{}Invalid\ type\ in\ function\ definition."{}});}
\DoxyCodeLine{00022\ \};}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00025\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1definition__to__prototype}{definition\_to\_prototype}}<\mbox{\hyperlink{structluisa_1_1compute_1_1_var}{Var}}<T>>\ \{}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1definition__to__prototype_3_01_var_3_01_t_01_4_01_4_ac835c30f20ff6281025551417388b3f6}{type}}\ =\ T;}
\DoxyCodeLine{00027\ \};}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00030\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1definition__to__prototype}{definition\_to\_prototype}}<const\ \mbox{\hyperlink{structluisa_1_1compute_1_1_var}{Var}}<T>\ \&>\ \{}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1definition__to__prototype_3_01const_01_var_3_01_t_01_4_01_6_01_4_a5d35c03b4fed9119347760b0f9529bf7}{type}}\ =\ T;}
\DoxyCodeLine{00032\ \};}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00035\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1definition__to__prototype}{definition\_to\_prototype}}<\mbox{\hyperlink{structluisa_1_1compute_1_1_var}{Var}}<T>\ \&>\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1definition__to__prototype_3_01_var_3_01_t_01_4_01_6_01_4_a16720282d1e24de6a1128dbd2fe958d6}{type}}\ =\ T\ \&;}
\DoxyCodeLine{00037\ \};}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00040\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__creation__tag}{prototype\_to\_creation\_tag}}\ \{}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__creation__tag_a50e12ecc10933287d53021ac1be9eac9}{type}}\ =\ \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1_argument_creation}{ArgumentCreation}};}
\DoxyCodeLine{00042\ \};}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00045\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__creation__tag}{prototype\_to\_creation\_tag}}<const\ T\ \&>\ \{}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__creation__tag_3_01const_01_t_01_6_01_4_ad5f1baf4ff9b1191339fe3eeda41ab9e}{type}}\ =\ \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1_argument_creation}{ArgumentCreation}};}
\DoxyCodeLine{00047\ \};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00050\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__creation__tag}{prototype\_to\_creation\_tag}}<T\ \&>\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__creation__tag_3_01_t_01_6_01_4_ad6eb87e912431c8d63fc69d9981dcde1}{type}}\ =\ \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1_reference_argument_creation}{ReferenceArgumentCreation}};}
\DoxyCodeLine{00052\ \};}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00055\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__creation}{prototype\_to\_creation}}\ \{}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__creation_a2b408910368078f9a4e2a9df3741eca0}{type}}\ =\ \mbox{\hyperlink{structluisa_1_1compute_1_1_var}{Var<T>}};}
\DoxyCodeLine{00057\ \};}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00060\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__creation}{prototype\_to\_creation}}<T\ \&>\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__creation_3_01_t_01_6_01_4_af2b0fc69c9275922077f136cfb65d4e1}{type}}\ =\ \mbox{\hyperlink{structluisa_1_1compute_1_1_var}{Var<T>}}\ \&;}
\DoxyCodeLine{00062\ \};}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00065\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__creation}{prototype\_to\_creation}}<const\ T\ \&>\ \{}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__creation_3_01const_01_t_01_6_01_4_a5bee94094968b10fdbc7b80423811e34}{type}}\ =\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_var}{Var<T>}}\ \&;}
\DoxyCodeLine{00067\ \};}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00070\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__callable__invocation}{prototype\_to\_callable\_invocation}}\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__callable__invocation_aeaa5bcedb8ce0db846ea4dfd4908a5e2}{type}}\ =\ \mbox{\hyperlink{structluisa_1_1compute_1_1_expr}{Expr<T>}};}
\DoxyCodeLine{00072\ \};}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00075\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__callable__invocation}{prototype\_to\_callable\_invocation}}<const\ T\ \&>\ \{}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__callable__invocation_3_01const_01_t_01_6_01_4_ad06205b1462f7c6056bb8eb63e434960}{type}}\ =\ \mbox{\hyperlink{structluisa_1_1compute_1_1_expr}{Expr<T>}};}
\DoxyCodeLine{00077\ \};}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00080\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__callable__invocation}{prototype\_to\_callable\_invocation}}<T\ \&>\ \{}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__callable__invocation_3_01_t_01_6_01_4_a65e7c93d5c5300ccf302ec632d71c59a}{type}}\ =\ \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1_ref}{Ref<T>}};}
\DoxyCodeLine{00082\ \};}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00085\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a927fc884f669f37a4fd7fe7c73266b89}{definition\_to\_prototype\_t}}\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1definition__to__prototype}{definition\_to\_prototype<T>::type}};}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00088\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_ac781b56eb710a95a12ae7b4719456dc7}{prototype\_to\_creation\_tag\_t}}\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__creation__tag_a50e12ecc10933287d53021ac1be9eac9}{prototype\_to\_creation\_tag<T>::type}};}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00091\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a460bd96da28f8999ccdd555d34b2bd09}{prototype\_to\_creation\_t}}\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__creation_a2b408910368078f9a4e2a9df3741eca0}{prototype\_to\_creation<T>::type}};}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00094\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a47ed627335231dfb6dc3449a0c189eb2}{prototype\_to\_callable\_invocation\_t}}\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1prototype__to__callable__invocation_aeaa5bcedb8ce0db846ea4dfd4908a5e2}{prototype\_to\_callable\_invocation<T>::type}};}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00097\ \textcolor{keyword}{template}<\textcolor{keywordtype}{size\_t}\ N>}
\DoxyCodeLine{00098\ [[nodiscard]]\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_ab5e7f7f8518d2eb6d3a80f8e30b05de1}{kernel\_default\_block\_size}}()\ \{}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ ==\ 1)\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{sugar_8h_a1b12c3dbe09fa4f18058466f0d8a393e}{uint3}}\{256u,\ 1u,\ 1u\};}
\DoxyCodeLine{00101\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ ==\ 2)\ \{}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{sugar_8h_a1b12c3dbe09fa4f18058466f0d8a393e}{uint3}}\{16u,\ 16u,\ 1u\};}
\DoxyCodeLine{00103\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ ==\ 3)\ \{}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{sugar_8h_a1b12c3dbe09fa4f18058466f0d8a393e}{uint3}}\{8u,\ 8u,\ 8u\};}
\DoxyCodeLine{00105\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{namespaceluisa_a8c7f286c84142da9a0aca4e38c58ce59}{always\_false\_v<std::integral\_constant<size\_t,\ N>}}>);}
\DoxyCodeLine{00107\ \ \ \ \ \}}
\DoxyCodeLine{00108\ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ NextVar,\ \textcolor{keyword}{typename}...\ OtherVars,\ \textcolor{keyword}{typename}\ NextTag,\ \textcolor{keyword}{typename}...\ OtherTags,\ \textcolor{keyword}{typename}...\ T>}
\DoxyCodeLine{00111\ [[nodiscard]]\ std::tuple<T...,\ NextVar,\ OtherVars...>\ create\_argument\_definitions\_impl(}
\DoxyCodeLine{00112\ \ \ \ \ std::tuple<T...>\ tuple,\ std::tuple<NextVar,\ OtherVars...>\ *,\ std::tuple<NextTag,\ OtherTags...>\ *)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00115\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ VarTuple,\ \textcolor{keyword}{typename}\ TagTuple,\ \textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00116\ [[nodiscard]]\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a5ac01663551dfa751b156546a539e1ea}{create\_argument\_definitions}}(T\ tuple)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::tuple\_size\_v<VarTuple>\ ==\ 0)\ \{}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::move(tuple);\textcolor{comment}{//\ ensure\ move\ ctor}}
\DoxyCodeLine{00119\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a760fd7ed7fa18949cfd44167df4339d4}{create\_argument\_definitions\_impl}}(}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ std::move(tuple),}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}VarTuple\ *\textcolor{keyword}{>}(\textcolor{keyword}{nullptr}),}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}TagTuple\ *\textcolor{keyword}{>}(\textcolor{keyword}{nullptr}));}
\DoxyCodeLine{00124\ \ \ \ \ \}}
\DoxyCodeLine{00125\ \}}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00128\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...\ T,\ \textcolor{keyword}{typename}\ A>}
\DoxyCodeLine{00129\ [[nodiscard]]\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a9a210fee4f85a9efbbd6ce7d0d9e37db}{tuple\_append}}(std::tuple<T...>\ tuple,\ A\ \&\&\mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}})\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keyword}{auto}\ append\ =\ []<\textcolor{keyword}{typename}\ TT,\ \textcolor{keyword}{typename}\ AA,\ \textcolor{keywordtype}{size\_t}...\ i>(TT\ tuple,\ AA\ \&\&\mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}},\ std::index\_sequence<i...>)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::make\_tuple(std::move(std::get<i>(tuple))...,\ std::forward<AA>(\mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}}));}
\DoxyCodeLine{00132\ \ \ \ \ \};}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordflow}{return}\ append(std::move(tuple),\ std::forward<A>(\mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}}),\ std::index\_sequence\_for<T...>\{\});}
\DoxyCodeLine{00134\ \}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ NextVar,\ \textcolor{keyword}{typename}...\ OtherVars,\ \textcolor{keyword}{typename}\ NextTag,\ \textcolor{keyword}{typename}...\ OtherTags,\ \textcolor{keyword}{typename}...\ T>}
\DoxyCodeLine{00137\ [[nodiscard]]\ \textcolor{keyword}{inline}\ std::tuple<T...,\ NextVar,\ OtherVars...>\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a760fd7ed7fa18949cfd44167df4339d4}{create\_argument\_definitions\_impl}}(}
\DoxyCodeLine{00138\ \ \ \ \ std::tuple<T...>\ tuple,\ std::tuple<NextVar,\ OtherVars...>\ *,\ std::tuple<NextTag,\ OtherTags...>\ *)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a5ac01663551dfa751b156546a539e1ea}{create\_argument\_definitions}}<std::tuple<OtherVars...>,\ std::tuple<OtherTags...>>(}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a9a210fee4f85a9efbbd6ce7d0d9e37db}{tuple\_append}}(std::move(tuple),\ NextVar\{NextTag\{\}\}));}
\DoxyCodeLine{00141\ \}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \textcolor{keyword}{class\ }FunctionBuilder;}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \}\textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00148\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1is__kernel}{is\_kernel}}\ :\ std::false\_type\ \{\};}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00151\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1is__callable}{is\_callable}}\ :\ std::false\_type\ \{\};}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ \textcolor{keyword}{template}<\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00154\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_kernel}{Kernel}};}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...>}
\DoxyCodeLine{00157\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1_kernel1_d}{Kernel1D}};}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...>}
\DoxyCodeLine{00160\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1_kernel2_d}{Kernel2D}};}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...>}
\DoxyCodeLine{00163\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1_kernel3_d}{Kernel3D}};}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \textcolor{keyword}{template}<\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00166\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1is__kernel}{is\_kernel}}<\mbox{\hyperlink{classluisa_1_1compute_1_1_kernel}{Kernel}}<\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ Args...>>\ :\ std::true\_type\ \{\};}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00169\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1is__kernel}{is\_kernel}}<\mbox{\hyperlink{structluisa_1_1compute_1_1_kernel1_d}{Kernel1D}}<Args...>>\ :\ std::true\_type\ \{\};}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00172\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1is__kernel}{is\_kernel}}<\mbox{\hyperlink{structluisa_1_1compute_1_1_kernel2_d}{Kernel2D}}<Args...>>\ :\ std::true\_type\ \{\};}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00175\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1is__kernel}{is\_kernel}}<\mbox{\hyperlink{structluisa_1_1compute_1_1_kernel3_d}{Kernel3D}}<Args...>>\ :\ std::true\_type\ \{\};}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00189\ \textcolor{keyword}{template}<\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00190\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_kernel_ac7cdd0adefa66cb03b889e6c431aefec}{Kernel}}\ \{}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ ==\ 1u\ ||\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ ==\ 2u\ ||\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ ==\ 3u);}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::negation\_v<std::disjunction<std::is\_pointer<Args>...>>);}
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::negation\_v<std::disjunction<std::is\_reference<Args>...>>);}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...>}
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_kernel_a94c58768337bb138574d4bc5285603b9}{Kernel1D}};}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...>}
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_kernel_a8d0369f7ee592cded16b204ba008173a}{Kernel2D}};}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...>}
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_kernel_aee811b466926303afb7d092e6ae7e1e1}{Kernel3D}};}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00206\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_kernel_a0b23fdb2f7129aeff24e38af2d418452}{SharedFunctionBuilder}}\ =\ luisa::shared\_ptr<const\ detail::FunctionBuilder>;}
\DoxyCodeLine{00207\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_kernel_a0b23fdb2f7129aeff24e38af2d418452}{SharedFunctionBuilder}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_kernel_ac3f8e4508fcfc136aab6c5f6ed9e2513}{\_builder}}\{\textcolor{keyword}{nullptr}\};}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_kernel_ac7cdd0adefa66cb03b889e6c431aefec}{Kernel}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_kernel_a0b23fdb2f7129aeff24e38af2d418452}{SharedFunctionBuilder}}\ builder)\ noexcept}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classluisa_1_1compute_1_1_kernel_ac3f8e4508fcfc136aab6c5f6ed9e2513}{\_builder}}\{std::move(builder)\}\ \{\}}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00221\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Def>}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \textcolor{keyword}{requires}\ std::negation\_v<is\_callable<std::remove\_cvref\_t<Def>>>\ \&\&}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::negation\_v<is\_kernel<std::remove\_cvref\_t<Def>>>}
\DoxyCodeLine{00224\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_kernel_a28408dd479f481f5e41ca2334a984e13}{Kernel}}(Def\ \&\&\mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_ac6894281f79600b83c401fbf77ec3727}{def}})\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_invocable\_r\_v<void,\ Def,\ detail::prototype\_to\_creation\_t<Args>...>);}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_kernel_ac3f8e4508fcfc136aab6c5f6ed9e2513}{\_builder}}\ =\ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_function_builder_a6e90f4805f36bd56133b4c6bb8aba666}{detail::FunctionBuilder::define\_kernel}}([\&\mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_ac6894281f79600b83c401fbf77ec3727}{def}}]\ \{}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_function_builder_a4590ef89abb9497192eb36510caf0384}{detail::FunctionBuilder::current}}()-\/>set\_block\_size(\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_ab5e7f7f8518d2eb6d3a80f8e30b05de1}{detail::kernel\_default\_block\_size<N>}}());}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ []<\textcolor{keywordtype}{size\_t}...\ i>(\textcolor{keyword}{auto}\ \&\&\mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_ac6894281f79600b83c401fbf77ec3727}{def}},\ std::index\_sequence<i...>)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }arg\_tuple\ =\ std::tuple<Args...>;}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }var\_tuple\ =\ std::tuple<Var<std::remove\_cvref\_t<Args>>...>;}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }tag\_tuple\ =\ std::tuple<detail::prototype\_to\_creation\_tag\_t<Args>...>;}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ args\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a5ac01663551dfa751b156546a539e1ea}{detail::create\_argument\_definitions<var\_tuple,\ tag\_tuple>}}(std::tuple<>\{\});}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(std::tuple\_size\_v<\textcolor{keyword}{decltype}(args)>\ ==\ \textcolor{keyword}{sizeof}...(Args));}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_afecc703e5abfd2fcd6f342e3e345249e}{luisa::invoke}}(std::forward<\textcolor{keyword}{decltype}(\mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_ac6894281f79600b83c401fbf77ec3727}{def}})>(\mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_ac6894281f79600b83c401fbf77ec3727}{def}}),}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a460bd96da28f8999ccdd555d34b2bd09}{detail::prototype\_to\_creation\_t}}<}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::tuple\_element\_t<i,\ arg\_tuple>\textcolor{keyword}{>}\ \&\&>(std::get<i>(args))...);}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \}(std::forward<Def>(\mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_ac6894281f79600b83c401fbf77ec3727}{def}}),\ std::index\_sequence\_for<Args...>\{\});}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00239\ \ \ \ \ \}}
\DoxyCodeLine{00240\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \&\mbox{\hyperlink{classluisa_1_1compute_1_1_kernel_a232153aa4de563ae9a9f823f10a88e66}{function}}()\ const\ noexcept\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_kernel_ac3f8e4508fcfc136aab6c5f6ed9e2513}{\_builder}};\ \}}
\DoxyCodeLine{00241\ \};}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \textcolor{preprocessor}{\#define\ LUISA\_KERNEL\_BASE(N)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00244\ \textcolor{preprocessor}{public\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00245\ \textcolor{preprocessor}{\ \ \ \ Kernel<N,\ Args...>\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00246\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ using\ Kernel<N,\ Args...>::Kernel;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00247\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ Kernel\#\#N\#\#D(Kernel<N,\ Args...>\ k)\ noexcept\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00248\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ :\ Kernel<N,\ Args...>\{std::move(k.\_builder)\}\ \{\}\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00249\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ Kernel\#\#N\#\#D\ \&operator=(Kernel<N,\ Args...>\ k)\ noexcept\ \{\ \(\backslash\)}}
\DoxyCodeLine{00250\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ this-\/>\_builder\ =\ std::move(k.\_builder);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00251\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ return\ *this;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00252\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00253\ \textcolor{preprocessor}{\ \ \ \ \}}}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00256\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00257\ \textcolor{keyword}{struct\ }Kernel1D\ :\ \mbox{\hyperlink{func_8h_a73d45985c28d63f88a81bc53cc0514c7}{LUISA\_KERNEL\_BASE}}(1);}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00260\ template<typename...\ Args>}
\DoxyCodeLine{00261\ struct\ Kernel2D\ :\ \mbox{\hyperlink{func_8h_a73d45985c28d63f88a81bc53cc0514c7}{LUISA\_KERNEL\_BASE}}(2);}
\DoxyCodeLine{00262\ }
\DoxyCodeLine{00264\ template<typename...\ Args>}
\DoxyCodeLine{00265\ struct\ Kernel3D\ :\ \mbox{\hyperlink{func_8h_a73d45985c28d63f88a81bc53cc0514c7}{LUISA\_KERNEL\_BASE}}(3);}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00268\ template<typename...\ Args>}
\DoxyCodeLine{00269\ struct\ Kernel1D<void(Args...)>\ :\ \mbox{\hyperlink{func_8h_a73d45985c28d63f88a81bc53cc0514c7}{LUISA\_KERNEL\_BASE}}(1);}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00272\ template<typename...\ Args>}
\DoxyCodeLine{00273\ struct\ Kernel2D<void(Args...)>\ :\ \mbox{\hyperlink{func_8h_a73d45985c28d63f88a81bc53cc0514c7}{LUISA\_KERNEL\_BASE}}(2);}
\DoxyCodeLine{00274\ }
\DoxyCodeLine{00276\ template<typename...\ Args>}
\DoxyCodeLine{00277\ struct\ Kernel3D<void(Args...)>\ :\ \mbox{\hyperlink{func_8h_a73d45985c28d63f88a81bc53cc0514c7}{LUISA\_KERNEL\_BASE}}(3);}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \textcolor{preprocessor}{\#undef\ LUISA\_KERNEL\_BASE}}
\DoxyCodeLine{00280\ }
\DoxyCodeLine{00281\ namespace\ \mbox{\hyperlink{namespacedetail}{detail}}\ \{}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00284\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_callable_invoke_a267b2c0d24a5b375ed997818741cdfcd}{CallableInvoke}}\ \{}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00286\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00287\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_callable_invoke_a09854855a5a0a21b1aebcd164088bb8a}{max\_argument\_count}}\ =\ 64u;}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00289\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00290\ \ \ \ \ std::array<const\ Expression\ *,\ max\_argument\_count>\ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_callable_invoke_a412972d2c713a3e5b44fbc75b3851643}{\_args}}\{\};}
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_callable_invoke_ad913cea103c55b22cef38079a4e5dca3}{\_arg\_count}}\{0u\};}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00293\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{dll__export_8h_a0f23f409f57fcf93535a1f02ca7586b9}{LC\_DSL\_API}}\ \textcolor{keywordtype}{void}\ \_error\_too\_many\_arguments()\ noexcept;}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ public:}
\DoxyCodeLine{00297\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_callable_invoke_a267b2c0d24a5b375ed997818741cdfcd}{CallableInvoke}}()\ noexcept\ =\ \mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}};}
\DoxyCodeLine{00299\ \ \ \ \ template<typename\ T>}
\DoxyCodeLine{00300\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_callable_invoke_a267b2c0d24a5b375ed997818741cdfcd}{CallableInvoke}}\ \&operator<<(\mbox{\hyperlink{structluisa_1_1compute_1_1_expr}{Expr}}<T>\ \mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}})\ noexcept\ \{}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (\textcolor{keyword}{requires}\ \{\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_expr}{Expr<T>::is\_binding\_group}};\ \})\ \{}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ callable\_encode\_binding\_group(*\textcolor{keyword}{this},\ \mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}});}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (\mbox{\hyperlink{namespaceluisa_1_1compute_aa1e14cdbcd3d70c76461ad09e9736bbb}{is\_soa\_expr\_v<T>}})\ \{}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a32ce6db9e434a33d0d5da3d128e36a53}{callable\_encode\_soa}}(*\textcolor{keyword}{this},\ \mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}});}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_callable_invoke_ad913cea103c55b22cef38079a4e5dca3}{\_arg\_count}}\ ==\ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_callable_invoke_a09854855a5a0a21b1aebcd164088bb8a}{max\_argument\_count}})\ [[unlikely]]\ \{}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_callable_invoke_a814392b2a1af41a2cc380229a15ae6a9}{\_error\_too\_many\_arguments}}();}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_callable_invoke_a412972d2c713a3e5b44fbc75b3851643}{\_args}}[\mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_callable_invoke_ad913cea103c55b22cef38079a4e5dca3}{\_arg\_count}}++]\ =\ \mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}}.expression();}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00312\ \ \ \ \ \}}
\DoxyCodeLine{00314\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00315\ \ \ \ \ \textcolor{keyword}{decltype}(\textcolor{keyword}{auto})\ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_callable_invoke_a6949df3ef348484dbb59dd42b1bb1a71}{operator<<}}(\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1_ref}{Ref<T>}}\ \mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}})\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (*\textcolor{keyword}{this}\ <<\ \mbox{\hyperlink{structluisa_1_1compute_1_1_expr}{Expr}}\{\mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}}\});}
\DoxyCodeLine{00317\ \ \ \ \ \}}
\DoxyCodeLine{00318\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_callable_invoke_ad821b920e6fc0e906d75696429d8baa4}{args}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ luisa::span\{\mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_callable_invoke_a412972d2c713a3e5b44fbc75b3851643}{\_args}}.data(),\ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_callable_invoke_ad913cea103c55b22cef38079a4e5dca3}{\_arg\_count}}\};}
\DoxyCodeLine{00320\ \ \ \ \ \}}
\DoxyCodeLine{00321\ \};}
\DoxyCodeLine{00322\ }
\DoxyCodeLine{00323\ \}\textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00324\ }
\DoxyCodeLine{00326\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00327\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_callable}{Callable}}\ \{}
\DoxyCodeLine{00328\ \ \ \ \ \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{namespaceluisa_a8c7f286c84142da9a0aca4e38c58ce59}{always\_false\_v<T>}});}
\DoxyCodeLine{00329\ \};}
\DoxyCodeLine{00330\ }
\DoxyCodeLine{00331\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00332\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1is__callable}{is\_callable}}<\mbox{\hyperlink{classluisa_1_1compute_1_1_callable}{Callable}}<T>>\ :\ std::true\_type\ \{\};}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00335\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Ret,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00336\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_callable_3_01_ret_07_args_8_8_8_08_4_a2eee48a1741560242684ee7448ac618f}{Callable}}<Ret(Args...)>\ \{}
\DoxyCodeLine{00337\ \ \ \ \ \textcolor{keyword}{static\_assert}(}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ std::negation\_v<std::disjunction<}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_a69d17058a48672238761312efa8b0cc0}{is\_buffer\_or\_view<Ret>}},}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_a82d9145ca7320434770104a12f5a8419}{is\_image\_or\_view<Ret>}},}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_afc7651bc29bcd511771dcc53c37d5a1a}{is\_volume\_or\_view<Ret>}}>>,}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Callables\ may\ not\ return\ buffers,\ "{}}}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}images\ or\ volumes\ (or\ their\ views)."{}});}
\DoxyCodeLine{00344\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::negation\_v<std::disjunction<std::is\_pointer<Args>...>>);}
\DoxyCodeLine{00345\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00346\ \ \ \ \ luisa::shared\_ptr<const\ detail::FunctionBuilder>\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_3_01_ret_07_args_8_8_8_08_4_a7f93123d39701ed6e8f4bd1bb650655b}{\_builder}};}
\DoxyCodeLine{00347\ }
\DoxyCodeLine{00348\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_3_01_ret_07_args_8_8_8_08_4_a2eee48a1741560242684ee7448ac618f}{Callable}}(luisa::shared\_ptr<const\ detail::FunctionBuilder>\ builder)\ noexcept}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_3_01_ret_07_args_8_8_8_08_4_a7f93123d39701ed6e8f4bd1bb650655b}{\_builder}}\{std::move(builder)\}\ \{\}}
\DoxyCodeLine{00358\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Def>}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \textcolor{keyword}{requires}\ std::negation\_v<is\_callable<std::remove\_cvref\_t<Def>>>\ \&\&}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::negation\_v<is\_kernel<std::remove\_cvref\_t<Def>>>}
\DoxyCodeLine{00361\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_3_01_ret_07_args_8_8_8_08_4_ac846e5fb6149e1bd8b772747fedb6247}{Callable}}(Def\ \&\&f)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_3_01_ret_07_args_8_8_8_08_4_a7f93123d39701ed6e8f4bd1bb650655b}{\_builder}}\ =\ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_function_builder_ad73b6dc075d8e38af4a6523c37ff3405}{detail::FunctionBuilder::define\_callable}}([\&f]\ \{}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_invocable\_v<Def,\ detail::prototype\_to\_creation\_t<Args>...>);}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ create\ =\ []<\textcolor{keywordtype}{size\_t}...\ i>(\textcolor{keyword}{auto}\ \&\&\mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_ac6894281f79600b83c401fbf77ec3727}{def}},\ std::index\_sequence<i...>)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }arg\_tuple\ =\ std::tuple<Args...>;}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }var\_tuple\ =\ std::tuple<Var<std::remove\_cvref\_t<Args>>...>;}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }tag\_tuple\ =\ std::tuple<detail::prototype\_to\_creation\_tag\_t<Args>...>;}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ args\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a5ac01663551dfa751b156546a539e1ea}{detail::create\_argument\_definitions<var\_tuple,\ tag\_tuple>}}(std::tuple<>\{\});}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(std::tuple\_size\_v<\textcolor{keyword}{decltype}(args)>\ ==\ \textcolor{keyword}{sizeof}...(Args));}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceluisa_afecc703e5abfd2fcd6f342e3e345249e}{luisa::invoke}}(std::forward<\textcolor{keyword}{decltype}(\mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_ac6894281f79600b83c401fbf77ec3727}{def}})>(\mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_ac6894281f79600b83c401fbf77ec3727}{def}}),}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a460bd96da28f8999ccdd555d34b2bd09}{detail::prototype\_to\_creation\_t}}<}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::tuple\_element\_t<i,\ arg\_tuple>\textcolor{keyword}{>}\ \&\&>(std::get<i>(args))...);}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same\_v<Ret,\ void>)\ \{}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ create(std::forward<Def>(f),\ std::index\_sequence\_for<Args...>\{\});}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_function_builder_a4590ef89abb9497192eb36510caf0384}{detail::FunctionBuilder::current}}()-\/>return\_(\textcolor{keyword}{nullptr});\textcolor{comment}{//\ to\ check\ if\ any\ previous\ \$return\ called\ with\ non-\/void\ types}}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ ret\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_ac6894281f79600b83c401fbf77ec3727}{def<Ret>}}(create(std::forward<Def>(f),\ std::index\_sequence\_for<Args...>\{\}));}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_function_builder_a4590ef89abb9497192eb36510caf0384}{detail::FunctionBuilder::current}}()-\/>return\_(ret.expression());}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00382\ \ \ \ \ \}}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00385\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_3_01_ret_07_args_8_8_8_08_4_a0b42707cd52eb424b2bed255305d7bf4}{function}}()\ const\ noexcept\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_function}{Function}}\{\mbox{\hyperlink{classluisa_1_1compute_1_1_callable_3_01_ret_07_args_8_8_8_08_4_a7f93123d39701ed6e8f4bd1bb650655b}{\_builder}}.get()\};\ \}}
\DoxyCodeLine{00386\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\ \&\mbox{\hyperlink{classluisa_1_1compute_1_1_callable_3_01_ret_07_args_8_8_8_08_4_acf20fb0fa5b43ed0a5cbccf436693114}{function\_builder}}()\ const\ \&\ noexcept\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_3_01_ret_07_args_8_8_8_08_4_a7f93123d39701ed6e8f4bd1bb650655b}{\_builder}};\ \}}
\DoxyCodeLine{00387\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \&\&\mbox{\hyperlink{classluisa_1_1compute_1_1_callable_3_01_ret_07_args_8_8_8_08_4_a93952fbbf46e3cc11774986e802c3111}{function\_builder}}()\ \&\&\ \textcolor{keyword}{noexcept}\ \{\ \textcolor{keywordflow}{return}\ std::move(\mbox{\hyperlink{classluisa_1_1compute_1_1_callable_3_01_ret_07_args_8_8_8_08_4_a7f93123d39701ed6e8f4bd1bb650655b}{\_builder}});\ \}}
\DoxyCodeLine{00388\ }
\DoxyCodeLine{00390\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_3_01_ret_07_args_8_8_8_08_4_a809f9ce6e9715e97ca9c6ba206153166}{operator()}}(\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a47ed627335231dfb6dc3449a0c189eb2}{detail::prototype\_to\_callable\_invocation\_t<Args>}}...\ args)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_callable_invoke}{detail::CallableInvoke}}\ \mbox{\hyperlink{namespaceluisa_afecc703e5abfd2fcd6f342e3e345249e}{invoke}};}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}\textcolor{keyword}{>}((\mbox{\hyperlink{namespaceluisa_afecc703e5abfd2fcd6f342e3e345249e}{invoke}}\ <<\ ...\ <<\ args));}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same\_v<Ret,\ void>)\ \{}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_function_builder_a4590ef89abb9497192eb36510caf0384}{detail::FunctionBuilder::current}}()-\/>call(}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_3_01_ret_07_args_8_8_8_08_4_a7f93123d39701ed6e8f4bd1bb650655b}{\_builder}}-\/>function(),\ \mbox{\hyperlink{namespaceluisa_afecc703e5abfd2fcd6f342e3e345249e}{invoke}}.args());}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_ac6894281f79600b83c401fbf77ec3727}{def<Ret>}}(}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_function_builder_a4590ef89abb9497192eb36510caf0384}{detail::FunctionBuilder::current}}()-\/>call(}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Type::of<Ret>(),\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_3_01_ret_07_args_8_8_8_08_4_a7f93123d39701ed6e8f4bd1bb650655b}{\_builder}}-\/>function(),\ \mbox{\hyperlink{namespaceluisa_afecc703e5abfd2fcd6f342e3e345249e}{invoke}}.args()));}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00401\ \ \ \ \ \}}
\DoxyCodeLine{00402\ \};}
\DoxyCodeLine{00403\ }
\DoxyCodeLine{00406\ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ T>}
\DoxyCodeLine{00407\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_cpu_callable_ad514dd162558a9468127b7fcae2c90aa}{CpuCallable}}\ \{}
\DoxyCodeLine{00408\ }
\DoxyCodeLine{00409\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00410\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_cpu_callable_a4bdfcc2f58f30387b97f3ddf46df742f}{Func}}\ =\ std::function<\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}}(T\ \&)>;}
\DoxyCodeLine{00411\ }
\DoxyCodeLine{00412\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00413\ \ \ \ \ luisa::shared\_ptr<Func>\ \mbox{\hyperlink{classluisa_1_1compute_1_1_cpu_callable_ab85859f5b7a24b5485a6d9b3ec9e2e1e}{\_func}};}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00415\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00416\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ F>}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ \textcolor{keyword}{requires}\ std::is\_invocable\_v<F,\ T\ \&>\ \&\&\ std::is\_same\_v<std::invoke\_result\_t<F,\ T\ \&>,\ \textcolor{keywordtype}{void}>}
\DoxyCodeLine{00418\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_cpu_callable_ad514dd162558a9468127b7fcae2c90aa}{CpuCallable}}(F\ func)\ noexcept\ :\ \mbox{\hyperlink{classluisa_1_1compute_1_1_cpu_callable_ab85859f5b7a24b5485a6d9b3ec9e2e1e}{\_func}}\{luisa::make\_shared<Func>(std::move(func))\}\ \{\}}
\DoxyCodeLine{00419\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ A>}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \textcolor{keyword}{requires}\ std::is\_same\_v<expr\_value\_t<A>,\ T>}
\DoxyCodeLine{00421\ \ \ \ \ [[nodiscard]]\ \mbox{\hyperlink{structluisa_1_1compute_1_1_var}{Var<T>}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_cpu_callable_a5bfa9a5e8ff83acf3facfcf5113ea3fa}{operator()}}(A\ \mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}})\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ fb\ =\ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_function_builder_a4590ef89abb9497192eb36510caf0384}{detail::FunctionBuilder::current}}();}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ wrapper\ =\ [func\ =\ \mbox{\hyperlink{classluisa_1_1compute_1_1_cpu_callable_ab85859f5b7a24b5485a6d9b3ec9e2e1e}{\_func}}](T\ *\mbox{\hyperlink{spdlog_2include_2spdlog_2fmt_2bundled_2format_8h_adb6e274f8eb0b74b2865215e1b49c535}{ptr}})\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \ \ \ \ (*func)(*ptr);}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }wrapper\_t\ =\ \textcolor{keyword}{decltype}(wrapper);}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ wrapper2\ =\ [](\textcolor{keywordtype}{void}\ *wrapper,\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}})\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \ \ \ \ (*\textcolor{keyword}{reinterpret\_cast<}wrapper\_t\ *\textcolor{keyword}{>}(wrapper))(\textcolor{keyword}{reinterpret\_cast<}T\ *\textcolor{keyword}{>}(\mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}}));}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ wrapper\_ptr\ =\ luisa::new\_with\_allocator<wrapper\_t>(std::move(wrapper));}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_ac6894281f79600b83c401fbf77ec3727}{def<T>}}(fb-\/>call(}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \ \ \ \ Type::of<T>(),\ wrapper2,\ [](\textcolor{keywordtype}{void}\ *wrapper\_ptr)\ \{}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ luisa::delete\_with\_allocator(reinterpret\_cast<wrapper\_t\ *>(wrapper\_ptr));}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \ \ \ \ wrapper\_ptr,\ \mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}}.expression()));}
\DoxyCodeLine{00436\ \ \ \ \ \}}
\DoxyCodeLine{00437\ \};}
\DoxyCodeLine{00438\ }
\DoxyCodeLine{00439\ \textcolor{comment}{//\ TODO:\ External\ callable}}
\DoxyCodeLine{00440\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00441\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_external_callable}{ExternalCallable}}\ \{}
\DoxyCodeLine{00442\ \ \ \ \ \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{namespaceluisa_a8c7f286c84142da9a0aca4e38c58ce59}{always\_false\_v<T>}});}
\DoxyCodeLine{00443\ \};}
\DoxyCodeLine{00444\ }
\DoxyCodeLine{00445\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Ret,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00446\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_external_callable_3_01_ret_07_args_8_8_8_08_4_adb08080ccbacc968f20ffae0817f1baa}{ExternalCallable}}<Ret(Args...)>\ \{}
\DoxyCodeLine{00447\ }
\DoxyCodeLine{00448\ \ \ \ \ \textcolor{keyword}{static\_assert}(}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ std::negation\_v<std::disjunction<}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_a69d17058a48672238761312efa8b0cc0}{is\_buffer\_or\_view<Ret>}},}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_a82d9145ca7320434770104a12f5a8419}{is\_image\_or\_view<Ret>}},}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_afc7651bc29bcd511771dcc53c37d5a1a}{is\_volume\_or\_view<Ret>}}>>,}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Callables\ may\ not\ return\ buffers,\ "{}}}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}images\ or\ volumes\ (or\ their\ views)."{}});}
\DoxyCodeLine{00455\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::negation\_v<std::disjunction<std::is\_pointer<Args>...>>);}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00457\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00458\ \ \ \ \ luisa::shared\_ptr<ExternalFunction>\ \mbox{\hyperlink{classluisa_1_1compute_1_1_external_callable_3_01_ret_07_args_8_8_8_08_4_a2f35b8dc43b4521f949351e1500fb9bb}{\_func}};}
\DoxyCodeLine{00459\ }
\DoxyCodeLine{00460\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00461\ \ \ \ \ \textcolor{comment}{//\ FIXME:\ support\ for\ resources}}
\DoxyCodeLine{00462\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00463\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1_external_callable_3_01_ret_07_args_8_8_8_08_4_1_1_usage_of}{UsageOf}}\ \{}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_external_callable_3_01_ret_07_args_8_8_8_08_4_1_1_usage_of_a7a93b4de46ec94ca4ce077868f27c008}{value}}\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_a8d7cf4ef050b50b3f6a4cb4c8dfe4dfda3466fab4975481651940ed328aa990e4}{Usage::READ}};}
\DoxyCodeLine{00465\ \ \ \ \ \};}
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00467\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00468\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1_external_callable_3_01_ret_07_args_8_8_8_08_4_1_1_usage_of}{UsageOf}}<T\ \&>\ \{}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_external_callable_3_01_ret_07_args_8_8_8_08_4_1_1_usage_of_3_01_t_01_6_01_4_a9cc9a14dcf7ab8855ac232b9a79f7f43}{value}}\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_a8d7cf4ef050b50b3f6a4cb4c8dfe4dfdaa7b843fb734e3b3fea8e5f902d3f4144}{Usage::READ\_WRITE}};}
\DoxyCodeLine{00470\ \ \ \ \ \};}
\DoxyCodeLine{00471\ }
\DoxyCodeLine{00472\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00473\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1_external_callable_3_01_ret_07_args_8_8_8_08_4_1_1_usage_of}{UsageOf}}<const\ T\ \&>\ \{}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_external_callable_3_01_ret_07_args_8_8_8_08_4_1_1_usage_of_3_01const_01_t_01_6_01_4_a596cc533c9b754a2506245aee64e7238}{value}}\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_a8d7cf4ef050b50b3f6a4cb4c8dfe4dfda3466fab4975481651940ed328aa990e4}{Usage::READ}};}
\DoxyCodeLine{00475\ \ \ \ \ \};}
\DoxyCodeLine{00476\ }
\DoxyCodeLine{00477\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00478\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_external_callable_3_01_ret_07_args_8_8_8_08_4_adb08080ccbacc968f20ffae0817f1baa}{ExternalCallable}}(luisa::string\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a5c4947d4516dd7cfa3505ce3a648a4ef}{name}})\ noexcept}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classluisa_1_1compute_1_1_external_callable_3_01_ret_07_args_8_8_8_08_4_a2f35b8dc43b4521f949351e1500fb9bb}{\_func}}\{luisa::make\_shared<ExternalFunction>(}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::move(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a5c4947d4516dd7cfa3505ce3a648a4ef}{name}}),\ Type::of<Ret>(),}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ luisa::vector<const\ Type\ *>\{Type::of<Args>()...\},}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ luisa::vector<Usage>\{\mbox{\hyperlink{structluisa_1_1compute_1_1_external_callable_3_01_ret_07_args_8_8_8_08_4_1_1_usage_of_a7a93b4de46ec94ca4ce077868f27c008}{UsageOf<Args>::value}}...\})\}\ \{\}}
\DoxyCodeLine{00483\ }
\DoxyCodeLine{00484\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_external_callable_3_01_ret_07_args_8_8_8_08_4_afd4586a6943d4fd6759143239ff32d48}{operator()}}(\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a47ed627335231dfb6dc3449a0c189eb2}{detail::prototype\_to\_callable\_invocation\_t<Args>}}...\ args)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_callable_invoke}{detail::CallableInvoke}}\ \mbox{\hyperlink{namespaceluisa_afecc703e5abfd2fcd6f342e3e345249e}{invoke}};}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}\textcolor{keyword}{>}((\mbox{\hyperlink{namespaceluisa_afecc703e5abfd2fcd6f342e3e345249e}{invoke}}\ <<\ ...\ <<\ args));}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same\_v<Ret,\ void>)\ \{}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_function_builder_a4590ef89abb9497192eb36510caf0384}{detail::FunctionBuilder::current}}()-\/>call(\mbox{\hyperlink{classluisa_1_1compute_1_1_external_callable_3_01_ret_07_args_8_8_8_08_4_a2f35b8dc43b4521f949351e1500fb9bb}{\_func}},\ \mbox{\hyperlink{namespaceluisa_afecc703e5abfd2fcd6f342e3e345249e}{invoke}}.args());}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_ac6894281f79600b83c401fbf77ec3727}{def<Ret>}}(}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_function_builder_a4590ef89abb9497192eb36510caf0384}{detail::FunctionBuilder::current}}()-\/>call(}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Type::of<Ret>(),\ \mbox{\hyperlink{classluisa_1_1compute_1_1_external_callable_3_01_ret_07_args_8_8_8_08_4_a2f35b8dc43b4521f949351e1500fb9bb}{\_func}},\ \mbox{\hyperlink{namespaceluisa_afecc703e5abfd2fcd6f342e3e345249e}{invoke}}.args()));}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00494\ \ \ \ \ \}}
\DoxyCodeLine{00495\ \};}
\DoxyCodeLine{00496\ }
\DoxyCodeLine{00497\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedetail}{detail}}\ \{}
\DoxyCodeLine{00498\ }
\DoxyCodeLine{00499\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ R,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00500\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a66b84c3b916af1c86bc519f2fbd8dcda}{function\_signature}}\ =\ R(Args...);}
\DoxyCodeLine{00501\ }
\DoxyCodeLine{00502\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}>}
\DoxyCodeLine{00503\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1canonical__signature}{canonical\_signature}};}
\DoxyCodeLine{00504\ }
\DoxyCodeLine{00505\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Ret,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00506\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1canonical__signature}{canonical\_signature}}<Ret(Args...)>\ \{}
\DoxyCodeLine{00507\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1canonical__signature_3_01_ret_07_args_8_8_8_08_4_aae4b66e71f8282d93dc0da613cc09a91}{type}}\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a66b84c3b916af1c86bc519f2fbd8dcda}{function\_signature}}<Ret,\ Args...>;}
\DoxyCodeLine{00508\ \};}
\DoxyCodeLine{00509\ }
\DoxyCodeLine{00510\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Ret,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00511\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1canonical__signature}{canonical\_signature}}<Ret\ (*)(Args...)>}
\DoxyCodeLine{00512\ \ \ \ \ :\ \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1canonical__signature}{canonical\_signature}}<Ret(Args...)>\ \{\};}
\DoxyCodeLine{00513\ }
\DoxyCodeLine{00514\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{00515\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1canonical__signature}{canonical\_signature}}}
\DoxyCodeLine{00516\ \ \ \ \ :\ \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1canonical__signature}{canonical\_signature}}<decltype(\&F::operator())>\ \{\};}
\DoxyCodeLine{00517\ }
\DoxyCodeLine{00518\ \textcolor{preprocessor}{\#define\ LUISA\_MAKE\_FUNCTOR\_CANONICAL\_SIGNATURE(...)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00519\ \textcolor{preprocessor}{\ \ \ \ template<typename\ Ret,\ typename\ Cls,\ typename...\ Args>\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00520\ \textcolor{preprocessor}{\ \ \ \ struct\ canonical\_signature<Ret\ (Cls::*)(Args...)\ \_\_VA\_ARGS\_\_>\ \(\backslash\)}}
\DoxyCodeLine{00521\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ :\ canonical\_signature<Ret(Args...)>\ \{\};}}
\DoxyCodeLine{00522\ \mbox{\hyperlink{func_8h_a005e7341b6357c51522d459ecdb72e7c}{LUISA\_MAKE\_FUNCTOR\_CANONICAL\_SIGNATURE}}()}
\DoxyCodeLine{00523\ \mbox{\hyperlink{func_8h_a005e7341b6357c51522d459ecdb72e7c}{LUISA\_MAKE\_FUNCTOR\_CANONICAL\_SIGNATURE}}(const)}
\DoxyCodeLine{00524\ \mbox{\hyperlink{func_8h_a005e7341b6357c51522d459ecdb72e7c}{LUISA\_MAKE\_FUNCTOR\_CANONICAL\_SIGNATURE}}(volatile)}
\DoxyCodeLine{00525\ \mbox{\hyperlink{func_8h_a005e7341b6357c51522d459ecdb72e7c}{LUISA\_MAKE\_FUNCTOR\_CANONICAL\_SIGNATURE}}(const\ volatile)}
\DoxyCodeLine{00526\ \mbox{\hyperlink{func_8h_a005e7341b6357c51522d459ecdb72e7c}{LUISA\_MAKE\_FUNCTOR\_CANONICAL\_SIGNATURE}}(noexcept)}
\DoxyCodeLine{00527\ \mbox{\hyperlink{func_8h_a005e7341b6357c51522d459ecdb72e7c}{LUISA\_MAKE\_FUNCTOR\_CANONICAL\_SIGNATURE}}(const\ noexcept)}
\DoxyCodeLine{00528\ \mbox{\hyperlink{func_8h_a005e7341b6357c51522d459ecdb72e7c}{LUISA\_MAKE\_FUNCTOR\_CANONICAL\_SIGNATURE}}(volatile\ noexcept)}
\DoxyCodeLine{00529\ \mbox{\hyperlink{func_8h_a005e7341b6357c51522d459ecdb72e7c}{LUISA\_MAKE\_FUNCTOR\_CANONICAL\_SIGNATURE}}(const\ volatile\ noexcept)}
\DoxyCodeLine{00530\ \textcolor{preprocessor}{\#undef\ LUISA\_MAKE\_FUNCTOR\_CANONICAL\_SIGNATURE}}
\DoxyCodeLine{00531\ }
\DoxyCodeLine{00532\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00533\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a8719a626f669e8005717583559dff144}{canonical\_signature\_t}}\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1canonical__signature}{canonical\_signature<T>::type}};}
\DoxyCodeLine{00534\ }
\DoxyCodeLine{00535\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00536\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function}{dsl\_function}}\ \{}
\DoxyCodeLine{00537\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function_a00e2e863b21a63b4d6ad9458663a8a39}{type}}\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function}{dsl\_function}}<}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a8719a626f669e8005717583559dff144}{canonical\_signature\_t}}<}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \ \ \ \ std::remove\_cvref\_t<T>>>\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function_a00e2e863b21a63b4d6ad9458663a8a39}{::type}};}
\DoxyCodeLine{00540\ \};}
\DoxyCodeLine{00541\ }
\DoxyCodeLine{00542\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00543\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function}{dsl\_function}}<\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a66b84c3b916af1c86bc519f2fbd8dcda}{function\_signature}}<\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}},\ Args...>>\ \{}
\DoxyCodeLine{00544\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function_3_01function__signature_3_01void_00_01_args_8_8_8_01_4_01_4_a861bd441651cf56239037737d0dd299f}{type}}\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a66b84c3b916af1c86bc519f2fbd8dcda}{function\_signature}}<}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}},}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a927fc884f669f37a4fd7fe7c73266b89}{definition\_to\_prototype\_t<Args>}}...>;}
\DoxyCodeLine{00547\ \};}
\DoxyCodeLine{00548\ }
\DoxyCodeLine{00549\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Ret,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00550\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function}{dsl\_function}}<\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a66b84c3b916af1c86bc519f2fbd8dcda}{function\_signature}}<Ret,\ Args...>>\ \{}
\DoxyCodeLine{00551\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function_3_01function__signature_3_01_ret_00_01_args_8_8_8_01_4_01_4_ace0f80553212e903b3c493418c07fc3f}{type}}\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a66b84c3b916af1c86bc519f2fbd8dcda}{function\_signature}}<}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_a97a30acfe72da21925e80a2861d53c9b}{expr\_value\_t<Ret>}},}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a927fc884f669f37a4fd7fe7c73266b89}{definition\_to\_prototype\_t<Args>}}...>;}
\DoxyCodeLine{00554\ \};}
\DoxyCodeLine{00555\ }
\DoxyCodeLine{00556\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...\ Ret,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00557\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function}{dsl\_function}}<\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a66b84c3b916af1c86bc519f2fbd8dcda}{function\_signature}}<\mbox{\hyperlink{namespacestd}{std}}::tuple<Ret...>,\ Args...>>\ \{}
\DoxyCodeLine{00558\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function_3_01function__signature_3_01std_1_1tuple_3_01_a1bdc8db055325d92fa153c81bf5170d_a4f58a7c13b5de4f226efc6f27d9a4ee1}{type}}\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a66b84c3b916af1c86bc519f2fbd8dcda}{function\_signature}}<}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ std::tuple<expr\_value\_t<Ret>...>,}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a927fc884f669f37a4fd7fe7c73266b89}{definition\_to\_prototype\_t<Args>}}...>;}
\DoxyCodeLine{00561\ \};}
\DoxyCodeLine{00562\ }
\DoxyCodeLine{00563\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ RA,\ \textcolor{keyword}{typename}\ RB,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00564\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function}{dsl\_function}}<\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a66b84c3b916af1c86bc519f2fbd8dcda}{function\_signature}}<\mbox{\hyperlink{namespacestd}{std}}::pair<RA,\ RB>,\ Args...>>\ \{}
\DoxyCodeLine{00565\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function_3_01function__signature_3_01std_1_1pair_3_01_ra1a2f52cdd85c27b15c57ce5c1cd2146_af2ccc432757f958bd9e504f36c8453ba}{type}}\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a66b84c3b916af1c86bc519f2fbd8dcda}{function\_signature}}<}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ std::tuple<expr\_value\_t<RA>,\ \mbox{\hyperlink{namespaceluisa_1_1compute_a97a30acfe72da21925e80a2861d53c9b}{expr\_value\_t<RB>}}>,}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a927fc884f669f37a4fd7fe7c73266b89}{definition\_to\_prototype\_t<Args>}}...>;}
\DoxyCodeLine{00568\ \};}
\DoxyCodeLine{00569\ }
\DoxyCodeLine{00570\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00571\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function}{dsl\_function}}<\mbox{\hyperlink{structluisa_1_1compute_1_1_kernel1_d}{Kernel1D}}<T>>\ \{}
\DoxyCodeLine{00572\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function_3_01_kernel1_d_3_01_t_01_4_01_4_a1cb1cb5ce1e44d966545a656fcb51f53}{type}}\ =\ T;}
\DoxyCodeLine{00573\ \};}
\DoxyCodeLine{00574\ }
\DoxyCodeLine{00575\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00576\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function}{dsl\_function}}<\mbox{\hyperlink{structluisa_1_1compute_1_1_kernel2_d}{Kernel2D}}<T>>\ \{}
\DoxyCodeLine{00577\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function_3_01_kernel2_d_3_01_t_01_4_01_4_af8e0952225b777355a92e5f5169c6687}{type}}\ =\ T;}
\DoxyCodeLine{00578\ \};}
\DoxyCodeLine{00579\ }
\DoxyCodeLine{00580\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00581\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function}{dsl\_function}}<\mbox{\hyperlink{structluisa_1_1compute_1_1_kernel3_d}{Kernel3D}}<T>>\ \{}
\DoxyCodeLine{00582\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function_3_01_kernel3_d_3_01_t_01_4_01_4_aa9ceb79cb2db6f87dc777bff18e2acec}{type}}\ =\ T;}
\DoxyCodeLine{00583\ \};}
\DoxyCodeLine{00584\ }
\DoxyCodeLine{00585\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00586\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function}{dsl\_function}}<\mbox{\hyperlink{classluisa_1_1compute_1_1_callable}{Callable}}<T>>\ \{}
\DoxyCodeLine{00587\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function_3_01_callable_3_01_t_01_4_01_4_a5a58df651764460c82542abece31744c}{type}}\ =\ T;}
\DoxyCodeLine{00588\ \};}
\DoxyCodeLine{00589\ }
\DoxyCodeLine{00590\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00591\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_af2b4d3557c9c03e24b86ef0d3b3985db}{dsl\_function\_t}}\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1dsl__function_a00e2e863b21a63b4d6ad9458663a8a39}{dsl\_function<T>::type}};}
\DoxyCodeLine{00592\ }
\DoxyCodeLine{00593\ \}\textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00594\ }
\DoxyCodeLine{00595\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00596\ \mbox{\hyperlink{structluisa_1_1compute_1_1_kernel1_d}{Kernel1D}}(T\ \&\&)\ -\/>\ \mbox{\hyperlink{structluisa_1_1compute_1_1_kernel1_d}{Kernel1D<detail::dsl\_function\_t<std::remove\_cvref\_t<T>}}>>;}
\DoxyCodeLine{00597\ }
\DoxyCodeLine{00598\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00599\ \mbox{\hyperlink{structluisa_1_1compute_1_1_kernel2_d}{Kernel2D}}(T\ \&\&)\ -\/>\ \mbox{\hyperlink{structluisa_1_1compute_1_1_kernel2_d}{Kernel2D<detail::dsl\_function\_t<std::remove\_cvref\_t<T>}}>>;}
\DoxyCodeLine{00600\ }
\DoxyCodeLine{00601\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00602\ \mbox{\hyperlink{structluisa_1_1compute_1_1_kernel3_d}{Kernel3D}}(T\ \&\&)\ -\/>\ \mbox{\hyperlink{structluisa_1_1compute_1_1_kernel3_d}{Kernel3D<detail::dsl\_function\_t<std::remove\_cvref\_t<T>}}>>;}
\DoxyCodeLine{00603\ }
\DoxyCodeLine{00604\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00605\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable}{Callable}}(T\ \&\&)\ -\/>\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable}{Callable<detail::dsl\_function\_t<std::remove\_cvref\_t<T>}}>>;}
\DoxyCodeLine{00606\ }
\DoxyCodeLine{00607\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedetail}{detail}}\ \{}
\DoxyCodeLine{00608\ }
\DoxyCodeLine{00609\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1_callable_outliner}{CallableOutliner}}\ \{}
\DoxyCodeLine{00610\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{00611\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1_callable_outliner_aca8db7372e16674f8b43a87923ed33fb}{operator\%}}(F\ \&\&body)\ \&\&\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable}{Callable}}\{std::forward<F>(body)\}();}
\DoxyCodeLine{00613\ \ \ \ \ \}}
\DoxyCodeLine{00614\ \};}
\DoxyCodeLine{00615\ }
\DoxyCodeLine{00616\ \}\textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00617\ }
\DoxyCodeLine{00618\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{00619\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{sugar_8h_a9f63f2ea5fb31c854e478d11d4920eb4}{outline}}(F\ \&\&f)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00620\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable}{Callable}}\{std::forward<F>(f)\}();}
\DoxyCodeLine{00621\ \}}
\DoxyCodeLine{00622\ }
\DoxyCodeLine{00623\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedetail}{detail}}\ \{}
\DoxyCodeLine{00624\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ S>}
\DoxyCodeLine{00625\ [[nodiscard]]\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_afddf421bf5cc955dd207a82baece9b2e}{outliner\_with\_comment}}(S\ \&\&\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}})\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00626\ \ \ \ \ \mbox{\hyperlink{sugar_8h_a0c23ad0ad5cb6105679214f4d0442b0b}{comment}}(std::forward<S>(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}));}
\DoxyCodeLine{00627\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1_callable_outliner}{CallableOutliner}}\{\};}
\DoxyCodeLine{00628\ \}}
\DoxyCodeLine{00629\ \}\textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00630\ }
\DoxyCodeLine{00631\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{00632\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a8bd0ab63c3f347c92927857c3ad37690}{Lambda}}\ \{}
\DoxyCodeLine{00633\ }
\DoxyCodeLine{00634\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00635\ \ \ \ \ \mbox{\hyperlink{namespaceluisa_a4cb72b1f2b3b0dc5c21076e95f132dc5}{luisa::string}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a07d6b5b2703a3b3a32cd9274e89d4054}{\_comment}};}
\DoxyCodeLine{00636\ \ \ \ \ luisa::function<F>\ \mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a7854bcd15c2c8884950760163f41b66a}{\_f}};}
\DoxyCodeLine{00637\ }
\DoxyCodeLine{00638\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00639\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00640\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a8bd0ab63c3f347c92927857c3ad37690}{Lambda}}(Func\ \&\&f)\ noexcept\ :\ \mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a7854bcd15c2c8884950760163f41b66a}{\_f}}(std::forward<Func>(f))\ \{\}}
\DoxyCodeLine{00641\ }
\DoxyCodeLine{00642\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ S,\ \textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00643\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a014172dedf6b6a001e40c90bd0e1f4a6}{Lambda}}(S\ \&\&\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}},\ Func\ \&\&f)\ noexcept}
\DoxyCodeLine{00644\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a07d6b5b2703a3b3a32cd9274e89d4054}{\_comment}}\{std::forward<S>(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}})\},}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \ \ \_f\{std::forward<Func>(f)\}\ \{\}}
\DoxyCodeLine{00646\ }
\DoxyCodeLine{00647\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_abe433257a7a6f65247474316638d473e}{Lambda}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a8bd0ab63c3f347c92927857c3ad37690}{Lambda}}\ \&\&)\ noexcept\ =\ \mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}};}
\DoxyCodeLine{00648\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a8bd0ab63c3f347c92927857c3ad37690}{Lambda}}(const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a8bd0ab63c3f347c92927857c3ad37690}{Lambda}}\ \&)\ noexcept\ =\ \mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}};}
\DoxyCodeLine{00649\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a8bd0ab63c3f347c92927857c3ad37690}{Lambda}}\ \&operator=(\mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a8bd0ab63c3f347c92927857c3ad37690}{Lambda}}\ \&\&)\ noexcept\ =\ \mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}};}
\DoxyCodeLine{00650\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a8bd0ab63c3f347c92927857c3ad37690}{Lambda}}\ \&operator=(const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a8bd0ab63c3f347c92927857c3ad37690}{Lambda}}\ \&)\ noexcept\ =\ \mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}};}
\DoxyCodeLine{00651\ }
\DoxyCodeLine{00652\ \ \ \ \ template<typename...\ Args>}
\DoxyCodeLine{00653\ \ \ \ \ auto\ operator()(Args\ \&\&...args)\ const\ noexcept\ \{}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }Ret\ =\ \textcolor{keyword}{decltype}(\mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a7854bcd15c2c8884950760163f41b66a}{\_f}}(std::forward<Args>(args)...));}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same\_v<Ret,\ void>)\ \{}
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sugar_8h_a9f63f2ea5fb31c854e478d11d4920eb4}{outline}}([\&]\ \{}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a07d6b5b2703a3b3a32cd9274e89d4054}{\_comment}}.empty())\ \{\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_ac94d2ebb4470c01136753fc9daa74a78}{detail::comment}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a07d6b5b2703a3b3a32cd9274e89d4054}{\_comment}});\ \}}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a7854bcd15c2c8884950760163f41b66a}{\_f}}(std::forward<Args>(args)...);}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \ \ \ \ luisa::optional<Ret>\ ret;}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sugar_8h_a9f63f2ea5fb31c854e478d11d4920eb4}{outline}}([\&]\ \{}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a07d6b5b2703a3b3a32cd9274e89d4054}{\_comment}}.empty())\ \{\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_ac94d2ebb4470c01136753fc9daa74a78}{detail::comment}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a07d6b5b2703a3b3a32cd9274e89d4054}{\_comment}});\ \}}
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ret.emplace(\mbox{\hyperlink{classluisa_1_1compute_1_1_lambda_a7854bcd15c2c8884950760163f41b66a}{\_f}}(std::forward<Args>(args)...));}
\DoxyCodeLine{00665\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00666\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::move(ret).value();}
\DoxyCodeLine{00667\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00668\ \ \ \ \ \}}
\DoxyCodeLine{00669\ \};}
\DoxyCodeLine{00670\ }
\DoxyCodeLine{00671\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{00672\ \mbox{\hyperlink{classluisa_1_1compute_1_1_lambda}{Lambda}}(F\ \&\&)\ -\/>\ \mbox{\hyperlink{classluisa_1_1compute_1_1_lambda}{Lambda<detail::canonical\_signature\_t<std::remove\_cvref\_t<F>}}>>;}
\DoxyCodeLine{00673\ }
\DoxyCodeLine{00674\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ S,\ \textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{00675\ \mbox{\hyperlink{classluisa_1_1compute_1_1_lambda}{Lambda}}(S\ \&\&,\ F\ \&\&)\ -\/>\ \mbox{\hyperlink{classluisa_1_1compute_1_1_lambda}{Lambda<detail::canonical\_signature\_t<std::remove\_cvref\_t<F>}}>>;}
\DoxyCodeLine{00676\ }
\DoxyCodeLine{00677\ \}\textcolor{comment}{//\ namespace\ luisa::compute}}

\end{DoxyCode}
