\doxysection{market.\+h}
\hypertarget{market_8h_source}{}\label{market_8h_source}\index{external/taskflow/3rd-\/party/tbb/src/tbb/market.h@{external/taskflow/3rd-\/party/tbb/src/tbb/market.h}}
\mbox{\hyperlink{market_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#ifndef\ \_TBB\_market\_H}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#define\ \_TBB\_market\_H}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{tbb__stddef_8h}{tbb/tbb\_stddef.h}}"{}}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{scheduler__common_8h}{scheduler\_common.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2include_2tbb_2atomic_8h}{tbb/atomic.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{spin__rw__mutex_8h}{tbb/spin\_rw\_mutex.h}}"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{rml__tbb_8h}{../rml/include/rml\_tbb.h}}"{}}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2src_2tbb_2intrusive__list_8h}{intrusive\_list.h}}"{}}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#if\ defined(\_MSC\_VER)\ \&\&\ defined(\_Wp64)}}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{comment}{//\ Workaround\ for\ overzealous\ compiler\ warnings\ in\ /Wp64\ mode}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ warning\ (push)}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ warning\ (disable:\ 4244)}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\ \{}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{keyword}{class\ }task\_group\_context;}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb_1_1internal}{internal}}\ \{}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00042\ \textcolor{comment}{//\ Class\ market}}
\DoxyCodeLine{00043\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1internal_1_1market_acdbf87ad0efe5f3e224d88ecb2536e93}{market}}\ :\ no\_copy,\ \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1tbb__client}{rml::tbb\_client}}\ \{}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1internal_1_1market_a9acd4f7b134e3bcd5625ce386ec7db60}{generic\_scheduler}};}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1internal_1_1market_adc288c92e3de5dd87e56ab61885cf63e}{arena}};}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1internal_1_1market_a7d37d41d9825169ba9ab5cb866843d7d}{tbb::interface7::internal::task\_arena\_base}};}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ SchedulerTraits>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1internal_1_1market_a276a67d14225fdfbb225cc85299850e3}{custom\_scheduler}};}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1internal_1_1market_ab99d537be159caba2e6a72eafc6cbdf4}{tbb::task\_group\_context}};}
\DoxyCodeLine{00051\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a83e47342e44b72ff9c1ce08f75a7dbc2}{ITT\_DoUnsafeOneTimeInitialization}}\ ();}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classtbb_1_1internal_1_1intrusive__list}{intrusive\_list<arena>}}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a1e16d59c635a7c825700c682f0d6392e}{arena\_list\_type}};}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classtbb_1_1internal_1_1intrusive__list}{intrusive\_list<generic\_scheduler>}}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_aad8860400f36b96f1410c3b76f6ab87b}{scheduler\_list\_type}};}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_acdbf87ad0efe5f3e224d88ecb2536e93}{market}}*\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a1dbc378b5e39901f1c11f2021b35688c}{theMarket}};}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{namespacetbb_1_1internal_a7129c5cff1bad05eaf6c218a04f70456}{scheduler\_mutex\_type}}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_aee2d565dc5bbbdcdb12899b46ea04ba3}{global\_market\_mutex\_type}};}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_aee2d565dc5bbbdcdb12899b46ea04ba3}{global\_market\_mutex\_type}}\ \ \mbox{\hyperlink{classtbb_1_1internal_1_1market_ae4ba85f7230a2668979009bf3b29df39}{theMarketMutex}};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classtbb_1_1spin__rw__mutex}{spin\_rw\_mutex}}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a9d9b7abc87576a28a1278ede919c2fe5}{arenas\_list\_mutex\_type}};}
\DoxyCodeLine{00067\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a9d9b7abc87576a28a1278ede919c2fe5}{arenas\_list\_mutex\_type}}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a939c230060372e2af4025aade0f91a6e}{my\_arenas\_list\_mutex}};}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00070\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1tbb__server}{rml::tbb\_server}}*\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_af7429d97c388e8adcbf37fcdbf64c075}{my\_server}};}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a0e2353e9048c25db08e639869694a0a5}{my\_num\_workers\_hard\_limit}};}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_ae6f56dc7b83aaa5e44a52d5aa1685193}{my\_num\_workers\_soft\_limit}};}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a91c485f06e84cd7c8f357ac2653c0425}{my\_num\_workers\_requested}};}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00086\ \ \ \ \ \mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic<unsigned>}}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a2fcee169e3b3be1cbb9b89b9a6c1942c}{my\_first\_unused\_worker\_idx}};}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_ac358959b1d07ef2051827926643bfd26}{my\_total\_demand}};}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \textcolor{preprocessor}{\#if\ \_\_TBB\_ENQUEUE\_ENFORCED\_CONCURRENCY}}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keywordtype}{int}\ my\_mandatory\_num\_requested;}
\DoxyCodeLine{00094\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_PRIORITY}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00102\ \ \ \ \ intptr\_t\ my\_global\_top\_priority;}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \ \ intptr\_t\ my\_global\_bottom\_priority;}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00111\ \ \ \ \ uintptr\_t\ my\_global\_reload\_epoch;}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keyword}{struct\ }priority\_level\_info\ \{}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a1e16d59c635a7c825700c682f0d6392e}{arena\_list\_type}}\ arenas;}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1market_adc288c92e3de5dd87e56ab61885cf63e}{arena}}\ *next\_arena;}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ workers\_requested;}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ workers\_available;}
\DoxyCodeLine{00127\ \ \ \ \ \};\ \textcolor{comment}{//\ struct\ priority\_level\_info}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00130\ \ \ \ \ priority\_level\_info\ my\_priority\_levels[\mbox{\hyperlink{namespacetbb_1_1internal_ae1dadab9152ec72bebfb2827c03846e6}{num\_priority\_levels}}];}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \textcolor{preprocessor}{\#else\ }\textcolor{comment}{/*\ !\_\_TBB\_TASK\_PRIORITY\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00135\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a1e16d59c635a7c825700c682f0d6392e}{arena\_list\_type}}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_aab9e3f5ceeb9189ea960798fa472db7f}{my\_arenas}};}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1market_adc288c92e3de5dd87e56ab61885cf63e}{arena}}\ *\mbox{\hyperlink{classtbb_1_1internal_1_1market_afe6b17aefb399a82440951f14f70884b}{my\_next\_arena}};}
\DoxyCodeLine{00140\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ !\_\_TBB\_TASK\_PRIORITY\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00143\ \ \ \ \ uintptr\_t\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a063b80350da6758a2f8a610a2363aff6}{my\_arenas\_aba\_epoch}};}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_acc6123ee9f177debfe705b53e509220e}{my\_ref\_count}};}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a3ec107af897da09a5d400c63f0c8d866}{my\_public\_ref\_count}};}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_ad2e4a6ecf43c20e6171b0de586912957}{my\_stack\_size}};}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a2fe7f13bbfeb7da913dae45a996eecb7}{my\_join\_workers}};}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00158\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a4a7383505d411e8ecbd3b9fd6b90170e}{skip\_soft\_limit\_warning}}\ =\ \string~0U;}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00161\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_abd198eefc75453a31fc994e0f7c18103}{my\_workers\_soft\_limit\_to\_report}};}
\DoxyCodeLine{00162\ \textcolor{preprocessor}{\#if\ \_\_TBB\_COUNT\_TASK\_NODES}}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \ \ \mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic<intptr\_t>}}\ my\_task\_node\_count;}
\DoxyCodeLine{00166\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_COUNT\_TASK\_NODES\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00169\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1market_acdbf87ad0efe5f3e224d88ecb2536e93}{market}}\ (\ \textcolor{keywordtype}{unsigned}\ workers\_soft\_limit,\ \textcolor{keywordtype}{unsigned}\ workers\_hard\_limit,\ \textcolor{keywordtype}{size\_t}\ stack\_size\ );}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_acdbf87ad0efe5f3e224d88ecb2536e93}{market}}\&\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a08ccaf89d501a9e56912eb5bd624066f}{global\_market}}\ (\ \textcolor{keywordtype}{bool}\ is\_public,\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a42a517ad93d2a752f9e20eab9db10279}{max\_num\_workers}}\ =\ 0,\ \textcolor{keywordtype}{size\_t}\ stack\_size\ =\ 0\ );}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a5ca285e2d383ecaf3ff0460b30a3551e}{destroy}}\ ();}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a61e46dcffd92e6d8bae0337f258112fa}{update\_workers\_request}}();}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_PRIORITY}}
\DoxyCodeLine{00182\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1market_adc288c92e3de5dd87e56ab61885cf63e}{arena}}*\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_adb6429452a5a46fc578cef54e692fcb6}{arena\_in\_need}}\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_adc288c92e3de5dd87e56ab61885cf63e}{arena}}*\ prev\_arena\ );}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_ae02e2394f18a6c25a022fa44be65d317}{update\_allotment}}\ (\ intptr\_t\ highest\_affected\_priority\ );}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{keywordtype}{void}\ update\_arena\_top\_priority\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_adc288c92e3de5dd87e56ab61885cf63e}{arena}}\&\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}},\ intptr\_t\ newPriority\ );}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ update\_global\_top\_priority\ (\ intptr\_t\ newPriority\ );}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ reset\_global\_priority\ ();}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ advance\_global\_reload\_epoch\ ()\ \{}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \_\_TBB\_store\_with\_release(\ my\_global\_reload\_epoch,\ my\_global\_reload\_epoch\ +\ 1\ );}
\DoxyCodeLine{00200\ \ \ \ \ \}}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_abac77eac68e7a47e3edde883ff7a59ab}{assert\_market\_valid}}\ ()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ (my\_priority\_levels[my\_global\_top\_priority].workers\_requested\ >\ 0}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ !my\_priority\_levels[my\_global\_top\_priority].arenas.empty())}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ (my\_global\_top\_priority\ ==\ my\_global\_bottom\_priority\ \&\&}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_global\_top\_priority\ ==\ normalized\_normal\_priority),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00207\ \ \ \ \ \}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \textcolor{preprocessor}{\#else\ }\textcolor{comment}{/*\ !\_\_TBB\_TASK\_PRIORITY\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_ae02e2394f18a6c25a022fa44be65d317}{update\_allotment}}\ (\textcolor{keywordtype}{unsigned}\ effective\_soft\_limit)\ \{}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_ac358959b1d07ef2051827926643bfd26}{my\_total\_demand}}\ )}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1market_ae02e2394f18a6c25a022fa44be65d317}{update\_allotment}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_aab9e3f5ceeb9189ea960798fa472db7f}{my\_arenas}},\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_ac358959b1d07ef2051827926643bfd26}{my\_total\_demand}},\ (\textcolor{keywordtype}{int})effective\_soft\_limit\ );}
\DoxyCodeLine{00217\ \ \ \ \ \}}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{comment}{//\ TODO:\ consider\ to\ rewrite\ the\ code\ with\ is\_arena\_in\_list\ function}}
\DoxyCodeLine{00221\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1market_adc288c92e3de5dd87e56ab61885cf63e}{arena}}*\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_adb6429452a5a46fc578cef54e692fcb6}{arena\_in\_need}}\ (\mbox{\hyperlink{classtbb_1_1internal_1_1market_adc288c92e3de5dd87e56ab61885cf63e}{arena}}*\ prev\_arena)\ \{}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\_\_TBB\_load\_with\_acquire(\mbox{\hyperlink{classtbb_1_1internal_1_1market_ac358959b1d07ef2051827926643bfd26}{my\_total\_demand}})\ <=\ 0)}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1spin__rw__mutex_1_1scoped__lock}{arenas\_list\_mutex\_type::scoped\_lock}}\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{classtbb_1_1internal_1_1market_a939c230060372e2af4025aade0f91a6e}{my\_arenas\_list\_mutex}},\ \textcolor{comment}{/*is\_writer=*/}\textcolor{keyword}{false});}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1market_adc288c92e3de5dd87e56ab61885cf63e}{arena}}*\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Checks\ if\ arena\ is\ alive\ or\ not}}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_ab5309747cd8e8e7e094b4417a8a28b76}{is\_arena\_in\_list}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_aab9e3f5ceeb9189ea960798fa472db7f}{my\_arenas}},\ prev\_arena\ )\ )\ \{}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_adb6429452a5a46fc578cef54e692fcb6}{arena\_in\_need}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_aab9e3f5ceeb9189ea960798fa472db7f}{my\_arenas}},\ prev\_arena\ );}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_adb6429452a5a46fc578cef54e692fcb6}{arena\_in\_need}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_aab9e3f5ceeb9189ea960798fa472db7f}{my\_arenas}},\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_afe6b17aefb399a82440951f14f70884b}{my\_next\_arena}}\ );}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}})\ \{}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a958f482f9d5f3476ca70610af5336040}{as\_atomic}}(\mbox{\hyperlink{classtbb_1_1internal_1_1market_afe6b17aefb399a82440951f14f70884b}{my\_next\_arena}})\ =\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}};\ \textcolor{comment}{//\ a\ subject\ for\ innocent\ data\ race\ under\ the\ reader\ lock}}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ rework\ global\ round\ robin\ policy\ to\ local\ or\ random\ to\ avoid\ this\ write}}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}};}
\DoxyCodeLine{00239\ \ \ \ \ \}}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_abac77eac68e7a47e3edde883ff7a59ab}{assert\_market\_valid}}\ ()\textcolor{keyword}{\ const\ }\{\}}
\DoxyCodeLine{00242\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ !\_\_TBB\_TASK\_PRIORITY\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{comment}{//\ Helpers\ to\ unify\ code\ branches\ dependent\ on\ priority\ feature\ presence}}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a829b50e27820a2ecb57067b0d8147422}{insert\_arena\_into\_list}}\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}\&\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ );}
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00249\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a9f3b90e1f82aff92b8493b78a909d434}{remove\_arena\_from\_list}}\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}\&\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ );}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}*\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_adb6429452a5a46fc578cef54e692fcb6}{arena\_in\_need}}\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a1e16d59c635a7c825700c682f0d6392e}{arena\_list\_type}}\ \&arenas,\ \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}\ *hint\ );}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_ae02e2394f18a6c25a022fa44be65d317}{update\_allotment}}\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a1e16d59c635a7c825700c682f0d6392e}{arena\_list\_type}}\&\ arenas,\ \textcolor{keywordtype}{int}\ total\_demand,\ \textcolor{keywordtype}{int}\ max\_workers\ );}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_ab5309747cd8e8e7e094b4417a8a28b76}{is\_arena\_in\_list}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a1e16d59c635a7c825700c682f0d6392e}{arena\_list\_type}}\ \&arenas,\ \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}\ *\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ );}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{comment}{//\ Implementation\ of\ rml::tbb\_client\ interface\ methods}}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ \ \ \ \ \mbox{\hyperlink{classrml_1_1versioned__object_a759650010b271238ef9433442730c423}{version\_type}}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a40f5211ac34a8dc73339ce48837a52b1}{version}}\ ()\ const\ \_\_TBB\_override\ \{\ \textcolor{keywordflow}{return}\ 0;\ \}}
\DoxyCodeLine{00262\ }
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a18da7f9007ba8be2f186764d69fd4606}{max\_job\_count}}\ ()\ const\ \_\_TBB\_override\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a0e2353e9048c25db08e639869694a0a5}{my\_num\_workers\_hard\_limit}};\ \}}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00265\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a8278ffd03b0e1194cf44bec3163b764d}{min\_stack\_size}}\ ()\ const\ \_\_TBB\_override\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_accfaa36b2c0dc66a2d73943db458a373}{worker\_stack\_size}}();\ \}}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \ \ \ \ policy\_type\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_ac34ffcef09382c724dc962361d6fd2b1}{policy}}\ ()\ const\ \_\_TBB\_override\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structthroughput}{throughput}};\ \}}
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00269\ \ \ \ \ \mbox{\hyperlink{classrml_1_1client_a684e4fee23d24f9d9d150eb38f2d254f}{job}}*\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_ae5f4653c1ea43b7011f9099348849467}{create\_one\_job}}\ ()\ \_\_TBB\_override;}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a32eca56b49c13d239a2869c33c4a17b0}{cleanup}}(\ \mbox{\hyperlink{classrml_1_1client_a684e4fee23d24f9d9d150eb38f2d254f}{job}}\&\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}\ )\ \_\_TBB\_override;}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_abc37f18193cd93d6b5c54acef4feec17}{acknowledge\_close\_connection}}\ ()\ \_\_TBB\_override;}
\DoxyCodeLine{00274\ }
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a574c6275a73f185d391151478e4a7634}{process}}(\ \mbox{\hyperlink{classrml_1_1client_a684e4fee23d24f9d9d150eb38f2d254f}{job}}\&\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}\ )\ \_\_TBB\_override;}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ public:}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00281\ \ \ \ \ static\ \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}*\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_aa73a40282b782676f30f27dcde0ea967}{create\_arena}}\ (\ \textcolor{keywordtype}{int}\ num\_slots,\ \textcolor{keywordtype}{int}\ num\_reserved\_slots,\ \textcolor{keywordtype}{size\_t}\ stack\_size\ );}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a798355f9d896223c97ac403c879987be}{try\_destroy\_arena}}\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}*,\ uintptr\_t\ aba\_epoch\ );}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00287\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a5bd937cbff57f636998e1ef4466469e4}{detach\_arena}}\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}\&\ );}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa412563418e657114a102db610f726632}{release}}\ (\ \textcolor{keywordtype}{bool}\ is\_public,\ \textcolor{keywordtype}{bool}\ blocking\_terminate\ );}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \textcolor{preprocessor}{\#if\ \_\_TBB\_ENQUEUE\_ENFORCED\_CONCURRENCY}}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keywordtype}{void}\ enable\_mandatory\_concurrency\_impl\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}\ *\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ );}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{keywordtype}{void}\ enable\_mandatory\_concurrency\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}\ *\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ );}
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{keywordtype}{void}\ disable\_mandatory\_concurrency\_impl(\mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}*\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}});}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00303\ \ \ \ \ \textcolor{keywordtype}{void}\ mandatory\_concurrency\_disable\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}\ *\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ );}
\DoxyCodeLine{00304\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_ENQUEUE\_ENFORCED\_CONCURRENCY\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a2147b4639190ad49551f617784dc012b}{adjust\_demand}}\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}\&,\ \textcolor{keywordtype}{int}\ delta\ );}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00311\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a599c306133a3132143bd0bb2ec82f757}{must\_join\_workers}}\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a2fe7f13bbfeb7da913dae45a996eecb7}{my\_join\_workers}};\ \}}
\DoxyCodeLine{00312\ }
\DoxyCodeLine{00314\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_accfaa36b2c0dc66a2d73943db458a373}{worker\_stack\_size}}\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_ad2e4a6ecf43c20e6171b0de586912957}{my\_stack\_size}};\ \}}
\DoxyCodeLine{00315\ }
\DoxyCodeLine{00317\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a50bb92619e74a81b3f8552ccca139c9f}{set\_active\_num\_workers}}(\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}\ );}
\DoxyCodeLine{00318\ }
\DoxyCodeLine{00320\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a857327e374da8c7bb5c4b529aca05405}{app\_parallelism\_limit}}();}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \textcolor{preprocessor}{\#if\ \_WIN32||\_WIN64}}
\DoxyCodeLine{00324\ \ \ \ \ \textcolor{keywordtype}{void}\ register\_master(\ ::rml::server::execution\_resource\_t\&\ rsc\_handle\ )\ \{}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_af7429d97c388e8adcbf37fcdbf64c075}{my\_server}},\ \textcolor{stringliteral}{"{}RML\ server\ not\ defined?"{}}\ );}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ server\ may\ ignore\ registration\ and\ set\ master\_exec\_resource\ to\ NULL.}}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1market_af7429d97c388e8adcbf37fcdbf64c075}{my\_server}}-\/>register\_master(\ rsc\_handle\ );}
\DoxyCodeLine{00328\ \ \ \ \ \}}
\DoxyCodeLine{00329\ }
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{keywordtype}{void}\ unregister\_master(\ ::rml::server::execution\_resource\_t\&\ rsc\_handle\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1market_af7429d97c388e8adcbf37fcdbf64c075}{my\_server}}-\/>unregister\_master(\ rsc\_handle\ );}
\DoxyCodeLine{00333\ \ \ \ \ \}}
\DoxyCodeLine{00334\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ WIN\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00335\ }
\DoxyCodeLine{00336\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_GROUP\_CONTEXT}}
\DoxyCodeLine{00338\ }
\DoxyCodeLine{00342\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00343\ \ \ \ \ \textcolor{keywordtype}{bool}\ propagate\_task\_group\_state\ (\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_ab99d537be159caba2e6a72eafc6cbdf4}{task\_group\_context}}::*mptr\_state,\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_ab99d537be159caba2e6a72eafc6cbdf4}{task\_group\_context}}\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ new\_state\ );}
\DoxyCodeLine{00344\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_TASK\_GROUP\_CONTEXT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00345\ }
\DoxyCodeLine{00346\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_PRIORITY}}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{keywordtype}{bool}\ lower\_arena\_priority\ (\ \mbox{\hyperlink{structarena}{arena}}\&\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}},\ intptr\_t\ new\_priority,\ uintptr\_t\ old\_reload\_epoch\ );}
\DoxyCodeLine{00350\ }
\DoxyCodeLine{00352\ }
\DoxyCodeLine{00358\ \ \ \ \ \textcolor{keywordtype}{bool}\ update\_arena\_priority\ (\ \mbox{\hyperlink{structarena}{arena}}\&\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}},\ intptr\_t\ new\_priority\ );}
\DoxyCodeLine{00359\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_TASK\_PRIORITY\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00361\ \textcolor{preprocessor}{\#if\ \_\_TBB\_COUNT\_TASK\_NODES}}
\DoxyCodeLine{00363\ }
\DoxyCodeLine{00364\ \ \ \ \ \textcolor{keywordtype}{void}\ update\_task\_node\_count(\ intptr\_t\ delta\ )\ \{\ my\_task\_node\_count\ +=\ delta;\ \}}
\DoxyCodeLine{00365\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_COUNT\_TASK\_NODES\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_GROUP\_CONTEXT}}
\DoxyCodeLine{00369\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1market_aad8860400f36b96f1410c3b76f6ab87b}{scheduler\_list\_type}}\ my\_masters;}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00374\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a9acd4f7b134e3bcd5625ce386ec7db60}{generic\_scheduler}}*\ my\_workers[1];}
\DoxyCodeLine{00375\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_TASK\_GROUP\_CONTEXT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00376\ }
\DoxyCodeLine{00377\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a42a517ad93d2a752f9e20eab9db10279}{max\_num\_workers}}()\ \{}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ global\_market\_mutex\_type::scoped\_lock\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_ae4ba85f7230a2668979009bf3b29df39}{theMarketMutex}}\ );}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a1dbc378b5e39901f1c11f2021b35688c}{theMarket}}?\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a1dbc378b5e39901f1c11f2021b35688c}{theMarket}}-\/>my\_num\_workers\_hard\_limit\ :\ 0;}
\DoxyCodeLine{00380\ \ \ \ \ \}}
\DoxyCodeLine{00381\ \};\ \textcolor{comment}{//\ class\ market}}
\DoxyCodeLine{00382\ }
\DoxyCodeLine{00383\ \}\ \textcolor{comment}{//\ namespace\ internal}}
\DoxyCodeLine{00384\ \}\ \textcolor{comment}{//\ namespace\ tbb}}
\DoxyCodeLine{00385\ }
\DoxyCodeLine{00386\ \textcolor{preprocessor}{\#if\ defined(\_MSC\_VER)\ \&\&\ defined(\_Wp64)}}
\DoxyCodeLine{00387\ \ \ \ \ \textcolor{comment}{//\ Workaround\ for\ overzealous\ compiler\ warnings\ in\ /Wp64\ mode}}
\DoxyCodeLine{00388\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ warning\ (pop)}}
\DoxyCodeLine{00389\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ warning\ 4244\ is\ back}}
\DoxyCodeLine{00390\ }
\DoxyCodeLine{00391\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_TBB\_market\_H\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
