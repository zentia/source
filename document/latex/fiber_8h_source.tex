\doxysection{fiber.\+h}
\hypertarget{fiber_8h_source}{}\label{fiber_8h_source}\index{runtime/core/fiber.h@{runtime/core/fiber.h}}
\mbox{\hyperlink{fiber_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <marl/event.h>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <marl/future.h>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <marl/waitgroup.h>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <marl/finally.h>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <luisa/core/shared\_function.h>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <luisa/core/stl/functional.h>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <luisa/core/concepts.h>}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacemarl}{marl}}\ \{}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#define\ LUISA\_MARL\_CONCAT\_(a,\ b)\ a\#\#b}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#define\ LUISA\_MARL\_CONCAT(a,\ b)\ LUISA\_MARL\_CONCAT\_(a,\ b)}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{comment}{//\ defer()\ is\ a\ macro\ to\ defer\ execution\ of\ a\ statement\ until\ the\ surrounding}}
\DoxyCodeLine{00017\ \textcolor{comment}{//\ scope\ is\ closed\ and\ is\ typically\ used\ to\ perform\ cleanup\ logic\ once\ a}}
\DoxyCodeLine{00018\ \textcolor{comment}{//\ function\ returns.}}
\DoxyCodeLine{00019\ \textcolor{comment}{//}}
\DoxyCodeLine{00020\ \textcolor{comment}{//\ Note:\ Unlike\ golang's\ defer(),\ the\ defer\ statement\ is\ executed\ when\ the}}
\DoxyCodeLine{00021\ \textcolor{comment}{//\ surrounding\ *scope*\ is\ closed,\ not\ necessarily\ the\ function.}}
\DoxyCodeLine{00022\ \textcolor{comment}{//}}
\DoxyCodeLine{00023\ \textcolor{comment}{//\ Example\ usage:}}
\DoxyCodeLine{00024\ \textcolor{comment}{//}}
\DoxyCodeLine{00025\ \textcolor{comment}{//\ \ void\ sayHelloWorld()}}
\DoxyCodeLine{00026\ \textcolor{comment}{//\ \ \{}}
\DoxyCodeLine{00027\ \textcolor{comment}{//\ \ \ \ \ \ defer(printf("{}world\(\backslash\)n"{}));}}
\DoxyCodeLine{00028\ \textcolor{comment}{//\ \ \ \ \ \ printf("{}hello\ "{});}}
\DoxyCodeLine{00029\ \textcolor{comment}{//\ \ \}}}
\DoxyCodeLine{00030\ \textcolor{comment}{//}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#define\ luisa\_fiber\_defer(...)\ \(\backslash\)}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\ \ \ \ auto\ LUISA\_MARL\_CONCAT(defer\_,\ \_\_LINE\_\_)\ =\ marl::make\_finally([\&]()\ noexcept\ \{\ \_\_VA\_ARGS\_\_;\ \})}}
\DoxyCodeLine{00033\ \}\textcolor{comment}{//\ namespace\ marl}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceluisa_1_1fiber}{luisa::fiber}}\ \{}
\DoxyCodeLine{00036\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Iter>}
\DoxyCodeLine{00037\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceluisa_1_1fiber_a04b927c638d97e1f4b8e6cb350fd6f3a}{\_advance}}(Iter\ \&\&ite,\ \textcolor{keywordtype}{size\_t}\ n)\ \{}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (\mbox{\hyperlink{conceptluisa_1_1concepts_1_1is__iterator}{luisa::concepts::is\_iterator<std::remove\_cvref\_t<Iter>}}>)\ \{}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ std::advance(ite,\ n);}
\DoxyCodeLine{00040\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ ite\ +=\ n;}
\DoxyCodeLine{00042\ \ \ \ \ \}}
\DoxyCodeLine{00043\ \}}
\DoxyCodeLine{00044\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Iter>}
\DoxyCodeLine{00045\ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespaceluisa_1_1fiber_afdff6ad0f3ceb944e7286bb7e36cd7aa}{\_distance}}(Iter\ ite,\ Iter\ last)\ \{}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (\mbox{\hyperlink{conceptluisa_1_1concepts_1_1is__iterator}{luisa::concepts::is\_iterator<std::remove\_cvref\_t<Iter>}}>)\ \{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::distance(ite,\ last);}
\DoxyCodeLine{00048\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ last\ >\ ite\ ?\ last\ -\/\ ite\ :\ ite\ -\/\ last;}
\DoxyCodeLine{00050\ \ \ \ \ \}}
\DoxyCodeLine{00051\ \}}
\DoxyCodeLine{00052\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1fiber_1_1scheduler_ad2ab3d7cbc114386405821953b64acf7}{scheduler}}\ \{}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classluisa_1_1fiber_1_1scheduler_a8519ced0d83e0d97e7923fe5b56fb717}{internal\_t}}\ =\ marl::Scheduler;}
\DoxyCodeLine{00056\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1fiber_1_1scheduler_ad2ab3d7cbc114386405821953b64acf7}{scheduler}}()\ noexcept}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classluisa_1_1fiber_1_1scheduler_a148980bf2984504170f8c1a35e3212ad}{internal}}(\mbox{\hyperlink{classluisa_1_1fiber_1_1scheduler_a8519ced0d83e0d97e7923fe5b56fb717}{internal\_t}}::Config::allCores())\ \{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1fiber_1_1scheduler_a148980bf2984504170f8c1a35e3212ad}{internal}}.bind();}
\DoxyCodeLine{00059\ \ \ \ \ \}}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classluisa_1_1fiber_1_1scheduler_a99d34c46aa190e71f79d4d70764aaf1d}{scheduler}}(\mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ thread\_count)\ noexcept}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classluisa_1_1fiber_1_1scheduler_a148980bf2984504170f8c1a35e3212ad}{internal}}(internal\_t::Config().setWorkerThreadCount(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(thread\_count)))\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1fiber_1_1scheduler_a148980bf2984504170f8c1a35e3212ad}{internal}}.bind();}
\DoxyCodeLine{00063\ \ \ \ \ \}}
\DoxyCodeLine{00064\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1fiber_1_1scheduler_a45772ea4bf32b9c5cea44cdb9aa34ec9}{scheduler}}(\mbox{\hyperlink{classluisa_1_1fiber_1_1scheduler_ad2ab3d7cbc114386405821953b64acf7}{scheduler}}\ \textcolor{keyword}{const}\ \&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00065\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1fiber_1_1scheduler_a26c0711f6f3d5995b5df5a4152230026}{scheduler}}(\mbox{\hyperlink{classluisa_1_1fiber_1_1scheduler_ad2ab3d7cbc114386405821953b64acf7}{scheduler}}\ \&\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00066\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1fiber_1_1scheduler_af6ac7ab0ff82900e64fb76d01e6a8c81}{\string~scheduler}}()\ noexcept\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1fiber_1_1scheduler_a148980bf2984504170f8c1a35e3212ad}{internal}}.unbind();}
\DoxyCodeLine{00068\ \ \ \ \ \}}
\DoxyCodeLine{00069\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00070\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1fiber_1_1scheduler_a8519ced0d83e0d97e7923fe5b56fb717}{internal\_t}}\ \mbox{\hyperlink{classluisa_1_1fiber_1_1scheduler_a148980bf2984504170f8c1a35e3212ad}{internal}};}
\DoxyCodeLine{00071\ \};}
\DoxyCodeLine{00072\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespaceluisa_1_1fiber_abec29e066dadc31c2d7175e0ff1c5d84}{counter}}\ =\ marl::WaitGroup;}
\DoxyCodeLine{00073\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespaceluisa_1_1fiber_ada8d5357e4857ee67a188f7cc9c56dd0}{lock}}\ =\ marl::lock;}
\DoxyCodeLine{00074\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespaceluisa_1_1fiber_ae839f806db3679c7528ed7f72c0365d1}{condition\_variable}}\ =\ marl::ConditionVariable;}
\DoxyCodeLine{00075\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespaceluisa_1_1fiber_a1ab4d3cd3e173b0829d752498ac66eec}{mutex}}\ =\ marl::mutex;}
\DoxyCodeLine{00076\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1fiber_1_1event_ae81907ca9d4055447ab8ef2d789c4f8c}{event}}\ \{}
\DoxyCodeLine{00077\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00078\ \ \ \ \ marl::Event\ \mbox{\hyperlink{structluisa_1_1fiber_1_1event_a6df11d32f5b286c36482e595f5ce33a2}{\_evt}};}
\DoxyCodeLine{00079\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1fiber_1_1event_ab64e5c2b0e18b629f933616669b018a3}{Mode}}\ =\ marl::Event::Mode;}
\DoxyCodeLine{00081\ \ \ \ \ \mbox{\hyperlink{structluisa_1_1fiber_1_1event_ae81907ca9d4055447ab8ef2d789c4f8c}{event}}(\mbox{\hyperlink{structluisa_1_1fiber_1_1event_ab64e5c2b0e18b629f933616669b018a3}{Mode}}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a1e71d9c196e4683cc06c4b54d53f7ef5}{mode}}\ =\ Mode::Manual,\ \textcolor{keywordtype}{bool}\ init\_signalled\ =\ \textcolor{keyword}{false})\ noexcept}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{structluisa_1_1fiber_1_1event_a6df11d32f5b286c36482e595f5ce33a2}{\_evt}}\{\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a1e71d9c196e4683cc06c4b54d53f7ef5}{mode}},\ init\_signalled\}\ \{\}}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structluisa_1_1fiber_1_1event_a5a191247766522dceb40e69dd0820c64}{signal}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structluisa_1_1fiber_1_1event_a6df11d32f5b286c36482e595f5ce33a2}{\_evt}}.signal();}
\DoxyCodeLine{00085\ \ \ \ \ \}}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{comment}{//\ signalled\ =\ false;}}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structluisa_1_1fiber_1_1event_a3c193911f84c4d56a7fe74ef9f7e72ed}{clear}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structluisa_1_1fiber_1_1event_a6df11d32f5b286c36482e595f5ce33a2}{\_evt}}.clear();}
\DoxyCodeLine{00089\ \ \ \ \ \}}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{comment}{//\ while\ (!signalled)\ \{\ \_\_wait();\ \}}}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structluisa_1_1fiber_1_1event_a7ea13787150bf47cb65642bb28a5578d}{wait}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structluisa_1_1fiber_1_1event_a6df11d32f5b286c36482e595f5ce33a2}{\_evt}}.wait();}
\DoxyCodeLine{00093\ \ \ \ \ \}}
\DoxyCodeLine{00094\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structluisa_1_1fiber_1_1event_a29ad602492b389dadc2e94fa23ed7cde}{test}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structluisa_1_1fiber_1_1event_a6df11d32f5b286c36482e595f5ce33a2}{\_evt}}.test();}
\DoxyCodeLine{00096\ \ \ \ \ \}}
\DoxyCodeLine{00097\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structluisa_1_1fiber_1_1event_a497bab5bae3bed6c70ada053e59926b4}{is\_signalled}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structluisa_1_1fiber_1_1event_a6df11d32f5b286c36482e595f5ce33a2}{\_evt}}.isSignalled();}
\DoxyCodeLine{00099\ \ \ \ \ \}}
\DoxyCodeLine{00100\ \};}
\DoxyCodeLine{00101\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00102\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespaceluisa_1_1fiber_ade0f9c58b88c65b0e9c7be95852327ff}{future}}\ =\ marl::Future<T>;}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \mbox{\hyperlink{namespaceluisa_1_1fiber_a11e5ff95cfa6d1e4f3453bb9055f9f90}{worker\_thread\_count}}()\ \{}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keywordflow}{return}\ marl::Scheduler::get()-\/>config().workerThread.count;}
\DoxyCodeLine{00106\ \}}
\DoxyCodeLine{00107\ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ F>}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keyword}{requires}(std::is\_invocable\_v<F>)}
\DoxyCodeLine{00109\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceluisa_1_1fiber_a0312cee5225449694b925b669031973f}{schedule}}(F\ \&\&f)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00110\ \ \ \ \ marl::schedule(std::forward<F>(f));}
\DoxyCodeLine{00111\ \}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ F>}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keyword}{requires}(std::is\_invocable\_v<F>)}
\DoxyCodeLine{00115\ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespaceluisa_1_1fiber_a9d91df5f51feb6ae6b84019f03242378}{async}}(F\ \&\&\mbox{\hyperlink{sugar_8h_aa2bc5aa57d417f3226228d9058ab9f20}{lambda}})\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keyword}{using\ }RetType\ =\ \textcolor{keyword}{decltype}(\mbox{\hyperlink{sugar_8h_aa2bc5aa57d417f3226228d9058ab9f20}{lambda}}());}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same\_v<RetType,\ void>)\ \{}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keyword}{event}\ evt;}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ marl::schedule([evt,\ \mbox{\hyperlink{sugar_8h_aa2bc5aa57d417f3226228d9058ab9f20}{lambda}}\ =\ std::forward<F>(\mbox{\hyperlink{sugar_8h_aa2bc5aa57d417f3226228d9058ab9f20}{lambda}})]()\ \textcolor{keyword}{mutable}\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sugar_8h_aa2bc5aa57d417f3226228d9058ab9f20}{lambda}}();}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ evt.signal();}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ evt;}
\DoxyCodeLine{00124\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1fiber_ade0f9c58b88c65b0e9c7be95852327ff}{future<RetType>}}\ evt;}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ marl::schedule([evt,\ \mbox{\hyperlink{sugar_8h_aa2bc5aa57d417f3226228d9058ab9f20}{lambda}}\ =\ std::forward<F>(\mbox{\hyperlink{sugar_8h_aa2bc5aa57d417f3226228d9058ab9f20}{lambda}})]()\ \textcolor{keyword}{mutable}\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ evt.signal(\mbox{\hyperlink{sugar_8h_aa2bc5aa57d417f3226228d9058ab9f20}{lambda}}());}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ evt;}
\DoxyCodeLine{00130\ \ \ \ \ \}}
\DoxyCodeLine{00131\ \}}
\DoxyCodeLine{00132\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedetail}{detail}}\ \{}
\DoxyCodeLine{00133\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00134\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1fiber_1_1detail_1_1_non_movable_atomic_ad724383306234458be8ee489d63fb262}{NonMovableAtomic}}\ \{}
\DoxyCodeLine{00135\ \ \ \ \ std::atomic<T>\ \mbox{\hyperlink{structluisa_1_1fiber_1_1detail_1_1_non_movable_atomic_a5132d33a2468fce0021648daf1b2fd6a}{value}};}
\DoxyCodeLine{00136\ \ \ \ \ \mbox{\hyperlink{structluisa_1_1fiber_1_1detail_1_1_non_movable_atomic_ad724383306234458be8ee489d63fb262}{NonMovableAtomic}}()\ noexcept\ =\ \mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}};}
\DoxyCodeLine{00137\ \ \ \ \ \mbox{\hyperlink{structluisa_1_1fiber_1_1detail_1_1_non_movable_atomic_ad724383306234458be8ee489d63fb262}{NonMovableAtomic}}(T\ \&\&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ noexcept\ :\ \mbox{\hyperlink{structluisa_1_1fiber_1_1detail_1_1_non_movable_atomic_a5132d33a2468fce0021648daf1b2fd6a}{value}}\{std::move(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\}\ \{\}}
\DoxyCodeLine{00138\ \ \ \ \ \mbox{\hyperlink{structluisa_1_1fiber_1_1detail_1_1_non_movable_atomic_abb1b8ff850eecc7c36c9bb570343c805}{NonMovableAtomic}}(\mbox{\hyperlink{structluisa_1_1fiber_1_1detail_1_1_non_movable_atomic_ad724383306234458be8ee489d63fb262}{NonMovableAtomic}}\ \textcolor{keyword}{const}\ \&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00139\ \ \ \ \ \mbox{\hyperlink{structluisa_1_1fiber_1_1detail_1_1_non_movable_atomic_a3da4b311a0d84963a94d0cc60c92fc3f}{NonMovableAtomic}}(\mbox{\hyperlink{structluisa_1_1fiber_1_1detail_1_1_non_movable_atomic_ad724383306234458be8ee489d63fb262}{NonMovableAtomic}}\ \&\&rhs)\ noexcept}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{structluisa_1_1fiber_1_1detail_1_1_non_movable_atomic_a5132d33a2468fce0021648daf1b2fd6a}{value}}\{rhs.value.load()\}\ \{}
\DoxyCodeLine{00141\ \ \ \ \ \}}
\DoxyCodeLine{00142\ \};}
\DoxyCodeLine{00143\ \}\textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00144\ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ F>}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keyword}{requires}(std::is\_invocable\_v<F,\ uint32\_t>)}
\DoxyCodeLine{00146\ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespaceluisa_1_1fiber_a34e9ebeeed94afe549df781bcd3a9a76}{async\_parallel}}(\mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ job\_count,\ F\ \&\&\mbox{\hyperlink{sugar_8h_aa2bc5aa57d417f3226228d9058ab9f20}{lambda}},\ \mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ internal\_jobs\ =\ 1)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keyword}{auto}\ thread\_count\ =\ std::clamp<uint32\_t>(job\_count\ /\ internal\_jobs,\ 1u,\ \mbox{\hyperlink{namespaceluisa_1_1fiber_a11e5ff95cfa6d1e4f3453bb9055f9f90}{worker\_thread\_count}}());}
\DoxyCodeLine{00148\ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1fiber_abec29e066dadc31c2d7175e0ff1c5d84}{counter}}\ evt\{thread\_count\};}
\DoxyCodeLine{00149\ \ \ \ \ luisa::SharedFunction<\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}}()>\ func\{[\mbox{\hyperlink{namespaceluisa_1_1fiber_abec29e066dadc31c2d7175e0ff1c5d84}{counter}}\ =\ \mbox{\hyperlink{structluisa_1_1fiber_1_1detail_1_1_non_movable_atomic}{detail::NonMovableAtomic<uint32\_t>}}(0),\ job\_count,\ internal\_jobs,\ evt,\ \mbox{\hyperlink{sugar_8h_aa2bc5aa57d417f3226228d9058ab9f20}{lambda}}\ =\ std::forward<F>(\mbox{\hyperlink{sugar_8h_aa2bc5aa57d417f3226228d9058ab9f20}{lambda}})]()\ \textcolor{keyword}{mutable}\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ i\ =\ 0u;}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ ((i\ =\ \mbox{\hyperlink{namespaceluisa_1_1fiber_abec29e066dadc31c2d7175e0ff1c5d84}{counter}}.value.fetch\_add(internal\_jobs))\ <\ job\_count)\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ end\ =\ std::min<uint32\_t>(i\ +\ internal\_jobs,\ job\_count);}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ v\ =\ i;\ v\ <\ end;\ ++v)\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sugar_8h_aa2bc5aa57d417f3226228d9058ab9f20}{lambda}}(v);}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ evt.done();}
\DoxyCodeLine{00158\ \ \ \ \ \}\};}
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ i\ =\ 0;\ i\ <\ thread\_count;\ ++i)\ \{}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ marl::schedule(func);}
\DoxyCodeLine{00161\ \ \ \ \ \}}
\DoxyCodeLine{00162\ \ \ \ \ \textcolor{keywordflow}{return}\ evt;}
\DoxyCodeLine{00163\ \}}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ F>}
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{keyword}{requires}(std::is\_invocable\_v<F,\ uint32\_t>)}
\DoxyCodeLine{00167\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceluisa_1_1fiber_ada17d1d1013ce5a021a02c6f06ba6ed0}{parallel}}(\mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ job\_count,\ F\ \&\&\mbox{\hyperlink{sugar_8h_aa2bc5aa57d417f3226228d9058ab9f20}{lambda}},\ \mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ internal\_jobs\ =\ 1)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{keyword}{auto}\ thread\_count\ =\ std::clamp<uint32\_t>(job\_count\ /\ internal\_jobs,\ 1u,\ \mbox{\hyperlink{namespaceluisa_1_1fiber_a11e5ff95cfa6d1e4f3453bb9055f9f90}{worker\_thread\_count}}());}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordflow}{if}\ (thread\_count\ >\ 1)\ \{}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1fiber_abec29e066dadc31c2d7175e0ff1c5d84}{counter}}\ evt\{thread\_count\};}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ luisa::SharedFunction<\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}}()>\ func\{[\mbox{\hyperlink{namespaceluisa_1_1fiber_abec29e066dadc31c2d7175e0ff1c5d84}{counter}}\ =\ \mbox{\hyperlink{structluisa_1_1fiber_1_1detail_1_1_non_movable_atomic}{detail::NonMovableAtomic<uint32\_t>}}(0),\ job\_count,\ internal\_jobs,\ evt,\ \mbox{\hyperlink{sugar_8h_aa2bc5aa57d417f3226228d9058ab9f20}{lambda}}\ =\ std::forward<F>(\mbox{\hyperlink{sugar_8h_aa2bc5aa57d417f3226228d9058ab9f20}{lambda}})]()\ \textcolor{keyword}{mutable}\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ i\ =\ 0u;}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ ((i\ =\ \mbox{\hyperlink{namespaceluisa_1_1fiber_abec29e066dadc31c2d7175e0ff1c5d84}{counter}}.value.fetch\_add(internal\_jobs))\ <\ job\_count)\ \{}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ end\ =\ std::min<uint32\_t>(i\ +\ internal\_jobs,\ job\_count);}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ v\ =\ i;\ v\ <\ end;\ ++v)\ \{}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sugar_8h_aa2bc5aa57d417f3226228d9058ab9f20}{lambda}}(v);}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ evt.done();}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \}\};}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ i\ =\ 0;\ i\ <\ thread\_count;\ ++i)\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ marl::schedule(func);}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ evt.wait();}
\DoxyCodeLine{00185\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ i\ =\ 0;\ i\ <\ job\_count;\ ++i)\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sugar_8h_aa2bc5aa57d417f3226228d9058ab9f20}{lambda}}(i);}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00189\ \ \ \ \ \}}
\DoxyCodeLine{00190\ \}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ F,\ \textcolor{keyword}{class}\ Iter>}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keyword}{requires}(std::is\_invocable\_v<F,\ Iter,\ Iter>)}
\DoxyCodeLine{00194\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceluisa_1_1fiber_ada17d1d1013ce5a021a02c6f06ba6ed0}{parallel}}(Iter\ begin,\ Iter\ end,\ \textcolor{keywordtype}{size\_t}\ batch,\ F\ f,\ \textcolor{keywordtype}{size\_t}\ inplace\_batch\_threahold\ =\ 1ull)\ \{}
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keyword}{auto}\ n\ =\ \mbox{\hyperlink{namespaceluisa_1_1fiber_afdff6ad0f3ceb944e7286bb7e36cd7aa}{\_distance}}(begin,\ end);}
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ batchCount\ =\ (n\ +\ batch\ -\/\ 1)\ /\ batch;}
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keywordflow}{if}\ (batchCount\ <\ inplace\_batch\_threahold)\ \{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ batchCount;\ ++i)\ \{}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ toAdvance\ =\ std::min((\textcolor{keywordtype}{size\_t})n,\ batch);}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ l\ =\ begin;}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ begin;}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1fiber_a04b927c638d97e1f4b8e6cb350fd6f3a}{\_advance}}(\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}},\ toAdvance);}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ n\ -\/=\ toAdvance;}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ f(l,\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}});}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ begin\ =\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}};}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00207\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ thread\_count\ =\ std::clamp<size\_t>(batchCount,\ 1u,\ std::thread::hardware\_concurrency());}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1fiber_abec29e066dadc31c2d7175e0ff1c5d84}{counter}}\ \mbox{\hyperlink{events_8c_ac6c464b0a83a481fee26175f6229c5cc}{counter}}(thread\_count);}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ luisa::SharedFunction<\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}}()>\ shared\_func\{[atomic\_fence\ =\ \mbox{\hyperlink{structluisa_1_1fiber_1_1detail_1_1_non_movable_atomic}{detail::NonMovableAtomic<size\_t>}}(0),\ \mbox{\hyperlink{namespaceluisa_1_1fiber_abec29e066dadc31c2d7175e0ff1c5d84}{counter}},\ batchCount,\ batch,\ n,\ begin,\ f\ =\ std::forward<F>(f)]()\ \textcolor{keyword}{mutable}\ \{}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ i\ =\ 0ull;}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ ((i\ =\ atomic\_fence.value.fetch\_add(1))\ <\ batchCount)\ \{}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ begin\_idx\ =\ i\ *\ batch;}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ end\_idx\ =\ std::min<size\_t>((i\ +\ 1)\ *\ batch,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(n));}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f(begin\ +\ begin\_idx,\ begin\ +\ end\_idx);}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1fiber_abec29e066dadc31c2d7175e0ff1c5d84}{counter}}.done();}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \}\};}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ thread\_count;\ ++i)\ \{}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ marl::schedule(shared\_func);}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1fiber_abec29e066dadc31c2d7175e0ff1c5d84}{counter}}.wait();}
\DoxyCodeLine{00223\ \ \ \ \ \}}
\DoxyCodeLine{00224\ \}}
\DoxyCodeLine{00225\ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ F,\ \textcolor{keyword}{class}\ Iter>}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keyword}{requires}(std::is\_invocable\_v<F,\ Iter,\ Iter>)}
\DoxyCodeLine{00227\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespaceluisa_1_1fiber_a34e9ebeeed94afe549df781bcd3a9a76}{async\_parallel}}(Iter\ begin,\ Iter\ end,\ \textcolor{keywordtype}{size\_t}\ batch,\ F\ f,\ \textcolor{keywordtype}{size\_t}\ inplace\_batch\_threahold\ =\ 1ull)\ \{}
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{keyword}{auto}\ n\ =\ \mbox{\hyperlink{namespaceluisa_1_1fiber_afdff6ad0f3ceb944e7286bb7e36cd7aa}{\_distance}}(begin,\ end);}
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ batchCount\ =\ (n\ +\ batch\ -\/\ 1)\ /\ batch;}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{keyword}{auto}\ thread\_count\ =\ std::clamp<size\_t>(batchCount,\ 1u,\ std::thread::hardware\_concurrency());}
\DoxyCodeLine{00232\ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1fiber_abec29e066dadc31c2d7175e0ff1c5d84}{counter}}\ \mbox{\hyperlink{events_8c_ac6c464b0a83a481fee26175f6229c5cc}{counter}}(thread\_count);}
\DoxyCodeLine{00233\ \ \ \ \ luisa::SharedFunction<\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}}()>\ shared\_func\{[atomic\_fence\ =\ \mbox{\hyperlink{structluisa_1_1fiber_1_1detail_1_1_non_movable_atomic}{detail::NonMovableAtomic<size\_t>}}(0),\ \mbox{\hyperlink{namespaceluisa_1_1fiber_abec29e066dadc31c2d7175e0ff1c5d84}{counter}},\ batchCount,\ batch,\ n,\ begin,\ f\ =\ std::forward<F>(f)]()\ \textcolor{keyword}{mutable}\ \{}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ i\ =\ 0ull;}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ ((i\ =\ atomic\_fence.value.fetch\_add(1))\ <\ batchCount)\ \{}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ begin\_idx\ =\ i\ *\ batch;}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ end\_idx\ =\ std::min<size\_t>((i\ +\ 1)\ *\ batch,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(n));}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ f(begin\ +\ begin\_idx,\ begin\ +\ end\_idx);}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1fiber_abec29e066dadc31c2d7175e0ff1c5d84}{counter}}.done();}
\DoxyCodeLine{00241\ \ \ \ \ \}\};}
\DoxyCodeLine{00242\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ thread\_count;\ ++i)\ \{}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ marl::schedule(shared\_func);}
\DoxyCodeLine{00244\ \ \ \ \ \}}
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceluisa_1_1fiber_abec29e066dadc31c2d7175e0ff1c5d84}{counter}};}
\DoxyCodeLine{00246\ \}}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \}\textcolor{comment}{//\ namespace\ luisa::fiber}}

\end{DoxyCode}
