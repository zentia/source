\doxysection{\+\_\+flow\+\_\+graph\+\_\+cache\+\_\+impl.\+h}
\hypertarget{__flow__graph__cache__impl_8h_source}{}\label{__flow__graph__cache__impl_8h_source}\index{external/taskflow/3rd-\/party/tbb/include/tbb/internal/\_flow\_graph\_cache\_impl.h@{external/taskflow/3rd-\/party/tbb/include/tbb/internal/\_flow\_graph\_cache\_impl.h}}
\mbox{\hyperlink{__flow__graph__cache__impl_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#ifndef\ \_\_TBB\_\_flow\_graph\_cache\_impl\_H}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#define\ \_\_TBB\_\_flow\_graph\_cache\_impl\_H}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#ifndef\ \_\_TBB\_flow\_graph\_H}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#error\ Do\ not\ \#include\ this\ internal\ file\ directly;\ use\ public\ TBB\ headers\ instead.}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{comment}{//\ included\ in\ namespace\ tbb::flow::interfaceX\ (in\ flow\_graph.h)}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinternal}{internal}}\ \{}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00029\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ M=spin\_mutex\ >}
\DoxyCodeLine{00030\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classinternal_1_1node__cache}{node\_cache}}\ \{}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classinternal_1_1node__cache_ab15071138f28f5fcdfd5f3d10c218d1a}{size\_type}};}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classinternal_1_1node__cache_a4c8e536637870d47b3cf0b99ccb3f497}{empty}}()\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\ \mbox{\hyperlink{classinternal_1_1node__cache_a299593cbf42527516c1fb6e6bd78148a}{my\_mutex}}\ );}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classinternal_1_1node__cache_aaeb97ee69e8bc4e26246d2bddf0e1d93}{internal\_empty}}();}
\DoxyCodeLine{00038\ \ \ \ \ \}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classinternal_1_1node__cache_ae6c8b74005e34d084ad32e3dd8c0f8e4}{add}}(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ )\ \{}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\ \mbox{\hyperlink{classinternal_1_1node__cache_a299593cbf42527516c1fb6e6bd78148a}{my\_mutex}}\ );}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1node__cache_a8fd5c5a1c88b70cd41a805279db889c7}{internal\_push}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{00043\ \ \ \ \ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classinternal_1_1node__cache_aeaaf9116532e4c368f3a26076703ef73}{remove}}(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ )\ \{}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\ \mbox{\hyperlink{classinternal_1_1node__cache_a299593cbf42527516c1fb6e6bd78148a}{my\_mutex}}\ );}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ \mbox{\hyperlink{classinternal_1_1node__cache_ad947424ec09375bc57277cd7f721691b}{internal\_size}}();\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ !=\ 0;\ -\/-\/\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ )\ \{}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \mbox{\hyperlink{classinternal_1_1node__cache_a3b02542afa33eb50f2ce9536ac6e3d2d}{internal\_pop}}();}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \&\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ ==\ \&\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ )\ \ \textcolor{keywordflow}{return};\ \ \textcolor{comment}{//\ only\ remove\ one\ predecessor\ per\ request}}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1node__cache_a8fd5c5a1c88b70cd41a805279db889c7}{internal\_push}}(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}});}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00052\ \ \ \ \ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classinternal_1_1node__cache_a1c5831d600bd4fdd351a03bd09ed4473}{clear}}()\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\ !\mbox{\hyperlink{classinternal_1_1node__cache_a624b48b6aa7de59af1ad3bc03dd91661}{my\_q}}.empty())\ (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}})\mbox{\hyperlink{classinternal_1_1node__cache_a624b48b6aa7de59af1ad3bc03dd91661}{my\_q}}.pop();}
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\#if\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION}}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ my\_built\_predecessors.clear();}
\DoxyCodeLine{00058\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00059\ \ \ \ \ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\#if\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keyword}{typedef}\ edge\_container<T>\ built\_predecessors\_type;}
\DoxyCodeLine{00063\ \ \ \ \ built\_predecessors\_type\ \&built\_predecessors()\ \{\ \textcolor{keywordflow}{return}\ my\_built\_predecessors;\ \}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ edge\_container<T>::edge\_list\_type\ predecessor\_list\_type;}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordtype}{void}\ internal\_add\_built\_predecessor(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ )\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\ \mbox{\hyperlink{dining__philosophers_8cpp_a526734cdc85a5961b2721d20b0357d43}{my\_mutex}}\ );}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ my\_built\_predecessors.add\_edge(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{00069\ \ \ \ \ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordtype}{void}\ internal\_delete\_built\_predecessor(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ )\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\ \mbox{\hyperlink{classinternal_1_1node__cache_a299593cbf42527516c1fb6e6bd78148a}{my\_mutex}}\ );}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ my\_built\_predecessors.delete\_edge(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{00074\ \ \ \ \ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordtype}{void}\ copy\_predecessors(\ predecessor\_list\_type\ \&\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ \{}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\ \mbox{\hyperlink{classinternal_1_1node__cache_a299593cbf42527516c1fb6e6bd78148a}{my\_mutex}}\ );}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ my\_built\_predecessors.copy\_edges(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}});}
\DoxyCodeLine{00079\ \ \ \ \ \}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ predecessor\_count()\ \{}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{classinternal_1_1node__cache_a299593cbf42527516c1fb6e6bd78148a}{my\_mutex}});}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{size\_t})(my\_built\_predecessors.edge\_count());}
\DoxyCodeLine{00084\ \ \ \ \ \}}
\DoxyCodeLine{00085\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{/*\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a52037c938e3c1b126c6277da5ca689d0}{M}}\ \mbox{\hyperlink{classinternal_1_1node__cache_a53c680744c321104604325a2ee7ffebd}{mutex\_type}};}
\DoxyCodeLine{00090\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1node__cache_a53c680744c321104604325a2ee7ffebd}{mutex\_type}}\ \mbox{\hyperlink{classinternal_1_1node__cache_a299593cbf42527516c1fb6e6bd78148a}{my\_mutex}};}
\DoxyCodeLine{00091\ \ \ \ \ std::queue<\ T\ *\ >\ \mbox{\hyperlink{classinternal_1_1node__cache_a624b48b6aa7de59af1ad3bc03dd91661}{my\_q}};}
\DoxyCodeLine{00092\ \textcolor{preprocessor}{\#if\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION}}
\DoxyCodeLine{00093\ \ \ \ \ built\_predecessors\_type\ my\_built\_predecessors;}
\DoxyCodeLine{00094\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{comment}{//\ Assumes\ lock\ is\ held}}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classinternal_1_1node__cache_aaeb97ee69e8bc4e26246d2bddf0e1d93}{internal\_empty}}(\ )\ \ \{}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classinternal_1_1node__cache_a624b48b6aa7de59af1ad3bc03dd91661}{my\_q}}.empty();}
\DoxyCodeLine{00099\ \ \ \ \ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{comment}{//\ Assumes\ lock\ is\ held}}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classinternal_1_1node__cache_ab15071138f28f5fcdfd5f3d10c218d1a}{size\_type}}\ \mbox{\hyperlink{classinternal_1_1node__cache_ad947424ec09375bc57277cd7f721691b}{internal\_size}}(\ )\ \ \{}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classinternal_1_1node__cache_a624b48b6aa7de59af1ad3bc03dd91661}{my\_q}}.size();}
\DoxyCodeLine{00104\ \ \ \ \ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{comment}{//\ Assumes\ lock\ is\ held}}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classinternal_1_1node__cache_a8fd5c5a1c88b70cd41a805279db889c7}{internal\_push}}(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ )\ \ \{}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1node__cache_a624b48b6aa7de59af1ad3bc03dd91661}{my\_q}}.push(\&\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{00109\ \ \ \ \ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{comment}{//\ Assumes\ lock\ is\ held}}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\mbox{\hyperlink{classinternal_1_1node__cache_a3b02542afa33eb50f2ce9536ac6e3d2d}{internal\_pop}}()\ \{}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ *\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ \mbox{\hyperlink{classinternal_1_1node__cache_a624b48b6aa7de59af1ad3bc03dd91661}{my\_q}}.front();}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1node__cache_a624b48b6aa7de59af1ad3bc03dd91661}{my\_q}}.pop();}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}};}
\DoxyCodeLine{00116\ \ \ \ \ \}}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \};}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00121\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ M=spin\_mutex\ >}
\DoxyCodeLine{00122\ \textcolor{preprocessor}{\#if\ \_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00123\ \textcolor{comment}{//\ TODO:\ make\ predecessor\_cache\ type\ T-\/independent\ when\ async\_msg\ becomes\ regular\ feature}}
\DoxyCodeLine{00124\ \textcolor{keyword}{class\ }predecessor\_cache\ :\ \textcolor{keyword}{public}\ node\_cache<\ untyped\_sender,\ M\ >\ \{}
\DoxyCodeLine{00125\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00126\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classinternal_1_1predecessor__cache_ac86a607a11168a1fd1843d88bd8b9b0a}{predecessor\_cache}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classinternal_1_1node__cache}{node\_cache}}<\ sender<T>,\ M\ >\ \{}
\DoxyCodeLine{00127\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00128\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a52037c938e3c1b126c6277da5ca689d0}{M}}\ \mbox{\hyperlink{classinternal_1_1predecessor__cache_a16889fe0e1f3d2ae7ab881282c32b1c3}{mutex\_type}};}
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classinternal_1_1predecessor__cache_a33e5ada3a1c4982feb05e29b213e6d85}{output\_type}};}
\DoxyCodeLine{00131\ \textcolor{preprocessor}{\#if\ \_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keyword}{typedef}\ untyped\_sender\ \mbox{\hyperlink{classinternal_1_1predecessor__cache_a27ca568c7506123ec763fffd3cb50b12}{predecessor\_type}};}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keyword}{typedef}\ untyped\_receiver\ \mbox{\hyperlink{classinternal_1_1predecessor__cache_a458b4d176b3e3c903192346245d99359}{successor\_type}};}
\DoxyCodeLine{00134\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keyword}{typedef}\ sender<output\_type>\ \mbox{\hyperlink{classinternal_1_1predecessor__cache_a27ca568c7506123ec763fffd3cb50b12}{predecessor\_type}};}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keyword}{typedef}\ receiver<output\_type>\ \mbox{\hyperlink{classinternal_1_1predecessor__cache_a458b4d176b3e3c903192346245d99359}{successor\_type}};}
\DoxyCodeLine{00137\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1predecessor__cache_ac86a607a11168a1fd1843d88bd8b9b0a}{predecessor\_cache}}(\ )\ :\ \mbox{\hyperlink{classinternal_1_1predecessor__cache_ac5c21dea1ad5499bb5877b5a5a06247d}{my\_owner}}(\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ )\ \{\ \}}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classinternal_1_1predecessor__cache_ae5178fd7e909b2f4466fed7d0e267dbb}{set\_owner}}(\ \mbox{\hyperlink{classinternal_1_1predecessor__cache_a458b4d176b3e3c903192346245d99359}{successor\_type}}\ *owner\ )\ \{\ \mbox{\hyperlink{classinternal_1_1predecessor__cache_ac5c21dea1ad5499bb5877b5a5a06247d}{my\_owner}}\ =\ owner;\ \}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classinternal_1_1predecessor__cache_a5e55ce0bcbb697c63fd211364ad306d1}{get\_item}}(\ \mbox{\hyperlink{classinternal_1_1predecessor__cache_a33e5ada3a1c4982feb05e29b213e6d85}{output\_type}}\ \&\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ )\ \{}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ msg\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1predecessor__cache_a27ca568c7506123ec763fffd3cb50b12}{predecessor\_type}}\ *\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}};}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(this-\/>\mbox{\hyperlink{classinternal_1_1node__cache_a299593cbf42527516c1fb6e6bd78148a}{my\_mutex}});}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ this-\/>\mbox{\hyperlink{classinternal_1_1node__cache_aaeb97ee69e8bc4e26246d2bddf0e1d93}{internal\_empty}}()\ )\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ src\ =\ \&this-\/>\mbox{\hyperlink{classinternal_1_1node__cache_a3b02542afa33eb50f2ce9536ac6e3d2d}{internal\_pop}}();}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Try\ to\ get\ from\ this\ sender}}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}-\/>try\_get(\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ );}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (msg\ ==\ \textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Relinquish\ ownership\ of\ the\ edge}}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classinternal_1_1predecessor__cache_ac5c21dea1ad5499bb5877b5a5a06247d}{my\_owner}})}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}-\/>register\_successor(\ *\mbox{\hyperlink{classinternal_1_1predecessor__cache_ac5c21dea1ad5499bb5877b5a5a06247d}{my\_owner}}\ );}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Retain\ ownership\ of\ the\ edge}}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classinternal_1_1node__cache_ae6c8b74005e34d084ad32e3dd8c0f8e4}{add}}(*src);}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ msg\ ==\ \textcolor{keyword}{false}\ );}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ msg;}
\DoxyCodeLine{00170\ \ \ \ \ \}}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{comment}{//\ If\ we\ are\ removing\ arcs\ (rf\_clear\_edges),\ call\ clear()\ rather\ than\ reset().}}
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classinternal_1_1predecessor__cache_ac78f563e519cd5b07c1d5f8ab3464cfd}{reset}}()\ \{}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classinternal_1_1predecessor__cache_ac5c21dea1ad5499bb5877b5a5a06247d}{my\_owner}})\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(;;)\ \{}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1predecessor__cache_a27ca568c7506123ec763fffd3cb50b12}{predecessor\_type}}\ *\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}};}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>\mbox{\hyperlink{classinternal_1_1node__cache_aaeb97ee69e8bc4e26246d2bddf0e1d93}{internal\_empty}}())\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ src\ =\ \&this-\/>\mbox{\hyperlink{classinternal_1_1node__cache_a3b02542afa33eb50f2ce9536ac6e3d2d}{internal\_pop}}();}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ src-\/>register\_successor(\ *\mbox{\hyperlink{classinternal_1_1predecessor__cache_ac5c21dea1ad5499bb5877b5a5a06247d}{my\_owner}}\ );}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00184\ \ \ \ \ \}}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \textcolor{preprocessor}{\#if\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION}}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classinternal_1_1node__cache}{node\_cache}}<\ \mbox{\hyperlink{classinternal_1_1predecessor__cache_a27ca568c7506123ec763fffd3cb50b12}{predecessor\_type}},\ \mbox{\hyperlink{test__overwrite__node_8cpp_a52037c938e3c1b126c6277da5ca689d0}{M}}\ >::my\_built\_predecessors;}
\DoxyCodeLine{00190\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00191\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1predecessor__cache_a458b4d176b3e3c903192346245d99359}{successor\_type}}\ *\mbox{\hyperlink{classinternal_1_1predecessor__cache_ac5c21dea1ad5499bb5877b5a5a06247d}{my\_owner}};}
\DoxyCodeLine{00192\ \};}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00195\ \textcolor{comment}{//\ TODO:\ make\ reservable\_predecessor\_cache\ type\ T-\/independent\ when\ async\_msg\ becomes\ regular\ feature}}
\DoxyCodeLine{00196\ \textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ M=spin\_mutex\ >}
\DoxyCodeLine{00197\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_ac6e436f55c2b5d4ca3186a4b141f904a}{reservable\_predecessor\_cache}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classinternal_1_1predecessor__cache_ac86a607a11168a1fd1843d88bd8b9b0a}{predecessor\_cache}}<\ T,\ M\ >\ \{}
\DoxyCodeLine{00198\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00199\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a52037c938e3c1b126c6277da5ca689d0}{M}}\ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_a49d80b79c76b749564d772ab4970fa91}{mutex\_type}};}
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_a93e9b1594173e6d9e6f3cdd8ccc926ce}{output\_type}};}
\DoxyCodeLine{00201\ \textcolor{preprocessor}{\#if\ \_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keyword}{typedef}\ untyped\_sender\ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_a6f2202c13e4f7bdc66d446026ce4e6a7}{predecessor\_type}};}
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keyword}{typedef}\ untyped\_receiver\ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_a14e5c337117f573557b1c76ba2a29d7d}{successor\_type}};}
\DoxyCodeLine{00204\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{keyword}{typedef}\ sender<T>\ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_a6f2202c13e4f7bdc66d446026ce4e6a7}{predecessor\_type}};}
\DoxyCodeLine{00206\ \ \ \ \ \textcolor{keyword}{typedef}\ receiver<T>\ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_a14e5c337117f573557b1c76ba2a29d7d}{successor\_type}};}
\DoxyCodeLine{00207\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_ac6e436f55c2b5d4ca3186a4b141f904a}{reservable\_predecessor\_cache}}(\ )\ :\ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_aec6fec936f6544f11e7cab62fd8c67cf}{reserved\_src}}(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{\ \}}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00211\ \ \ \ \ \textcolor{keywordtype}{bool}}
\DoxyCodeLine{00212\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_a4fc7dee657d594fca77bc9290d034df6}{try\_reserve}}(\ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_a93e9b1594173e6d9e6f3cdd8ccc926ce}{output\_type}}\ \&\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ )\ \{}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ msg\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(this-\/>\mbox{\hyperlink{classinternal_1_1node__cache_a299593cbf42527516c1fb6e6bd78148a}{my\_mutex}});}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_aec6fec936f6544f11e7cab62fd8c67cf}{reserved\_src}}\ ||\ this-\/>\mbox{\hyperlink{classinternal_1_1node__cache_aaeb97ee69e8bc4e26246d2bddf0e1d93}{internal\_empty}}()\ )}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_aec6fec936f6544f11e7cab62fd8c67cf}{reserved\_src}}\ =\ \&this-\/>\mbox{\hyperlink{classinternal_1_1node__cache_a3b02542afa33eb50f2ce9536ac6e3d2d}{internal\_pop}}();}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Try\ to\ get\ from\ this\ sender}}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_aec6fec936f6544f11e7cab62fd8c67cf}{reserved\_src}}-\/>try\_reserve(\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ );}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (msg\ ==\ \textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(this-\/>\mbox{\hyperlink{classinternal_1_1node__cache_a299593cbf42527516c1fb6e6bd78148a}{my\_mutex}});}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Relinquish\ ownership\ of\ the\ edge}}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_aec6fec936f6544f11e7cab62fd8c67cf}{reserved\_src}}-\/>register\_successor(\ *this-\/>\mbox{\hyperlink{classinternal_1_1predecessor__cache_ac5c21dea1ad5499bb5877b5a5a06247d}{my\_owner}}\ );}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_aec6fec936f6544f11e7cab62fd8c67cf}{reserved\_src}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Retain\ ownership\ of\ the\ edge}}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{benchmarks_2hetero__traversal_2graph_8hpp_a9836634ebb2ae079fb18b97205218838}{add}}(\ *\mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_aec6fec936f6544f11e7cab62fd8c67cf}{reserved\_src}}\ );}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ msg\ ==\ \textcolor{keyword}{false}\ );}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ msg;}
\DoxyCodeLine{00239\ \ \ \ \ \}}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \textcolor{keywordtype}{bool}}
\DoxyCodeLine{00242\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_a59de0d356d80e248780f6d6b4f32453e}{try\_release}}(\ )\ \{}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_aec6fec936f6544f11e7cab62fd8c67cf}{reserved\_src}}-\/>try\_release(\ );}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_aec6fec936f6544f11e7cab62fd8c67cf}{reserved\_src}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00246\ \ \ \ \ \}}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{keywordtype}{bool}}
\DoxyCodeLine{00249\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_a1abdd94e04ec88299a5f21e6a75e400d}{try\_consume}}(\ )\ \{}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_aec6fec936f6544f11e7cab62fd8c67cf}{reserved\_src}}-\/>try\_consume(\ );}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_aec6fec936f6544f11e7cab62fd8c67cf}{reserved\_src}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00253\ \ \ \ \ \}}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_adb65aefffbed4d435f1ad2089b2230e9}{reset}}(\ )\ \{}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_aec6fec936f6544f11e7cab62fd8c67cf}{reserved\_src}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1predecessor__cache_ac78f563e519cd5b07c1d5f8ab3464cfd}{predecessor\_cache<T,M>::reset}}(\ );}
\DoxyCodeLine{00258\ \ \ \ \ \}}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00260\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_a8652740afdf216f02aa85f26a3fef493}{clear}}()\ \{}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_aec6fec936f6544f11e7cab62fd8c67cf}{reserved\_src}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1node__cache_a1c5831d600bd4fdd351a03bd09ed4473}{predecessor\_cache<T,M>::clear}}();}
\DoxyCodeLine{00263\ \ \ \ \ \}}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00265\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00266\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_a6f2202c13e4f7bdc66d446026ce4e6a7}{predecessor\_type}}\ *\mbox{\hyperlink{classinternal_1_1reservable__predecessor__cache_aec6fec936f6544f11e7cab62fd8c67cf}{reserved\_src}};}
\DoxyCodeLine{00267\ \};}
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00271\ \textcolor{comment}{//\ TODO:\ make\ successor\_cache\ type\ T-\/independent\ when\ async\_msg\ becomes\ regular\ feature}}
\DoxyCodeLine{00272\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ M=spin\_rw\_mutex\ >}
\DoxyCodeLine{00273\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classinternal_1_1successor__cache_a846aed898c29c778d2f1d31c0b366d61}{successor\_cache}}\ :\ tbb::internal::no\_copy\ \{}
\DoxyCodeLine{00274\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00276\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a52037c938e3c1b126c6277da5ca689d0}{M}}\ \mbox{\hyperlink{classinternal_1_1successor__cache_a4c93f38a75f786abf222706befa71fb6}{mutex\_type}};}
\DoxyCodeLine{00277\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1successor__cache_a4c93f38a75f786abf222706befa71fb6}{mutex\_type}}\ \mbox{\hyperlink{classinternal_1_1successor__cache_a64ba6814ddb81f18e0f79fe22b5a11e3}{my\_mutex}};}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \textcolor{preprocessor}{\#if\ \_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00280\ \ \ \ \ \textcolor{keyword}{typedef}\ untyped\_receiver\ \mbox{\hyperlink{classinternal_1_1successor__cache_a47ab955bf41f9d20b56e0222a314473c}{successor\_type}};}
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{keyword}{typedef}\ untyped\_receiver\ *\mbox{\hyperlink{classinternal_1_1successor__cache_a3053a64a1c19be55d20c44c729244e46}{pointer\_type}};}
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{keyword}{typedef}\ untyped\_sender\ \mbox{\hyperlink{classinternal_1_1successor__cache_a8e783ab22a38dc89a69b777255b5b60b}{owner\_type}};}
\DoxyCodeLine{00283\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{keyword}{typedef}\ receiver<T>\ \mbox{\hyperlink{classinternal_1_1successor__cache_a47ab955bf41f9d20b56e0222a314473c}{successor\_type}};}
\DoxyCodeLine{00285\ \ \ \ \ \textcolor{keyword}{typedef}\ receiver<T>\ *\mbox{\hyperlink{classinternal_1_1successor__cache_a3053a64a1c19be55d20c44c729244e46}{pointer\_type}};}
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{keyword}{typedef}\ sender<T>\ \mbox{\hyperlink{classinternal_1_1successor__cache_a8e783ab22a38dc89a69b777255b5b60b}{owner\_type}};}
\DoxyCodeLine{00287\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00288\ \ \ \ \ \textcolor{keyword}{typedef}\ std::list<\ pointer\_type\ >\ \mbox{\hyperlink{classinternal_1_1successor__cache_a75f139095ecfd369265e965db7cad4c1}{successors\_type}};}
\DoxyCodeLine{00289\ \textcolor{preprocessor}{\#if\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION}}
\DoxyCodeLine{00290\ \ \ \ \ edge\_container<successor\_type>\ my\_built\_successors;}
\DoxyCodeLine{00291\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00292\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1successor__cache_a75f139095ecfd369265e965db7cad4c1}{successors\_type}}\ \mbox{\hyperlink{classinternal_1_1successor__cache_a2a8779b483eafea3e35fb00317e12ab9}{my\_successors}};}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00294\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1successor__cache_a8e783ab22a38dc89a69b777255b5b60b}{owner\_type}}\ *\mbox{\hyperlink{classinternal_1_1successor__cache_a7804b3694d7050307547ed4d041b2f65}{my\_owner}};}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00297\ \textcolor{preprocessor}{\#if\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION}}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ edge\_container<successor\_type>::edge\_list\_type\ successor\_list\_type;}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ edge\_container<successor\_type>\ \&built\_successors()\ \{\ \textcolor{keywordflow}{return}\ my\_built\_successors;\ \}}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{keywordtype}{void}\ internal\_add\_built\_successor(\ successor\_type\ \&\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}})\ \{}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ l(\mbox{\hyperlink{dining__philosophers_8cpp_a526734cdc85a5961b2721d20b0357d43}{my\_mutex}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ my\_built\_successors.add\_edge(\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ );}
\DoxyCodeLine{00305\ \ \ \ \ \}}
\DoxyCodeLine{00306\ }
\DoxyCodeLine{00307\ \ \ \ \ \textcolor{keywordtype}{void}\ internal\_delete\_built\_successor(\ successor\_type\ \&\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}})\ \{}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ l(\mbox{\hyperlink{dining__philosophers_8cpp_a526734cdc85a5961b2721d20b0357d43}{my\_mutex}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ my\_built\_successors.delete\_edge(\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}});}
\DoxyCodeLine{00310\ \ \ \ \ \}}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{keywordtype}{void}\ copy\_successors(\ successor\_list\_type\ \&\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ \{}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ l(\mbox{\hyperlink{dining__philosophers_8cpp_a526734cdc85a5961b2721d20b0357d43}{my\_mutex}},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ my\_built\_successors.copy\_edges(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}});}
\DoxyCodeLine{00315\ \ \ \ \ \}}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ successor\_count()\ \{}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ l(\mbox{\hyperlink{dining__philosophers_8cpp_a526734cdc85a5961b2721d20b0357d43}{my\_mutex}},\textcolor{keyword}{false});}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ my\_built\_successors.edge\_count();}
\DoxyCodeLine{00320\ \ \ \ \ \}}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00324\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1successor__cache_a846aed898c29c778d2f1d31c0b366d61}{successor\_cache}}(\ )\ :\ \mbox{\hyperlink{classinternal_1_1successor__cache_a7804b3694d7050307547ed4d041b2f65}{my\_owner}}(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{\}}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classinternal_1_1successor__cache_a2ec6428d0919075e6b6d1b3fc32b5e61}{set\_owner}}(\ \mbox{\hyperlink{classinternal_1_1successor__cache_a8e783ab22a38dc89a69b777255b5b60b}{owner\_type}}\ *owner\ )\ \{\ \mbox{\hyperlink{classinternal_1_1successor__cache_a7804b3694d7050307547ed4d041b2f65}{my\_owner}}\ =\ owner;\ \}}
\DoxyCodeLine{00327\ }
\DoxyCodeLine{00328\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classinternal_1_1successor__cache_abbc9a9a03bf971f1a8bf21c5dfbd591d}{\string~successor\_cache}}()\ \{\}}
\DoxyCodeLine{00329\ }
\DoxyCodeLine{00330\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classinternal_1_1successor__cache_a04b6f8207c338fa789465e96873c51e7}{register\_successor}}(\ \mbox{\hyperlink{classinternal_1_1successor__cache_a47ab955bf41f9d20b56e0222a314473c}{successor\_type}}\ \&\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ )\ \{}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ l(\mbox{\hyperlink{classinternal_1_1successor__cache_a64ba6814ddb81f18e0f79fe22b5a11e3}{my\_mutex}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1successor__cache_a2a8779b483eafea3e35fb00317e12ab9}{my\_successors}}.push\_back(\ \&\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ );}
\DoxyCodeLine{00333\ \ \ \ \ \}}
\DoxyCodeLine{00334\ }
\DoxyCodeLine{00335\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classinternal_1_1successor__cache_a4cb0d8b2faf5bfa55b6434682b299ac4}{remove\_successor}}(\ \mbox{\hyperlink{classinternal_1_1successor__cache_a47ab955bf41f9d20b56e0222a314473c}{successor\_type}}\ \&\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ )\ \{}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ l(\mbox{\hyperlink{classinternal_1_1successor__cache_a64ba6814ddb81f18e0f79fe22b5a11e3}{my\_mutex}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keyword}{typename}\ successors\_type::iterator\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ \mbox{\hyperlink{classinternal_1_1successor__cache_a2a8779b483eafea3e35fb00317e12ab9}{my\_successors}}.begin();}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ !=\ \mbox{\hyperlink{classinternal_1_1successor__cache_a2a8779b483eafea3e35fb00317e12ab9}{my\_successors}}.end();\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ )\ \{}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ *\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ ==\ \&\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ )\ \{}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1successor__cache_a2a8779b483eafea3e35fb00317e12ab9}{my\_successors}}.erase(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00344\ \ \ \ \ \}}
\DoxyCodeLine{00345\ }
\DoxyCodeLine{00346\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classinternal_1_1successor__cache_ad8d68ac73eab5664ea6d1828eabab01a}{empty}}()\ \{}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ l(\mbox{\hyperlink{classinternal_1_1successor__cache_a64ba6814ddb81f18e0f79fe22b5a11e3}{my\_mutex}},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classinternal_1_1successor__cache_a2a8779b483eafea3e35fb00317e12ab9}{my\_successors}}.empty();}
\DoxyCodeLine{00349\ \ \ \ \ \}}
\DoxyCodeLine{00350\ }
\DoxyCodeLine{00351\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classinternal_1_1successor__cache_a2a255683901a7e2b906bb7bf993efd3b}{clear}}()\ \{}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1successor__cache_a2a8779b483eafea3e35fb00317e12ab9}{my\_successors}}.clear();}
\DoxyCodeLine{00353\ \textcolor{preprocessor}{\#if\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION}}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ my\_built\_successors.clear();}
\DoxyCodeLine{00355\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00356\ \ \ \ \ \}}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00358\ \textcolor{preprocessor}{\#if\ !\_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00359\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ *\ \mbox{\hyperlink{classinternal_1_1successor__cache_a83b8f7235f7e4b54e7fd83ddbc2485d4}{try\_put\_task}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ =\ 0;}
\DoxyCodeLine{00360\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00361\ \ \};\ \ \textcolor{comment}{//\ successor\_cache<T>}}
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00364\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ M>}
\DoxyCodeLine{00365\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a64cb5c7526d5e026c7f4a19f282edd2d}{successor\_cache}}<\ continue\_msg,\ \mbox{\hyperlink{test__overwrite__node_8cpp_a52037c938e3c1b126c6277da5ca689d0}{M}}\ >\ :\ tbb::internal::no\_copy\ \{}
\DoxyCodeLine{00366\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00367\ }
\DoxyCodeLine{00368\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a52037c938e3c1b126c6277da5ca689d0}{M}}\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_abbdc557b42ee1ad765eb665a9f8660d0}{mutex\_type}};}
\DoxyCodeLine{00369\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_abbdc557b42ee1ad765eb665a9f8660d0}{mutex\_type}}\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a54918d1971b0e92a5f342c531e84ab78}{my\_mutex}};}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \textcolor{preprocessor}{\#if\ \_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00372\ \ \ \ \ \textcolor{keyword}{typedef}\ untyped\_receiver\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_aa7dfb46e7a57f3d8e30e82d62b3d1001}{successor\_type}};}
\DoxyCodeLine{00373\ \ \ \ \ \textcolor{keyword}{typedef}\ untyped\_receiver\ *\mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_aa9504b4a39d2f0d96e0d6581e82821a9}{pointer\_type}};}
\DoxyCodeLine{00374\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00375\ \ \ \ \ \textcolor{keyword}{typedef}\ receiver<continue\_msg>\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_aa7dfb46e7a57f3d8e30e82d62b3d1001}{successor\_type}};}
\DoxyCodeLine{00376\ \ \ \ \ \textcolor{keyword}{typedef}\ receiver<continue\_msg>\ *\mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_aa9504b4a39d2f0d96e0d6581e82821a9}{pointer\_type}};}
\DoxyCodeLine{00377\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00378\ \ \ \ \ \textcolor{keyword}{typedef}\ std::list<\ pointer\_type\ >\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a407192f2eaab2d6b18e4026301bc0eaa}{successors\_type}};}
\DoxyCodeLine{00379\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a407192f2eaab2d6b18e4026301bc0eaa}{successors\_type}}\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a32246aefdb33c80a223c79e76f620d91}{my\_successors}};}
\DoxyCodeLine{00380\ \textcolor{preprocessor}{\#if\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION}}
\DoxyCodeLine{00381\ \ \ \ \ edge\_container<successor\_type>\ my\_built\_successors;}
\DoxyCodeLine{00382\ \ \ \ \ \textcolor{keyword}{typedef}\ edge\_container<successor\_type>::edge\_list\_type\ successor\_list\_type;}
\DoxyCodeLine{00383\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00384\ }
\DoxyCodeLine{00385\ \ \ \ \ sender<continue\_msg>\ *\mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a8ef18fe31904afcffc942a8ff1e5ca95}{my\_owner}};}
\DoxyCodeLine{00386\ }
\DoxyCodeLine{00387\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00388\ }
\DoxyCodeLine{00389\ \textcolor{preprocessor}{\#if\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION}}
\DoxyCodeLine{00390\ }
\DoxyCodeLine{00391\ \ \ \ \ edge\_container<successor\_type>\ \&built\_successors()\ \{\ \textcolor{keywordflow}{return}\ my\_built\_successors;\ \}}
\DoxyCodeLine{00392\ }
\DoxyCodeLine{00393\ \ \ \ \ \textcolor{keywordtype}{void}\ internal\_add\_built\_successor(\ successor\_type\ \&\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}})\ \{}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ l(\mbox{\hyperlink{dining__philosophers_8cpp_a526734cdc85a5961b2721d20b0357d43}{my\_mutex}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ my\_built\_successors.add\_edge(\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ );}
\DoxyCodeLine{00396\ \ \ \ \ \}}
\DoxyCodeLine{00397\ }
\DoxyCodeLine{00398\ \ \ \ \ \textcolor{keywordtype}{void}\ internal\_delete\_built\_successor(\ successor\_type\ \&\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}})\ \{}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ l(\mbox{\hyperlink{dining__philosophers_8cpp_a526734cdc85a5961b2721d20b0357d43}{my\_mutex}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ my\_built\_successors.delete\_edge(\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}});}
\DoxyCodeLine{00401\ \ \ \ \ \}}
\DoxyCodeLine{00402\ }
\DoxyCodeLine{00403\ \ \ \ \ \textcolor{keywordtype}{void}\ copy\_successors(\ successor\_list\_type\ \&\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ \{}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ l(\mbox{\hyperlink{dining__philosophers_8cpp_a526734cdc85a5961b2721d20b0357d43}{my\_mutex}},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ my\_built\_successors.copy\_edges(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}});}
\DoxyCodeLine{00406\ \ \ \ \ \}}
\DoxyCodeLine{00407\ }
\DoxyCodeLine{00408\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ successor\_count()\ \{}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ l(\mbox{\hyperlink{dining__philosophers_8cpp_a526734cdc85a5961b2721d20b0357d43}{my\_mutex}},\textcolor{keyword}{false});}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ my\_built\_successors.edge\_count();}
\DoxyCodeLine{00411\ \ \ \ \ \}}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00413\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{/*\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00415\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a64cb5c7526d5e026c7f4a19f282edd2d}{successor\_cache}}(\ )\ :\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a8ef18fe31904afcffc942a8ff1e5ca95}{my\_owner}}(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{\}}
\DoxyCodeLine{00416\ }
\DoxyCodeLine{00417\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a77f87b1f9d6c3691f13cea98df370366}{set\_owner}}(\ sender<continue\_msg>\ *owner\ )\ \{\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a8ef18fe31904afcffc942a8ff1e5ca95}{my\_owner}}\ =\ owner;\ \}}
\DoxyCodeLine{00418\ }
\DoxyCodeLine{00419\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_af0e2ff974743a08f884ee2de378ce9fe}{\string~successor\_cache}}()\ \{\}}
\DoxyCodeLine{00420\ }
\DoxyCodeLine{00421\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_ae06a2d25e302adf6d43bfbbcc6c131b7}{register\_successor}}(\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_aa7dfb46e7a57f3d8e30e82d62b3d1001}{successor\_type}}\ \&\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ )\ \{}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ l(\mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a54918d1971b0e92a5f342c531e84ab78}{my\_mutex}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a32246aefdb33c80a223c79e76f620d91}{my\_successors}}.push\_back(\ \&\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ );}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a8ef18fe31904afcffc942a8ff1e5ca95}{my\_owner}}\ \&\&\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.is\_continue\_receiver()\ )\ \{}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.register\_predecessor(\ *\mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a8ef18fe31904afcffc942a8ff1e5ca95}{my\_owner}}\ );}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00427\ \ \ \ \ \}}
\DoxyCodeLine{00428\ }
\DoxyCodeLine{00429\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a1fd242fa99bab5d7ed74682556ab04d3}{remove\_successor}}(\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_aa7dfb46e7a57f3d8e30e82d62b3d1001}{successor\_type}}\ \&\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ )\ \{}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ l(\mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a54918d1971b0e92a5f342c531e84ab78}{my\_mutex}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ successors\_type::iterator\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a32246aefdb33c80a223c79e76f620d91}{my\_successors}}.begin();}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ !=\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a32246aefdb33c80a223c79e76f620d91}{my\_successors}}.end();\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ )\ \{}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ *\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ ==\ \&\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ )\ \{}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ Check\ if\ we\ need\ to\ test\ for\ continue\_receiver\ before}}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ removing\ from\ r.}}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a8ef18fe31904afcffc942a8ff1e5ca95}{my\_owner}}\ )}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.remove\_predecessor(\ *\mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a8ef18fe31904afcffc942a8ff1e5ca95}{my\_owner}}\ );}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a32246aefdb33c80a223c79e76f620d91}{my\_successors}}.erase(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00442\ \ \ \ \ \}}
\DoxyCodeLine{00443\ }
\DoxyCodeLine{00444\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a8d851dd78b681114448599abb3ec45fd}{empty}}()\ \{}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ l(\mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a54918d1971b0e92a5f342c531e84ab78}{my\_mutex}},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a32246aefdb33c80a223c79e76f620d91}{my\_successors}}.empty();}
\DoxyCodeLine{00447\ \ \ \ \ \}}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00449\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_aa0cddfc74e5b2b95e51c8c686fdb26cd}{clear}}()\ \{}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_a32246aefdb33c80a223c79e76f620d91}{my\_successors}}.clear();}
\DoxyCodeLine{00451\ \textcolor{preprocessor}{\#if\ TBB\_DEPRECATED\_FLOW\_NODE\_EXTRACTION}}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ my\_built\_successors.clear();}
\DoxyCodeLine{00453\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00454\ \ \ \ \ \}}
\DoxyCodeLine{00455\ }
\DoxyCodeLine{00456\ \textcolor{preprocessor}{\#if\ !\_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00457\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ *\ \mbox{\hyperlink{classinternal_1_1successor__cache_3_01continue__msg_00_01_m_01_4_ac19a654b57b56077cb78e4b6cbd915f1}{try\_put\_task}}(\ \textcolor{keyword}{const}\ continue\_msg\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ =\ 0;}
\DoxyCodeLine{00458\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00459\ }
\DoxyCodeLine{00460\ \};\ \ \textcolor{comment}{//\ successor\_cache<\ continue\_msg\ >}}
\DoxyCodeLine{00461\ }
\DoxyCodeLine{00463\ \textcolor{comment}{//\ TODO:\ make\ broadcast\_cache\ type\ T-\/independent\ when\ async\_msg\ becomes\ regular\ feature}}
\DoxyCodeLine{00464\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ M=spin\_rw\_mutex>}
\DoxyCodeLine{00465\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classinternal_1_1broadcast__cache_ac50e10874711805a60f794e5f6a7e367}{broadcast\_cache}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classinternal_1_1successor__cache_a846aed898c29c778d2f1d31c0b366d61}{successor\_cache}}<T,\ M>\ \{}
\DoxyCodeLine{00466\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a52037c938e3c1b126c6277da5ca689d0}{M}}\ \mbox{\hyperlink{classinternal_1_1broadcast__cache_a0f485e21e8ef326d240c8e9dd948538e}{mutex\_type}};}
\DoxyCodeLine{00467\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classinternal_1_1successor__cache_a75f139095ecfd369265e965db7cad4c1}{successor\_cache<T,M>::successors\_type}}\ \mbox{\hyperlink{classinternal_1_1broadcast__cache_a954e3d5af44be012a35df7376bf08dce}{successors\_type}};}
\DoxyCodeLine{00468\ }
\DoxyCodeLine{00469\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00470\ }
\DoxyCodeLine{00471\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1broadcast__cache_ac50e10874711805a60f794e5f6a7e367}{broadcast\_cache}}(\ )\ \{\}}
\DoxyCodeLine{00472\ }
\DoxyCodeLine{00473\ \ \ \ \ \textcolor{comment}{//\ as\ above,\ but\ call\ try\_put\_task\ instead,\ and\ return\ the\ last\ task\ we\ received\ (if\ any)}}
\DoxyCodeLine{00474\ \textcolor{preprocessor}{\#if\ \_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00475\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ X>}
\DoxyCodeLine{00476\ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ *\ try\_put\_task(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{icosphere_8cpp_a207fd5507206d307cd63f95374fcd00d}{X}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ \{}
\DoxyCodeLine{00477\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00478\ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ *\ \mbox{\hyperlink{classinternal_1_1broadcast__cache_ae45f5f74ecb2c285c0b7da917c120a0f}{try\_put\_task}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ \_\_TBB\_override\ \{}
\DoxyCodeLine{00479\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ *\ last\_task\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ upgraded\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ l(this-\/>my\_mutex,\ upgraded);}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ successors\_type::iterator\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ this-\/>my\_successors.begin();}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ !=\ this-\/>my\_successors.end()\ )\ \{}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ *new\_task\ =\ (*i)-\/>try\_put\_task(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}});}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ workaround\ for\ icc\ bug}}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \ graph\&\ graph\_ref\ =\ (*i)-\/>graph\_reference();}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \ \ \ \ last\_task\ =\ combine\_tasks(graph\_ref,\ last\_task,\ new\_task);\ \ \textcolor{comment}{//\ enqueue\ if\ necessary}}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(new\_task)\ \{}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{\ \ \textcolor{comment}{//\ failed}}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (*i)-\/>register\_predecessor(*this-\/>my\_owner)\ )\ \{}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!upgraded)\ \{}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ l.upgrade\_to\_writer();}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ upgraded\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ this-\/>my\_successors.erase(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ last\_task;}
\DoxyCodeLine{00505\ \ \ \ \ \}}
\DoxyCodeLine{00506\ }
\DoxyCodeLine{00507\ \ \ \ \ \textcolor{comment}{//\ call\ try\_put\_task\ and\ return\ list\ of\ received\ tasks}}
\DoxyCodeLine{00508\ \textcolor{preprocessor}{\#if\ \_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00509\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ X>}
\DoxyCodeLine{00510\ \ \ \ \ \textcolor{keywordtype}{bool}\ gather\_successful\_try\_puts(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{icosphere_8cpp_a207fd5507206d307cd63f95374fcd00d}{X}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}},\ task\_list\ \&tasks\ )\ \{}
\DoxyCodeLine{00511\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00512\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classinternal_1_1broadcast__cache_ae9efb6d6500603c44accdbdca4e92a3f}{gather\_successful\_try\_puts}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}},\ task\_list\ \&tasks\ )\ \{}
\DoxyCodeLine{00513\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ upgraded\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_at\_least\_one\_put\_successful\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ l(this-\/>my\_mutex,\ upgraded);}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ successors\_type::iterator\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ this-\/>my\_successors.begin();}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ !=\ this-\/>my\_successors.end()\ )\ \{}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ *\ new\_task\ =\ (*i)-\/>try\_put\_task(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}});}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(new\_task)\ \{}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(new\_task\ !=\ \mbox{\hyperlink{harness__graph_8h_a7f0430b0f8c67715b53b4e1bfedadc00}{SUCCESSFULLY\_ENQUEUED}})\ \{}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tasks.push\_back(*new\_task);}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ is\_at\_least\_one\_put\_successful\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{\ \ \textcolor{comment}{//\ failed}}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (*i)-\/>register\_predecessor(*this-\/>my\_owner)\ )\ \{}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!upgraded)\ \{}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ l.upgrade\_to\_writer();}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ upgraded\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ this-\/>my\_successors.erase(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ is\_at\_least\_one\_put\_successful;}
\DoxyCodeLine{00540\ \ \ \ \ \}}
\DoxyCodeLine{00541\ \};}
\DoxyCodeLine{00542\ }
\DoxyCodeLine{00544\ \textcolor{comment}{//\ TODO:\ make\ round\_robin\_cache\ type\ T-\/independent\ when\ async\_msg\ becomes\ regular\ feature}}
\DoxyCodeLine{00545\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ M=spin\_rw\_mutex\ >}
\DoxyCodeLine{00546\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classinternal_1_1round__robin__cache_adf2afc71e77f4fa8d12e5d5b56540445}{round\_robin\_cache}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classinternal_1_1successor__cache_a846aed898c29c778d2f1d31c0b366d61}{successor\_cache}}<T,\ M>\ \{}
\DoxyCodeLine{00547\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classinternal_1_1round__robin__cache_a3a83b5d316ab881c98f0f83600d3ea7d}{size\_type}};}
\DoxyCodeLine{00548\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a52037c938e3c1b126c6277da5ca689d0}{M}}\ \mbox{\hyperlink{classinternal_1_1round__robin__cache_ada1987a915f861304ed80c4de23c5f61}{mutex\_type}};}
\DoxyCodeLine{00549\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classinternal_1_1successor__cache_a75f139095ecfd369265e965db7cad4c1}{successor\_cache<T,M>::successors\_type}}\ \mbox{\hyperlink{classinternal_1_1round__robin__cache_a4c3adc2d85a8b02404421dcd611cac03}{successors\_type}};}
\DoxyCodeLine{00550\ }
\DoxyCodeLine{00551\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00552\ }
\DoxyCodeLine{00553\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1round__robin__cache_adf2afc71e77f4fa8d12e5d5b56540445}{round\_robin\_cache}}(\ )\ \{\}}
\DoxyCodeLine{00554\ }
\DoxyCodeLine{00555\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1round__robin__cache_a3a83b5d316ab881c98f0f83600d3ea7d}{size\_type}}\ \mbox{\hyperlink{classinternal_1_1round__robin__cache_a14da617e0bc97c288916c0fcae832e44}{size}}()\ \{}
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ l(this-\/>my\_mutex,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>my\_successors.size();}
\DoxyCodeLine{00558\ \ \ \ \ \}}
\DoxyCodeLine{00559\ }
\DoxyCodeLine{00560\ \textcolor{preprocessor}{\#if\ \_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00561\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ X>}
\DoxyCodeLine{00562\ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ *\ try\_put\_task(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{icosphere_8cpp_a207fd5507206d307cd63f95374fcd00d}{X}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ \{}
\DoxyCodeLine{00563\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00564\ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ *\mbox{\hyperlink{classinternal_1_1round__robin__cache_ae751abb695e3fa2a48c60197de5738fa}{try\_put\_task}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ \_\_TBB\_override\ \{}
\DoxyCodeLine{00565\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_PREVIEW\_ASYNC\_MSG}}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ upgraded\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ mutex\_type::scoped\_lock\ l(this-\/>my\_mutex,\ upgraded);}
\DoxyCodeLine{00568\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ successors\_type::iterator\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ this-\/>my\_successors.begin();}
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ !=\ this-\/>my\_successors.end()\ )\ \{}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ *new\_task\ =\ (*i)-\/>try\_put\_task(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}});}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ new\_task\ )\ \{}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ new\_task;}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (*i)-\/>register\_predecessor(*this-\/>my\_owner)\ )\ \{}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!upgraded)\ \{}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ l.upgrade\_to\_writer();}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ upgraded\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ this-\/>my\_successors.erase(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00587\ \ \ \ \ \}}
\DoxyCodeLine{00588\ \};}
\DoxyCodeLine{00589\ }
\DoxyCodeLine{00590\ \}\ \textcolor{comment}{//\ namespace\ internal}}
\DoxyCodeLine{00591\ }
\DoxyCodeLine{00592\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_\_flow\_graph\_cache\_impl\_H}}

\end{DoxyCode}
