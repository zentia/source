\doxysection{Ref.\+hpp}
\hypertarget{_ref_8hpp_source}{}\label{_ref_8hpp_source}\index{external/reflect-\/cpp/include/rfl/Ref.hpp@{external/reflect-\/cpp/include/rfl/Ref.hpp}}
\mbox{\hyperlink{_ref_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ RFL\_REF\_HPP\_}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ RFL\_REF\_HPP\_}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <stdexcept>}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_result_8hpp}{Result.hpp}}"{}}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacerfl}{rfl}}\ \{}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ T>}
\DoxyCodeLine{00016\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classrfl_1_1_ref_a157d7b0b3b1bc2b0833c0843bf056d04}{Ref}}\ \{}
\DoxyCodeLine{00017\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00020\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}...\ Args>}
\DoxyCodeLine{00021\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classrfl_1_1_ref_a157d7b0b3b1bc2b0833c0843bf056d04}{Ref<T>}}\ \mbox{\hyperlink{classrfl_1_1_ref_a1501cd0fd114b2dd113fb3abe974275d}{make}}(Args\&\&...\ \_args)\ \{}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classrfl_1_1_ref_a157d7b0b3b1bc2b0833c0843bf056d04}{Ref<T>}}(std::make\_shared<T>(std::forward<Args>(\_args)...));}
\DoxyCodeLine{00023\ \ \ \}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00027\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classrfl_1_1_result}{Result<Ref<T>}}>\ \mbox{\hyperlink{classrfl_1_1_ref_ad1d36670ce165928b8f91c796fe00468}{make}}(std::shared\_ptr<T>\&\&\ \_ptr)\ \{}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\_ptr)\ \{}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacerfl_a6625864c6c297dfdc3d3c3ee3181dd8c}{error}}(\textcolor{stringliteral}{"{}std::shared\_ptr\ was\ a\ nullptr."{}});}
\DoxyCodeLine{00030\ \ \ \ \ \}}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classrfl_1_1_ref_a157d7b0b3b1bc2b0833c0843bf056d04}{Ref<T>}}(std::move(\_ptr));}
\DoxyCodeLine{00032\ \ \ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00036\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classrfl_1_1_result}{Result<Ref<T>}}>\ \mbox{\hyperlink{classrfl_1_1_ref_a9ae8116e2b7dc71673e5906a7e1491cb}{make}}(\textcolor{keyword}{const}\ std::shared\_ptr<T>\&\ \_ptr)\ \{}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\_ptr)\ \{}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacerfl_a6625864c6c297dfdc3d3c3ee3181dd8c}{error}}(\textcolor{stringliteral}{"{}std::shared\_ptr\ was\ a\ nullptr."{}});}
\DoxyCodeLine{00039\ \ \ \ \ \}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classrfl_1_1_ref_a157d7b0b3b1bc2b0833c0843bf056d04}{Ref<T>}}(\_ptr);}
\DoxyCodeLine{00041\ \ \ \}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \mbox{\hyperlink{classrfl_1_1_ref_a157d7b0b3b1bc2b0833c0843bf056d04}{Ref}}()\ :\ \mbox{\hyperlink{classrfl_1_1_ref_a16be0775a3439316bcab9ca8fc2ba2f2}{ptr\_}}(\mbox{\hyperlink{namespacestd}{std}}::make\_shared<\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}>())\ \{\}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \mbox{\hyperlink{classrfl_1_1_ref_a539802b1d36e8c905aff1d437488088b}{Ref}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classrfl_1_1_ref_a157d7b0b3b1bc2b0833c0843bf056d04}{Ref<T>}}\&\ \_other)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \mbox{\hyperlink{classrfl_1_1_ref_a1f941283718488dc993ed373de6aa7ef}{Ref}}(\mbox{\hyperlink{classrfl_1_1_ref_a157d7b0b3b1bc2b0833c0843bf056d04}{Ref<T>}}\&\&\ \_other)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ U>}
\DoxyCodeLine{00050\ \ \ \mbox{\hyperlink{classrfl_1_1_ref_a528390554348294f332ad1491713cb68}{Ref}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classrfl_1_1_ref_a157d7b0b3b1bc2b0833c0843bf056d04}{Ref<U>}}\&\ \_other)\ :\ \mbox{\hyperlink{classrfl_1_1_ref_a16be0775a3439316bcab9ca8fc2ba2f2}{ptr\_}}(\_other.\mbox{\hyperlink{classrfl_1_1_ref_a9424eff3a6525ddb61c345e1bdc8de53}{ptr}}())\ \{\}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ U>}
\DoxyCodeLine{00053\ \ \ \mbox{\hyperlink{classrfl_1_1_ref_af172c5424d573d9dd82360f39c8775ad}{Ref}}(\mbox{\hyperlink{classrfl_1_1_ref_a157d7b0b3b1bc2b0833c0843bf056d04}{Ref<U>}}\&\&\ \_other)\ noexcept}
\DoxyCodeLine{00054\ \ \ \ \ \ \ :\ \mbox{\hyperlink{classrfl_1_1_ref_a16be0775a3439316bcab9ca8fc2ba2f2}{ptr\_}}(std::forward<std::shared\_ptr<U>>(\_other.ptr()))\ \{\}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \mbox{\hyperlink{classrfl_1_1_ref_a781bc5b7a8edf0ea5f639663bbd06e86}{\string~Ref}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00059\ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ \mbox{\hyperlink{classrfl_1_1_ref_a1d41e7bb68632d997dbb622165e3cb03}{get}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classrfl_1_1_ref_a16be0775a3439316bcab9ca8fc2ba2f2}{ptr\_}}.get();\ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00062\ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{classrfl_1_1_ref_aac14677c70cccf1acee8d1b299a2a668}{operator*}}()\ \{\ \textcolor{keywordflow}{return}\ *\mbox{\hyperlink{classrfl_1_1_ref_a16be0775a3439316bcab9ca8fc2ba2f2}{ptr\_}};\ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00065\ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{classrfl_1_1_ref_a53666d3cc6cc66694c34782f9b9758f6}{operator*}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ *\mbox{\hyperlink{classrfl_1_1_ref_a16be0775a3439316bcab9ca8fc2ba2f2}{ptr\_}};\ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00068\ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ \mbox{\hyperlink{classrfl_1_1_ref_a31eb2487cb78e4969363e7c60517248b}{operator-\/>}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classrfl_1_1_ref_a16be0775a3439316bcab9ca8fc2ba2f2}{ptr\_}}.get();\ \}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00071\ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ \mbox{\hyperlink{classrfl_1_1_ref_a93c6cd78ffffc73ba181c194540afbb1}{operator-\/>}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classrfl_1_1_ref_a16be0775a3439316bcab9ca8fc2ba2f2}{ptr\_}}.get();\ \}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00074\ \ \ std::shared\_ptr<T>\&\ \mbox{\hyperlink{classrfl_1_1_ref_a9424eff3a6525ddb61c345e1bdc8de53}{ptr}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classrfl_1_1_ref_a16be0775a3439316bcab9ca8fc2ba2f2}{ptr\_}};\ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00077\ \ \ \textcolor{keyword}{const}\ std::shared\_ptr<T>\&\ \mbox{\hyperlink{classrfl_1_1_ref_a183dfe1dc1851ded284acbdc9359a96b}{ptr}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classrfl_1_1_ref_a16be0775a3439316bcab9ca8fc2ba2f2}{ptr\_}};\ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00080\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ U>}
\DoxyCodeLine{00081\ \ \ \mbox{\hyperlink{classrfl_1_1_ref_a157d7b0b3b1bc2b0833c0843bf056d04}{Ref<T>}}\&\ \mbox{\hyperlink{classrfl_1_1_ref_a127bf7980db215c544bf17deca3a176a}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classrfl_1_1_ref_a157d7b0b3b1bc2b0833c0843bf056d04}{Ref<U>}}\&\ \_other)\ \{}
\DoxyCodeLine{00082\ \ \ \ \ \mbox{\hyperlink{classrfl_1_1_ref_a16be0775a3439316bcab9ca8fc2ba2f2}{ptr\_}}\ =\ \_other.\mbox{\hyperlink{classrfl_1_1_ref_a9424eff3a6525ddb61c345e1bdc8de53}{ptr}}();}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00084\ \ \ \}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00087\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ U>}
\DoxyCodeLine{00088\ \ \ \mbox{\hyperlink{classrfl_1_1_ref_a157d7b0b3b1bc2b0833c0843bf056d04}{Ref<T>}}\&\ \mbox{\hyperlink{classrfl_1_1_ref_aa53b2f3bbceafcfaf973a7e5801dabff}{operator=}}(\mbox{\hyperlink{classrfl_1_1_ref_a157d7b0b3b1bc2b0833c0843bf056d04}{Ref<U>}}\&\&\ \_other)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \mbox{\hyperlink{classrfl_1_1_ref_a16be0775a3439316bcab9ca8fc2ba2f2}{ptr\_}}\ =\ std::forward<std::shared\_ptr<U>>(\_other.ptr());}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00091\ \ \ \}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00094\ \ \ \mbox{\hyperlink{classrfl_1_1_ref_a157d7b0b3b1bc2b0833c0843bf056d04}{Ref<T>}}\&\ \mbox{\hyperlink{classrfl_1_1_ref_a2e4d1ecd82b3e5c8b821af64edc6792d}{operator=}}(\mbox{\hyperlink{classrfl_1_1_ref_a157d7b0b3b1bc2b0833c0843bf056d04}{Ref<T>}}\&\&\ \_other)\ \textcolor{keyword}{noexcept}\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00097\ \ \ \mbox{\hyperlink{classrfl_1_1_ref_a157d7b0b3b1bc2b0833c0843bf056d04}{Ref<T>}}\&\ \mbox{\hyperlink{classrfl_1_1_ref_a3a8de59ab1847cec7a326802a7c9a9a4}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classrfl_1_1_ref_a157d7b0b3b1bc2b0833c0843bf056d04}{Ref<T>}}\&\ \_other)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00101\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classrfl_1_1_ref_a8044d139ef2e5341338ecacc222aab45}{Ref}}(std::shared\_ptr<T>\&\&\ \_ptr)\ :\ \mbox{\hyperlink{classrfl_1_1_ref_a16be0775a3439316bcab9ca8fc2ba2f2}{ptr\_}}(\mbox{\hyperlink{namespacestd}{std}}::move(\_ptr))\ \{\}}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00104\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classrfl_1_1_ref_a4dbba6e57fa9e316279cf22753f22e92}{Ref}}(\textcolor{keyword}{const}\ std::shared\_ptr<T>\&\ \_ptr)\ :\ \mbox{\hyperlink{classrfl_1_1_ref_a16be0775a3439316bcab9ca8fc2ba2f2}{ptr\_}}(\_ptr)\ \{\}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00108\ \ \ std::shared\_ptr<T>\ \mbox{\hyperlink{classrfl_1_1_ref_a16be0775a3439316bcab9ca8fc2ba2f2}{ptr\_}};}
\DoxyCodeLine{00109\ \};}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00112\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class\ }\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{class}...\ Args>}
\DoxyCodeLine{00113\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacerfl_aed181c75f7cf189893248a95bb2d588e}{make\_ref}}(Args\&\&...\ \_args)\ \{}
\DoxyCodeLine{00114\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classrfl_1_1_ref_a1501cd0fd114b2dd113fb3abe974275d}{Ref<T>::make}}(std::forward<Args>(\_args)...);}
\DoxyCodeLine{00115\ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ T1,\ \textcolor{keyword}{class}\ T2>}
\DoxyCodeLine{00118\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacerfl_ad19cda50d3b8cb8baefed78f6eba799c}{operator<=>}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classrfl_1_1_ref}{Ref<T1>}}\&\ \_t1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classrfl_1_1_ref}{Ref<T2>}}\&\ \_t2)\ \{}
\DoxyCodeLine{00119\ \ \ \textcolor{keywordflow}{return}\ \_t1.\mbox{\hyperlink{classrfl_1_1_ref_a9424eff3a6525ddb61c345e1bdc8de53}{ptr}}()\ <=>\ \_t2.\mbox{\hyperlink{classrfl_1_1_ref_a9424eff3a6525ddb61c345e1bdc8de53}{ptr}}();}
\DoxyCodeLine{00120\ \}}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ CharT,\ \textcolor{keyword}{class}\ Traits,\ \textcolor{keyword}{class}\ T>}
\DoxyCodeLine{00123\ \textcolor{keyword}{inline}\ std::basic\_ostream<CharT,\ Traits>\&\ \mbox{\hyperlink{namespacerfl_a718fc274fef62eb0e7e9bdfce15cc240}{operator<<}}(}
\DoxyCodeLine{00124\ \ \ \ \ std::basic\_ostream<CharT,\ Traits>\&\ \_os,\ \textcolor{keyword}{const}\ Ref<T>\&\ \_b)\ \{}
\DoxyCodeLine{00125\ \ \ \_os\ <<\ \_b.get();}
\DoxyCodeLine{00126\ \ \ \textcolor{keywordflow}{return}\ \_os;}
\DoxyCodeLine{00127\ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \}\ \ \textcolor{comment}{//\ namespace\ rfl}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacestd}{std}}\ \{}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ T>}
\DoxyCodeLine{00134\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structhash}{hash}}<\mbox{\hyperlink{namespacerfl}{rfl}}::Ref<T>>\ \{}
\DoxyCodeLine{00135\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structstd_1_1hash_3_01rfl_1_1_ref_3_01_t_01_4_01_4_a43f0dad29bd028160a2f5e7577279bbe}{operator()}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classrfl_1_1_ref}{rfl::Ref<T>}}\&\ \_r)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structhash}{hash<shared\_ptr<T>}}>()(\_r.\mbox{\hyperlink{classrfl_1_1_ref_a9424eff3a6525ddb61c345e1bdc8de53}{ptr}}());}
\DoxyCodeLine{00137\ \ \ \}}
\DoxyCodeLine{00138\ \};}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ T>}
\DoxyCodeLine{00141\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacestd_a3acbe51b6415e9284430194bf04944e1}{swap}}(\mbox{\hyperlink{classrfl_1_1_ref}{rfl::Ref<T>}}\&\ \_r1,\ \mbox{\hyperlink{classrfl_1_1_ref}{rfl::Ref<T>}}\&\ \_r2)\ \{}
\DoxyCodeLine{00142\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacestd_a3acbe51b6415e9284430194bf04944e1}{swap}}(\_r1.\mbox{\hyperlink{classrfl_1_1_ref_a9424eff3a6525ddb61c345e1bdc8de53}{ptr}}(),\ \_r2.\mbox{\hyperlink{classrfl_1_1_ref_a9424eff3a6525ddb61c345e1bdc8de53}{ptr}}());}
\DoxyCodeLine{00143\ \}}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \}\ \ \textcolor{comment}{//\ namespace\ std}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ RFL\_REF\_HPP\_}}

\end{DoxyCode}
