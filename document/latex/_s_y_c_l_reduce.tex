\doxysection{Parallel Reduction}
\hypertarget{_s_y_c_l_reduce}{}\label{_s_y_c_l_reduce}\index{Parallel Reduction@{Parallel Reduction}}
\doxylink{classtf_1_1sycl_flow}{tf\+::sycl\+Flow} provides two template methods, \doxylink{classtf_1_1sycl_flow_acddd05832e53597ae9d30dc913d422ca}{tf\+::sycl\+Flow\+::reduce} and \doxylink{classtf_1_1sycl_flow_a7a3af92f105114b1095a2cec2ccdffbf}{tf\+::sycl\+Flow\+::uninitialized\+\_\+reduce}, for creating tasks to perform parallel reductions over a range of items.\hypertarget{_s_y_c_l_reduce_SYCLReduceItemsWithAnInitialValue}{}\doxysubsection{\texorpdfstring{Reduce Items with an Initial Value}{Reduce Items with an Initial Value}}\label{_s_y_c_l_reduce_SYCLReduceItemsWithAnInitialValue}
The reduction task created by \doxylink{classtf_1_1sycl_flow_acddd05832e53597ae9d30dc913d422ca}{tf\+::sycl\+Flow\+::reduce(\+I first, I last, T\texorpdfstring{$\ast$}{*} result, C\&\& bop)} performs parallel reduction over a range of elements specified by {\ttfamily \mbox{[}first, last)} using the binary operator {\ttfamily bop} and stores the reduced result in {\ttfamily result}. It represents the parallel execution of the following reduction loop on a SYCL device\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordflow}{while}\ (first\ !=\ last)\ \{}
\DoxyCodeLine{\ \ *\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ op(*\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}},\ *first++);}
\DoxyCodeLine{\}}

\end{DoxyCode}


The variable {\ttfamily result} participates in the reduction loop and must be initialized with an initial value. The following code performs a parallel reduction to sum all the numbers in the given range with an initial value {\ttfamily 1000}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ =\ 1000000;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int}*\ soln\ =\ sycl::malloc\_shared<int>(1);\ \ \textcolor{comment}{//\ solution}}
\DoxyCodeLine{\textcolor{keywordtype}{int}*\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}\ =\ sycl::malloc\_shared<int>(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}});\ \ \textcolor{comment}{//\ data}}
\DoxyCodeLine{}
\DoxyCodeLine{std::for\_each(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}+\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ [](\textcolor{keywordtype}{int}\&\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\{\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ =\ 1;\ \});}
\DoxyCodeLine{*soln\ =\ 1000;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ create\ a\ syclflow\ to\ perform\ parallel\ reduction\ on\ a\ SYCL\ device}}
\DoxyCodeLine{sycl::queue\ \mbox{\hyperlink{namespacequeue}{queue}};}
\DoxyCodeLine{\mbox{\hyperlink{classtf_1_1sycl_flow}{tf::syclFlow}}\ syclflow(\mbox{\hyperlink{namespacequeue}{queue}});}
\DoxyCodeLine{syclflow.reduce(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}+\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ soln,\ []\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}},\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}})\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ +\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}};\ \});}
\DoxyCodeLine{syclflow.offload();}
\DoxyCodeLine{}
\DoxyCodeLine{assert(sol\ ==\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ +\ 1000);}

\end{DoxyCode}
\hypertarget{_s_y_c_l_reduce_SYCLReduceItemsWithoutAnInitialValue}{}\doxysubsection{\texorpdfstring{Reduce Items without an Initial Value}{Reduce Items without an Initial Value}}\label{_s_y_c_l_reduce_SYCLReduceItemsWithoutAnInitialValue}
You can use \doxylink{classtf_1_1sycl_flow_a7a3af92f105114b1095a2cec2ccdffbf}{tf\+::sycl\+Flow\+::uninitialized\+\_\+reduce} to perform parallel reduction without any initial value. This method represents a parallel execution of the following reduction loop on a SYCL device that does not assum any initial value to reduce.


\begin{DoxyCode}{0}
\DoxyCodeLine{*\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ *first++;\ \ \textcolor{comment}{//\ no\ initial\ values\ participate\ in\ the\ reduction\ loop}}
\DoxyCodeLine{\textcolor{keywordflow}{while}\ (first\ !=\ last)\ \{}
\DoxyCodeLine{\ \ *\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ op(*\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}},\ *first++);}
\DoxyCodeLine{\}}

\end{DoxyCode}


The variable {\ttfamily result} is overwritten with the reduced value and no initial values participate in the reduction loop. The following code performs a parallel reduction to sum all the numbers in the given range without any initial value\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ =\ 1000000;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int}*\ soln\ =\ sycl::malloc\_shared<int>(1);\ \ \textcolor{comment}{//\ solution}}
\DoxyCodeLine{\textcolor{keywordtype}{int}*\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}\ =\ sycl::malloc\_shared<int>(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}});\ \ \textcolor{comment}{//\ data\ }}
\DoxyCodeLine{}
\DoxyCodeLine{std::for\_each(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}+\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ [](\textcolor{keywordtype}{int}\&\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\{\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ =\ 1;\ \});}
\DoxyCodeLine{*soln\ =\ 1000;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ no\ effect}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ create\ a\ syclflow\ to\ perform\ parallel\ reduction\ on\ a\ SYCL\ device}}
\DoxyCodeLine{sycl::queue\ \mbox{\hyperlink{namespacequeue}{queue}};}
\DoxyCodeLine{\mbox{\hyperlink{classtf_1_1sycl_flow}{tf::syclFlow}}\ syclflow(\mbox{\hyperlink{namespacequeue}{queue}});}
\DoxyCodeLine{syclflow.uninitialized\_reduce(}
\DoxyCodeLine{\ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}+\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ soln,\ []\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}},\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}})\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ +\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}};\ \}}
\DoxyCodeLine{);}
\DoxyCodeLine{syclflow.offload();}
\DoxyCodeLine{}
\DoxyCodeLine{assert(sol\ ==\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}});}

\end{DoxyCode}
 