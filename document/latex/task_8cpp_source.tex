\doxysection{task.\+cpp}
\hypertarget{task_8cpp_source}{}\label{task_8cpp_source}\index{external/taskflow/3rd-\/party/tbb/src/tbb/task.cpp@{external/taskflow/3rd-\/party/tbb/src/tbb/task.cpp}}
\mbox{\hyperlink{task_8cpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{comment}{//\ Do\ not\ include\ task.h\ directly.\ Use\ scheduler\_common.h\ instead}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{scheduler__common_8h}{scheduler\_common.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{governor_8h}{governor.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{scheduler_8h}{scheduler.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{itt__notify_8h}{itt\_notify.h}}"{}}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{cache__aligned__allocator_8h}{tbb/cache\_aligned\_allocator.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{partitioner_8h}{tbb/partitioner.h}}"{}}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <new>}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\ \{}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb_1_1internal}{internal}}\ \{}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00033\ \textcolor{comment}{//\ Methods\ of\ allocate\_root\_proxy}}
\DoxyCodeLine{00034\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00035\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\&\ allocate\_root\_proxy::allocate(\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ )\ \{}
\DoxyCodeLine{00036\ \ \ \ \ internal::generic\_scheduler*\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a188d8290dc0518dff25aba4dc7471d0e}{governor::local\_scheduler\_weak}}();}
\DoxyCodeLine{00037\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}},\ \textcolor{stringliteral}{"{}thread\ did\ not\ activate\ a\ task\_scheduler\_init\ object?"{}}\ );}
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_GROUP\_CONTEXT}}
\DoxyCodeLine{00039\ \ \ \ \ task\_prefix\&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}-\/>my\_innermost\_running\_task-\/>prefix();}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \mbox{\hyperlink{itt__notify_8h_a997a9ce9f28e05decac4c1baff39e5ae}{ITT\_STACK\_CREATE}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.context-\/>itt\_caller);}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{comment}{//\ New\ root\ task\ becomes\ part\ of\ the\ currently\ running\ task's\ cancellation\ context}}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}-\/>allocate\_task(\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ \mbox{\hyperlink{scheduler__common_8h_a0ef18fbe7aa93b76fd4136a153bc2e44}{\_\_TBB\_CONTEXT\_ARG}}(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.context)\ );}
\DoxyCodeLine{00045\ \}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \textcolor{keywordtype}{void}\ allocate\_root\_proxy::free(\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\&\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ )\ \{}
\DoxyCodeLine{00048\ \ \ \ \ internal::generic\_scheduler*\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a188d8290dc0518dff25aba4dc7471d0e}{governor::local\_scheduler\_weak}}();}
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}},\ \textcolor{stringliteral}{"{}thread\ does\ not\ have\ initialized\ task\_scheduler\_init\ object?"{}}\ );}
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_GROUP\_CONTEXT}}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{comment}{//\ No\ need\ to\ do\ anything\ here\ as\ long\ as\ there\ is\ no\ context\ -\/>\ task\ connection}}
\DoxyCodeLine{00052\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_TASK\_GROUP\_CONTEXT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}-\/>free\_task<\mbox{\hyperlink{namespacetbb_1_1internal_ae233ad3ab63128c255b7c1b0a2168046ad1109dd198378032b4b9fb2963d3b85d}{local\_task}}>(\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ );}
\DoxyCodeLine{00054\ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_GROUP\_CONTEXT}}
\DoxyCodeLine{00057\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00058\ \textcolor{comment}{//\ Methods\ of\ allocate\_root\_with\_context\_proxy}}
\DoxyCodeLine{00059\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00060\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\&\ allocate\_root\_with\_context\_proxy::allocate(\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00061\ \ \ \ \ internal::generic\_scheduler*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a188d8290dc0518dff25aba4dc7471d0e}{governor::local\_scheduler\_weak}}();}
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}},\ \textcolor{stringliteral}{"{}Scheduler\ auto-\/initialization\ failed?"{}}\ );}
\DoxyCodeLine{00063\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \&my\_context,\ \textcolor{stringliteral}{"{}allocate\_root(context)\ argument\ is\ a\ dereferenced\ NULL\ pointer"{}}\ );}
\DoxyCodeLine{00064\ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\&\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>allocate\_task(\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \&my\_context\ );}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{comment}{//\ Supported\ usage\ model\ prohibits\ concurrent\ initial\ binding.\ Thus\ we\ do\ not}}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{comment}{//\ need\ interlocked\ operations\ or\ fences\ to\ manipulate\ with\ my\_context.my\_kind}}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \_\_TBB\_load\_relaxed(my\_context.my\_kind)\ ==\ task\_group\_context::binding\_required\ )\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ we\ are\ in\ the\ outermost\ task\ dispatch\ loop\ of\ a\ master\ thread,\ then}}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ there\ is\ nothing\ to\ bind\ this\ context\ to,\ and\ we\ skip\ the\ binding\ part}}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ treating\ the\ context\ as\ isolated.}}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>master\_outermost\_level()\ )}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_TBB\_store\_relaxed(my\_context.my\_kind,\ task\_group\_context::isolated);}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ my\_context.bind\_to(\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ );}
\DoxyCodeLine{00075\ \ \ \ \ \}}
\DoxyCodeLine{00076\ \textcolor{preprocessor}{\#if\ \_\_TBB\_FP\_CONTEXT}}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \_\_TBB\_load\_relaxed(my\_context.my\_kind)\ ==\ task\_group\_context::isolated\ \&\&}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ !(my\_context.my\_version\_and\_traits\ \&\ task\_group\_context::fp\_settings)\ )}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ my\_context.copy\_fp\_settings(\ *\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>default\_context()\ );}
\DoxyCodeLine{00080\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00081\ \ \ \ \ \mbox{\hyperlink{itt__notify_8h_a997a9ce9f28e05decac4c1baff39e5ae}{ITT\_STACK\_CREATE}}(my\_context.itt\_caller);}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}};}
\DoxyCodeLine{00083\ \}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \textcolor{keywordtype}{void}\ allocate\_root\_with\_context\_proxy::free(\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\&\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00086\ \ \ \ \ internal::generic\_scheduler*\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a188d8290dc0518dff25aba4dc7471d0e}{governor::local\_scheduler\_weak}}();}
\DoxyCodeLine{00087\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}},\ \textcolor{stringliteral}{"{}thread\ does\ not\ have\ initialized\ task\_scheduler\_init\ object?"{}}\ );}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{comment}{//\ No\ need\ to\ do\ anything\ here\ as\ long\ as\ unbinding\ is\ performed\ by\ context\ destructor\ only.}}
\DoxyCodeLine{00089\ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}-\/>free\_task<\mbox{\hyperlink{namespacetbb_1_1internal_ae233ad3ab63128c255b7c1b0a2168046ad1109dd198378032b4b9fb2963d3b85d}{local\_task}}>(\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ );}
\DoxyCodeLine{00090\ \}}
\DoxyCodeLine{00091\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_TASK\_GROUP\_CONTEXT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00094\ \textcolor{comment}{//\ Methods\ of\ allocate\_continuation\_proxy}}
\DoxyCodeLine{00095\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00096\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\&\ allocate\_continuation\_proxy::allocate(\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00097\ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}*\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ (\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}*)\textcolor{keyword}{this};}
\DoxyCodeLine{00098\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a35e1c039fac0fa1b7d8b4f491d557a86}{assert\_task\_valid}}(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}});}
\DoxyCodeLine{00099\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a188d8290dc0518dff25aba4dc7471d0e}{governor::local\_scheduler\_weak}}();}
\DoxyCodeLine{00100\ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}*\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}\ =\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}-\/>parent();}
\DoxyCodeLine{00101\ \ \ \ \ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}-\/>prefix().parent\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>allocate\_task(\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ \mbox{\hyperlink{scheduler__common_8h_a0ef18fbe7aa93b76fd4136a153bc2e44}{\_\_TBB\_CONTEXT\_ARG}}(\mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}},\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}-\/>prefix().context)\ );}
\DoxyCodeLine{00103\ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \textcolor{keywordtype}{void}\ allocate\_continuation\_proxy::free(\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\&\ mytask\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{comment}{//\ Restore\ the\ parent\ as\ it\ was\ before\ the\ corresponding\ allocate\ was\ called.}}
\DoxyCodeLine{00107\ \ \ \ \ ((\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}*)\textcolor{keyword}{this})-\/>prefix().parent\ =\ mytask.parent();}
\DoxyCodeLine{00108\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a188d8290dc0518dff25aba4dc7471d0e}{governor::local\_scheduler\_weak}}()-\/>\mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler_a12dd37171af77214add72a973e6b71ba}{free\_task}}<\mbox{\hyperlink{namespacetbb_1_1internal_ae233ad3ab63128c255b7c1b0a2168046ad1109dd198378032b4b9fb2963d3b85d}{local\_task}}>(mytask);}
\DoxyCodeLine{00109\ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00112\ \textcolor{comment}{//\ Methods\ of\ allocate\_child\_proxy}}
\DoxyCodeLine{00113\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00114\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\&\ allocate\_child\_proxy::allocate(\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00115\ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}*\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ (\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}*)\textcolor{keyword}{this};}
\DoxyCodeLine{00116\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a35e1c039fac0fa1b7d8b4f491d557a86}{assert\_task\_valid}}(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}});}
\DoxyCodeLine{00117\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a188d8290dc0518dff25aba4dc7471d0e}{governor::local\_scheduler\_weak}}();}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>allocate\_task(\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ \mbox{\hyperlink{scheduler__common_8h_a0ef18fbe7aa93b76fd4136a153bc2e44}{\_\_TBB\_CONTEXT\_ARG}}(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}},\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}-\/>prefix().context)\ );}
\DoxyCodeLine{00119\ \}}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \textcolor{keywordtype}{void}\ allocate\_child\_proxy::free(\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\&\ mytask\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00122\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a188d8290dc0518dff25aba4dc7471d0e}{governor::local\_scheduler\_weak}}()-\/>\mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler_a12dd37171af77214add72a973e6b71ba}{free\_task}}<\mbox{\hyperlink{namespacetbb_1_1internal_ae233ad3ab63128c255b7c1b0a2168046ad1109dd198378032b4b9fb2963d3b85d}{local\_task}}>(mytask);}
\DoxyCodeLine{00123\ \}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00126\ \textcolor{comment}{//\ Methods\ of\ allocate\_additional\_child\_of\_proxy}}
\DoxyCodeLine{00127\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00128\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\&\ allocate\_additional\_child\_of\_proxy::allocate(\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00129\ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}.increment\_ref\_count();}
\DoxyCodeLine{00130\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a188d8290dc0518dff25aba4dc7471d0e}{governor::local\_scheduler\_weak}}();}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>allocate\_task(\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ \mbox{\hyperlink{scheduler__common_8h_a0ef18fbe7aa93b76fd4136a153bc2e44}{\_\_TBB\_CONTEXT\_ARG}}(\&\mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}},\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}.prefix().context)\ );}
\DoxyCodeLine{00132\ \}}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \textcolor{keywordtype}{void}\ allocate\_additional\_child\_of\_proxy::free(\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\&\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{comment}{//\ Undo\ the\ increment.\ \ We\ do\ not\ check\ the\ result\ of\ the\ fetch-\/and-\/decrement.}}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{comment}{//\ We\ could\ consider\ be\ spawning\ the\ task\ if\ the\ fetch-\/and-\/decrement\ returns\ 1.}}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{comment}{//\ But\ we\ do\ not\ know\ that\ was\ the\ programmer's\ intention.}}
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{comment}{//\ Furthermore,\ if\ it\ was\ the\ programmer's\ intention,\ the\ program\ has\ a\ fundamental}}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{comment}{//\ race\ condition\ (that\ we\ warn\ about\ in\ Reference\ manual),\ because\ the}}
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{comment}{//\ reference\ count\ might\ have\ become\ zero\ before\ the\ corresponding\ call\ to}}
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{comment}{//\ allocate\_additional\_child\_of\_proxy::allocate.}}
\DoxyCodeLine{00142\ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}.internal\_decrement\_ref\_count();}
\DoxyCodeLine{00143\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a188d8290dc0518dff25aba4dc7471d0e}{governor::local\_scheduler\_weak}}()-\/>\mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler_a12dd37171af77214add72a973e6b71ba}{free\_task}}<\mbox{\hyperlink{namespacetbb_1_1internal_ae233ad3ab63128c255b7c1b0a2168046ad1109dd198378032b4b9fb2963d3b85d}{local\_task}}>(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}});}
\DoxyCodeLine{00144\ \}}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00147\ \textcolor{comment}{//\ Support\ for\ auto\_partitioner}}
\DoxyCodeLine{00148\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00149\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{namespacetbb_1_1internal_a324a7e462a89cfba6fde8ac14d0773aa}{get\_initial\_auto\_partitioner\_divisor}}()\ \{}
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ X\_FACTOR\ =\ 4;}
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keywordflow}{return}\ X\_FACTOR\ *\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a3ee947910b77e9ab2f3c02f0d2d63c32}{governor::local\_scheduler}}()-\/>\mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler_af2b38fa415abd3f28025e96e5d27995a}{max\_threads\_in\_arena}}();}
\DoxyCodeLine{00152\ \}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00155\ \textcolor{comment}{//\ Methods\ of\ affinity\_partitioner\_base\_v3}}
\DoxyCodeLine{00156\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00157\ \textcolor{keywordtype}{void}\ affinity\_partitioner\_base\_v3::resize(\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{fft_8c_a13b942e46c2348d4cfe7bced3e905d1d}{factor}}\ )\ \{}
\DoxyCodeLine{00158\ \ \ \ \ \textcolor{comment}{//\ Check\ factor\ to\ avoid\ asking\ for\ number\ of\ workers\ while\ there\ might\ be\ no\ arena.}}
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{ittnotify__static_8h_a0ff2395a84e0714023e69b0ff3d7363b}{new\_size}}\ =\ \mbox{\hyperlink{fft_8c_a13b942e46c2348d4cfe7bced3e905d1d}{factor}}\ ?\ \mbox{\hyperlink{fft_8c_a13b942e46c2348d4cfe7bced3e905d1d}{factor}}*\mbox{\hyperlink{classtbb_1_1internal_1_1governor_a3ee947910b77e9ab2f3c02f0d2d63c32}{governor::local\_scheduler}}()-\/>\mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler_af2b38fa415abd3f28025e96e5d27995a}{max\_threads\_in\_arena}}()\ :\ 0;}
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{ittnotify__static_8h_a0ff2395a84e0714023e69b0ff3d7363b}{new\_size}}!=my\_size\ )\ \{}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ my\_array\ )\ \{}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_abd3fdd42ea716867fc95116354481b4e}{NFS\_Free}}(\ my\_array\ );}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Following\ two\ assignments\ must\ be\ done\ here\ for\ sake\ of\ exception\ safety.}}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ my\_array\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ my\_size\ =\ 0;}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{ittnotify__static_8h_a0ff2395a84e0714023e69b0ff3d7363b}{new\_size}}\ )\ \{}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ my\_array\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{namespacetbb_1_1internal_a3e3837fb3ca7bbf4cf4752c58cbed886}{affinity\_id}}*\textcolor{keyword}{>}(\mbox{\hyperlink{namespacetbb_1_1internal_a395611542e21705f49de2a06e2c88f59}{NFS\_Allocate}}(\mbox{\hyperlink{ittnotify__static_8h_a0ff2395a84e0714023e69b0ff3d7363b}{new\_size}},\textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespacetbb_1_1internal_a3e3837fb3ca7bbf4cf4752c58cbed886}{affinity\_id}}),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ ));}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ memset(\ my\_array,\ 0,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespacetbb_1_1internal_a3e3837fb3ca7bbf4cf4752c58cbed886}{affinity\_id}})*\mbox{\hyperlink{ittnotify__static_8h_a0ff2395a84e0714023e69b0ff3d7363b}{new\_size}}\ );}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ my\_size\ =\ \mbox{\hyperlink{ittnotify__static_8h_a0ff2395a84e0714023e69b0ff3d7363b}{new\_size}};}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00172\ \ \ \ \ \}}
\DoxyCodeLine{00173\ \}}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \}\ \textcolor{comment}{//\ namespace\ internal}}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \textcolor{keyword}{using\ namespace\ }tbb::internal;}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00180\ \textcolor{comment}{//\ task}}
\DoxyCodeLine{00181\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \textcolor{keywordtype}{void}\ task::internal\_set\_ref\_count(\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a78e23769680a273f948d4bd3e946fcae}{count}}\ )\ \{}
\DoxyCodeLine{00184\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a78e23769680a273f948d4bd3e946fcae}{count}}>=0,\ \textcolor{stringliteral}{"{}count\ must\ not\ be\ negative"{}}\ );}
\DoxyCodeLine{00185\ \ \ \ \ task\_prefix\ \&\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ prefix();}
\DoxyCodeLine{00186\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.ref\_count==1\ \&\&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.state==allocated\ \&\&\ self().\mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}()==\textcolor{keyword}{this}}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ ||\ !(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.extra\_state\ \&\ \mbox{\hyperlink{namespacetbb_1_1internal_a5fb219223e38c8bbcc47d7c943f48e54a2bde1985fd0827baf5dbfa4a9bc33a7f}{es\_ref\_count\_active}}),\ \textcolor{stringliteral}{"{}ref\_count\ race\ detected"{}});}
\DoxyCodeLine{00188\ \ \ \ \ \mbox{\hyperlink{itt__notify_8h_adf75d9635323cc786c012fe69ceef418}{ITT\_NOTIFY}}(\mbox{\hyperlink{ittnotify__static_8h_ac5a347b47a5603a1f30f6fbf790724b7}{sync\_releasing}},\ \&\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.ref\_count);}
\DoxyCodeLine{00189\ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.ref\_count\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a78e23769680a273f948d4bd3e946fcae}{count}};}
\DoxyCodeLine{00190\ \}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ internal::reference\_count\ task::internal\_decrement\_ref\_count()\ \{}
\DoxyCodeLine{00193\ \ \ \ \ \mbox{\hyperlink{itt__notify_8h_adf75d9635323cc786c012fe69ceef418}{ITT\_NOTIFY}}(\ \mbox{\hyperlink{ittnotify__static_8h_ac5a347b47a5603a1f30f6fbf790724b7}{sync\_releasing}},\ \&prefix().ref\_count\ );}
\DoxyCodeLine{00194\ \ \ \ \ internal::reference\_count\ k\ =\ \mbox{\hyperlink{tbb__machine_8h_a58e2509c2723ffe8c2f2a3e73059d65b}{\_\_TBB\_FetchAndDecrementWrelease}}(\ \&prefix().ref\_count\ );}
\DoxyCodeLine{00195\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ k>=1,\ \textcolor{stringliteral}{"{}task's\ reference\ count\ underflowed"{}}\ );}
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keywordflow}{if}(\ k==1\ )}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{itt__notify_8h_adf75d9635323cc786c012fe69ceef418}{ITT\_NOTIFY}}(\ sync\_acquired,\ \&prefix().ref\_count\ );}
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keywordflow}{return}\ k-\/1;}
\DoxyCodeLine{00199\ \}}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ task\&\ task::self()\ \{}
\DoxyCodeLine{00202\ \ \ \ \ generic\_scheduler\ *\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a188d8290dc0518dff25aba4dc7471d0e}{governor::local\_scheduler\_weak}}();}
\DoxyCodeLine{00203\ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}-\/>assert\_task\_pool\_valid();}
\DoxyCodeLine{00204\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}-\/>my\_innermost\_running\_task,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{keywordflow}{return}\ *\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}-\/>my\_innermost\_running\_task;}
\DoxyCodeLine{00206\ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \textcolor{keywordtype}{bool}\ task::is\_owned\_by\_current\_thread()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00210\ \}}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \textcolor{keywordtype}{void}\ interface5::internal::task\_base::destroy(\ task\&\ victim\ )\ \{}
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{comment}{//\ 1\ may\ be\ a\ guard\ reference\ for\ wait\_for\_all,\ which\ was\ not\ reset\ because}}
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{comment}{//\ of\ concurrent\_wait\ mode\ or\ because\ prepared\ root\ task\ was\ not\ actually\ used}}
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{comment}{//\ for\ spawning\ tasks\ (as\ in\ structured\_task\_group).}}
\DoxyCodeLine{00216\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ (intptr\_t)victim.prefix().ref\_count\ <=\ 1,\ \textcolor{stringliteral}{"{}Task\ being\ destroyed\ must\ not\ have\ children"{}}\ );}
\DoxyCodeLine{00217\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ victim.state()==task::allocated,\ \textcolor{stringliteral}{"{}illegal\ state\ for\ victim\ task"{}}\ );}
\DoxyCodeLine{00218\ \ \ \ \ task*\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}\ =\ victim.parent();}
\DoxyCodeLine{00219\ \ \ \ \ victim.\string~task();}
\DoxyCodeLine{00220\ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}\ )\ \{}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}-\/>state()!=task::freed\ \&\&\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}-\/>state()!=task::ready,}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}attempt\ to\ destroy\ child\ of\ running\ or\ corrupted\ parent?"{}}\ );}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 'reexecute'\ and\ 'executing'\ are\ also\ signs\ of\ a\ race\ condition,\ since\ most\ tasks}}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ set\ their\ ref\_count\ upon\ entry\ but\ "{}es\_ref\_count\_active"{}\ should\ detect\ this}}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}-\/>internal\_decrement\_ref\_count();}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Even\ if\ the\ last\ reference\ to\ *parent\ is\ removed,\ it\ should\ not\ be\ spawned\ (documented\ behavior).}}
\DoxyCodeLine{00227\ \ \ \ \ \}}
\DoxyCodeLine{00228\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a188d8290dc0518dff25aba4dc7471d0e}{governor::local\_scheduler\_weak}}()-\/>\mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler_a12dd37171af77214add72a973e6b71ba}{free\_task}}<\mbox{\hyperlink{namespacetbb_1_1internal_ae233ad3ab63128c255b7c1b0a2168046a0f3a050fefae0c29cb5ef54e594705d5}{no\_cache}}>(\ victim\ );}
\DoxyCodeLine{00229\ \}}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \textcolor{keywordtype}{void}\ task::spawn\_and\_wait\_for\_all(\ task\_list\&\ list\ )\ \{}
\DoxyCodeLine{00232\ \ \ \ \ generic\_scheduler*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a3ee947910b77e9ab2f3c02f0d2d63c32}{governor::local\_scheduler}}();}
\DoxyCodeLine{00233\ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}*\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ \mbox{\hyperlink{namespaceluisa_afbdbb20de8bb3730f578eaba0e3803b6}{list}}.first;}
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ \{}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}-\/>prefix().next!=\mbox{\hyperlink{namespaceluisa_afbdbb20de8bb3730f578eaba0e3803b6}{list}}.next\_ptr\ )}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>local\_spawn(\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}-\/>prefix().next,\ *\mbox{\hyperlink{namespaceluisa_afbdbb20de8bb3730f578eaba0e3803b6}{list}}.next\_ptr\ );}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_afbdbb20de8bb3730f578eaba0e3803b6}{list}}.clear();}
\DoxyCodeLine{00238\ \ \ \ \ \}}
\DoxyCodeLine{00239\ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>local\_wait\_for\_all(\ *\textcolor{keyword}{this},\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ );}
\DoxyCodeLine{00240\ \}}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00245\ \textcolor{keywordtype}{void}\ task::note\_affinity(\ \mbox{\hyperlink{namespacetbb_1_1internal_a3e3837fb3ca7bbf4cf4752c58cbed886}{affinity\_id}}\ )\ \{}
\DoxyCodeLine{00246\ \}}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_GROUP\_CONTEXT}}
\DoxyCodeLine{00249\ \textcolor{keywordtype}{void}\ task::change\_group\ (\ task\_group\_context\&\ ctx\ )\ \{}
\DoxyCodeLine{00250\ \ \ \ \ prefix().context\ =\ \&ctx;}
\DoxyCodeLine{00251\ \ \ \ \ internal::generic\_scheduler*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a188d8290dc0518dff25aba4dc7471d0e}{governor::local\_scheduler\_weak}}();}
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \_\_TBB\_load\_relaxed(ctx.my\_kind)\ ==\ task\_group\_context::binding\_required\ )\ \{}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ we\ are\ in\ the\ outermost\ task\ dispatch\ loop\ of\ a\ master\ thread,\ then}}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ there\ is\ nothing\ to\ bind\ this\ context\ to,\ and\ we\ skip\ the\ binding\ part}}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ treating\ the\ context\ as\ isolated.}}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>master\_outermost\_level()\ )}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_TBB\_store\_relaxed(ctx.my\_kind,\ task\_group\_context::isolated);}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ ctx.bind\_to(\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ );}
\DoxyCodeLine{00260\ \ \ \ \ \}}
\DoxyCodeLine{00261\ \textcolor{preprocessor}{\#if\ \_\_TBB\_FP\_CONTEXT}}
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \_\_TBB\_load\_relaxed(ctx.my\_kind)\ ==\ task\_group\_context::isolated\ \&\&}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ !(ctx.my\_version\_and\_traits\ \&\ task\_group\_context::fp\_settings)\ )}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ ctx.copy\_fp\_settings(\ *\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>default\_context()\ );}
\DoxyCodeLine{00265\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00266\ \ \ \ \ \mbox{\hyperlink{itt__notify_8h_a997a9ce9f28e05decac4c1baff39e5ae}{ITT\_STACK\_CREATE}}(ctx.itt\_caller);}
\DoxyCodeLine{00267\ \}}
\DoxyCodeLine{00268\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_TASK\_GROUP\_CONTEXT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \}\ \textcolor{comment}{//\ namespace\ tbb}}
\DoxyCodeLine{00271\ }

\end{DoxyCode}
