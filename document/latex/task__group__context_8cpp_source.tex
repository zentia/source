\doxysection{task\+\_\+group\+\_\+context.\+cpp}
\hypertarget{task__group__context_8cpp_source}{}\label{task__group__context_8cpp_source}\index{external/taskflow/3rd-\/party/tbb/src/tbb/task\_group\_context.cpp@{external/taskflow/3rd-\/party/tbb/src/tbb/task\_group\_context.cpp}}
\mbox{\hyperlink{task__group__context_8cpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{scheduler_8h}{scheduler.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{itt__notify_8h}{itt\_notify.h}}"{}}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\ \{}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_GROUP\_CONTEXT}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespacetbb_1_1internal}{internal}};}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00028\ \textcolor{comment}{//\ captured\_exception}}
\DoxyCodeLine{00029\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{char}*\ duplicate\_string\ (\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}\ )\ \{}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}\ )\ \{}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}}\ =\ strlen(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}})\ +\ 1;}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}\ =\ (\textcolor{keywordtype}{char}*)\mbox{\hyperlink{namespacetbb_1_1internal_a9f226bc3212761202602d0198c587b12}{allocate\_via\_handler\_v3}}(\mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}});}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ strncpy\ (\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}},\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}});}
\DoxyCodeLine{00037\ \ \ \ \ \}}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}};}
\DoxyCodeLine{00039\ \}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \mbox{\hyperlink{classtbb_1_1captured__exception_a2f37100e61c634121044679935e7025a}{captured\_exception::\string~captured\_exception}}\ ()\ throw()\ \{}
\DoxyCodeLine{00042\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1captured__exception_a0b160c0fc5d2fab90df2be96ea14088a}{clear}}();}
\DoxyCodeLine{00043\ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1captured__exception_aa72deb29316e8c08700f7e6afa4a48e8}{captured\_exception::set}}\ (\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ a\_name,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{eigen-3_83_87_2lapack_2cholesky_8cpp_a19e186475eb822b276da4b357d68140d}{info}}\ )\ \textcolor{keywordflow}{throw}()\ \{}
\DoxyCodeLine{00046\ \ \ \ \ my\_exception\_name\ =\ duplicate\_string(\ a\_name\ );}
\DoxyCodeLine{00047\ \ \ \ \ my\_exception\_info\ =\ duplicate\_string(\ \mbox{\hyperlink{eigen-3_83_87_2lapack_2cholesky_8cpp_a19e186475eb822b276da4b357d68140d}{info}}\ );}
\DoxyCodeLine{00048\ \}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1captured__exception_a0b160c0fc5d2fab90df2be96ea14088a}{captured\_exception::clear}}\ ()\ throw()\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a09c594367453cbf1ac040fc9ff8396da}{deallocate\_via\_handler\_v3}}\ (\textcolor{keyword}{const\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\mbox{\hyperlink{classtbb_1_1captured__exception_a07e6f09ae25dc56b4d495f707de6e961}{my\_exception\_name}}));}
\DoxyCodeLine{00052\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a09c594367453cbf1ac040fc9ff8396da}{deallocate\_via\_handler\_v3}}\ (\textcolor{keyword}{const\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\mbox{\hyperlink{classtbb_1_1captured__exception_afcf55a053c358a4fb00bf8f8959cafb0}{my\_exception\_info}}));}
\DoxyCodeLine{00053\ \}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \mbox{\hyperlink{classtbb_1_1captured__exception}{captured\_exception}}*\ \mbox{\hyperlink{classtbb_1_1captured__exception_a973449ac4f36eb7226abc2ae671ebe57}{captured\_exception::move}}\ ()\ throw()\ \{}
\DoxyCodeLine{00056\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1captured__exception_a56f6c51b6d4f8ce31669457ff8f0c07f}{captured\_exception}}\ *\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ =\ (\mbox{\hyperlink{classtbb_1_1captured__exception_a56f6c51b6d4f8ce31669457ff8f0c07f}{captured\_exception}}*)\mbox{\hyperlink{namespacetbb_1_1internal_a9f226bc3212761202602d0198c587b12}{allocate\_via\_handler\_v3}}(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{classtbb_1_1captured__exception_a56f6c51b6d4f8ce31669457ff8f0c07f}{captured\_exception}}));}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ )\ \{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ ::new\ (\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}})\ \mbox{\hyperlink{classtbb_1_1captured__exception_a0c8dbd9b0f01f60b0ae3e85b1b66aa5d}{captured\_exception}}();}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}-\/>my\_exception\_name\ =\ \mbox{\hyperlink{classtbb_1_1captured__exception_a07e6f09ae25dc56b4d495f707de6e961}{my\_exception\_name}};}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}-\/>my\_exception\_info\ =\ \mbox{\hyperlink{classtbb_1_1captured__exception_afcf55a053c358a4fb00bf8f8959cafb0}{my\_exception\_info}};}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}-\/>my\_dynamic\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1captured__exception_a07e6f09ae25dc56b4d495f707de6e961}{my\_exception\_name}}\ =\ \mbox{\hyperlink{classtbb_1_1captured__exception_afcf55a053c358a4fb00bf8f8959cafb0}{my\_exception\_info}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00063\ \ \ \ \ \}}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}};}
\DoxyCodeLine{00065\ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1captured__exception_abfc1220a6f9da0361082a3f3ad80cdc9}{captured\_exception::destroy}}\ ()\ throw()\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}\ (\ \mbox{\hyperlink{classtbb_1_1captured__exception_a93072917f8af2292e53758a5727bf68c}{my\_dynamic}},\ \textcolor{stringliteral}{"{}Method\ destroy\ can\ be\ used\ only\ on\ objects\ created\ by\ clone\ or\ allocate"{}}\ );}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classtbb_1_1captured__exception_a93072917f8af2292e53758a5727bf68c}{my\_dynamic}}\ )\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classtbb_1_1captured__exception_a2f37100e61c634121044679935e7025a}{captured\_exception::\string~captured\_exception}}();}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a09c594367453cbf1ac040fc9ff8396da}{deallocate\_via\_handler\_v3}}\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00072\ \ \ \ \ \}}
\DoxyCodeLine{00073\ \}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \mbox{\hyperlink{classtbb_1_1captured__exception}{captured\_exception}}*\ \mbox{\hyperlink{classtbb_1_1captured__exception_adc9065a29ce00b14295b26fdd3116078}{captured\_exception::allocate}}\ (\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ a\_name,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{eigen-3_83_87_2lapack_2cholesky_8cpp_a19e186475eb822b276da4b357d68140d}{info}}\ )\ \{}
\DoxyCodeLine{00076\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1captured__exception_a56f6c51b6d4f8ce31669457ff8f0c07f}{captured\_exception}}\ *\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ =\ (\mbox{\hyperlink{classtbb_1_1captured__exception_a56f6c51b6d4f8ce31669457ff8f0c07f}{captured\_exception}}*)\mbox{\hyperlink{namespacetbb_1_1internal_a9f226bc3212761202602d0198c587b12}{allocate\_via\_handler\_v3}}(\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classtbb_1_1captured__exception_a56f6c51b6d4f8ce31669457ff8f0c07f}{captured\_exception}})\ );}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ )\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ ::new\ (\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}})\ \mbox{\hyperlink{classtbb_1_1captured__exception_a0c8dbd9b0f01f60b0ae3e85b1b66aa5d}{captured\_exception}}(a\_name,\ \mbox{\hyperlink{eigen-3_83_87_2lapack_2cholesky_8cpp_a19e186475eb822b276da4b357d68140d}{info}});}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}-\/>my\_dynamic\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00080\ \ \ \ \ \}}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}};}
\DoxyCodeLine{00082\ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{classtbb_1_1captured__exception_a45b4beb1615dffc595b663c91bef5ed0}{captured\_exception::name}}()\ \textcolor{keyword}{const}\ throw()\ \{}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtbb_1_1captured__exception_a07e6f09ae25dc56b4d495f707de6e961}{my\_exception\_name}};}
\DoxyCodeLine{00086\ \}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{classtbb_1_1captured__exception_a6bee611f3c5b44d3ed8bda01a42563ab}{captured\_exception::what}}()\ \textcolor{keyword}{const}\ throw()\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtbb_1_1captured__exception_afcf55a053c358a4fb00bf8f8959cafb0}{my\_exception\_info}};}
\DoxyCodeLine{00090\ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00094\ \textcolor{comment}{//\ tbb\_exception\_ptr}}
\DoxyCodeLine{00095\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \textcolor{preprocessor}{\#if\ !TBB\_USE\_CAPTURED\_EXCEPTION}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb_1_1internal}{internal}}\ \{}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00102\ tbb\_exception\_ptr*\ AllocateExceptionContainer(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}\ )\ \{}
\DoxyCodeLine{00103\ \ \ \ \ tbb\_exception\_ptr\ *eptr\ =\ (tbb\_exception\_ptr*)\mbox{\hyperlink{namespacetbb_1_1internal_a9f226bc3212761202602d0198c587b12}{allocate\_via\_handler\_v3}}(\ \textcolor{keyword}{sizeof}(tbb\_exception\_ptr)\ );}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ eptr\ )}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ (eptr)\ tbb\_exception\_ptr(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}});}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keywordflow}{return}\ eptr;}
\DoxyCodeLine{00107\ \}}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ tbb\_exception\_ptr*\ tbb\_exception\_ptr::allocate\ ()\ \{}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keywordflow}{return}\ AllocateExceptionContainer(\ std::current\_exception()\ );}
\DoxyCodeLine{00111\ \}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ tbb\_exception\_ptr*\ tbb\_exception\_ptr::allocate\ (\ \textcolor{keyword}{const}\ tbb\_exception\&\ )\ \{}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keywordflow}{return}\ AllocateExceptionContainer(\ std::current\_exception()\ );}
\DoxyCodeLine{00115\ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ tbb\_exception\_ptr*\ tbb\_exception\_ptr::allocate\ (\ captured\_exception\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}\ )\ \{}
\DoxyCodeLine{00118\ \ \ \ \ tbb\_exception\_ptr\ *\mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}\ =\ AllocateExceptionContainer(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}\ );}
\DoxyCodeLine{00119\ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.destroy();}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}};}
\DoxyCodeLine{00121\ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \textcolor{keywordtype}{void}\ tbb\_exception\_ptr::destroy\ ()\ throw()\ \{}
\DoxyCodeLine{00124\ \ \ \ \ this-\/>tbb\_exception\_ptr::\string~tbb\_exception\_ptr();}
\DoxyCodeLine{00125\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a09c594367453cbf1ac040fc9ff8396da}{deallocate\_via\_handler\_v3}}\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00126\ \}}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \}\ \textcolor{comment}{//\ namespace\ internal}}
\DoxyCodeLine{00129\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ !TBB\_USE\_CAPTURED\_EXCEPTION\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00133\ \textcolor{comment}{//\ task\_group\_context}}
\DoxyCodeLine{00134\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ task\_group\_context::\string~task\_group\_context\ ()\ \{}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \_\_TBB\_load\_relaxed(my\_kind)\ ==\ binding\_completed\ )\ \{}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a14d4453f34a770b1c983c2ed38570e31}{governor::is\_set}}(my\_owner)\ )\ \{}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Local\ update\ of\ the\ context\ list}}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedetail_a0414a8c27708e113938314ad3b0dbe4c}{uintptr\_t}}\ local\_count\_snapshot\ =\ my\_owner-\/>my\_context\_state\_propagation\_epoch;}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ my\_owner-\/>my\_local\_ctx\_list\_update.store<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa73cb2e2bcb94442b8b2b72e93a76f2e5}{relaxed}}>(1);}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Prevent\ load\ of\ nonlocal\ update\ flag\ from\ being\ hoisted\ before\ the}}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ store\ to\ local\ update\ flag.}}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ atomic\_fence();}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ my\_owner-\/>my\_nonlocal\_ctx\_list\_update.load<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa73cb2e2bcb94442b8b2b72e93a76f2e5}{relaxed}}>()\ )\ \{}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1spin__mutex_1_1scoped__lock}{spin\_mutex::scoped\_lock}}\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(my\_owner-\/>my\_context\_list\_mutex);}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_node.my\_prev-\/>my\_next\ =\ my\_node.my\_next;}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_node.my\_next-\/>my\_prev\ =\ my\_node.my\_prev;}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_owner-\/>my\_local\_ctx\_list\_update.store<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa73cb2e2bcb94442b8b2b72e93a76f2e5}{relaxed}}>(0);}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_node.my\_prev-\/>my\_next\ =\ my\_node.my\_next;}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_node.my\_next-\/>my\_prev\ =\ my\_node.my\_prev;}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Release\ fence\ is\ necessary\ so\ that\ update\ of\ our\ neighbors\ in}}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ context\ list\ was\ committed\ when\ possible\ concurrent\ destroyer}}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ proceeds\ after\ local\ update\ flag\ is\ reset\ by\ the\ following\ store.}}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_owner-\/>my\_local\_ctx\_list\_update.store<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa412563418e657114a102db610f726632}{release}}>(0);}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ local\_count\_snapshot\ !=\ the\_context\_state\_propagation\_epoch\ )\ \{}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Another\ thread\ was\ propagating\ cancellation\ request\ when\ we\ removed}}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ourselves\ from\ the\ list.\ We\ must\ ensure\ that\ it\ is\ not\ accessing\ us}}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ when\ this\ destructor\ finishes.\ We'll\ be\ able\ to\ acquire\ the\ lock}}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ below\ only\ after\ the\ other\ thread\ finishes\ with\ us.}}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1spin__mutex_1_1scoped__lock}{spin\_mutex::scoped\_lock}}\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(my\_owner-\/>my\_context\_list\_mutex);}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Nonlocal\ update\ of\ the\ context\ list}}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Synchronizes\ with\ generic\_scheduler::cleanup\_local\_context\_list()}}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ evaluate\ and\ perhaps\ relax,\ or\ add\ some\ lock\ instead}}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{namespacetbb_1_1internal_a958f482f9d5f3476ca70610af5336040}{internal::as\_atomic}}(my\_kind).fetch\_and\_store(dying)\ ==\ detached\ )\ \{}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_node.my\_prev-\/>my\_next\ =\ my\_node.my\_next;}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_node.my\_next-\/>my\_prev\ =\ my\_node.my\_prev;}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//TODO:\ evaluate\ and\ perhaps\ relax}}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_owner-\/>my\_nonlocal\_ctx\_list\_update.fetch\_and\_increment<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa6a315190cf4509ec388ecb423432f36a}{full\_fence}}>();}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//TODO:\ evaluate\ and\ perhaps\ remove}}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ spin\_wait\_until\_eq(\ my\_owner-\/>my\_local\_ctx\_list\_update,\ 0\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__for_2seismic_2main_8cpp_a2a671aca47b8db55cef1dd7174adad6f}{u}}\ );}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_owner-\/>my\_context\_list\_mutex.lock();}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_node.my\_prev-\/>my\_next\ =\ my\_node.my\_next;}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_node.my\_next-\/>my\_prev\ =\ my\_node.my\_prev;}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_owner-\/>my\_context\_list\_mutex.unlock();}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//TODO:\ evaluate\ and\ perhaps\ relax}}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_owner-\/>my\_nonlocal\_ctx\_list\_update.fetch\_and\_decrement<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa6a315190cf4509ec388ecb423432f36a}{full\_fence}}>();}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00188\ \ \ \ \ \}}
\DoxyCodeLine{00189\ \textcolor{preprocessor}{\#if\ \_\_TBB\_FP\_CONTEXT}}
\DoxyCodeLine{00190\ \ \ \ \ internal::punned\_cast<cpu\_ctl\_env*>(\&my\_cpu\_ctl\_env)-\/>\string~cpu\_ctl\_env();}
\DoxyCodeLine{00191\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00192\ \ \ \ \ \mbox{\hyperlink{scheduler__common_8h_afd76b58919b61d3e37baa46d5299c6e7}{poison\_value}}(my\_version\_and\_traits);}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ my\_exception\ )}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ my\_exception-\/>destroy();}
\DoxyCodeLine{00195\ \ \ \ \ \mbox{\hyperlink{itt__notify_8h_a935256976656668744a60ab1f3916e2d}{ITT\_STACK}}(itt\_caller\ !=\ \mbox{\hyperlink{itt__notify_8h_adabcfb28ca30e2489d4a597d1e8291e3}{ITT\_CALLER\_NULL}},\ caller\_destroy,\ itt\_caller);}
\DoxyCodeLine{00196\ \}}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \textcolor{keywordtype}{void}\ task\_group\_context::init\ ()\ \{}
\DoxyCodeLine{00199\ \textcolor{preprocessor}{\#if\ DO\_ITT\_NOTIFY}}
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{comment}{//\ Check\ version\ of\ task\ group\ context\ to\ avoid\ reporting\ misleading\ identifier.}}
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keywordflow}{if}(\ (\ my\_version\_and\_traits\ \&\ version\_mask\ )\ <\ 3\ )}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ my\_name\ =\ internal::CUSTOM\_CTX;}
\DoxyCodeLine{00203\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00204\ \ \ \ \ \mbox{\hyperlink{itt__notify_8h_a240bd5a1c1efede5dda9a11a770eb38c}{ITT\_TASK\_GROUP}}(\textcolor{keyword}{this},\ my\_name,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00205\ \ \ \ \ \mbox{\hyperlink{namespacetest__select__size__t__constant_a12ee0edbd640e82e3d919b9e8fb2c586}{\_\_TBB\_STATIC\_ASSERT}}\ (\ \textcolor{keyword}{sizeof}(my\_version\_and\_traits)\ >=\ 4,\ \textcolor{stringliteral}{"{}Layout\ of\ my\_version\_and\_traits\ must\ be\ reconsidered\ on\ this\ platform"{}}\ );}
\DoxyCodeLine{00206\ \ \ \ \ \mbox{\hyperlink{namespacetest__select__size__t__constant_a12ee0edbd640e82e3d919b9e8fb2c586}{\_\_TBB\_STATIC\_ASSERT}}\ (\ \textcolor{keyword}{sizeof}(task\_group\_context)\ ==\ 2\ *\ NFS\_MaxLineSize,\ \textcolor{stringliteral}{"{}Context\ class\ has\ wrong\ size\ -\/\ check\ padding\ and\ members\ alignment"{}}\ );}
\DoxyCodeLine{00207\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}\ (\ (\mbox{\hyperlink{namespacedetail_a0414a8c27708e113938314ad3b0dbe4c}{uintptr\_t}}(\textcolor{keyword}{this})\ \&\ (\textcolor{keyword}{sizeof}(my\_cancellation\_requested)\ -\/\ 1))\ ==\ 0,\ \textcolor{stringliteral}{"{}Context\ is\ improperly\ aligned"{}}\ );}
\DoxyCodeLine{00208\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}\ (\ \_\_TBB\_load\_relaxed(my\_kind)\ ==\ isolated\ ||\ \_\_TBB\_load\_relaxed(my\_kind)\ ==\ bound,\ \textcolor{stringliteral}{"{}Context\ can\ be\ created\ only\ as\ isolated\ or\ bound"{}}\ );}
\DoxyCodeLine{00209\ \ \ \ \ my\_parent\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00210\ \ \ \ \ my\_node.my\_next\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00211\ \ \ \ \ my\_node.my\_prev\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00212\ \ \ \ \ my\_cancellation\_requested\ =\ 0;}
\DoxyCodeLine{00213\ \ \ \ \ my\_exception\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00214\ \ \ \ \ my\_owner\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00215\ \ \ \ \ my\_state\ =\ 0;}
\DoxyCodeLine{00216\ \ \ \ \ itt\_caller\ =\ \mbox{\hyperlink{itt__notify_8h_adabcfb28ca30e2489d4a597d1e8291e3}{ITT\_CALLER\_NULL}};}
\DoxyCodeLine{00217\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_PRIORITY}}
\DoxyCodeLine{00218\ \ \ \ \ my\_priority\ =\ normalized\_normal\_priority;}
\DoxyCodeLine{00219\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_TASK\_PRIORITY\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00220\ \textcolor{preprocessor}{\#if\ \_\_TBB\_FP\_CONTEXT}}
\DoxyCodeLine{00221\ \ \ \ \ \mbox{\hyperlink{namespacetest__select__size__t__constant_a12ee0edbd640e82e3d919b9e8fb2c586}{\_\_TBB\_STATIC\_ASSERT}}(\ \textcolor{keyword}{sizeof}(my\_cpu\_ctl\_env)\ ==\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{eabase_8h_aaa5d1cd013383c889537491c3cfd9aad}{internal::uint64\_t}}),\ \textcolor{stringliteral}{"{}The\ reserved\ space\ for\ FPU\ settings\ are\ not\ equal\ sizeof(uint64\_t)"{}}\ );}
\DoxyCodeLine{00222\ \ \ \ \ \mbox{\hyperlink{namespacetest__select__size__t__constant_a12ee0edbd640e82e3d919b9e8fb2c586}{\_\_TBB\_STATIC\_ASSERT}}(\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env}{cpu\_ctl\_env}})\ <=\ \textcolor{keyword}{sizeof}(my\_cpu\_ctl\_env),\ \textcolor{stringliteral}{"{}FPU\ settings\ storage\ does\ not\ fit\ to\ uint64\_t"{}}\ );}
\DoxyCodeLine{00223\ \ \ \ \ \mbox{\hyperlink{namespacerml_1_1internal_acf3df9c7e1c2baec44e3dab2d8f1ee42}{suppress\_unused\_warning}}(\ my\_cpu\_ctl\_env.space\ );}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env}{cpu\_ctl\_env}}\ \&ctl\ =\ *internal::punned\_cast<cpu\_ctl\_env*>(\&my\_cpu\_ctl\_env);}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keyword}{new}\ (\ \&ctl\ )\ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env}{cpu\_ctl\_env}};}
\DoxyCodeLine{00227\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ my\_version\_and\_traits\ \&\ fp\_settings\ )}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ ctl.\mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env_aaa8736f85328446abb0d9b75a031a12d}{get\_env}}();}
\DoxyCodeLine{00229\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00230\ \}}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \textcolor{keywordtype}{void}\ task\_group\_context::register\_with\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}\ *local\_sched\ )\ \{}
\DoxyCodeLine{00233\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ local\_sched,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00234\ \ \ \ \ my\_owner\ =\ local\_sched;}
\DoxyCodeLine{00235\ \ \ \ \ \textcolor{comment}{//\ state\ propagation\ logic\ assumes\ new\ contexts\ are\ bound\ to\ head\ of\ the\ list}}
\DoxyCodeLine{00236\ \ \ \ \ my\_node.my\_prev\ =\ \&local\_sched-\/>my\_context\_list\_head;}
\DoxyCodeLine{00237\ \ \ \ \ \textcolor{comment}{//\ Notify\ threads\ that\ may\ be\ concurrently\ destroying\ contexts\ registered}}
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{comment}{//\ in\ this\ scheduler's\ list\ that\ local\ list\ update\ is\ underway.}}
\DoxyCodeLine{00239\ \ \ \ \ local\_sched-\/>my\_local\_ctx\_list\_update.store<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa73cb2e2bcb94442b8b2b72e93a76f2e5}{relaxed}}>(1);}
\DoxyCodeLine{00240\ \ \ \ \ \textcolor{comment}{//\ Prevent\ load\ of\ global\ propagation\ epoch\ counter\ from\ being\ hoisted\ before}}
\DoxyCodeLine{00241\ \ \ \ \ \textcolor{comment}{//\ speculative\ stores\ above,\ as\ well\ as\ load\ of\ nonlocal\ update\ flag\ from}}
\DoxyCodeLine{00242\ \ \ \ \ \textcolor{comment}{//\ being\ hoisted\ before\ the\ store\ to\ local\ update\ flag.}}
\DoxyCodeLine{00243\ \ \ \ \ atomic\_fence();}
\DoxyCodeLine{00244\ \ \ \ \ \textcolor{comment}{//\ Finalize\ local\ context\ list\ update}}
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ local\_sched-\/>my\_nonlocal\_ctx\_list\_update.load<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa73cb2e2bcb94442b8b2b72e93a76f2e5}{relaxed}}>()\ )\ \{}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1spin__mutex_1_1scoped__lock}{spin\_mutex::scoped\_lock}}\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(my\_owner-\/>my\_context\_list\_mutex);}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ local\_sched-\/>my\_context\_list\_head.my\_next-\/>my\_prev\ =\ \&my\_node;}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ my\_node.my\_next\ =\ local\_sched-\/>my\_context\_list\_head.my\_next;}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ my\_owner-\/>my\_local\_ctx\_list\_update.store<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa73cb2e2bcb94442b8b2b72e93a76f2e5}{relaxed}}>(0);}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ local\_sched-\/>my\_context\_list\_head.my\_next\ =\ \&my\_node;}
\DoxyCodeLine{00251\ \ \ \ \ \}}
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ local\_sched-\/>my\_context\_list\_head.my\_next-\/>my\_prev\ =\ \&my\_node;}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ my\_node.my\_next\ =\ local\_sched-\/>my\_context\_list\_head.my\_next;}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ my\_owner-\/>my\_local\_ctx\_list\_update.store<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa412563418e657114a102db610f726632}{release}}>(0);}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Thread-\/local\ list\ of\ contexts\ allows\ concurrent\ traversal\ by\ another\ thread}}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ while\ propagating\ state\ change.\ To\ ensure\ visibility\ of\ my\_node's\ members}}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ to\ the\ concurrently\ traversing\ thread,\ the\ list's\ head\ is\ updated\ by\ means}}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ of\ store-\/with-\/release.}}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \_\_TBB\_store\_with\_release(local\_sched-\/>my\_context\_list\_head.my\_next,\ \&my\_node);}
\DoxyCodeLine{00261\ \ \ \ \ \}}
\DoxyCodeLine{00262\ \}}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00264\ \textcolor{keywordtype}{void}\ task\_group\_context::bind\_to\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}\ *local\_sched\ )\ \{}
\DoxyCodeLine{00265\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}\ (\ \_\_TBB\_load\_relaxed(my\_kind)\ ==\ binding\_required,\ \textcolor{stringliteral}{"{}Already\ bound\ or\ isolated?"{}}\ );}
\DoxyCodeLine{00266\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}\ (\ !my\_parent,\ \textcolor{stringliteral}{"{}Parent\ is\ set\ before\ initial\ binding"{}}\ );}
\DoxyCodeLine{00267\ \ \ \ \ my\_parent\ =\ local\_sched-\/>my\_innermost\_running\_task-\/>prefix().context;}
\DoxyCodeLine{00268\ \textcolor{preprocessor}{\#if\ \_\_TBB\_FP\_CONTEXT}}
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{comment}{//\ Inherit\ FPU\ settings\ only\ if\ the\ context\ has\ not\ captured\ FPU\ settings\ yet.}}
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !(my\_version\_and\_traits\ \&\ fp\_settings)\ )}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ copy\_fp\_settings(*my\_parent);}
\DoxyCodeLine{00272\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{comment}{//\ Condition\ below\ prevents\ unnecessary\ thrashing\ parent\ context's\ cache\ line}}
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !(my\_parent-\/>my\_state\ \&\ may\_have\_children)\ )}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ my\_parent-\/>my\_state\ |=\ may\_have\_children;\ \textcolor{comment}{//\ full\ fence\ is\ below}}
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ my\_parent-\/>my\_parent\ )\ \{}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Even\ if\ this\ context\ were\ made\ accessible\ for\ state\ change\ propagation}}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ (by\ placing\ \_\_TBB\_store\_with\_release(s-\/>my\_context\_list\_head.my\_next,\ \&my\_node)}}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ above),\ it\ still\ could\ be\ missed\ if\ state\ propagation\ from\ a\ grand-\/ancestor}}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ was\ underway\ concurrently\ with\ binding.}}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Speculative\ propagation\ from\ the\ parent\ together\ with\ epoch\ counters}}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ detecting\ possibility\ of\ such\ a\ race\ allow\ to\ avoid\ taking\ locks\ when}}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ there\ is\ no\ contention.}}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Acquire\ fence\ is\ necessary\ to\ prevent\ reordering\ subsequent\ speculative}}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ loads\ of\ parent\ state\ data\ out\ of\ the\ scope\ where\ epoch\ counters\ comparison}}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ can\ reliably\ validate\ it.}}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedetail_a0414a8c27708e113938314ad3b0dbe4c}{uintptr\_t}}\ local\_count\_snapshot\ =\ \_\_TBB\_load\_with\_acquire(\ my\_parent-\/>my\_owner-\/>my\_context\_state\_propagation\_epoch\ );}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Speculative\ propagation\ of\ parent's\ state.\ The\ speculation\ will\ be}}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ validated\ by\ the\ epoch\ counters\ check\ further\ on.}}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ my\_cancellation\_requested\ =\ my\_parent-\/>my\_cancellation\_requested;}
\DoxyCodeLine{00293\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_PRIORITY}}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ my\_priority\ =\ my\_parent-\/>my\_priority;}
\DoxyCodeLine{00295\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_TASK\_PRIORITY\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ register\_with(\ local\_sched\ );\ \textcolor{comment}{//\ Issues\ full\ fence}}
\DoxyCodeLine{00297\ }
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ no\ state\ propagation\ was\ detected\ by\ the\ following\ condition,\ the\ above}}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ full\ fence\ guarantees\ that\ the\ parent\ had\ correct\ state\ during\ speculative}}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ propagation\ before\ the\ fence.\ Otherwise\ the\ propagation\ from\ parent\ is}}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ repeated\ under\ the\ lock.}}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ local\_count\_snapshot\ !=\ the\_context\_state\_propagation\_epoch\ )\ \{}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Another\ thread\ may\ be\ propagating\ state\ change\ right\ now.\ So\ resort\ to\ lock.}}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ context\_state\_propagation\_mutex\_type::scoped\_lock\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(the\_context\_state\_propagation\_mutex);}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \ \ \ \ my\_cancellation\_requested\ =\ my\_parent-\/>my\_cancellation\_requested;}
\DoxyCodeLine{00306\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_PRIORITY}}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ my\_priority\ =\ my\_parent-\/>my\_priority;}
\DoxyCodeLine{00308\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_TASK\_PRIORITY\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00310\ \ \ \ \ \}}
\DoxyCodeLine{00311\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ register\_with(\ local\_sched\ );\ \textcolor{comment}{//\ Issues\ full\ fence}}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ As\ we\ do\ not\ have\ grand-\/ancestors,\ concurrent\ state\ propagation\ (if\ any)}}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ may\ originate\ only\ from\ the\ parent\ context,\ and\ thus\ it\ is\ safe\ to\ directly}}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ copy\ the\ state\ from\ it.}}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ my\_cancellation\_requested\ =\ my\_parent-\/>my\_cancellation\_requested;}
\DoxyCodeLine{00317\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_PRIORITY}}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ my\_priority\ =\ my\_parent-\/>my\_priority;}
\DoxyCodeLine{00319\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_TASK\_PRIORITY\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00320\ \ \ \ \ \}}
\DoxyCodeLine{00321\ \ \ \ \ \_\_TBB\_store\_relaxed(my\_kind,\ binding\_completed);}
\DoxyCodeLine{00322\ \}}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00324\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00325\ \textcolor{keywordtype}{void}\ task\_group\_context::propagate\_task\_group\_state\ (\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ task\_group\_context::*mptr\_state,\ task\_group\_context\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ new\_state\ )\ \{}
\DoxyCodeLine{00326\ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>*mptr\_state\ ==\ new\_state)\ \{}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Nothing\ to\ do,\ whether\ descending\ from\ "{}src"{}\ or\ not,\ so\ no\ need\ to\ scan.}}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Hopefully\ this\ happens\ often\ thanks\ to\ earlier\ invocations.}}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ optimization\ is\ enabled\ by\ LIFO\ order\ in\ the\ context\ lists:}}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/\ new\ contexts\ are\ bound\ to\ the\ beginning\ of\ lists;}}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/\ descendants\ are\ newer\ than\ ancestors;}}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/\ earlier\ invocations\ are\ therefore\ likely\ to\ "{}paint"{}\ long\ chains.}}
\DoxyCodeLine{00333\ \ \ \ \ \}}
\DoxyCodeLine{00334\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{this}\ ==\ \&\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}})\ \{}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ clause\ is\ disjunct\ from\ the\ traversal\ below,\ which\ skips\ src\ entirely.}}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Note\ that\ src.*mptr\_state\ is\ not\ necessarily\ still\ equal\ to\ new\_state\ (another\ thread\ may\ have\ changed\ it\ again).}}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Such\ interference\ is\ probably\ not\ frequent\ enough\ to\ aim\ for\ optimisation\ by\ writing\ new\_state\ again\ (to\ make\ the\ other\ thread\ back\ down).}}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Letting\ the\ other\ thread\ prevail\ may\ also\ be\ fairer.}}
\DoxyCodeLine{00339\ \ \ \ \ \}}
\DoxyCodeLine{00340\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ task\_group\_context\ *ancestor\ =\ my\_parent;\ ancestor\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};\ ancestor\ =\ ancestor-\/>my\_parent\ )\ \{}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(internal::is\_alive(ancestor-\/>my\_version\_and\_traits),\ \textcolor{stringliteral}{"{}context\ tree\ was\ corrupted"{}});}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ ancestor\ ==\ \&\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}\ )\ \{}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ task\_group\_context\ *ctx\ =\ \textcolor{keyword}{this};\ ctx\ !=\ ancestor;\ ctx\ =\ ctx-\/>my\_parent\ )}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ctx-\/>*mptr\_state\ =\ new\_state;}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00349\ \ \ \ \ \}}
\DoxyCodeLine{00350\ \}}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00353\ \textcolor{keywordtype}{void}\ generic\_scheduler::propagate\_task\_group\_state\ (\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ task\_group\_context::*mptr\_state,\ task\_group\_context\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ new\_state\ )\ \{}
\DoxyCodeLine{00354\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1spin__mutex_afcf922650b2fd9d76b7b939d8511bbd8}{spin\_mutex::scoped\_lock}}\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(my\_context\_list\_mutex);}
\DoxyCodeLine{00355\ \ \ \ \ \textcolor{comment}{//\ Acquire\ fence\ is\ necessary\ to\ ensure\ that\ the\ subsequent\ node-\/>my\_next\ load}}
\DoxyCodeLine{00356\ \ \ \ \ \textcolor{comment}{//\ returned\ the\ correct\ value\ in\ case\ it\ was\ just\ inserted\ in\ another\ thread.}}
\DoxyCodeLine{00357\ \ \ \ \ \textcolor{comment}{//\ The\ fence\ also\ ensures\ visibility\ of\ the\ correct\ my\_parent\ value.}}
\DoxyCodeLine{00358\ \ \ \ \ context\_list\_node\_t\ *\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}\ =\ \_\_TBB\_load\_with\_acquire(my\_context\_list\_head.my\_next);}
\DoxyCodeLine{00359\ \ \ \ \ \textcolor{keywordflow}{while}\ (\ node\ !=\ \&my\_context\_list\_head\ )\ \{}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ task\_group\_context\ \&ctx\ =\ \_\_TBB\_get\_object\_ref(task\_group\_context,\ my\_node,\ node);}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ ctx.*mptr\_state\ !=\ new\_state\ )}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \ \ \ \ ctx.propagate\_task\_group\_state(\ mptr\_state,\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ new\_state\ );}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}\ =\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>my\_next;}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ is\_alive(ctx.my\_version\_and\_traits),\ \textcolor{stringliteral}{"{}Local\ context\ list\ contains\ destroyed\ object"{}}\ );}
\DoxyCodeLine{00365\ \ \ \ \ \}}
\DoxyCodeLine{00366\ \ \ \ \ \textcolor{comment}{//\ Sync\ up\ local\ propagation\ epoch\ with\ the\ global\ one.\ Release\ fence\ prevents}}
\DoxyCodeLine{00367\ \ \ \ \ \textcolor{comment}{//\ reordering\ of\ possible\ store\ to\ *mptr\_state\ after\ the\ sync\ point.}}
\DoxyCodeLine{00368\ \ \ \ \ \_\_TBB\_store\_with\_release(my\_context\_state\_propagation\_epoch,\ the\_context\_state\_propagation\_epoch);}
\DoxyCodeLine{00369\ \}}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00372\ \textcolor{keywordtype}{bool}\ market::propagate\_task\_group\_state\ (\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ task\_group\_context::*mptr\_state,\ task\_group\_context\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ new\_state\ )\ \{}
\DoxyCodeLine{00373\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_state\ \&\ task\_group\_context::may\_have\_children)\ )}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00375\ \ \ \ \ \textcolor{comment}{//\ The\ whole\ propagation\ algorithm\ is\ under\ the\ lock\ in\ order\ to\ ensure\ correctness}}
\DoxyCodeLine{00376\ \ \ \ \ \textcolor{comment}{//\ in\ case\ of\ concurrent\ state\ changes\ at\ the\ different\ levels\ of\ the\ context\ tree.}}
\DoxyCodeLine{00377\ \ \ \ \ \textcolor{comment}{//\ See\ comment\ at\ the\ bottom\ of\ scheduler.cpp}}
\DoxyCodeLine{00378\ \ \ \ \ context\_state\_propagation\_mutex\_type::scoped\_lock\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(the\_context\_state\_propagation\_mutex);}
\DoxyCodeLine{00379\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.*mptr\_state\ !=\ new\_state\ )}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Another\ thread\ has\ concurrently\ changed\ the\ state.\ Back\ down.}}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00382\ \ \ \ \ \textcolor{comment}{//\ Advance\ global\ state\ propagation\ epoch}}
\DoxyCodeLine{00383\ \ \ \ \ \mbox{\hyperlink{tbb__machine_8h_aa689caf9c3864c691eacec00808ea3a8}{\_\_TBB\_FetchAndAddWrelease}}(\&the\_context\_state\_propagation\_epoch,\ 1);}
\DoxyCodeLine{00384\ \ \ \ \ \textcolor{comment}{//\ Propagate\ to\ all\ workers\ and\ masters\ and\ sync\ up\ their\ local\ epochs\ with\ the\ global\ one}}
\DoxyCodeLine{00385\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ num\_workers\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a2fcee169e3b3be1cbb9b89b9a6c1942c}{my\_first\_unused\_worker\_idx}};}
\DoxyCodeLine{00386\ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ num\_workers;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ )\ \{}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1market_a9acd4f7b134e3bcd5625ce386ec7db60}{generic\_scheduler}}\ *\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ my\_workers[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}];}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ the\ worker\ is\ only\ about\ to\ be\ registered,\ skip\ it.}}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ )}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>propagate\_task\_group\_state(\ mptr\_state,\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ new\_state\ );}
\DoxyCodeLine{00391\ \ \ \ \ \}}
\DoxyCodeLine{00392\ \ \ \ \ \textcolor{comment}{//\ Propagate\ to\ all\ master\ threads}}
\DoxyCodeLine{00393\ \ \ \ \ \textcolor{comment}{//\ The\ whole\ propagation\ sequence\ is\ locked,\ thus\ no\ contention\ is\ expected}}
\DoxyCodeLine{00394\ \ \ \ \ \textcolor{keywordflow}{for}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1intrusive__list__base_a2ad160b840dca6434996b97306ab03dd}{scheduler\_list\_type::iterator}}\ it\ =\ my\_masters.begin();\ it\ !=\ my\_masters.end();\ it++\ \ )}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ it-\/>propagate\_task\_group\_state(\ mptr\_state,\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ new\_state\ );}
\DoxyCodeLine{00396\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00397\ \}}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00399\ \textcolor{keywordtype}{bool}\ task\_group\_context::cancel\_group\_execution\ ()\ \{}
\DoxyCodeLine{00400\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}\ (\ my\_cancellation\_requested\ ==\ 0\ ||\ my\_cancellation\_requested\ ==\ 1,\ \textcolor{stringliteral}{"{}Invalid\ cancellation\ state"{}});}
\DoxyCodeLine{00401\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ my\_cancellation\_requested\ ||\ \mbox{\hyperlink{namespacetbb_1_1internal_a958f482f9d5f3476ca70610af5336040}{as\_atomic}}(my\_cancellation\_requested).compare\_and\_swap(1,\ 0)\ )\ \{}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ task\ group\ and\ any\ descendants\ have\ already\ been\ canceled.}}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ (A\ newly\ added\ descendant\ would\ inherit\ its\ parent's\ my\_cancellation\_requested,}}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ not\ missing\ out\ on\ any\ cancellation\ still\ being\ propagated,\ and\ a\ context\ cannot\ be\ uncanceled.)}}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00406\ \ \ \ \ \}}
\DoxyCodeLine{00407\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a188d8290dc0518dff25aba4dc7471d0e}{governor::local\_scheduler\_weak}}()-\/>\mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler_ac652e4a610353888a31352e678955e1b}{my\_market}}-\/>propagate\_task\_group\_state(\ \&task\_group\_context::my\_cancellation\_requested,\ *\textcolor{keyword}{this},\ (uintptr\_t)1\ );}
\DoxyCodeLine{00408\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00409\ \}}
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00411\ \textcolor{keywordtype}{bool}\ task\_group\_context::is\_group\_execution\_cancelled\ ()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00412\ \ \ \ \ \textcolor{keywordflow}{return}\ my\_cancellation\_requested\ !=\ 0;}
\DoxyCodeLine{00413\ \}}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00415\ \textcolor{comment}{//\ IMPORTANT:\ It\ is\ assumed\ that\ this\ method\ is\ not\ used\ concurrently!}}
\DoxyCodeLine{00416\ \textcolor{keywordtype}{void}\ task\_group\_context::reset\ ()\ \{}
\DoxyCodeLine{00418\ \ \ \ \ \textcolor{comment}{//\ No\ fences\ are\ necessary\ since\ this\ context\ can\ be\ accessed\ from\ another\ thread}}
\DoxyCodeLine{00419\ \ \ \ \ \textcolor{comment}{//\ only\ after\ stealing\ happened\ (which\ means\ necessary\ fences\ were\ used).}}
\DoxyCodeLine{00420\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ my\_exception\ )\ \ \{}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ my\_exception-\/>destroy();}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ my\_exception\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00423\ \ \ \ \ \}}
\DoxyCodeLine{00424\ \ \ \ \ my\_cancellation\_requested\ =\ 0;}
\DoxyCodeLine{00425\ \}}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00427\ \textcolor{preprocessor}{\#if\ \_\_TBB\_FP\_CONTEXT}}
\DoxyCodeLine{00428\ \textcolor{comment}{//\ IMPORTANT:\ It\ is\ assumed\ that\ this\ method\ is\ not\ used\ concurrently!}}
\DoxyCodeLine{00429\ \textcolor{keywordtype}{void}\ task\_group\_context::capture\_fp\_settings\ ()\ \{}
\DoxyCodeLine{00431\ \ \ \ \ \textcolor{comment}{//\ No\ fences\ are\ necessary\ since\ this\ context\ can\ be\ accessed\ from\ another\ thread}}
\DoxyCodeLine{00432\ \ \ \ \ \textcolor{comment}{//\ only\ after\ stealing\ happened\ (which\ means\ necessary\ fences\ were\ used).}}
\DoxyCodeLine{00433\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env}{cpu\_ctl\_env}}\ \&ctl\ =\ *internal::punned\_cast<cpu\_ctl\_env*>(\&my\_cpu\_ctl\_env);}
\DoxyCodeLine{00434\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !(my\_version\_and\_traits\ \&\ fp\_settings)\ )\ \{}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ (\ \&ctl\ )\ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env}{cpu\_ctl\_env}};}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ my\_version\_and\_traits\ |=\ fp\_settings;}
\DoxyCodeLine{00437\ \ \ \ \ \}}
\DoxyCodeLine{00438\ \ \ \ \ ctl.get\_env();}
\DoxyCodeLine{00439\ \}}
\DoxyCodeLine{00440\ }
\DoxyCodeLine{00441\ \textcolor{keywordtype}{void}\ task\_group\_context::copy\_fp\_settings(\ \textcolor{keyword}{const}\ task\_group\_context\ \&\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}\ )\ \{}
\DoxyCodeLine{00442\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ !(my\_version\_and\_traits\ \&\ fp\_settings),\ \textcolor{stringliteral}{"{}The\ context\ already\ has\ FPU\ settings."{}}\ );}
\DoxyCodeLine{00443\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_version\_and\_traits\ \&\ fp\_settings,\ \textcolor{stringliteral}{"{}The\ source\ context\ does\ not\ have\ FPU\ settings."{}}\ );}
\DoxyCodeLine{00444\ }
\DoxyCodeLine{00445\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env}{cpu\_ctl\_env}}\ \&ctl\ =\ *internal::punned\_cast<cpu\_ctl\_env*>(\&my\_cpu\_ctl\_env);}
\DoxyCodeLine{00446\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env}{cpu\_ctl\_env}}\ \&src\_ctl\ =\ *internal::punned\_cast<cpu\_ctl\_env*>(\&\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_cpu\_ctl\_env);}
\DoxyCodeLine{00447\ \ \ \ \ \textcolor{keyword}{new}\ (\&ctl)\ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env}{cpu\_ctl\_env}}(\ src\_ctl\ );}
\DoxyCodeLine{00448\ \ \ \ \ my\_version\_and\_traits\ |=\ fp\_settings;}
\DoxyCodeLine{00449\ \}}
\DoxyCodeLine{00450\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_FP\_CONTEXT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00451\ }
\DoxyCodeLine{00452\ \textcolor{keywordtype}{void}\ task\_group\_context::register\_pending\_exception\ ()\ \{}
\DoxyCodeLine{00453\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ my\_cancellation\_requested\ )}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00455\ \textcolor{preprocessor}{\#if\ TBB\_USE\_EXCEPTIONS}}
\DoxyCodeLine{00456\ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00458\ \ \ \ \ \}\ TbbCatchAll(\ \textcolor{keyword}{this}\ );}
\DoxyCodeLine{00459\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ TBB\_USE\_EXCEPTIONS\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00460\ \}}
\DoxyCodeLine{00461\ }
\DoxyCodeLine{00462\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_PRIORITY}}
\DoxyCodeLine{00463\ \textcolor{keywordtype}{void}\ task\_group\_context::set\_priority\ (\ priority\_t\ prio\ )\ \{}
\DoxyCodeLine{00464\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ prio\ ==\ priority\_low\ ||\ prio\ ==\ priority\_normal\ ||\ prio\ ==\ priority\_high,\ \textcolor{stringliteral}{"{}Invalid\ priority\ level\ value"{}}\ );}
\DoxyCodeLine{00465\ \ \ \ \ intptr\_t\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ normalize\_priority(prio);}
\DoxyCodeLine{00466\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ my\_priority\ ==\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ \&\&\ !(my\_state\ \&\ task\_group\_context::may\_have\_children))}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00468\ \ \ \ \ my\_priority\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00469\ \ \ \ \ internal::generic\_scheduler*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a2133659b14313088deef73524bf44f69}{governor::local\_scheduler\_if\_initialized}}();}
\DoxyCodeLine{00470\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ ||\ !\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_arena\ ||\ !\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_market-\/>propagate\_task\_group\_state(\&task\_group\_context::my\_priority,\ *\textcolor{keyword}{this},\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})\ )}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00472\ }
\DoxyCodeLine{00474\ \ \ \ \ \textcolor{comment}{//\ need\ to\ find\ out\ the\ right\ arena\ for\ priority\ update.}}
\DoxyCodeLine{00475\ \ \ \ \ \textcolor{comment}{//\ The\ executing\ status\ check\ only\ guarantees\ being\ inside\ some\ working\ arena.}}
\DoxyCodeLine{00476\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_innermost\_running\_task-\/>state()\ ==\ task::executing\ )}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Updating\ arena\ priority\ here\ does\ not\ eliminate\ necessity\ of\ checking\ each}}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ task\ priority\ and\ updating\ arena\ priority\ if\ necessary\ before\ the\ task\ execution.}}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ These\ checks\ will\ be\ necessary\ because:}}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ a)\ set\_priority()\ may\ be\ invoked\ before\ any\ tasks\ from\ this\ task\ group\ are\ spawned;}}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ b)\ all\ spawned\ tasks\ from\ this\ task\ group\ are\ retrieved\ from\ the\ task\ pools.}}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ These\ cases\ create\ a\ time\ window\ when\ arena\ priority\ may\ be\ lowered.}}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_market-\/>update\_arena\_priority(\ *\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_arena,\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ );}
\DoxyCodeLine{00484\ \}}
\DoxyCodeLine{00485\ }
\DoxyCodeLine{00486\ priority\_t\ task\_group\_context::priority\ ()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00487\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}priority\_t\textcolor{keyword}{>}(priority\_from\_normalized\_rep[my\_priority]);}
\DoxyCodeLine{00488\ \}}
\DoxyCodeLine{00489\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_TASK\_PRIORITY\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00490\ }
\DoxyCodeLine{00491\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_TASK\_GROUP\_CONTEXT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00492\ }
\DoxyCodeLine{00493\ \}\ \textcolor{comment}{//\ namespace\ tbb}}

\end{DoxyCode}
