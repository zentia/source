\doxysection{tbb\+::internal\+::rml\+::private\+\_\+server类 参考}
\hypertarget{classtbb_1_1internal_1_1rml_1_1private__server}{}\label{classtbb_1_1internal_1_1rml_1_1private__server}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}


类 tbb\+::internal\+::rml\+::private\+\_\+server 继承关系图\+:
% FIG 0


tbb\+::internal\+::rml\+::private\+\_\+server 的协作图\+:
% FIG 1
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_a941f2e582957e03d164a9a3c81e77fa2}{private\+\_\+server}} (\mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1tbb__client}{tbb\+\_\+client}} \&client)
\item 
\mbox{\hyperlink{classrml_1_1versioned__object_a759650010b271238ef9433442730c423}{version\+\_\+type}} \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_a0eb1efa6f4ec7fc6f21bf729b80690be}{version}} () const \+\_\+\+\_\+\+TBB\+\_\+override
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_aa3168e9dc158c52625a69a47ebf840d5}{request\+\_\+close\+\_\+connection}} (\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}) \+\_\+\+\_\+\+TBB\+\_\+override
\begin{DoxyCompactList}\small\item\em Request that connection to server be closed. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_a3417aa3f61a3ba3d6fed88b0e5a9b040}{yield}} () \+\_\+\+\_\+\+TBB\+\_\+override
\begin{DoxyCompactList}\small\item\em Called by client thread when it reaches a point where it cannot make progress until other threads do. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_a2f6777b6edbb4526ea7be59d8278a3fa}{independent\+\_\+thread\+\_\+number\+\_\+changed}} (\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}) \+\_\+\+\_\+\+TBB\+\_\+override
\begin{DoxyCompactList}\small\item\em Called by client to indicate a change in the number of non-\/\+RML threads that are running. \end{DoxyCompactList}\item 
unsigned \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_a43a468f1aa03ce9be85e4cf0e99e7f17}{default\+\_\+concurrency}} () const \+\_\+\+\_\+\+TBB\+\_\+override
\begin{DoxyCompactList}\small\item\em Default level of concurrency for which RML strives when there are no non-\/\+RML threads running. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_aed71f902aab1aef77a016420c586f535}{adjust\+\_\+job\+\_\+count\+\_\+estimate}} (\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} delta) \+\_\+\+\_\+\+TBB\+\_\+override
\begin{DoxyCompactList}\small\item\em Inform server of adjustments in the number of workers that the client can profitably use. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private 类型}
\begin{DoxyCompactItemize}
\item 
typedef \mbox{\hyperlink{namespacetbb_1_1internal_a7129c5cff1bad05eaf6c218a04f70456}{scheduler\+\_\+mutex\+\_\+type}} \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_a53b661dc82f3484dfaba0cba1917cb6e}{asleep\+\_\+list\+\_\+mutex\+\_\+type}}
\begin{DoxyCompactList}\small\item\em Protects my\+\_\+asleep\+\_\+list\+\_\+root \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_a23bccadb141031d3e12b0c3c99838798}{propagate\+\_\+chain\+\_\+reaction}} ()
\begin{DoxyCompactList}\small\item\em Wake up to two sleeping workers, if there are any sleeping. \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_a65bd5075630d2f9cce6f71fc3c922e46}{try\+\_\+insert\+\_\+in\+\_\+asleep\+\_\+list}} (\mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__worker}{private\+\_\+worker}} \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})
\begin{DoxyCompactList}\small\item\em Try to add t to list of sleeping workers \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_a2be83f895b89b3861ee8ab31535c1f34}{wake\+\_\+some}} (\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} additional\+\_\+slack)
\begin{DoxyCompactList}\small\item\em Equivalent of adding additional\+\_\+slack to my\+\_\+slack and waking up to 2 threads if my\+\_\+slack permits. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_a3f85635899ef8652d32de0e42fcbd3cd}{\texorpdfstring{$\sim$}{\string~}private\+\_\+server}} ()
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_af8d1c910ec7d64b8fc93b03bdc23ef64}{remove\+\_\+server\+\_\+ref}} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Private 属性}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1tbb__client}{tbb\+\_\+client}} \& \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_afab7ce16d2c4777bc78d3414018cd6c9}{my\+\_\+client}}
\item 
const \mbox{\hyperlink{classrml_1_1client_a0dc06ede570f7ee6d3021862cb71119f}{tbb\+\_\+client\+::size\+\_\+type}} \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_a1899982faeae9713e24d25d4fd26a34a}{my\+\_\+n\+\_\+thread}}
\begin{DoxyCompactList}\small\item\em Maximum number of threads to be created. \end{DoxyCompactList}\item 
const size\+\_\+t \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_a16e4dfc8c5e061a1d9889012b9246e3e}{my\+\_\+stack\+\_\+size}}
\begin{DoxyCompactList}\small\item\em Stack size for each thread. \texorpdfstring{$\ast$}{*}/ \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic}}$<$ \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} $>$ \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_aa2bf328b950275f1aa80b33f43021ce1}{my\+\_\+slack}}
\begin{DoxyCompactList}\small\item\em \doxylink{test__concurrent__vector__v2_8cpp_a36bc74cc1ee36b525959509e2a81c81e}{Number} of jobs that could use their associated thread minus number of active threads. \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic}}$<$ \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} $>$ \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_a9ae8da3b2b8828316be5be20ad19e92f}{my\+\_\+ref\+\_\+count}}
\begin{DoxyCompactList}\small\item\em \doxylink{struct_counter}{Counter} used to determine when to delete this. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1padded__private__worker}{padded\+\_\+private\+\_\+worker}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_ada8ed4bd1a1ded121471fb872b07c71c}{my\+\_\+thread\+\_\+array}}
\item 
tbb\+::atomic$<$ \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__worker}{private\+\_\+worker}} \texorpdfstring{$\ast$}{*} $>$ \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_aa9a4e0652fbb72cab569ea784989b65c}{my\+\_\+asleep\+\_\+list\+\_\+root}}
\begin{DoxyCompactList}\small\item\em \doxylink{class_list}{List} of workers that are asleep or committed to sleeping until notified by another thread. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_a53b661dc82f3484dfaba0cba1917cb6e}{asleep\+\_\+list\+\_\+mutex\+\_\+type}} \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_abdadfc9229feb5e185139e32348fa0e2}{my\+\_\+asleep\+\_\+list\+\_\+mutex}}
\end{DoxyCompactItemize}
\doxysubsubsection*{友元}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_af1df28b1fce17bd3ac403abe94d1f331}{private\+\_\+worker}}
\end{DoxyCompactItemize}
\doxysubsubsection*{额外继承的成员函数}
\doxysubsection*{Public 类型 继承自 \mbox{\hyperlink{classrml_1_1server}{rml\+::server}}}
\begin{DoxyCompactItemize}
\item 
typedef \mbox{\hyperlink{classrml_1_1job}{\+::rml\+::job}} \mbox{\hyperlink{classrml_1_1server_ac812e52a5bb3de275e624c36997eac0e}{job}}
\begin{DoxyCompactList}\small\item\em Typedef for convenience of derived classes. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public 类型 继承自 \mbox{\hyperlink{classrml_1_1versioned__object}{rml\+::versioned\+\_\+object}}}
\begin{DoxyCompactItemize}
\item 
typedef unsigned \mbox{\hyperlink{classrml_1_1versioned__object_a759650010b271238ef9433442730c423}{version\+\_\+type}}
\begin{DoxyCompactList}\small\item\em \doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} version number \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{静态 Protected 成员函数 继承自 \mbox{\hyperlink{classrml_1_1server}{rml\+::server}}}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}\& \mbox{\hyperlink{classrml_1_1server_a47652c7b5e9f14341264bdf5b5fa7aca}{scratch\+\_\+ptr}} (\mbox{\hyperlink{classrml_1_1server_ac812e52a5bb3de275e624c36997eac0e}{job}} \&\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})
\end{DoxyCompactItemize}


\doxysubsection{成员类型定义说明}
\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_a53b661dc82f3484dfaba0cba1917cb6e}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!asleep\_list\_mutex\_type@{asleep\_list\_mutex\_type}}
\index{asleep\_list\_mutex\_type@{asleep\_list\_mutex\_type}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{asleep\_list\_mutex\_type}{asleep\_list\_mutex\_type}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_a53b661dc82f3484dfaba0cba1917cb6e} 
typedef \mbox{\hyperlink{namespacetbb_1_1internal_a7129c5cff1bad05eaf6c218a04f70456}{scheduler\+\_\+mutex\+\_\+type}} \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_a53b661dc82f3484dfaba0cba1917cb6e}{tbb\+::internal\+::rml\+::private\+\_\+server\+::asleep\+\_\+list\+\_\+mutex\+\_\+type}}\hspace{0.3cm}{\ttfamily [private]}}



Protects my\+\_\+asleep\+\_\+list\+\_\+root 



\doxysubsection{构造及析构函数说明}
\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_a941f2e582957e03d164a9a3c81e77fa2}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!private\_server@{private\_server}}
\index{private\_server@{private\_server}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{private\_server()}{private\_server()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_a941f2e582957e03d164a9a3c81e77fa2} 
tbb\+::internal\+::rml\+::private\+\_\+server\+::private\+\_\+server (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1tbb__client}{tbb\+\_\+client}} \&}]{client}{}\end{DoxyParamCaption})}

函数调用图\+:
% FIG 2


\doxysubsection{成员函数说明}
\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_aed71f902aab1aef77a016420c586f535}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!adjust\_job\_count\_estimate@{adjust\_job\_count\_estimate}}
\index{adjust\_job\_count\_estimate@{adjust\_job\_count\_estimate}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{adjust\_job\_count\_estimate()}{adjust\_job\_count\_estimate()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_aed71f902aab1aef77a016420c586f535} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::internal\+::rml\+::private\+\_\+server\+::adjust\+\_\+job\+\_\+count\+\_\+estimate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{delta}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Inform server of adjustments in the number of workers that the client can profitably use. 



实现了 \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1tbb__server_a2b1c4f0f5ea896049358318f2927cd6f}{tbb\+::internal\+::rml\+::tbb\+\_\+server}}.

函数调用图\+:
% FIG 3
\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_a43a468f1aa03ce9be85e4cf0e99e7f17}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!default\_concurrency@{default\_concurrency}}
\index{default\_concurrency@{default\_concurrency}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{default\_concurrency()}{default\_concurrency()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_a43a468f1aa03ce9be85e4cf0e99e7f17} 
unsigned tbb\+::internal\+::rml\+::private\+\_\+server\+::default\+\_\+concurrency (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Default level of concurrency for which RML strives when there are no non-\/\+RML threads running. 

Normally, the value is the hardware concurrency minus one. The "{}minus one"{} accounts for the thread created by \doxylink{main-override-static_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}{main()}. 

实现了 \mbox{\hyperlink{classrml_1_1server_ab724107e297226ef26538315091a50b1}{rml\+::server}}.

函数调用图\+:
% FIG 4
\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_a2f6777b6edbb4526ea7be59d8278a3fa}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!independent\_thread\_number\_changed@{independent\_thread\_number\_changed}}
\index{independent\_thread\_number\_changed@{independent\_thread\_number\_changed}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{independent\_thread\_number\_changed()}{independent\_thread\_number\_changed()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_a2f6777b6edbb4526ea7be59d8278a3fa} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::internal\+::rml\+::private\+\_\+server\+::independent\+\_\+thread\+\_\+number\+\_\+changed (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{delta}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Called by client to indicate a change in the number of non-\/\+RML threads that are running. 

This is a performance hint to the RML to adjust how many threads it should let run concurrently. The delta is the change in the number of non-\/\+RML threads that are running. For example, a value of 1 means the client has started running another thread, and a value of -\/1 indicates that the client has blocked or terminated one of its threads. 

实现了 \mbox{\hyperlink{classrml_1_1server_a45154e61e7c6b60b51d53dacd1d03c2f}{rml\+::server}}.

\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_a23bccadb141031d3e12b0c3c99838798}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!propagate\_chain\_reaction@{propagate\_chain\_reaction}}
\index{propagate\_chain\_reaction@{propagate\_chain\_reaction}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{propagate\_chain\_reaction()}{propagate\_chain\_reaction()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_a23bccadb141031d3e12b0c3c99838798} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::internal\+::rml\+::private\+\_\+server\+::propagate\+\_\+chain\+\_\+reaction (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Wake up to two sleeping workers, if there are any sleeping. 

The call is used to propagate a chain reaction where each thread wakes up two threads, which in turn each wake up two threads, etc. 函数调用图\+:
% FIG 5
\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_af8d1c910ec7d64b8fc93b03bdc23ef64}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!remove\_server\_ref@{remove\_server\_ref}}
\index{remove\_server\_ref@{remove\_server\_ref}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{remove\_server\_ref()}{remove\_server\_ref()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_af8d1c910ec7d64b8fc93b03bdc23ef64} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::internal\+::rml\+::private\+\_\+server\+::remove\+\_\+server\+\_\+ref (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

函数调用图\+:
% FIG 6
\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_aa3168e9dc158c52625a69a47ebf840d5}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!request\_close\_connection@{request\_close\_connection}}
\index{request\_close\_connection@{request\_close\_connection}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{request\_close\_connection()}{request\_close\_connection()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_aa3168e9dc158c52625a69a47ebf840d5} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::internal\+::rml\+::private\+\_\+server\+::request\+\_\+close\+\_\+connection (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}}]{exiting}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Request that connection to server be closed. 

Causes each job associated with the client to have its cleanup method called, possibly by a thread different than the thread that created the job. This method can return before all cleanup methods return. Actions that have to wait after all cleanup methods return should be part of client\+::acknowledge\+\_\+close\+\_\+connection. Pass true as exiting if \doxylink{classtbb_1_1internal_1_1rml_1_1private__server_aa3168e9dc158c52625a69a47ebf840d5}{request\+\_\+close\+\_\+connection()} is called because exit() is called. In that case, it is the client\textquotesingle{}s responsibility to make sure all threads are terminated. In all other cases, pass false. 

实现了 \mbox{\hyperlink{classrml_1_1server_a3119d8d6c2d17932610653f6fda4f87a}{rml\+::server}}.

函数调用图\+:
% FIG 7
\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_a65bd5075630d2f9cce6f71fc3c922e46}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!try\_insert\_in\_asleep\_list@{try\_insert\_in\_asleep\_list}}
\index{try\_insert\_in\_asleep\_list@{try\_insert\_in\_asleep\_list}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{try\_insert\_in\_asleep\_list()}{try\_insert\_in\_asleep\_list()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_a65bd5075630d2f9cce6f71fc3c922e46} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} tbb\+::internal\+::rml\+::private\+\_\+server\+::try\+\_\+insert\+\_\+in\+\_\+asleep\+\_\+list (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__worker}{private\+\_\+worker}} \&}]{t}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Try to add t to list of sleeping workers 

函数调用图\+:
% FIG 8
\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_a0eb1efa6f4ec7fc6f21bf729b80690be}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!version@{version}}
\index{version@{version}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{version()}{version()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_a0eb1efa6f4ec7fc6f21bf729b80690be} 
\mbox{\hyperlink{classrml_1_1versioned__object_a759650010b271238ef9433442730c423}{version\+\_\+type}} tbb\+::internal\+::rml\+::private\+\_\+server\+::version (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_a2be83f895b89b3861ee8ab31535c1f34}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!wake\_some@{wake\_some}}
\index{wake\_some@{wake\_some}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{wake\_some()}{wake\_some()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_a2be83f895b89b3861ee8ab31535c1f34} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::internal\+::rml\+::private\+\_\+server\+::wake\+\_\+some (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{additional\+\_\+slack}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Equivalent of adding additional\+\_\+slack to my\+\_\+slack and waking up to 2 threads if my\+\_\+slack permits. 

函数调用图\+:
% FIG 9
\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_a3417aa3f61a3ba3d6fed88b0e5a9b040}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!yield@{yield}}
\index{yield@{yield}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{yield()}{yield()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_a3417aa3f61a3ba3d6fed88b0e5a9b040} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::internal\+::rml\+::private\+\_\+server\+::yield (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Called by client thread when it reaches a point where it cannot make progress until other threads do. 



实现了 \mbox{\hyperlink{classrml_1_1server_a53e1efc4cb441f962e14af14e49b9fba}{rml\+::server}}.

\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_a3f85635899ef8652d32de0e42fcbd3cd}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!````~private\_server@{\texorpdfstring{$\sim$}{\string~}private\_server}}
\index{````~private\_server@{\texorpdfstring{$\sim$}{\string~}private\_server}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}private\_server()}{\string~private\_server()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_a3f85635899ef8652d32de0e42fcbd3cd} 
tbb\+::internal\+::rml\+::private\+\_\+server\+::\texorpdfstring{$\sim$}{\string~}private\+\_\+server (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}

函数调用图\+:
% FIG 10


\doxysubsection{友元及相关符号说明}
\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_af1df28b1fce17bd3ac403abe94d1f331}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!private\_worker@{private\_worker}}
\index{private\_worker@{private\_worker}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{private\_worker}{private\_worker}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_af1df28b1fce17bd3ac403abe94d1f331} 
friend class \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__worker}{private\+\_\+worker}}\hspace{0.3cm}{\ttfamily [friend]}}



\doxysubsection{类成员变量说明}
\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_abdadfc9229feb5e185139e32348fa0e2}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!my\_asleep\_list\_mutex@{my\_asleep\_list\_mutex}}
\index{my\_asleep\_list\_mutex@{my\_asleep\_list\_mutex}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{my\_asleep\_list\_mutex}{my\_asleep\_list\_mutex}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_abdadfc9229feb5e185139e32348fa0e2} 
\mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__server_a53b661dc82f3484dfaba0cba1917cb6e}{asleep\+\_\+list\+\_\+mutex\+\_\+type}} tbb\+::internal\+::rml\+::private\+\_\+server\+::my\+\_\+asleep\+\_\+list\+\_\+mutex\hspace{0.3cm}{\ttfamily [private]}}

\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_aa9a4e0652fbb72cab569ea784989b65c}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!my\_asleep\_list\_root@{my\_asleep\_list\_root}}
\index{my\_asleep\_list\_root@{my\_asleep\_list\_root}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{my\_asleep\_list\_root}{my\_asleep\_list\_root}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_aa9a4e0652fbb72cab569ea784989b65c} 
tbb\+::atomic$<$\mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1private__worker}{private\+\_\+worker}}\texorpdfstring{$\ast$}{*}$>$ tbb\+::internal\+::rml\+::private\+\_\+server\+::my\+\_\+asleep\+\_\+list\+\_\+root\hspace{0.3cm}{\ttfamily [private]}}



\doxylink{class_list}{List} of workers that are asleep or committed to sleeping until notified by another thread. 

\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_afab7ce16d2c4777bc78d3414018cd6c9}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!my\_client@{my\_client}}
\index{my\_client@{my\_client}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{my\_client}{my\_client}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_afab7ce16d2c4777bc78d3414018cd6c9} 
\mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1tbb__client}{tbb\+\_\+client}}\& tbb\+::internal\+::rml\+::private\+\_\+server\+::my\+\_\+client\hspace{0.3cm}{\ttfamily [private]}}

\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_a1899982faeae9713e24d25d4fd26a34a}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!my\_n\_thread@{my\_n\_thread}}
\index{my\_n\_thread@{my\_n\_thread}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{my\_n\_thread}{my\_n\_thread}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_a1899982faeae9713e24d25d4fd26a34a} 
const \mbox{\hyperlink{classrml_1_1client_a0dc06ede570f7ee6d3021862cb71119f}{tbb\+\_\+client\+::size\+\_\+type}} tbb\+::internal\+::rml\+::private\+\_\+server\+::my\+\_\+n\+\_\+thread\hspace{0.3cm}{\ttfamily [private]}}



Maximum number of threads to be created. 

Threads are created lazily, so maximum might not actually be reached. \Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_a9ae8da3b2b8828316be5be20ad19e92f}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!my\_ref\_count@{my\_ref\_count}}
\index{my\_ref\_count@{my\_ref\_count}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{my\_ref\_count}{my\_ref\_count}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_a9ae8da3b2b8828316be5be20ad19e92f} 
\mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic}}$<$\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}$>$ tbb\+::internal\+::rml\+::private\+\_\+server\+::my\+\_\+ref\+\_\+count\hspace{0.3cm}{\ttfamily [private]}}



\doxylink{struct_counter}{Counter} used to determine when to delete this. 

\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_aa2bf328b950275f1aa80b33f43021ce1}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!my\_slack@{my\_slack}}
\index{my\_slack@{my\_slack}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{my\_slack}{my\_slack}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_aa2bf328b950275f1aa80b33f43021ce1} 
\mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic}}$<$\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}$>$ tbb\+::internal\+::rml\+::private\+\_\+server\+::my\+\_\+slack\hspace{0.3cm}{\ttfamily [private]}}



\doxylink{test__concurrent__vector__v2_8cpp_a36bc74cc1ee36b525959509e2a81c81e}{Number} of jobs that could use their associated thread minus number of active threads. 

If negative, indicates oversubscription. If positive, indicates that more threads should run. Can be lowered asynchronously, but must be raised only while holding my\+\_\+asleep\+\_\+list\+\_\+mutex, because raising it impacts the invariant for sleeping threads. \Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_a16e4dfc8c5e061a1d9889012b9246e3e}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!my\_stack\_size@{my\_stack\_size}}
\index{my\_stack\_size@{my\_stack\_size}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{my\_stack\_size}{my\_stack\_size}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_a16e4dfc8c5e061a1d9889012b9246e3e} 
const size\+\_\+t tbb\+::internal\+::rml\+::private\+\_\+server\+::my\+\_\+stack\+\_\+size\hspace{0.3cm}{\ttfamily [private]}}



Stack size for each thread. \texorpdfstring{$\ast$}{*}/ 

\Hypertarget{classtbb_1_1internal_1_1rml_1_1private__server_ada8ed4bd1a1ded121471fb872b07c71c}\index{tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}!my\_thread\_array@{my\_thread\_array}}
\index{my\_thread\_array@{my\_thread\_array}!tbb::internal::rml::private\_server@{tbb::internal::rml::private\_server}}
\doxysubsubsection{\texorpdfstring{my\_thread\_array}{my\_thread\_array}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1rml_1_1private__server_ada8ed4bd1a1ded121471fb872b07c71c} 
\mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1padded__private__worker}{padded\+\_\+private\+\_\+worker}}\texorpdfstring{$\ast$}{*} tbb\+::internal\+::rml\+::private\+\_\+server\+::my\+\_\+thread\+\_\+array\hspace{0.3cm}{\ttfamily [private]}}



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/taskflow/3rd-\/party/tbb/src/tbb/\mbox{\hyperlink{private__server_8cpp}{private\+\_\+server.\+cpp}}\end{DoxyCompactItemize}
