\doxysection{universe.\+h}
\hypertarget{3rd-party_2tbb_2examples_2parallel__for_2seismic_2universe_8h_source}{}\label{3rd-party_2tbb_2examples_2parallel__for_2seismic_2universe_8h_source}\index{external/taskflow/3rd-\/party/tbb/examples/parallel\_for/seismic/universe.h@{external/taskflow/3rd-\/party/tbb/examples/parallel\_for/seismic/universe.h}}
\mbox{\hyperlink{3rd-party_2tbb_2examples_2parallel__for_2seismic_2universe_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#ifndef\ UNIVERSE\_H\_}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#define\ UNIVERSE\_H\_}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#ifndef\ UNIVERSE\_WIDTH}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#define\ UNIVERSE\_WIDTH\ 1024}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#ifndef\ UNIVERSE\_HEIGHT}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#define\ UNIVERSE\_HEIGHT\ 512}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2video_8h}{../../common/gui/video.h}}"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{partitioner_8h}{tbb/partitioner.h}}"{}}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_universe}{Universe}}\ \{}
\DoxyCodeLine{00031\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_universe_a16818677f923cd64d3ff8f36b77c13faa0f237d35efb27f9e1df641544c873924}{UniverseWidth}}\ \ =\ \mbox{\hyperlink{sandbox_2seismic_2universe_8h_ad407088e16b501da632d4622d64c0c80}{UNIVERSE\_WIDTH}},}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_universe_a16818677f923cd64d3ff8f36b77c13faa686465805a946ab76473d36f78806118}{UniverseHeight}}\ =\ \mbox{\hyperlink{sandbox_2seismic_2universe_8h_a27c816c210f5fb04540e8d3486d9966a}{UNIVERSE\_HEIGHT}}}
\DoxyCodeLine{00035\ \ \ \ \ \};}
\DoxyCodeLine{00036\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{comment}{//in\ order\ to\ avoid\ performance\ degradation\ due\ to\ cache\ aliasing\ issue}}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{comment}{//some\ padding\ is\ needed\ after\ each\ row\ in\ array,\ and\ between\ array\ themselves.}}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{comment}{//the\ padding\ is\ achieved\ by\ adjusting\ number\ of\ rows\ and\ columns.}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{comment}{//as\ the\ compiler\ is\ forced\ to\ place\ class\ members\ of\ the\ same\ clause\ in\ order\ of\ the}}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{comment}{//declaration\ this\ seems\ to\ be\ the\ right\ way\ of\ padding.}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{comment}{//magic\ constants\ added\ below\ are\ chosen\ experimentally\ for\ 1024x512.}}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_universe_ac08e962729caeff7e9790f4839c7d481aa1f91915b6a4c8b865eaea1557a05f18}{MaxWidth}}\ =\ \mbox{\hyperlink{class_universe_a16818677f923cd64d3ff8f36b77c13faa0f237d35efb27f9e1df641544c873924}{UniverseWidth}}+1,}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_universe_ac08e962729caeff7e9790f4839c7d481aca279ef2863ab9dc9e82aac6474ceafc}{MaxHeight}}\ =\ \mbox{\hyperlink{class_universe_a16818677f923cd64d3ff8f36b77c13faa686465805a946ab76473d36f78806118}{UniverseHeight}}+3}
\DoxyCodeLine{00047\ \ \ \ \ \};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_universe_a6d0a562280254a83cd1208633e79c91d}{ValueType}};}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00052\ \ \ \ \ \mbox{\hyperlink{class_universe_a6d0a562280254a83cd1208633e79c91d}{ValueType}}\ \mbox{\hyperlink{class_universe_a8ad7f967370b9cd5b790bfb1b7f5fcb7}{S}}[\mbox{\hyperlink{class_universe_ac08e962729caeff7e9790f4839c7d481aca279ef2863ab9dc9e82aac6474ceafc}{MaxHeight}}][\mbox{\hyperlink{class_universe_ac08e962729caeff7e9790f4839c7d481aa1f91915b6a4c8b865eaea1557a05f18}{MaxWidth}}];}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00055\ \ \ \ \ \mbox{\hyperlink{class_universe_a6d0a562280254a83cd1208633e79c91d}{ValueType}}\ \mbox{\hyperlink{class_universe_ad5b24a21c94c482f8b50b918ffd1b5ff}{V}}[\mbox{\hyperlink{class_universe_ac08e962729caeff7e9790f4839c7d481aca279ef2863ab9dc9e82aac6474ceafc}{MaxHeight}}][\mbox{\hyperlink{class_universe_ac08e962729caeff7e9790f4839c7d481aa1f91915b6a4c8b865eaea1557a05f18}{MaxWidth}}];}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00058\ \ \ \ \ \mbox{\hyperlink{class_universe_a6d0a562280254a83cd1208633e79c91d}{ValueType}}\ \mbox{\hyperlink{class_universe_adff84d8c24a93bd8386e3ea379c53514}{T}}[\mbox{\hyperlink{class_universe_ac08e962729caeff7e9790f4839c7d481aca279ef2863ab9dc9e82aac6474ceafc}{MaxHeight}}][\mbox{\hyperlink{class_universe_ac08e962729caeff7e9790f4839c7d481aa1f91915b6a4c8b865eaea1557a05f18}{MaxWidth}}];}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00061\ \ \ \ \ \mbox{\hyperlink{class_universe_a6d0a562280254a83cd1208633e79c91d}{ValueType}}\ \mbox{\hyperlink{class_universe_adefad2341b31f302fcffd98d119820f5}{M}}[\mbox{\hyperlink{class_universe_ac08e962729caeff7e9790f4839c7d481aca279ef2863ab9dc9e82aac6474ceafc}{MaxHeight}}][\mbox{\hyperlink{class_universe_ac08e962729caeff7e9790f4839c7d481aa1f91915b6a4c8b865eaea1557a05f18}{MaxWidth}}];}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00064\ \ \ \ \ \mbox{\hyperlink{class_universe_a6d0a562280254a83cd1208633e79c91d}{ValueType}}\ \mbox{\hyperlink{class_universe_af7b836805510e54897e5fafab3c7cea4}{D}}[\mbox{\hyperlink{class_universe_ac08e962729caeff7e9790f4839c7d481aca279ef2863ab9dc9e82aac6474ceafc}{MaxHeight}}][\mbox{\hyperlink{class_universe_ac08e962729caeff7e9790f4839c7d481aa1f91915b6a4c8b865eaea1557a05f18}{MaxWidth}}];}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00067\ \ \ \ \ \mbox{\hyperlink{class_universe_a6d0a562280254a83cd1208633e79c91d}{ValueType}}\ \mbox{\hyperlink{class_universe_aded105b1f367f8e93b5f569f10a859bf}{L}}[\mbox{\hyperlink{class_universe_ac08e962729caeff7e9790f4839c7d481aca279ef2863ab9dc9e82aac6474ceafc}{MaxHeight}}][\mbox{\hyperlink{class_universe_ac08e962729caeff7e9790f4839c7d481aa1f91915b6a4c8b865eaea1557a05f18}{MaxWidth}}];}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keyword}{enum}\ \{\ \mbox{\hyperlink{class_universe_adc96c247bacbb1f494406530d8f6cee3a39b2c09cf61868d3b1c15f5144214f20}{ColorMapSize}}\ =\ 1024\};}
\DoxyCodeLine{00070\ \ \ \ \ \mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2video_8h_af00bd69e44901f206becdb8e7cf0ff27}{color\_t}}\ \mbox{\hyperlink{class_universe_a7e06ddc49407c2cd81109892c2a99b65}{ColorMap}}[4][\mbox{\hyperlink{class_universe_adc96c247bacbb1f494406530d8f6cee3a39b2c09cf61868d3b1c15f5144214f20}{ColorMapSize}}];}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{enum}\ \mbox{\hyperlink{class_universe_a35150db1a194ee4a4e365c36f6982224}{MaterialType}}\ \{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_universe_a35150db1a194ee4a4e365c36f6982224ace3591ac51d86d9d4dfadcc8fe13b98f}{WATER}}=0,}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_universe_a35150db1a194ee4a4e365c36f6982224a6a90c65c7f946d39b118734f51d94bcc}{SANDSTONE}}=1,}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_universe_a35150db1a194ee4a4e365c36f6982224ad720931875cd77f90e00548f181d8f2e}{SHALE}}=2}
\DoxyCodeLine{00076\ \ \ \ \ \};}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{class_universe_ac0b46df289e87a676dc8909ef19f617b}{material}}[\mbox{\hyperlink{class_universe_ac08e962729caeff7e9790f4839c7d481aca279ef2863ab9dc9e82aac6474ceafc}{MaxHeight}}][\mbox{\hyperlink{class_universe_ac08e962729caeff7e9790f4839c7d481aa1f91915b6a4c8b865eaea1557a05f18}{MaxWidth}}];}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keyword}{enum}\ \{\ \mbox{\hyperlink{class_universe_a11b3aefc8ea63cc9ab5f6f2fc908ab8dae2b29e26b54176c6b6ee03475d2d5a40}{DamperSize}}\ =\ 32\};}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_universe_ae6956e40ae865ff44380e459bb80d215}{pulseTime}};}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_universe_ada1df0e990c80384225d9375760b7a6c}{pulseCounter}};}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_universe_a301f25e303a87e9e77c9f27ee330c005}{pulseX}};}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_universe_a58243de86bf04e3f8645a6cdd8eb2e5f}{pulseY}};}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ \mbox{\hyperlink{classdrawing__memory}{drawing\_memory}}\ \mbox{\hyperlink{class_universe_af1ca359ff24d139d35306cd7b7a9db2e}{drawingMemory}};}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_universe_ad47133c93f665b13d56176497c3a455e}{InitializeUniverse}}(\mbox{\hyperlink{classvideo}{video}}\ \textcolor{keyword}{const}\&\ colorizer);}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_universe_ad12f77cb4206cb2e7ff72990b988ff39}{SerialUpdateUniverse}}();}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_universe_a9ce8ce73fd7f2695357914e6131ad670}{ParallelUpdateUniverse}}();}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_universe_a87548452549f5eccd88ccd7acbd9b8ab}{TryPutNewPulseSource}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{offscreen_8c_a5fd331c99e778f04762be6d8173eb4d2}{x}},\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a5e247fc24ceb70d83f6ad59149b8910a}{y}});}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_universe_ac791f5a23f435244ecdd3733c3e38243}{SetDrawingMemory}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdrawing__memory}{drawing\_memory}}\ \&dmem);}
\DoxyCodeLine{00098\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_universe_1_1_rectangle}{Rectangle}};}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_universe_a6a1d615d440c6b35f0c9becd8e169d60}{UpdatePulse}}();}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_universe_af23e20f02f1d377fb660e4eaa04e98f7}{UpdateStress}}(\mbox{\hyperlink{struct_universe_1_1_rectangle}{Rectangle}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ );}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_universe_a19cbaf840ff34dcc81d0db2412901e69}{SerialUpdateStress}}()\ ;}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{class_universe_a2c53662ad285fbda73732f1eb4ff08a0}{UpdateStressBody}};}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{class_universe_a335957c4f92dc9adc374effe24e31cad}{UpdateVelocityBody}};}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_universe_ae019357f67b8cadb268428f455e3168f}{ParallelUpdateStress}}(tbb::affinity\_partitioner\ \&affinity);}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_universe_a632afd213488602007352a65c00a81c3}{UpdateVelocity}}(\mbox{\hyperlink{struct_universe_1_1_rectangle}{Rectangle}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}});}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_universe_ac38fe12a3326eff9d2a88613f6d9eec6}{SerialUpdateVelocity}}()\ ;}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_universe_a035ba84b0f66e2bd22928f52b16d8c37}{ParallelUpdateVelocity}}(tbb::affinity\_partitioner\ \&affinity);}
\DoxyCodeLine{00112\ \};}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ UNIVERSE\_H\_\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
