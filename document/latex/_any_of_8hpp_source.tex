\doxysection{Any\+Of.\+hpp}
\hypertarget{_any_of_8hpp_source}{}\label{_any_of_8hpp_source}\index{external/reflect-\/cpp/include/rfl/AnyOf.hpp@{external/reflect-\/cpp/include/rfl/AnyOf.hpp}}
\mbox{\hyperlink{_any_of_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ RFL\_ANYOF\_HPP\_}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ RFL\_ANYOF\_HPP\_}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <sstream>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <utility>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_result_8hpp}{Result.hpp}}"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_validation_type_8hpp}{parsing/schema/ValidationType.hpp}}"{}}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacerfl}{rfl}}\ \{}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class\ }\mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}},\ \textcolor{keyword}{class}...\ Cs>}
\DoxyCodeLine{00016\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structrfl_1_1_any_of}{AnyOf}}\ \{}
\DoxyCodeLine{00017\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ T>}
\DoxyCodeLine{00018\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classrfl_1_1_result}{rfl::Result<T>}}\ \mbox{\hyperlink{structrfl_1_1_any_of_ab6d374f2cd014b397c101765e4e0bcff}{validate}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \_value)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structrfl_1_1_any_of_a1af21bd81bf18aecf75516015d251d01}{validate\_impl}}<\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}},\ Cs...>(\_value,\ \{\});}
\DoxyCodeLine{00020\ \ \ \}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ T>}
\DoxyCodeLine{00023\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{structrfl_1_1parsing_1_1schema_1_1_validation_type}{parsing::schema::ValidationType}}\ \mbox{\hyperlink{structrfl_1_1_any_of_a3c8613663b617e3bbfa295c16171bf75}{to\_schema}}()\ \{}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keyword}{using\ }ValidationType\ =\ \mbox{\hyperlink{structrfl_1_1parsing_1_1schema_1_1_validation_type}{parsing::schema::ValidationType}};}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{test__deferred__pipelines_8cpp_aac53cc74cffcb6997a1dfb1ecce3d25b}{types}}\ =\ std::vector<ValidationType>(}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \{C::template\ \mbox{\hyperlink{structrfl_1_1_any_of_a3c8613663b617e3bbfa295c16171bf75}{to\_schema<T>}}(),\ Cs::template\ \mbox{\hyperlink{structrfl_1_1_any_of_a3c8613663b617e3bbfa295c16171bf75}{to\_schema<T>}}()...\});}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordflow}{return}\ ValidationType\{ValidationType::AnyOf\{.types\_\ =\ \mbox{\hyperlink{test__deferred__pipelines_8cpp_aac53cc74cffcb6997a1dfb1ecce3d25b}{types}}\}\};}
\DoxyCodeLine{00028\ \ \ \}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00031\ \ \ \textcolor{keyword}{static}\ std::string\ \mbox{\hyperlink{structrfl_1_1_any_of_a303723a200ef1d749de4ca0599accb13}{make\_error\_message}}(\textcolor{keyword}{const}\ std::vector<Error>\&\ \_errors)\ \{}
\DoxyCodeLine{00032\ \ \ \ \ std::stringstream\ stream;}
\DoxyCodeLine{00033\ \ \ \ \ stream\ <<\ \textcolor{stringliteral}{"{}Expected\ at\ least\ one\ of\ the\ following\ validations\ to\ pass,\ but\ "{}}}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}none\ of\ them\ did:"{}};}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ \_errors.size();\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \ \ stream\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}\ <<\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ +\ 1\ <<\ \textcolor{stringliteral}{"{})\ "{}}\ <<\ \_errors.at(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}).what();}
\DoxyCodeLine{00037\ \ \ \ \ \}}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordflow}{return}\ stream.str();}
\DoxyCodeLine{00039\ \ \ \}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class\ }\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{class\ }Head,\ \textcolor{keyword}{class}...\ Tail>}
\DoxyCodeLine{00042\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classrfl_1_1_result}{rfl::Result<T>}}\ \mbox{\hyperlink{structrfl_1_1_any_of_a1af21bd81bf18aecf75516015d251d01}{validate\_impl}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \_value,}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<Error>\ \_errors)\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ handle\_err\ =\ [\&](\mbox{\hyperlink{classrfl_1_1_error}{Error}}\&\&\ \_err)\ -\/>\ \mbox{\hyperlink{classrfl_1_1_result}{rfl::Result<T>}}\ \{}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \_errors.push\_back(std::forward<Error>(\_err));}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (\textcolor{keyword}{sizeof}...(Tail)\ ==\ 0)\ \{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacerfl_a6625864c6c297dfdc3d3c3ee3181dd8c}{error}}(\mbox{\hyperlink{structrfl_1_1_any_of_a303723a200ef1d749de4ca0599accb13}{make\_error\_message}}(\_errors));}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structrfl_1_1_any_of_a1af21bd81bf18aecf75516015d251d01}{validate\_impl}}<\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ Tail...>(}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ \_value,\ std::forward<std::vector<Error>>(\_errors));}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00052\ \ \ \ \ \};}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keywordflow}{return}\ Head::validate(\_value).\mbox{\hyperlink{classrfl_1_1_result_aafad8a0847fa347afd1c464c51d9fc6d}{or\_else}}(handle\_err);}
\DoxyCodeLine{00054\ \ \ \}}
\DoxyCodeLine{00055\ \};}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \}\ \ \textcolor{comment}{//\ namespace\ rfl}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
