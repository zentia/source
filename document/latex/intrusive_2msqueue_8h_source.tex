\doxysection{msqueue.\+h}
\hypertarget{intrusive_2msqueue_8h_source}{}\label{intrusive_2msqueue_8h_source}\index{external/libcds/cds/intrusive/msqueue.h@{external/libcds/cds/intrusive/msqueue.h}}
\mbox{\hyperlink{intrusive_2msqueue_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ (c)\ 2006-\/2018\ Maxim\ Khizhinsky}}
\DoxyCodeLine{00002\ \textcolor{comment}{//}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ Distributed\ under\ the\ Boost\ Software\ License,\ Version\ 1.0.\ (See\ accompanying}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ file\ LICENSE\ or\ copy\ at\ http://www.boost.org/LICENSE\_1\_0.txt)}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#ifndef\ CDSLIB\_INTRUSIVE\_MSQUEUE\_H}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#define\ CDSLIB\_INTRUSIVE\_MSQUEUE\_H}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <type\_traits>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{single__link__struct_8h}{cds/intrusive/details/single\_link\_struct.h}}>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{external_2libcds_2cds_2algo_2atomic_8h}{cds/algo/atomic.h}}>}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds}{cds}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds_1_1intrusive}{intrusive}}\ \{}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue}{msqueue}}\ \{}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ GC,\ \textcolor{keyword}{typename}\ Tag\ =\ opt::none\ >}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}\ =\ \mbox{\hyperlink{structcds_1_1intrusive_1_1single__link_1_1node}{cds::intrusive::single\_link::node<\ GC,\ Tag\ >}};}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\ \textcolor{keyword}{typename}...\ Options\ >}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_a48c0a873eaaa19d4f5f3fec8fb659f66}{base\_hook}}\ =\ \mbox{\hyperlink{structcds_1_1intrusive_1_1single__link_1_1base__hook}{cds::intrusive::single\_link::base\_hook}}<\ Options...>;}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\ \textcolor{keywordtype}{size\_t}\ MemberOffset,\ \textcolor{keyword}{typename}...\ Options\ >}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ac09b0913e0568808e25aaf919325fbb5}{member\_hook}}\ =\ \mbox{\hyperlink{structcds_1_1intrusive_1_1single__link_1_1member__hook}{cds::intrusive::single\_link::member\_hook}}<\ MemberOffset,\ Options...\ >;}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ NodeTraits,\ \textcolor{keyword}{typename}...\ Options\ >}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_a938d105847a15fda6b4e7ffe4d5e7ed4}{traits\_hook}}\ =\ \mbox{\hyperlink{structcds_1_1intrusive_1_1single__link_1_1traits__hook}{cds::intrusive::single\_link::traits\_hook}}<\ NodeTraits,\ Options...\ >;}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Counter\ =\ cds::atomicity::event\_counter\ >}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat}{stat}}}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_counter}{Counter}}\ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a3759b8db81eb95bea890f969436b59c8}{counter\_type}};\ \ \ }
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a3759b8db81eb95bea890f969436b59c8}{counter\_type}}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_ae42dd39b59201de4871f3c8d3307720c}{m\_EnqueueCount}}\ \ \ \ \ \ ;\ \ }
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a3759b8db81eb95bea890f969436b59c8}{counter\_type}}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a8871dd96bf7d142965ec98eecda33de9}{m\_DequeueCount}}\ \ \ \ \ \ ;\ \ }
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a3759b8db81eb95bea890f969436b59c8}{counter\_type}}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_af3e3843d6c2eb6d2c02d798ba9f6f661}{m\_EnqueueRace}}\ \ \ \ \ \ \ ;\ \ }
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a3759b8db81eb95bea890f969436b59c8}{counter\_type}}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a7780ed7ed58cda66bd3b1b7070f2c88b}{m\_DequeueRace}}\ \ \ \ \ \ \ ;\ \ }
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a3759b8db81eb95bea890f969436b59c8}{counter\_type}}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_ac42338941475ef8f368173af04f534fe}{m\_AdvanceTailError}}\ \ ;\ \ }
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a3759b8db81eb95bea890f969436b59c8}{counter\_type}}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a325408cb5063fe134bbecdf3957de788}{m\_BadTail}}\ \ \ \ \ \ \ \ \ \ \ ;\ \ }
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a3759b8db81eb95bea890f969436b59c8}{counter\_type}}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a238e7ea8e02d914cb2f7452ff7e2ea10}{m\_EmptyDequeue}}\ \ \ \ \ \ ;\ \ }
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a44ea370572cf59d8e8868aaeeb1eeade}{onEnqueue}}()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_ae42dd39b59201de4871f3c8d3307720c}{m\_EnqueueCount}};\ \}}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_aa4ee0b28e49acfc61a8308df2967b25e}{onDequeue}}()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a8871dd96bf7d142965ec98eecda33de9}{m\_DequeueCount}};\ \}}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_ac16eda52e6675fcd95493c383b33967e}{onEnqueueRace}}()\ \ \ \ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_af3e3843d6c2eb6d2c02d798ba9f6f661}{m\_EnqueueRace}};\ \}}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_afe1cfecf1931d8aec22eaf9a231cbef6}{onDequeueRace}}()\ \ \ \ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a7780ed7ed58cda66bd3b1b7070f2c88b}{m\_DequeueRace}};\ \}}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a69d82212c11bc336934b545f420efab0}{onAdvanceTailFailed}}()\ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_ac42338941475ef8f368173af04f534fe}{m\_AdvanceTailError}};\ \}}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a25227b5c7769a3d319d26c6b70f5d6b6}{onBadTail}}()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a325408cb5063fe134bbecdf3957de788}{m\_BadTail}};\ \}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_adb43855ff5b519c02f983fa8c3d94b07}{onEmptyDequeue}}()\ \ \ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a238e7ea8e02d914cb2f7452ff7e2ea10}{m\_EmptyDequeue}};\ \}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ reset()}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_ae42dd39b59201de4871f3c8d3307720c}{m\_EnqueueCount}}.reset();}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a8871dd96bf7d142965ec98eecda33de9}{m\_DequeueCount}}.reset();}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_af3e3843d6c2eb6d2c02d798ba9f6f661}{m\_EnqueueRace}}.reset();}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a7780ed7ed58cda66bd3b1b7070f2c88b}{m\_DequeueRace}}.reset();}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_ac42338941475ef8f368173af04f534fe}{m\_AdvanceTailError}}.reset();}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a325408cb5063fe134bbecdf3957de788}{m\_BadTail}}.reset();}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a238e7ea8e02d914cb2f7452ff7e2ea10}{m\_EmptyDequeue}}.reset();}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ stat\&\ operator\ +=(\ stat\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ )}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_ae42dd39b59201de4871f3c8d3307720c}{m\_EnqueueCount}}\ +=\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}.m\_EnqueueCount.get();}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a8871dd96bf7d142965ec98eecda33de9}{m\_DequeueCount}}\ +=\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}.m\_DequeueCount.get();}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_af3e3843d6c2eb6d2c02d798ba9f6f661}{m\_EnqueueRace}}\ +=\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}.m\_EnqueueRace.get();}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a7780ed7ed58cda66bd3b1b7070f2c88b}{m\_DequeueRace}}\ +=\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}.m\_DequeueRace.get();}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_ac42338941475ef8f368173af04f534fe}{m\_AdvanceTailError}}\ +=\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}.m\_AdvanceTailError.get();}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a325408cb5063fe134bbecdf3957de788}{m\_BadTail}}\ +=\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}.m\_BadTail.get();}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1stat_a238e7ea8e02d914cb2f7452ff7e2ea10}{m\_EmptyDequeue}}\ +=\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}.m\_EmptyDequeue.get();}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1empty__stat}{empty\_stat}}}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onEnqueue()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onDequeue()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onEnqueueRace()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onDequeueRace()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onAdvanceTailFailed()\textcolor{keyword}{\ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onBadTail()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onEmptyDequeue()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ reset()\ \{\}}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1empty__stat}{empty\_stat}}\&\ operator\ +=(\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1empty__stat}{empty\_stat}}\ \textcolor{keyword}{const}\&\ )}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1traits}{traits}}}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structcds_1_1backoff_1_1empty}{cds::backoff::empty}}\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1traits_a627a3d8e9b0fbb08df6665b796f55924}{back\_off}};}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_a48c0a873eaaa19d4f5f3fec8fb659f66}{msqueue::base\_hook<>}}\ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1traits_aa31022b0ca1d5c5938cb4edb781f5669}{hook}};}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1opt_1_1v_1_1empty__disposer}{opt::v::empty\_disposer}}\ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1traits_af08bf9c6ad7d26f76fdda91ba43e2c8a}{disposer}};}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classcds_1_1atomicity_1_1empty__item__counter}{atomicity::empty\_item\_counter}}\ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1traits_a4fb0087f2753e1b0cddd33ba1664cb9f}{item\_counter}};}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1empty__stat}{msqueue::empty\_stat}}\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1traits_ac16a297f9f733c81201980e1bbd1181b}{stat}};}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structcds_1_1opt_1_1v_1_1relaxed__ordering}{opt::v::relaxed\_ordering}}\ \ \ \ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1traits_aab742c8d7095c3a8b22211a501085340}{memory\_model}};}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1opt_a106b4114c23f57e01b00e8bdeca3e5b3}{opt::link\_check\_type}}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1traits_a3ef5388a8cf1cd97bafa61c688d46f28}{link\_checker}}\ =\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1opt_a106b4114c23f57e01b00e8bdeca3e5b3a97917de795ef08c17c8f29826c8c2d38}{opt::debug\_check\_link}};}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum}\ \{\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1traits_ac96ed3cc80fc63c0a3867a0a7628bd0aaffb9b8813f680af98c074538d9dc88be}{padding}}\ =\ \mbox{\hyperlink{namespacecds_1_1opt_a3e664c94f4a1373ec267d19df5cc3beaad2c97dd99643d7a2c379cc7e0750028a}{opt::cache\_line\_padding}}\ \};}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}...\ Options>}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1make__traits}{make\_traits}}\ \{}
\DoxyCodeLine{00213\ \textcolor{preprocessor}{\#\ \ \ ifdef\ CDS\_DOXYGEN\_INVOKED}}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ implementation\_defined\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1make__traits_a8ed08acff3ea1411036ec4a8e8a9caf5}{type}};\ \ \ }
\DoxyCodeLine{00215\ \textcolor{preprocessor}{\#\ \ \ else}}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structcds_1_1opt_1_1make__options}{cds::opt::make\_options}}<}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structcds_1_1opt_1_1find__type__traits}{cds::opt::find\_type\_traits}}<\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1traits}{traits}},\ Options...\ >\mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1make__traits_a8ed08acff3ea1411036ec4a8e8a9caf5}{::type}}}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ,\ Options...}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ >\mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1make__traits_a8ed08acff3ea1411036ec4a8e8a9caf5}{::type}}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1msqueue_1_1make__traits_a8ed08acff3ea1411036ec4a8e8a9caf5}{type}};}
\DoxyCodeLine{00220\ \textcolor{preprocessor}{\#\ \ \ endif}}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00222\ \ \ \ \ \}\ \textcolor{comment}{//\ namespace\ msqueue}}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00225\ }
\DoxyCodeLine{00318\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ GC,\ \textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Traits\ =\ msqueue::traits>}
\DoxyCodeLine{00319\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_a592c167532cb11f47da5cac01d5e7c85}{MSQueue}}}
\DoxyCodeLine{00320\ \ \ \ \ \{}
\DoxyCodeLine{00321\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ GC\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_aa3a20546d020a478a4942728533801d1}{gc}};\ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_aa7a573590ee813bb066a63c862760193}{value\_type}};\ \ }
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ Traits\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_a330a1484e8c47e5ccff35de270859eeb}{traits}};\ \ }
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::hook\ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_a03135d1bed30d7cfa4ae0f30a39ad851}{hook}};\ \ \ \ \ \ \ }
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ hook::node\_type\ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}};\ \ }
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::disposer\ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_ac58854d61247d1e623057d3a48ac43bd}{disposer}};\ \ \ }
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1get__node__traits}{get\_node\_traits<\ value\_type,\ node\_type,\ hook>::type}}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_a7da513814196d71f868b6cc227501cf9}{node\_traits}};\ \ \ }
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1single__link_1_1get__link__checker}{single\_link::get\_link\_checker<\ node\_type,\ traits::link\_checker\ >::type}}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_aebd3c7d25768216c9f8beb10c04aa0c5}{link\_checker}};\ \ \ }
\DoxyCodeLine{00331\ }
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::back\_off\ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_a19f75b552b60516d8dd4847c127b3cc1}{back\_off}};\ \ \ \ \ \ \ }
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::item\_counter\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_a90d9387fa385d624f6ae1527edf4727c}{item\_counter}};\ }
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::stat\ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_a42b178b20ddb75388f341299d4dee872}{stat}};\ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::memory\_model\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_a916ad5e018e31bda1f52b903f628a3ca}{memory\_model}};\ }
\DoxyCodeLine{00336\ }
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ GC2,\ \textcolor{keyword}{typename}\ T2,\ \textcolor{keyword}{typename}\ Traits2>}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcds_1_1intrusive_1_1_m_s_queue_1_1rebind}{rebind}}\ \{}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue}{MSQueue<\ GC2,\ T2,\ Traits2\ >}}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1_m_s_queue_1_1rebind_a719a347e3558714b18f0846a4d6844de}{other}};\ \ \ }
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_aedd7522fb799d9005aecbf2241f87e82}{c\_nHazardPtrCount}}\ =\ 2;\ }
\DoxyCodeLine{00344\ }
\DoxyCodeLine{00345\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00347\ }
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ GC\ and\ node\_type::gc\ must\ be\ the\ same}}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}((std::is\_same<gc,\ typename\ node\_type::gc>::value),\ \textcolor{stringliteral}{"{}GC\ and\ node\_type::gc\ must\ be\ the\ same"{}});}
\DoxyCodeLine{00350\ }
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ node\_type::atomic\_node\_ptr\ atomic\_node\_ptr;}
\DoxyCodeLine{00352\ }
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ atomic\_node\_ptr\ \ \ \ m\_pHead;\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ opt::details::apply\_padding<\ atomic\_node\_ptr,\ traits::padding\ >::padding\_type\ pad1\_;}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ atomic\_node\_ptr\ \ \ \ m\_pTail;\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ opt::details::apply\_padding<\ atomic\_node\_ptr,\ traits::padding\ >::padding\_type\ pad2\_;}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}}\ \ \ \ \ \ \ \ \ \ m\_Dummy;\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ opt::details::apply\_padding<\ node\_type,\ traits::padding\ >::padding\_type\ pad3\_;}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_a90d9387fa385d624f6ae1527edf4727c}{item\_counter}}\ \ \ \ \ \ \ \ m\_ItemCounter;\ }
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_a42b178b20ddb75388f341299d4dee872}{stat}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_Stat;\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }dequeue\_result\ \{}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ gc::template\ GuardArray<2>\ \ guards;}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}}\ *\ pHead;}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}}\ *\ pNext;}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ do\_dequeue(\ dequeue\_result\&\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}\ )}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}}\ *\ pNext;}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_a19f75b552b60516d8dd4847c127b3cc1}{back\_off}}\ bkoff;}
\DoxyCodeLine{00375\ }
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}}\ *\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}};}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \textcolor{keyword}{true}\ )\ \{}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}\ =\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}.guards.protect(\ 0,\ m\_pHead,\ [](\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ -\/>\ value\_type\ *\ \{\ \textcolor{keywordflow}{return}\ node\_traits::to\_value\_ptr(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ );\});}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pNext\ =\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}.guards.protect(\ 1,\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}-\/>m\_pNext,\ [](\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ -\/>\ value\_type\ *\ \{\ return\ node\_traits::to\_value\_ptr(\ p\ );\});}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ m\_pHead.load(memory\_model::memory\_order\_acquire)\ !=\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}\ )}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00382\ }
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNext\ ==\ \textcolor{keyword}{nullptr}\ )\ \{}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_Stat.onEmptyDequeue();}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \ \ \ \textcolor{comment}{//\ empty\ queue}}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00387\ }
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}}\ *\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ m\_pTail.load(memory\_model::memory\_order\_acquire);}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}\ ==\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ \{}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ It\ is\ needed\ to\ help\ enqueue}}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_pTail.compare\_exchange\_strong(\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}},\ pNext,\ memory\_model::memory\_order\_release,\ atomics::memory\_order\_relaxed\ );}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_Stat.onBadTail();}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00395\ }
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ m\_pHead.compare\_exchange\_strong(\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}},\ pNext,\ memory\_model::memory\_order\_acquire,\ atomics::memory\_order\_relaxed\ ))}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_Stat.onDequeueRace();}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bkoff();}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00402\ }
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/m\_ItemCounter;}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \ \ \ \ m\_Stat.onDequeue();}
\DoxyCodeLine{00405\ }
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}.pHead\ =\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}};}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}.pNext\ =\ pNext;}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ clear\_links(\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}}\ *\ pNode\ )}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \ \ \ \ pNode-\/>m\_pNext.store(\ \textcolor{keyword}{nullptr},\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00415\ }
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ dispose\_result(\ dequeue\_result\&\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}\ )}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \ \ \ \ dispose\_node(\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}.pHead\ );}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00420\ }
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ dispose\_node(\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Note\ about\ the\ dummy\ node:}}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ cannot\ clear\ m\_Dummy\ here\ since\ it\ leads\ to\ ABA.}}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ On\ the\ other\ hand,\ we\ cannot\ use\ deferred\ clear\_links(\ \&m\_Dummy\ )\ call\ via}}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ HP\ retiring\ cycle\ since\ m\_Dummy\ is\ member\ of\ MSQueue\ and\ may\ be\ destroyed}}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ before\ HP\ retiring\ cycle\ invocation.}}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ So,\ we\ will\ never\ clear\ m\_Dummy}}
\DoxyCodeLine{00429\ }
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }disposer\_thunk\ \{}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ operator()(\ value\_type\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\textcolor{keyword}{\ const}}
\DoxyCodeLine{00432\ \textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ !=\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MSQueue::clear\_links(\ node\_traits::to\_node\_ptr(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ ));}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ disposer()(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}});}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00438\ }
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ !=\ \&m\_Dummy\ )}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ gc::template\ retire<disposer\_thunk>(\ node\_traits::to\_value\_ptr(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ ));}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00443\ }
\DoxyCodeLine{00444\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_a592c167532cb11f47da5cac01d5e7c85}{MSQueue}}()}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \ \ \ \ :\ m\_pHead(\ \&m\_Dummy\ )}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \ \ \ \ ,\ m\_pTail(\ \&m\_Dummy\ )}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00450\ }
\DoxyCodeLine{00452\ }
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_a61ba46e34b52f389d5855b30897f022a}{\string~MSQueue}}()}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_aabedbb8a0e9e24c2672524dccb42f624}{clear}}();}
\DoxyCodeLine{00459\ }
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}}\ *\ pHead\ =\ m\_pHead.load(memory\_model::memory\_order\_relaxed);}
\DoxyCodeLine{00461\ }
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pHead\ !=\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pHead\ ==\ m\_pTail.load(memory\_model::memory\_order\_relaxed));}
\DoxyCodeLine{00464\ }
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \ \ \ \ m\_pHead.store(\ \textcolor{keyword}{nullptr},\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \ \ \ \ m\_pTail.store(\ \textcolor{keyword}{nullptr},\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{00467\ }
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \ \ \ \ dispose\_node(\ pHead\ );}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00470\ }
\DoxyCodeLine{00472\ }
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_ae7445825d5438bda4c8ad9cb991ee148}{enqueue}}(\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_aa7a573590ee813bb066a63c862760193}{value\_type}}\&\ val\ )}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}}\ *\ pNew\ =\ node\_traits::to\_node\_ptr(\ val\ );}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \ \ \ \ link\_checker::is\_empty(\ pNew\ );}
\DoxyCodeLine{00479\ }
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ gc::Guard\ guard;}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_a19f75b552b60516d8dd4847c127b3cc1}{back\_off}}\ bkoff;}
\DoxyCodeLine{00482\ }
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}}\ *\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}};}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \textcolor{keyword}{true}\ )\ \{}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ guard.protect(\ m\_pTail,\ [](\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ -\/>\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_aa7a573590ee813bb066a63c862760193}{value\_type}}\ *\ \{\ \textcolor{keywordflow}{return}\ node\_traits::to\_value\_ptr(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ );\});}
\DoxyCodeLine{00486\ }
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}}\ *\ pNext\ =\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}-\/>m\_pNext.load(memory\_model::memory\_order\_acquire);}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNext\ !=\ \textcolor{keyword}{nullptr}\ )\ \{}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tail\ is\ misplaced,\ advance\ it}}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_pTail.compare\_exchange\_weak(\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}},\ pNext,\ memory\_model::memory\_order\_release,\ atomics::memory\_order\_relaxed\ );}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_Stat.onBadTail();}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00494\ }
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}}\ *\ tmp\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}-\/>m\_pNext.compare\_exchange\_strong(\ tmp,\ pNew,\ memory\_model::memory\_order\_release,\ atomics::memory\_order\_relaxed\ ))}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00498\ }
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_Stat.onEnqueueRace();}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bkoff();}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \ \ \ \ ++m\_ItemCounter;}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \ \ \ \ m\_Stat.onEnqueue();}
\DoxyCodeLine{00504\ }
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !m\_pTail.compare\_exchange\_strong(\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}},\ pNew,\ memory\_model::memory\_order\_release,\ atomics::memory\_order\_relaxed\ ))}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_Stat.onAdvanceTailFailed();}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00509\ }
\DoxyCodeLine{00511\ }
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_aa7a573590ee813bb066a63c862760193}{value\_type}}\ *\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_acbfac1d0165a1060d4d4f82dea4b44ec}{dequeue}}()}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \ \ \ \ dequeue\_result\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}};}
\DoxyCodeLine{00537\ }
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ do\_dequeue(\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}\ ))\ \{}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dispose\_result(\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}\ );}
\DoxyCodeLine{00540\ }
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ node\_traits::to\_value\_ptr(\ *\mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}.pNext\ );}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00545\ }
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_a0e64988e23a74337c5f39ffd94f88d6d}{push}}(\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_aa7a573590ee813bb066a63c862760193}{value\_type}}\&\ val\ )}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_ae7445825d5438bda4c8ad9cb991ee148}{enqueue}}(\ val\ );}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00551\ }
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_aa7a573590ee813bb066a63c862760193}{value\_type}}\ *\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_a2bd441d69d8f18b2564a82effb65728d}{pop}}()}
\DoxyCodeLine{00554\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00555\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_acbfac1d0165a1060d4d4f82dea4b44ec}{dequeue}}();}
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00557\ }
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_aebd1864a172d3058a8ec5e978db299c7}{empty}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00560\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ gc::Guard\ guard;}
\DoxyCodeLine{00562\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ guard.protect(\ m\_pHead,\ [](\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_abbb857c44849eff8d26bd280bd8572f2}{node\_type}}\ *\ pNode\ )\ -\/>\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_aa7a573590ee813bb066a63c862760193}{value\_type}}\ *\ \{\ \textcolor{keywordflow}{return}\ node\_traits::to\_value\_ptr(\ pNode\ );\});}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>m\_pNext.load(\ memory\_model::memory\_order\_relaxed\ )\ ==\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00565\ }
\DoxyCodeLine{00567\ }
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_aabedbb8a0e9e24c2672524dccb42f624}{clear}}()}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_acbfac1d0165a1060d4d4f82dea4b44ec}{dequeue}}());}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00576\ }
\DoxyCodeLine{00578\ }
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_a6f6c43d26ac3f1dfc5b59245c744379d}{size}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00586\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_ItemCounter.value();}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00589\ }
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_a42b178b20ddb75388f341299d4dee872}{stat}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_m_s_queue_aa4161ed987ac1c79201544531843c4a5}{statistics}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00592\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00593\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_Stat;}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00595\ \ \ \ \ \};}
\DoxyCodeLine{00596\ }
\DoxyCodeLine{00597\ \}\}\ \textcolor{comment}{//\ namespace\ cds::intrusive}}
\DoxyCodeLine{00598\ }
\DoxyCodeLine{00599\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \#ifndef\ CDSLIB\_INTRUSIVE\_MSQUEUE\_H}}

\end{DoxyCode}
