\doxysection{concurrent\+\_\+queue.\+cpp}
\hypertarget{concurrent__queue_8cpp_source}{}\label{concurrent__queue_8cpp_source}\index{external/taskflow/3rd-\/party/tbb/src/tbb/concurrent\_queue.cpp@{external/taskflow/3rd-\/party/tbb/src/tbb/concurrent\_queue.cpp}}
\mbox{\hyperlink{concurrent__queue_8cpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{tbb__stddef_8h}{tbb/tbb\_stddef.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{tbb__machine_8h}{tbb/tbb\_machine.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{tbb__exception_8h}{tbb/tbb\_exception.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{comment}{//\ Define\ required\ to\ satisfy\ test\ in\ internal\ file.}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#define\ \ \_\_TBB\_concurrent\_queue\_H}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{__concurrent__queue__impl_8h}{tbb/internal/\_concurrent\_queue\_impl.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{concurrent__monitor_8h}{concurrent\_monitor.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{itt__notify_8h}{itt\_notify.h}}"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ <new>}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <cstring>}\ \ \ \textcolor{comment}{//\ for\ memset()}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#if\ defined(\_MSC\_VER)\ \&\&\ defined(\_Wp64)}}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{comment}{//\ Workaround\ for\ overzealous\ compiler\ warnings\ in\ /Wp64\ mode}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ warning\ (disable:\ 4267)}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#define\ RECORD\_EVENTS\ 0}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\ \{}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinternal}{internal}}\ \{}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{typedef}\ concurrent\_queue\_base\_v3\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}};}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{namespacetbb_1_1internal_a7c22b9cabfe84a547f0ff26a1aa3e4a4}{ticket}};}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00047\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue}{micro\_queue}}\ \{}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{typedef}\ concurrent\_queue\_base::page\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_afa7239963be1c09c06dcbd0bfdfa622a}{page}};}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ab8fc76921acfa4faa75fe3af5d54cb08}{micro\_queue\_pop\_finalizer}};}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic<page*>}}\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ad6580c7faceb740b233e47405df8910b}{head\_page}};}
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic<ticket>}}\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a32f14855b18a76f43d479c58e5b30dcf}{head\_counter}};}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic<page*>}}\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a3acb62aca16960a5f47de9d1d463e305}{tail\_page}};}
\DoxyCodeLine{00056\ \ \ \ \ \mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic<ticket>}}\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a321f673cd95d39318a4b565ebff85ddf}{tail\_counter}};}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1spin__mutex}{spin\_mutex}}\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ad18d15543690c01325113fdd9585c14e}{page\_mutex}};}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a59ecd3b2aaf7e0f9d6f4847e0db87088}{push}}(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ item,\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ae100df0e4b20fb2cec1ea0e5ab50cad4}{ticket}}\ k,\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ base,}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ concurrent\_queue\_base::copy\_specifics\ op\_type\ );}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_abf8b2f9f05a9152a8c53ec6f9551d0d0}{abort\_push}}(\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ae100df0e4b20fb2cec1ea0e5ab50cad4}{ticket}}\ k,\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ base\ );}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_acf53d0cdfd439273c8d3d52b860abe3f}{pop}}(\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}},\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ae100df0e4b20fb2cec1ea0e5ab50cad4}{ticket}}\ k,\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ base\ );}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue}{micro\_queue}}\&\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a7cce1248bacd9b29b296868bdd6b72dc}{assign}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue}{micro\_queue}}\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ base,}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ concurrent\_queue\_base::copy\_specifics\ op\_type\ );}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_afa7239963be1c09c06dcbd0bfdfa622a}{page}}*\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ac452eec7729e4ea11f227ce2f8793179}{make\_copy}}\ (\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ base,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_afa7239963be1c09c06dcbd0bfdfa622a}{page}}*\ src\_page,\ \textcolor{keywordtype}{size\_t}\ begin\_in\_page,}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ end\_in\_page,\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ae100df0e4b20fb2cec1ea0e5ab50cad4}{ticket}}\&\ g\_index,\ concurrent\_queue\_base::copy\_specifics\ op\_type\ )\ ;}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a6f97a68520f2c6a7cf67d03c476ca4ef}{make\_invalid}}(\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ae100df0e4b20fb2cec1ea0e5ab50cad4}{ticket}}\ k\ );}
\DoxyCodeLine{00074\ \};}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \textcolor{comment}{//\ we\ need\ to\ yank\ it\ out\ of\ micro\_queue\ because\ of\ concurrent\_queue\_base::deallocate\_page\ being\ virtual.}}
\DoxyCodeLine{00077\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_aa73c7115f3223283be32d1b43d5f551f}{micro\_queue\_pop\_finalizer}}:\ no\_copy\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keyword}{typedef}\ concurrent\_queue\_base::page\ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_a5afbe4e1e555f9e7b9bbe732a7f7dfca}{page}};}
\DoxyCodeLine{00079\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a7c22b9cabfe84a547f0ff26a1aa3e4a4}{ticket}}\ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_ac37c6c2f1290ba5107397c85ea3c1bea}{my\_ticket}};}
\DoxyCodeLine{00080\ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue}{micro\_queue}}\&\ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_a28410fb8ac239c31fcfddbf2650366bc}{my\_queue}};}
\DoxyCodeLine{00081\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_a5afbe4e1e555f9e7b9bbe732a7f7dfca}{page}}*\ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_a11d542728a4793246e2b91795b425cac}{my\_page}};}
\DoxyCodeLine{00082\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\ \&\mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_a8ecf85f11491251388ce9a7483968e6d}{base}};}
\DoxyCodeLine{00083\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00084\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_aa73c7115f3223283be32d1b43d5f551f}{micro\_queue\_pop\_finalizer}}(\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue}{micro\_queue}}\&\ \mbox{\hyperlink{namespacequeue}{queue}},\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}},\ \mbox{\hyperlink{namespacetbb_1_1internal_a7c22b9cabfe84a547f0ff26a1aa3e4a4}{ticket}}\ k,\ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_a5afbe4e1e555f9e7b9bbe732a7f7dfca}{page}}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ :}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_ac37c6c2f1290ba5107397c85ea3c1bea}{my\_ticket}}(k),\ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_a28410fb8ac239c31fcfddbf2650366bc}{my\_queue}}(\mbox{\hyperlink{namespacequeue}{queue}}),\ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_a11d542728a4793246e2b91795b425cac}{my\_page}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}),\ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_a8ecf85f11491251388ce9a7483968e6d}{base}}(\mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}})}
\DoxyCodeLine{00086\ \ \ \ \ \{\}}
\DoxyCodeLine{00087\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_ab8d3dd72cf30dbe954bdb21baa4186db}{\string~micro\_queue\_pop\_finalizer}}()\ \{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_a5afbe4e1e555f9e7b9bbe732a7f7dfca}{page}}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_a11d542728a4793246e2b91795b425cac}{my\_page}};}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ \{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1spin__mutex_1_1scoped__lock}{spin\_mutex::scoped\_lock}}\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_a28410fb8ac239c31fcfddbf2650366bc}{my\_queue}}.page\_mutex\ );}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_a5afbe4e1e555f9e7b9bbe732a7f7dfca}{page}}*\ \mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>next;}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_a28410fb8ac239c31fcfddbf2650366bc}{my\_queue}}.head\_page\ =\ \mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}};}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}\ )\ \{}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_a28410fb8ac239c31fcfddbf2650366bc}{my\_queue}}.tail\_page\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_a28410fb8ac239c31fcfddbf2650366bc}{my\_queue}}.head\_counter\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_ac37c6c2f1290ba5107397c85ea3c1bea}{my\_ticket}};}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer_a8ecf85f11491251388ce9a7483968e6d}{base}}.deallocate\_page(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ );}
\DoxyCodeLine{00100\ \ \ \ \ \}}
\DoxyCodeLine{00101\ \};}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtbb_1_1internal_1_1predicate__leq_a0dead2e3249ad951dd9c75c28b77d3c9}{predicate\_leq}}\ \{}
\DoxyCodeLine{00104\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a7c22b9cabfe84a547f0ff26a1aa3e4a4}{ticket}}\ \mbox{\hyperlink{structtbb_1_1internal_1_1predicate__leq_ae6ea06e6ae08dc6bc08af17734ac2bad}{t}};}
\DoxyCodeLine{00105\ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1predicate__leq_a0dead2e3249ad951dd9c75c28b77d3c9}{predicate\_leq}}(\ \mbox{\hyperlink{namespacetbb_1_1internal_a7c22b9cabfe84a547f0ff26a1aa3e4a4}{ticket}}\ t\_\ )\ :\ \mbox{\hyperlink{structtbb_1_1internal_1_1predicate__leq_ae6ea06e6ae08dc6bc08af17734ac2bad}{t}}(t\_)\ \{\}}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structtbb_1_1internal_1_1predicate__leq_a3815e59f1c507fae56de4db34642f205}{operator()\ }}(\ uintptr\_t\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\textcolor{keyword}{\ const\ }\{\textcolor{keywordflow}{return}\ (\mbox{\hyperlink{namespacetbb_1_1internal_a7c22b9cabfe84a547f0ff26a1aa3e4a4}{ticket}})\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}<=\mbox{\hyperlink{structtbb_1_1internal_1_1predicate__leq_ae6ea06e6ae08dc6bc08af17734ac2bad}{t}};\}}
\DoxyCodeLine{00107\ \};}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00112\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep}{concurrent\_queue\_rep}}\ \{}
\DoxyCodeLine{00113\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00114\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue}{micro\_queue}};}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_aa7f484e0bec0f6eae86633e61858716d}{phi}}\ =\ 3;}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a125288547cb8f625dd3eab221afb805c}{n\_queue}}\ =\ 8;}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a04f274a4f9002d3a43a7d64d03e174c8}{index}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a73f61d446bcef39f4f5bd244f542df48}{ticket}}\ k\ )\ \{}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ k*\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_aa7f484e0bec0f6eae86633e61858716d}{phi}}\%\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a125288547cb8f625dd3eab221afb805c}{n\_queue}};}
\DoxyCodeLine{00127\ \ \ \ \ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic<ticket>}}\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a3a8403b5974b88f0e094699fd5c394d8}{head\_counter}};}
\DoxyCodeLine{00130\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__monitor}{concurrent\_monitor}}\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a04570424b6e6ce565428558e6f20f9a7}{items\_avail}};}
\DoxyCodeLine{00131\ \ \ \ \ \mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic<size\_t>}}\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_ac6d1a308f4ab8138dafec71e5dbab230}{n\_invalid\_entries}};}
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_ac587cbb7db36c2d2a12c2ff57a72c8d3}{pad1}}[NFS\_MaxLineSize-\/((\textcolor{keyword}{sizeof}(\mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic<ticket>}})+\textcolor{keyword}{sizeof}(\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__monitor}{concurrent\_monitor}})+\textcolor{keyword}{sizeof}(\mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic<size\_t>}}))\&(NFS\_MaxLineSize-\/1))];}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \ \ \mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic<ticket>}}\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a31fb092e6fd20d6592c09abde10caf29}{tail\_counter}};}
\DoxyCodeLine{00135\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__monitor}{concurrent\_monitor}}\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a8c4f3493d9e8715a9de431dfed380e46}{slots\_avail}};}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a92556a2949174bab891dce8f576f80aa}{pad2}}[NFS\_MaxLineSize-\/((\textcolor{keyword}{sizeof}(\mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic<ticket>}})+\textcolor{keyword}{sizeof}(\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__monitor}{concurrent\_monitor}}))\&(NFS\_MaxLineSize-\/1))];}
\DoxyCodeLine{00137\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a62f9ac6fd9e15be139d0925d4e8d5142}{micro\_queue}}\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_af4b99a9900ae999c74e3494181d25461}{array}}[\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a125288547cb8f625dd3eab221afb805c}{n\_queue}}];}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a62f9ac6fd9e15be139d0925d4e8d5142}{micro\_queue}}\&\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a89df6c686b6828f3f9faced2152b732c}{choose}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a73f61d446bcef39f4f5bd244f542df48}{ticket}}\ k\ )\ \{}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ formula\ here\ approximates\ LRU\ in\ a\ cache-\/oblivious\ way.}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_af4b99a9900ae999c74e3494181d25461}{array}}[\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}}(k)];}
\DoxyCodeLine{00142\ \ \ \ \ \}}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic<unsigned>}}\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a241624713017287d63bc9ffd916f20c3}{abort\_counter}};}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ ptrdiff\_t\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a14abf0d3078a31c95e2d670d4ae8f192}{infinite\_capacity}}\ =\ ptrdiff\_t(\string~\textcolor{keywordtype}{size\_t}(0)/2);}
\DoxyCodeLine{00148\ \};}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \textcolor{preprocessor}{\#if\ \_MSC\_VER\ \&\&\ !defined(\_\_INTEL\_COMPILER)}}
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{comment}{//\ unary\ minus\ operator\ applied\ to\ unsigned\ type,\ result\ still\ unsigned}}
\DoxyCodeLine{00152\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ warning(\ push\ )}}
\DoxyCodeLine{00153\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ warning(\ disable:\ 4146\ )}}
\DoxyCodeLine{00154\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{namespacetbb_1_1internal_a462ebd57cc317fb33ef6542d470b4dbd}{static\_invalid\_page}};}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00159\ \textcolor{comment}{//\ micro\_queue}}
\DoxyCodeLine{00160\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00161\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a59ecd3b2aaf7e0f9d6f4847e0db87088}{micro\_queue::push}}(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ item,\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ae100df0e4b20fb2cec1ea0e5ab50cad4}{ticket}}\ k,\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ base,}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ concurrent\_queue\_base::copy\_specifics\ op\_type\ )\ \{}
\DoxyCodeLine{00163\ \ \ \ \ k\ \&=\ -\/\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a125288547cb8f625dd3eab221afb805c}{concurrent\_queue\_rep::n\_queue}};}
\DoxyCodeLine{00164\ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_afa7239963be1c09c06dcbd0bfdfa622a}{page}}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{comment}{//\ find\ index\ on\ page\ where\ we\ would\ put\ the\ data}}
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}}\ =\ modulo\_power\_of\_two(\ k/\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a125288547cb8f625dd3eab221afb805c}{concurrent\_queue\_rep::n\_queue}},\ base.items\_per\_page\ );}
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}}\ )\ \{\ \ \textcolor{comment}{//\ make\ a\ new\ page}}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \_\_TBB\_TRY\ \{}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ base.allocate\_page();}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \}\ \_\_TBB\_CATCH(...)\ \{}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ ++base.my\_rep-\/>n\_invalid\_entries;}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a6f97a68520f2c6a7cf67d03c476ca4ef}{make\_invalid}}(\ k\ );}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_TBB\_RETHROW();}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>mask\ =\ 0;}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>next\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00177\ \ \ \ \ \}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{comment}{//\ wait\ for\ my\ turn}}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a321f673cd95d39318a4b565ebff85ddf}{tail\_counter}}!=k\ )\ \textcolor{comment}{//\ The\ developer\ insisted\ on\ keeping\ first\ check\ out\ of\ the\ backoff\ loop}}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ atomic\_backoff\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}(\textcolor{keyword}{true});;\mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}.pause()\ )\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ae100df0e4b20fb2cec1ea0e5ab50cad4}{ticket}}\ \mbox{\hyperlink{ittnotify__static_8h_ae6f0aed6c2af4489760c7c13c49ae904}{tail}}\ =\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a321f673cd95d39318a4b565ebff85ddf}{tail\_counter}};}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{ittnotify__static_8h_ae6f0aed6c2af4489760c7c13c49ae904}{tail}}==k\ )\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{ittnotify__static_8h_ae6f0aed6c2af4489760c7c13c49ae904}{tail}}\&0x1\ )\ \{}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ no\ memory.\ throws\ an\ exception;\ assumes\ concurrent\_queue\_rep::n\_queue>1}}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++base.my\_rep-\/>n\_invalid\_entries;}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a61a681f9fd15fdb055f7725d6416ddf4}{throw\_exception}}(\ \mbox{\hyperlink{namespacetbb_1_1internal_ace88c7330e7f616616785ffb001e04f9ab2c2a7ef592ba18e01d0d7323cc9b085}{eid\_bad\_last\_alloc}}\ );}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ \{\ \textcolor{comment}{//\ page\ is\ newly\ allocated;\ insert\ in\ micro\_queue}}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1spin__mutex_1_1scoped__lock}{spin\_mutex::scoped\_lock}}\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ad18d15543690c01325113fdd9585c14e}{page\_mutex}}\ );}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_afa7239963be1c09c06dcbd0bfdfa622a}{page}}*\ \mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}\ =\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a3acb62aca16960a5f47de9d1d463e305}{tail\_page}}\ )}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}-\/>next\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ad6580c7faceb740b233e47405df8910b}{head\_page}}\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a3acb62aca16960a5f47de9d1d463e305}{tail\_page}}\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00198\ \ \ \ \ \}}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{keywordflow}{if}\ (item)\ \{}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a3acb62aca16960a5f47de9d1d463e305}{tail\_page}};}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{itt__notify_8h_adf75d9635323cc786c012fe69ceef418}{ITT\_NOTIFY}}(\ sync\_acquired,\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ );}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \_\_TBB\_TRY\ \{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ concurrent\_queue\_base::copy\ ==\ op\_type\ )\ \{}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ base.copy\_item(\ *\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ item\ );}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ concurrent\_queue\_base::move\ ==\ op\_type,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}concurrent\_queue\_base\_v8\&\textcolor{keyword}{>}(base).move\_item(\ *\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ item\ );}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \}\ \ \_\_TBB\_CATCH(...)\ \{}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ ++base.my\_rep-\/>n\_invalid\_entries;}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a321f673cd95d39318a4b565ebff85ddf}{tail\_counter}}\ +=\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a125288547cb8f625dd3eab221afb805c}{concurrent\_queue\_rep::n\_queue}};}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_TBB\_RETHROW();}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{itt__notify_8h_adf75d9635323cc786c012fe69ceef418}{ITT\_NOTIFY}}(\ \mbox{\hyperlink{ittnotify__static_8h_ac5a347b47a5603a1f30f6fbf790724b7}{sync\_releasing}},\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ );}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ no\ exception\ was\ thrown,\ mark\ item\ as\ present.}}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>mask\ |=\ uintptr\_t(1)<<\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}};}
\DoxyCodeLine{00218\ \ \ \ \ \}}
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{comment}{//\ no\ item;\ this\ was\ called\ from\ abort\_push}}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ ++base.my\_rep-\/>n\_invalid\_entries;}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a321f673cd95d39318a4b565ebff85ddf}{tail\_counter}}\ +=\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a125288547cb8f625dd3eab221afb805c}{concurrent\_queue\_rep::n\_queue}};}
\DoxyCodeLine{00223\ \}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ }
\DoxyCodeLine{00226\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_abf8b2f9f05a9152a8c53ec6f9551d0d0}{micro\_queue::abort\_push}}(\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ae100df0e4b20fb2cec1ea0e5ab50cad4}{ticket}}\ k,\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ base\ )\ \{}
\DoxyCodeLine{00227\ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a59ecd3b2aaf7e0f9d6f4847e0db87088}{push}}(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ k,\ base,\ concurrent\_queue\_base::copy);}
\DoxyCodeLine{00228\ \}}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_acf53d0cdfd439273c8d3d52b860abe3f}{micro\_queue::pop}}(\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}},\ \mbox{\hyperlink{namespacetbb_1_1internal_a7c22b9cabfe84a547f0ff26a1aa3e4a4}{ticket}}\ k,\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ base\ )\ \{}
\DoxyCodeLine{00231\ \ \ \ \ k\ \&=\ -\/\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a125288547cb8f625dd3eab221afb805c}{concurrent\_queue\_rep::n\_queue}};}
\DoxyCodeLine{00232\ \ \ \ \ spin\_wait\_until\_eq(\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a32f14855b18a76f43d479c58e5b30dcf}{head\_counter}},\ k\ );}
\DoxyCodeLine{00233\ \ \ \ \ spin\_wait\_while\_eq(\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a321f673cd95d39318a4b565ebff85ddf}{tail\_counter}},\ k\ );}
\DoxyCodeLine{00234\ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_afa7239963be1c09c06dcbd0bfdfa622a}{page}}\ *\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ad6580c7faceb740b233e47405df8910b}{head\_page}};}
\DoxyCodeLine{00235\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}}\ =\ modulo\_power\_of\_two(\ k/\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a125288547cb8f625dd3eab221afb805c}{concurrent\_queue\_rep::n\_queue}},\ base.items\_per\_page\ );}
\DoxyCodeLine{00237\ \ \ \ \ \textcolor{keywordtype}{bool}\ success\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00238\ \ \ \ \ \{}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1micro__queue__pop__finalizer}{micro\_queue\_pop\_finalizer}}\ finalizer(\ *\textcolor{keyword}{this},\ base,\ k+\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a125288547cb8f625dd3eab221afb805c}{concurrent\_queue\_rep::n\_queue}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}}==base.items\_per\_page-\/1\ ?\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ :\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>mask\ \&\ uintptr\_t(1)<<\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}}\ )\ \{}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ success\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{itt__notify_8h_adf75d9635323cc786c012fe69ceef418}{ITT\_NOTIFY}}(\ sync\_acquired,\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}\ );}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{itt__notify_8h_adf75d9635323cc786c012fe69ceef418}{ITT\_NOTIFY}}(\ sync\_acquired,\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ad6580c7faceb740b233e47405df8910b}{head\_page}}\ );}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ base.assign\_and\_destroy\_item(\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}},\ *\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}}\ );}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{itt__notify_8h_adf75d9635323cc786c012fe69ceef418}{ITT\_NOTIFY}}(\ \mbox{\hyperlink{ittnotify__static_8h_ac5a347b47a5603a1f30f6fbf790724b7}{sync\_releasing}},\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ad6580c7faceb740b233e47405df8910b}{head\_page}}\ );}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/base.my\_rep-\/>n\_invalid\_entries;}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00249\ \ \ \ \ \}}
\DoxyCodeLine{00250\ \ \ \ \ \textcolor{keywordflow}{return}\ success;}
\DoxyCodeLine{00251\ \}}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue}{micro\_queue}}\&\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a7cce1248bacd9b29b296868bdd6b72dc}{micro\_queue::assign}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue}{micro\_queue}}\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ base,}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ concurrent\_queue\_base::copy\_specifics\ op\_type\ )}
\DoxyCodeLine{00255\ \{}
\DoxyCodeLine{00256\ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a32f14855b18a76f43d479c58e5b30dcf}{head\_counter}}\ =\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.head\_counter;}
\DoxyCodeLine{00257\ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a321f673cd95d39318a4b565ebff85ddf}{tail\_counter}}\ =\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.tail\_counter;}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_afa7239963be1c09c06dcbd0bfdfa622a}{page}}*\ srcp\ =\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.head\_page;}
\DoxyCodeLine{00260\ \ \ \ \ \textcolor{keywordflow}{if}(\ srcp\ )\ \{}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ae100df0e4b20fb2cec1ea0e5ab50cad4}{ticket}}\ g\_index\ =\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a32f14855b18a76f43d479c58e5b30dcf}{head\_counter}};}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \_\_TBB\_TRY\ \{}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ n\_items\ \ =\ (\mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a321f673cd95d39318a4b565ebff85ddf}{tail\_counter}}-\/\mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a32f14855b18a76f43d479c58e5b30dcf}{head\_counter}})/\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a125288547cb8f625dd3eab221afb805c}{concurrent\_queue\_rep::n\_queue}};}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}}\ =\ modulo\_power\_of\_two(\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a32f14855b18a76f43d479c58e5b30dcf}{head\_counter}}/\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a125288547cb8f625dd3eab221afb805c}{concurrent\_queue\_rep::n\_queue}},\ base.items\_per\_page\ );}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ end\_in\_first\_page\ =\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}}+n\_items<base.items\_per\_page)?(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}}+n\_items):base.items\_per\_page;}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ad6580c7faceb740b233e47405df8910b}{head\_page}}\ =\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ac452eec7729e4ea11f227ce2f8793179}{make\_copy}}(\ base,\ srcp,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ end\_in\_first\_page,\ g\_index,\ op\_type\ );}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_afa7239963be1c09c06dcbd0bfdfa622a}{page}}*\ cur\_page\ =\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ad6580c7faceb740b233e47405df8910b}{head\_page}};}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ srcp\ !=\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.tail\_page\ )\ \{}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ srcp\ =\ srcp-\/>next;\ srcp!=\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.tail\_page;\ srcp=srcp-\/>next\ )\ \{}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cur\_page-\/>next\ =\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ac452eec7729e4ea11f227ce2f8793179}{make\_copy}}(\ base,\ srcp,\ 0,\ base.items\_per\_page,\ g\_index,\ op\_type\ );}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cur\_page\ =\ cur\_page-\/>next;}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ srcp==\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.tail\_page,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00277\ }
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ last\_index\ =\ modulo\_power\_of\_two(\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a321f673cd95d39318a4b565ebff85ddf}{tail\_counter}}/\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a125288547cb8f625dd3eab221afb805c}{concurrent\_queue\_rep::n\_queue}},\ base.items\_per\_page\ );}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ last\_index==0\ )\ last\_index\ =\ base.items\_per\_page;}
\DoxyCodeLine{00280\ }
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cur\_page-\/>next\ =\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ac452eec7729e4ea11f227ce2f8793179}{make\_copy}}(\ base,\ srcp,\ 0,\ last\_index,\ g\_index,\ op\_type\ );}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cur\_page\ =\ cur\_page-\/>next;}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a3acb62aca16960a5f47de9d1d463e305}{tail\_page}}\ =\ cur\_page;}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \}\ \_\_TBB\_CATCH(...)\ \{}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a6f97a68520f2c6a7cf67d03c476ca4ef}{make\_invalid}}(\ g\_index\ );}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_TBB\_RETHROW();}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00289\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ad6580c7faceb740b233e47405df8910b}{head\_page}}\ =\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a3acb62aca16960a5f47de9d1d463e305}{tail\_page}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00291\ \ \ \ \ \}}
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00293\ \}}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00295\ concurrent\_queue\_base::page*\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ac452eec7729e4ea11f227ce2f8793179}{micro\_queue::make\_copy}}(\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ base,}
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{keyword}{const}\ concurrent\_queue\_base::page*\ src\_page,\ \textcolor{keywordtype}{size\_t}\ begin\_in\_page,\ \textcolor{keywordtype}{size\_t}\ end\_in\_page,}
\DoxyCodeLine{00297\ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ae100df0e4b20fb2cec1ea0e5ab50cad4}{ticket}}\&\ g\_index,\ concurrent\_queue\_base::copy\_specifics\ op\_type\ )}
\DoxyCodeLine{00298\ \{}
\DoxyCodeLine{00299\ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_afa7239963be1c09c06dcbd0bfdfa622a}{page}}*\ new\_page\ =\ base.allocate\_page();}
\DoxyCodeLine{00300\ \ \ \ \ new\_page-\/>next\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00301\ \ \ \ \ new\_page-\/>mask\ =\ src\_page-\/>mask;}
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{keywordflow}{for}(\ ;\ begin\_in\_page!=end\_in\_page;\ ++begin\_in\_page,\ ++g\_index\ )}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ new\_page-\/>mask\ \&\ uintptr\_t(1)<<begin\_in\_page\ )\ \{}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ concurrent\_queue\_base::copy\ ==\ op\_type\ )\ \{}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ base.copy\_page\_item(\ *new\_page,\ begin\_in\_page,\ *src\_page,\ begin\_in\_page\ );}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ concurrent\_queue\_base::move\ ==\ op\_type,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}concurrent\_queue\_base\_v8\&\textcolor{keyword}{>}(base).move\_page\_item(\ *new\_page,\ begin\_in\_page,\ *src\_page,\ begin\_in\_page\ );}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00311\ \ \ \ \ \textcolor{keywordflow}{return}\ new\_page;}
\DoxyCodeLine{00312\ \}}
\DoxyCodeLine{00313\ }
\DoxyCodeLine{00314\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a6f97a68520f2c6a7cf67d03c476ca4ef}{micro\_queue::make\_invalid}}(\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ae100df0e4b20fb2cec1ea0e5ab50cad4}{ticket}}\ k\ )}
\DoxyCodeLine{00315\ \{}
\DoxyCodeLine{00316\ \ \ \ \ \textcolor{keyword}{static}\ concurrent\_queue\_base::page\ dummy\ =\ \{\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_afa7239963be1c09c06dcbd0bfdfa622a}{page}}*\textcolor{keyword}{>}((\textcolor{keywordtype}{void}*)1),\ 0\};}
\DoxyCodeLine{00317\ \ \ \ \ \textcolor{comment}{//\ mark\ it\ so\ that\ no\ more\ pushes\ are\ allowed.}}
\DoxyCodeLine{00318\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a462ebd57cc317fb33ef6542d470b4dbd}{static\_invalid\_page}}\ =\ \&dummy;}
\DoxyCodeLine{00319\ \ \ \ \ \{}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1spin__mutex_1_1scoped__lock}{spin\_mutex::scoped\_lock}}\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ad18d15543690c01325113fdd9585c14e}{page\_mutex}}\ );}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a321f673cd95d39318a4b565ebff85ddf}{tail\_counter}}\ =\ k+\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a125288547cb8f625dd3eab221afb805c}{concurrent\_queue\_rep::n\_queue}}+1;}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_afa7239963be1c09c06dcbd0bfdfa622a}{page}}*\ \mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}\ =\ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a3acb62aca16960a5f47de9d1d463e305}{tail\_page}}\ )}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}-\/>next\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_afa7239963be1c09c06dcbd0bfdfa622a}{page}}*\textcolor{keyword}{>}(\mbox{\hyperlink{namespacetbb_1_1internal_a462ebd57cc317fb33ef6542d470b4dbd}{static\_invalid\_page}});}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ad6580c7faceb740b233e47405df8910b}{head\_page}}\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_afa7239963be1c09c06dcbd0bfdfa622a}{page}}*\textcolor{keyword}{>}(\mbox{\hyperlink{namespacetbb_1_1internal_a462ebd57cc317fb33ef6542d470b4dbd}{static\_invalid\_page}});}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_a3acb62aca16960a5f47de9d1d463e305}{tail\_page}}\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_afa7239963be1c09c06dcbd0bfdfa622a}{page}}*\textcolor{keyword}{>}(\mbox{\hyperlink{namespacetbb_1_1internal_a462ebd57cc317fb33ef6542d470b4dbd}{static\_invalid\_page}});}
\DoxyCodeLine{00327\ \ \ \ \ \}}
\DoxyCodeLine{00328\ \}}
\DoxyCodeLine{00329\ }
\DoxyCodeLine{00330\ \textcolor{preprocessor}{\#if\ \_MSC\_VER\ \&\&\ !defined(\_\_INTEL\_COMPILER)}}
\DoxyCodeLine{00331\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ warning(\ pop\ )}}
\DoxyCodeLine{00332\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ warning\ 4146\ is\ back}}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00334\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00335\ \textcolor{comment}{//\ concurrent\_queue\_base}}
\DoxyCodeLine{00336\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00337\ concurrent\_queue\_base\_v3::concurrent\_queue\_base\_v3(\ \textcolor{keywordtype}{size\_t}\ item\_sz\ )\ \{}
\DoxyCodeLine{00338\ \ \ \ \ items\_per\_page\ =\ item\_sz<=\ \ 8\ ?\ 32\ :}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ item\_sz<=\ 16\ ?\ 16\ :}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ item\_sz<=\ 32\ ?\ \ 8\ :}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ item\_sz<=\ 64\ ?\ \ 4\ :}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ item\_sz<=128\ ?\ \ 2\ :}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1;}
\DoxyCodeLine{00344\ \ \ \ \ my\_capacity\ =\ size\_t(-\/1)/(item\_sz>1\ ?\ item\_sz\ :\ 2);}
\DoxyCodeLine{00345\ \ \ \ \ my\_rep\ =\ \mbox{\hyperlink{classtbb_1_1cache__aligned__allocator}{cache\_aligned\_allocator<concurrent\_queue\_rep>}}().\mbox{\hyperlink{classtbb_1_1cache__aligned__allocator_a99d05096f80877849cb31d80247e0f85}{allocate}}(1);}
\DoxyCodeLine{00346\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{harness_8h_a2cd6d606b7a354545b2cdecca67efa44}{is\_aligned}}(my\_rep,\ \mbox{\hyperlink{namespacetbb_1_1internal_a9694b519576433b7ce9af226bfc7c422}{NFS\_GetLineSize}}()),\ \textcolor{stringliteral}{"{}alignment\ error"{}}\ );}
\DoxyCodeLine{00347\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{harness_8h_a2cd6d606b7a354545b2cdecca67efa44}{is\_aligned}}(\&my\_rep-\/>head\_counter,\ \mbox{\hyperlink{namespacetbb_1_1internal_a9694b519576433b7ce9af226bfc7c422}{NFS\_GetLineSize}}()),\ \textcolor{stringliteral}{"{}alignment\ error"{}}\ );}
\DoxyCodeLine{00348\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{harness_8h_a2cd6d606b7a354545b2cdecca67efa44}{is\_aligned}}(\&my\_rep-\/>tail\_counter,\ \mbox{\hyperlink{namespacetbb_1_1internal_a9694b519576433b7ce9af226bfc7c422}{NFS\_GetLineSize}}()),\ \textcolor{stringliteral}{"{}alignment\ error"{}}\ );}
\DoxyCodeLine{00349\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{harness_8h_a2cd6d606b7a354545b2cdecca67efa44}{is\_aligned}}(\&my\_rep-\/>array,\ \mbox{\hyperlink{namespacetbb_1_1internal_a9694b519576433b7ce9af226bfc7c422}{NFS\_GetLineSize}}()),\ \textcolor{stringliteral}{"{}alignment\ error"{}}\ );}
\DoxyCodeLine{00350\ \ \ \ \ std::memset(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(my\_rep),0,\textcolor{keyword}{sizeof}(\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep}{concurrent\_queue\_rep}}));}
\DoxyCodeLine{00351\ \ \ \ \ \textcolor{keyword}{new}\ (\ \&my\_rep-\/>items\_avail\ )\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__monitor}{concurrent\_monitor}}();}
\DoxyCodeLine{00352\ \ \ \ \ \textcolor{keyword}{new}\ (\ \&my\_rep-\/>slots\_avail\ )\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__monitor}{concurrent\_monitor}}();}
\DoxyCodeLine{00353\ \ \ \ \ this-\/>item\_size\ =\ item\_sz;}
\DoxyCodeLine{00354\ \}}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00356\ concurrent\_queue\_base\_v3::\string~concurrent\_queue\_base\_v3()\ \{}
\DoxyCodeLine{00357\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ nq\ =\ my\_rep-\/>n\_queue;}
\DoxyCodeLine{00358\ \ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<nq;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++\ )}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ my\_rep-\/>array[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].tail\_page==\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \textcolor{stringliteral}{"{}pages\ were\ not\ freed\ properly"{}}\ );}
\DoxyCodeLine{00360\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1cache__aligned__allocator}{cache\_aligned\_allocator<concurrent\_queue\_rep>}}().\mbox{\hyperlink{classtbb_1_1cache__aligned__allocator_a7f7310e046c4b6b8618864de8e27a471}{deallocate}}(my\_rep,1);}
\DoxyCodeLine{00361\ \}}
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00363\ \textcolor{keywordtype}{void}\ concurrent\_queue\_base\_v3::internal\_push(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}\ )\ \{}
\DoxyCodeLine{00364\ \ \ \ \ internal\_insert\_item(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{level1__impl_8h_a7ffc26122ca6f9bec01f9bc5e64f3006}{copy}}\ );}
\DoxyCodeLine{00365\ \}}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \textcolor{keywordtype}{void}\ concurrent\_queue\_base\_v8::internal\_push\_move(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}\ )\ \{}
\DoxyCodeLine{00368\ \ \ \ internal\_insert\_item(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{namespacetbb_ac41903d6b80e61bd6c605412e7820e08}{move}}\ );}
\DoxyCodeLine{00369\ \}}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \textcolor{keywordtype}{void}\ concurrent\_queue\_base\_v3::internal\_insert\_item(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ copy\_specifics\ op\_type\ )\ \{}
\DoxyCodeLine{00372\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep}{concurrent\_queue\_rep}}\&\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ *my\_rep;}
\DoxyCodeLine{00373\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ old\_abort\_counter\ =\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a241624713017287d63bc9ffd916f20c3}{abort\_counter}};}
\DoxyCodeLine{00374\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a7c22b9cabfe84a547f0ff26a1aa3e4a4}{ticket}}\ k\ =\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.tail\_counter++;}
\DoxyCodeLine{00375\ \ \ \ \ ptrdiff\_t\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ =\ my\_capacity;}
\DoxyCodeLine{00376\ \textcolor{preprocessor}{\#if\ DO\_ITT\_NOTIFY}}
\DoxyCodeLine{00377\ \ \ \ \ \textcolor{keywordtype}{bool}\ sync\_prepare\_done\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00378\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00379\ \ \ \ \ \textcolor{keywordflow}{if}(\ (ptrdiff\_t)(k-\/\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.head\_counter)>=\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ )\ \{\ \textcolor{comment}{//\ queue\ is\ full}}
\DoxyCodeLine{00380\ \textcolor{preprocessor}{\#if\ DO\_ITT\_NOTIFY}}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !sync\_prepare\_done\ )\ \{}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{itt__notify_8h_adf75d9635323cc786c012fe69ceef418}{ITT\_NOTIFY}}(\ sync\_prepare,\ \&sync\_prepare\_done\ );}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ sync\_prepare\_done\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00385\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ slept\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__monitor_1_1thread__context}{concurrent\_monitor::thread\_context}}\ thr\_ctx;}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.slots\_avail.prepare\_wait(\ thr\_ctx,\ ((ptrdiff\_t)(k-\/\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}))\ );}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\ (ptrdiff\_t)(k-\/\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.head\_counter)>=\textcolor{keyword}{const\_cast<}\textcolor{keyword}{volatile\ }ptrdiff\_t\&\textcolor{keyword}{>}(\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ =\ my\_capacity)\ )\ \{}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_TBB\_TRY\ \{}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.abort\_counter!=old\_abort\_counter\ )\ \{}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.slots\_avail.cancel\_wait(\ thr\_ctx\ );}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a61a681f9fd15fdb055f7725d6416ddf4}{throw\_exception}}(\ \mbox{\hyperlink{namespacetbb_1_1internal_ace88c7330e7f616616785ffb001e04f9ad7f693bd819f8aab09c25dce68a736e4}{eid\_user\_abort}}\ );}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ slept\ =\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.slots\_avail.commit\_wait(\ thr\_ctx\ );}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \_\_TBB\_CATCH(\ tbb::user\_abort\&\ )\ \{}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.choose(k).abort\_push(k,\ *\textcolor{keyword}{this});}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_TBB\_RETHROW();}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \_\_TBB\_CATCH(...)\ \{}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_TBB\_RETHROW();}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (slept\ ==\ \textcolor{keyword}{true})\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.slots\_avail.prepare\_wait(\ thr\_ctx,\ ((ptrdiff\_t)(k-\/\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}))\ );}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !slept\ )}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.slots\_avail.cancel\_wait(\ thr\_ctx\ );}
\DoxyCodeLine{00407\ \ \ \ \ \}}
\DoxyCodeLine{00408\ \ \ \ \ \mbox{\hyperlink{itt__notify_8h_adf75d9635323cc786c012fe69ceef418}{ITT\_NOTIFY}}(\ sync\_acquired,\ \&sync\_prepare\_done\ );}
\DoxyCodeLine{00409\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ (ptrdiff\_t)(k-\/\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.head\_counter)<my\_capacity,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00410\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.choose(\ k\ ).push(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ k,\ *\textcolor{keyword}{this},\ op\_type\ );}
\DoxyCodeLine{00411\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.items\_avail.notify(\ \mbox{\hyperlink{structtbb_1_1internal_1_1predicate__leq}{predicate\_leq}}(k)\ );}
\DoxyCodeLine{00412\ \}}
\DoxyCodeLine{00413\ }
\DoxyCodeLine{00414\ \textcolor{keywordtype}{void}\ concurrent\_queue\_base\_v3::internal\_pop(\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}\ )\ \{}
\DoxyCodeLine{00415\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep}{concurrent\_queue\_rep}}\&\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ *my\_rep;}
\DoxyCodeLine{00416\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a7c22b9cabfe84a547f0ff26a1aa3e4a4}{ticket}}\ k;}
\DoxyCodeLine{00417\ \textcolor{preprocessor}{\#if\ DO\_ITT\_NOTIFY}}
\DoxyCodeLine{00418\ \ \ \ \ \textcolor{keywordtype}{bool}\ sync\_prepare\_done\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00419\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00420\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ old\_abort\_counter\ =\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.abort\_counter;}
\DoxyCodeLine{00421\ \ \ \ \ \textcolor{comment}{//\ This\ loop\ is\ a\ single\ pop\ operation;\ abort\_counter\ should\ not\ be\ re-\/read\ inside}}
\DoxyCodeLine{00422\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ k=\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.head\_counter++;}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (ptrdiff\_t)(\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.tail\_counter-\/k)<=0\ )\ \{\ \textcolor{comment}{//\ queue\ is\ empty}}
\DoxyCodeLine{00425\ \textcolor{preprocessor}{\#if\ DO\_ITT\_NOTIFY}}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !sync\_prepare\_done\ )\ \{}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{itt__notify_8h_adf75d9635323cc786c012fe69ceef418}{ITT\_NOTIFY}}(\ sync\_prepare,\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}\ );}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sync\_prepare\_done\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00430\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ slept\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__monitor_1_1thread__context}{concurrent\_monitor::thread\_context}}\ thr\_ctx;}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.items\_avail.prepare\_wait(\ thr\_ctx,\ k\ );}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\ (ptrdiff\_t)(\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.tail\_counter-\/k)<=0\ )\ \{}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_TBB\_TRY\ \{}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.abort\_counter!=old\_abort\_counter\ )\ \{}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.items\_avail.cancel\_wait(\ thr\_ctx\ );}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a61a681f9fd15fdb055f7725d6416ddf4}{throw\_exception}}(\ \mbox{\hyperlink{namespacetbb_1_1internal_ace88c7330e7f616616785ffb001e04f9ad7f693bd819f8aab09c25dce68a736e4}{eid\_user\_abort}}\ );}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ slept\ =\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.items\_avail.commit\_wait(\ thr\_ctx\ );}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \_\_TBB\_CATCH(\ tbb::user\_abort\&\ )\ \{}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.head\_counter-\/-\/;}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_TBB\_RETHROW();}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \_\_TBB\_CATCH(...)\ \{}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_TBB\_RETHROW();}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (slept\ ==\ \textcolor{keyword}{true})\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.items\_avail.prepare\_wait(\ thr\_ctx,\ k\ );}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !slept\ )}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.items\_avail.cancel\_wait(\ thr\_ctx\ );}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}((ptrdiff\_t)(\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.tail\_counter-\/k)>0,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00454\ \ \ \ \ \}\ \textcolor{keywordflow}{while}(\ !\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.choose(k).pop(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}},k,*\textcolor{keyword}{this})\ );}
\DoxyCodeLine{00455\ }
\DoxyCodeLine{00456\ \ \ \ \ \textcolor{comment}{//\ wake\ up\ a\ producer..}}
\DoxyCodeLine{00457\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.slots\_avail.notify(\ \mbox{\hyperlink{structtbb_1_1internal_1_1predicate__leq}{predicate\_leq}}(k)\ );}
\DoxyCodeLine{00458\ \}}
\DoxyCodeLine{00459\ }
\DoxyCodeLine{00460\ \textcolor{keywordtype}{void}\ concurrent\_queue\_base\_v3::internal\_abort()\ \{}
\DoxyCodeLine{00461\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep}{concurrent\_queue\_rep}}\&\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ *my\_rep;}
\DoxyCodeLine{00462\ \ \ \ \ ++\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a241624713017287d63bc9ffd916f20c3}{abort\_counter}};}
\DoxyCodeLine{00463\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.items\_avail.abort\_all();}
\DoxyCodeLine{00464\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.slots\_avail.abort\_all();}
\DoxyCodeLine{00465\ \}}
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00467\ \textcolor{keywordtype}{bool}\ concurrent\_queue\_base\_v3::internal\_pop\_if\_present(\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}\ )\ \{}
\DoxyCodeLine{00468\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep}{concurrent\_queue\_rep}}\&\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ *my\_rep;}
\DoxyCodeLine{00469\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a7c22b9cabfe84a547f0ff26a1aa3e4a4}{ticket}}\ k;}
\DoxyCodeLine{00470\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ k\ =\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.head\_counter;}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(;;)\ \{}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ (ptrdiff\_t)(\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.tail\_counter-\/k)<=0\ )\ \{}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Queue\ is\ empty}}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Queue\ had\ item\ with\ ticket\ k\ when\ we\ looked.\ \ Attempt\ to\ get\ that\ item.}}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a7c22b9cabfe84a547f0ff26a1aa3e4a4}{ticket}}\ tk=k;}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \ \ \ \ k\ =\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.head\_counter.compare\_and\_swap(\ tk+1,\ tk\ );}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ k==tk\ )}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Another\ thread\ snatched\ the\ item,\ retry.}}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00484\ \ \ \ \ \}\ \textcolor{keywordflow}{while}(\ !\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.choose(\ k\ ).pop(\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}},\ k,\ *\textcolor{keyword}{this}\ )\ );}
\DoxyCodeLine{00485\ }
\DoxyCodeLine{00486\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.slots\_avail.notify(\ \mbox{\hyperlink{structtbb_1_1internal_1_1predicate__leq}{predicate\_leq}}(k)\ );}
\DoxyCodeLine{00487\ }
\DoxyCodeLine{00488\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00489\ \}}
\DoxyCodeLine{00490\ }
\DoxyCodeLine{00491\ \textcolor{keywordtype}{bool}\ concurrent\_queue\_base\_v3::internal\_push\_if\_not\_full(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}\ )\ \{}
\DoxyCodeLine{00492\ \ \ \ \ \textcolor{keywordflow}{return}\ internal\_insert\_if\_not\_full(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{level1__impl_8h_a7ffc26122ca6f9bec01f9bc5e64f3006}{copy}}\ );}
\DoxyCodeLine{00493\ \}}
\DoxyCodeLine{00494\ }
\DoxyCodeLine{00495\ \textcolor{keywordtype}{bool}\ concurrent\_queue\_base\_v8::internal\_push\_move\_if\_not\_full(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}\ )\ \{}
\DoxyCodeLine{00496\ \ \ \ \ \textcolor{keywordflow}{return}\ internal\_insert\_if\_not\_full(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{namespacetbb_ac41903d6b80e61bd6c605412e7820e08}{move}}\ );}
\DoxyCodeLine{00497\ \}}
\DoxyCodeLine{00498\ }
\DoxyCodeLine{00499\ \textcolor{keywordtype}{bool}\ concurrent\_queue\_base\_v3::internal\_insert\_if\_not\_full(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ copy\_specifics\ op\_type\ )\ \{}
\DoxyCodeLine{00500\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep}{concurrent\_queue\_rep}}\&\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ *my\_rep;}
\DoxyCodeLine{00501\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a7c22b9cabfe84a547f0ff26a1aa3e4a4}{ticket}}\ k\ =\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.tail\_counter;}
\DoxyCodeLine{00502\ \ \ \ \ \textcolor{keywordflow}{for}(;;)\ \{}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ (ptrdiff\_t)(k-\/\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.head\_counter)>=my\_capacity\ )\ \{}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Queue\ is\ full}}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Queue\ had\ empty\ slot\ with\ ticket\ k\ when\ we\ looked.\ \ Attempt\ to\ claim\ that\ slot.}}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a7c22b9cabfe84a547f0ff26a1aa3e4a4}{ticket}}\ tk=k;}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ k\ =\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.tail\_counter.compare\_and\_swap(\ tk+1,\ tk\ );}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ k==tk\ )}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Another\ thread\ claimed\ the\ slot,\ so\ retry.}}
\DoxyCodeLine{00513\ \ \ \ \ \}}
\DoxyCodeLine{00514\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.choose(k).push(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ k,\ *\textcolor{keyword}{this},\ op\_type);}
\DoxyCodeLine{00515\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.items\_avail.notify(\ \mbox{\hyperlink{structtbb_1_1internal_1_1predicate__leq}{predicate\_leq}}(k)\ );}
\DoxyCodeLine{00516\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00517\ \}}
\DoxyCodeLine{00518\ }
\DoxyCodeLine{00519\ ptrdiff\_t\ concurrent\_queue\_base\_v3::internal\_size()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00520\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \textcolor{keyword}{sizeof}(ptrdiff\_t)<=\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{size\_t}),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00521\ \ \ \ \ \textcolor{keywordflow}{return}\ ptrdiff\_t(my\_rep-\/>tail\_counter-\/my\_rep-\/>head\_counter-\/my\_rep-\/>n\_invalid\_entries);}
\DoxyCodeLine{00522\ \}}
\DoxyCodeLine{00523\ }
\DoxyCodeLine{00524\ \textcolor{keywordtype}{bool}\ concurrent\_queue\_base\_v3::internal\_empty()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00525\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a7c22b9cabfe84a547f0ff26a1aa3e4a4}{ticket}}\ tc\ =\ my\_rep-\/>tail\_counter;}
\DoxyCodeLine{00526\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a7c22b9cabfe84a547f0ff26a1aa3e4a4}{ticket}}\ \mbox{\hyperlink{_tridiagonalization__householder_coefficients_8cpp_ae07b8942845a830cde53493b01f6546c}{hc}}\ =\ my\_rep-\/>head\_counter;}
\DoxyCodeLine{00527\ \ \ \ \ \textcolor{comment}{//\ if\ tc!=r.tail\_counter,\ the\ queue\ was\ not\ empty\ at\ some\ point\ between\ the\ two\ reads.}}
\DoxyCodeLine{00528\ \ \ \ \ \textcolor{keywordflow}{return}\ (\ tc==my\_rep-\/>tail\_counter\ \&\&\ ptrdiff\_t(tc-\/\mbox{\hyperlink{_tridiagonalization__householder_coefficients_8cpp_ae07b8942845a830cde53493b01f6546c}{hc}}-\/my\_rep-\/>n\_invalid\_entries)<=0\ );}
\DoxyCodeLine{00529\ \}}
\DoxyCodeLine{00530\ }
\DoxyCodeLine{00531\ \textcolor{keywordtype}{void}\ concurrent\_queue\_base\_v3::internal\_set\_capacity(\ ptrdiff\_t\ capacity,\ \textcolor{keywordtype}{size\_t}\ \textcolor{comment}{/*item\_sz*/}\ )\ \{}
\DoxyCodeLine{00532\ \ \ \ \ my\_capacity\ =\ capacity<0\ ?\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a14abf0d3078a31c95e2d670d4ae8f192}{concurrent\_queue\_rep::infinite\_capacity}}\ :\ capacity;}
\DoxyCodeLine{00533\ \}}
\DoxyCodeLine{00534\ }
\DoxyCodeLine{00535\ \textcolor{keywordtype}{void}\ concurrent\_queue\_base\_v3::internal\_finish\_clear()\ \{}
\DoxyCodeLine{00536\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ nq\ =\ my\_rep-\/>n\_queue;}
\DoxyCodeLine{00537\ \ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<nq;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ )\ \{}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ page*\ tp\ =\ my\_rep-\/>array[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].tail\_page;}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ my\_rep-\/>array[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].head\_page==tp,\ \textcolor{stringliteral}{"{}at\ most\ one\ page\ should\ remain"{}}\ );}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ tp!=\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ tp!=\mbox{\hyperlink{namespacetbb_1_1internal_a462ebd57cc317fb33ef6542d470b4dbd}{static\_invalid\_page}}\ )\ deallocate\_page(\ tp\ );}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \ \ \ \ my\_rep-\/>array[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].tail\_page\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00544\ \ \ \ \ \}}
\DoxyCodeLine{00545\ \}}
\DoxyCodeLine{00546\ }
\DoxyCodeLine{00547\ \textcolor{keywordtype}{void}\ concurrent\_queue\_base\_v3::internal\_throw\_exception()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00548\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a61a681f9fd15fdb055f7725d6416ddf4}{throw\_exception}}(\ \mbox{\hyperlink{namespacetbb_1_1internal_ace88c7330e7f616616785ffb001e04f9a83455347fab4a99a0ba3860af1f91b25}{eid\_bad\_alloc}}\ );}
\DoxyCodeLine{00549\ \}}
\DoxyCodeLine{00550\ }
\DoxyCodeLine{00551\ \textcolor{keywordtype}{void}\ concurrent\_queue\_base\_v3::internal\_assign(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ copy\_specifics\ op\_type\ )\ \{}
\DoxyCodeLine{00552\ \ \ \ \ items\_per\_page\ =\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.items\_per\_page;}
\DoxyCodeLine{00553\ \ \ \ \ my\_capacity\ =\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_capacity;}
\DoxyCodeLine{00554\ }
\DoxyCodeLine{00555\ \ \ \ \ \textcolor{comment}{//\ copy\ concurrent\_queue\_rep.}}
\DoxyCodeLine{00556\ \ \ \ \ my\_rep-\/>head\_counter\ =\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_rep-\/>head\_counter;}
\DoxyCodeLine{00557\ \ \ \ \ my\_rep-\/>tail\_counter\ =\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_rep-\/>tail\_counter;}
\DoxyCodeLine{00558\ \ \ \ \ my\_rep-\/>n\_invalid\_entries\ =\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_rep-\/>n\_invalid\_entries;}
\DoxyCodeLine{00559\ \ \ \ \ my\_rep-\/>abort\_counter\ =\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_rep-\/>abort\_counter;}
\DoxyCodeLine{00560\ }
\DoxyCodeLine{00561\ \ \ \ \ \textcolor{comment}{//\ copy\ micro\_queues}}
\DoxyCodeLine{00562\ \ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<my\_rep-\/>n\_queue;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ )}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \ \ my\_rep-\/>array[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].assign(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_rep-\/>array[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}],\ *\textcolor{keyword}{this},\ op\_type\ );}
\DoxyCodeLine{00564\ }
\DoxyCodeLine{00565\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ my\_rep-\/>head\_counter==\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_rep-\/>head\_counter\ \&\&\ my\_rep-\/>tail\_counter==\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_rep-\/>tail\_counter,}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}the\ source\ concurrent\ queue\ should\ not\ be\ concurrently\ modified."{}}\ );}
\DoxyCodeLine{00567\ \}}
\DoxyCodeLine{00568\ }
\DoxyCodeLine{00569\ \textcolor{keywordtype}{void}\ concurrent\_queue\_base\_v3::assign(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}\ )\ \{}
\DoxyCodeLine{00570\ \ \ \ \ internal\_assign(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{level1__impl_8h_a7ffc26122ca6f9bec01f9bc5e64f3006}{copy}}\ );}
\DoxyCodeLine{00571\ \}}
\DoxyCodeLine{00572\ }
\DoxyCodeLine{00573\ \textcolor{keywordtype}{void}\ concurrent\_queue\_base\_v8::move\_content(\ concurrent\_queue\_base\_v8\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}\ )\ \{}
\DoxyCodeLine{00574\ \ \ \ \ internal\_assign(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{namespacetbb_ac41903d6b80e61bd6c605412e7820e08}{move}}\ );}
\DoxyCodeLine{00575\ \}}
\DoxyCodeLine{00576\ }
\DoxyCodeLine{00577\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00578\ \textcolor{comment}{//\ concurrent\_queue\_iterator\_rep}}
\DoxyCodeLine{00579\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00580\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep}{concurrent\_queue\_iterator\_rep}}:\ no\_assign\ \{}
\DoxyCodeLine{00581\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00582\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep_a2fcde54ed925c3d544118300590289b8}{ticket}}\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep_af10524671f5ac729e6d91a9e3af422dd}{head\_counter}};}
\DoxyCodeLine{00583\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep_a630633c87aa688da7a445251f09c45de}{my\_queue}};}
\DoxyCodeLine{00584\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep_a41c25e15d1240d778b262a42972dae0e}{offset\_of\_last}};}
\DoxyCodeLine{00585\ \ \ \ \ concurrent\_queue\_base::page*\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep_a311180d0bca561628e60bec3aa1f8923}{array}}[\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a125288547cb8f625dd3eab221afb805c}{concurrent\_queue\_rep::n\_queue}}];}
\DoxyCodeLine{00586\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep_a868a3f6a30a5bd8b089832e61e846a29}{concurrent\_queue\_iterator\_rep}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ \mbox{\hyperlink{namespacequeue}{queue}},\ \textcolor{keywordtype}{size\_t}\ offset\_of\_last\_\ )\ :}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep_af10524671f5ac729e6d91a9e3af422dd}{head\_counter}}(\mbox{\hyperlink{namespacequeue}{queue}}.my\_rep-\/>\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep_af10524671f5ac729e6d91a9e3af422dd}{head\_counter}}),}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep_a630633c87aa688da7a445251f09c45de}{my\_queue}}(\mbox{\hyperlink{namespacequeue}{queue}}),}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep_a41c25e15d1240d778b262a42972dae0e}{offset\_of\_last}}(offset\_of\_last\_)}
\DoxyCodeLine{00590\ \ \ \ \ \{}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep}{concurrent\_queue\_rep}}\&\ rep\ =\ *\mbox{\hyperlink{namespacequeue}{queue}}.my\_rep;}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keywordtype}{size\_t}\ k=0;\ k<\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a125288547cb8f625dd3eab221afb805c}{concurrent\_queue\_rep::n\_queue}};\ ++k\ )}
\DoxyCodeLine{00593\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep_a311180d0bca561628e60bec3aa1f8923}{array}}[k]\ =\ rep.\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_af4b99a9900ae999c74e3494181d25461}{array}}[k].\mbox{\hyperlink{structtbb_1_1internal_1_1micro__queue_ad6580c7faceb740b233e47405df8910b}{head\_page}};}
\DoxyCodeLine{00594\ \ \ \ \ \}}
\DoxyCodeLine{00596\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep_a7324d705f2db54b6e39b4881d8ea9b98}{get\_item}}(\ \textcolor{keywordtype}{void}*\&\ item,\ \textcolor{keywordtype}{size\_t}\ k\ )\ \{}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ k==\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep_a630633c87aa688da7a445251f09c45de}{my\_queue}}.my\_rep-\/>tail\_counter\ )\ \{}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \ \ \ \ item\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \ \ \ \ concurrent\_queue\_base::page*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep_a311180d0bca561628e60bec3aa1f8923}{array}}[\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a04f274a4f9002d3a43a7d64d03e174c8}{concurrent\_queue\_rep::index}}(k)];}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ modulo\_power\_of\_two(\ k/\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a125288547cb8f625dd3eab221afb805c}{concurrent\_queue\_rep::n\_queue}},\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep_a630633c87aa688da7a445251f09c45de}{my\_queue}}.items\_per\_page\ );}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ \ \ \ \ item\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}))\ +\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep_a41c25e15d1240d778b262a42972dae0e}{offset\_of\_last}}\ +\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep_a630633c87aa688da7a445251f09c45de}{my\_queue}}.item\_size*\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>mask\ \&\ uintptr\_t(1)<<\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})!=0;}
\DoxyCodeLine{00606\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00607\ \ \ \ \ \}}
\DoxyCodeLine{00608\ \};}
\DoxyCodeLine{00609\ }
\DoxyCodeLine{00610\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00611\ \textcolor{comment}{//\ concurrent\_queue\_iterator\_base}}
\DoxyCodeLine{00612\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00613\ }
\DoxyCodeLine{00614\ \textcolor{keywordtype}{void}\ concurrent\_queue\_iterator\_base\_v3::initialize(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ \mbox{\hyperlink{namespacequeue}{queue}},\ \textcolor{keywordtype}{size\_t}\ offset\_of\_last\ )\ \{}
\DoxyCodeLine{00615\ \ \ \ \ my\_rep\ =\ \mbox{\hyperlink{classtbb_1_1cache__aligned__allocator}{cache\_aligned\_allocator<concurrent\_queue\_iterator\_rep>}}().\mbox{\hyperlink{classtbb_1_1cache__aligned__allocator_a99d05096f80877849cb31d80247e0f85}{allocate}}(1);}
\DoxyCodeLine{00616\ \ \ \ \ \textcolor{keyword}{new}(\ my\_rep\ )\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep}{concurrent\_queue\_iterator\_rep}}(\mbox{\hyperlink{namespacequeue}{queue}},offset\_of\_last);}
\DoxyCodeLine{00617\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ k\ =\ my\_rep-\/>\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep_af10524671f5ac729e6d91a9e3af422dd}{head\_counter}};}
\DoxyCodeLine{00618\ \ \ \ \ \textcolor{keywordflow}{if}(\ !my\_rep-\/>get\_item(my\_item,\ k)\ )\ advance();}
\DoxyCodeLine{00619\ \}}
\DoxyCodeLine{00620\ }
\DoxyCodeLine{00621\ concurrent\_queue\_iterator\_base\_v3::concurrent\_queue\_iterator\_base\_v3(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ \mbox{\hyperlink{namespacequeue}{queue}}\ )\ \{}
\DoxyCodeLine{00622\ \ \ \ \ \mbox{\hyperlink{convex__hull__bench_8cpp_a95e22276c8bf0c515dff66661152fd4c}{initialize}}(\mbox{\hyperlink{namespacequeue}{queue}},0);}
\DoxyCodeLine{00623\ \}}
\DoxyCodeLine{00624\ }
\DoxyCodeLine{00625\ concurrent\_queue\_iterator\_base\_v3::concurrent\_queue\_iterator\_base\_v3(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ queue,\ \textcolor{keywordtype}{size\_t}\ offset\_of\_last\ )\ \{}
\DoxyCodeLine{00626\ \ \ \ \ \mbox{\hyperlink{convex__hull__bench_8cpp_a95e22276c8bf0c515dff66661152fd4c}{initialize}}(queue,offset\_of\_last);}
\DoxyCodeLine{00627\ \}}
\DoxyCodeLine{00628\ }
\DoxyCodeLine{00629\ \textcolor{keywordtype}{void}\ concurrent\_queue\_iterator\_base\_v3::assign(\ \textcolor{keyword}{const}\ concurrent\_queue\_iterator\_base\&\ \mbox{\hyperlink{structtbb_1_1internal_1_1allocator__traits}{other}}\ )\ \{}
\DoxyCodeLine{00630\ \ \ \ \ \textcolor{keywordflow}{if}(\ my\_rep!=\mbox{\hyperlink{structtbb_1_1internal_1_1allocator__traits}{other}}.my\_rep\ )\ \{}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ my\_rep\ )\ \{}
\DoxyCodeLine{00632\ \ \ \ \ \ \ \ \ \ \ \ \ cache\_aligned\_allocator<concurrent\_queue\_iterator\_rep>().deallocate(my\_rep,\ 1);}
\DoxyCodeLine{00633\ \ \ \ \ \ \ \ \ \ \ \ \ my\_rep\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00634\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00635\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{structtbb_1_1internal_1_1allocator__traits}{other}}.my\_rep\ )\ \{}
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ \ \ \ \ \ my\_rep\ =\ cache\_aligned\_allocator<concurrent\_queue\_iterator\_rep>().allocate(1);}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}(\ my\_rep\ )\ \mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__iterator__rep}{concurrent\_queue\_iterator\_rep}}(\ *\mbox{\hyperlink{structtbb_1_1internal_1_1allocator__traits}{other}}.my\_rep\ );}
\DoxyCodeLine{00638\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00639\ \ \ \ \ \}}
\DoxyCodeLine{00640\ \ \ \ \ my\_item\ =\ \mbox{\hyperlink{structtbb_1_1internal_1_1allocator__traits}{other}}.my\_item;}
\DoxyCodeLine{00641\ \}}
\DoxyCodeLine{00642\ }
\DoxyCodeLine{00643\ \textcolor{keywordtype}{void}\ concurrent\_queue\_iterator\_base\_v3::advance()\ \{}
\DoxyCodeLine{00644\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ my\_item,\ \textcolor{stringliteral}{"{}attempt\ to\ increment\ iterator\ past\ end\ of\ queue"{}}\ );}
\DoxyCodeLine{00645\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ k\ =\ my\_rep-\/>head\_counter;}
\DoxyCodeLine{00646\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacetbb_1_1internal_aa9839cd3ba88afd4a4208d642b3c7067}{concurrent\_queue\_base}}\&\ \mbox{\hyperlink{namespaceluisa_aa1eb922874c2e5b0b13f4fc9a37747eb}{queue}}\ =\ my\_rep-\/>my\_queue;}
\DoxyCodeLine{00647\ \textcolor{preprocessor}{\#if\ TBB\_USE\_ASSERT}}
\DoxyCodeLine{00648\ \ \ \ \ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{namespacegenerate__static__link__cmd__macos_a7c2dcd7f9bee7a5258b5c61341deb157}{tmp}};}
\DoxyCodeLine{00649\ \ \ \ \ my\_rep-\/>get\_item(tmp,k);}
\DoxyCodeLine{00650\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ my\_item==tmp,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00651\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ TBB\_USE\_ASSERT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00652\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ modulo\_power\_of\_two(\ k/\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a125288547cb8f625dd3eab221afb805c}{concurrent\_queue\_rep::n\_queue}},\ \mbox{\hyperlink{namespaceluisa_aa1eb922874c2e5b0b13f4fc9a37747eb}{queue}}.items\_per\_page\ );}
\DoxyCodeLine{00653\ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}==\mbox{\hyperlink{namespaceluisa_aa1eb922874c2e5b0b13f4fc9a37747eb}{queue}}.items\_per\_page-\/1\ )\ \{}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ concurrent\_queue\_base::page*\&\ \mbox{\hyperlink{namespacempfr_ad838087b4c59a17f714c4da9984aea66}{root}}\ =\ my\_rep-\/>array[\mbox{\hyperlink{classtbb_1_1internal_1_1concurrent__queue__rep_a04f274a4f9002d3a43a7d64d03e174c8}{concurrent\_queue\_rep::index}}(k)];}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacempfr_ad838087b4c59a17f714c4da9984aea66}{root}}\ =\ \mbox{\hyperlink{namespacempfr_ad838087b4c59a17f714c4da9984aea66}{root}}-\/>next;}
\DoxyCodeLine{00656\ \ \ \ \ \}}
\DoxyCodeLine{00657\ \ \ \ \ \textcolor{comment}{//\ advance\ k}}
\DoxyCodeLine{00658\ \ \ \ \ my\_rep-\/>head\_counter\ =\ ++k;}
\DoxyCodeLine{00659\ \ \ \ \ \textcolor{keywordflow}{if}(\ !my\_rep-\/>get\_item(my\_item,\ k)\ )\ \mbox{\hyperlink{namespaceeastl_a8b905cd5bfa46bb3e9bbfd73ca783a7d}{advance}}();}
\DoxyCodeLine{00660\ \}}
\DoxyCodeLine{00661\ }
\DoxyCodeLine{00662\ concurrent\_queue\_iterator\_base\_v3::\string~concurrent\_queue\_iterator\_base\_v3()\ \{}
\DoxyCodeLine{00663\ \ \ \ \ \textcolor{comment}{//delete\ my\_rep;}}
\DoxyCodeLine{00664\ \ \ \ \ cache\_aligned\_allocator<concurrent\_queue\_iterator\_rep>().deallocate(my\_rep,\ 1);}
\DoxyCodeLine{00665\ \ \ \ \ my\_rep\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00666\ \}}
\DoxyCodeLine{00667\ }
\DoxyCodeLine{00668\ \}\ \textcolor{comment}{//\ namespace\ internal}}
\DoxyCodeLine{00669\ }
\DoxyCodeLine{00670\ \}\ \textcolor{comment}{//\ namespace\ tbb}}

\end{DoxyCode}
