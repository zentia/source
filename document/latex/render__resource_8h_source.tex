\doxysection{render\+\_\+resource.\+h}
\hypertarget{render__resource_8h_source}{}\label{render__resource_8h_source}\index{runtime/render\_core/render\_resource.h@{runtime/render\_core/render\_resource.h}}
\mbox{\hyperlink{render__resource_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ <mutex>}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{render__thread_8h}{render\_thread.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}module/rhi/rhi\_command\_list.h"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{vector__extension_8h}{runtime/utility/vector\_extension.h}}"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacesource__runtime_1_1render__core}{source\_runtime::render\_core}}}
\DoxyCodeLine{00009\ \{}
\DoxyCodeLine{00010\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource}{render\_resource}}}
\DoxyCodeLine{00011\ \ \ \ \ \{}
\DoxyCodeLine{00012\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00013\ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource_a8bb7656feb8fb628a862af851e69cfdd}{init\_phase}}\ :\ \mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}}
\DoxyCodeLine{00014\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource_a8bb7656feb8fb628a862af851e69cfdda6bf9e70a1f928aba143ef1eebe2720b5}{pre}},}
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource_a8bb7656feb8fb628a862af851e69cfdda4ed9407630eb1000c0f6b63842defa7d}{def}}}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource_a9072dbd16b44dde9271d10b305b0373a}{init\_pre\_rhi\_resources}}();}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource_a00749d621ee9dd70918deccbfd1ab88c}{init\_rhi}}(source\_module::rhi::rhi\_command\_list\_base\&\ rhi\_cmd\_list)\{\}}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource_aed5c05ea9051d2e0a6f39bac3f54daa1}{release\_rhi}}()\{\}}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource_a2c113ef42a595482f716073df84e0e59}{init\_resource}}(source\_module::rhi::rhi\_command\_list\_base\&\ rhi\_cmd\_list);}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\_t}}\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource_ac3fb8024705c21817c46e4a4b48937d3}{m\_list\_index\_}}\{\ -\/1\ \};}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource_a8bb7656feb8fb628a862af851e69cfdd}{init\_phase}}\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource_a20eb07104b9dbc704ed4c7fad62e90a9}{m\_phase\_}}\ \{\mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource_a8bb7656feb8fb628a862af851e69cfdda4ed9407630eb1000c0f6b63842defa7d}{init\_phase::def}}\};}
\DoxyCodeLine{00025\ \ \ \ \ \};}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list}{render\_resource\_list}}}
\DoxyCodeLine{00028\ \ \ \ \ \{}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <render\_resource::init\_phase>}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list}{render\_resource\_list}}\&\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list_a4ebc82c8ba66c48800d36a4a1c89b2cc}{get}}()}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list}{render\_resource\_list}}\ instance;}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ instance;}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list}{render\_resource\_list}}\&\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list_a1885624c9808125ee87a63b4371cacee}{get}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource_a8bb7656feb8fb628a862af851e69cfdd}{render\_resource::init\_phase}}\ init\_phase)}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (init\_phase\ ==\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource_a8bb7656feb8fb628a862af851e69cfdda6bf9e70a1f928aba143ef1eebe2720b5}{render\_resource::init\_phase::pre}})}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list_a4ebc82c8ba66c48800d36a4a1c89b2cc}{get<render\_resource::init\_phase::pre>}}();}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list_a4ebc82c8ba66c48800d36a4a1c89b2cc}{get<render\_resource::init\_phase::def>}}();}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\_t}}\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list_ab1073d9c01998777a7fd1c5cc2e59c90}{allocate}}(\mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource}{render\_resource}}*\ resource)}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list_af128e0f4c21f8f1b3ad47a85bb1e026b}{m\_recursive\_mutex\_}}.lock();}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\_t}}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}};}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list_a3437398bb40333135d09cd0df032e9e4}{m\_free\_index\_list\_}}.empty())}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}}\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{eabase_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\_t}}\textcolor{keyword}{>}(\mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list_a2550c72f36613e1ce326d7cc26fbfad4}{m\_resource\_list\_}}.size());}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list_a2550c72f36613e1ce326d7cc26fbfad4}{m\_resource\_list\_}}.emplace\_back(resource);}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}}\ =\ \mbox{\hyperlink{namespacesource__runtime_1_1vector_a9e32bbc347aee976ae2e2853e4ba98af}{vector::pop}}(\mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list_a3437398bb40333135d09cd0df032e9e4}{m\_free\_index\_list\_}});}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list_a2550c72f36613e1ce326d7cc26fbfad4}{m\_resource\_list\_}}[\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}}]\ =\ resource;}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list_af128e0f4c21f8f1b3ad47a85bb1e026b}{m\_recursive\_mutex\_}}.unlock();}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}};}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ std::recursive\_mutex\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list_af128e0f4c21f8f1b3ad47a85bb1e026b}{m\_recursive\_mutex\_}};}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ std::vector<int32\_t>\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list_a3437398bb40333135d09cd0df032e9e4}{m\_free\_index\_list\_}};}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ std::vector<render\_resource*>\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource__list_a2550c72f36613e1ce326d7cc26fbfad4}{m\_resource\_list\_}};}
\DoxyCodeLine{00065\ \ \ \ \ \};}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacesource__runtime_1_1render__core_a261dea7a8605c402d6e1fdde920963be}{begin\_init\_resource}}(\mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__resource}{render\_resource}}*\ resource,\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__command__pipe}{render\_command\_pipe}}*\ \mbox{\hyperlink{classsource__runtime_1_1render__core_1_1render__command__pipe}{render\_command\_pipe}}\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00067\ \}}

\end{DoxyCode}
