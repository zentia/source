\doxysection{atomic\+\_\+casts.\+h}
\hypertarget{atomic__casts_8h_source}{}\label{atomic__casts_8h_source}\index{runtime/EASTL/include/EASTL/internal/atomic/atomic\_casts.h@{runtime/EASTL/include/EASTL/internal/atomic/atomic\_casts.h}}
\mbox{\hyperlink{atomic__casts_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00002\ \textcolor{comment}{//\ Copyright\ (c)\ Electronic\ Arts\ Inc.\ All\ rights\ reserved.}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#ifndef\ EASTL\_ATOMIC\_INTERNAL\_CASTS\_H}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#define\ EASTL\_ATOMIC\_INTERNAL\_CASTS\_H}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#if\ defined(EA\_PRAGMA\_ONCE\_SUPPORTED)}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ once}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{type__transformations_8h}{EASTL/internal/type\_transformations.h}}>}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{string_8h}{string.h}}>}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceeastl}{eastl}}}
\DoxyCodeLine{00021\ \{}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceeastl_1_1internal}{internal}}}
\DoxyCodeLine{00025\ \{}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00029\ \mbox{\hyperlink{config_8h_ae829613db8680dd26bfafd37a1489e39}{EASTL\_FORCE\_INLINE}}\ \textcolor{keyword}{volatile}\ T*\ \mbox{\hyperlink{namespaceeastl_1_1internal_a37025bd83fbad77827d681b260af182c}{AtomicVolatileCast}}(T*\ \mbox{\hyperlink{spdlog_2include_2spdlog_2fmt_2bundled_2format_8h_adb6e274f8eb0b74b2865215e1b49c535}{ptr}})\ \mbox{\hyperlink{config_8h_a9f2560a8b4ca5ee60cc60934601d3bef}{EA\_NOEXCEPT}}}
\DoxyCodeLine{00030\ \{}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keyword}{static\_assert}(!\mbox{\hyperlink{structeastl_1_1integral__constant_a74f99d2733b525ae17416a1812d2a3a6}{eastl::is\_volatile<volatile\ T*>::value}},\ \textcolor{stringliteral}{"{}eastl::atomic<T>\ :\ pointer\ must\ not\ be\ volatile,\ the\ pointed\ to\ type\ must\ be\ volatile!"{}});}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{structeastl_1_1integral__constant_a74f99d2733b525ae17416a1812d2a3a6}{eastl::is\_volatile<volatile\ T>::value}},\ \textcolor{stringliteral}{"{}eastl::atomic<T>\ :\ the\ pointed\ to\ type\ must\ be\ volatile!"{}});}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{volatile\ }T*\textcolor{keyword}{>}(\mbox{\hyperlink{spdlog_2include_2spdlog_2fmt_2bundled_2format_8h_adb6e274f8eb0b74b2865215e1b49c535}{ptr}});}
\DoxyCodeLine{00035\ \}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00057\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Integral,\ \textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00058\ \mbox{\hyperlink{config_8h_ae829613db8680dd26bfafd37a1489e39}{EASTL\_FORCE\_INLINE}}\ \textcolor{keyword}{volatile}\ Integral*\ \mbox{\hyperlink{namespaceeastl_1_1internal_abe29b8878230c631c7ab37c30852efef}{AtomicVolatileIntegralCast}}(T*\ \mbox{\hyperlink{spdlog_2include_2spdlog_2fmt_2bundled_2format_8h_adb6e274f8eb0b74b2865215e1b49c535}{ptr}})\ \mbox{\hyperlink{config_8h_a9f2560a8b4ca5ee60cc60934601d3bef}{EA\_NOEXCEPT}}}
\DoxyCodeLine{00059\ \{}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keyword}{static\_assert}(!\mbox{\hyperlink{structeastl_1_1integral__constant_a74f99d2733b525ae17416a1812d2a3a6}{eastl::is\_volatile<volatile\ Integral*>::value}},\ \textcolor{stringliteral}{"{}eastl::atomic<T>\ :\ pointer\ must\ not\ be\ volatile,\ the\ pointed\ to\ type\ must\ be\ volatile!"{}});}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{structeastl_1_1integral__constant_a74f99d2733b525ae17416a1812d2a3a6}{eastl::is\_volatile<volatile\ Integral>::value}},\ \textcolor{stringliteral}{"{}eastl::atomic<T>\ :\ the\ pointed\ to\ type\ must\ be\ volatile!"{}});}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{structeastl_1_1integral__constant_a74f99d2733b525ae17416a1812d2a3a6}{eastl::is\_integral<Integral>::value}},\ \textcolor{stringliteral}{"{}eastl::atomic<T>\ :\ Integral\ cast\ must\ cast\ to\ an\ Integral\ type!"{}});}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(Integral)\ ==\ \textcolor{keyword}{sizeof}(T),\ \textcolor{stringliteral}{"{}eastl::atomic<T>\ :\ Integral\ and\ T\ must\ be\ same\ size\ for\ casting!"{}});}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{volatile\ }Integral*\textcolor{keyword}{>}(\mbox{\hyperlink{spdlog_2include_2spdlog_2fmt_2bundled_2format_8h_adb6e274f8eb0b74b2865215e1b49c535}{ptr}});}
\DoxyCodeLine{00066\ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Integral,\ \textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00069\ \mbox{\hyperlink{config_8h_ae829613db8680dd26bfafd37a1489e39}{EASTL\_FORCE\_INLINE}}\ Integral*\ \mbox{\hyperlink{namespaceeastl_1_1internal_adc6dc3995b78e55dae15a1a9c1570b38}{AtomicIntegralCast}}(T*\ \mbox{\hyperlink{spdlog_2include_2spdlog_2fmt_2bundled_2format_8h_adb6e274f8eb0b74b2865215e1b49c535}{ptr}})\ \mbox{\hyperlink{config_8h_a9f2560a8b4ca5ee60cc60934601d3bef}{EA\_NOEXCEPT}}}
\DoxyCodeLine{00070\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{structeastl_1_1integral__constant_a74f99d2733b525ae17416a1812d2a3a6}{eastl::is\_integral<Integral>::value}},\ \textcolor{stringliteral}{"{}eastl::atomic<T>\ :\ Integral\ cast\ must\ cast\ to\ an\ Integral\ type!"{}});}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(Integral)\ ==\ \textcolor{keyword}{sizeof}(T),\ \textcolor{stringliteral}{"{}eastl::atomic<T>\ :\ Integral\ and\ T\ must\ be\ same\ size\ for\ casting!"{}});}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{reinterpret\_cast<}Integral*\textcolor{keyword}{>}(\mbox{\hyperlink{spdlog_2include_2spdlog_2fmt_2bundled_2format_8h_adb6e274f8eb0b74b2865215e1b49c535}{ptr}});}
\DoxyCodeLine{00075\ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00087\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ToType,\ \textcolor{keyword}{typename}\ FromType>}
\DoxyCodeLine{00088\ \mbox{\hyperlink{config_8h_ae829613db8680dd26bfafd37a1489e39}{EASTL\_FORCE\_INLINE}}\ \textcolor{keyword}{volatile}\ ToType*\ \mbox{\hyperlink{namespaceeastl_1_1internal_a20c237d03f1a673919d4f163e5db0f85}{AtomicVolatileTypeCast}}(FromType*\ \mbox{\hyperlink{spdlog_2include_2spdlog_2fmt_2bundled_2format_8h_adb6e274f8eb0b74b2865215e1b49c535}{ptr}})\ \mbox{\hyperlink{config_8h_a9f2560a8b4ca5ee60cc60934601d3bef}{EA\_NOEXCEPT}}}
\DoxyCodeLine{00089\ \{}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keyword}{static\_assert}(!\mbox{\hyperlink{structeastl_1_1integral__constant_a74f99d2733b525ae17416a1812d2a3a6}{eastl::is\_volatile<volatile\ ToType*>::value}},\ \textcolor{stringliteral}{"{}eastl::atomic<T>\ :\ pointer\ must\ not\ be\ volatile,\ the\ pointed\ to\ type\ must\ be\ volatile!"{}});}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{structeastl_1_1integral__constant_a74f99d2733b525ae17416a1812d2a3a6}{eastl::is\_volatile<volatile\ ToType>::value}},\ \textcolor{stringliteral}{"{}eastl::atomic<T>\ :\ the\ pointed\ to\ type\ must\ be\ volatile!"{}});}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{volatile\ }ToType*\textcolor{keyword}{>}(\mbox{\hyperlink{spdlog_2include_2spdlog_2fmt_2bundled_2format_8h_adb6e274f8eb0b74b2865215e1b49c535}{ptr}});}
\DoxyCodeLine{00094\ \}}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ToType,\ \textcolor{keyword}{typename}\ FromType>}
\DoxyCodeLine{00097\ \mbox{\hyperlink{config_8h_ae829613db8680dd26bfafd37a1489e39}{EASTL\_FORCE\_INLINE}}\ ToType*\ \mbox{\hyperlink{namespaceeastl_1_1internal_abb3413a3fba9a4db13effd42f7a19d39}{AtomicTypeCast}}(FromType*\ \mbox{\hyperlink{spdlog_2include_2spdlog_2fmt_2bundled_2format_8h_adb6e274f8eb0b74b2865215e1b49c535}{ptr}})\ \mbox{\hyperlink{config_8h_a9f2560a8b4ca5ee60cc60934601d3bef}{EA\_NOEXCEPT}}}
\DoxyCodeLine{00098\ \{}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{reinterpret\_cast<}ToType*\textcolor{keyword}{>}(\mbox{\hyperlink{spdlog_2include_2spdlog_2fmt_2bundled_2format_8h_adb6e274f8eb0b74b2865215e1b49c535}{ptr}});}
\DoxyCodeLine{00100\ \}}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00120\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Pun,\ \textcolor{keyword}{typename}\ T,\ eastl::enable\_if\_t<!eastl::is\_same\_v<Pun,\ T>,\ \textcolor{keywordtype}{int}>\ =\ 0>}
\DoxyCodeLine{00121\ \mbox{\hyperlink{config_8h_ae829613db8680dd26bfafd37a1489e39}{EASTL\_FORCE\_INLINE}}\ Pun\ \mbox{\hyperlink{namespaceeastl_1_1internal_a44498ba3f4e1db947d6048189f379a0b}{AtomicTypePunCast}}(\textcolor{keyword}{const}\ T\&\ fromType)\ \mbox{\hyperlink{config_8h_a9f2560a8b4ca5ee60cc60934601d3bef}{EA\_NOEXCEPT}}}
\DoxyCodeLine{00122\ \{}
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(Pun)\ ==\ \textcolor{keyword}{sizeof}(T),\ \textcolor{stringliteral}{"{}eastl::atomic<T>\ :\ Pun\ and\ T\ must\ be\ the\ same\ size\ for\ type\ punning!"{}});}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structeastl_1_1aligned__storage}{eastl::aligned\_storage}}<\textcolor{keyword}{sizeof}(Pun),\ \textcolor{keyword}{alignof}(Pun)>\mbox{\hyperlink{structeastl_1_1internal_1_1make__signed__helper__1}{::type}}\ ret;}
\DoxyCodeLine{00130\ \ \ \ \ memcpy(\mbox{\hyperlink{namespaceeastl_a647701874f427998c0c9aa5cba5a8d24}{eastl::addressof}}(ret),\ \mbox{\hyperlink{namespaceeastl_a647701874f427998c0c9aa5cba5a8d24}{eastl::addressof}}(fromType),\ \textcolor{keyword}{sizeof}(Pun));}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{reinterpret\_cast<}Pun\&\textcolor{keyword}{>}(ret);}
\DoxyCodeLine{00132\ \}}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Pun,\ \textcolor{keyword}{typename}\ T,\ eastl::enable\_if\_t<eastl::is\_same\_v<Pun,\ T>,\ \textcolor{keywordtype}{int}>\ =\ 0>}
\DoxyCodeLine{00135\ \mbox{\hyperlink{config_8h_ae829613db8680dd26bfafd37a1489e39}{EASTL\_FORCE\_INLINE}}\ Pun\ \mbox{\hyperlink{namespaceeastl_1_1internal_a44498ba3f4e1db947d6048189f379a0b}{AtomicTypePunCast}}(\textcolor{keyword}{const}\ T\&\ fromType)\ \mbox{\hyperlink{config_8h_a9f2560a8b4ca5ee60cc60934601d3bef}{EA\_NOEXCEPT}}}
\DoxyCodeLine{00136\ \{}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keywordflow}{return}\ fromType;}
\DoxyCodeLine{00138\ \}}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00142\ \mbox{\hyperlink{config_8h_ae829613db8680dd26bfafd37a1489e39}{EASTL\_FORCE\_INLINE}}\ T\ \mbox{\hyperlink{namespaceeastl_1_1internal_a6eb4cf5403dcf0d0e6fa24a17f036bb0}{AtomicNegateOperand}}(T\ val)\ \mbox{\hyperlink{config_8h_a9f2560a8b4ca5ee60cc60934601d3bef}{EA\_NOEXCEPT}}}
\DoxyCodeLine{00143\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{structeastl_1_1integral__constant_a74f99d2733b525ae17416a1812d2a3a6}{eastl::is\_integral<T>::value}},\ \textcolor{stringliteral}{"{}eastl::atomic<T>\ :\ Integral\ Negation\ must\ be\ an\ Integral\ type!"{}});}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keyword}{static\_assert}(!\mbox{\hyperlink{structeastl_1_1integral__constant_a74f99d2733b525ae17416a1812d2a3a6}{eastl::is\_volatile<T>::value}},\ \textcolor{stringliteral}{"{}eastl::atomic<T>\ :\ T\ must\ not\ be\ volatile!"{}});}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(0U\ -\/\ \textcolor{keyword}{static\_cast<}eastl::make\_unsigned\_t<T>\textcolor{keyword}{>}(val));}
\DoxyCodeLine{00148\ \}}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \mbox{\hyperlink{config_8h_ae829613db8680dd26bfafd37a1489e39}{EASTL\_FORCE\_INLINE}}\ ptrdiff\_t\ \mbox{\hyperlink{namespaceeastl_1_1internal_a6eb4cf5403dcf0d0e6fa24a17f036bb0}{AtomicNegateOperand}}(ptrdiff\_t\ val)\ \mbox{\hyperlink{config_8h_a9f2560a8b4ca5ee60cc60934601d3bef}{EA\_NOEXCEPT}}}
\DoxyCodeLine{00151\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keywordflow}{return}\ -\/val;}
\DoxyCodeLine{00153\ \}}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \}\ \textcolor{comment}{//\ namespace\ internal}}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \}\ \textcolor{comment}{//\ namespace\ eastl}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00168\ \textcolor{preprocessor}{\#define\ EASTL\_ATOMIC\_VOLATILE\_CAST(ptr)\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00169\ \textcolor{preprocessor}{\ \ \ \ eastl::internal::AtomicVolatileCast((ptr))}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \textcolor{preprocessor}{\#define\ EASTL\_ATOMIC\_VOLATILE\_INTEGRAL\_CAST(IntegralType,\ ptr)\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00172\ \textcolor{preprocessor}{\ \ \ \ eastl::internal::AtomicVolatileIntegralCast<IntegralType>((ptr))}}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \textcolor{preprocessor}{\#define\ EASTL\_ATOMIC\_INTEGRAL\_CAST(IntegralType,\ ptr)\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00175\ \textcolor{preprocessor}{\ \ \ \ eastl::internal::AtomicIntegralCast<IntegralType>((ptr))}}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \textcolor{preprocessor}{\#define\ EASTL\_ATOMIC\_VOLATILE\_TYPE\_CAST(ToType,\ ptr)\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00178\ \textcolor{preprocessor}{\ \ \ \ eastl::internal::AtomicVolatileTypeCast<ToType>((ptr))}}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \textcolor{preprocessor}{\#define\ EASTL\_ATOMIC\_TYPE\_CAST(ToType,\ ptr)\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00181\ \textcolor{preprocessor}{\ \ \ \ eastl::internal::AtomicTypeCast<ToType>((ptr))}}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \textcolor{preprocessor}{\#define\ EASTL\_ATOMIC\_TYPE\_PUN\_CAST(PunType,\ fromType)\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00184\ \textcolor{preprocessor}{\ \ \ \ eastl::internal::AtomicTypePunCast<PunType>((fromType))}}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \textcolor{preprocessor}{\#define\ EASTL\_ATOMIC\_NEGATE\_OPERAND(val)\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00187\ \textcolor{preprocessor}{\ \ \ \ eastl::internal::AtomicNegateOperand((val))}}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ EASTL\_ATOMIC\_INTERNAL\_CASTS\_H\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
