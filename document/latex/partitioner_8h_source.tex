\doxysection{partitioner.\+h}
\hypertarget{partitioner_8h_source}{}\label{partitioner_8h_source}\index{external/taskflow/3rd-\/party/tbb/include/tbb/partitioner.h@{external/taskflow/3rd-\/party/tbb/include/tbb/partitioner.h}}
\mbox{\hyperlink{partitioner_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#ifndef\ \_\_TBB\_partitioner\_H}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#define\ \_\_TBB\_partitioner\_H}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#define\ \_\_TBB\_partitioner\_H\_include\_area}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{__warning__suppress__enable__notice_8h}{internal/\_warning\_suppress\_enable\_notice.h}}"{}}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#ifndef\ \_\_TBB\_INITIAL\_CHUNKS}}
\DoxyCodeLine{00024\ \textcolor{comment}{//\ initial\ task\ divisions\ per\ thread}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#define\ \_\_TBB\_INITIAL\_CHUNKS\ 2}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#ifndef\ \_\_TBB\_RANGE\_POOL\_CAPACITY}}
\DoxyCodeLine{00028\ \textcolor{comment}{//\ maximum\ number\ of\ elements\ in\ range\ pool}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#define\ \_\_TBB\_RANGE\_POOL\_CAPACITY\ 8}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#ifndef\ \_\_TBB\_INIT\_DEPTH}}
\DoxyCodeLine{00032\ \textcolor{comment}{//\ initial\ value\ for\ depth\ of\ range\ pool}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#define\ \_\_TBB\_INIT\_DEPTH\ 5}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#ifndef\ \_\_TBB\_DEMAND\_DEPTH\_ADD}}
\DoxyCodeLine{00036\ \textcolor{comment}{//\ when\ imbalance\ is\ found\ range\ splits\ this\ value\ times\ more}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#define\ \_\_TBB\_DEMAND\_DEPTH\_ADD\ 1}}
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#ifndef\ \_\_TBB\_STATIC\_THRESHOLD}}
\DoxyCodeLine{00040\ \textcolor{comment}{//\ necessary\ number\ of\ clocks\ for\ the\ work\ to\ be\ distributed\ among\ all\ tasks}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#define\ \_\_TBB\_STATIC\_THRESHOLD\ 40000}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#if\ \_\_TBB\_DEFINE\_MIC}}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\#define\ \_\_TBB\_NONUNIFORM\_TASK\_CREATION\ 1}}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\#ifdef\ \_\_TBB\_time\_stamp}}
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\#define\ \_\_TBB\_USE\_MACHINE\_TIME\_STAMPS\ 1}}
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\#define\ \_\_TBB\_task\_duration()\ \_\_TBB\_STATIC\_THRESHOLD}}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_machine\_time\_stamp}}
\DoxyCodeLine{00049\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_DEFINE\_MIC}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{task_8h}{task.h}}"{}}}
\DoxyCodeLine{00052\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{task__arena_8h}{task\_arena.h}}"{}}}
\DoxyCodeLine{00053\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{aligned__space_8h}{aligned\_space.h}}"{}}}
\DoxyCodeLine{00054\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2include_2tbb_2atomic_8h}{atomic.h}}"{}}}
\DoxyCodeLine{00055\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{__template__helpers_8h}{internal/\_template\_helpers.h}}"{}}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \textcolor{preprocessor}{\#if\ defined(\_MSC\_VER)\ \&\&\ !defined(\_\_INTEL\_COMPILER)}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{comment}{//\ Workaround\ for\ overzealous\ compiler\ warnings}}
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ warning\ (push)}}
\DoxyCodeLine{00060\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ warning\ (disable:\ 4244)}}
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\ \{}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \textcolor{keyword}{class\ }auto\_partitioner;}
\DoxyCodeLine{00066\ \textcolor{keyword}{class\ }simple\_partitioner;}
\DoxyCodeLine{00067\ \textcolor{keyword}{class\ }static\_partitioner;}
\DoxyCodeLine{00068\ \textcolor{keyword}{class\ }affinity\_partitioner;}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \textcolor{keyword}{namespace\ }interface9\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinternal}{internal}}\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }affinity\_partition\_type;}
\DoxyCodeLine{00073\ \ \ \ \ \}}
\DoxyCodeLine{00074\ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinternal}{internal}}\ \{\ \textcolor{comment}{//<\ @cond\ INTERNAL}}
\DoxyCodeLine{00077\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{scalable__allocator_8h_ab6dd3eee12dcbf8bc4c41513c4c4c9fb}{\_\_TBB\_EXPORTED\_FUNC}}\ \mbox{\hyperlink{namespacetbb_1_1internal_a324a7e462a89cfba6fde8ac14d0773aa}{get\_initial\_auto\_partitioner\_divisor}}();}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00080\ \textcolor{keyword}{class\ }\mbox{\hyperlink{test__partitioner__whitebox_8h_ae5db95b0ad2140a1c2f162a6f0f3cb52}{affinity\_partitioner\_base\_v3}}:\ no\_copy\ \{}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }tbb::affinity\_partitioner;}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }tbb::interface9::internal::affinity\_partition\_type;}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \ \ affinity\_id*\ my\_array;}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ my\_size;}
\DoxyCodeLine{00089\ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_ae5db95b0ad2140a1c2f162a6f0f3cb52}{affinity\_partitioner\_base\_v3}}()\ :\ my\_array(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}),\ my\_size(0)\ \{\}}
\DoxyCodeLine{00091\ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_ae5db95b0ad2140a1c2f162a6f0f3cb52}{\string~affinity\_partitioner\_base\_v3}}()\ \{\mbox{\hyperlink{_matrix__resize__int_8cpp_a768dd1b4259f262bcd4cab5e61afcea1}{resize}}(0);\}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{tbb__stddef_8h_a7a1df7e6f83415a1624716541dc4b741}{\_\_TBB\_EXPORTED\_METHOD}}\ \mbox{\hyperlink{_matrix__resize__int_8cpp_a768dd1b4259f262bcd4cab5e61afcea1}{resize}}(\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{fft_8c_a13b942e46c2348d4cfe7bced3e905d1d}{factor}}\ );}
\DoxyCodeLine{00095\ \};}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00098\ \textcolor{keyword}{class\ }partition\_type\_base\ \{}
\DoxyCodeLine{00099\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{keywordtype}{void}\ set\_affinity(\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ \&\ )\ \{\}}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordtype}{void}\ note\_affinity(\ task::affinity\_id\ )\ \{\}}
\DoxyCodeLine{00102\ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}*\ continue\_after\_execute\_range()\ \{\textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};\}}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keywordtype}{bool}\ decide\_whether\_to\_delay()\ \{\textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\}}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordtype}{void}\ spawn\_or\_delay(\ \textcolor{keywordtype}{bool},\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\&\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}\ )\ \{}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ task::spawn(\mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}});}
\DoxyCodeLine{00106\ \ \ \ \ \}}
\DoxyCodeLine{00107\ \};}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{class\ }start\_scan;}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \}\ \textcolor{comment}{//<\ namespace\ internal\ @endcond}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \textcolor{keyword}{namespace\ }serial\ \{}
\DoxyCodeLine{00114\ \textcolor{keyword}{namespace\ }interface9\ \{}
\DoxyCodeLine{00115\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{class\ }start\_for;}
\DoxyCodeLine{00116\ \}}
\DoxyCodeLine{00117\ \}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \textcolor{keyword}{namespace\ }interface9\ \{}
\DoxyCodeLine{00121\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinternal}{internal}}\ \{}
\DoxyCodeLine{00122\ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespacetbb_1_1internal}{tbb::internal}};}
\DoxyCodeLine{00123\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{class\ }start\_for;}
\DoxyCodeLine{00124\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{class\ }start\_reduce;}
\DoxyCodeLine{00125\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{class\ }start\_deterministic\_reduce;}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00128\ \textcolor{keyword}{class\ }flag\_task:\ \textcolor{keyword}{public}\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ \{}
\DoxyCodeLine{00129\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00130\ \ \ \ \ tbb::atomic<bool>\ my\_child\_stolen;}
\DoxyCodeLine{00131\ \ \ \ \ flag\_task()\ \{\ my\_child\_stolen\ =\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00132\ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}*\ execute()\ \_\_TBB\_override\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};\ \}}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ mark\_task\_stolen(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ tbb::atomic<bool>\ \&flag\ =\ \textcolor{keyword}{static\_cast<}flag\_task*\textcolor{keyword}{>}(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.parent())-\/>my\_child\_stolen;}
\DoxyCodeLine{00135\ \textcolor{preprocessor}{\#if\ TBB\_USE\_THREADING\_TOOLS}}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Threading\ tools\ respect\ lock\ prefix\ but\ report\ false-\/positive\ data-\/race\ via\ plain\ store}}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ flag.fetch\_and\_store<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa412563418e657114a102db610f726632}{release}}>(\textcolor{keyword}{true});}
\DoxyCodeLine{00138\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ flag\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00140\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//TBB\_USE\_THREADING\_TOOLS}}
\DoxyCodeLine{00141\ \ \ \ \ \}}
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ is\_peer\_stolen(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}flag\_task*\textcolor{keyword}{>}(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.parent())-\/>my\_child\_stolen;}
\DoxyCodeLine{00144\ \ \ \ \ \}}
\DoxyCodeLine{00145\ \};}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00150\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2video_8h_aced0360c4caf9feb4433e516189ff966}{depth\_t}};}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00153\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ depth\_t\ MaxCapacity>}
\DoxyCodeLine{00154\ \textcolor{keyword}{class\ }range\_vector\ \{}
\DoxyCodeLine{00155\ \ \ \ \ \mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2video_8h_aced0360c4caf9feb4433e516189ff966}{depth\_t}}\ my\_head;}
\DoxyCodeLine{00156\ \ \ \ \ \mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2video_8h_aced0360c4caf9feb4433e516189ff966}{depth\_t}}\ my\_tail;}
\DoxyCodeLine{00157\ \ \ \ \ \mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2video_8h_aced0360c4caf9feb4433e516189ff966}{depth\_t}}\ my\_size;}
\DoxyCodeLine{00158\ \ \ \ \ \mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2video_8h_aced0360c4caf9feb4433e516189ff966}{depth\_t}}\ my\_depth[MaxCapacity];\ \textcolor{comment}{//\ relative\ depths\ of\ stored\ ranges}}
\DoxyCodeLine{00159\ \ \ \ \ tbb::aligned\_space<T,\ MaxCapacity>\ my\_pool;}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00163\ \ \ \ \ range\_vector(\textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ elem)\ :\ my\_head(0),\ my\_tail(0),\ my\_size(1)\ \{}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ my\_depth[0]\ =\ 0;}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}(\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}\ *\textcolor{keyword}{>}(my\_pool.begin())\ )\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(elem);\textcolor{comment}{//TODO:\ std::move?}}
\DoxyCodeLine{00166\ \ \ \ \ \}}
\DoxyCodeLine{00167\ \ \ \ \ \string~range\_vector()\ \{}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\ !empty()\ )\ pop\_back();}
\DoxyCodeLine{00169\ \ \ \ \ \}}
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{keywordtype}{bool}\ empty()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ my\_size\ ==\ 0;\ \}}
\DoxyCodeLine{00171\ \ \ \ \ \mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2video_8h_aced0360c4caf9feb4433e516189ff966}{depth\_t}}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ my\_size;\ \}}
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{keywordtype}{void}\ split\_to\_fill(\mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2video_8h_aced0360c4caf9feb4433e516189ff966}{depth\_t}}\ max\_depth)\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\ my\_size\ <\ MaxCapacity\ \&\&\ is\_divisible(max\_depth)\ )\ \{}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2video_8h_aced0360c4caf9feb4433e516189ff966}{depth\_t}}\ prev\ =\ my\_head;}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ my\_head\ =\ (my\_head\ +\ 1)\ \%\ MaxCapacity;}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}(my\_pool.begin()+my\_head)\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(my\_pool.begin()[prev]);\ \textcolor{comment}{//\ copy\ TODO:\ std::move?}}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ my\_pool.begin()[prev].\string~T();\ \textcolor{comment}{//\ instead\ of\ assignment}}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}(my\_pool.begin()+prev)\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(my\_pool.begin()[my\_head],\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}}());\ \textcolor{comment}{//\ do\ 'inverse'\ split}}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ my\_depth[my\_head]\ =\ ++my\_depth[prev];}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ my\_size++;}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00184\ \ \ \ \ \}}
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keywordtype}{void}\ pop\_back()\ \{}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(my\_size\ >\ 0,\ \textcolor{stringliteral}{"{}range\_vector::pop\_back()\ with\ empty\ size"{}});}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ my\_pool.begin()[my\_head].\string~T();}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ my\_size-\/-\/;}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ my\_head\ =\ (my\_head\ +\ MaxCapacity\ -\/\ 1)\ \%\ MaxCapacity;}
\DoxyCodeLine{00190\ \ \ \ \ \}}
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{keywordtype}{void}\ pop\_front()\ \{}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(my\_size\ >\ 0,\ \textcolor{stringliteral}{"{}range\_vector::pop\_front()\ with\ empty\ size"{}});}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ my\_pool.begin()[my\_tail].\string~T();}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ my\_size-\/-\/;}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ my\_tail\ =\ (my\_tail\ +\ 1)\ \%\ MaxCapacity;}
\DoxyCodeLine{00196\ \ \ \ \ \}}
\DoxyCodeLine{00197\ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ back()\ \{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(my\_size\ >\ 0,\ \textcolor{stringliteral}{"{}range\_vector::back()\ with\ empty\ size"{}});}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ my\_pool.begin()[my\_head];}
\DoxyCodeLine{00200\ \ \ \ \ \}}
\DoxyCodeLine{00201\ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ front()\ \{}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(my\_size\ >\ 0,\ \textcolor{stringliteral}{"{}range\_vector::front()\ with\ empty\ size"{}});}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ my\_pool.begin()[my\_tail];}
\DoxyCodeLine{00204\ \ \ \ \ \}}
\DoxyCodeLine{00206\ \ \ \ \ \mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2video_8h_aced0360c4caf9feb4433e516189ff966}{depth\_t}}\ front\_depth()\ \{}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(my\_size\ >\ 0,\ \textcolor{stringliteral}{"{}range\_vector::front\_depth()\ with\ empty\ size"{}});}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ my\_depth[my\_tail];}
\DoxyCodeLine{00209\ \ \ \ \ \}}
\DoxyCodeLine{00210\ \ \ \ \ \mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2video_8h_aced0360c4caf9feb4433e516189ff966}{depth\_t}}\ back\_depth()\ \{}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(my\_size\ >\ 0,\ \textcolor{stringliteral}{"{}range\_vector::back\_depth()\ with\ empty\ size"{}});}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ my\_depth[my\_head];}
\DoxyCodeLine{00213\ \ \ \ \ \}}
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_divisible(\mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2video_8h_aced0360c4caf9feb4433e516189ff966}{depth\_t}}\ max\_depth)\ \{}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ back\_depth()\ <\ max\_depth\ \&\&\ back().is\_divisible();}
\DoxyCodeLine{00216\ \ \ \ \ \}}
\DoxyCodeLine{00217\ \};}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00220\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Partition>}
\DoxyCodeLine{00221\ \textcolor{keyword}{struct\ }partition\_type\_base\ \{}
\DoxyCodeLine{00222\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}}\ split\_type;}
\DoxyCodeLine{00223\ \ \ \ \ \textcolor{comment}{//\ decision\ makers}}
\DoxyCodeLine{00224\ \ \ \ \ \textcolor{keywordtype}{void}\ set\_affinity(\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ \&\ )\ \{\}}
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keywordtype}{void}\ note\_affinity(\ task::affinity\_id\ )\ \{\}}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keywordtype}{bool}\ check\_being\_stolen(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ \&)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}\ \textcolor{comment}{//\ part\ of\ old\ should\_execute\_range()}}
\DoxyCodeLine{00227\ \ \ \ \ \textcolor{keywordtype}{bool}\ check\_for\_demand(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ \&)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_divisible()\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}\ \textcolor{comment}{//\ part\ of\ old\ should\_execute\_range()}}
\DoxyCodeLine{00229\ \ \ \ \ \mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2video_8h_aced0360c4caf9feb4433e516189ff966}{depth\_t}}\ max\_depth()\ \{\ \textcolor{keywordflow}{return}\ 0;\ \}}
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{keywordtype}{void}\ align\_depth(\mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2video_8h_aced0360c4caf9feb4433e516189ff966}{depth\_t}})\ \{\ \}}
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Range>\ split\_type\ get\_split()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}}();\ \}}
\DoxyCodeLine{00232\ \ \ \ \ Partition\&\ self()\ \{\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{static\_cast<}Partition*\textcolor{keyword}{>}(\textcolor{keyword}{this});\ \}\ \textcolor{comment}{//\ CRTP\ helper}}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ StartType,\ \textcolor{keyword}{typename}\ Range>}
\DoxyCodeLine{00235\ \ \ \ \ \textcolor{keywordtype}{void}\ work\_balance(StartType\ \&\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}},\ \mbox{\hyperlink{test__parallel__scan_8cpp_a7bc3babd450e7afd1af6c7616d0547f7}{Range}}\ \&range)\ \{}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}.run\_body(\ range\ );\ \textcolor{comment}{//\ simple\ partitioner\ goes\ always\ here}}
\DoxyCodeLine{00237\ \ \ \ \ \}}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ StartType,\ \textcolor{keyword}{typename}\ Range>}
\DoxyCodeLine{00240\ \ \ \ \ \textcolor{keywordtype}{void}\ execute(StartType\ \&\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}},\ \mbox{\hyperlink{test__parallel__scan_8cpp_a7bc3babd450e7afd1af6c7616d0547f7}{Range}}\ \&range)\ \{}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ algorithm\ in\ a\ few\ words\ ([]-\/denotes\ calls\ to\ decision\ methods\ of\ partitioner):}}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ [If\ this\ task\ is\ stolen,\ adjust\ depth\ and\ divisions\ if\ necessary,\ set\ flag].}}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ range\ is\ divisible\ \{}}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ Spread\ the\ work\ while\ [initial\ divisions\ left];}}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ Create\ trap\ task\ [if\ necessary];}}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \}}}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ not\ divisible\ or\ [max\ depth\ is\ reached],\ execute,\ else\ do\ the\ range\ pool\ part}}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ range.is\_divisible()\ )\ \{}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ self().is\_divisible()\ )\ \{}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{\ \textcolor{comment}{//\ split\ until\ is\ divisible}}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ Partition::split\_type\ split\_obj\ =\ self().template\ get\_split<Range>();}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}.offer\_work(\ split\_obj\ );}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ range.is\_divisible()\ \&\&\ self().is\_divisible()\ );}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ self().work\_balance(\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}},\ range);}
\DoxyCodeLine{00257\ \ \ \ \ \}}
\DoxyCodeLine{00258\ \};}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00261\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Partition>}
\DoxyCodeLine{00262\ \textcolor{keyword}{struct\ }adaptive\_mode\ :\ partition\_type\_base<Partition>\ \{}
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{keyword}{typedef}\ Partition\ my\_partition;}
\DoxyCodeLine{00264\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ my\_divisor;}
\DoxyCodeLine{00265\ \ \ \ \ \textcolor{comment}{//\ For\ affinity\_partitioner,\ my\_divisor\ indicates\ the\ number\ of\ affinity\ array\ indices\ the\ task\ reserves.}}
\DoxyCodeLine{00266\ \ \ \ \ \textcolor{comment}{//\ A\ task\ which\ has\ only\ one\ index\ must\ produce\ the\ right\ split\ without\ reserved\ index\ in\ order\ to\ avoid}}
\DoxyCodeLine{00267\ \ \ \ \ \textcolor{comment}{//\ it\ to\ be\ overwritten\ in\ note\_affinity()\ of\ the\ created\ (right)\ task.}}
\DoxyCodeLine{00268\ \ \ \ \ \textcolor{comment}{//\ I.e.\ a\ task\ created\ deeper\ than\ the\ affinity\ array\ can\ remember\ must\ not\ save\ its\ affinity\ (LIFO\ order)}}
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{fft_8c_a13b942e46c2348d4cfe7bced3e905d1d}{factor}}\ =\ 1;}
\DoxyCodeLine{00270\ \ \ \ \ adaptive\_mode()\ :\ my\_divisor(\mbox{\hyperlink{namespacetbb_1_1internal_a324a7e462a89cfba6fde8ac14d0773aa}{tbb::internal::get\_initial\_auto\_partitioner\_divisor}}()\ /\ 4\ *\ my\_partition::factor)\ \{\}}
\DoxyCodeLine{00271\ \ \ \ \ adaptive\_mode(adaptive\_mode\ \&\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}})\ :\ my\_divisor(do\_split(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}}()))\ \{\}}
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ do\_split(adaptive\_mode\ \&\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}})\ \{}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_divisor\ /=\ 2u;}
\DoxyCodeLine{00275\ \ \ \ \ \}}
\DoxyCodeLine{00276\ \};}
\DoxyCodeLine{00277\ }
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00282\ \textcolor{comment}{//\ TODO:\ check\ if\ this\ helper\ can\ be\ a\ nested\ class\ of\ proportional\_mode.}}
\DoxyCodeLine{00283\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ =\ \textcolor{keywordtype}{void}>}
\DoxyCodeLine{00284\ \textcolor{keyword}{struct\ }proportion\_helper\ \{}
\DoxyCodeLine{00285\ \ \ \ \ \textcolor{keyword}{static}\ proportional\_split\ get\_split(\textcolor{keywordtype}{size\_t})\ \{\ \textcolor{keywordflow}{return}\ proportional\_split(1,1);\ \}}
\DoxyCodeLine{00286\ \};}
\DoxyCodeLine{00287\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Range>}
\DoxyCodeLine{00288\ \textcolor{keyword}{struct\ }proportion\_helper<\mbox{\hyperlink{test__parallel__scan_8cpp_a7bc3babd450e7afd1af6c7616d0547f7}{Range}},\ typename\ \mbox{\hyperlink{structtbb_1_1internal_1_1enable__if}{enable\_if}}<\mbox{\hyperlink{test__parallel__scan_8cpp_a7bc3babd450e7afd1af6c7616d0547f7}{Range}}::is\_splittable\_in\_proportion,\ \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}>\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{::type}}>\ \{}
\DoxyCodeLine{00289\ \ \ \ \ \textcolor{keyword}{static}\ proportional\_split\ get\_split(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}})\ \{}
\DoxyCodeLine{00290\ \textcolor{preprocessor}{\#if\ \_\_TBB\_NONUNIFORM\_TASK\_CREATION}}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{blas__interface_8hh_ae258f4b5364eaaabd106893a19064f76}{right}}\ =\ (\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ +\ 2)\ /\ 3;}
\DoxyCodeLine{00292\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{blas__interface_8hh_ae258f4b5364eaaabd106893a19064f76}{right}}\ =\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ /\ 2;}
\DoxyCodeLine{00294\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{blas__interface_8hh_af32074257ed1b575dfd1ab2f6e6ba59f}{left}}\ =\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ -\/\ \mbox{\hyperlink{blas__interface_8hh_ae258f4b5364eaaabd106893a19064f76}{right}};}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ proportional\_split(\mbox{\hyperlink{blas__interface_8hh_af32074257ed1b575dfd1ab2f6e6ba59f}{left}},\ \mbox{\hyperlink{blas__interface_8hh_ae258f4b5364eaaabd106893a19064f76}{right}});}
\DoxyCodeLine{00297\ \ \ \ \ \}}
\DoxyCodeLine{00298\ \};}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00301\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Partition>}
\DoxyCodeLine{00302\ \textcolor{keyword}{struct\ }proportional\_mode\ :\ adaptive\_mode<Partition>\ \{}
\DoxyCodeLine{00303\ \ \ \ \ \textcolor{keyword}{typedef}\ Partition\ my\_partition;}
\DoxyCodeLine{00304\ \ \ \ \ \textcolor{keyword}{using\ }partition\_type\_base<Partition>::self;\ \textcolor{comment}{//\ CRTP\ helper\ to\ get\ access\ to\ derived\ classes}}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \ \ \ \ proportional\_mode()\ :\ adaptive\_mode<Partition>()\ \{\}}
\DoxyCodeLine{00307\ \ \ \ \ proportional\_mode(proportional\_mode\ \&\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}})\ :\ adaptive\_mode<Partition>(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}}())\ \{\}}
\DoxyCodeLine{00308\ \ \ \ \ proportional\_mode(proportional\_mode\ \&\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \textcolor{keyword}{const}\ proportional\_split\&\ split\_obj)\ \{\ self().my\_divisor\ =\ do\_split(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ split\_obj);\ \}}
\DoxyCodeLine{00309\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ do\_split(proportional\_mode\ \&\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \textcolor{keyword}{const}\ proportional\_split\&\ split\_obj)\ \{}
\DoxyCodeLine{00310\ \textcolor{preprocessor}{\#if\ \_\_TBB\_ENABLE\_RANGE\_FEEDBACK}}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ portion\ =\ size\_t(\textcolor{keywordtype}{float}(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_divisor)\ *\ \textcolor{keywordtype}{float}(split\_obj.right())}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ /\ \textcolor{keywordtype}{float}(split\_obj.left()\ +\ split\_obj.right())\ +\ 0.5f);}
\DoxyCodeLine{00313\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ portion\ =\ split\_obj.right()\ *\ my\_partition::factor;}
\DoxyCodeLine{00315\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ portion\ =\ (portion\ +\ my\_partition::factor/2)\ \&\ (0ul\ -\/\ my\_partition::factor);}
\DoxyCodeLine{00317\ \textcolor{preprocessor}{\#if\ \_\_TBB\_ENABLE\_RANGE\_FEEDBACK}\textcolor{preprocessor}{}}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!portion)}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ portion\ =\ my\_partition::factor;}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (portion\ ==\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_divisor)}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \ \ \ \ portion\ =\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_divisor\ -\/\ my\_partition::factor;}
\DoxyCodeLine{00323\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_divisor\ -\/=\ portion;}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ portion;}
\DoxyCodeLine{00326\ \ \ \ \ \}}
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_divisible()\ \{\ \textcolor{comment}{//\ part\ of\ old\ should\_execute\_range()}}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self().my\_divisor\ >\ my\_partition::factor;}
\DoxyCodeLine{00329\ \ \ \ \ \}}
\DoxyCodeLine{00330\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Range>}
\DoxyCodeLine{00331\ \ \ \ \ proportional\_split\ get\_split()\ \{}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ a\ proportion\ for\ the\ number\ of\ threads\ expected\ to\ handle\ "{}this"{}\ subrange}}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ proportion\_helper<Range>::get\_split(\ self().my\_divisor\ /\ my\_partition::factor\ );}
\DoxyCodeLine{00334\ \ \ \ \ \}}
\DoxyCodeLine{00335\ \};}
\DoxyCodeLine{00336\ }
\DoxyCodeLine{00337\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ get\_initial\_partition\_head()\ \{}
\DoxyCodeLine{00338\ \ \ \ \ \textcolor{keywordtype}{int}\ current\_index\ =\ \mbox{\hyperlink{namespacetbb_1_1this__task__arena_a3ab8c42906cedb6fc3e088097e8639ea}{tbb::this\_task\_arena::current\_thread\_index}}();}
\DoxyCodeLine{00339\ \ \ \ \ \textcolor{keywordflow}{if}\ (current\_index\ ==\ \mbox{\hyperlink{namespacetbb_1_1task__arena_a9b81451374ef7f5736e0c151642fcfd4}{tbb::task\_arena::not\_initialized}})}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ current\_index\ =\ 0;}
\DoxyCodeLine{00341\ \ \ \ \ \textcolor{keywordflow}{return}\ size\_t(current\_index);}
\DoxyCodeLine{00342\ \}}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00345\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Partition>}
\DoxyCodeLine{00346\ \textcolor{keyword}{struct\ }linear\_affinity\_mode\ :\ proportional\_mode<Partition>\ \{}
\DoxyCodeLine{00347\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ my\_head;}
\DoxyCodeLine{00348\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ my\_max\_affinity;}
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{keyword}{using\ }proportional\_mode<Partition>::self;}
\DoxyCodeLine{00350\ \ \ \ \ linear\_affinity\_mode()\ :\ proportional\_mode<Partition>(),\ my\_head(get\_initial\_partition\_head()),}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_max\_affinity(self().my\_divisor)\ \{\}}
\DoxyCodeLine{00352\ \ \ \ \ linear\_affinity\_mode(linear\_affinity\_mode\ \&\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}})\ :\ proportional\_mode<Partition>(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}}())}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ ,\ my\_head((\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_head\ +\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_divisor)\ \%\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_max\_affinity),\ my\_max\_affinity(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_max\_affinity)\ \{\}}
\DoxyCodeLine{00354\ \ \ \ \ linear\_affinity\_mode(linear\_affinity\_mode\ \&\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \textcolor{keyword}{const}\ proportional\_split\&\ split\_obj)\ :\ proportional\_mode<Partition>(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ split\_obj)}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ ,\ my\_head((\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_head\ +\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_divisor)\ \%\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_max\_affinity),\ my\_max\_affinity(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_max\_affinity)\ \{\}}
\DoxyCodeLine{00356\ \ \ \ \ \textcolor{keywordtype}{void}\ set\_affinity(\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ \{}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ self().my\_divisor\ )}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.set\_affinity(\ \mbox{\hyperlink{namespacetbb_1_1internal_a3e3837fb3ca7bbf4cf4752c58cbed886}{affinity\_id}}(my\_head)\ +\ 1\ );}
\DoxyCodeLine{00359\ \ \ \ \ \}}
\DoxyCodeLine{00360\ \};}
\DoxyCodeLine{00361\ }
\DoxyCodeLine{00363\ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ Mode>}
\DoxyCodeLine{00364\ \textcolor{keyword}{struct\ }dynamic\_grainsize\_mode\ :\ \mbox{\hyperlink{monitors_8c_a46c8a310cf4c094f8c80e1cb8dc1f911}{Mode}}\ \{}
\DoxyCodeLine{00365\ \ \ \ \ \textcolor{keyword}{using\ }Mode::self;}
\DoxyCodeLine{00366\ \textcolor{preprocessor}{\#ifdef\ \_\_TBB\_USE\_MACHINE\_TIME\_STAMPS}}
\DoxyCodeLine{00367\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_ae337512716848c8145c750713519a3c8}{tbb::internal::machine\_tsc\_t}}\ my\_dst\_tsc;}
\DoxyCodeLine{00368\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00369\ \ \ \ \ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}}\ =\ 0,}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{poisson_8cpp_ae12af222b820baf64e953be588c5bbbe}{run}},}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ pass}
\DoxyCodeLine{00373\ \ \ \ \ \}\ my\_delay;}
\DoxyCodeLine{00374\ \ \ \ \ \mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2video_8h_aced0360c4caf9feb4433e516189ff966}{depth\_t}}\ my\_max\_depth;}
\DoxyCodeLine{00375\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ range\_pool\_size\ =\ \mbox{\hyperlink{partitioner_8h_a9587600758c998c281cecc42f2c5ea7d}{\_\_TBB\_RANGE\_POOL\_CAPACITY}};}
\DoxyCodeLine{00376\ \ \ \ \ dynamic\_grainsize\_mode():\ \mbox{\hyperlink{monitors_8c_a46c8a310cf4c094f8c80e1cb8dc1f911}{Mode}}()}
\DoxyCodeLine{00377\ \textcolor{preprocessor}{\#ifdef\ \_\_TBB\_USE\_MACHINE\_TIME\_STAMPS}}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ ,\ my\_dst\_tsc(0)}
\DoxyCodeLine{00379\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ ,\ my\_delay(\mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}})}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ ,\ my\_max\_depth(\mbox{\hyperlink{partitioner_8h_ac472cd56c8bb102421382d3eaad188df}{\_\_TBB\_INIT\_DEPTH}})\ \{\}}
\DoxyCodeLine{00382\ \ \ \ \ dynamic\_grainsize\_mode(dynamic\_grainsize\_mode\&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}})}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{monitors_8c_a46c8a310cf4c094f8c80e1cb8dc1f911}{Mode}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}}())}
\DoxyCodeLine{00384\ \textcolor{preprocessor}{\#ifdef\ \_\_TBB\_USE\_MACHINE\_TIME\_STAMPS}}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ ,\ my\_dst\_tsc(0)}
\DoxyCodeLine{00386\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ ,\ my\_delay(pass)}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ ,\ my\_max\_depth(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.my\_max\_depth)\ \{\}}
\DoxyCodeLine{00389\ \ \ \ \ dynamic\_grainsize\_mode(dynamic\_grainsize\_mode\&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \textcolor{keyword}{const}\ proportional\_split\&\ split\_obj)}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{monitors_8c_a46c8a310cf4c094f8c80e1cb8dc1f911}{Mode}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ split\_obj)}
\DoxyCodeLine{00391\ \textcolor{preprocessor}{\#ifdef\ \_\_TBB\_USE\_MACHINE\_TIME\_STAMPS}}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ ,\ my\_dst\_tsc(0)}
\DoxyCodeLine{00393\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ ,\ my\_delay(\mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}})}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ ,\ my\_max\_depth(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.my\_max\_depth)\ \{\}}
\DoxyCodeLine{00396\ \ \ \ \ \textcolor{keywordtype}{bool}\ check\_being\_stolen(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{\ \textcolor{comment}{//\ part\ of\ old\ should\_execute\_range()}}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !(self().my\_divisor\ /\ Mode::my\_partition::factor)\ )\ \{\ \textcolor{comment}{//\ if\ not\ from\ the\ top\ P\ tasks\ of\ binary\ tree}}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \ \ \ \ self().my\_divisor\ =\ 1;\ \textcolor{comment}{//\ TODO:\ replace\ by\ on-\/stack\ flag\ (partition\_state's\ member)?}}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.is\_stolen\_task()\ \&\&\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.parent()-\/>ref\_count()\ >=\ 2\ )\ \{\ \textcolor{comment}{//\ runs\ concurrently\ with\ the\ left\ task}}
\DoxyCodeLine{00400\ \textcolor{preprocessor}{\#if\ \_\_TBB\_USE\_OPTIONAL\_RTTI}}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ RTTI\ is\ available,\ check\ whether\ the\ cast\ is\ valid}}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\textcolor{keyword}{dynamic\_cast<}flag\_task*\textcolor{keyword}{>}(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.parent()),\ 0);}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ correctness\ of\ the\ cast\ relies\ on\ avoiding\ the\ root\ task\ for\ which:}}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/\ initial\ value\ of\ my\_divisor\ !=\ 0\ (protected\ by\ separate\ assertion)}}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/\ is\_stolen\_task()\ always\ returns\ false\ for\ the\ root\ task.}}
\DoxyCodeLine{00406\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ flag\_task::mark\_task\_stolen(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}});}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !my\_max\_depth\ )\ my\_max\_depth++;}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_max\_depth\ +=\ \mbox{\hyperlink{partitioner_8h_a8281173be7aaadfbc6eba67f8946d66a}{\_\_TBB\_DEMAND\_DEPTH\_ADD}};}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00414\ \ \ \ \ \}}
\DoxyCodeLine{00415\ \ \ \ \ \mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2video_8h_aced0360c4caf9feb4433e516189ff966}{depth\_t}}\ max\_depth()\ \{\ \textcolor{keywordflow}{return}\ my\_max\_depth;\ \}}
\DoxyCodeLine{00416\ \ \ \ \ \textcolor{keywordtype}{void}\ align\_depth(\mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2video_8h_aced0360c4caf9feb4433e516189ff966}{depth\_t}}\ base)\ \{}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(base\ <=\ my\_max\_depth,\ 0);}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ my\_max\_depth\ -\/=\ base;}
\DoxyCodeLine{00419\ \ \ \ \ \}}
\DoxyCodeLine{00420\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ StartType,\ \textcolor{keyword}{typename}\ Range>}
\DoxyCodeLine{00421\ \ \ \ \ \textcolor{keywordtype}{void}\ work\_balance(StartType\ \&\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}},\ \mbox{\hyperlink{test__parallel__scan_8cpp_a7bc3babd450e7afd1af6c7616d0547f7}{Range}}\ \&range)\ \{}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !range.is\_divisible()\ ||\ !self().max\_depth()\ )\ \{}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}.run\_body(\ range\ );\ \textcolor{comment}{//\ simple\ partitioner\ goes\ always\ here}}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{\ \textcolor{comment}{//\ do\ range\ pool}}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \ \ \ \ internal::range\_vector<Range,\ range\_pool\_size>\ range\_pool(range);}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ range\_pool.split\_to\_fill(self().max\_depth());\ \textcolor{comment}{//\ fill\ range\ pool}}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ self().check\_for\_demand(\ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}\ )\ )\ \{}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ range\_pool.size()\ >\ 1\ )\ \{}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}.offer\_work(\ range\_pool.front(),\ range\_pool.front\_depth()\ );}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ range\_pool.pop\_front();}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ range\_pool.is\_divisible(self().max\_depth())\ )\ \textcolor{comment}{//\ was\ not\ enough\ depth\ to\ fork\ a\ task}}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};\ \textcolor{comment}{//\ note:\ next\ split\_to\_fill()\ should\ split\ range\ at\ least\ once}}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}.run\_body(\ range\_pool.back()\ );}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ range\_pool.pop\_back();}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}(\ !range\_pool.empty()\ \&\&\ !\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}.is\_cancelled()\ );}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00442\ \ \ \ \ \}}
\DoxyCodeLine{00443\ \ \ \ \ \textcolor{keywordtype}{bool}\ check\_for\_demand(\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ \{}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ pass\ ==\ my\_delay\ )\ \{}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ self().my\_divisor\ >\ 1\ )\ \textcolor{comment}{//\ produce\ affinitized\ tasks\ while\ they\ have\ slot\ in\ array}}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \textcolor{comment}{//\ do\ not\ do\ my\_max\_depth++\ here,\ but\ be\ sure\ range\_pool\ is\ splittable\ once\ more}}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ self().my\_divisor\ \&\&\ my\_max\_depth\ )\ \{\ \textcolor{comment}{//\ make\ balancing\ task}}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self().my\_divisor\ =\ 0;\ \textcolor{comment}{//\ once\ for\ each\ task;\ depth\ will\ be\ decreased\ in\ align\_depth()}}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ flag\_task::is\_peer\_stolen(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ )\ \{}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_max\_depth\ +=\ \mbox{\hyperlink{partitioner_8h_a8281173be7aaadfbc6eba67f8946d66a}{\_\_TBB\_DEMAND\_DEPTH\_ADD}};}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}}\ ==\ my\_delay\ )\ \{}
\DoxyCodeLine{00456\ \textcolor{preprocessor}{\#ifndef\ \_\_TBB\_USE\_MACHINE\_TIME\_STAMPS}}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \ \ \ \ my\_delay\ =\ pass;}
\DoxyCodeLine{00458\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \ \ \ \ my\_dst\_tsc\ =\ \mbox{\hyperlink{gcc__ia32__common_8h_a0f57bc86269d754105082c9f818b0fd7}{\_\_TBB\_time\_stamp}}()\ +\ \_\_TBB\_task\_duration();}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \ \ \ \ my\_delay\ =\ \mbox{\hyperlink{poisson_8cpp_ae12af222b820baf64e953be588c5bbbe}{run}};}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{poisson_8cpp_ae12af222b820baf64e953be588c5bbbe}{run}}\ ==\ my\_delay\ )\ \{}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{gcc__ia32__common_8h_a0f57bc86269d754105082c9f818b0fd7}{\_\_TBB\_time\_stamp}}()\ <\ my\_dst\_tsc\ )\ \{}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(my\_max\_depth\ >\ 0,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_max\_depth-\/-\/;\ \textcolor{comment}{//\ increase\ granularity\ since\ tasks\ seem\ having\ too\ small\ work}}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \ \ \ \ my\_delay\ =\ pass;}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00469\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_USE\_MACHINE\_TIME\_STAMPS}}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00472\ \ \ \ \ \}}
\DoxyCodeLine{00473\ \};}
\DoxyCodeLine{00474\ }
\DoxyCodeLine{00475\ \textcolor{keyword}{class\ }auto\_partition\_type:\ \textcolor{keyword}{public}\ dynamic\_grainsize\_mode<adaptive\_mode<auto\_partition\_type>\ >\ \{}
\DoxyCodeLine{00476\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00477\ \ \ \ \ auto\_partition\_type(\ \textcolor{keyword}{const}\ auto\_partitioner\&\ )}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ :\ dynamic\_grainsize\_mode<adaptive\_mode<auto\_partition\_type>\ >()\ \{}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ my\_divisor\ *=\ \mbox{\hyperlink{partitioner_8h_ad4607096801706f7e789c5722db07ab2}{\_\_TBB\_INITIAL\_CHUNKS}};}
\DoxyCodeLine{00480\ \ \ \ \ \}}
\DoxyCodeLine{00481\ \ \ \ \ auto\_partition\_type(\ auto\_partition\_type\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}})}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ :\ dynamic\_grainsize\_mode<adaptive\_mode<auto\_partition\_type>\ >(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}}())\ \{\}}
\DoxyCodeLine{00483\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_divisible()\ \{\ \textcolor{comment}{//\ part\ of\ old\ should\_execute\_range()}}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ my\_divisor\ >\ 1\ )\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ my\_divisor\ \&\&\ my\_max\_depth\ )\ \{\ \textcolor{comment}{//\ can\ split\ the\ task.\ TODO:\ on-\/stack\ flag\ instead}}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ keep\ same\ fragmentation\ while\ splitting\ for\ the\ local\ task\ pool}}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \ my\_max\_depth-\/-\/;}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \ \ \ \ my\_divisor\ =\ 0;\ \textcolor{comment}{//\ decrease\ max\_depth\ once\ per\ task}}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00491\ \ \ \ \ \}}
\DoxyCodeLine{00492\ \ \ \ \ \textcolor{keywordtype}{bool}\ check\_for\_demand(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ flag\_task::is\_peer\_stolen(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ )\ \{}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \ \ \ \ my\_max\_depth\ +=\ \mbox{\hyperlink{partitioner_8h_a8281173be7aaadfbc6eba67f8946d66a}{\_\_TBB\_DEMAND\_DEPTH\_ADD}};}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00497\ \ \ \ \ \}}
\DoxyCodeLine{00498\ \};}
\DoxyCodeLine{00499\ }
\DoxyCodeLine{00500\ \textcolor{keyword}{class\ }simple\_partition\_type:\ \textcolor{keyword}{public}\ partition\_type\_base<simple\_partition\_type>\ \{}
\DoxyCodeLine{00501\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00502\ \ \ \ \ simple\_partition\_type(\ \textcolor{keyword}{const}\ simple\_partitioner\&\ )\ \{\}}
\DoxyCodeLine{00503\ \ \ \ \ simple\_partition\_type(\ \textcolor{keyword}{const}\ simple\_partition\_type\&,\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}}\ )\ \{\}}
\DoxyCodeLine{00505\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ StartType,\ \textcolor{keyword}{typename}\ Range>}
\DoxyCodeLine{00506\ \ \ \ \ \textcolor{keywordtype}{void}\ execute(StartType\ \&\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}},\ \mbox{\hyperlink{test__parallel__scan_8cpp_a7bc3babd450e7afd1af6c7616d0547f7}{Range}}\ \&range)\ \{}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ split\_type\ split\_obj\ =\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}}();\ \textcolor{comment}{//\ start.offer\_work\ accepts\ split\_type\ as\ reference}}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\ range.is\_divisible()\ )}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}.offer\_work(\ split\_obj\ );}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}.run\_body(\ range\ );}
\DoxyCodeLine{00511\ \ \ \ \ \}}
\DoxyCodeLine{00512\ \};}
\DoxyCodeLine{00513\ }
\DoxyCodeLine{00514\ \textcolor{keyword}{class\ }static\_partition\_type\ :\ \textcolor{keyword}{public}\ linear\_affinity\_mode<static\_partition\_type>\ \{}
\DoxyCodeLine{00515\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00516\ \ \ \ \ \textcolor{keyword}{typedef}\ proportional\_split\ split\_type;}
\DoxyCodeLine{00517\ \ \ \ \ static\_partition\_type(\ \textcolor{keyword}{const}\ static\_partitioner\&\ )}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ :\ linear\_affinity\_mode<static\_partition\_type>()\ \{\}}
\DoxyCodeLine{00519\ \ \ \ \ static\_partition\_type(\ static\_partition\_type\&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}}\ )}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ :\ linear\_affinity\_mode<static\_partition\_type>(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}}())\ \{\}}
\DoxyCodeLine{00521\ \ \ \ \ static\_partition\_type(\ static\_partition\_type\&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \textcolor{keyword}{const}\ proportional\_split\&\ split\_obj\ )}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ :\ linear\_affinity\_mode<static\_partition\_type>(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ split\_obj)\ \{\}}
\DoxyCodeLine{00523\ \};}
\DoxyCodeLine{00524\ }
\DoxyCodeLine{00525\ \textcolor{keyword}{class\ }affinity\_partition\_type\ :\ \textcolor{keyword}{public}\ dynamic\_grainsize\_mode<linear\_affinity\_mode<affinity\_partition\_type>\ >\ \{}
\DoxyCodeLine{00526\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ factor\_power\ =\ 4;\ \textcolor{comment}{//\ TODO:\ get\ a\ unified\ formula\ based\ on\ number\ of\ computing\ units}}
\DoxyCodeLine{00527\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a3e3837fb3ca7bbf4cf4752c58cbed886}{tbb::internal::affinity\_id}}*\ my\_array;}
\DoxyCodeLine{00528\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00529\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{fft_8c_a13b942e46c2348d4cfe7bced3e905d1d}{factor}}\ =\ 1\ <<\ factor\_power;\ \textcolor{comment}{//\ number\ of\ slots\ in\ affinity\ array\ per\ task}}
\DoxyCodeLine{00530\ \ \ \ \ \textcolor{keyword}{typedef}\ proportional\_split\ split\_type;}
\DoxyCodeLine{00531\ \ \ \ \ affinity\_partition\_type(\ tbb::internal::affinity\_partitioner\_base\_v3\&\ \mbox{\hyperlink{xsum__os__specific_8h_ac959bfda01880938c8ff143206a1dfaa}{ap}}\ )}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ :\ dynamic\_grainsize\_mode<linear\_affinity\_mode<affinity\_partition\_type>\ >()\ \{}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ (\mbox{\hyperlink{fft_8c_a13b942e46c2348d4cfe7bced3e905d1d}{factor}}\&(\mbox{\hyperlink{fft_8c_a13b942e46c2348d4cfe7bced3e905d1d}{factor}}-\/1))==0,\ \textcolor{stringliteral}{"{}factor\ must\ be\ power\ of\ two"{}}\ );}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{xsum__os__specific_8h_ac959bfda01880938c8ff143206a1dfaa}{ap}}.resize(\mbox{\hyperlink{fft_8c_a13b942e46c2348d4cfe7bced3e905d1d}{factor}});}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ my\_array\ =\ \mbox{\hyperlink{xsum__os__specific_8h_ac959bfda01880938c8ff143206a1dfaa}{ap}}.my\_array;}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ my\_max\_depth\ =\ factor\_power\ +\ 1;}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ my\_max\_depth\ <\ \mbox{\hyperlink{partitioner_8h_a9587600758c998c281cecc42f2c5ea7d}{\_\_TBB\_RANGE\_POOL\_CAPACITY}},\ 0\ );}
\DoxyCodeLine{00538\ \ \ \ \ \}}
\DoxyCodeLine{00539\ \ \ \ \ affinity\_partition\_type(affinity\_partition\_type\&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}})}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ :\ dynamic\_grainsize\_mode<linear\_affinity\_mode<affinity\_partition\_type>\ >(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}}())}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ ,\ my\_array(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.my\_array)\ \{\}}
\DoxyCodeLine{00542\ \ \ \ \ affinity\_partition\_type(affinity\_partition\_type\&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \textcolor{keyword}{const}\ proportional\_split\&\ split\_obj)}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ :\ dynamic\_grainsize\_mode<linear\_affinity\_mode<affinity\_partition\_type>\ >(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ split\_obj)}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ ,\ my\_array(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.my\_array)\ \{\}}
\DoxyCodeLine{00545\ \ \ \ \ \textcolor{keywordtype}{void}\ set\_affinity(\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ \{}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ my\_divisor\ )\ \{}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !my\_array[my\_head]\ )}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ consider\ new\ ideas\ with\ my\_array\ for\ both\ affinity\ and\ static\ partitioner's,\ then\ code\ reuse}}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.set\_affinity(\ \mbox{\hyperlink{namespacetbb_1_1internal_a3e3837fb3ca7bbf4cf4752c58cbed886}{affinity\_id}}(my\_head\ /\ \mbox{\hyperlink{fft_8c_a13b942e46c2348d4cfe7bced3e905d1d}{factor}}\ +\ 1)\ );}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.set\_affinity(\ my\_array[my\_head]\ );}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00553\ \ \ \ \ \}}
\DoxyCodeLine{00554\ \ \ \ \ \textcolor{keywordtype}{void}\ note\_affinity(\ task::affinity\_id\ \textcolor{keywordtype}{id}\ )\ \{}
\DoxyCodeLine{00555\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ my\_divisor\ )}
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \ \ \ \ my\_array[my\_head]\ =\ \mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}};}
\DoxyCodeLine{00557\ \ \ \ \ \}}
\DoxyCodeLine{00558\ \};}
\DoxyCodeLine{00559\ }
\DoxyCodeLine{00561\ \textcolor{keyword}{class\ }old\_auto\_partition\_type:\ \textcolor{keyword}{public}\ tbb::internal::partition\_type\_base\ \{}
\DoxyCodeLine{00562\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ num\_chunks;}
\DoxyCodeLine{00563\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ VICTIM\_CHUNKS\ =\ 4;}
\DoxyCodeLine{00564\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00565\ \ \ \ \ \textcolor{keywordtype}{bool}\ should\_execute\_range(\textcolor{keyword}{const}\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ num\_chunks<VICTIM\_CHUNKS\ \&\&\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.is\_stolen\_task()\ )}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \ \ \ \ \ \ num\_chunks\ =\ VICTIM\_CHUNKS;}
\DoxyCodeLine{00568\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ num\_chunks==1;}
\DoxyCodeLine{00569\ \ \ \ \ \}}
\DoxyCodeLine{00570\ \ \ \ \ old\_auto\_partition\_type(\ \textcolor{keyword}{const}\ auto\_partitioner\&\ )}
\DoxyCodeLine{00571\ \ \ \ \ \ \ :\ num\_chunks(\mbox{\hyperlink{namespacetbb_1_1internal_a324a7e462a89cfba6fde8ac14d0773aa}{internal::get\_initial\_auto\_partitioner\_divisor}}()*\mbox{\hyperlink{partitioner_8h_ad4607096801706f7e789c5722db07ab2}{\_\_TBB\_INITIAL\_CHUNKS}}/4)\ \{\}}
\DoxyCodeLine{00572\ \ \ \ \ old\_auto\_partition\_type(\ \textcolor{keyword}{const}\ affinity\_partitioner\&\ )}
\DoxyCodeLine{00573\ \ \ \ \ \ \ :\ num\_chunks(\mbox{\hyperlink{namespacetbb_1_1internal_a324a7e462a89cfba6fde8ac14d0773aa}{internal::get\_initial\_auto\_partitioner\_divisor}}()*\mbox{\hyperlink{partitioner_8h_ad4607096801706f7e789c5722db07ab2}{\_\_TBB\_INITIAL\_CHUNKS}}/4)\ \{\}}
\DoxyCodeLine{00574\ \ \ \ \ old\_auto\_partition\_type(\ old\_auto\_partition\_type\&\ pt,\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}}\ )\ \{}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ num\_chunks\ =\ pt.num\_chunks\ =\ (pt.num\_chunks+1u)\ /\ 2u;}
\DoxyCodeLine{00576\ \ \ \ \ \}}
\DoxyCodeLine{00577\ \};}
\DoxyCodeLine{00578\ }
\DoxyCodeLine{00579\ \}\ \textcolor{comment}{//\ namespace\ interfaceX::internal}}
\DoxyCodeLine{00581\ \}\ \textcolor{comment}{//\ namespace\ interfaceX}}
\DoxyCodeLine{00582\ }
\DoxyCodeLine{00584\ }
\DoxyCodeLine{00586\ \textcolor{keyword}{class\ }simple\_partitioner\ \{}
\DoxyCodeLine{00587\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00588\ \ \ \ \ simple\_partitioner()\ \{\}}
\DoxyCodeLine{00589\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00590\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1serial_1_1interface9_1_1start__for}{serial::interface9::start\_for}};}
\DoxyCodeLine{00591\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1interface9_1_1internal_1_1start__for}{interface9::internal::start\_for}};}
\DoxyCodeLine{00592\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }interface9::internal::start\_reduce;}
\DoxyCodeLine{00593\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }interface9::internal::start\_deterministic\_reduce;}
\DoxyCodeLine{00594\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }internal::start\_scan;}
\DoxyCodeLine{00595\ \ \ \ \ \textcolor{comment}{//\ backward\ compatibility}}
\DoxyCodeLine{00596\ \ \ \ \ \textcolor{keyword}{class\ }partition\_type:\ \textcolor{keyword}{public}\ internal::partition\_type\_base\ \{}
\DoxyCodeLine{00597\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ should\_execute\_range(\textcolor{keyword}{const}\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}\&\ )\ \{\textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\}}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ partition\_type(\ \textcolor{keyword}{const}\ simple\_partitioner\&\ )\ \{\}}
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \ partition\_type(\ \textcolor{keyword}{const}\ partition\_type\&,\ \mbox{\hyperlink{dff__run_8cpp_a0711bc625a1e6944ca62107b5847365f}{split}}\ )\ \{\}}
\DoxyCodeLine{00601\ \ \ \ \ \};}
\DoxyCodeLine{00602\ \ \ \ \ \textcolor{comment}{//\ new\ implementation\ just\ extends\ existing\ interface}}
\DoxyCodeLine{00603\ \ \ \ \ \textcolor{keyword}{typedef}\ interface9::internal::simple\_partition\_type\ task\_partition\_type;}
\DoxyCodeLine{00604\ }
\DoxyCodeLine{00605\ \ \ \ \ \textcolor{comment}{//\ TODO:\ consider\ to\ make\ split\_type\ public}}
\DoxyCodeLine{00606\ \ \ \ \ \textcolor{keyword}{typedef}\ interface9::internal::simple\_partition\_type::split\_type\ split\_type;}
\DoxyCodeLine{00607\ \};}
\DoxyCodeLine{00608\ }
\DoxyCodeLine{00610\ }
\DoxyCodeLine{00613\ \textcolor{keyword}{class\ }auto\_partitioner\ \{}
\DoxyCodeLine{00614\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00615\ \ \ \ \ auto\_partitioner()\ \{\}}
\DoxyCodeLine{00616\ }
\DoxyCodeLine{00617\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00618\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1serial_1_1interface9_1_1start__for}{serial::interface9::start\_for}};}
\DoxyCodeLine{00619\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1interface9_1_1internal_1_1start__for}{interface9::internal::start\_for}};}
\DoxyCodeLine{00620\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }interface9::internal::start\_reduce;}
\DoxyCodeLine{00621\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }internal::start\_scan;}
\DoxyCodeLine{00622\ \ \ \ \ \textcolor{comment}{//\ backward\ compatibility}}
\DoxyCodeLine{00623\ \ \ \ \ \textcolor{keyword}{typedef}\ interface9::internal::old\_auto\_partition\_type\ partition\_type;}
\DoxyCodeLine{00624\ \ \ \ \ \textcolor{comment}{//\ new\ implementation\ just\ extends\ existing\ interface}}
\DoxyCodeLine{00625\ \ \ \ \ \textcolor{keyword}{typedef}\ interface9::internal::auto\_partition\_type\ task\_partition\_type;}
\DoxyCodeLine{00626\ }
\DoxyCodeLine{00627\ \ \ \ \ \textcolor{comment}{//\ TODO:\ consider\ to\ make\ split\_type\ public}}
\DoxyCodeLine{00628\ \ \ \ \ \textcolor{keyword}{typedef}\ interface9::internal::auto\_partition\_type::split\_type\ split\_type;}
\DoxyCodeLine{00629\ \};}
\DoxyCodeLine{00630\ }
\DoxyCodeLine{00632\ \textcolor{keyword}{class\ }static\_partitioner\ \{}
\DoxyCodeLine{00633\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00634\ \ \ \ \ static\_partitioner()\ \{\}}
\DoxyCodeLine{00635\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00636\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1serial_1_1interface9_1_1start__for}{serial::interface9::start\_for}};}
\DoxyCodeLine{00637\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1interface9_1_1internal_1_1start__for}{interface9::internal::start\_for}};}
\DoxyCodeLine{00638\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }interface9::internal::start\_reduce;}
\DoxyCodeLine{00639\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }interface9::internal::start\_deterministic\_reduce;}
\DoxyCodeLine{00640\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }internal::start\_scan;}
\DoxyCodeLine{00641\ \ \ \ \ \textcolor{comment}{//\ backward\ compatibility}}
\DoxyCodeLine{00642\ \ \ \ \ \textcolor{keyword}{typedef}\ interface9::internal::old\_auto\_partition\_type\ partition\_type;}
\DoxyCodeLine{00643\ \ \ \ \ \textcolor{comment}{//\ new\ implementation\ just\ extends\ existing\ interface}}
\DoxyCodeLine{00644\ \ \ \ \ \textcolor{keyword}{typedef}\ interface9::internal::static\_partition\_type\ task\_partition\_type;}
\DoxyCodeLine{00645\ }
\DoxyCodeLine{00646\ \ \ \ \ \textcolor{comment}{//\ TODO:\ consider\ to\ make\ split\_type\ public}}
\DoxyCodeLine{00647\ \ \ \ \ \textcolor{keyword}{typedef}\ interface9::internal::static\_partition\_type::split\_type\ split\_type;}
\DoxyCodeLine{00648\ \};}
\DoxyCodeLine{00649\ }
\DoxyCodeLine{00651\ \textcolor{keyword}{class\ }affinity\_partitioner:\ internal::affinity\_partitioner\_base\_v3\ \{}
\DoxyCodeLine{00652\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00653\ \ \ \ \ affinity\_partitioner()\ \{\}}
\DoxyCodeLine{00654\ }
\DoxyCodeLine{00655\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00656\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1serial_1_1interface9_1_1start__for}{serial::interface9::start\_for}};}
\DoxyCodeLine{00657\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1interface9_1_1internal_1_1start__for}{interface9::internal::start\_for}};}
\DoxyCodeLine{00658\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }interface9::internal::start\_reduce;}
\DoxyCodeLine{00659\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Body,\ \textcolor{keyword}{typename}\ Partitioner>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }internal::start\_scan;}
\DoxyCodeLine{00660\ \ \ \ \ \textcolor{comment}{//\ backward\ compatibility\ -\/\ for\ parallel\_scan\ only}}
\DoxyCodeLine{00661\ \ \ \ \ \textcolor{keyword}{typedef}\ interface9::internal::old\_auto\_partition\_type\ partition\_type;}
\DoxyCodeLine{00662\ \ \ \ \ \textcolor{comment}{//\ new\ implementation\ just\ extends\ existing\ interface}}
\DoxyCodeLine{00663\ \ \ \ \ \textcolor{keyword}{typedef}\ interface9::internal::affinity\_partition\_type\ task\_partition\_type;}
\DoxyCodeLine{00664\ }
\DoxyCodeLine{00665\ \ \ \ \ \textcolor{comment}{//\ TODO:\ consider\ to\ make\ split\_type\ public}}
\DoxyCodeLine{00666\ \ \ \ \ \textcolor{keyword}{typedef}\ interface9::internal::affinity\_partition\_type::split\_type\ split\_type;}
\DoxyCodeLine{00667\ \};}
\DoxyCodeLine{00668\ }
\DoxyCodeLine{00669\ \}\ \textcolor{comment}{//\ namespace\ tbb}}
\DoxyCodeLine{00670\ }
\DoxyCodeLine{00671\ \textcolor{preprocessor}{\#if\ defined(\_MSC\_VER)\ \&\&\ !defined(\_\_INTEL\_COMPILER)}}
\DoxyCodeLine{00672\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ warning\ (pop)}}
\DoxyCodeLine{00673\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ warning\ 4244\ is\ back}}
\DoxyCodeLine{00674\ \textcolor{preprocessor}{\#undef\ \_\_TBB\_INITIAL\_CHUNKS}}
\DoxyCodeLine{00675\ \textcolor{preprocessor}{\#undef\ \_\_TBB\_RANGE\_POOL\_CAPACITY}}
\DoxyCodeLine{00676\ \textcolor{preprocessor}{\#undef\ \_\_TBB\_INIT\_DEPTH}}
\DoxyCodeLine{00677\ }
\DoxyCodeLine{00678\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{__warning__suppress__disable__notice_8h}{internal/\_warning\_suppress\_disable\_notice.h}}"{}}}
\DoxyCodeLine{00679\ \textcolor{preprocessor}{\#undef\ \_\_TBB\_partitioner\_H\_include\_area}}
\DoxyCodeLine{00680\ }
\DoxyCodeLine{00681\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_partitioner\_H\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
