\doxysection{mesh.\+h}
\hypertarget{mesh_8h_source}{}\label{mesh_8h_source}\index{runtime/runtime/rtx/mesh.h@{runtime/runtime/rtx/mesh.h}}
\mbox{\hyperlink{mesh_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <luisa/runtime/rtx/triangle.h>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <luisa/runtime/rhi/resource.h>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <luisa/runtime/rhi/command.h>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <luisa/runtime/device.h>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <luisa/runtime/buffer.h>}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceluisa_1_1compute}{luisa::compute}}\ \{}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail}{detail}}\ \{}
\DoxyCodeLine{00012\ \mbox{\hyperlink{dll__export_8h_ad06d699c99cabff41979e596b53ac25a}{LC\_RUNTIME\_API}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a03011d0ca7ae1afba0c0fbaea39d5cc4}{check\_mesh\_vert\_align}}(\textcolor{keywordtype}{size\_t}\ v\_stride,\ \textcolor{keywordtype}{size\_t}\ dst);}
\DoxyCodeLine{00013\ \mbox{\hyperlink{dll__export_8h_ad06d699c99cabff41979e596b53ac25a}{LC\_RUNTIME\_API}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a4c45b06c6ff86a9e11b6014dcdee65bf}{check\_mesh\_vert\_buffer\_motion\_keyframe\_count}}(\textcolor{keywordtype}{size\_t}\ total\_vertex\_count,\ \mbox{\hyperlink{sugar_8h_ad46b2ebcd4c426b06cda147ddc1001e7}{uint}}\ motion\_keyframe\_count);}
\DoxyCodeLine{00014\ \mbox{\hyperlink{dll__export_8h_ad06d699c99cabff41979e596b53ac25a}{LC\_RUNTIME\_API}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_ab701fa0656266310f56d3a6a7dab19dd}{check\_mesh\_triangle\_buffer\_offset\_and\_size}}(\textcolor{keywordtype}{size\_t}\ offset\_bytes,\ \textcolor{keywordtype}{size\_t}\ size\_bytes);}
\DoxyCodeLine{00015\ \mbox{\hyperlink{dll__export_8h_ad06d699c99cabff41979e596b53ac25a}{LC\_RUNTIME\_API}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a0f95d1cc16d58344ab06df2aa6c4db24}{check\_mesh\_vertex\_buffer\_offset\_and\_size}}(\textcolor{keywordtype}{size\_t}\ offset\_bytes,\ \textcolor{keywordtype}{size\_t}\ size\_bytes,\ \textcolor{keywordtype}{size\_t}\ v\_stride);}
\DoxyCodeLine{00016\ \}\textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00017\ \textcolor{keyword}{class\ }Accel;}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{comment}{//\ A\ Mesh\ is\ a\ bottom-\/level\ acceleration\ structure\ (BLAS)\ for\ ray-\/tracing\ with\ a\ set\ of\ triangles.}}
\DoxyCodeLine{00020\ \textcolor{comment}{//\ For\ custom\ intersection,\ see\ ProceduralPrimitive.}}
\DoxyCodeLine{00021\ \textcolor{keyword}{class\ }\mbox{\hyperlink{dll__export_8h_ad06d699c99cabff41979e596b53ac25a}{LC\_RUNTIME\_API}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_acd15b069a60b0ed9a9353a32b8cddc01}{Mesh}}\ final\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_ad04c9df5461ad463bc3bfa340590a61a}{Resource}}\ \{}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_af0b63b0be30382734ca2379e4dde7a4e}{BuildRequest}}\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_a64463a2984ce24f41388a1cf382ead11}{AccelBuildRequest}};}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{namespaceluisa_a70f466a8a407b18f0870c81f4bd3bf66}{uint}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a08581cd7d3c1c1071e914d123c41d682}{\_triangle\_count}}\{\};}
\DoxyCodeLine{00028\ \ \ \ \ \mbox{\hyperlink{namespaceluisa_a70f466a8a407b18f0870c81f4bd3bf66}{uint}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a71b1d8b3161c48a23cd289baf763a87d}{\_motion\_keyframe\_count}}\{\};}
\DoxyCodeLine{00029\ \ \ \ \ \mbox{\hyperlink{eabase_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\_t}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a6b27ecc8837e59da1a3b2b541c894b28}{\_v\_buffer}}\{\};}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a40f8fd7cb3667d014a6f752cdfce9f1f}{\_v\_buffer\_native\_handle}}\{\};}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a2d5b1976ed459189e46f0443a536714a}{\_v\_buffer\_offset\_bytes}}\{\};}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ae66e3e84638676a31cea180cd4b7090e}{\_v\_buffer\_size\_bytes}}\{\};}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a52bf841276a1685bc65e50347d49843e}{\_v\_buffer\_total\_size\_bytes}}\{\};}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a2a978240871b8c0239a21d9206675b53}{\_v\_stride}}\{\};}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \ \ \mbox{\hyperlink{eabase_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\_t}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a5c8a28e23feb166b0f58c275a678cbed}{\_t\_buffer}}\{\};}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a7a0ffc974536f7bb9d1d954ceab27a48}{\_t\_buffer\_native\_handle}}\{\};}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a5b4b539399c229121d66afd8a47bcf5f}{\_t\_buffer\_offset\_bytes}}\{\};}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ac038af1d9ed90417dbe01d5884d9b438}{\_t\_buffer\_size\_bytes}}\{\};}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ae0d500e82f93a82b24568b1780ca5224}{\_t\_buffer\_total\_size\_bytes}}\{\};}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{comment}{//\ WARNING:\ transform\ buffers'\ data\ without\ rebuild\ acceleration\ structure\ is\ undefined\ behavior}}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ VertexType>}
\DoxyCodeLine{00045\ \ \ \ \ [[nodiscard]]\ \mbox{\hyperlink{classluisa_1_1compute_1_1_buffer_view}{BufferView<VertexType>}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ac78f77256896ae308ca892f63293c243}{vertex\_buffer}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a03011d0ca7ae1afba0c0fbaea39d5cc4}{detail::check\_mesh\_vert\_align}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a2a978240871b8c0239a21d9206675b53}{\_v\_stride}},\ \textcolor{keyword}{sizeof}(VertexType));}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a40f8fd7cb3667d014a6f752cdfce9f1f}{\_v\_buffer\_native\_handle}},\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a6b27ecc8837e59da1a3b2b541c894b28}{\_v\_buffer}},\ \textcolor{keyword}{sizeof}(VertexType),}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a2d5b1976ed459189e46f0443a536714a}{\_v\_buffer\_offset\_bytes}},\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ae66e3e84638676a31cea180cd4b7090e}{\_v\_buffer\_size\_bytes}}\ /\ \textcolor{keyword}{sizeof}(VertexType),}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a52bf841276a1685bc65e50347d49843e}{\_v\_buffer\_total\_size\_bytes}}\ /\ \textcolor{keyword}{sizeof}(VertexType)\};}
\DoxyCodeLine{00050\ \ \ \ \ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ [[nodiscard]]\ \mbox{\hyperlink{classluisa_1_1compute_1_1_buffer_view}{BufferView<Triangle>}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a8699649428c64d0db1d5705021bbad01}{triangle\_buffer}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a7a0ffc974536f7bb9d1d954ceab27a48}{\_t\_buffer\_native\_handle}},\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a5c8a28e23feb166b0f58c275a678cbed}{\_t\_buffer}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structluisa_1_1compute_1_1_triangle}{Triangle}}),}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a5b4b539399c229121d66afd8a47bcf5f}{\_t\_buffer\_offset\_bytes}},\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ac038af1d9ed90417dbe01d5884d9b438}{\_t\_buffer\_size\_bytes}}\ /\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structluisa_1_1compute_1_1_triangle}{Triangle}}),}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ae0d500e82f93a82b24568b1780ca5224}{\_t\_buffer\_total\_size\_bytes}}\ /\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structluisa_1_1compute_1_1_triangle}{Triangle}})\};}
\DoxyCodeLine{00056\ \ \ \ \ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a520fa05e0bf58785da428f7a0241eee2}{Device}};}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ VBuffer,\ \textcolor{keyword}{typename}\ TBuffer>}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{keyword}{requires}\ \mbox{\hyperlink{namespaceluisa_1_1compute_af90edbcad40e9bc117817242536c45ce}{is\_buffer\_or\_view\_v<VBuffer>}}\ \&\&}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_af90edbcad40e9bc117817242536c45ce}{is\_buffer\_or\_view\_v<TBuffer>}}\ \&\&}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::same\_as<buffer\_element\_t<TBuffer>,\ \mbox{\hyperlink{structluisa_1_1compute_1_1_triangle}{Triangle}}>}
\DoxyCodeLine{00065\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{static}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_resource_creation_info}{ResourceCreationInfo}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a39310b209e6bec2edd5f54f1b09882be}{\_create\_resource}}(}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_device_interface}{DeviceInterface}}\ *\mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a80d70cb175660af12e01637de33f32bc}{device}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_accel_option}{AccelOption}}\ \&\mbox{\hyperlink{structoption}{option}},}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ VBuffer\ \&\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ac78f77256896ae308ca892f63293c243}{vertex\_buffer}}\ [[maybe\_unused]],}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ TBuffer\ \&\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a8699649428c64d0db1d5705021bbad01}{triangle\_buffer}}\ [[maybe\_unused]])\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a80d70cb175660af12e01637de33f32bc}{device}}-\/>create\_mesh(\mbox{\hyperlink{structoption}{option}});}
\DoxyCodeLine{00070\ \ \ \ \ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ VBuffer,\ \textcolor{keyword}{typename}\ TBuffer>}
\DoxyCodeLine{00074\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_acd15b069a60b0ed9a9353a32b8cddc01}{Mesh}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_device_interface}{DeviceInterface}}\ *\mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a80d70cb175660af12e01637de33f32bc}{device}},}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ VBuffer\ \&\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ac78f77256896ae308ca892f63293c243}{vertex\_buffer}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ab63ce4c43df0fd914c3afbafeaf0aec9}{vertex\_stride}},}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ TBuffer\ \&\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a8699649428c64d0db1d5705021bbad01}{triangle\_buffer}},}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_accel_option}{AccelOption}}\ \&\mbox{\hyperlink{structoption}{option}})\ noexcept}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_ad04c9df5461ad463bc3bfa340590a61a}{Resource}}\{\mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a80d70cb175660af12e01637de33f32bc}{device}},\ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a3d72fc24a13e8e17d2284bf4f59a19d6a5b65fe46c5dd90ebcec69c472c3be1d9}{Resource::Tag::MESH}},}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a39310b209e6bec2edd5f54f1b09882be}{\_create\_resource}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a80d70cb175660af12e01637de33f32bc}{device}},\ \mbox{\hyperlink{structoption}{option}},\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ac78f77256896ae308ca892f63293c243}{vertex\_buffer}},\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a8699649428c64d0db1d5705021bbad01}{triangle\_buffer}})\}\ \{}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_buffer_view}{BufferView}}\ vb\_view\{vertex\_buffer\};}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ BufferView\ tri\_view\{triangle\_buffer\};}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ detail::check\_mesh\_vertex\_buffer\_offset\_and\_size(vb\_view.offset\_bytes(),\ vb\_view.size\_bytes(),\ vertex\_stride);}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ detail::check\_mesh\_triangle\_buffer\_offset\_and\_size(tri\_view.offset\_bytes(),\ tri\_view.size\_bytes());}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \_triangle\_count\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{sugar_8h_ad46b2ebcd4c426b06cda147ddc1001e7}{uint}}\textcolor{keyword}{>}(tri\_view.size\_bytes()\ /\ \textcolor{keyword}{sizeof}(Triangle));}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \_motion\_keyframe\_count\ =\ \mbox{\hyperlink{structoption}{option}}.motion.keyframe\_count;}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ detail::check\_mesh\_vert\_buffer\_motion\_keyframe\_count(vb\_view.size\_bytes()\ /\ vertex\_stride,\ \_motion\_keyframe\_count);}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \_v\_buffer\ =\ vb\_view.handle();}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \_v\_buffer\_native\_handle\ =\ vb\_view.native\_handle();}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \_v\_buffer\_offset\_bytes\ =\ vb\_view.offset\_bytes();}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \_v\_buffer\_size\_bytes\ =\ vb\_view.size\_bytes();}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \_v\_buffer\_total\_size\_bytes\ =\ vb\_view.total\_size\_bytes();}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \_v\_stride\ =\ vertex\_stride;}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \_t\_buffer\ =\ tri\_view.handle();}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \_t\_buffer\_native\_handle\ =\ tri\_view.native\_handle();}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \_t\_buffer\_offset\_bytes\ =\ tri\_view.offset\_bytes();}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \_t\_buffer\_size\_bytes\ =\ tri\_view.size\_bytes();}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \_t\_buffer\_total\_size\_bytes\ =\ tri\_view.total\_size\_bytes();}
\DoxyCodeLine{00102\ \ \ \ \ \}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ VBuffer,\ \textcolor{keyword}{typename}\ TBuffer>}
\DoxyCodeLine{00105\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_af302d340c90a960fd3159c8a396cb8ac}{Mesh}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_device_interface}{DeviceInterface}}\ *\mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a80d70cb175660af12e01637de33f32bc}{device}},}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ VBuffer\ \&\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ac78f77256896ae308ca892f63293c243}{vertex\_buffer}},\ \textcolor{keyword}{const}\ TBuffer\ \&\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a8699649428c64d0db1d5705021bbad01}{triangle\_buffer}},}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_accel_option}{AccelOption}}\ \&\mbox{\hyperlink{structoption}{option}})\ noexcept}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_acd15b069a60b0ed9a9353a32b8cddc01}{Mesh}}\{\mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a80d70cb175660af12e01637de33f32bc}{device}},\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ac78f77256896ae308ca892f63293c243}{vertex\_buffer}},\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ac78f77256896ae308ca892f63293c243}{vertex\_buffer}}.stride(),\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a8699649428c64d0db1d5705021bbad01}{triangle\_buffer}},\ \mbox{\hyperlink{structoption}{option}}\}\ \{\}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00111\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a552ea43015aefe9000c835849ab6bb28}{Mesh}}()\ noexcept\ =\ \mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}};}
\DoxyCodeLine{00112\ \ \ \ \ \string~\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_acd15b069a60b0ed9a9353a32b8cddc01}{Mesh}}()\ noexcept\ override;}
\DoxyCodeLine{00113\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_acd15b069a60b0ed9a9353a32b8cddc01}{Mesh}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_acd15b069a60b0ed9a9353a32b8cddc01}{Mesh}}\ \&\&)\ noexcept\ =\ \mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}};}
\DoxyCodeLine{00114\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_acd15b069a60b0ed9a9353a32b8cddc01}{Mesh}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_acd15b069a60b0ed9a9353a32b8cddc01}{Mesh}}\ const\ \&)\ noexcept\ =\ delete;}
\DoxyCodeLine{00115\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_acd15b069a60b0ed9a9353a32b8cddc01}{Mesh}}\ \&operator=(\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_acd15b069a60b0ed9a9353a32b8cddc01}{Mesh}}\ \&\&rhs)\ noexcept\ \{}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_ac8bd4f95e29f120931f646355e51323a}{\_move\_from}}(std::move(rhs));}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00118\ \ \ \ \ \}}
\DoxyCodeLine{00119\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_acd15b069a60b0ed9a9353a32b8cddc01}{Mesh}}\ \&\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ae621ef030f6dcd22bc21c4b421b47acf}{operator=}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_acd15b069a60b0ed9a9353a32b8cddc01}{Mesh}}\ \textcolor{keyword}{const}\ \&)\ \textcolor{keyword}{noexcept}\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keyword}{using\ }Resource::operator\ \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}};}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{comment}{//\ build\ triangle\ based\ bottom-\/level\ acceleration\ structure}}
\DoxyCodeLine{00122\ \ \ \ \ [[nodiscard]]\ luisa::unique\_ptr<Command>\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a0debfd9c6f73e95e08efece84a8d4ab8}{build}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_af0b63b0be30382734ca2379e4dde7a4e}{BuildRequest}}\ request\ =\ BuildRequest::PREFER\_UPDATE)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ab1b46fcbdf6e6a4b89fec47af9fea1d6}{triangle\_count}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_acd4eeb601dbaa644497541380a30c9aa}{\_check\_is\_valid}}();}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a08581cd7d3c1c1071e914d123c41d682}{\_triangle\_count}};}
\DoxyCodeLine{00127\ \ \ \ \ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ac6d1697def2851e61ecd4ef0ee7ff44d}{motion\_keyframe\_count}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_acd4eeb601dbaa644497541380a30c9aa}{\_check\_is\_valid}}();}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::max<uint>(1u,\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a71b1d8b3161c48a23cd289baf763a87d}{\_motion\_keyframe\_count}});}
\DoxyCodeLine{00132\ \ \ \ \ \}}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ab63ce4c43df0fd914c3afbafeaf0aec9}{vertex\_stride}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_acd4eeb601dbaa644497541380a30c9aa}{\_check\_is\_valid}}();}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a2a978240871b8c0239a21d9206675b53}{\_v\_stride}};}
\DoxyCodeLine{00137\ \ \ \ \ \}}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a9dfd2cf36e038e66d5b4a6a0be385776}{vertex\_count\_per\_motion\_keyframe}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ n\ =\ this-\/>\mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ac6d1697def2851e61ecd4ef0ee7ff44d}{motion\_keyframe\_count}}();}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_ae66e3e84638676a31cea180cd4b7090e}{\_v\_buffer\_size\_bytes}}\ /\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh_a2a978240871b8c0239a21d9206675b53}{\_v\_stride}}\ /\ n;}
\DoxyCodeLine{00142\ \ \ \ \ \}}
\DoxyCodeLine{00143\ \};}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ VBuffer,\ \textcolor{keyword}{typename}\ TBuffer>}
\DoxyCodeLine{00146\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh}{Mesh}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_device_a70e763e3a7ba3d693bed8f05851e0d31}{Device::create\_mesh}}(VBuffer\ \&\&\mbox{\hyperlink{offscreen_8c_a7e053af782adbe690cdfe86586882fb5}{vertices}},\ TBuffer\ \&\&triangles,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_accel_option}{AccelOption}}\ \&\mbox{\hyperlink{structoption}{option}})\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>\mbox{\hyperlink{classluisa_1_1compute_1_1_device_a989b9aac0ea5d2b4e432c05b6fe821f5}{\_create<Mesh>}}(std::forward<VBuffer>(\mbox{\hyperlink{offscreen_8c_a7e053af782adbe690cdfe86586882fb5}{vertices}}),\ std::forward<TBuffer>(triangles),\ \mbox{\hyperlink{structoption}{option}});}
\DoxyCodeLine{00148\ \}}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ VBuffer,\ \textcolor{keyword}{typename}\ TBuffer>}
\DoxyCodeLine{00151\ \mbox{\hyperlink{classluisa_1_1compute_1_1_mesh}{Mesh}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_device_a70e763e3a7ba3d693bed8f05851e0d31}{Device::create\_mesh}}(VBuffer\ \&\&\mbox{\hyperlink{offscreen_8c_a7e053af782adbe690cdfe86586882fb5}{vertices}},\ \textcolor{keywordtype}{size\_t}\ vertex\_stride,\ TBuffer\ \&\&triangles,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_accel_option}{AccelOption}}\ \&\mbox{\hyperlink{structoption}{option}})\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>\mbox{\hyperlink{classluisa_1_1compute_1_1_device_a989b9aac0ea5d2b4e432c05b6fe821f5}{\_create<Mesh>}}(std::forward<VBuffer>(\mbox{\hyperlink{offscreen_8c_a7e053af782adbe690cdfe86586882fb5}{vertices}}),\ vertex\_stride,\ std::forward<TBuffer>(triangles),\ \mbox{\hyperlink{structoption}{option}});}
\DoxyCodeLine{00153\ \}}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \}\textcolor{comment}{//\ namespace\ luisa::compute}}

\end{DoxyCode}
