\doxysection{vyukov\+\_\+queue\+\_\+pool.\+h}
\hypertarget{vyukov__queue__pool_8h_source}{}\label{vyukov__queue__pool_8h_source}\index{external/libcds/cds/memory/vyukov\_queue\_pool.h@{external/libcds/cds/memory/vyukov\_queue\_pool.h}}
\mbox{\hyperlink{vyukov__queue__pool_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ (c)\ 2006-\/2018\ Maxim\ Khizhinsky}}
\DoxyCodeLine{00002\ \textcolor{comment}{//}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ Distributed\ under\ the\ Boost\ Software\ License,\ Version\ 1.0.\ (See\ accompanying}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ file\ LICENSE\ or\ copy\ at\ http://www.boost.org/LICENSE\_1\_0.txt)}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#ifndef\ CDSLIB\_MEMORY\_VYUKOV\_QUEUE\_ALLOCATOR\_H}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#define\ CDSLIB\_MEMORY\_VYUKOV\_QUEUE\_ALLOCATOR\_H}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{external_2libcds_2cds_2details_2allocator_8h}{cds/details/allocator.h}}>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{intrusive_2vyukov__mpmc__cycle__queue_8h}{cds/intrusive/vyukov\_mpmc\_cycle\_queue.h}}>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{throw__exception_8h}{cds/details/throw\_exception.h}}>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds}{cds}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds_1_1memory}{memory}}\ \{}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcds_1_1memory_1_1vyukov__queue__pool__traits}{vyukov\_queue\_pool\_traits}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{structcds_1_1intrusive_1_1vyukov__queue_1_1traits}{cds::intrusive::vyukov\_queue::traits}}}
\DoxyCodeLine{00020\ \ \ \ \ \{}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{external_2libcds_2cds_2user__setup_2allocator_8h_ad5fb7e3cbe8cf24295f0ea3c165a2d82}{CDS\_DEFAULT\_ALLOCATOR}}\ \mbox{\hyperlink{structcds_1_1memory_1_1vyukov__queue__pool__traits_a4a2011b525205bfffb1517453a344f3d}{allocator}};}
\DoxyCodeLine{00023\ \ \ \ \ \};}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Traits\ =\ vyukov\_queue\_pool\_traits\ >}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_a9f2d52eee891c7325a560fd3788e244e}{vyukov\_queue\_pool}}}
\DoxyCodeLine{00091\ \ \ \ \ \{}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue}{cds::intrusive::VyukovMPMCCycleQueue<\ T,\ Traits\ >}}\ \mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_a859308d601430789036188f51e75cad7}{queue\_type}}\ \ ;\ \ \ }
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \ \mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_aeb0c4af604d77e19ea604cc445051148}{value\_type}}\ ;\ }
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ Traits\ \mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_a49c419dd372e7997eae8dd58dcd7305a}{traits}};\ \ }
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ std::allocator\_traits<typename\ traits::allocator>::template\ rebind\_alloc<value\_type>\ \mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_ae269dd53aa7f4df3c0cd6adb9669193a}{allocator\_type}};\ \ \ }
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::back\_off\ \mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_aba871d1e43ae8530ba86657f58738a17}{back\_off}};\ }
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classcds_1_1details_1_1_allocator}{cds::details::Allocator<\ value\_type,\ allocator\_type\ >}}\ \ \ cxx\_allocator;}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ cxx\_allocator::allocator\_type\ std\_allocator;}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_a859308d601430789036188f51e75cad7}{queue\_type}}\ \ \ \ \ \ m\_Queue;}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_aeb0c4af604d77e19ea604cc445051148}{value\_type}}\ *\ \ \ \ m\_pFirst;}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_aeb0c4af604d77e19ea604cc445051148}{value\_type}}\ *\ \ \ \ m\_pLast;}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ preallocate\_pool()}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ m\_pFirst\ =\ std\_allocator().allocate(\ m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_a795da5a2a638a92c1906e4c616b86192}{capacity}}());}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ m\_pLast\ =\ m\_pFirst\ +\ m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_a795da5a2a638a92c1906e4c616b86192}{capacity}}();}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_aeb0c4af604d77e19ea604cc445051148}{value\_type}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ m\_pFirst;\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ <\ m\_pLast;\ ++\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ \{}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{details_2defs_8h_a00d6647d66a58b0ff13db1a5f47ffd27}{CDS\_VERIFY}}(\ m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_ab124c1de492592b2c718dc9565c6ec36}{push}}(\ *\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ ))\ ;\ \ \ \textcolor{comment}{//\ must\ be\ true}}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ from\_pool(\ value\_type\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\textcolor{keyword}{\ const}}
\DoxyCodeLine{00124\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_pFirst\ <=\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ \&\&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ <\ m\_pLast;}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_a9f2d52eee891c7325a560fd3788e244e}{vyukov\_queue\_pool}}(\ \textcolor{keywordtype}{size\_t}\ nCapacity\ =\ 0\ )}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ :\ m\_Queue(\ nCapacity\ )}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ preallocate\_pool();}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_ae0bc07a2792bf429bbd42d304b5e9f6b}{\string~vyukov\_queue\_pool}}()}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_afa48cf2545aa77dff1d5167e23aa70a5}{clear}}();}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ std\_allocator().deallocate(\ m\_pFirst,\ m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_a795da5a2a638a92c1906e4c616b86192}{capacity}}());}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_aeb0c4af604d77e19ea604cc445051148}{value\_type}}\ *\ \mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_a8c71e7993c50bb05d1eecff9cfb2fc39}{allocate}}(\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ )}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ ==\ 1\ );}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{details_2defs_8h_a782b7f1736e3581e010449d710517c25}{CDS\_UNUSED}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_aeb0c4af604d77e19ea604cc445051148}{value\_type}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_ae6f6fc87de4cf9d503a2b238bd043482}{pop}}();}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ \{}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ from\_pool(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}));}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ \mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_aeb0c4af604d77e19ea604cc445051148}{value\_type}};}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ pool\ is\ empty\ -\/\ allocate\ new\ from\ the\ heap}}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ cxx\_allocator().New();}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_aa11d066048b0cee42a2536d38c9fb8c5}{deallocate}}(\ \mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_aeb0c4af604d77e19ea604cc445051148}{value\_type}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ )}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ ==\ 1\ );}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{details_2defs_8h_a782b7f1736e3581e010449d710517c25}{CDS\_UNUSED}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ \{}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ from\_pool(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}))\ \{}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>\string~value\_type();}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ queue\ can\ notify\ about\ false\ fullness\ state}}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ so\ we\ push\ in\ loop}}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1vyukov__queue__pool_aba871d1e43ae8530ba86657f58738a17}{back\_off}}\ bkoff;}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ !m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_ab124c1de492592b2c718dc9565c6ec36}{push}}(\ *\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ ))}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bkoff();}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cxx\_allocator().Delete(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ );}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00197\ \ \ \ \ \};}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00260\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Traits\ =\ vyukov\_queue\_pool\_traits>}
\DoxyCodeLine{00261\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcds_1_1memory_1_1lazy__vyukov__queue__pool_a406e04c0222c8190e9d0ae94431a40ff}{lazy\_vyukov\_queue\_pool}}}
\DoxyCodeLine{00262\ \ \ \ \ \{}
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue}{cds::intrusive::VyukovMPMCCycleQueue<\ T,\ Traits\ >}}\ \mbox{\hyperlink{classcds_1_1memory_1_1lazy__vyukov__queue__pool_a36d8e8fca6bf5421a4dfc06181a8cce1}{queue\_type}}\ \ ;\ \ \ }
\DoxyCodeLine{00265\ }
\DoxyCodeLine{00266\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \ \mbox{\hyperlink{classcds_1_1memory_1_1lazy__vyukov__queue__pool_a7cee4aa080579c21cd52bbb09cc1ac9a}{value\_type}}\ ;\ }
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ Traits\ \mbox{\hyperlink{classcds_1_1memory_1_1lazy__vyukov__queue__pool_a69e5497f749619c0935c4deb9e8b2282}{traits}};\ \ }
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ std::allocator\_traits<typename\ traits::allocator>::template\ rebind\_alloc<value\_type>\ \mbox{\hyperlink{classcds_1_1memory_1_1lazy__vyukov__queue__pool_afd71f7df97a45f081db4f6a98e986a19}{allocator\_type}};\ \ \ }
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classcds_1_1details_1_1_allocator}{cds::details::Allocator<\ value\_type,\ allocator\_type\ >}}\ \ \ cxx\_allocator;}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ cxx\_allocator::allocator\_type\ std\_allocator;}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1lazy__vyukov__queue__pool_a36d8e8fca6bf5421a4dfc06181a8cce1}{queue\_type}}\ \ \ \ \ \ m\_Queue;}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1lazy__vyukov__queue__pool_a406e04c0222c8190e9d0ae94431a40ff}{lazy\_vyukov\_queue\_pool}}(\ \textcolor{keywordtype}{size\_t}\ nCapacity\ =\ 0\ )}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ :\ m\_Queue(\ nCapacity\ )}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1lazy__vyukov__queue__pool_a300d92da95ea06944957819d09cd19e4}{\string~lazy\_vyukov\_queue\_pool}}()}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ std\_allocator\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}};}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ !m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_a0b8d89e34fb8353f1a89b97ed6056465}{empty}}())}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}.deallocate(\ m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_ae6f6fc87de4cf9d503a2b238bd043482}{pop}}(),\ 1\ );}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1lazy__vyukov__queue__pool_a7cee4aa080579c21cd52bbb09cc1ac9a}{value\_type}}\ *\ \mbox{\hyperlink{classcds_1_1memory_1_1lazy__vyukov__queue__pool_a31da49030ee491460b32e1be3eab47c0}{allocate}}(\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ )}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ ==\ 1\ );}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{details_2defs_8h_a782b7f1736e3581e010449d710517c25}{CDS\_UNUSED}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1lazy__vyukov__queue__pool_a7cee4aa080579c21cd52bbb09cc1ac9a}{value\_type}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_ae6f6fc87de4cf9d503a2b238bd043482}{pop}}();}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ \mbox{\hyperlink{classcds_1_1memory_1_1lazy__vyukov__queue__pool_a7cee4aa080579c21cd52bbb09cc1ac9a}{value\_type}};}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ cxx\_allocator().New();}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00312\ }
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds_1_1memory_1_1lazy__vyukov__queue__pool_a9e8767a7c0423f20d4fbcdecd33a3657}{deallocate}}(\ \mbox{\hyperlink{classcds_1_1memory_1_1lazy__vyukov__queue__pool_a7cee4aa080579c21cd52bbb09cc1ac9a}{value\_type}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ )}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ ==\ 1\ );}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{details_2defs_8h_a782b7f1736e3581e010449d710517c25}{CDS\_UNUSED}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ \{}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>\string~value\_type();}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Here\ we\ ignore\ false\ fullness\ state\ of\ the\ queue}}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_ab124c1de492592b2c718dc9565c6ec36}{push}}(\ *\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ ))}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std\_allocator().deallocate(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ 1\ );}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00334\ \ \ \ \ \};}
\DoxyCodeLine{00335\ }
\DoxyCodeLine{00337\ }
\DoxyCodeLine{00400\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Traits\ =\ vyukov\_queue\_pool\_traits\ >}
\DoxyCodeLine{00401\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_a50c581de0aa20dd931dc436b18df95a5}{bounded\_vyukov\_queue\_pool}}}
\DoxyCodeLine{00402\ \ \ \ \ \{}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }internal\_traits\ :\ \textcolor{keyword}{public}\ Traits\ \{}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classcds_1_1atomicity_1_1item__counter}{cds::atomicity::item\_counter}}\ item\_counter;}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00408\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue}{cds::intrusive::VyukovMPMCCycleQueue<\ T,\ internal\_traits\ >}}\ \mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_aecfc36c13c7a10215e3516afd1f76020}{queue\_type}}\ \ ;\ \ \ }
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00411\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \ \mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_a7bf5a4aa73e20b3c5adcaab574452231}{value\_type}};\ \ }
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ Traits\ \mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_aede679df8ff0ee3732e54a39bc786c26}{traits}};\ \ }
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ std::allocator\_traits<typename\ traits::allocator>::template\ rebind\_alloc<value\_type>\ \mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_a7dc6230848773572a540dc3db5ed4cdb}{allocator\_type}};\ \ \ }
\DoxyCodeLine{00415\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::back\_off\ \mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_a3f1bf7df57c3485e907d3e66b749e435}{back\_off}};\ }
\DoxyCodeLine{00416\ }
\DoxyCodeLine{00417\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classcds_1_1details_1_1_allocator}{cds::details::Allocator<\ value\_type,\ allocator\_type\ >}}\ cxx\_allocator;}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ cxx\_allocator::allocator\_type\ std\_allocator;}
\DoxyCodeLine{00421\ }
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_aecfc36c13c7a10215e3516afd1f76020}{queue\_type}}\ \ \ \ \ \ m\_Queue;}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_a7bf5a4aa73e20b3c5adcaab574452231}{value\_type}}\ *\ \ \ \ m\_pFirst;}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_a7bf5a4aa73e20b3c5adcaab574452231}{value\_type}}\ *\ \ \ \ m\_pLast;}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00427\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ preallocate\_pool()}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \textcolor{keyword}{const}\ nCount\ =\ m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_a795da5a2a638a92c1906e4c616b86192}{capacity}}();}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \ \ \ \ m\_pFirst\ =\ std\_allocator().allocate(\ nCount\ );}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ m\_pLast\ =\ m\_pFirst\ +\ nCount;}
\DoxyCodeLine{00434\ }
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_a7bf5a4aa73e20b3c5adcaab574452231}{value\_type}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ m\_pFirst;\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ <\ m\_pLast;\ ++\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{details_2defs_8h_a00d6647d66a58b0ff13db1a5f47ffd27}{CDS\_VERIFY}}(\ m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_ab124c1de492592b2c718dc9565c6ec36}{push}}(\ *\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ ))\ ;\ \ \ \textcolor{comment}{//\ must\ be\ true}}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00438\ }
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ from\_pool(\ value\_type\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\textcolor{keyword}{\ const}}
\DoxyCodeLine{00440\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_pFirst\ <=\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ \&\&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ <\ m\_pLast;}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00444\ }
\DoxyCodeLine{00445\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00447\ }
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_a50c581de0aa20dd931dc436b18df95a5}{bounded\_vyukov\_queue\_pool}}(\ \textcolor{keywordtype}{size\_t}\ nCapacity\ =\ 0\ )}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \ \ \ \ :\ m\_Queue(\ nCapacity\ )}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \ \ \ \ preallocate\_pool();}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00457\ }
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_aa05fe5a334c956f4e61d2f5d081608b9}{\string~bounded\_vyukov\_queue\_pool}}()}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \ \ \ \ m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_afa48cf2545aa77dff1d5167e23aa70a5}{clear}}();}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \ \ \ \ std\_allocator().deallocate(\ m\_pFirst,\ m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_a795da5a2a638a92c1906e4c616b86192}{capacity}}());}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00464\ }
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_a7bf5a4aa73e20b3c5adcaab574452231}{value\_type}}\ *\ \mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_a0470473bd629ec3a7431b0737bd1bc80}{allocate}}(\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ )}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ ==\ 1\ );}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{details_2defs_8h_a782b7f1736e3581e010449d710517c25}{CDS\_UNUSED}}(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ );}
\DoxyCodeLine{00477\ }
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_a7bf5a4aa73e20b3c5adcaab574452231}{value\_type}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_ae6f6fc87de4cf9d503a2b238bd043482}{pop}}();}
\DoxyCodeLine{00479\ }
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ \{}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_a3f1bf7df57c3485e907d3e66b749e435}{back\_off}}\ bkoff;}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_a334a4b75344a8ff5d92777326c2063b5}{size}}())\ \{}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_ae6f6fc87de4cf9d503a2b238bd043482}{pop}}();}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ \mbox{\hyperlink{testhelper_8h_a047ea0d874e6802b9b6d08f6b50248e5}{ok}};}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bkoff();}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00488\ }
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ pool\ is\ empty}}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{throw__exception_8h_a66f8269033f98d1b38dae4490ed4382c}{CDS\_THROW\_EXCEPTION}}(\ std::bad\_alloc());}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00492\ }
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{testhelper_8h_a047ea0d874e6802b9b6d08f6b50248e5}{ok}}:}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ from\_pool(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}));}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00497\ }
\DoxyCodeLine{00499\ }
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_a842bd310445c2d0d1a1951ded9dd1006}{deallocate}}(\ \mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_a7bf5a4aa73e20b3c5adcaab574452231}{value\_type}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ )}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ ==\ 1\ );}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{details_2defs_8h_a782b7f1736e3581e010449d710517c25}{CDS\_UNUSED}}(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ );}
\DoxyCodeLine{00509\ }
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ \{}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ from\_pool(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ ));}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1memory_1_1bounded__vyukov__queue__pool_a3f1bf7df57c3485e907d3e66b749e435}{back\_off}}\ bkoff;}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ queue\ can\ notify\ it\ is\ full\ but\ that\ is\ false\ fullness\ state}}
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ So,\ we\ push\ in\ loop}}
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ !m\_Queue.\mbox{\hyperlink{classcds_1_1intrusive_1_1_vyukov_m_p_m_c_cycle_queue_ab124c1de492592b2c718dc9565c6ec36}{push}}(*\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}))}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bkoff();}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00519\ \ \ \ \ \};}
\DoxyCodeLine{00520\ }
\DoxyCodeLine{00521\ }
\DoxyCodeLine{00522\ \}\}\ \ \textcolor{comment}{//\ namespace\ cds::memory}}
\DoxyCodeLine{00523\ }
\DoxyCodeLine{00524\ }
\DoxyCodeLine{00525\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \#ifndef\ CDSLIB\_MEMORY\_VYUKOV\_QUEUE\_ALLOCATOR\_H}}

\end{DoxyCode}
