\doxysection{external/taskflow/3rd-\/party/tbb/examples/graph/dining\+\_\+philosophers/dining\+\_\+philosophers.cpp 文件参考}
\hypertarget{dining__philosophers_8cpp}{}\label{dining__philosophers_8cpp}\index{external/taskflow/3rd-\/party/tbb/examples/graph/dining\_philosophers/dining\_philosophers.cpp@{external/taskflow/3rd-\/party/tbb/examples/graph/dining\_philosophers/dining\_philosophers.cpp}}
{\ttfamily \#include "{}tbb/flow\+\_\+graph.\+h"{}}\newline
{\ttfamily \#include "{}tbb/tick\+\_\+count.\+h"{}}\newline
{\ttfamily \#include "{}tbb/spin\+\_\+mutex.\+h"{}}\newline
{\ttfamily \#include "{}tbb/global\+\_\+control.\+h"{}}\newline
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$thread$>$}\newline
{\ttfamily \#include $<$chrono$>$}\newline
{\ttfamily \#include "{}../../common/utility/utility.\+h"{}}\newline
{\ttfamily \#include "{}../../common/utility/get\+\_\+default\+\_\+num\+\_\+threads.\+h"{}}\newline
{\ttfamily \#include $<$cstdlib$>$}\newline
{\ttfamily \#include $<$cstdio$>$}\newline
dining\+\_\+philosophers.\+cpp 的引用(Include)关系图\+:
% FIG 0
\doxysubsubsection*{类}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_run_options}{Run\+Options}}
\item 
class \mbox{\hyperlink{classchopstick}{chopstick}}
\item 
class \mbox{\hyperlink{classphilosopher}{philosopher}}
\item 
class \mbox{\hyperlink{classthink__node__body}{think\+\_\+node\+\_\+body}}
\item 
class \mbox{\hyperlink{classeat__node__body}{eat\+\_\+node\+\_\+body}}
\item 
class \mbox{\hyperlink{classforward__node__body}{forward\+\_\+node\+\_\+body}}
\end{DoxyCompactItemize}
\doxysubsubsection*{类型定义}
\begin{DoxyCompactItemize}
\item 
typedef tbb\+::flow\+::tuple$<$ continue\+\_\+msg, \mbox{\hyperlink{classchopstick}{chopstick}}, \mbox{\hyperlink{classchopstick}{chopstick}} $>$ \mbox{\hyperlink{dining__philosophers_8cpp_ada015685a725d56f4ae6ddc68c1606fa}{join\+\_\+output}}
\item 
typedef join\+\_\+node$<$ \mbox{\hyperlink{dining__philosophers_8cpp_ada015685a725d56f4ae6ddc68c1606fa}{join\+\_\+output}}, reserving $>$ \mbox{\hyperlink{dining__philosophers_8cpp_a2a7847529dceab40c7c7348b9271ec56}{join\+\_\+node\+\_\+type}}
\item 
typedef function\+\_\+node$<$ continue\+\_\+msg, continue\+\_\+msg $>$ \mbox{\hyperlink{dining__philosophers_8cpp_a005edba13a1ef09b74c2f00eabf59d91}{think\+\_\+node\+\_\+type}}
\item 
typedef function\+\_\+node$<$ \mbox{\hyperlink{dining__philosophers_8cpp_ada015685a725d56f4ae6ddc68c1606fa}{join\+\_\+output}}, continue\+\_\+msg $>$ \mbox{\hyperlink{dining__philosophers_8cpp_ab4cd051a0aeb814fe8f87ea5d1f4de2d}{eat\+\_\+node\+\_\+type}}
\item 
typedef multifunction\+\_\+node$<$ continue\+\_\+msg, \mbox{\hyperlink{dining__philosophers_8cpp_ada015685a725d56f4ae6ddc68c1606fa}{join\+\_\+output}} $>$ \mbox{\hyperlink{dining__philosophers_8cpp_a1b8451ea15e6580aad8a518b95a8677a}{forward\+\_\+node\+\_\+type}}
\item 
typedef queue\+\_\+node$<$ continue\+\_\+msg $>$ \mbox{\hyperlink{dining__philosophers_8cpp_a26d2b2567a8858236a4a538b466cc93e}{thinking\+\_\+done\+\_\+type}}
\end{DoxyCompactItemize}
\doxysubsubsection*{函数}
\begin{DoxyCompactItemize}
\item 
const std\+::chrono\+::seconds \mbox{\hyperlink{dining__philosophers_8cpp_a4ec78f4a3a8855fb128f5b597111b5f5}{think\+\_\+time}} (1)
\item 
const std\+::chrono\+::seconds \mbox{\hyperlink{dining__philosophers_8cpp_aec27f4b70cd698f53124c15fc954e6f8}{eat\+\_\+time}} (1)
\item 
\mbox{\hyperlink{struct_run_options}{Run\+Options}} \mbox{\hyperlink{dining__philosophers_8cpp_ae39af6865b87b2551c2043239e9bbe6d}{Parse\+Command\+Line}} (\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} argc, char \texorpdfstring{$\ast$}{*}argv\mbox{[}$\,$\mbox{]})
\item 
std\+::ostream \& \mbox{\hyperlink{dining__philosophers_8cpp_a3d11c5630a2d0ccbcacd78c75c5df1f6}{operator$<$$<$}} (std\+::ostream \&o, \mbox{\hyperlink{classphilosopher}{philosopher}} const \&\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})
\item 
\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{dining__philosophers_8cpp_a0ddf1224851353fc92bfbff6f499fa97}{main}} (\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} argc, char \texorpdfstring{$\ast$}{*}argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}
\doxysubsubsection*{变量}
\begin{DoxyCompactItemize}
\item 
const \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{dining__philosophers_8cpp_aca3ae6ea1418cea87ecd40c9120e298a}{num\+\_\+times}} = 10
\item 
\mbox{\hyperlink{classtbb_1_1tick__count}{tbb\+::tick\+\_\+count}} \mbox{\hyperlink{dining__philosophers_8cpp_acaabb53c59c5d280a13be2cf359335a9}{t0}}
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{dining__philosophers_8cpp_ab3f078684998b83967d507d0f453f454}{verbose}} = \mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}}
\item 
const char \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{dining__philosophers_8cpp_a0737f2a8dd8fbaf9c6608f85e2b79778}{names}} \mbox{[}$\,$\mbox{]}
\item 
const \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{dining__philosophers_8cpp_ad52a9b22ba60a854362648a391ef35eb}{Num\+Philosophers}} = sizeof(\mbox{\hyperlink{dining__philosophers_8cpp_a0737f2a8dd8fbaf9c6608f85e2b79778}{names}}) / sizeof(char\texorpdfstring{$\ast$}{*})
\item 
\mbox{\hyperlink{classtbb_1_1spin__mutex}{tbb\+::spin\+\_\+mutex}} \mbox{\hyperlink{dining__philosophers_8cpp_a526734cdc85a5961b2721d20b0357d43}{my\+\_\+mutex}}
\end{DoxyCompactItemize}


\doxysubsection{类型定义说明}
\Hypertarget{dining__philosophers_8cpp_ab4cd051a0aeb814fe8f87ea5d1f4de2d}\index{dining\_philosophers.cpp@{dining\_philosophers.cpp}!eat\_node\_type@{eat\_node\_type}}
\index{eat\_node\_type@{eat\_node\_type}!dining\_philosophers.cpp@{dining\_philosophers.cpp}}
\doxysubsubsection{\texorpdfstring{eat\_node\_type}{eat\_node\_type}}
{\footnotesize\ttfamily \label{dining__philosophers_8cpp_ab4cd051a0aeb814fe8f87ea5d1f4de2d} 
typedef function\+\_\+node$<$\mbox{\hyperlink{dining__philosophers_8cpp_ada015685a725d56f4ae6ddc68c1606fa}{join\+\_\+output}}, continue\+\_\+msg$>$ \mbox{\hyperlink{dining__philosophers_8cpp_ab4cd051a0aeb814fe8f87ea5d1f4de2d}{eat\+\_\+node\+\_\+type}}}

\Hypertarget{dining__philosophers_8cpp_a1b8451ea15e6580aad8a518b95a8677a}\index{dining\_philosophers.cpp@{dining\_philosophers.cpp}!forward\_node\_type@{forward\_node\_type}}
\index{forward\_node\_type@{forward\_node\_type}!dining\_philosophers.cpp@{dining\_philosophers.cpp}}
\doxysubsubsection{\texorpdfstring{forward\_node\_type}{forward\_node\_type}}
{\footnotesize\ttfamily \label{dining__philosophers_8cpp_a1b8451ea15e6580aad8a518b95a8677a} 
typedef multifunction\+\_\+node$<$continue\+\_\+msg, \mbox{\hyperlink{dining__philosophers_8cpp_ada015685a725d56f4ae6ddc68c1606fa}{join\+\_\+output}}$>$ \mbox{\hyperlink{dining__philosophers_8cpp_a1b8451ea15e6580aad8a518b95a8677a}{forward\+\_\+node\+\_\+type}}}

\Hypertarget{dining__philosophers_8cpp_a2a7847529dceab40c7c7348b9271ec56}\index{dining\_philosophers.cpp@{dining\_philosophers.cpp}!join\_node\_type@{join\_node\_type}}
\index{join\_node\_type@{join\_node\_type}!dining\_philosophers.cpp@{dining\_philosophers.cpp}}
\doxysubsubsection{\texorpdfstring{join\_node\_type}{join\_node\_type}}
{\footnotesize\ttfamily \label{dining__philosophers_8cpp_a2a7847529dceab40c7c7348b9271ec56} 
typedef join\+\_\+node$<$ \mbox{\hyperlink{dining__philosophers_8cpp_ada015685a725d56f4ae6ddc68c1606fa}{join\+\_\+output}}, reserving $>$ \mbox{\hyperlink{dining__philosophers_8cpp_a2a7847529dceab40c7c7348b9271ec56}{join\+\_\+node\+\_\+type}}}

\Hypertarget{dining__philosophers_8cpp_ada015685a725d56f4ae6ddc68c1606fa}\index{dining\_philosophers.cpp@{dining\_philosophers.cpp}!join\_output@{join\_output}}
\index{join\_output@{join\_output}!dining\_philosophers.cpp@{dining\_philosophers.cpp}}
\doxysubsubsection{\texorpdfstring{join\_output}{join\_output}}
{\footnotesize\ttfamily \label{dining__philosophers_8cpp_ada015685a725d56f4ae6ddc68c1606fa} 
typedef tbb\+::flow\+::tuple$<$continue\+\_\+msg, \mbox{\hyperlink{classchopstick}{chopstick}}, \mbox{\hyperlink{classchopstick}{chopstick}}$>$ \mbox{\hyperlink{dining__philosophers_8cpp_ada015685a725d56f4ae6ddc68c1606fa}{join\+\_\+output}}}

\Hypertarget{dining__philosophers_8cpp_a005edba13a1ef09b74c2f00eabf59d91}\index{dining\_philosophers.cpp@{dining\_philosophers.cpp}!think\_node\_type@{think\_node\_type}}
\index{think\_node\_type@{think\_node\_type}!dining\_philosophers.cpp@{dining\_philosophers.cpp}}
\doxysubsubsection{\texorpdfstring{think\_node\_type}{think\_node\_type}}
{\footnotesize\ttfamily \label{dining__philosophers_8cpp_a005edba13a1ef09b74c2f00eabf59d91} 
typedef function\+\_\+node$<$continue\+\_\+msg, continue\+\_\+msg$>$ \mbox{\hyperlink{dining__philosophers_8cpp_a005edba13a1ef09b74c2f00eabf59d91}{think\+\_\+node\+\_\+type}}}

\Hypertarget{dining__philosophers_8cpp_a26d2b2567a8858236a4a538b466cc93e}\index{dining\_philosophers.cpp@{dining\_philosophers.cpp}!thinking\_done\_type@{thinking\_done\_type}}
\index{thinking\_done\_type@{thinking\_done\_type}!dining\_philosophers.cpp@{dining\_philosophers.cpp}}
\doxysubsubsection{\texorpdfstring{thinking\_done\_type}{thinking\_done\_type}}
{\footnotesize\ttfamily \label{dining__philosophers_8cpp_a26d2b2567a8858236a4a538b466cc93e} 
typedef queue\+\_\+node$<$continue\+\_\+msg$>$ \mbox{\hyperlink{dining__philosophers_8cpp_a26d2b2567a8858236a4a538b466cc93e}{thinking\+\_\+done\+\_\+type}}}



\doxysubsection{函数说明}
\Hypertarget{dining__philosophers_8cpp_aec27f4b70cd698f53124c15fc954e6f8}\index{dining\_philosophers.cpp@{dining\_philosophers.cpp}!eat\_time@{eat\_time}}
\index{eat\_time@{eat\_time}!dining\_philosophers.cpp@{dining\_philosophers.cpp}}
\doxysubsubsection{\texorpdfstring{eat\_time()}{eat\_time()}}
{\footnotesize\ttfamily \label{dining__philosophers_8cpp_aec27f4b70cd698f53124c15fc954e6f8} 
const std\+::chrono\+::seconds eat\+\_\+time (\begin{DoxyParamCaption}\item[{1}]{}{}\end{DoxyParamCaption})}

\Hypertarget{dining__philosophers_8cpp_a0ddf1224851353fc92bfbff6f499fa97}\index{dining\_philosophers.cpp@{dining\_philosophers.cpp}!main@{main}}
\index{main@{main}!dining\_philosophers.cpp@{dining\_philosophers.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily \label{dining__philosophers_8cpp_a0ddf1224851353fc92bfbff6f499fa97} 
\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} main (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{argc}{, }\item[{char \texorpdfstring{$\ast$}{*}}]{argv}{\mbox{[}$\,$\mbox{]}}\end{DoxyParamCaption})}

函数调用图\+:
% FIG 1
\Hypertarget{dining__philosophers_8cpp_a3d11c5630a2d0ccbcacd78c75c5df1f6}\index{dining\_philosophers.cpp@{dining\_philosophers.cpp}!operator$<$$<$@{operator$<$$<$}}
\index{operator$<$$<$@{operator$<$$<$}!dining\_philosophers.cpp@{dining\_philosophers.cpp}}
\doxysubsubsection{\texorpdfstring{operator$<$$<$()}{operator<<()}}
{\footnotesize\ttfamily \label{dining__philosophers_8cpp_a3d11c5630a2d0ccbcacd78c75c5df1f6} 
std\+::ostream \& operator$<$$<$ (\begin{DoxyParamCaption}\item[{std\+::ostream \&}]{o}{, }\item[{\mbox{\hyperlink{classphilosopher}{philosopher}} const \&}]{p}{}\end{DoxyParamCaption})}

\Hypertarget{dining__philosophers_8cpp_ae39af6865b87b2551c2043239e9bbe6d}\index{dining\_philosophers.cpp@{dining\_philosophers.cpp}!ParseCommandLine@{ParseCommandLine}}
\index{ParseCommandLine@{ParseCommandLine}!dining\_philosophers.cpp@{dining\_philosophers.cpp}}
\doxysubsubsection{\texorpdfstring{ParseCommandLine()}{ParseCommandLine()}}
{\footnotesize\ttfamily \label{dining__philosophers_8cpp_ae39af6865b87b2551c2043239e9bbe6d} 
\mbox{\hyperlink{struct_run_options}{Run\+Options}} Parse\+Command\+Line (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{argc}{, }\item[{char \texorpdfstring{$\ast$}{*}}]{argv}{\mbox{[}$\,$\mbox{]}}\end{DoxyParamCaption})}

函数调用图\+:
% FIG 2
\Hypertarget{dining__philosophers_8cpp_a4ec78f4a3a8855fb128f5b597111b5f5}\index{dining\_philosophers.cpp@{dining\_philosophers.cpp}!think\_time@{think\_time}}
\index{think\_time@{think\_time}!dining\_philosophers.cpp@{dining\_philosophers.cpp}}
\doxysubsubsection{\texorpdfstring{think\_time()}{think\_time()}}
{\footnotesize\ttfamily \label{dining__philosophers_8cpp_a4ec78f4a3a8855fb128f5b597111b5f5} 
const std\+::chrono\+::seconds think\+\_\+time (\begin{DoxyParamCaption}\item[{1}]{}{}\end{DoxyParamCaption})}



\doxysubsection{变量说明}
\Hypertarget{dining__philosophers_8cpp_a526734cdc85a5961b2721d20b0357d43}\index{dining\_philosophers.cpp@{dining\_philosophers.cpp}!my\_mutex@{my\_mutex}}
\index{my\_mutex@{my\_mutex}!dining\_philosophers.cpp@{dining\_philosophers.cpp}}
\doxysubsubsection{\texorpdfstring{my\_mutex}{my\_mutex}}
{\footnotesize\ttfamily \label{dining__philosophers_8cpp_a526734cdc85a5961b2721d20b0357d43} 
\mbox{\hyperlink{classtbb_1_1spin__mutex}{tbb\+::spin\+\_\+mutex}} my\+\_\+mutex}

\Hypertarget{dining__philosophers_8cpp_a0737f2a8dd8fbaf9c6608f85e2b79778}\index{dining\_philosophers.cpp@{dining\_philosophers.cpp}!names@{names}}
\index{names@{names}!dining\_philosophers.cpp@{dining\_philosophers.cpp}}
\doxysubsubsection{\texorpdfstring{names}{names}}
{\footnotesize\ttfamily \label{dining__philosophers_8cpp_a0737f2a8dd8fbaf9c6608f85e2b79778} 
const char\texorpdfstring{$\ast$}{*} names\mbox{[}$\,$\mbox{]}}

{\bfseries 初始值\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ \{\ \textcolor{stringliteral}{"{}Archimedes"{}},\ \textcolor{stringliteral}{"{}Bakunin"{}},\ \textcolor{stringliteral}{"{}Confucius"{}},\ \textcolor{stringliteral}{"{}Democritus"{}},\ \textcolor{stringliteral}{"{}Euclid"{}}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ,\ \textcolor{stringliteral}{"{}Favorinus"{}},\ \textcolor{stringliteral}{"{}Geminus"{}},\ \textcolor{stringliteral}{"{}Heraclitus"{}},\ \textcolor{stringliteral}{"{}Ichthyas"{}},\ \textcolor{stringliteral}{"{}Jason\ of\ Nysa"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Kant"{}},\ \textcolor{stringliteral}{"{}Lavrov"{}},\ \textcolor{stringliteral}{"{}Metrocles"{}},\ \textcolor{stringliteral}{"{}Nausiphanes"{}},\ \textcolor{stringliteral}{"{}Onatas"{}},\ \textcolor{stringliteral}{"{}Phaedrus"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Quillot"{}},\ \textcolor{stringliteral}{"{}Russell"{}},\ \textcolor{stringliteral}{"{}Socrates"{}},\ \textcolor{stringliteral}{"{}Thales"{}},\ \textcolor{stringliteral}{"{}Udayana"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Vernadsky"{}},\ \textcolor{stringliteral}{"{}Wittgenstein"{}},\ \textcolor{stringliteral}{"{}Xenophilus"{}},\ \textcolor{stringliteral}{"{}Yen\ Yuan"{}},\ \textcolor{stringliteral}{"{}Zenodotus"{}}}
\DoxyCodeLine{\}}

\end{DoxyCode}
\Hypertarget{dining__philosophers_8cpp_aca3ae6ea1418cea87ecd40c9120e298a}\index{dining\_philosophers.cpp@{dining\_philosophers.cpp}!num\_times@{num\_times}}
\index{num\_times@{num\_times}!dining\_philosophers.cpp@{dining\_philosophers.cpp}}
\doxysubsubsection{\texorpdfstring{num\_times}{num\_times}}
{\footnotesize\ttfamily \label{dining__philosophers_8cpp_aca3ae6ea1418cea87ecd40c9120e298a} 
const \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} num\+\_\+times = 10}

\Hypertarget{dining__philosophers_8cpp_ad52a9b22ba60a854362648a391ef35eb}\index{dining\_philosophers.cpp@{dining\_philosophers.cpp}!NumPhilosophers@{NumPhilosophers}}
\index{NumPhilosophers@{NumPhilosophers}!dining\_philosophers.cpp@{dining\_philosophers.cpp}}
\doxysubsubsection{\texorpdfstring{NumPhilosophers}{NumPhilosophers}}
{\footnotesize\ttfamily \label{dining__philosophers_8cpp_ad52a9b22ba60a854362648a391ef35eb} 
const \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} Num\+Philosophers = sizeof(\mbox{\hyperlink{dining__philosophers_8cpp_a0737f2a8dd8fbaf9c6608f85e2b79778}{names}}) / sizeof(char\texorpdfstring{$\ast$}{*})}

\Hypertarget{dining__philosophers_8cpp_acaabb53c59c5d280a13be2cf359335a9}\index{dining\_philosophers.cpp@{dining\_philosophers.cpp}!t0@{t0}}
\index{t0@{t0}!dining\_philosophers.cpp@{dining\_philosophers.cpp}}
\doxysubsubsection{\texorpdfstring{t0}{t0}}
{\footnotesize\ttfamily \label{dining__philosophers_8cpp_acaabb53c59c5d280a13be2cf359335a9} 
\mbox{\hyperlink{classtbb_1_1tick__count}{tbb\+::tick\+\_\+count}} t0}

\Hypertarget{dining__philosophers_8cpp_ab3f078684998b83967d507d0f453f454}\index{dining\_philosophers.cpp@{dining\_philosophers.cpp}!verbose@{verbose}}
\index{verbose@{verbose}!dining\_philosophers.cpp@{dining\_philosophers.cpp}}
\doxysubsubsection{\texorpdfstring{verbose}{verbose}}
{\footnotesize\ttfamily \label{dining__philosophers_8cpp_ab3f078684998b83967d507d0f453f454} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} verbose = \mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}}}

