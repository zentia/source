\chapter{The \texorpdfstring{$<$}{<}tt\texorpdfstring{$>$}{>}rfl\+::Field\texorpdfstring{$<$}{<}/tt\texorpdfstring{$>$}{>}-\/syntax}
\hypertarget{md_external_2reflect-cpp_2docs_2concepts_2field__syntax}{}\label{md_external_2reflect-cpp_2docs_2concepts_2field__syntax}\index{The $<$tt$>$rfl::Field$<$/tt$>$-\/syntax@{The $<$tt$>$rfl::Field$<$/tt$>$-\/syntax}}
\label{md_external_2reflect-cpp_2docs_2concepts_2field__syntax_autotoc_md536}%
\Hypertarget{md_external_2reflect-cpp_2docs_2concepts_2field__syntax_autotoc_md536}%


As we have shown, reflect-\/cpp can automatically retrieve field names from structs.

However, it also possible to annotate the fields using {\ttfamily \doxylink{structrfl_1_1_field}{rfl\+::\+Field}}, like this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct\ }Person\ \{}
\DoxyCodeLine{\ \ \ \ rfl::Field<\textcolor{stringliteral}{"{}firstName"{}},\ std::string>\ first\_name;}
\DoxyCodeLine{\ \ \ \ rfl::Field<\textcolor{stringliteral}{"{}lastName"{}},\ std::string>\ last\_name;}
\DoxyCodeLine{\ \ \ \ rfl::Field<\textcolor{stringliteral}{"{}children"{}},\ std::vector<Person>>\ children;}
\DoxyCodeLine{\};}

\end{DoxyCode}


These annotations are required if you are planning to use a compiler other than MSVC, GCC or clang.

There are a two things you have to keep in mind\+:

1) If you annotate {\itshape some} of the fields using {\ttfamily \doxylink{structrfl_1_1_field}{rfl\+::\+Field}}, then you must annotate {\itshape all} of them. 2) If you are combining structs using {\ttfamily \doxylink{structrfl_1_1_flatten}{rfl\+::\+Flatten}}, then they structs combined like this must either be annotated or not.

You can initilize your struct like this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ bart\ =\ Person\{.first\_name\ =\ \textcolor{stringliteral}{"{}Bart"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .last\_name\ =\ \textcolor{stringliteral}{"{}Simpson"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .children\ =\ std::vector<Person>()\};}

\end{DoxyCode}


Note that all fields must be explicitly set. This is on purpose, because it prevents you from accidentally forgetting fields, which can lead to tricky runtime errors.

You can initialize a field using {\ttfamily \doxylink{namespacerfl_a60245360f93e0751cf1ed0b160e57b94}{rfl\+::default\+\_\+value}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ bart\ =\ Person\{.first\_name\ =\ \textcolor{stringliteral}{"{}Bart"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .last\_name\ =\ \textcolor{stringliteral}{"{}Simpson"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .children\ =\ \mbox{\hyperlink{namespacerfl_a60245360f93e0751cf1ed0b160e57b94}{rfl::default\_value}}\};}

\end{DoxyCode}


You can also initialize fields in the struct declaration itself\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct\ }Person\ \{}
\DoxyCodeLine{\ \ \ \ rfl::Field<\textcolor{stringliteral}{"{}firstName"{}},\ std::string>\ first\_name;}
\DoxyCodeLine{\ \ \ \ rfl::Field<\textcolor{stringliteral}{"{}lastName"{}},\ std::string>\ last\_name\ =\ \textcolor{stringliteral}{"{}Simpson"{}};}
\DoxyCodeLine{\ \ \ \ rfl::Field<\textcolor{stringliteral}{"{}children"{}},\ std::vector<Person>>\ children\ =\ \mbox{\hyperlink{namespacerfl_a60245360f93e0751cf1ed0b160e57b94}{rfl::default\_value}};}
\DoxyCodeLine{\};}

\end{DoxyCode}


Because you now have explicitly set those fields, you do not have to do this every time\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ bart\ =\ Person\{.first\_name\ =\ \textcolor{stringliteral}{"{}Bart"{}}\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ lisa\ =\ Person\{.first\_name\ =\ \textcolor{stringliteral}{"{}Lisa"{}}\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ maggie\ =\ Person\{.first\_name\ =\ \textcolor{stringliteral}{"{}Maggie"{}}\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ homer\ =\ Person\{.first\_name\ =\ \textcolor{stringliteral}{"{}Homer"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .children\ =\ std::vector<Person>(\{bart,\ lisa,\ maggie\})\};}

\end{DoxyCode}


You can write this to a JSON string\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ json\_string\ =\ \mbox{\hyperlink{namespacerfl_1_1json_af39a23539424555b8c970d12a58e547f}{rfl::json::write}}(homer);}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{\{"{}firstName"{}:"{}Homer"{},"{}lastName"{}:"{}Simpson"{},"{}children"{}:[\{"{}firstName"{}:"{}Bart"{},"{}lastName"{}:"{}Simpson"{},"{}children"{}:[]\},\{"{}firstName"{}:"{}Lisa"{},"{}lastName"{}:"{}Simpson"{},"{}children"{}:[]\},\{"{}firstName"{}:"{}Maggie"{},"{}lastName"{}:"{}Simpson"{},"{}children"{}:[]\}]\}}

\end{DoxyCode}


And you can parse it back into a struct\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ homer\ =\ \mbox{\hyperlink{namespacerfl_1_1json_a905573518eca04a9c269d1bb32de7dd1}{rfl::json::read<Person>}}(json\_string).value();}

\end{DoxyCode}
 