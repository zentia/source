\doxysection{external/taskflow/3rd-\/party/ff/mapping\+\_\+utils.hpp 文件参考}
\hypertarget{mapping__utils_8hpp}{}\label{mapping__utils_8hpp}\index{external/taskflow/3rd-\/party/ff/mapping\_utils.hpp@{external/taskflow/3rd-\/party/ff/mapping\_utils.hpp}}


This file contains utilities for plaform inspection and thread pinning  


{\ttfamily \#include $<$climits$>$}\newline
{\ttfamily \#include $<$set$>$}\newline
{\ttfamily \#include $<$algorithm$>$}\newline
{\ttfamily \#include $<$iosfwd$>$}\newline
{\ttfamily \#include $<$errno.\+h$>$}\newline
{\ttfamily \#include $<$ff/config.\+hpp$>$}\newline
{\ttfamily \#include $<$ff/utils.\+hpp$>$}\newline
{\ttfamily \#include $<$stddef.\+h$>$}\newline
mapping\+\_\+utils.\+hpp 的引用(Include)关系图\+:
% FIG 0
此图展示该文件被哪些文件直接或间接地引用了\+:
% FIG 1
\doxysubsubsection*{函数}
\begin{DoxyCompactItemize}
\item 
static size\+\_\+t \mbox{\hyperlink{mapping__utils_8hpp_a9ad3de6d54a3007e35640df5381ef52b}{ff\+\_\+get\+Thread\+ID}} ()
\begin{DoxyCompactList}\small\item\em Returns the ID of the calling thread \end{DoxyCompactList}\item 
static unsigned long \mbox{\hyperlink{mapping__utils_8hpp_ad62ea0ed16dfa3ca9241fabcede65b61}{ff\+\_\+get\+Cpu\+Freq}} ()
\begin{DoxyCompactList}\small\item\em Returnes the frequency of the CPU \end{DoxyCompactList}\item 
static \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\+\_\+t}} \mbox{\hyperlink{mapping__utils_8hpp_a92c07f85b45e7d7730ddd6b45d2f3d75}{ff\+\_\+num\+Cores}} ()
\begin{DoxyCompactList}\small\item\em Returns the number of cores in the system \end{DoxyCompactList}\item 
static \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\+\_\+t}} \mbox{\hyperlink{mapping__utils_8hpp_a48b4561032da858d15d02cb7179b0b53}{ff\+\_\+real\+Num\+Cores}} ()
\begin{DoxyCompactList}\small\item\em Returns the real number of cores in the system without considering HT or SMT \end{DoxyCompactList}\item 
static \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\+\_\+t}} \mbox{\hyperlink{mapping__utils_8hpp_a21963081ae577016cbc22119795ec588}{ff\+\_\+num\+Sockets}} ()
\begin{DoxyCompactList}\small\item\em Returns the number of CPUs (physical sockets) on the system. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\+\_\+t}} \mbox{\hyperlink{mapping__utils_8hpp_af6c2611909d539e99b2a6c3e54d7c806}{ff\+\_\+set\+Priority}} (\mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\+\_\+t}} priority\+\_\+level=0)
\begin{DoxyCompactList}\small\item\em Sets the scheduling priority \end{DoxyCompactList}\item 
static \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\+\_\+t}} \mbox{\hyperlink{mapping__utils_8hpp_af980d56e02e55d063feeb81d8b74462a}{ff\+\_\+get\+My\+Core}} ()
\begin{DoxyCompactList}\small\item\em Returns the ID of the core \end{DoxyCompactList}\item 
static \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\+\_\+t}} \mbox{\hyperlink{mapping__utils_8hpp_a957b2602ac60110f970df8a6c5ceaa24}{ff\+\_\+get\+My\+Cpu}} ()
\item 
static \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\+\_\+t}} \mbox{\hyperlink{mapping__utils_8hpp_a55cc056711b4071b978f875d18914b44}{ff\+\_\+map\+Thread\+To\+Cpu}} (\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} cpu\+\_\+id, \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} priority\+\_\+level=0)
\begin{DoxyCompactList}\small\item\em Maps the calling thread to the given CPU. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
This file contains utilities for plaform inspection and thread pinning 

Platform dependent code. Not really possible currently port it to plain C++11 

\doxysubsection{函数说明}
\Hypertarget{mapping__utils_8hpp_ad62ea0ed16dfa3ca9241fabcede65b61}\index{mapping\_utils.hpp@{mapping\_utils.hpp}!ff\_getCpuFreq@{ff\_getCpuFreq}}
\index{ff\_getCpuFreq@{ff\_getCpuFreq}!mapping\_utils.hpp@{mapping\_utils.hpp}}
\doxysubsubsection{\texorpdfstring{ff\_getCpuFreq()}{ff\_getCpuFreq()}}
{\footnotesize\ttfamily \label{mapping__utils_8hpp_ad62ea0ed16dfa3ca9241fabcede65b61} 
static unsigned long ff\+\_\+get\+Cpu\+Freq (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Returnes the frequency of the CPU 

It returns the frequency of the CPUs (On a shared memory system, all cores have the same frequency). It works on Linux OS and Apple OS.

\begin{DoxyReturn}{返回}
An integer value showing the frequency of the core. 
\end{DoxyReturn}
函数调用图\+:
% FIG 2
\Hypertarget{mapping__utils_8hpp_af980d56e02e55d063feeb81d8b74462a}\index{mapping\_utils.hpp@{mapping\_utils.hpp}!ff\_getMyCore@{ff\_getMyCore}}
\index{ff\_getMyCore@{ff\_getMyCore}!mapping\_utils.hpp@{mapping\_utils.hpp}}
\doxysubsubsection{\texorpdfstring{ff\_getMyCore()}{ff\_getMyCore()}}
{\footnotesize\ttfamily \label{mapping__utils_8hpp_af980d56e02e55d063feeb81d8b74462a} 
static \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\+\_\+t}} ff\+\_\+get\+My\+Core (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Returns the ID of the core 

It returns the ID of the core where the calling thread is running. It works on Linux OS and Apple OS.

\begin{DoxyReturn}{返回}
An integer value showing the ID of the core. If the ID of the core is not found, then -\/1 is returned. 
\end{DoxyReturn}
\Hypertarget{mapping__utils_8hpp_a957b2602ac60110f970df8a6c5ceaa24}\index{mapping\_utils.hpp@{mapping\_utils.hpp}!ff\_getMyCpu@{ff\_getMyCpu}}
\index{ff\_getMyCpu@{ff\_getMyCpu}!mapping\_utils.hpp@{mapping\_utils.hpp}}
\doxysubsubsection{\texorpdfstring{ff\_getMyCpu()}{ff\_getMyCpu()}}
{\footnotesize\ttfamily \label{mapping__utils_8hpp_a957b2602ac60110f970df8a6c5ceaa24} 
static \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\+\_\+t}} ff\+\_\+get\+My\+Cpu (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

函数调用图\+:
% FIG 3
\Hypertarget{mapping__utils_8hpp_a9ad3de6d54a3007e35640df5381ef52b}\index{mapping\_utils.hpp@{mapping\_utils.hpp}!ff\_getThreadID@{ff\_getThreadID}}
\index{ff\_getThreadID@{ff\_getThreadID}!mapping\_utils.hpp@{mapping\_utils.hpp}}
\doxysubsubsection{\texorpdfstring{ff\_getThreadID()}{ff\_getThreadID()}}
{\footnotesize\ttfamily \label{mapping__utils_8hpp_a9ad3de6d54a3007e35640df5381ef52b} 
static size\+\_\+t ff\+\_\+get\+Thread\+ID (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Returns the ID of the calling thread 

It returns the ID of the calling thread. It works on Linux OS, Apple OS, Windows.

\begin{DoxyReturn}{返回}
if successful the identifier of the thread is returned. Otherwise a negative vlue is returned. 
\end{DoxyReturn}
\Hypertarget{mapping__utils_8hpp_a55cc056711b4071b978f875d18914b44}\index{mapping\_utils.hpp@{mapping\_utils.hpp}!ff\_mapThreadToCpu@{ff\_mapThreadToCpu}}
\index{ff\_mapThreadToCpu@{ff\_mapThreadToCpu}!mapping\_utils.hpp@{mapping\_utils.hpp}}
\doxysubsubsection{\texorpdfstring{ff\_mapThreadToCpu()}{ff\_mapThreadToCpu()}}
{\footnotesize\ttfamily \label{mapping__utils_8hpp_a55cc056711b4071b978f875d18914b44} 
static \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\+\_\+t}} ff\+\_\+map\+Thread\+To\+Cpu (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{cpu\+\_\+id}{, }\item[{\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{priority\+\_\+level}{ = {\ttfamily 0}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Maps the calling thread to the given CPU. 

It maps the calling thread to the given core. It works on Linux OS, Apple OS, Windows.


\begin{DoxyParams}{参数}
{\em cpu\+\_\+id} & the ID of the CPU to which the thread will be attached. \\
\hline
{\em priority\+\_\+level} & TODO\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
An integet value showing the priority level is returned if successful. Otherwise {\ttfamily EINVAL} is returned. 
\end{DoxyReturn}
函数调用图\+:
% FIG 4
\Hypertarget{mapping__utils_8hpp_a92c07f85b45e7d7730ddd6b45d2f3d75}\index{mapping\_utils.hpp@{mapping\_utils.hpp}!ff\_numCores@{ff\_numCores}}
\index{ff\_numCores@{ff\_numCores}!mapping\_utils.hpp@{mapping\_utils.hpp}}
\doxysubsubsection{\texorpdfstring{ff\_numCores()}{ff\_numCores()}}
{\footnotesize\ttfamily \label{mapping__utils_8hpp_a92c07f85b45e7d7730ddd6b45d2f3d75} 
static \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\+\_\+t}} ff\+\_\+num\+Cores (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Returns the number of cores in the system 

It returns the number of cores present in the system. (Note that it does take into account hyperthreading). It works on Linux OS, Apple OS and Windows.

\begin{DoxyReturn}{返回}
An integer value showing the number of cores. 
\end{DoxyReturn}
函数调用图\+:
% FIG 5
\Hypertarget{mapping__utils_8hpp_a21963081ae577016cbc22119795ec588}\index{mapping\_utils.hpp@{mapping\_utils.hpp}!ff\_numSockets@{ff\_numSockets}}
\index{ff\_numSockets@{ff\_numSockets}!mapping\_utils.hpp@{mapping\_utils.hpp}}
\doxysubsubsection{\texorpdfstring{ff\_numSockets()}{ff\_numSockets()}}
{\footnotesize\ttfamily \label{mapping__utils_8hpp_a21963081ae577016cbc22119795ec588} 
static \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\+\_\+t}} ff\+\_\+num\+Sockets (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Returns the number of CPUs (physical sockets) on the system. 

It returns the number physical sockets on the system. It works on Linux OS.

\begin{DoxyReturn}{返回}
An integer value showing the number of sockets. 
\end{DoxyReturn}
函数调用图\+:
% FIG 6
\Hypertarget{mapping__utils_8hpp_a48b4561032da858d15d02cb7179b0b53}\index{mapping\_utils.hpp@{mapping\_utils.hpp}!ff\_realNumCores@{ff\_realNumCores}}
\index{ff\_realNumCores@{ff\_realNumCores}!mapping\_utils.hpp@{mapping\_utils.hpp}}
\doxysubsubsection{\texorpdfstring{ff\_realNumCores()}{ff\_realNumCores()}}
{\footnotesize\ttfamily \label{mapping__utils_8hpp_a48b4561032da858d15d02cb7179b0b53} 
static \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\+\_\+t}} ff\+\_\+real\+Num\+Cores (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Returns the real number of cores in the system without considering HT or SMT 

It returns the number of cores present in the system. It works on Linux OS

\begin{DoxyReturn}{返回}
An integer value showing the number of cores. 
\end{DoxyReturn}
函数调用图\+:
% FIG 7
\Hypertarget{mapping__utils_8hpp_af6c2611909d539e99b2a6c3e54d7c806}\index{mapping\_utils.hpp@{mapping\_utils.hpp}!ff\_setPriority@{ff\_setPriority}}
\index{ff\_setPriority@{ff\_setPriority}!mapping\_utils.hpp@{mapping\_utils.hpp}}
\doxysubsubsection{\texorpdfstring{ff\_setPriority()}{ff\_setPriority()}}
{\footnotesize\ttfamily \label{mapping__utils_8hpp_af6c2611909d539e99b2a6c3e54d7c806} 
static \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\+\_\+t}} ff\+\_\+set\+Priority (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\+\_\+t}}}]{priority\+\_\+level}{ = {\ttfamily 0}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Sets the scheduling priority 

It sets the scheduling priority of the process (or thread). The priority\+\_\+level is a value in the range -\/20 to 19. The default priority is 0, lower priorities cause more favorable scheduling.

MA\+: This should be redesigned since it might have different behaviours in different systems.

\textbackslash{}parm priority\+\_\+level defines the level of the priority. Default is set to 0.

\begin{DoxyReturn}{返回}
An integer value showing the priority of the scheduling policy. 
\end{DoxyReturn}
