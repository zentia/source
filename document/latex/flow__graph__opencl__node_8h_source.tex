\doxysection{flow\+\_\+graph\+\_\+opencl\+\_\+node.\+h}
\hypertarget{flow__graph__opencl__node_8h_source}{}\label{flow__graph__opencl__node_8h_source}\index{external/taskflow/3rd-\/party/tbb/include/tbb/flow\_graph\_opencl\_node.h@{external/taskflow/3rd-\/party/tbb/include/tbb/flow\_graph\_opencl\_node.h}}
\mbox{\hyperlink{flow__graph__opencl__node_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{__deprecated__header__message__guard_8h}{internal/\_deprecated\_header\_message\_guard.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#if\ !defined(\_\_TBB\_show\_deprecation\_message\_flow\_graph\_opencl\_node\_H)\ \&\&\ defined(\_\_TBB\_show\_deprecated\_header\_message)}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#define\ \ \_\_TBB\_show\_deprecation\_message\_flow\_graph\_opencl\_node\_H}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#pragma\ message("{}TBB\ Warning:\ tbb/flow\_graph\_opencl\_node.h\ is\ deprecated.\ For\ details,\ please\ see\ Deprecated\ Features\ appendix\ in\ the\ TBB\ reference\ manual."{})}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#if\ defined(\_\_TBB\_show\_deprecated\_header\_message)}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#undef\ \_\_TBB\_show\_deprecated\_header\_message}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#ifndef\ \_\_TBB\_flow\_graph\_opencl\_node\_H}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#define\ \_\_TBB\_flow\_graph\_opencl\_node\_H}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#define\ \_\_TBB\_flow\_graph\_opencl\_node\_H\_include\_area}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{__warning__suppress__enable__notice_8h}{internal/\_warning\_suppress\_enable\_notice.h}}"{}}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{tbb__config_8h}{tbb/tbb\_config.h}}"{}}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#if\ \_\_TBB\_PREVIEW\_OPENCL\_NODE}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{flow__graph_8h}{flow\_graph.h}}"{}}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#include\ <fstream>}}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\#include\ <map>}}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\#include\ <mutex>}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\#ifdef\ \_\_APPLE\_\_}}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#include\ <OpenCL/opencl.h>}}
\DoxyCodeLine{00049\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\#include\ <CL/cl.h>}}
\DoxyCodeLine{00051\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\ \{}
\DoxyCodeLine{00054\ \textcolor{keyword}{namespace\ }flow\ \{}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \textcolor{keyword}{namespace\ }interface11\ \{}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ DeviceFilter>}
\DoxyCodeLine{00059\ \textcolor{keyword}{class\ }opencl\_factory;}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \textcolor{keyword}{namespace\ }opencl\_info\ \{}
\DoxyCodeLine{00062\ \textcolor{keyword}{class\ }default\_opencl\_factory;}
\DoxyCodeLine{00063\ \}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{00066\ \textcolor{keyword}{class\ }opencl\_program;}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ enforce\_cl\_retcode(cl\_int\ err,\ std::string\ msg)\ \{}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordflow}{if}\ (err\ !=\ CL\_SUCCESS)\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ std::cerr\ <<\ msg\ <<\ \textcolor{stringliteral}{"{};\ error\ code:\ "{}}\ <<\ err\ <<\ std::endl;}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ msg;}
\DoxyCodeLine{00072\ \ \ \ \ \}}
\DoxyCodeLine{00073\ \}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00076\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ event\_info(cl\_event\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}},\ cl\_event\_info\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00077\ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}};}
\DoxyCodeLine{00078\ \ \ \ \ enforce\_cl\_retcode(clGetEventInfo(\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}},\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}),\ \&\mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}),\ \textcolor{stringliteral}{"{}Failed\ to\ get\ OpenCL\ event\ information"{}});}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}};}
\DoxyCodeLine{00080\ \}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00083\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ device\_info(cl\_device\_id\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}},\ cl\_device\_info\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00084\ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}};}
\DoxyCodeLine{00085\ \ \ \ \ enforce\_cl\_retcode(clGetDeviceInfo(\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}},\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}),\ \&\mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}),\ \textcolor{stringliteral}{"{}Failed\ to\ get\ OpenCL\ device\ information"{}});}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}};}
\DoxyCodeLine{00087\ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00090\ \textcolor{keyword}{inline}\ std::string\ device\_info<std::string>(cl\_device\_id\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}},\ cl\_device\_info\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}};}
\DoxyCodeLine{00092\ \ \ \ \ enforce\_cl\_retcode(clGetDeviceInfo(\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}},\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ 0,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \&\mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}}),\ \textcolor{stringliteral}{"{}Failed\ to\ get\ OpenCL\ device\ information"{}});}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordtype}{char}\ *buff\ =\ (\textcolor{keywordtype}{char}*)alloca(\mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}});}
\DoxyCodeLine{00095\ \ \ \ \ enforce\_cl\_retcode(clGetDeviceInfo(\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}},\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}},\ buff,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}),\ \textcolor{stringliteral}{"{}Failed\ to\ get\ OpenCL\ device\ information"{}});}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keywordflow}{return}\ buff;}
\DoxyCodeLine{00098\ \}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00101\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ platform\_info(cl\_platform\_id\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ cl\_platform\_info\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00102\ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}};}
\DoxyCodeLine{00103\ \ \ \ \ enforce\_cl\_retcode(clGetPlatformInfo(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}),\ \&\mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}),\ \textcolor{stringliteral}{"{}Failed\ to\ get\ OpenCL\ platform\ information"{}});}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}};}
\DoxyCodeLine{00105\ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00108\ \textcolor{keyword}{inline}\ std::string\ platform\_info<std::string>(cl\_platform\_id\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ cl\_platform\_info\ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}};}
\DoxyCodeLine{00110\ \ \ \ \ enforce\_cl\_retcode(clGetPlatformInfo(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ 0,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \&\mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}}),\ \textcolor{stringliteral}{"{}Failed\ to\ get\ OpenCL\ platform\ information"{}});}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keywordtype}{char}\ *buff\ =\ (\textcolor{keywordtype}{char}*)alloca(\mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}});}
\DoxyCodeLine{00113\ \ \ \ \ enforce\_cl\_retcode(clGetPlatformInfo(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}},\ buff,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}),\ \textcolor{stringliteral}{"{}Failed\ to\ get\ OpenCL\ platform\ information"{}});}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keywordflow}{return}\ buff;}
\DoxyCodeLine{00116\ \}}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \textcolor{keyword}{class\ }\mbox{\hyperlink{flow__graph_8h_a32d0d5beeb9b0911d032c1d3db7a72eb}{\_\_TBB\_DEPRECATED\_IN\_VERBOSE\_MODE}}\ opencl\_device\ \{}
\DoxyCodeLine{00120\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{size\_t}\ device\_id\_type;}
\DoxyCodeLine{00122\ \ \ \ \ enum\ :\ device\_id\_type\ \{}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ unknown\ =\ device\_id\_type(\ -\/2\ ),}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ host\ =\ device\_id\_type(\ -\/1\ )}
\DoxyCodeLine{00125\ \ \ \ \ \};}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \ \ opencl\_device()\ :\ my\_device\_id(\ unknown\ ),\ my\_cl\_device\_id(\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ ),\ my\_cl\_command\_queue(\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ )\ \{\}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ opencl\_device(\ cl\_device\_id\ d\_id\ )\ :\ my\_device\_id(\ unknown\ ),\ my\_cl\_device\_id(\ d\_id\ ),\ my\_cl\_command\_queue(\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ )\ \{\}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \ \ opencl\_device(\ cl\_device\_id\ cl\_d\_id,\ device\_id\_type\ device\_id\ )\ :\ my\_device\_id(\ device\_id\ ),\ my\_cl\_device\_id(\ cl\_d\_id\ ),\ my\_cl\_command\_queue(\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ )\ \{\}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \ \ std::string\ platform\_profile()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ platform\_info<std::string>(\ platform\_id(),\ CL\_PLATFORM\_PROFILE\ );}
\DoxyCodeLine{00135\ \ \ \ \ \}}
\DoxyCodeLine{00136\ \ \ \ \ std::string\ platform\_version()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ platform\_info<std::string>(\ platform\_id(),\ CL\_PLATFORM\_VERSION\ );}
\DoxyCodeLine{00138\ \ \ \ \ \}}
\DoxyCodeLine{00139\ \ \ \ \ std::string\ platform\_name()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ platform\_info<std::string>(\ platform\_id(),\ CL\_PLATFORM\_NAME\ );}
\DoxyCodeLine{00141\ \ \ \ \ \}}
\DoxyCodeLine{00142\ \ \ \ \ std::string\ platform\_vendor()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ platform\_info<std::string>(\ platform\_id(),\ CL\_PLATFORM\_VENDOR\ );}
\DoxyCodeLine{00144\ \ \ \ \ \}}
\DoxyCodeLine{00145\ \ \ \ \ std::string\ platform\_extensions()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ platform\_info<std::string>(\ platform\_id(),\ CL\_PLATFORM\_EXTENSIONS\ );}
\DoxyCodeLine{00147\ \ \ \ \ \}}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{eigen-3_83_87_2lapack_2cholesky_8cpp_a19e186475eb822b276da4b357d68140d}{info}}(\ cl\_device\_info\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ device\_info<T>(\ my\_cl\_device\_id,\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ );}
\DoxyCodeLine{00152\ \ \ \ \ \}}
\DoxyCodeLine{00153\ \ \ \ \ std::string\ version()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ version\ string\ format:\ OpenCL<space><major\_version.minor\_version><space><vendor-\/specific\ information>}}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ device\_info<std::string>(\ my\_cl\_device\_id,\ CL\_DEVICE\_VERSION\ );}
\DoxyCodeLine{00156\ \ \ \ \ \}}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keywordtype}{int}\ major\_version()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ major;}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ std::sscanf(\ version().c\_str(),\ \textcolor{stringliteral}{"{}OpenCL\ \%d"{}},\ \&major\ );}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ major;}
\DoxyCodeLine{00161\ \ \ \ \ \}}
\DoxyCodeLine{00162\ \ \ \ \ \textcolor{keywordtype}{int}\ minor\_version()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ major,\ minor;}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ std::sscanf(\ version().c\_str(),\ \textcolor{stringliteral}{"{}OpenCL\ \%d.\%d"{}},\ \&major,\ \&minor\ );}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ minor;}
\DoxyCodeLine{00166\ \ \ \ \ \}}
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{keywordtype}{bool}\ out\_of\_order\_exec\_mode\_on\_host\_present()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00168\ \textcolor{preprocessor}{\#if\ CL\_VERSION\_2\_0}}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ major\_version()\ >=\ 2\ )}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (device\_info<cl\_command\_queue\_properties>(\ my\_cl\_device\_id,\ CL\_DEVICE\_QUEUE\_ON\_HOST\_PROPERTIES\ )\ \&\ CL\_QUEUE\_OUT\_OF\_ORDER\_EXEC\_MODE\_ENABLE)\ !=\ 0;}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00172\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ CL\_VERSION\_2\_0\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (device\_info<cl\_command\_queue\_properties>(\ my\_cl\_device\_id,\ CL\_DEVICE\_QUEUE\_PROPERTIES\ )\ \&\ CL\_QUEUE\_OUT\_OF\_ORDER\_EXEC\_MODE\_ENABLE)\ !=\ 0;}
\DoxyCodeLine{00174\ \ \ \ \ \}}
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{keywordtype}{bool}\ out\_of\_order\_exec\_mode\_on\_device\_present()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00176\ \textcolor{preprocessor}{\#if\ CL\_VERSION\_2\_0}}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ major\_version()\ >=\ 2\ )}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (device\_info<cl\_command\_queue\_properties>(\ my\_cl\_device\_id,\ CL\_DEVICE\_QUEUE\_ON\_DEVICE\_PROPERTIES\ )\ \&\ CL\_QUEUE\_OUT\_OF\_ORDER\_EXEC\_MODE\_ENABLE)\ !=\ 0;}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00180\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ CL\_VERSION\_2\_0\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00182\ \ \ \ \ \}}
\DoxyCodeLine{00183\ \ \ \ \ std::array<size\_t,\ 3>\ max\_work\_item\_sizes()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ device\_info<std::array<size\_t,\ 3>>(\ my\_cl\_device\_id,\ CL\_DEVICE\_MAX\_WORK\_ITEM\_SIZES\ );}
\DoxyCodeLine{00185\ \ \ \ \ \}}
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ max\_work\_group\_size()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ device\_info<size\_t>(\ my\_cl\_device\_id,\ CL\_DEVICE\_MAX\_WORK\_GROUP\_SIZE\ );}
\DoxyCodeLine{00188\ \ \ \ \ \}}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keywordtype}{bool}\ built\_in\_kernel\_available(\ \textcolor{keyword}{const}\ std::string\&\ k\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\ semi\ =\ \textcolor{stringliteral}{"{};"{}};}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Added\ semicolumns\ to\ force\ an\ exact\ match\ (to\ avoid\ a\ partial\ match,\ e.g.\ "{}add"{}\ is\ partly\ matched\ with\ "{}madd"{}).}}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (semi\ +\ built\_in\_kernels()\ +\ semi).find(\ semi\ +\ k\ +\ semi\ )\ !=\ std::string::npos;}
\DoxyCodeLine{00193\ \ \ \ \ \}}
\DoxyCodeLine{00194\ \ \ \ \ std::string\ built\_in\_kernels()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ device\_info<std::string>(\ my\_cl\_device\_id,\ CL\_DEVICE\_BUILT\_IN\_KERNELS\ );}
\DoxyCodeLine{00196\ \ \ \ \ \}}
\DoxyCodeLine{00197\ \ \ \ \ std::string\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ device\_info<std::string>(\ my\_cl\_device\_id,\ CL\_DEVICE\_NAME\ );}
\DoxyCodeLine{00199\ \ \ \ \ \}}
\DoxyCodeLine{00200\ \ \ \ \ cl\_bool\ available()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ device\_info<cl\_bool>(\ my\_cl\_device\_id,\ CL\_DEVICE\_AVAILABLE\ );}
\DoxyCodeLine{00202\ \ \ \ \ \}}
\DoxyCodeLine{00203\ \ \ \ \ cl\_bool\ compiler\_available()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ device\_info<cl\_bool>(\ my\_cl\_device\_id,\ CL\_DEVICE\_COMPILER\_AVAILABLE\ );}
\DoxyCodeLine{00205\ \ \ \ \ \}}
\DoxyCodeLine{00206\ \ \ \ \ cl\_bool\ linker\_available()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ device\_info<cl\_bool>(\ my\_cl\_device\_id,\ CL\_DEVICE\_LINKER\_AVAILABLE\ );}
\DoxyCodeLine{00208\ \ \ \ \ \}}
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordtype}{bool}\ extension\_available(\ \textcolor{keyword}{const}\ std::string\ \&ext\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h_a8c33592060c5e5568b3fa116c71610baaff2364a0be3d20e46cc69efb36afe9a5}{space}}\ =\ \textcolor{stringliteral}{"{}\ "{}};}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Added\ space\ to\ force\ an\ exact\ match\ (to\ avoid\ a\ partial\ match,\ e.g.\ "{}ext"{}\ is\ partly\ matched\ with\ "{}ext2"{}).}}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h_a8c33592060c5e5568b3fa116c71610baaff2364a0be3d20e46cc69efb36afe9a5}{space}}\ +\ extensions()\ +\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h_a8c33592060c5e5568b3fa116c71610baaff2364a0be3d20e46cc69efb36afe9a5}{space}}).find(\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h_a8c33592060c5e5568b3fa116c71610baaff2364a0be3d20e46cc69efb36afe9a5}{space}}\ +\ ext\ +\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h_a8c33592060c5e5568b3fa116c71610baaff2364a0be3d20e46cc69efb36afe9a5}{space}}\ )\ !=\ std::string::npos;}
\DoxyCodeLine{00213\ \ \ \ \ \}}
\DoxyCodeLine{00214\ \ \ \ \ std::string\ extensions()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ device\_info<std::string>(\ my\_cl\_device\_id,\ CL\_DEVICE\_EXTENSIONS\ );}
\DoxyCodeLine{00216\ \ \ \ \ \}}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \ \ cl\_device\_type\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{type}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ device\_info<cl\_device\_type>(\ my\_cl\_device\_id,\ CL\_DEVICE\_TYPE\ );}
\DoxyCodeLine{00220\ \ \ \ \ \}}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \ \ \ \ std::string\ vendor()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ device\_info<std::string>(\ my\_cl\_device\_id,\ CL\_DEVICE\_VENDOR\ );}
\DoxyCodeLine{00224\ \ \ \ \ \}}
\DoxyCodeLine{00225\ }
\DoxyCodeLine{00226\ \ \ \ \ cl\_uint\ address\_bits()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ device\_info<cl\_uint>(\ my\_cl\_device\_id,\ CL\_DEVICE\_ADDRESS\_BITS\ );}
\DoxyCodeLine{00228\ \ \ \ \ \}}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \ \ \ \ cl\_device\_id\ device\_id()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ my\_cl\_device\_id;}
\DoxyCodeLine{00232\ \ \ \ \ \}}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \ \ \ \ cl\_command\_queue\ command\_queue()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ my\_cl\_command\_queue;}
\DoxyCodeLine{00236\ \ \ \ \ \}}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keywordtype}{void}\ set\_command\_queue(\ cl\_command\_queue\ cmd\_queue\ )\ \{}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ my\_cl\_command\_queue\ =\ cmd\_queue;}
\DoxyCodeLine{00240\ \ \ \ \ \}}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \ \ cl\_platform\_id\ platform\_id()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ device\_info<cl\_platform\_id>(\ my\_cl\_device\_id,\ CL\_DEVICE\_PLATFORM\ );}
\DoxyCodeLine{00244\ \ \ \ \ \}}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \ \ \ \ device\_id\_type\ my\_device\_id;}
\DoxyCodeLine{00249\ \ \ \ \ cl\_device\_id\ my\_cl\_device\_id;}
\DoxyCodeLine{00250\ \ \ \ \ cl\_command\_queue\ my\_cl\_command\_queue;}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{safe__ptr_8h_aa70685c379499032704de691f795148b}{operator==}}(opencl\_device\ \mbox{\hyperlink{modp__b64__data_8h_a248a83e479c6e2c404b65827fb26bbe2}{d1}},\ opencl\_device\ \mbox{\hyperlink{modp__b64__data_8h_ad7909fb96b596498e393856993bc8ab8}{d2}})\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{modp__b64__data_8h_a248a83e479c6e2c404b65827fb26bbe2}{d1}}.my\_cl\_device\_id\ ==\ \mbox{\hyperlink{modp__b64__data_8h_ad7909fb96b596498e393856993bc8ab8}{d2}}.my\_cl\_device\_id;\ \}}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ DeviceFilter>}
\DoxyCodeLine{00255\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }opencl\_factory;}
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{00257\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }opencl\_memory;}
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }opencl\_program;}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ \textcolor{preprocessor}{\#if\ TBB\_USE\_ASSERT}}
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }opencl\_buffer;}
\DoxyCodeLine{00264\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00265\ \};}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \textcolor{keyword}{class\ }\mbox{\hyperlink{flow__graph_8h_a32d0d5beeb9b0911d032c1d3db7a72eb}{\_\_TBB\_DEPRECATED\_IN\_VERBOSE\_MODE}}\ opencl\_device\_list\ \{}
\DoxyCodeLine{00268\ \ \ \ \ \textcolor{keyword}{typedef}\ std::vector<opencl\_device>\ container\_type;}
\DoxyCodeLine{00269\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{keyword}{typedef}\ container\_type::iterator\ iterator;}
\DoxyCodeLine{00271\ \ \ \ \ \textcolor{keyword}{typedef}\ container\_type::const\_iterator\ const\_iterator;}
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{keyword}{typedef}\ container\_type::size\_type\ size\_type;}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \ \ \ \ opencl\_device\_list()\ \{\}}
\DoxyCodeLine{00275\ \ \ \ \ opencl\_device\_list(\ \mbox{\hyperlink{classstd_1_1initializer__list}{std::initializer\_list<opencl\_device>}}\ il\ )\ :\ my\_container(\ il\ )\ \{\}}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{benchmarks_2hetero__traversal_2graph_8hpp_a9836634ebb2ae079fb18b97205218838}{add}}(\ opencl\_device\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ )\ \{\ my\_container.push\_back(\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ );\ \}}
\DoxyCodeLine{00278\ \ \ \ \ size\_type\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ my\_container.size();\ \}}
\DoxyCodeLine{00279\ \ \ \ \ \textcolor{keywordtype}{bool}\ empty()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ my\_container.empty();\ \}}
\DoxyCodeLine{00280\ \ \ \ \ iterator\ \mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}}()\ \{\ \textcolor{keywordflow}{return}\ my\_container.begin();\ \}}
\DoxyCodeLine{00281\ \ \ \ \ iterator\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}}()\ \{\ \textcolor{keywordflow}{return}\ my\_container.end();\ \}}
\DoxyCodeLine{00282\ \ \ \ \ const\_iterator\ \mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ my\_container.begin();\ \}}
\DoxyCodeLine{00283\ \ \ \ \ const\_iterator\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ my\_container.end();\ \}}
\DoxyCodeLine{00284\ \ \ \ \ const\_iterator\ cbegin()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ my\_container.cbegin();\ \}}
\DoxyCodeLine{00285\ \ \ \ \ const\_iterator\ cend()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ my\_container.cend();\ \}}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00288\ \ \ \ \ container\_type\ my\_container;}
\DoxyCodeLine{00289\ \};}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00291\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinternal}{internal}}\ \{}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00293\ \textcolor{comment}{//\ Retrieve\ all\ OpenCL\ devices\ from\ machine}}
\DoxyCodeLine{00294\ \textcolor{keyword}{inline}\ opencl\_device\_list\ find\_available\_devices()\ \{}
\DoxyCodeLine{00295\ \ \ \ \ opencl\_device\_list\ opencl\_devices;}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \ \ cl\_uint\ num\_platforms;}
\DoxyCodeLine{00298\ \ \ \ \ enforce\_cl\_retcode(clGetPlatformIDs(0,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \&num\_platforms),\ \textcolor{stringliteral}{"{}clGetPlatformIDs\ failed"{}});}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ std::vector<cl\_platform\_id>\ platforms(num\_platforms);}
\DoxyCodeLine{00301\ \ \ \ \ enforce\_cl\_retcode(clGetPlatformIDs(num\_platforms,\ platforms.data(),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}),\ \textcolor{stringliteral}{"{}clGetPlatformIDs\ failed"{}});}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00303\ \ \ \ \ cl\_uint\ num\_devices;}
\DoxyCodeLine{00304\ \ \ \ \ std::vector<cl\_platform\_id>::iterator\ platforms\_it\ =\ platforms.begin();}
\DoxyCodeLine{00305\ \ \ \ \ cl\_uint\ num\_all\_devices\ =\ 0;}
\DoxyCodeLine{00306\ \ \ \ \ \textcolor{keywordflow}{while}\ (platforms\_it\ !=\ platforms.end())\ \{}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ cl\_int\ err\ =\ clGetDeviceIDs(*platforms\_it,\ CL\_DEVICE\_TYPE\_ALL,\ 0,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \&num\_devices);}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (err\ ==\ CL\_DEVICE\_NOT\_FOUND)\ \{}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ platforms\_it\ =\ platforms.erase(platforms\_it);}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(err,\ \textcolor{stringliteral}{"{}clGetDeviceIDs\ failed"{}});}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \ \ \ \ num\_all\_devices\ +=\ num\_devices;}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ ++platforms\_it;}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00316\ \ \ \ \ \}}
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00318\ \ \ \ \ std::vector<cl\_device\_id>\ devices(num\_all\_devices);}
\DoxyCodeLine{00319\ \ \ \ \ std::vector<cl\_device\_id>::iterator\ devices\_it\ =\ devices.begin();}
\DoxyCodeLine{00320\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ platforms.begin();\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ !=\ platforms.end();\ ++\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})\ \{}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(clGetDeviceIDs((*\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}),\ CL\_DEVICE\_TYPE\_ALL,\ (cl\_uint)std::distance(devices\_it,\ devices.end()),\ \&*devices\_it,\ \&num\_devices),\ \textcolor{stringliteral}{"{}clGetDeviceIDs\ failed"{}});}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ devices\_it\ +=\ num\_devices;}
\DoxyCodeLine{00323\ \ \ \ \ \}}
\DoxyCodeLine{00324\ }
\DoxyCodeLine{00325\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ =\ devices.begin();\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ !=\ devices.end();\ ++\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}})\ \{}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ opencl\_devices.add(opencl\_device((*\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}})));}
\DoxyCodeLine{00327\ \ \ \ \ \}}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \ \ \ \ \textcolor{keywordflow}{return}\ opencl\_devices;}
\DoxyCodeLine{00330\ \}}
\DoxyCodeLine{00331\ }
\DoxyCodeLine{00332\ \}\ \textcolor{comment}{//\ namespace\ internal}}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00334\ \textcolor{comment}{//\ TODO:\ consider\ this\ namespace\ as\ public\ API}}
\DoxyCodeLine{00335\ \textcolor{keyword}{namespace\ }opencl\_info\ \{}
\DoxyCodeLine{00336\ }
\DoxyCodeLine{00337\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ opencl\_device\_list\&\ available\_devices()\ \{}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Static\ storage\ for\ all\ available\ OpenCL\ devices\ on\ machine}}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ opencl\_device\_list\ my\_devices\ =\ internal::find\_available\_devices();}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ my\_devices;}
\DoxyCodeLine{00341\ \ \ \ \ \}}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00343\ \}\ \textcolor{comment}{//\ namespace\ opencl\_info}}
\DoxyCodeLine{00344\ }
\DoxyCodeLine{00345\ }
\DoxyCodeLine{00346\ \textcolor{keyword}{class\ }callback\_base\ :\ tbb::internal::no\_copy\ \{}
\DoxyCodeLine{00347\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00348\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ call()\ =\ 0;}
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{keyword}{virtual}\ \string~callback\_base()\ \{\}}
\DoxyCodeLine{00350\ \};}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Callback,\ \textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00353\ \textcolor{keyword}{class\ }\mbox{\hyperlink{external_2spine-runtimes_2spine-sfml_2c_2example_2main_8cpp_a2f27b7fc84a39cace84d90f62a8d4c8e}{callback}}\ :\ \textcolor{keyword}{public}\ callback\_base\ \{}
\DoxyCodeLine{00354\ \ \ \ \ Callback\ my\_callback;}
\DoxyCodeLine{00355\ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ my\_data;}
\DoxyCodeLine{00356\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00357\ \ \ \ \ \mbox{\hyperlink{external_2spine-runtimes_2spine-sfml_2c_2example_2main_8cpp_a2f27b7fc84a39cace84d90f62a8d4c8e}{callback}}(\ Callback\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ :\ my\_callback(\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}\ ),\ my\_data(\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ \{\}}
\DoxyCodeLine{00358\ }
\DoxyCodeLine{00359\ \ \ \ \ \textcolor{keywordtype}{void}\ call()\ \_\_TBB\_override\ \{}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ my\_callback(\ my\_data\ );}
\DoxyCodeLine{00361\ \ \ \ \ \}}
\DoxyCodeLine{00362\ \};}
\DoxyCodeLine{00363\ }
\DoxyCodeLine{00364\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Factory\ =\ opencl\_info::default\_opencl\_factory>}
\DoxyCodeLine{00365\ \textcolor{keyword}{class\ }\mbox{\hyperlink{flow__graph_8h_a32d0d5beeb9b0911d032c1d3db7a72eb}{\_\_TBB\_DEPRECATED\_IN\_VERBOSE\_MODE}}\ opencl\_async\_msg\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classasync__msg}{async\_msg}}<T>\ \{}
\DoxyCodeLine{00366\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00367\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ value\_type;}
\DoxyCodeLine{00368\ }
\DoxyCodeLine{00369\ \ \ \ \ opencl\_async\_msg()\ :\ my\_callback\_flag\_ptr(\ std::make\_shared<\ tbb::atomic<bool>>()\ )\ \{}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ my\_callback\_flag\_ptr-\/>store<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa73cb2e2bcb94442b8b2b72e93a76f2e5}{tbb::relaxed}}>(\textcolor{keyword}{false});}
\DoxyCodeLine{00371\ \ \ \ \ \}}
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00373\ \ \ \ \ \textcolor{keyword}{explicit}\ opencl\_async\_msg(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}\ )\ :\ my\_data(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}),\ my\_callback\_flag\_ptr(\ std::make\_shared<tbb::atomic<bool>>()\ )\ \{}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ my\_callback\_flag\_ptr-\/>store<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa73cb2e2bcb94442b8b2b72e93a76f2e5}{tbb::relaxed}}>(\textcolor{keyword}{false});}
\DoxyCodeLine{00375\ \ \ \ \ \}}
\DoxyCodeLine{00376\ }
\DoxyCodeLine{00377\ \ \ \ \ opencl\_async\_msg(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}},\ cl\_event\ \mbox{\hyperlink{classevent}{event}}\ )\ :\ my\_data(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}),\ my\_event(\mbox{\hyperlink{classevent}{event}}),\ my\_is\_event(\textcolor{keyword}{true}),\ my\_callback\_flag\_ptr(\ std::make\_shared<tbb::atomic<bool>>()\ )\ \{}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ my\_callback\_flag\_ptr-\/>store<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa73cb2e2bcb94442b8b2b72e93a76f2e5}{tbb::relaxed}}>(\textcolor{keyword}{false});}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clRetainEvent(\ my\_event\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ retain\ an\ event"{}}\ );}
\DoxyCodeLine{00380\ \ \ \ \ \}}
\DoxyCodeLine{00381\ }
\DoxyCodeLine{00382\ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}(\ \textcolor{keywordtype}{bool}\ wait\ =\ \textcolor{keyword}{true}\ )\ \{}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ my\_is\_event\ \&\&\ wait\ )\ \{}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clWaitForEvents(\ 1,\ \&my\_event\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ wait\ for\ an\ event"{}}\ );}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clReleaseEvent(\ my\_event\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ release\ an\ event"{}}\ );}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \ \ \ \ my\_is\_event\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ my\_data;}
\DoxyCodeLine{00389\ \ \ \ \ \}}
\DoxyCodeLine{00390\ }
\DoxyCodeLine{00391\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}(\ \textcolor{keywordtype}{bool}\ wait\ =\ \textcolor{keyword}{true}\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ my\_is\_event\ \&\&\ wait\ )\ \{}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clWaitForEvents(\ 1,\ \&my\_event\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ wait\ for\ an\ event"{}}\ );}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clReleaseEvent(\ my\_event\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ release\ an\ event"{}}\ );}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ \ \ my\_is\_event\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ my\_data;}
\DoxyCodeLine{00398\ \ \ \ \ \}}
\DoxyCodeLine{00399\ }
\DoxyCodeLine{00400\ \ \ \ \ opencl\_async\_msg(\ \textcolor{keyword}{const}\ opencl\_async\_msg\ \&dmsg\ )\ :\ \mbox{\hyperlink{classasync__msg}{async\_msg<T>}}(dmsg),}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ my\_data(dmsg.my\_data),\ my\_event(dmsg.my\_event),\ my\_is\_event(\ dmsg.my\_is\_event\ ),}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ my\_callback\_flag\_ptr(dmsg.my\_callback\_flag\_ptr)}
\DoxyCodeLine{00403\ \ \ \ \ \{}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ my\_is\_event\ )}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clRetainEvent(\ my\_event\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ retain\ an\ event"{}}\ );}
\DoxyCodeLine{00406\ \ \ \ \ \}}
\DoxyCodeLine{00407\ }
\DoxyCodeLine{00408\ \ \ \ \ opencl\_async\_msg(\ opencl\_async\_msg\ \&\&dmsg\ )\ :\ \mbox{\hyperlink{classasync__msg}{async\_msg<T>}}(std::move(dmsg)),}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ my\_data(std::move(dmsg.my\_data)),\ my\_event(dmsg.my\_event),\ my\_is\_event(dmsg.my\_is\_event),}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ my\_callback\_flag\_ptr(\ std::move(dmsg.my\_callback\_flag\_ptr)\ )}
\DoxyCodeLine{00411\ \ \ \ \ \{}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ dmsg.my\_is\_event\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00413\ \ \ \ \ \}}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00415\ \ \ \ \ opencl\_async\_msg\&\ operator=(\textcolor{keyword}{const}\ opencl\_async\_msg\ \&dmsg)\ \{}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classasync__msg}{async\_msg<T>::operator\ =}}(dmsg);}
\DoxyCodeLine{00417\ }
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Release\ original\ event}}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ my\_is\_event\ )}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clReleaseEvent(\ my\_event\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ retain\ an\ event"{}}\ );}
\DoxyCodeLine{00421\ }
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ my\_data\ =\ dmsg.my\_data;}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ my\_event\ =\ dmsg.my\_event;}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ my\_is\_event\ =\ dmsg.my\_is\_event;}
\DoxyCodeLine{00425\ }
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Retain\ copied\ event}}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ my\_is\_event\ )}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clRetainEvent(\ my\_event\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ retain\ an\ event"{}}\ );}
\DoxyCodeLine{00429\ }
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ my\_callback\_flag\_ptr\ =\ dmsg.my\_callback\_flag\_ptr;}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00432\ \ \ \ \ \}}
\DoxyCodeLine{00433\ }
\DoxyCodeLine{00434\ \ \ \ \ \string~opencl\_async\_msg()\ \{}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ my\_is\_event\ )}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clReleaseEvent(\ my\_event\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ release\ an\ event"{}}\ );}
\DoxyCodeLine{00437\ \ \ \ \ \}}
\DoxyCodeLine{00438\ }
\DoxyCodeLine{00439\ \ \ \ \ cl\_event\ \textcolor{keyword}{const}\ *\ get\_event()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ my\_is\_event\ ?\ \&my\_event\ :\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};\ \}}
\DoxyCodeLine{00440\ \ \ \ \ \textcolor{keywordtype}{void}\ set\_event(\ cl\_event\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ my\_is\_event\ )\ \{}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \ \ \ \ cl\_command\_queue\ cq\ =\ event\_info<cl\_command\_queue>(\ my\_event,\ CL\_EVENT\_COMMAND\_QUEUE\ );}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ cq\ !=\ event\_info<cl\_command\_queue>(\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}},\ CL\_EVENT\_COMMAND\_QUEUE\ )\ )}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clFlush(\ cq\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ flush\ an\ OpenCL\ command\ queue"{}}\ );}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clReleaseEvent(\ my\_event\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ release\ an\ event"{}}\ );}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ my\_is\_event\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ my\_event\ =\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}};}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ clRetainEvent(\ my\_event\ );}
\DoxyCodeLine{00450\ \ \ \ \ \}}
\DoxyCodeLine{00451\ }
\DoxyCodeLine{00452\ \ \ \ \ \textcolor{keywordtype}{void}\ clear\_event()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ my\_is\_event\ )\ \{}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clFlush(\ event\_info<cl\_command\_queue>(\ my\_event,\ CL\_EVENT\_COMMAND\_QUEUE\ )\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ flush\ an\ OpenCL\ command\ queue"{}}\ );}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clReleaseEvent(\ my\_event\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ release\ an\ event"{}}\ );}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ my\_is\_event\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00458\ \ \ \ \ \}}
\DoxyCodeLine{00459\ }
\DoxyCodeLine{00460\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Callback>}
\DoxyCodeLine{00461\ \ \ \ \ \textcolor{keywordtype}{void}\ register\_callback(\ Callback\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ my\_is\_event,\ \textcolor{stringliteral}{"{}The\ OpenCL\ event\ is\ not\ set"{}}\ );}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clSetEventCallback(\ my\_event,\ CL\_COMPLETE,\ register\_callback\_func,\ \textcolor{keyword}{new}\ \mbox{\hyperlink{external_2spine-runtimes_2spine-sfml_2c_2example_2main_8cpp_a2f27b7fc84a39cace84d90f62a8d4c8e}{callback<Callback,\ T>}}(\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}},\ my\_data\ )\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ set\ an\ OpenCL\ callback"{}}\ );}
\DoxyCodeLine{00464\ \ \ \ \ \}}
\DoxyCodeLine{00465\ }
\DoxyCodeLine{00466\ \ \ \ \ \textcolor{keyword}{operator}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}();\ \}}
\DoxyCodeLine{00467\ \ \ \ \ \textcolor{keyword}{operator}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}();\ \}}
\DoxyCodeLine{00468\ }
\DoxyCodeLine{00469\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00470\ \ \ \ \ \textcolor{comment}{//\ Overridden\ in\ this\ derived\ class\ to\ inform\ that}}
\DoxyCodeLine{00471\ \ \ \ \ \textcolor{comment}{//\ async\ calculation\ chain\ is\ over}}
\DoxyCodeLine{00472\ \ \ \ \ \textcolor{keywordtype}{void}\ finalize()\ \textcolor{keyword}{const}\ \_\_TBB\_override\ \{}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ receive\_if\_memory\_object(*\textcolor{keyword}{this});}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\ my\_callback\_flag\_ptr-\/>fetch\_and\_store(\textcolor{keyword}{true}))\ \{}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \ \ \ \ opencl\_async\_msg\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}(*\textcolor{keyword}{this});}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (my\_is\_event)\ \{}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ register\_callback([\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}](\textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \textcolor{keyword}{mutable}\ \{}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}.set(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}});}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}.set(my\_data);}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ clear\_event();}
\DoxyCodeLine{00486\ \ \ \ \ \}}
\DoxyCodeLine{00487\ }
\DoxyCodeLine{00488\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00489\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ CL\_CALLBACK\ register\_callback\_func(\ cl\_event,\ cl\_int\ event\_command\_exec\_status,\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}\ )\ \{}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ tbb::internal::suppress\_unused\_warning(\ event\_command\_exec\_status\ );}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ event\_command\_exec\_status\ ==\ CL\_COMPLETE,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ callback\_base\ *\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}\ =\ \textcolor{keyword}{static\_cast<}callback\_base*\textcolor{keyword}{>}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}});}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}-\/>call();}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}};}
\DoxyCodeLine{00496\ \ \ \ \ \}}
\DoxyCodeLine{00497\ }
\DoxyCodeLine{00498\ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ my\_data;}
\DoxyCodeLine{00499\ \ \ \ \ \textcolor{keyword}{mutable}\ cl\_event\ my\_event;}
\DoxyCodeLine{00500\ \ \ \ \ \textcolor{keyword}{mutable}\ \textcolor{keywordtype}{bool}\ my\_is\_event\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00501\ }
\DoxyCodeLine{00502\ \ \ \ \ std::shared\_ptr<\ tbb::atomic<bool>\ >\ my\_callback\_flag\_ptr;}
\DoxyCodeLine{00503\ \};}
\DoxyCodeLine{00504\ }
\DoxyCodeLine{00505\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K,\ \textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{00506\ K\ \mbox{\hyperlink{test__join__node_8h_a7918af7a3101c93878cc0e7e9c1ffa70}{key\_from\_message}}(\ \textcolor{keyword}{const}\ opencl\_async\_msg<T,\ Factory>\ \&dmsg\ )\ \{}
\DoxyCodeLine{00507\ \ \ \ \ \textcolor{keyword}{using\ }tbb::flow::key\_from\_message;}
\DoxyCodeLine{00508\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ dmsg.data(\ \textcolor{keyword}{false}\ );}
\DoxyCodeLine{00509\ \ \ \ \ \_\_TBB\_STATIC\_ASSERT(\ \textcolor{keyword}{true},\ \textcolor{stringliteral}{"{}"{}}\ );}
\DoxyCodeLine{00510\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{test__join__node_8h_a7918af7a3101c93878cc0e7e9c1ffa70}{key\_from\_message<K,\ T>}}(\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ );}
\DoxyCodeLine{00511\ \}}
\DoxyCodeLine{00512\ }
\DoxyCodeLine{00513\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{00514\ \textcolor{keyword}{class\ }opencl\_memory\ \{}
\DoxyCodeLine{00515\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00516\ \ \ \ \ opencl\_memory()\ \{\}}
\DoxyCodeLine{00517\ \ \ \ \ opencl\_memory(\ Factory\ \&\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )\ :\ my\_host\_ptr(\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ ),\ my\_factory(\ \&\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ ),\ my\_sending\_event\_present(\ \textcolor{keyword}{false}\ )\ \{}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ my\_curr\_device\_id\ =\ my\_factory-\/>devices().begin()-\/>my\_device\_id;}
\DoxyCodeLine{00519\ \ \ \ \ \}}
\DoxyCodeLine{00520\ }
\DoxyCodeLine{00521\ \ \ \ \ \textcolor{keyword}{virtual}\ \string~opencl\_memory()\ \{}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ my\_sending\_event\_present\ )\ enforce\_cl\_retcode(\ clReleaseEvent(\ my\_sending\_event\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ release\ an\ event\ for\ the\ OpenCL\ buffer"{}}\ );}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clReleaseMemObject(\ my\_cl\_mem\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ release\ an\ memory\ object"{}}\ );}
\DoxyCodeLine{00524\ \ \ \ \ \}}
\DoxyCodeLine{00525\ }
\DoxyCodeLine{00526\ \ \ \ \ cl\_mem\ get\_cl\_mem()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ my\_cl\_mem;}
\DoxyCodeLine{00528\ \ \ \ \ \}}
\DoxyCodeLine{00529\ }
\DoxyCodeLine{00530\ \ \ \ \ \textcolor{keywordtype}{void}*\ get\_host\_ptr()\ \{}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !my\_host\_ptr\ )\ \{}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ \ \ \ \ opencl\_async\_msg<void*,\ Factory>\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ =\ receive(\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.data();}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.data()\ ==\ my\_host\_ptr,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ my\_host\_ptr;}
\DoxyCodeLine{00537\ \ \ \ \ \}}
\DoxyCodeLine{00538\ }
\DoxyCodeLine{00539\ \ \ \ \ Factory\ *factory()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ my\_factory;\ \}}
\DoxyCodeLine{00540\ }
\DoxyCodeLine{00541\ \ \ \ \ opencl\_async\_msg<void*,\ Factory>\ receive(\textcolor{keyword}{const}\ cl\_event\ *\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}})\ \{}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ opencl\_async\_msg<void*,\ Factory>\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}};}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}})\ \{}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ =\ opencl\_async\_msg<void*,\ Factory>(my\_host\_ptr,\ *\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}});}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ =\ opencl\_async\_msg<void*,\ Factory>(my\_host\_ptr);}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00548\ }
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Concurrent\ receives\ are\ prohibited\ so\ we\ do\ not\ worry\ about\ synchronization.}}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (my\_curr\_device\_id.load<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa73cb2e2bcb94442b8b2b72e93a76f2e5}{tbb::relaxed}}>()\ !=\ opencl\_device::host)\ \{}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \ \ \ \ \ \ map\_memory(*my\_factory-\/>devices().begin(),\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}});}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \ \ \ \ my\_curr\_device\_id.store<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa73cb2e2bcb94442b8b2b72e93a76f2e5}{tbb::relaxed}}>(opencl\_device::host);}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \ \ \ \ my\_host\_ptr\ =\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.data(\textcolor{keyword}{false});}
\DoxyCodeLine{00554\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00555\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Release\ the\ sending\ event}}
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (my\_sending\_event\_present)\ \{}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(clReleaseEvent(my\_sending\_event),\ \textcolor{stringliteral}{"{}Failed\ to\ release\ an\ event"{}});}
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ \ \ \ \ my\_sending\_event\_present\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}};}
\DoxyCodeLine{00561\ \ \ \ \ \}}
\DoxyCodeLine{00562\ }
\DoxyCodeLine{00563\ \ \ \ \ opencl\_async\_msg<void*,\ Factory>\ send(opencl\_device\ device,\ \textcolor{keyword}{const}\ cl\_event\ *\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}})\ \{}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ opencl\_device::device\_id\_type\ device\_id\ =\ device.my\_device\_id;}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!my\_factory-\/>is\_same\_context(my\_curr\_device\_id.load<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aaa92646b4dc7618530d3a9f51dd10a418}{tbb::acquire}}>(),\ device\_id))\ \{}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1spin__mutex_1_1scoped__lock}{tbb::spin\_mutex::scoped\_lock}}\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(my\_sending\_lock);}
\DoxyCodeLine{00568\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!my\_factory-\/>is\_same\_context(my\_curr\_device\_id.load<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa73cb2e2bcb94442b8b2b72e93a76f2e5}{tbb::relaxed}}>(),\ device\_id))\ \{}
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(my\_host\_ptr,\ \textcolor{stringliteral}{"{}The\ buffer\ has\ not\ been\ mapped"{}});}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ opencl\_async\_msg<void*,\ Factory>\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}(my\_host\_ptr);}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_factory-\/>enqueue\_unmap\_buffer(device,\ *\textcolor{keyword}{this},\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}});}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_sending\_event\ =\ *\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.get\_event();}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_sending\_event\_present\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(clRetainEvent(my\_sending\_event),\ \textcolor{stringliteral}{"{}Failed\ to\ retain\ an\ event"{}});}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_host\_ptr\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_curr\_device\_id.store<\mbox{\hyperlink{namespacetbb_adb86d08473679d6fe0eabcdc766ffe3aa412563418e657114a102db610f726632}{tbb::release}}>(device\_id);}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(my\_sending\_event\_present,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00581\ }
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ !e\ means\ that\ buffer\ has\ come\ from\ the\ host}}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ \&\&\ my\_sending\_event\_present)\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ =\ \&my\_sending\_event;}
\DoxyCodeLine{00584\ }
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(!my\_host\_ptr,\ \textcolor{stringliteral}{"{}The\ buffer\ has\ not\ been\ unmapped"{}});}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ ?\ opencl\_async\_msg<void*,\ Factory>(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ *\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}})\ :\ opencl\_async\_msg<void*,\ Factory>(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00587\ \ \ \ \ \}}
\DoxyCodeLine{00588\ }
\DoxyCodeLine{00589\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ map\_memory(\ opencl\_device,\ opencl\_async\_msg<void*,\ Factory>\ \&\ )\ =\ 0;}
\DoxyCodeLine{00590\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00591\ \ \ \ \ cl\_mem\ my\_cl\_mem;}
\DoxyCodeLine{00592\ \ \ \ \ tbb::atomic<opencl\_device::device\_id\_type>\ my\_curr\_device\_id;}
\DoxyCodeLine{00593\ \ \ \ \ \textcolor{keywordtype}{void}*\ my\_host\_ptr;}
\DoxyCodeLine{00594\ \ \ \ \ Factory\ *my\_factory;}
\DoxyCodeLine{00595\ }
\DoxyCodeLine{00596\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1spin__mutex}{tbb::spin\_mutex}}\ my\_sending\_lock;}
\DoxyCodeLine{00597\ \ \ \ \ \textcolor{keywordtype}{bool}\ my\_sending\_event\_present;}
\DoxyCodeLine{00598\ \ \ \ \ cl\_event\ my\_sending\_event;}
\DoxyCodeLine{00599\ \};}
\DoxyCodeLine{00600\ }
\DoxyCodeLine{00601\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{00602\ \textcolor{keyword}{class\ }opencl\_buffer\_impl\ :\ \textcolor{keyword}{public}\ opencl\_memory<Factory>\ \{}
\DoxyCodeLine{00603\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ my\_size;}
\DoxyCodeLine{00604\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00605\ \ \ \ \ opencl\_buffer\_impl(\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ Factory\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )\ :\ opencl\_memory<Factory>(\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ ),\ my\_size(\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ )\ \{}
\DoxyCodeLine{00606\ \ \ \ \ \ \ \ \ cl\_int\ err;}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ this-\/>my\_cl\_mem\ =\ clCreateBuffer(\ this-\/>my\_factory-\/>context(),\ CL\_MEM\_ALLOC\_HOST\_PTR,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \&err\ );}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ err,\ \textcolor{stringliteral}{"{}Failed\ to\ create\ an\ OpenCL\ buffer"{}}\ );}
\DoxyCodeLine{00609\ \ \ \ \ \}}
\DoxyCodeLine{00610\ }
\DoxyCodeLine{00611\ \ \ \ \ \textcolor{comment}{//\ The\ constructor\ for\ subbuffers.}}
\DoxyCodeLine{00612\ \ \ \ \ opencl\_buffer\_impl(\ cl\_mem\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ Factory\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )\ :\ opencl\_memory<Factory>(\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ ),\ my\_size(\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ )\ \{}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ cl\_int\ err;}
\DoxyCodeLine{00614\ \ \ \ \ \ \ \ \ cl\_buffer\_region\ region\ =\ \{\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ \};}
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ \ this-\/>my\_cl\_mem\ =\ clCreateSubBuffer(\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}},\ 0,\ CL\_BUFFER\_CREATE\_TYPE\_REGION,\ \&region,\ \&err\ );}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ err,\ \textcolor{stringliteral}{"{}Failed\ to\ create\ an\ OpenCL\ subbuffer"{}}\ );}
\DoxyCodeLine{00617\ \ \ \ \ \}}
\DoxyCodeLine{00618\ }
\DoxyCodeLine{00619\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ my\_size;}
\DoxyCodeLine{00621\ \ \ \ \ \}}
\DoxyCodeLine{00622\ }
\DoxyCodeLine{00623\ \ \ \ \ \textcolor{keywordtype}{void}\ map\_memory(\ opencl\_device\ device,\ opencl\_async\_msg<void*,\ Factory>\ \&dmsg\ )\ \_\_TBB\_override\ \{}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \ \ this-\/>my\_factory-\/>enqueue\_map\_buffer(\ device,\ *\textcolor{keyword}{this},\ dmsg\ );}
\DoxyCodeLine{00625\ \ \ \ \ \}}
\DoxyCodeLine{00626\ }
\DoxyCodeLine{00627\ \textcolor{preprocessor}{\#if\ TBB\_USE\_ASSERT}}
\DoxyCodeLine{00628\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename},\ \textcolor{keyword}{typename}>}
\DoxyCodeLine{00629\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }opencl\_buffer;}
\DoxyCodeLine{00630\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00631\ \};}
\DoxyCodeLine{00632\ }
\DoxyCodeLine{00633\ \textcolor{keyword}{enum}\ access\_type\ \{}
\DoxyCodeLine{00634\ \ \ \ \ read\_write,}
\DoxyCodeLine{00635\ \ \ \ \ write\_only,}
\DoxyCodeLine{00636\ \ \ \ \ read\_only}
\DoxyCodeLine{00637\ \};}
\DoxyCodeLine{00638\ }
\DoxyCodeLine{00639\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Factory\ =\ opencl\_info::default\_opencl\_factory>}
\DoxyCodeLine{00640\ \textcolor{keyword}{class\ }\mbox{\hyperlink{flow__graph_8h_a32d0d5beeb9b0911d032c1d3db7a72eb}{\_\_TBB\_DEPRECATED\_IN\_VERBOSE\_MODE}}}
\DoxyCodeLine{00641\ opencl\_subbuffer;}
\DoxyCodeLine{00642\ }
\DoxyCodeLine{00643\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Factory\ =\ opencl\_info::default\_opencl\_factory>}
\DoxyCodeLine{00644\ \textcolor{keyword}{class\ }\mbox{\hyperlink{flow__graph_8h_a32d0d5beeb9b0911d032c1d3db7a72eb}{\_\_TBB\_DEPRECATED\_IN\_VERBOSE\_MODE}}}
\DoxyCodeLine{00645\ opencl\_buffer\ \{}
\DoxyCodeLine{00646\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00647\ \ \ \ \ \textcolor{keyword}{typedef}\ cl\_mem\ native\_object\_type;}
\DoxyCodeLine{00648\ \ \ \ \ \textcolor{keyword}{typedef}\ opencl\_buffer\ memory\_object\_type;}
\DoxyCodeLine{00649\ \ \ \ \ \textcolor{keyword}{typedef}\ Factory\ opencl\_factory\_type;}
\DoxyCodeLine{00650\ }
\DoxyCodeLine{00651\ \ \ \ \ \textcolor{keyword}{template}<access\_type\ a>\ \textcolor{keyword}{using\ }iterator\ =\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}*;}
\DoxyCodeLine{00652\ }
\DoxyCodeLine{00653\ \ \ \ \ \textcolor{keyword}{template}\ <access\_type\ a>}
\DoxyCodeLine{00654\ \ \ \ \ iterator<a>\ access()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}\ =\ (\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}*)my\_impl-\/>get\_host\_ptr();}
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ iterator<a>(\ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}\ );}
\DoxyCodeLine{00658\ \ \ \ \ \}}
\DoxyCodeLine{00659\ }
\DoxyCodeLine{00660\ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \&access<read\_write>()[0];\ \}}
\DoxyCodeLine{00661\ }
\DoxyCodeLine{00662\ \ \ \ \ \textcolor{keyword}{template}\ <access\_type\ a\ =\ read\_write>}
\DoxyCodeLine{00663\ \ \ \ \ iterator<a>\ \mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ access<a>();\ \}}
\DoxyCodeLine{00664\ }
\DoxyCodeLine{00665\ \ \ \ \ \textcolor{keyword}{template}\ <access\_type\ a\ =\ read\_write>}
\DoxyCodeLine{00666\ \ \ \ \ iterator<a>\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ access<a>()+my\_impl-\/>size()/\textcolor{keyword}{sizeof}(\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}});\ \}}
\DoxyCodeLine{00667\ }
\DoxyCodeLine{00668\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ my\_impl-\/>size()/\textcolor{keyword}{sizeof}(\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}});\ \}}
\DoxyCodeLine{00669\ }
\DoxyCodeLine{00670\ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ operator[]\ (\ ptrdiff\_t\ k\ )\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}}()[k];\ \}}
\DoxyCodeLine{00671\ }
\DoxyCodeLine{00672\ \ \ \ \ opencl\_buffer()\ \{\}}
\DoxyCodeLine{00673\ \ \ \ \ opencl\_buffer(\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ );}
\DoxyCodeLine{00674\ \ \ \ \ opencl\_buffer(\ Factory\ \&\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ )\ :\ my\_impl(\ std::make\_shared<impl\_type>(\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}*\textcolor{keyword}{sizeof}(\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}),\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )\ )\ \{\}}
\DoxyCodeLine{00675\ }
\DoxyCodeLine{00676\ \ \ \ \ cl\_mem\ native\_object()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00677\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ my\_impl-\/>get\_cl\_mem();}
\DoxyCodeLine{00678\ \ \ \ \ \}}
\DoxyCodeLine{00679\ }
\DoxyCodeLine{00680\ \ \ \ \ \textcolor{keyword}{const}\ opencl\_buffer\&\ memory\_object()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00681\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00682\ \ \ \ \ \}}
\DoxyCodeLine{00683\ }
\DoxyCodeLine{00684\ \ \ \ \ \textcolor{keywordtype}{void}\ send(\ opencl\_device\ device,\ opencl\_async\_msg<opencl\_buffer,\ Factory>\ \&dependency\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00685\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ dependency.data(\ \textcolor{comment}{/*wait\ =\ */}\textcolor{keyword}{false}\ )\ ==\ *\textcolor{keyword}{this},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00686\ \ \ \ \ \ \ \ \ opencl\_async\_msg<void*,\ Factory>\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ =\ my\_impl-\/>send(\ device,\ dependency.get\_event()\ );}
\DoxyCodeLine{00687\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ cl\_event\ *\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ =\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.get\_event();}
\DoxyCodeLine{00688\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ )\ dependency.set\_event(\ *\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ );}
\DoxyCodeLine{00689\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ dependency.clear\_event();}
\DoxyCodeLine{00690\ \ \ \ \ \}}
\DoxyCodeLine{00691\ \ \ \ \ \textcolor{keywordtype}{void}\ receive(\ \textcolor{keyword}{const}\ opencl\_async\_msg<opencl\_buffer,\ Factory>\ \&dependency\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00692\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ dependency.data(\ \textcolor{comment}{/*wait\ =\ */}\textcolor{keyword}{false}\ )\ ==\ *\textcolor{keyword}{this},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00693\ \ \ \ \ \ \ \ \ opencl\_async\_msg<void*,\ Factory>\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ =\ my\_impl-\/>receive(\ dependency.get\_event()\ );}
\DoxyCodeLine{00694\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ cl\_event\ *\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ =\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.get\_event();}
\DoxyCodeLine{00695\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ )\ dependency.set\_event(\ *\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ );}
\DoxyCodeLine{00696\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ dependency.clear\_event();}
\DoxyCodeLine{00697\ \ \ \ \ \}}
\DoxyCodeLine{00698\ }
\DoxyCodeLine{00699\ \ \ \ \ opencl\_subbuffer<T,\ Factory>\ subbuffer(\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ )\ \textcolor{keyword}{const};}
\DoxyCodeLine{00700\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00701\ \ \ \ \ \textcolor{comment}{//\ The\ constructor\ for\ subbuffers.}}
\DoxyCodeLine{00702\ \ \ \ \ opencl\_buffer(\ Factory\ \&\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ cl\_mem\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ )\ :\ my\_impl(\ std::make\_shared<impl\_type>(\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}}*\textcolor{keyword}{sizeof}(\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}),\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}*\textcolor{keyword}{sizeof}(\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}),\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )\ )\ \{\}}
\DoxyCodeLine{00703\ }
\DoxyCodeLine{00704\ \ \ \ \ \textcolor{keyword}{typedef}\ opencl\_buffer\_impl<Factory>\ impl\_type;}
\DoxyCodeLine{00705\ }
\DoxyCodeLine{00706\ \ \ \ \ std::shared\_ptr<impl\_type>\ my\_impl;}
\DoxyCodeLine{00707\ }
\DoxyCodeLine{00708\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{safe__ptr_8h_aa70685c379499032704de691f795148b}{operator==}}(\textcolor{keyword}{const}\ opencl\_buffer<T,\ Factory>\ \&lhs,\ \textcolor{keyword}{const}\ opencl\_buffer<T,\ Factory>\ \&\mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}})\ \{}
\DoxyCodeLine{00709\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ lhs.my\_impl\ ==\ \mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}}.my\_impl;}
\DoxyCodeLine{00710\ \ \ \ \ \}}
\DoxyCodeLine{00711\ }
\DoxyCodeLine{00712\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}>}
\DoxyCodeLine{00713\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }opencl\_factory;}
\DoxyCodeLine{00714\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename},\ \textcolor{keyword}{typename}>}
\DoxyCodeLine{00715\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }opencl\_subbuffer;}
\DoxyCodeLine{00716\ \};}
\DoxyCodeLine{00717\ }
\DoxyCodeLine{00718\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{00719\ \textcolor{keyword}{class\ }\mbox{\hyperlink{flow__graph_8h_a32d0d5beeb9b0911d032c1d3db7a72eb}{\_\_TBB\_DEPRECATED\_IN\_VERBOSE\_MODE}}}
\DoxyCodeLine{00720\ opencl\_subbuffer\ :\ \textcolor{keyword}{public}\ opencl\_buffer<T,\ Factory>\ \{}
\DoxyCodeLine{00721\ \ \ \ \ opencl\_buffer<T,\ Factory>\ my\_owner;}
\DoxyCodeLine{00722\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00723\ \ \ \ \ opencl\_subbuffer()\ \{\}}
\DoxyCodeLine{00724\ \ \ \ \ opencl\_subbuffer(\ \textcolor{keyword}{const}\ opencl\_buffer<T,\ Factory>\ \&owner,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ )\ :}
\DoxyCodeLine{00725\ \ \ \ \ \ \ \ \ opencl\_buffer<T,\ Factory>(\ *owner.my\_impl-\/>factory(),\ owner.native\_object(),\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ ),\ my\_owner(\ owner\ )\ \{\}}
\DoxyCodeLine{00726\ \};}
\DoxyCodeLine{00727\ }
\DoxyCodeLine{00728\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{00729\ opencl\_subbuffer<T,\ Factory>\ opencl\_buffer<T,\ Factory>::subbuffer(\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00730\ \ \ \ \ \textcolor{keywordflow}{return}\ opencl\_subbuffer<T,\ Factory>(\ *\textcolor{keyword}{this},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ );}
\DoxyCodeLine{00731\ \}}
\DoxyCodeLine{00732\ }
\DoxyCodeLine{00733\ }
\DoxyCodeLine{00734\ \textcolor{preprocessor}{\#define\ is\_typedef(type)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00735\ \textcolor{preprocessor}{\ \ \ \ template\ <typename\ T>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00736\ \textcolor{preprocessor}{\ \ \ \ struct\ is\_\#\#type\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00737\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ template\ <typename\ C>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00738\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ static\ std::true\_type\ check(\ typename\ C::type*\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00739\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ template\ <typename\ C>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00740\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ static\ std::false\_type\ check(\ ...\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00741\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00742\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ static\ const\ bool\ value\ =\ decltype(check<T>(0))::value;\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00743\ \textcolor{preprocessor}{\ \ \ \ \}}}
\DoxyCodeLine{00744\ }
\DoxyCodeLine{00745\ is\_typedef(\ native\_object\_type\ );}
\DoxyCodeLine{00746\ is\_typedef(\ memory\_object\_type\ );}
\DoxyCodeLine{00747\ }
\DoxyCodeLine{00748\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00749\ \textcolor{keyword}{typename}\ std::enable\_if<is\_native\_object\_type<T>::value,\ \textcolor{keyword}{typename}\ T::native\_object\_type>\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{::type}}\ get\_native\_object(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ \{}
\DoxyCodeLine{00750\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.native\_object();}
\DoxyCodeLine{00751\ \}}
\DoxyCodeLine{00752\ }
\DoxyCodeLine{00753\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00754\ \textcolor{keyword}{typename}\ std::enable\_if<!is\_native\_object\_type<T>::value,\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}>\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{::type}}\ get\_native\_object(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ \{}
\DoxyCodeLine{00755\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}};}
\DoxyCodeLine{00756\ \}}
\DoxyCodeLine{00757\ }
\DoxyCodeLine{00758\ \textcolor{comment}{//\ send\_if\_memory\_object\ checks\ if\ the\ T\ type\ has\ memory\_object\_type\ and\ call\ the\ send\ method\ for\ the\ object.}}
\DoxyCodeLine{00759\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{00760\ \textcolor{keyword}{typename}\ std::enable\_if<is\_memory\_object\_type<T>::value>\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{::type}}\ send\_if\_memory\_object(\ opencl\_device\ device,\ opencl\_async\_msg<T,\ Factory>\ \&dmsg\ )\ \{}
\DoxyCodeLine{00761\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ dmsg.data(\ \textcolor{keyword}{false}\ );}
\DoxyCodeLine{00762\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ T::memory\_object\_type\ mem\_obj\_t;}
\DoxyCodeLine{00763\ \ \ \ \ mem\_obj\_t\ mem\_obj\ =\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.memory\_object();}
\DoxyCodeLine{00764\ \ \ \ \ opencl\_async\_msg<mem\_obj\_t,\ Factory>\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}(\ mem\_obj\ );}
\DoxyCodeLine{00765\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ dmsg.get\_event()\ )\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.set\_event(\ *dmsg.get\_event()\ );}
\DoxyCodeLine{00766\ \ \ \ \ mem\_obj.send(\ device,\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ );}
\DoxyCodeLine{00767\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.get\_event()\ )\ dmsg.set\_event(\ *\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.get\_event()\ );}
\DoxyCodeLine{00768\ \}}
\DoxyCodeLine{00769\ }
\DoxyCodeLine{00770\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00771\ \textcolor{keyword}{typename}\ std::enable\_if<is\_memory\_object\_type<T>::value>\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{::type}}\ send\_if\_memory\_object(\ opencl\_device\ device,\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ \{}
\DoxyCodeLine{00772\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ T::memory\_object\_type\ mem\_obj\_t;}
\DoxyCodeLine{00773\ \ \ \ \ mem\_obj\_t\ mem\_obj\ =\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.memory\_object();}
\DoxyCodeLine{00774\ \ \ \ \ opencl\_async\_msg<mem\_obj\_t,\ typename\ mem\_obj\_t::opencl\_factory\_type>\ dmsg(\ mem\_obj\ );}
\DoxyCodeLine{00775\ \ \ \ \ mem\_obj.send(\ device,\ dmsg\ );}
\DoxyCodeLine{00776\ \}}
\DoxyCodeLine{00777\ }
\DoxyCodeLine{00778\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00779\ \textcolor{keyword}{typename}\ std::enable\_if<!is\_memory\_object\_type<T>::value>\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{::type}}\ send\_if\_memory\_object(\ opencl\_device,\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ )\ \{\};}
\DoxyCodeLine{00780\ }
\DoxyCodeLine{00781\ \textcolor{comment}{//\ receive\_if\_memory\_object\ checks\ if\ the\ T\ type\ has\ memory\_object\_type\ and\ call\ the\ receive\ method\ for\ the\ object.}}
\DoxyCodeLine{00782\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{00783\ \textcolor{keyword}{typename}\ std::enable\_if<is\_memory\_object\_type<T>::value>\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{::type}}\ receive\_if\_memory\_object(\ \textcolor{keyword}{const}\ opencl\_async\_msg<T,\ Factory>\ \&dmsg\ )\ \{}
\DoxyCodeLine{00784\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ dmsg.data(\ \textcolor{keyword}{false}\ );}
\DoxyCodeLine{00785\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ T::memory\_object\_type\ mem\_obj\_t;}
\DoxyCodeLine{00786\ \ \ \ \ mem\_obj\_t\ mem\_obj\ =\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.memory\_object();}
\DoxyCodeLine{00787\ \ \ \ \ opencl\_async\_msg<mem\_obj\_t,\ Factory>\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}(\ mem\_obj\ );}
\DoxyCodeLine{00788\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ dmsg.get\_event()\ )\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.set\_event(\ *dmsg.get\_event()\ );}
\DoxyCodeLine{00789\ \ \ \ \ mem\_obj.receive(\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ );}
\DoxyCodeLine{00790\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.get\_event()\ )\ dmsg.set\_event(\ *\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.get\_event()\ );}
\DoxyCodeLine{00791\ \}}
\DoxyCodeLine{00792\ }
\DoxyCodeLine{00793\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00794\ \textcolor{keyword}{typename}\ std::enable\_if<!is\_memory\_object\_type<T>::value>\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{::type}}\ \ receive\_if\_memory\_object(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ )\ \{\}}
\DoxyCodeLine{00795\ }
\DoxyCodeLine{00796\ \textcolor{keyword}{class\ }\mbox{\hyperlink{flow__graph_8h_a32d0d5beeb9b0911d032c1d3db7a72eb}{\_\_TBB\_DEPRECATED\_IN\_VERBOSE\_MODE}}\ opencl\_range\ \{}
\DoxyCodeLine{00797\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00798\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{size\_t}\ range\_index\_type;}
\DoxyCodeLine{00799\ \ \ \ \ \textcolor{keyword}{typedef}\ std::array<range\_index\_type,\ 3>\ nd\_range\_type;}
\DoxyCodeLine{00800\ }
\DoxyCodeLine{00801\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ G\ =\ std::initializer\_list<\textcolor{keywordtype}{int}>,\ \textcolor{keyword}{typename}\ L\ =\ std::initializer\_list<\textcolor{keywordtype}{int}>,}
\DoxyCodeLine{00802\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ =\ \textcolor{keyword}{typename}\ std::enable\_if<!std::is\_same<\textcolor{keyword}{typename}\ std::decay<G>::type,\ opencl\_range>::value>::type>}
\DoxyCodeLine{00803\ \ \ \ \ opencl\_range(\mbox{\hyperlink{struct_g}{G}}\&\&\ global\_work\ =\ \mbox{\hyperlink{classstd_1_1initializer__list}{std::initializer\_list<int>}}(\{\ 0\ \}),\ \mbox{\hyperlink{_l_l_t__example_8cpp_a2913877890361a28ee108aafe462ee93}{L}}\&\&\ local\_work\ =\ \mbox{\hyperlink{classstd_1_1initializer__list}{std::initializer\_list<int>}}(\{\ 0,\ 0,\ 0\ \}))\ \{}
\DoxyCodeLine{00804\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ g\_it\ =\ global\_work.begin();}
\DoxyCodeLine{00805\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ l\_it\ =\ local\_work.begin();}
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ my\_global\_work\_size\ =\ \{\ \{size\_t(-\/1),\ size\_t(-\/1),\ size\_t(-\/1)\}\ \};}
\DoxyCodeLine{00807\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ my\_local\_work\_size\ is\ still\ uninitialized}}
\DoxyCodeLine{00808\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ 0;\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ <\ 3\ \&\&\ g\_it\ !=\ global\_work.end();\ ++g\_it,\ ++l\_it,\ ++\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}})\ \{}
\DoxyCodeLine{00809\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(l\_it\ !=\ local\_work.end(),\ \textcolor{stringliteral}{"{}global\_work\ \&\ local\_work\ must\ have\ same\ size"{}});}
\DoxyCodeLine{00810\ \ \ \ \ \ \ \ \ \ \ \ \ my\_global\_work\_size[\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}]\ =\ *g\_it;}
\DoxyCodeLine{00811\ \ \ \ \ \ \ \ \ \ \ \ \ my\_local\_work\_size[\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}]\ =\ *l\_it;}
\DoxyCodeLine{00812\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00813\ \ \ \ \ \}}
\DoxyCodeLine{00814\ }
\DoxyCodeLine{00815\ \ \ \ \ \textcolor{keyword}{const}\ nd\_range\_type\&\ global\_range()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ my\_global\_work\_size;\ \}}
\DoxyCodeLine{00816\ \ \ \ \ \textcolor{keyword}{const}\ nd\_range\_type\&\ local\_range()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ my\_local\_work\_size;\ \}}
\DoxyCodeLine{00817\ }
\DoxyCodeLine{00818\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00819\ \ \ \ \ nd\_range\_type\ my\_global\_work\_size;}
\DoxyCodeLine{00820\ \ \ \ \ nd\_range\_type\ my\_local\_work\_size;}
\DoxyCodeLine{00821\ \};}
\DoxyCodeLine{00822\ }
\DoxyCodeLine{00823\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ DeviceFilter>}
\DoxyCodeLine{00824\ \textcolor{keyword}{class\ }\mbox{\hyperlink{flow__graph_8h_a32d0d5beeb9b0911d032c1d3db7a72eb}{\_\_TBB\_DEPRECATED\_IN\_VERBOSE\_MODE}}\ opencl\_factory\ \{}
\DoxyCodeLine{00825\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00826\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{using\ }async\_msg\_type\ =\ opencl\_async\_msg<T,\ opencl\_factory<DeviceFilter>>;}
\DoxyCodeLine{00827\ \ \ \ \ \textcolor{keyword}{typedef}\ opencl\_device\ device\_type;}
\DoxyCodeLine{00828\ }
\DoxyCodeLine{00829\ \ \ \ \ \textcolor{keyword}{class\ }kernel\ :\ tbb::internal::no\_assign\ \{}
\DoxyCodeLine{00830\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00831\ \ \ \ \ \ \ \ \ kernel(\ \textcolor{keyword}{const}\ kernel\&\ k\ )\ :\ my\_factory(\ k.my\_factory\ )\ \{}
\DoxyCodeLine{00832\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Clone\ my\_cl\_kernel\ via\ opencl\_program}}
\DoxyCodeLine{00833\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ ret\_size\ =\ 0;}
\DoxyCodeLine{00834\ }
\DoxyCodeLine{00835\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<char>\ kernel\_name;}
\DoxyCodeLine{00836\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keywordtype}{size\_t}\ curr\_size\ =\ 32;;\ curr\_size\ <<=\ 1\ )\ \{}
\DoxyCodeLine{00837\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ kernel\_name.resize(\ curr\_size\ <<=\ 1\ );}
\DoxyCodeLine{00838\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clGetKernelInfo(\ k.my\_cl\_kernel,\ CL\_KERNEL\_FUNCTION\_NAME,\ curr\_size,\ kernel\_name.data(),\ \&ret\_size\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ get\ kernel\ info"{}}\ );}
\DoxyCodeLine{00839\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ ret\_size\ <\ curr\_size\ )\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00840\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00841\ }
\DoxyCodeLine{00842\ \ \ \ \ \ \ \ \ \ \ \ \ cl\_program\ program;}
\DoxyCodeLine{00843\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clGetKernelInfo(\ k.my\_cl\_kernel,\ CL\_KERNEL\_PROGRAM,\ \textcolor{keyword}{sizeof}(program),\ \&program,\ \&ret\_size\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ get\ kernel\ info"{}}\ );}
\DoxyCodeLine{00844\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ ret\_size\ ==\ \textcolor{keyword}{sizeof}(program),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00845\ }
\DoxyCodeLine{00846\ \ \ \ \ \ \ \ \ \ \ \ \ my\_cl\_kernel\ =\ opencl\_program<\ factory\_type\ >(\ my\_factory,\ program\ ).get\_cl\_kernel(\ kernel\_name.data()\ );}
\DoxyCodeLine{00847\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00848\ }
\DoxyCodeLine{00849\ \ \ \ \ \ \ \ \ \string~kernel()\ \{}
\DoxyCodeLine{00850\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clReleaseKernel(\ my\_cl\_kernel\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ release\ a\ kernel"{}}\ );}
\DoxyCodeLine{00851\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00852\ }
\DoxyCodeLine{00853\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00854\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ opencl\_factory<DeviceFilter>\ factory\_type;}
\DoxyCodeLine{00855\ }
\DoxyCodeLine{00856\ \ \ \ \ \ \ \ \ kernel(\ \textcolor{keyword}{const}\ cl\_kernel\&\ k,\ factory\_type\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )\ :\ my\_cl\_kernel(\ k\ ),\ my\_factory(\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )\ \{\}}
\DoxyCodeLine{00857\ }
\DoxyCodeLine{00858\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Data}}
\DoxyCodeLine{00859\ \ \ \ \ \ \ \ \ cl\_kernel\ my\_cl\_kernel;}
\DoxyCodeLine{00860\ \ \ \ \ \ \ \ \ factory\_type\&\ my\_factory;}
\DoxyCodeLine{00861\ }
\DoxyCodeLine{00862\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ DeviceFilter\_>}
\DoxyCodeLine{00863\ \ \ \ \ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }opencl\_factory;}
\DoxyCodeLine{00864\ }
\DoxyCodeLine{00865\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{00866\ \ \ \ \ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }opencl\_program;}
\DoxyCodeLine{00867\ \ \ \ \ \};}
\DoxyCodeLine{00868\ }
\DoxyCodeLine{00869\ \ \ \ \ \textcolor{keyword}{typedef}\ kernel\ kernel\_type;}
\DoxyCodeLine{00870\ }
\DoxyCodeLine{00871\ \ \ \ \ \textcolor{comment}{//\ 'range\_type'\ enables\ kernel\_executor\ with\ range\ support}}
\DoxyCodeLine{00872\ \ \ \ \ \textcolor{comment}{//\ it\ affects\ expectations\ for\ enqueue\_kernel(.....)\ interface\ method}}
\DoxyCodeLine{00873\ \ \ \ \ \textcolor{keyword}{typedef}\ opencl\_range\ range\_type;}
\DoxyCodeLine{00874\ }
\DoxyCodeLine{00875\ \ \ \ \ opencl\_factory()\ \{\}}
\DoxyCodeLine{00876\ \ \ \ \ \string~opencl\_factory()\ \{}
\DoxyCodeLine{00877\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ my\_devices.size()\ )\ \{}
\DoxyCodeLine{00878\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ =\ my\_devices.begin();\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ !=\ my\_devices.end();\ ++\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ )\ \{}
\DoxyCodeLine{00879\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clReleaseCommandQueue(\ (*d).my\_cl\_command\_queue\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ release\ a\ command\ queue"{}}\ );}
\DoxyCodeLine{00880\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00881\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clReleaseContext(\ my\_cl\_context\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ release\ a\ context"{}}\ );}
\DoxyCodeLine{00882\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00883\ \ \ \ \ \}}
\DoxyCodeLine{00884\ }
\DoxyCodeLine{00885\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init}}(\ \textcolor{keyword}{const}\ opencl\_device\_list\ \&device\_list\ )\ \{}
\DoxyCodeLine{00886\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1spin__mutex_1_1scoped__lock}{tbb::spin\_mutex::scoped\_lock}}\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\ my\_devices\_mutex\ );}
\DoxyCodeLine{00887\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !my\_devices.size()\ )\ \{}
\DoxyCodeLine{00888\ \ \ \ \ \ \ \ \ \ \ \ \ my\_devices\ =\ device\_list;}
\DoxyCodeLine{00889\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00890\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00891\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00892\ \ \ \ \ \}}
\DoxyCodeLine{00893\ }
\DoxyCodeLine{00894\ }
\DoxyCodeLine{00895\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00896\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{00897\ \ \ \ \ \textcolor{keywordtype}{void}\ enqueue\_map\_buffer(\ opencl\_device\ device,\ opencl\_buffer\_impl<Factory>\ \&\mbox{\hyperlink{sugar_8h_aaadc06b5dac8070de2c8677210967bdb}{buffer}},\ opencl\_async\_msg<void*,\ Factory>\&\ dmsg\ )\ \{}
\DoxyCodeLine{00898\ \ \ \ \ \ \ \ \ cl\_event\ \textcolor{keyword}{const}*\ \mbox{\hyperlink{modp__b64__data_8h_ab78401eca96e7e37b40988b2d5b50deb}{e1}}\ =\ dmsg.get\_event();}
\DoxyCodeLine{00899\ \ \ \ \ \ \ \ \ cl\_event\ \mbox{\hyperlink{modp__b64__data_8h_af07d21ca4ff9cfc16902b3cf8bac724e}{e2}};}
\DoxyCodeLine{00900\ \ \ \ \ \ \ \ \ cl\_int\ err;}
\DoxyCodeLine{00901\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}\ =\ clEnqueueMapBuffer(\ device.my\_cl\_command\_queue,\ \mbox{\hyperlink{sugar_8h_aaadc06b5dac8070de2c8677210967bdb}{buffer}}.get\_cl\_mem(),\ \textcolor{keyword}{false},\ CL\_MAP\_READ\ |\ CL\_MAP\_WRITE,\ 0,\ \mbox{\hyperlink{sugar_8h_aaadc06b5dac8070de2c8677210967bdb}{buffer}}.size(),}
\DoxyCodeLine{00902\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{modp__b64__data_8h_ab78401eca96e7e37b40988b2d5b50deb}{e1}}\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ ?\ 0\ :\ 1,\ \mbox{\hyperlink{modp__b64__data_8h_ab78401eca96e7e37b40988b2d5b50deb}{e1}},\ \&\mbox{\hyperlink{modp__b64__data_8h_af07d21ca4ff9cfc16902b3cf8bac724e}{e2}},\ \&err\ );}
\DoxyCodeLine{00903\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ err,\ \textcolor{stringliteral}{"{}Failed\ to\ map\ a\ buffer"{}}\ );}
\DoxyCodeLine{00904\ \ \ \ \ \ \ \ \ dmsg.data(\ \textcolor{keyword}{false}\ )\ =\ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}};}
\DoxyCodeLine{00905\ \ \ \ \ \ \ \ \ dmsg.set\_event(\ \mbox{\hyperlink{modp__b64__data_8h_af07d21ca4ff9cfc16902b3cf8bac724e}{e2}}\ );}
\DoxyCodeLine{00906\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clReleaseEvent(\ \mbox{\hyperlink{modp__b64__data_8h_af07d21ca4ff9cfc16902b3cf8bac724e}{e2}}\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ release\ an\ event"{}}\ );}
\DoxyCodeLine{00907\ \ \ \ \ \}}
\DoxyCodeLine{00908\ }
\DoxyCodeLine{00909\ }
\DoxyCodeLine{00910\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{00911\ \ \ \ \ \textcolor{keywordtype}{void}\ enqueue\_unmap\_buffer(\ opencl\_device\ device,\ opencl\_memory<Factory>\ \&memory,\ opencl\_async\_msg<void*,\ Factory>\&\ dmsg\ )\ \{}
\DoxyCodeLine{00912\ \ \ \ \ \ \ \ \ cl\_event\ \textcolor{keyword}{const}*\ \mbox{\hyperlink{modp__b64__data_8h_ab78401eca96e7e37b40988b2d5b50deb}{e1}}\ =\ dmsg.get\_event();}
\DoxyCodeLine{00913\ \ \ \ \ \ \ \ \ cl\_event\ \mbox{\hyperlink{modp__b64__data_8h_af07d21ca4ff9cfc16902b3cf8bac724e}{e2}};}
\DoxyCodeLine{00914\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(}
\DoxyCodeLine{00915\ \ \ \ \ \ \ \ \ \ \ \ \ clEnqueueUnmapMemObject(\ device.my\_cl\_command\_queue,\ memory.get\_cl\_mem(),\ memory.get\_host\_ptr(),\ \mbox{\hyperlink{modp__b64__data_8h_ab78401eca96e7e37b40988b2d5b50deb}{e1}}\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ ?\ 0\ :\ 1,\ \mbox{\hyperlink{modp__b64__data_8h_ab78401eca96e7e37b40988b2d5b50deb}{e1}},\ \&\mbox{\hyperlink{modp__b64__data_8h_af07d21ca4ff9cfc16902b3cf8bac724e}{e2}}\ ),}
\DoxyCodeLine{00916\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Failed\ to\ unmap\ a\ buffer"{}}\ );}
\DoxyCodeLine{00917\ \ \ \ \ \ \ \ \ dmsg.set\_event(\ \mbox{\hyperlink{modp__b64__data_8h_af07d21ca4ff9cfc16902b3cf8bac724e}{e2}}\ );}
\DoxyCodeLine{00918\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clReleaseEvent(\ \mbox{\hyperlink{modp__b64__data_8h_af07d21ca4ff9cfc16902b3cf8bac724e}{e2}}\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ release\ an\ event"{}}\ );}
\DoxyCodeLine{00919\ \ \ \ \ \}}
\DoxyCodeLine{00920\ }
\DoxyCodeLine{00921\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/\ Kernel\ argument\ \&\ event\ list\ helpers\ -\/-\/-\/-\/-\/-\/-\/-\/-\/\ //}}
\DoxyCodeLine{00922\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{size\_t}\ NUM\_ARGS,\ \textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00923\ \ \ \ \ \textcolor{keywordtype}{void}\ process\_one\_arg(\ \textcolor{keyword}{const}\ kernel\_type\&\ kernel,\ std::array<cl\_event,\ NUM\_ARGS>\&,\ \textcolor{keywordtype}{int}\&,\ \textcolor{keywordtype}{int}\&\ place,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ \{}
\DoxyCodeLine{00924\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ get\_native\_object(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}});}
\DoxyCodeLine{00925\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clSetKernelArg(kernel.my\_cl\_kernel,\ place++,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}),\ \&\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}),\ \textcolor{stringliteral}{"{}Failed\ to\ set\ a\ kernel\ argument"{}}\ );}
\DoxyCodeLine{00926\ \ \ \ \ \}}
\DoxyCodeLine{00927\ }
\DoxyCodeLine{00928\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{size\_t}\ NUM\_ARGS,\ \textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{00929\ \ \ \ \ \textcolor{keywordtype}{void}\ process\_one\_arg(\ \textcolor{keyword}{const}\ kernel\_type\&\ kernel,\ std::array<cl\_event,\ NUM\_ARGS>\&\ events,\ \textcolor{keywordtype}{int}\&\ num\_events,\ \textcolor{keywordtype}{int}\&\ place,\ \textcolor{keyword}{const}\ opencl\_async\_msg<T,\ F>\&\ msg\ )\ \{}
\DoxyCodeLine{00930\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}((\textcolor{keyword}{static\_cast<}typename\ std::array<cl\_event,\ NUM\_ARGS>::size\_type\textcolor{keyword}{>}(num\_events)\ <\ events.size()),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00931\ }
\DoxyCodeLine{00932\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ cl\_event\ *\ \textcolor{keyword}{const}\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ =\ msg.get\_event();}
\DoxyCodeLine{00933\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{}
\DoxyCodeLine{00934\ \ \ \ \ \ \ \ \ \ \ \ \ events[num\_events++]\ =\ *\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}};}
\DoxyCodeLine{00935\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00936\ }
\DoxyCodeLine{00937\ \ \ \ \ \ \ \ \ process\_one\_arg(\ kernel,\ events,\ num\_events,\ place,\ msg.data(\textcolor{keyword}{false})\ );}
\DoxyCodeLine{00938\ \ \ \ \ \}}
\DoxyCodeLine{00939\ }
\DoxyCodeLine{00940\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{size\_t}\ NUM\_ARGS,\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{typename}\ ...Rest>}
\DoxyCodeLine{00941\ \ \ \ \ \textcolor{keywordtype}{void}\ process\_arg\_list(\ \textcolor{keyword}{const}\ kernel\_type\&\ kernel,\ std::array<cl\_event,\ NUM\_ARGS>\&\ events,\ \textcolor{keywordtype}{int}\&\ num\_events,\ \textcolor{keywordtype}{int}\&\ place,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}},\ \textcolor{keyword}{const}\ Rest\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}\ )\ \{}
\DoxyCodeLine{00942\ \ \ \ \ \ \ \ \ process\_one\_arg(\ kernel,\ events,\ num\_events,\ place,\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ );}
\DoxyCodeLine{00943\ \ \ \ \ \ \ \ \ process\_arg\_list(\ kernel,\ events,\ num\_events,\ place,\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}...\ );}
\DoxyCodeLine{00944\ \ \ \ \ \}}
\DoxyCodeLine{00945\ }
\DoxyCodeLine{00946\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{size\_t}\ NUM\_ARGS>}
\DoxyCodeLine{00947\ \ \ \ \ \textcolor{keywordtype}{void}\ process\_arg\_list(\ \textcolor{keyword}{const}\ kernel\_type\&,\ std::array<cl\_event,\ NUM\_ARGS>\&,\ \textcolor{keywordtype}{int}\&,\ \textcolor{keywordtype}{int}\&\ )\ \{\}}
\DoxyCodeLine{00948\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ //}}
\DoxyCodeLine{00949\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00950\ \ \ \ \ \textcolor{keywordtype}{void}\ update\_one\_arg(\ cl\_event,\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ )\ \{\}}
\DoxyCodeLine{00951\ }
\DoxyCodeLine{00952\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{00953\ \ \ \ \ \textcolor{keywordtype}{void}\ update\_one\_arg(\ cl\_event\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}},\ opencl\_async\_msg<T,\ F>\&\ msg\ )\ \{}
\DoxyCodeLine{00954\ \ \ \ \ \ \ \ \ msg.set\_event(\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ );}
\DoxyCodeLine{00955\ \ \ \ \ \}}
\DoxyCodeLine{00956\ }
\DoxyCodeLine{00957\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{typename}\ ...Rest>}
\DoxyCodeLine{00958\ \ \ \ \ \textcolor{keywordtype}{void}\ update\_arg\_list(\ cl\_event\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}},\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}},\ Rest\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}\ )\ \{}
\DoxyCodeLine{00959\ \ \ \ \ \ \ \ \ update\_one\_arg(\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}},\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ );}
\DoxyCodeLine{00960\ \ \ \ \ \ \ \ \ update\_arg\_list(\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}},\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}...\ );}
\DoxyCodeLine{00961\ \ \ \ \ \}}
\DoxyCodeLine{00962\ }
\DoxyCodeLine{00963\ \ \ \ \ \textcolor{keywordtype}{void}\ update\_arg\_list(\ cl\_event\ )\ \{\}}
\DoxyCodeLine{00964\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ //}}
\DoxyCodeLine{00965\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00966\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ...Args>}
\DoxyCodeLine{00967\ \ \ \ \ \textcolor{keywordtype}{void}\ send\_kernel(\ opencl\_device\ device,\ \textcolor{keyword}{const}\ kernel\_type\&\ kernel,\ \textcolor{keyword}{const}\ range\_type\&\ work\_size,\ Args\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}\ )\ \{}
\DoxyCodeLine{00968\ \ \ \ \ \ \ \ \ std::array<cl\_event,\ \textcolor{keyword}{sizeof}...(Args)>\ events;}
\DoxyCodeLine{00969\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_events\ =\ 0;}
\DoxyCodeLine{00970\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ place\ =\ 0;}
\DoxyCodeLine{00971\ \ \ \ \ \ \ \ \ process\_arg\_list(\ kernel,\ events,\ num\_events,\ place,\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}...\ );}
\DoxyCodeLine{00972\ }
\DoxyCodeLine{00973\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ cl\_event\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ =\ send\_kernel\_impl(\ device,\ kernel.my\_cl\_kernel,\ work\_size,\ num\_events,\ events.data()\ );}
\DoxyCodeLine{00974\ }
\DoxyCodeLine{00975\ \ \ \ \ \ \ \ \ update\_arg\_list(\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}},\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}...);}
\DoxyCodeLine{00976\ }
\DoxyCodeLine{00977\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Release\ our\ own\ reference\ to\ cl\_event}}
\DoxyCodeLine{00978\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clReleaseEvent(\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}),\ \textcolor{stringliteral}{"{}Failed\ to\ release\ an\ event"{}}\ );}
\DoxyCodeLine{00979\ \ \ \ \ \}}
\DoxyCodeLine{00980\ }
\DoxyCodeLine{00981\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ //}}
\DoxyCodeLine{00982\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{typename}\ ...Rest>}
\DoxyCodeLine{00983\ \ \ \ \ \textcolor{keywordtype}{void}\ send\_data(opencl\_device\ device,\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}},\ Rest\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}})\ \{}
\DoxyCodeLine{00984\ \ \ \ \ \ \ \ \ send\_if\_memory\_object(\ device,\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ );}
\DoxyCodeLine{00985\ \ \ \ \ \ \ \ \ send\_data(\ device,\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}...\ );}
\DoxyCodeLine{00986\ \ \ \ \ \}}
\DoxyCodeLine{00987\ }
\DoxyCodeLine{00988\ \ \ \ \ \textcolor{keywordtype}{void}\ send\_data(opencl\_device)\ \{\}}
\DoxyCodeLine{00989\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ //}}
\DoxyCodeLine{00990\ }
\DoxyCodeLine{00991\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00992\ \ \ \ \ cl\_event\ send\_kernel\_impl(\ opencl\_device\ device,\ \textcolor{keyword}{const}\ cl\_kernel\&\ kernel,}
\DoxyCodeLine{00993\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ range\_type\&\ work\_size,\ cl\_uint\ num\_events,\ cl\_event*\ event\_list\ )\ \{}
\DoxyCodeLine{00994\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{typename}\ range\_type::nd\_range\_type\ g\_offset\ =\ \{\ \{\ 0,\ 0,\ 0\ \}\ \};}
\DoxyCodeLine{00995\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{typename}\ range\_type::nd\_range\_type\&\ g\_size\ =\ work\_size.global\_range();}
\DoxyCodeLine{00996\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{typename}\ range\_type::nd\_range\_type\&\ l\_size\ =\ work\_size.local\_range();}
\DoxyCodeLine{00997\ \ \ \ \ \ \ \ \ cl\_uint\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}};}
\DoxyCodeLine{00998\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ 1;\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ <\ 3\ \&\&\ g\_size[\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}]\ !=\ size\_t(-\/1);\ ++\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}})\ \{\}}
\DoxyCodeLine{00999\ \ \ \ \ \ \ \ \ cl\_event\ \mbox{\hyperlink{classevent}{event}};}
\DoxyCodeLine{01000\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(}
\DoxyCodeLine{01001\ \ \ \ \ \ \ \ \ \ \ \ \ clEnqueueNDRangeKernel(\ device.my\_cl\_command\_queue,\ kernel,\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}},}
\DoxyCodeLine{01002\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ g\_offset.data(),\ g\_size.data(),\ l\_size[0]\ ?\ l\_size.data()\ :\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ num\_events,\ num\_events\ ?\ event\_list\ :\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \&\mbox{\hyperlink{classevent}{event}}\ ),}
\DoxyCodeLine{01003\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Failed\ to\ enqueue\ a\ kernel"{}}\ );}
\DoxyCodeLine{01004\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classevent}{event}};}
\DoxyCodeLine{01005\ \ \ \ \ \}}
\DoxyCodeLine{01006\ }
\DoxyCodeLine{01007\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ //}}
\DoxyCodeLine{01008\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{01009\ \ \ \ \ \textcolor{keywordtype}{bool}\ get\_event\_from\_one\_arg(\ cl\_event\&,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ )\ \{}
\DoxyCodeLine{01010\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01011\ \ \ \ \ \}}
\DoxyCodeLine{01012\ }
\DoxyCodeLine{01013\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{01014\ \ \ \ \ \textcolor{keywordtype}{bool}\ get\_event\_from\_one\_arg(\ cl\_event\&\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}},\ \textcolor{keyword}{const}\ opencl\_async\_msg<T,\ F>\&\ msg)\ \{}
\DoxyCodeLine{01015\ \ \ \ \ \ \ \ \ cl\_event\ \textcolor{keyword}{const}\ *e\_ptr\ =\ msg.get\_event();}
\DoxyCodeLine{01016\ }
\DoxyCodeLine{01017\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ e\_ptr\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ )\ \{}
\DoxyCodeLine{01018\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ =\ *e\_ptr;}
\DoxyCodeLine{01019\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01020\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01021\ }
\DoxyCodeLine{01022\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01023\ \ \ \ \ \}}
\DoxyCodeLine{01024\ }
\DoxyCodeLine{01025\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{typename}\ ...Rest>}
\DoxyCodeLine{01026\ \ \ \ \ \textcolor{keywordtype}{bool}\ get\_event\_from\_args(\ cl\_event\&\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}},\ \textcolor{keyword}{const}\ Rest\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}\ )\ \{}
\DoxyCodeLine{01027\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ get\_event\_from\_one\_arg(\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}},\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ )\ )\ \{}
\DoxyCodeLine{01028\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01029\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01030\ }
\DoxyCodeLine{01031\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ get\_event\_from\_args(\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}},\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}...\ );}
\DoxyCodeLine{01032\ \ \ \ \ \}}
\DoxyCodeLine{01033\ }
\DoxyCodeLine{01034\ \ \ \ \ \textcolor{keywordtype}{bool}\ get\_event\_from\_args(\ cl\_event\&\ )\ \{}
\DoxyCodeLine{01035\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01036\ \ \ \ \ \}}
\DoxyCodeLine{01037\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ //}}
\DoxyCodeLine{01038\ }
\DoxyCodeLine{01039\ \ \ \ \ \textcolor{keyword}{struct\ }finalize\_fn\ :\ tbb::internal::no\_assign\ \{}
\DoxyCodeLine{01040\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \string~finalize\_fn()\ \{\}}
\DoxyCodeLine{01041\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ operator()\ ()\ \{\}}
\DoxyCodeLine{01042\ \ \ \ \ \};}
\DoxyCodeLine{01043\ }
\DoxyCodeLine{01044\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Fn>}
\DoxyCodeLine{01045\ \ \ \ \ \textcolor{keyword}{struct\ }finalize\_fn\_leaf\ :\ \textcolor{keyword}{public}\ finalize\_fn\ \{}
\DoxyCodeLine{01046\ \ \ \ \ \ \ \ \ Fn\ my\_fn;}
\DoxyCodeLine{01047\ \ \ \ \ \ \ \ \ finalize\_fn\_leaf(Fn\ \mbox{\hyperlink{ittnotify__static_8h_aa700e831288a97563b89f420810375ed}{fn}})\ :\ my\_fn(\mbox{\hyperlink{ittnotify__static_8h_aa700e831288a97563b89f420810375ed}{fn}})\ \{\}}
\DoxyCodeLine{01048\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ operator()\ ()\ \_\_TBB\_override\ \{\ my\_fn();\ \}}
\DoxyCodeLine{01049\ \ \ \ \ \};}
\DoxyCodeLine{01050\ }
\DoxyCodeLine{01051\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ CL\_CALLBACK\ finalize\_callback(cl\_event,\ cl\_int\ event\_command\_exec\_status,\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}})\ \{}
\DoxyCodeLine{01052\ \ \ \ \ \ \ \ \ tbb::internal::suppress\_unused\_warning(event\_command\_exec\_status);}
\DoxyCodeLine{01053\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(event\_command\_exec\_status\ ==\ CL\_COMPLETE,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{01054\ }
\DoxyCodeLine{01055\ \ \ \ \ \ \ \ \ finalize\_fn\ *\ \textcolor{keyword}{const}\ fn\_ptr\ =\ \textcolor{keyword}{static\_cast<}finalize\_fn*\textcolor{keyword}{>}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}});}
\DoxyCodeLine{01056\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(fn\_ptr\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \textcolor{stringliteral}{"{}Invalid\ finalize\ function\ pointer"{}});}
\DoxyCodeLine{01057\ \ \ \ \ \ \ \ \ (*fn\_ptr)();}
\DoxyCodeLine{01058\ }
\DoxyCodeLine{01059\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Function\ pointer\ was\ created\ by\ 'new'\ \&\ this\ callback\ must\ be\ called\ once\ only}}
\DoxyCodeLine{01060\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ fn\_ptr;}
\DoxyCodeLine{01061\ \ \ \ \ \}}
\DoxyCodeLine{01062\ \textcolor{keyword}{public}:}
\DoxyCodeLine{01063\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FinalizeFn,\ \textcolor{keyword}{typename}\ ...Args>}
\DoxyCodeLine{01064\ \ \ \ \ \textcolor{keywordtype}{void}\ finalize(\ opencl\_device\ device,\ FinalizeFn\ \mbox{\hyperlink{ittnotify__static_8h_aa700e831288a97563b89f420810375ed}{fn}},\ Args\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}\ )\ \{}
\DoxyCodeLine{01065\ \ \ \ \ \ \ \ \ cl\_event\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}};}
\DoxyCodeLine{01066\ }
\DoxyCodeLine{01067\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ get\_event\_from\_args(\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}},\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}...\ )\ )\ \{}
\DoxyCodeLine{01068\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clSetEventCallback(\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}},\ CL\_COMPLETE,\ finalize\_callback,}
\DoxyCodeLine{01069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ finalize\_fn\_leaf<FinalizeFn>(\mbox{\hyperlink{ittnotify__static_8h_aa700e831288a97563b89f420810375ed}{fn}})\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ set\ a\ callback"{}}\ );}
\DoxyCodeLine{01070\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01071\ }
\DoxyCodeLine{01072\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clFlush(\ device.my\_cl\_command\_queue\ ),\ \textcolor{stringliteral}{"{}Failed\ to\ flush\ an\ OpenCL\ command\ queue"{}}\ );}
\DoxyCodeLine{01073\ \ \ \ \ \}}
\DoxyCodeLine{01074\ }
\DoxyCodeLine{01075\ \ \ \ \ \textcolor{keyword}{const}\ opencl\_device\_list\&\ devices()\ \{}
\DoxyCodeLine{01076\ \ \ \ \ \ \ \ \ std::call\_once(\ my\_once\_flag,\ \&opencl\_factory::init\_once,\ \textcolor{keyword}{this}\ );}
\DoxyCodeLine{01077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ my\_devices;}
\DoxyCodeLine{01078\ \ \ \ \ \}}
\DoxyCodeLine{01079\ }
\DoxyCodeLine{01080\ \textcolor{keyword}{private}:}
\DoxyCodeLine{01081\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_same\_context(\ opencl\_device::device\_id\_type\ \mbox{\hyperlink{modp__b64__data_8h_a248a83e479c6e2c404b65827fb26bbe2}{d1}},\ opencl\_device::device\_id\_type\ \mbox{\hyperlink{modp__b64__data_8h_ad7909fb96b596498e393856993bc8ab8}{d2}}\ )\ \{}
\DoxyCodeLine{01082\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{modp__b64__data_8h_a248a83e479c6e2c404b65827fb26bbe2}{d1}}\ !=\ opencl\_device::unknown\ \&\&\ \mbox{\hyperlink{modp__b64__data_8h_ad7909fb96b596498e393856993bc8ab8}{d2}}\ !=\ opencl\_device::unknown,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{01083\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Currently,\ factory\ supports\ only\ one\ context\ so\ if\ the\ both\ devices\ are\ not\ host\ it\ means\ the\ are\ in\ the\ same\ context.}}
\DoxyCodeLine{01084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{modp__b64__data_8h_a248a83e479c6e2c404b65827fb26bbe2}{d1}}\ !=\ opencl\_device::host\ \&\&\ \mbox{\hyperlink{modp__b64__data_8h_ad7909fb96b596498e393856993bc8ab8}{d2}}\ !=\ opencl\_device::host\ )}
\DoxyCodeLine{01085\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01086\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{modp__b64__data_8h_a248a83e479c6e2c404b65827fb26bbe2}{d1}}\ ==\ \mbox{\hyperlink{modp__b64__data_8h_ad7909fb96b596498e393856993bc8ab8}{d2}};}
\DoxyCodeLine{01087\ \ \ \ \ \}}
\DoxyCodeLine{01088\ \textcolor{keyword}{private}:}
\DoxyCodeLine{01089\ \ \ \ \ opencl\_factory(\ \textcolor{keyword}{const}\ opencl\_factory\&\ );}
\DoxyCodeLine{01090\ \ \ \ \ opencl\_factory\&\ operator=(\textcolor{keyword}{const}\ opencl\_factory\&);}
\DoxyCodeLine{01091\ }
\DoxyCodeLine{01092\ \ \ \ \ cl\_context\ \mbox{\hyperlink{classcontext}{context}}()\ \{}
\DoxyCodeLine{01093\ \ \ \ \ \ \ \ \ std::call\_once(\ my\_once\_flag,\ \&opencl\_factory::init\_once,\ \textcolor{keyword}{this}\ );}
\DoxyCodeLine{01094\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ my\_cl\_context;}
\DoxyCodeLine{01095\ \ \ \ \ \}}
\DoxyCodeLine{01096\ }
\DoxyCodeLine{01097\ \ \ \ \ \textcolor{keywordtype}{void}\ init\_once()\ \{}
\DoxyCodeLine{01098\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01099\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1spin__mutex_1_1scoped__lock}{tbb::spin\_mutex::scoped\_lock}}\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(my\_devices\_mutex);}
\DoxyCodeLine{01100\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!my\_devices.size())}
\DoxyCodeLine{01101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_devices\ =\ DeviceFilter()(\ opencl\_info::available\_devices()\ );}
\DoxyCodeLine{01102\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01103\ }
\DoxyCodeLine{01104\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(my\_devices.size()\ ?\ CL\_SUCCESS\ :\ CL\_INVALID\_DEVICE,\ \textcolor{stringliteral}{"{}No\ devices\ in\ the\ device\ list"{}});}
\DoxyCodeLine{01105\ \ \ \ \ \ \ \ \ cl\_platform\_id\ platform\_id\ =\ my\_devices.begin()-\/>platform\_id();}
\DoxyCodeLine{01106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (opencl\_device\_list::iterator\ it\ =\ ++my\_devices.begin();\ it\ !=\ my\_devices.end();\ ++it)}
\DoxyCodeLine{01107\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(it-\/>platform\_id()\ ==\ platform\_id\ ?\ CL\_SUCCESS\ :\ CL\_INVALID\_PLATFORM,\ \textcolor{stringliteral}{"{}All\ devices\ should\ be\ in\ the\ same\ platform"{}});}
\DoxyCodeLine{01108\ }
\DoxyCodeLine{01109\ \ \ \ \ \ \ \ \ std::vector<cl\_device\_id>\ cl\_device\_ids;}
\DoxyCodeLine{01110\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ =\ my\_devices.begin();\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ !=\ my\_devices.end();\ ++\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}})\ \{}
\DoxyCodeLine{01111\ \ \ \ \ \ \ \ \ \ \ \ \ cl\_device\_ids.push\_back((*d).my\_cl\_device\_id);}
\DoxyCodeLine{01112\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01113\ }
\DoxyCodeLine{01114\ \ \ \ \ \ \ \ \ cl\_context\_properties\ context\_properties[3]\ =\ \{\ CL\_CONTEXT\_PLATFORM,\ (cl\_context\_properties)platform\_id,\ (cl\_context\_properties)\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ \};}
\DoxyCodeLine{01115\ \ \ \ \ \ \ \ \ cl\_int\ err;}
\DoxyCodeLine{01116\ \ \ \ \ \ \ \ \ cl\_context\ ctx\ =\ clCreateContext(context\_properties,}
\DoxyCodeLine{01117\ \ \ \ \ \ \ \ \ \ \ \ \ (cl\_uint)cl\_device\_ids.size(),}
\DoxyCodeLine{01118\ \ \ \ \ \ \ \ \ \ \ \ \ cl\_device\_ids.data(),}
\DoxyCodeLine{01119\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \&err);}
\DoxyCodeLine{01120\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(err,\ \textcolor{stringliteral}{"{}Failed\ to\ create\ context"{}});}
\DoxyCodeLine{01121\ \ \ \ \ \ \ \ \ my\_cl\_context\ =\ ctx;}
\DoxyCodeLine{01122\ }
\DoxyCodeLine{01123\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ device\_counter\ =\ 0;}
\DoxyCodeLine{01124\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ =\ my\_devices.begin();\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ !=\ my\_devices.end();\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}++)\ \{}
\DoxyCodeLine{01125\ \ \ \ \ \ \ \ \ \ \ \ \ (*d).my\_device\_id\ =\ device\_counter++;}
\DoxyCodeLine{01126\ \ \ \ \ \ \ \ \ \ \ \ \ cl\_int\ err2;}
\DoxyCodeLine{01127\ \ \ \ \ \ \ \ \ \ \ \ \ cl\_command\_queue\ cq;}
\DoxyCodeLine{01128\ \textcolor{preprocessor}{\#if\ CL\_VERSION\_2\_0}}
\DoxyCodeLine{01129\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((*d).major\_version()\ >=\ 2)\ \{}
\DoxyCodeLine{01130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((*d).out\_of\_order\_exec\_mode\_on\_host\_present())\ \{}
\DoxyCodeLine{01131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cl\_queue\_properties\ props[]\ =\ \{\ CL\_QUEUE\_PROPERTIES,\ CL\_QUEUE\_OUT\_OF\_ORDER\_EXEC\_MODE\_ENABLE,\ 0\ \};}
\DoxyCodeLine{01132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cq\ =\ clCreateCommandQueueWithProperties(ctx,\ (*d).my\_cl\_device\_id,\ props,\ \&err2);}
\DoxyCodeLine{01133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cl\_queue\_properties\ props[]\ =\ \{\ 0\ \};}
\DoxyCodeLine{01135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cq\ =\ clCreateCommandQueueWithProperties(ctx,\ (*d).my\_cl\_device\_id,\ props,\ \&err2);}
\DoxyCodeLine{01136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01137\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01138\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01139\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cl\_command\_queue\_properties\ props\ =\ (*d).out\_of\_order\_exec\_mode\_on\_host\_present()\ ?\ CL\_QUEUE\_OUT\_OF\_ORDER\_EXEC\_MODE\_ENABLE\ :\ 0;}
\DoxyCodeLine{01141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Suppress\ "{}declared\ deprecated"{}\ warning\ for\ the\ next\ line.}}
\DoxyCodeLine{01142\ \textcolor{preprocessor}{\#if\ \_\_TBB\_GCC\_WARNING\_SUPPRESSION\_PRESENT}}
\DoxyCodeLine{01143\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ push}}
\DoxyCodeLine{01144\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ ignored\ "{}-\/Wdeprecated-\/declarations"{}}}
\DoxyCodeLine{01145\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01146\ \textcolor{preprocessor}{\#if\ \_MSC\_VER\ ||\ \_\_INTEL\_COMPILER}}
\DoxyCodeLine{01147\ \textcolor{preprocessor}{\#pragma\ warning(\ push\ )}}
\DoxyCodeLine{01148\ \textcolor{preprocessor}{\#if\ \_\_INTEL\_COMPILER}}
\DoxyCodeLine{01149\ \textcolor{preprocessor}{\#pragma\ warning\ (disable:\ 1478)}}
\DoxyCodeLine{01150\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01151\ \textcolor{preprocessor}{\#pragma\ warning\ (disable:\ 4996)}}
\DoxyCodeLine{01152\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01153\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cq\ =\ clCreateCommandQueue(ctx,\ (*d).my\_cl\_device\_id,\ props,\ \&err2);}
\DoxyCodeLine{01155\ \textcolor{preprocessor}{\#if\ \_MSC\_VER\ ||\ \_\_INTEL\_COMPILER}}
\DoxyCodeLine{01156\ \textcolor{preprocessor}{\#pragma\ warning(\ pop\ )}}
\DoxyCodeLine{01157\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01158\ \textcolor{preprocessor}{\#if\ \_\_TBB\_GCC\_WARNING\_SUPPRESSION\_PRESENT}}
\DoxyCodeLine{01159\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ pop}}
\DoxyCodeLine{01160\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01161\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01162\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(err2,\ \textcolor{stringliteral}{"{}Failed\ to\ create\ command\ queue"{}});}
\DoxyCodeLine{01163\ \ \ \ \ \ \ \ \ \ \ \ \ (*d).my\_cl\_command\_queue\ =\ cq;}
\DoxyCodeLine{01164\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01165\ \ \ \ \ \}}
\DoxyCodeLine{01166\ }
\DoxyCodeLine{01167\ \ \ \ \ std::once\_flag\ my\_once\_flag;}
\DoxyCodeLine{01168\ \ \ \ \ opencl\_device\_list\ my\_devices;}
\DoxyCodeLine{01169\ \ \ \ \ cl\_context\ my\_cl\_context;}
\DoxyCodeLine{01170\ }
\DoxyCodeLine{01171\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1spin__mutex}{tbb::spin\_mutex}}\ my\_devices\_mutex;}
\DoxyCodeLine{01172\ }
\DoxyCodeLine{01173\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{01174\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }opencl\_program;}
\DoxyCodeLine{01175\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{01176\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }opencl\_buffer\_impl;}
\DoxyCodeLine{01177\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{01178\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }opencl\_memory;}
\DoxyCodeLine{01179\ \};\ \textcolor{comment}{//\ class\ opencl\_factory}}
\DoxyCodeLine{01180\ }
\DoxyCodeLine{01181\ \textcolor{comment}{//\ TODO:\ consider\ this\ namespace\ as\ public\ API}}
\DoxyCodeLine{01182\ \textcolor{keyword}{namespace\ }opencl\_info\ \{}
\DoxyCodeLine{01183\ }
\DoxyCodeLine{01184\ \textcolor{comment}{//\ Default\ types}}
\DoxyCodeLine{01185\ }
\DoxyCodeLine{01186\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{01187\ \textcolor{keyword}{struct\ }default\_device\_selector\ \{}
\DoxyCodeLine{01188\ \ \ \ \ opencl\_device\ operator()(Factory\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\ \{}
\DoxyCodeLine{01189\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(!\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}.devices().empty(),\ \textcolor{stringliteral}{"{}No\ available\ devices"{}});}
\DoxyCodeLine{01190\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}.devices().\mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}}());}
\DoxyCodeLine{01191\ \ \ \ \ \}}
\DoxyCodeLine{01192\ \};}
\DoxyCodeLine{01193\ }
\DoxyCodeLine{01194\ \textcolor{keyword}{struct\ }default\_device\_filter\ \{}
\DoxyCodeLine{01195\ \ \ \ \ opencl\_device\_list\ operator()(\textcolor{keyword}{const}\ opencl\_device\_list\ \&devices)\ \{}
\DoxyCodeLine{01196\ \ \ \ \ \ \ \ \ opencl\_device\_list\ dl;}
\DoxyCodeLine{01197\ \ \ \ \ \ \ \ \ cl\_platform\_id\ platform\_id\ =\ devices.begin()-\/>platform\_id();}
\DoxyCodeLine{01198\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (opencl\_device\_list::const\_iterator\ it\ =\ devices.cbegin();\ it\ !=\ devices.cend();\ ++it)\ \{}
\DoxyCodeLine{01199\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it-\/>platform\_id()\ ==\ platform\_id)\ \{}
\DoxyCodeLine{01200\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dl.add(*it);}
\DoxyCodeLine{01201\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01202\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01203\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ dl;}
\DoxyCodeLine{01204\ \ \ \ \ \}}
\DoxyCodeLine{01205\ \};}
\DoxyCodeLine{01206\ }
\DoxyCodeLine{01207\ \textcolor{keyword}{class\ }default\_opencl\_factory\ :\ \textcolor{keyword}{public}\ opencl\_factory\ <\ default\_device\_filter\ >,\ tbb::internal::no\_copy\ \{}
\DoxyCodeLine{01208\ \textcolor{keyword}{public}:}
\DoxyCodeLine{01209\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{using\ }async\_msg\_type\ =\ opencl\_async\_msg<T,\ default\_opencl\_factory>;}
\DoxyCodeLine{01210\ }
\DoxyCodeLine{01211\ \ \ \ \ \textcolor{keyword}{friend}\ default\_opencl\_factory\&\ default\_factory();}
\DoxyCodeLine{01212\ }
\DoxyCodeLine{01213\ \textcolor{keyword}{private}:}
\DoxyCodeLine{01214\ \ \ \ \ default\_opencl\_factory()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{01215\ \};}
\DoxyCodeLine{01216\ }
\DoxyCodeLine{01217\ \textcolor{keyword}{inline}\ default\_opencl\_factory\&\ default\_factory()\ \{}
\DoxyCodeLine{01218\ \ \ \ \ \textcolor{keyword}{static}\ default\_opencl\_factory\ default\_factory;}
\DoxyCodeLine{01219\ \ \ \ \ \textcolor{keywordflow}{return}\ default\_factory;}
\DoxyCodeLine{01220\ \}}
\DoxyCodeLine{01221\ }
\DoxyCodeLine{01222\ \}\ \textcolor{comment}{//\ namespace\ opencl\_info}}
\DoxyCodeLine{01223\ }
\DoxyCodeLine{01224\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Factory>}
\DoxyCodeLine{01225\ opencl\_buffer<T,\ Factory>::opencl\_buffer(\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ )\ :\ my\_impl(\ std::make\_shared<impl\_type>(\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}*\textcolor{keyword}{sizeof}(\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}),\ opencl\_info::default\_factory()\ )\ )\ \{\}}
\DoxyCodeLine{01226\ }
\DoxyCodeLine{01227\ }
\DoxyCodeLine{01228\ \textcolor{keyword}{enum\ class}\ opencl\_program\_type\ \{}
\DoxyCodeLine{01229\ \ \ \ \ SOURCE,}
\DoxyCodeLine{01230\ \ \ \ \ PRECOMPILED,}
\DoxyCodeLine{01231\ \ \ \ \ SPIR}
\DoxyCodeLine{01232\ \};}
\DoxyCodeLine{01233\ }
\DoxyCodeLine{01234\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Factory\ =\ opencl\_info::default\_opencl\_factory>}
\DoxyCodeLine{01235\ \textcolor{keyword}{class\ }\mbox{\hyperlink{flow__graph_8h_a32d0d5beeb9b0911d032c1d3db7a72eb}{\_\_TBB\_DEPRECATED\_IN\_VERBOSE\_MODE}}\ opencl\_program\ :\ tbb::internal::no\_assign\ \{}
\DoxyCodeLine{01236\ \textcolor{keyword}{public}:}
\DoxyCodeLine{01237\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ Factory::kernel\_type\ kernel\_type;}
\DoxyCodeLine{01238\ }
\DoxyCodeLine{01239\ \ \ \ \ opencl\_program(\ Factory\&\ factory,\ opencl\_program\_type\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{type}},\ \textcolor{keyword}{const}\ std::string\&\ program\_name\ )\ :\ my\_factory(\ factory\ ),\ \mbox{\hyperlink{time__split__node_8cpp_ac7d42ca9867b385e4bd85e57929bd9be}{my\_type}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{type}})\ ,\ my\_arg\_str(\ program\_name)\ \{\}}
\DoxyCodeLine{01240\ \ \ \ \ opencl\_program(\ Factory\&\ factory,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ program\_name\ )\ :\ opencl\_program(\ factory,\ std::string(\ program\_name\ )\ )\ \{\}}
\DoxyCodeLine{01241\ \ \ \ \ opencl\_program(\ Factory\&\ factory,\ \textcolor{keyword}{const}\ std::string\&\ program\_name\ )\ :\ opencl\_program(\ factory,\ opencl\_program\_type::SOURCE,\ program\_name\ )\ \{\}}
\DoxyCodeLine{01242\ }
\DoxyCodeLine{01243\ \ \ \ \ opencl\_program(\ opencl\_program\_type\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{type}},\ \textcolor{keyword}{const}\ std::string\&\ program\_name\ )\ :\ opencl\_program(\ opencl\_info::default\_factory(),\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{type}},\ program\_name\ )\ \{\}}
\DoxyCodeLine{01244\ \ \ \ \ opencl\_program(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ program\_name\ )\ :\ opencl\_program(\ opencl\_info::default\_factory(),\ program\_name\ )\ \{\}}
\DoxyCodeLine{01245\ \ \ \ \ opencl\_program(\ \textcolor{keyword}{const}\ std::string\&\ program\_name\ )\ :\ opencl\_program(\ opencl\_info::default\_factory(),\ program\_name\ )\ \{\}}
\DoxyCodeLine{01246\ \ \ \ \ opencl\_program(\ opencl\_program\_type\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{type}}\ )\ :\ opencl\_program(\ opencl\_info::default\_factory(),\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{type}}\ )\ \{\}}
\DoxyCodeLine{01247\ }
\DoxyCodeLine{01248\ \ \ \ \ opencl\_program(\ \textcolor{keyword}{const}\ opencl\_program\ \&\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}\ )\ :\ my\_factory(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_factory\ ),\ \mbox{\hyperlink{time__split__node_8cpp_ac7d42ca9867b385e4bd85e57929bd9be}{my\_type}}(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.type\ ),\ my\_arg\_str(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_arg\_str\ ),\ my\_cl\_program(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_cl\_program\ )\ \{}
\DoxyCodeLine{01249\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ my\_do\_once\_flag\ to\ the\ called\ state.}}
\DoxyCodeLine{01250\ \ \ \ \ \ \ \ \ std::call\_once(\ my\_do\_once\_flag,\ []()\{\}\ );}
\DoxyCodeLine{01251\ \ \ \ \ \}}
\DoxyCodeLine{01252\ }
\DoxyCodeLine{01253\ \ \ \ \ kernel\_type\ get\_kernel(\ \textcolor{keyword}{const}\ std::string\&\ k\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{01254\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ kernel\_type(\ get\_cl\_kernel(k),\ my\_factory\ );}
\DoxyCodeLine{01255\ \ \ \ \ \}}
\DoxyCodeLine{01256\ }
\DoxyCodeLine{01257\ \textcolor{keyword}{private}:}
\DoxyCodeLine{01258\ \ \ \ \ opencl\_program(\ Factory\&\ factory,\ cl\_program\ program\ )\ :\ my\_factory(\ factory\ ),\ my\_cl\_program(\ program\ )\ \{}
\DoxyCodeLine{01259\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ my\_do\_once\_flag\ to\ the\ called\ state.}}
\DoxyCodeLine{01260\ \ \ \ \ \ \ \ \ std::call\_once(\ my\_do\_once\_flag,\ []()\{\}\ );}
\DoxyCodeLine{01261\ \ \ \ \ \}}
\DoxyCodeLine{01262\ }
\DoxyCodeLine{01263\ \ \ \ \ cl\_kernel\ get\_cl\_kernel(\ \textcolor{keyword}{const}\ std::string\&\ k\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{01264\ \ \ \ \ \ \ \ \ std::call\_once(\ my\_do\_once\_flag,\ [\textcolor{keyword}{this},\ \&k]()\{\ this-\/>\mbox{\hyperlink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init}}(\ k\ );\ \}\ );}
\DoxyCodeLine{01265\ \ \ \ \ \ \ \ \ cl\_int\ err;}
\DoxyCodeLine{01266\ \ \ \ \ \ \ \ \ cl\_kernel\ kernel\ =\ clCreateKernel(\ my\_cl\_program,\ k.c\_str(),\ \&err\ );}
\DoxyCodeLine{01267\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ err,\ std::string(\ \textcolor{stringliteral}{"{}Failed\ to\ create\ kernel:\ "{}}\ )\ +\ k\ );}
\DoxyCodeLine{01268\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ kernel;}
\DoxyCodeLine{01269\ \ \ \ \ \}}
\DoxyCodeLine{01270\ }
\DoxyCodeLine{01271\ \ \ \ \ \textcolor{keyword}{class\ }file\_reader\ \{}
\DoxyCodeLine{01272\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01273\ \ \ \ \ \ \ \ \ file\_reader(\ \textcolor{keyword}{const}\ std::string\&\ filepath\ )\ \{}
\DoxyCodeLine{01274\ \ \ \ \ \ \ \ \ \ \ \ \ std::ifstream\ file\_descriptor(\ filepath,\ std::ifstream::binary\ );}
\DoxyCodeLine{01275\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !file\_descriptor.is\_open()\ )\ \{}
\DoxyCodeLine{01276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ str\ =\ std::string(\ \textcolor{stringliteral}{"{}Could\ not\ open\ file:\ "{}}\ )\ +\ filepath;}
\DoxyCodeLine{01277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ str\ <<\ std::endl;}
\DoxyCodeLine{01278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ str;}
\DoxyCodeLine{01279\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01280\ \ \ \ \ \ \ \ \ \ \ \ \ file\_descriptor.seekg(\ 0,\ file\_descriptor.end\ );}
\DoxyCodeLine{01281\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a8d1f7eae43fb4349a6a6f3f0c7eb7e0b}{length}}\ =\ size\_t(\ file\_descriptor.tellg()\ );}
\DoxyCodeLine{01282\ \ \ \ \ \ \ \ \ \ \ \ \ file\_descriptor.seekg(\ 0,\ file\_descriptor.beg\ );}
\DoxyCodeLine{01283\ \ \ \ \ \ \ \ \ \ \ \ \ my\_content.resize(\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a8d1f7eae43fb4349a6a6f3f0c7eb7e0b}{length}}\ );}
\DoxyCodeLine{01284\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}}\ =\ \&*my\_content.begin();}
\DoxyCodeLine{01285\ \ \ \ \ \ \ \ \ \ \ \ \ file\_descriptor.read(\ \mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a8d1f7eae43fb4349a6a6f3f0c7eb7e0b}{length}}\ );}
\DoxyCodeLine{01286\ \ \ \ \ \ \ \ \ \ \ \ \ file\_descriptor.close();}
\DoxyCodeLine{01287\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01288\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ content()\ \{\ \textcolor{keywordflow}{return}\ \&*my\_content.cbegin();\ \}}
\DoxyCodeLine{01289\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a8d1f7eae43fb4349a6a6f3f0c7eb7e0b}{length}}()\ \{\ \textcolor{keywordflow}{return}\ my\_content.length();\ \}}
\DoxyCodeLine{01290\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{01291\ \ \ \ \ \ \ \ \ std::string\ my\_content;}
\DoxyCodeLine{01292\ \ \ \ \ \};}
\DoxyCodeLine{01293\ }
\DoxyCodeLine{01294\ \ \ \ \ \textcolor{keyword}{class\ }opencl\_program\_builder\ \{}
\DoxyCodeLine{01295\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01296\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}\ (CL\_CALLBACK\ *cl\_callback\_type)(cl\_program,\ \textcolor{keywordtype}{void}*);}
\DoxyCodeLine{01297\ \ \ \ \ \ \ \ \ opencl\_program\_builder(\ Factory\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}},\ cl\_program\ program,}
\DoxyCodeLine{01298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cl\_uint\ num\_devices,\ cl\_device\_id*\ device\_list,}
\DoxyCodeLine{01299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{options_8c_a92a8d2cc6467e45662af606615851df8}{options}},\ cl\_callback\_type\ \mbox{\hyperlink{external_2spine-runtimes_2spine-sfml_2c_2example_2main_8cpp_a2f27b7fc84a39cace84d90f62a8d4c8e}{callback}},}
\DoxyCodeLine{01300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ user\_data\ )\ \{}
\DoxyCodeLine{01301\ \ \ \ \ \ \ \ \ \ \ \ \ cl\_int\ err\ =\ clBuildProgram(\ program,\ num\_devices,\ device\_list,\ \mbox{\hyperlink{options_8c_a92a8d2cc6467e45662af606615851df8}{options}},}
\DoxyCodeLine{01302\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{external_2spine-runtimes_2spine-sfml_2c_2example_2main_8cpp_a2f27b7fc84a39cace84d90f62a8d4c8e}{callback}},\ user\_data\ );}
\DoxyCodeLine{01303\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ err\ ==\ CL\_SUCCESS\ )}
\DoxyCodeLine{01304\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01305\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ str\ =\ std::string(\ \textcolor{stringliteral}{"{}Failed\ to\ build\ program:\ "{}}\ )\ +\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}};}
\DoxyCodeLine{01306\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ err\ ==\ CL\_BUILD\_PROGRAM\_FAILURE\ )\ \{}
\DoxyCodeLine{01307\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ opencl\_device\_list\ \&devices\ =\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}.devices();}
\DoxyCodeLine{01308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ =\ devices.begin();\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ !=\ devices.end();\ ++\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ )\ \{}
\DoxyCodeLine{01309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \textcolor{stringliteral}{"{}Build\ log\ for\ device:\ "{}}\ <<\ (*d).name()\ <<\ std::endl;}
\DoxyCodeLine{01310\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ log\_size;}
\DoxyCodeLine{01311\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cl\_int\ query\_err\ =\ clGetProgramBuildInfo(}
\DoxyCodeLine{01312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ program,\ (*d).my\_cl\_device\_id,\ CL\_PROGRAM\_BUILD\_LOG,\ 0,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},}
\DoxyCodeLine{01313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&log\_size\ );}
\DoxyCodeLine{01314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ query\_err,\ \textcolor{stringliteral}{"{}Failed\ to\ get\ build\ log\ size"{}}\ );}
\DoxyCodeLine{01315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ log\_size\ )\ \{}
\DoxyCodeLine{01316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<char>\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}};}
\DoxyCodeLine{01317\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}}.resize(\ log\_size\ );}
\DoxyCodeLine{01318\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ query\_err\ =\ clGetProgramBuildInfo(}
\DoxyCodeLine{01319\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ program,\ (*d).my\_cl\_device\_id,\ CL\_PROGRAM\_BUILD\_LOG,}
\DoxyCodeLine{01320\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}}.size(),\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}}.data(),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{01321\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ query\_err,\ \textcolor{stringliteral}{"{}Failed\ to\ get\ build\ output"{}}\ );}
\DoxyCodeLine{01322\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}}.data()\ <<\ std::endl;}
\DoxyCodeLine{01323\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01324\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \textcolor{stringliteral}{"{}No\ build\ log\ available"{}}\ <<\ std::endl;}
\DoxyCodeLine{01325\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01326\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01327\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01328\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ err,\ str\ );}
\DoxyCodeLine{01329\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01330\ \ \ \ \ \};}
\DoxyCodeLine{01331\ }
\DoxyCodeLine{01332\ \ \ \ \ \textcolor{keyword}{class\ }opencl\_device\_filter\ \{}
\DoxyCodeLine{01333\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01334\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Filter>}
\DoxyCodeLine{01335\ \ \ \ \ \ \ \ \ opencl\_device\_filter(\ cl\_uint\&\ num\_devices,\ cl\_device\_id*\ device\_list,}
\DoxyCodeLine{01336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_filter}{Filter}}\ \mbox{\hyperlink{spine-cocos2dx_8cpp_ae976ff2ddeccb72b53e8f53775044589}{filter}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ message\ )\ \{}
\DoxyCodeLine{01337\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ cl\_uint\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ num\_devices;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ )}
\DoxyCodeLine{01338\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{spine-cocos2dx_8cpp_ae976ff2ddeccb72b53e8f53775044589}{filter}}(device\_list[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}])\ )\ \{}
\DoxyCodeLine{01339\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device\_list[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}-\/-\/]\ =\ device\_list[-\/-\/num\_devices];}
\DoxyCodeLine{01340\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01341\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !num\_devices\ )}
\DoxyCodeLine{01342\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ CL\_DEVICE\_NOT\_AVAILABLE,\ message\ );}
\DoxyCodeLine{01343\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01344\ \ \ \ \ \};}
\DoxyCodeLine{01345\ }
\DoxyCodeLine{01346\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init}}(\ \textcolor{keyword}{const}\ std::string\&\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{01347\ \ \ \ \ \ \ \ \ cl\_uint\ num\_devices;}
\DoxyCodeLine{01348\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clGetContextInfo(\ my\_factory.context(),\ CL\_CONTEXT\_NUM\_DEVICES,\ \textcolor{keyword}{sizeof}(\ num\_devices\ ),\ \&num\_devices,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ ),}
\DoxyCodeLine{01349\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Failed\ to\ get\ OpenCL\ context\ info"{}}\ );}
\DoxyCodeLine{01350\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !num\_devices\ )}
\DoxyCodeLine{01351\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ CL\_DEVICE\_NOT\_FOUND,\ \textcolor{stringliteral}{"{}No\ supported\ devices\ found"{}}\ );}
\DoxyCodeLine{01352\ \ \ \ \ \ \ \ \ cl\_device\_id\ *device\_list\ =\ (cl\_device\_id\ *)alloca(\ num\_devices*\textcolor{keyword}{sizeof}(\ cl\_device\_id\ )\ );}
\DoxyCodeLine{01353\ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ clGetContextInfo(\ my\_factory.context(),\ CL\_CONTEXT\_DEVICES,\ num\_devices*\textcolor{keyword}{sizeof}(\ cl\_device\_id\ ),\ device\_list,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ ),}
\DoxyCodeLine{01354\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Failed\ to\ get\ OpenCL\ context\ info"{}}\ );}
\DoxyCodeLine{01355\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{options_8c_a92a8d2cc6467e45662af606615851df8}{options}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{01356\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\ \mbox{\hyperlink{structmy__type}{my\_type}}\ )\ \{}
\DoxyCodeLine{01357\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ opencl\_program\_type::SOURCE:\ \{}
\DoxyCodeLine{01358\ \ \ \ \ \ \ \ \ \ \ \ \ file\_reader\ fr(\ my\_arg\_str\ );}
\DoxyCodeLine{01359\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}[]\ =\ \{\ fr.content()\ \};}
\DoxyCodeLine{01360\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ l[]\ =\ \{\ fr.length()\ \};}
\DoxyCodeLine{01361\ \ \ \ \ \ \ \ \ \ \ \ \ cl\_int\ err;}
\DoxyCodeLine{01362\ \ \ \ \ \ \ \ \ \ \ \ \ my\_cl\_program\ =\ clCreateProgramWithSource(\ my\_factory.context(),\ 1,\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}},\ l,\ \&err\ );}
\DoxyCodeLine{01363\ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ err,\ std::string(\ \textcolor{stringliteral}{"{}Failed\ to\ create\ program:\ "{}}\ )\ +\ my\_arg\_str\ );}
\DoxyCodeLine{01364\ \ \ \ \ \ \ \ \ \ \ \ \ opencl\_device\_filter(}
\DoxyCodeLine{01365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ num\_devices,\ device\_list,}
\DoxyCodeLine{01366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [](\ \textcolor{keyword}{const}\ opencl\_device\&\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ )\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{01367\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ !\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.compiler\_available()\ ||\ !\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.linker\_available();}
\DoxyCodeLine{01368\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},\ \textcolor{stringliteral}{"{}No\ one\ device\ supports\ building\ program\ from\ sources"{}}\ );}
\DoxyCodeLine{01369\ \ \ \ \ \ \ \ \ \ \ \ \ opencl\_program\_builder(}
\DoxyCodeLine{01370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_factory,\ my\_arg\_str,\ my\_cl\_program,\ num\_devices,\ device\_list,}
\DoxyCodeLine{01371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{options_8c_a92a8d2cc6467e45662af606615851df8}{options}},\ \textcolor{comment}{/*callback*/}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \textcolor{comment}{/*user\ data*/}\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{01372\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01373\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01374\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ opencl\_program\_type::SPIR:}
\DoxyCodeLine{01375\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{options_8c_a92a8d2cc6467e45662af606615851df8}{options}}\ =\ \textcolor{stringliteral}{"{}-\/x\ spir"{}};}
\DoxyCodeLine{01376\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ opencl\_program\_type::PRECOMPILED:\ \{}
\DoxyCodeLine{01377\ \ \ \ \ \ \ \ \ \ \ \ \ file\_reader\ fr(\ my\_arg\_str\ );}
\DoxyCodeLine{01378\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<const\ unsigned\ char*>\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}(}
\DoxyCodeLine{01379\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ num\_devices,\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*\textcolor{keyword}{>}(fr.content())\ );}
\DoxyCodeLine{01380\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<size\_t>\ l(\ num\_devices,\ fr.length()\ );}
\DoxyCodeLine{01381\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<cl\_int>\ bin\_statuses(\ num\_devices,\ -\/1\ );}
\DoxyCodeLine{01382\ \ \ \ \ \ \ \ \ \ \ \ \ cl\_int\ err;}
\DoxyCodeLine{01383\ \ \ \ \ \ \ \ \ \ \ \ \ my\_cl\_program\ =\ clCreateProgramWithBinary(\ my\_factory.context(),\ num\_devices,}
\DoxyCodeLine{01384\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device\_list,\ l.data(),\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}.data(),}
\DoxyCodeLine{01385\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bin\_statuses.data(),\ \&err\ );}
\DoxyCodeLine{01386\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ err\ !=\ CL\_SUCCESS\ )\ \{}
\DoxyCodeLine{01387\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ statuses\_str;}
\DoxyCodeLine{01388\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ st\ =\ bin\_statuses.begin();\ st\ !=\ bin\_statuses.end();\ ++st)\ \{}
\DoxyCodeLine{01389\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ statuses\_str\ +=\ std::to\_string((*st));}
\DoxyCodeLine{01390\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01391\ }
\DoxyCodeLine{01392\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enforce\_cl\_retcode(\ err,\ std::string(\ \textcolor{stringliteral}{"{}Failed\ to\ create\ program,\ error\ "{}}\ +\ std::to\_string(\ err\ )\ +\ \textcolor{stringliteral}{"{}\ :\ "{}}\ )\ +\ my\_arg\_str\ +}
\DoxyCodeLine{01393\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string(\ \textcolor{stringliteral}{"{},\ binary\_statuses\ =\ "{}}\ )\ +\ statuses\_str\ );}
\DoxyCodeLine{01394\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01395\ \ \ \ \ \ \ \ \ \ \ \ \ opencl\_program\_builder(}
\DoxyCodeLine{01396\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_factory,\ my\_arg\_str,\ my\_cl\_program,\ num\_devices,\ device\_list,}
\DoxyCodeLine{01397\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{options_8c_a92a8d2cc6467e45662af606615851df8}{options}},\ \textcolor{comment}{/*callback*/}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \textcolor{comment}{/*user\ data*/}\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{01398\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01399\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01400\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01401\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}Unsupported\ program\ type"{}}\ );}
\DoxyCodeLine{01402\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01403\ \ \ \ \ \}}
\DoxyCodeLine{01404\ }
\DoxyCodeLine{01405\ \ \ \ \ Factory\&\ my\_factory;}
\DoxyCodeLine{01406\ \ \ \ \ opencl\_program\_type\ \mbox{\hyperlink{structmy__type}{my\_type}};}
\DoxyCodeLine{01407\ \ \ \ \ std::string\ my\_arg\_str;}
\DoxyCodeLine{01408\ \ \ \ \ \textcolor{keyword}{mutable}\ cl\_program\ my\_cl\_program;}
\DoxyCodeLine{01409\ \ \ \ \ \textcolor{keyword}{mutable}\ std::once\_flag\ my\_do\_once\_flag;}
\DoxyCodeLine{01410\ }
\DoxyCodeLine{01411\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ DeviceFilter>}
\DoxyCodeLine{01412\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }opencl\_factory;}
\DoxyCodeLine{01413\ }
\DoxyCodeLine{01414\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }Factory::kernel;}
\DoxyCodeLine{01415\ \};}
\DoxyCodeLine{01416\ }
\DoxyCodeLine{01417\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{01418\ \textcolor{keyword}{class\ }\mbox{\hyperlink{flow__graph_8h_a32d0d5beeb9b0911d032c1d3db7a72eb}{\_\_TBB\_DEPRECATED\_IN\_VERBOSE\_MODE}}\ opencl\_node;}
\DoxyCodeLine{01419\ }
\DoxyCodeLine{01420\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ JP,\ \textcolor{keyword}{typename}\ Factory,\ \textcolor{keyword}{typename}...\ Ports>}
\DoxyCodeLine{01421\ \textcolor{keyword}{class\ }\mbox{\hyperlink{flow__graph_8h_a32d0d5beeb9b0911d032c1d3db7a72eb}{\_\_TBB\_DEPRECATED\_IN\_VERBOSE\_MODE}}}
\DoxyCodeLine{01422\ opencl\_node<\ \mbox{\hyperlink{classtuple}{tuple}}<Ports...>,\ JP,\ Factory\ >\ :\ \textcolor{keyword}{public}\ streaming\_node<\ tuple<Ports...>,\ JP,\ Factory\ >\ \{}
\DoxyCodeLine{01423\ \ \ \ \ \textcolor{keyword}{typedef}\ streaming\_node\ <\ \mbox{\hyperlink{classtuple}{tuple}}<Ports...>,\ JP,\ Factory\ >\ base\_type;}
\DoxyCodeLine{01424\ \textcolor{keyword}{public}:}
\DoxyCodeLine{01425\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ base\_type::kernel\_type\ kernel\_type;}
\DoxyCodeLine{01426\ }
\DoxyCodeLine{01427\ \ \ \ \ opencl\_node(\ graph\ \&\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ \textcolor{keyword}{const}\ kernel\_type\&\ kernel\ )}
\DoxyCodeLine{01428\ \ \ \ \ \ \ \ \ :\ base\_type(\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ kernel,\ opencl\_info::default\_device\_selector<\ opencl\_info::default\_opencl\_factory\ >(),\ opencl\_info::default\_factory()\ )}
\DoxyCodeLine{01429\ \ \ \ \ \{}
\DoxyCodeLine{01430\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_abd0a2b9e66c7b2be0819499f0a241d8f}{tbb::internal::fgt\_multiinput\_multioutput\_node}}(\ \mbox{\hyperlink{__flow__graph__trace__impl_8h_ac482e670d8c26c4e0550830360b7adc7}{CODEPTR}}(),\ tbb::internal::FLOW\_OPENCL\_NODE,\ \textcolor{keyword}{this},\ \&this-\/>my\_graph\ );}
\DoxyCodeLine{01431\ \ \ \ \ \}}
\DoxyCodeLine{01432\ }
\DoxyCodeLine{01433\ \ \ \ \ opencl\_node(\ graph\ \&\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ \textcolor{keyword}{const}\ kernel\_type\&\ kernel,\ Factory\ \&\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )}
\DoxyCodeLine{01434\ \ \ \ \ \ \ \ \ :\ base\_type(\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ kernel,\ opencl\_info::default\_device\_selector\ <Factory\ >(),\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )}
\DoxyCodeLine{01435\ \ \ \ \ \{}
\DoxyCodeLine{01436\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_abd0a2b9e66c7b2be0819499f0a241d8f}{tbb::internal::fgt\_multiinput\_multioutput\_node}}(\ \mbox{\hyperlink{__flow__graph__trace__impl_8h_ac482e670d8c26c4e0550830360b7adc7}{CODEPTR}}(),\ tbb::internal::FLOW\_OPENCL\_NODE,\ \textcolor{keyword}{this},\ \&this-\/>my\_graph\ );}
\DoxyCodeLine{01437\ \ \ \ \ \}}
\DoxyCodeLine{01438\ }
\DoxyCodeLine{01439\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ DeviceSelector>}
\DoxyCodeLine{01440\ \ \ \ \ opencl\_node(\ graph\ \&\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ \textcolor{keyword}{const}\ kernel\_type\&\ kernel,\ DeviceSelector\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}},\ Factory\ \&\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})}
\DoxyCodeLine{01441\ \ \ \ \ \ \ \ \ :\ base\_type(\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ kernel,\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}},\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})}
\DoxyCodeLine{01442\ \ \ \ \ \{}
\DoxyCodeLine{01443\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_abd0a2b9e66c7b2be0819499f0a241d8f}{tbb::internal::fgt\_multiinput\_multioutput\_node}}(\ \mbox{\hyperlink{__flow__graph__trace__impl_8h_ac482e670d8c26c4e0550830360b7adc7}{CODEPTR}}(),\ tbb::internal::FLOW\_OPENCL\_NODE,\ \textcolor{keyword}{this},\ \&this-\/>my\_graph\ );}
\DoxyCodeLine{01444\ \ \ \ \ \}}
\DoxyCodeLine{01445\ \};}
\DoxyCodeLine{01446\ }
\DoxyCodeLine{01447\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ JP,\ \textcolor{keyword}{typename}...\ Ports>}
\DoxyCodeLine{01448\ \textcolor{keyword}{class\ }\mbox{\hyperlink{flow__graph_8h_a32d0d5beeb9b0911d032c1d3db7a72eb}{\_\_TBB\_DEPRECATED\_IN\_VERBOSE\_MODE}}}
\DoxyCodeLine{01449\ opencl\_node<\ \mbox{\hyperlink{classtuple}{tuple}}<Ports...>,\ JP\ >\ :\ \textcolor{keyword}{public}\ opencl\_node\ <\ tuple<Ports...>,\ JP,\ opencl\_info::default\_opencl\_factory\ >\ \{}
\DoxyCodeLine{01450\ \ \ \ \ \textcolor{keyword}{typedef}\ opencl\_node\ <\ \mbox{\hyperlink{classtuple}{tuple}}<Ports...>,\ JP,\ opencl\_info::default\_opencl\_factory\ >\ base\_type;}
\DoxyCodeLine{01451\ \textcolor{keyword}{public}:}
\DoxyCodeLine{01452\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ base\_type::kernel\_type\ kernel\_type;}
\DoxyCodeLine{01453\ }
\DoxyCodeLine{01454\ \ \ \ \ opencl\_node(\ graph\ \&\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ \textcolor{keyword}{const}\ kernel\_type\&\ kernel\ )}
\DoxyCodeLine{01455\ \ \ \ \ \ \ \ \ :\ base\_type(\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ kernel,\ opencl\_info::default\_device\_selector<\ opencl\_info::default\_opencl\_factory\ >(),\ opencl\_info::default\_factory()\ )}
\DoxyCodeLine{01456\ \ \ \ \ \{\}}
\DoxyCodeLine{01457\ }
\DoxyCodeLine{01458\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ DeviceSelector>}
\DoxyCodeLine{01459\ \ \ \ \ opencl\_node(\ graph\ \&\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ \textcolor{keyword}{const}\ kernel\_type\&\ kernel,\ DeviceSelector\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ )}
\DoxyCodeLine{01460\ \ \ \ \ \ \ \ \ :\ base\_type(\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ kernel,\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}},\ opencl\_info::default\_factory()\ )}
\DoxyCodeLine{01461\ \ \ \ \ \{\}}
\DoxyCodeLine{01462\ \};}
\DoxyCodeLine{01463\ }
\DoxyCodeLine{01464\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...\ Ports>}
\DoxyCodeLine{01465\ \textcolor{keyword}{class\ }\mbox{\hyperlink{flow__graph_8h_a32d0d5beeb9b0911d032c1d3db7a72eb}{\_\_TBB\_DEPRECATED\_IN\_VERBOSE\_MODE}}}
\DoxyCodeLine{01466\ opencl\_node<\ \mbox{\hyperlink{classtuple}{tuple}}<Ports...>\ >\ :\ \textcolor{keyword}{public}\ opencl\_node\ <\ tuple<Ports...>,\ queueing,\ opencl\_info::default\_opencl\_factory\ >\ \{}
\DoxyCodeLine{01467\ \ \ \ \ \textcolor{keyword}{typedef}\ opencl\_node\ <\ \mbox{\hyperlink{classtuple}{tuple}}<Ports...>,\ queueing,\ opencl\_info::default\_opencl\_factory\ >\ base\_type;}
\DoxyCodeLine{01468\ \textcolor{keyword}{public}:}
\DoxyCodeLine{01469\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ base\_type::kernel\_type\ kernel\_type;}
\DoxyCodeLine{01470\ }
\DoxyCodeLine{01471\ \ \ \ \ opencl\_node(\ graph\ \&\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ \textcolor{keyword}{const}\ kernel\_type\&\ kernel\ )}
\DoxyCodeLine{01472\ \ \ \ \ \ \ \ \ :\ base\_type(\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ kernel,\ opencl\_info::default\_device\_selector<\ opencl\_info::default\_opencl\_factory\ >(),\ opencl\_info::default\_factory()\ )}
\DoxyCodeLine{01473\ \ \ \ \ \{\}}
\DoxyCodeLine{01474\ }
\DoxyCodeLine{01475\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ DeviceSelector>}
\DoxyCodeLine{01476\ \ \ \ \ opencl\_node(\ graph\ \&\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ \textcolor{keyword}{const}\ kernel\_type\&\ kernel,\ DeviceSelector\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ )}
\DoxyCodeLine{01477\ \ \ \ \ \ \ \ \ :\ base\_type(\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ kernel,\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}},\ opencl\_info::default\_factory()\ )}
\DoxyCodeLine{01478\ \ \ \ \ \{\}}
\DoxyCodeLine{01479\ \};}
\DoxyCodeLine{01480\ }
\DoxyCodeLine{01481\ \}\ \textcolor{comment}{//\ namespace\ interfaceX}}
\DoxyCodeLine{01482\ }
\DoxyCodeLine{01483\ \textcolor{keyword}{using\ }interface11::opencl\_node;}
\DoxyCodeLine{01484\ \textcolor{keyword}{using\ }interface11::read\_only;}
\DoxyCodeLine{01485\ \textcolor{keyword}{using\ }interface11::read\_write;}
\DoxyCodeLine{01486\ \textcolor{keyword}{using\ }interface11::write\_only;}
\DoxyCodeLine{01487\ \textcolor{keyword}{using\ }interface11::opencl\_buffer;}
\DoxyCodeLine{01488\ \textcolor{keyword}{using\ }interface11::opencl\_subbuffer;}
\DoxyCodeLine{01489\ \textcolor{keyword}{using\ }interface11::opencl\_device;}
\DoxyCodeLine{01490\ \textcolor{keyword}{using\ }interface11::opencl\_device\_list;}
\DoxyCodeLine{01491\ \textcolor{keyword}{using\ }interface11::opencl\_program;}
\DoxyCodeLine{01492\ \textcolor{keyword}{using\ }interface11::opencl\_program\_type;}
\DoxyCodeLine{01493\ \textcolor{keyword}{using\ }interface11::opencl\_async\_msg;}
\DoxyCodeLine{01494\ \textcolor{keyword}{using\ }interface11::opencl\_factory;}
\DoxyCodeLine{01495\ \textcolor{keyword}{using\ }interface11::opencl\_range;}
\DoxyCodeLine{01496\ }
\DoxyCodeLine{01497\ \}\ \textcolor{comment}{//\ namespace\ flow}}
\DoxyCodeLine{01498\ \}\ \textcolor{comment}{//\ namespace\ tbb}}
\DoxyCodeLine{01499\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_PREVIEW\_OPENCL\_NODE\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{01500\ }
\DoxyCodeLine{01501\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{__warning__suppress__disable__notice_8h}{internal/\_warning\_suppress\_disable\_notice.h}}"{}}}
\DoxyCodeLine{01502\ \textcolor{preprocessor}{\#undef\ \_\_TBB\_flow\_graph\_opencl\_node\_H\_include\_area}}
\DoxyCodeLine{01503\ }
\DoxyCodeLine{01504\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_flow\_graph\_opencl\_node\_H}}

\end{DoxyCode}
