\doxysection{Tensor\+IO.\+h}
\hypertarget{_tensor_i_o_8h_source}{}\label{_tensor_i_o_8h_source}\index{external/taskflow/3rd-\/party/eigen-\/3.3.7/unsupported/Eigen/CXX11/src/Tensor/TensorIO.h@{external/taskflow/3rd-\/party/eigen-\/3.3.7/unsupported/Eigen/CXX11/src/Tensor/TensorIO.h}}
\mbox{\hyperlink{_tensor_i_o_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ This\ file\ is\ part\ of\ Eigen,\ a\ lightweight\ C++\ template\ library}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ for\ linear\ algebra.}}
\DoxyCodeLine{00003\ \textcolor{comment}{//}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ Copyright\ (C)\ 2014\ Benoit\ Steiner\ <benoit.steiner.goog@gmail.com>}}
\DoxyCodeLine{00005\ \textcolor{comment}{//}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ This\ Source\ Code\ Form\ is\ subject\ to\ the\ terms\ of\ the\ Mozilla}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ Public\ License\ v.\ 2.0.\ If\ a\ copy\ of\ the\ MPL\ was\ not\ distributed}}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ with\ this\ file,\ You\ can\ obtain\ one\ at\ http://mozilla.org/MPL/2.0/.}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#ifndef\ EIGEN\_CXX11\_TENSOR\_TENSOR\_IO\_H}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#define\ EIGEN\_CXX11\_TENSOR\_TENSOR\_IO\_H}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_eigen}{Eigen}}\ \{}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_eigen_1_1internal}{internal}}\ \{}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{comment}{//\ Print\ the\ tensor\ as\ a\ 2d\ matrix}}
\DoxyCodeLine{00018\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Tensor,\ \textcolor{keywordtype}{int}\ Rank>}
\DoxyCodeLine{00019\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_eigen_1_1internal_1_1_tensor_printer}{TensorPrinter}}\ \{}
\DoxyCodeLine{00020\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1_tensor_printer_a8021cfd7526ef9baf49379ff95465ab2}{run}}\ (std::ostream\&\ os,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_eigen_1_1_tensor}{Tensor}}\&\ tensor)\ \{}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1remove__const_afe3dbb0bdee2ec8eed4416723d75bc90}{internal::remove\_const<typename\ Tensor::Scalar>::type}}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Scalar}};}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{class_eigen_1_1_tensor_acce4583bb4ed73c3dd16306c3d96b7f1}{Tensor::Index}}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}};}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ total\_size\ =\ \mbox{\hyperlink{namespace_eigen_1_1internal_a3b99e338d92a91c8b3f89d32d0ca2c39}{internal::array\_prod}}(tensor.\mbox{\hyperlink{class_eigen_1_1_tensor_afcdacf58c5ed7c2266a98a27008e183d}{dimensions}}());}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keywordflow}{if}\ (total\_size\ >\ 0)\ \{}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ first\_dim\ =\ \mbox{\hyperlink{namespace_eigen_1_1internal_a7dd131bbd4a892f4d48cfce903de56c5}{Eigen::internal::array\_get<0>}}(tensor.\mbox{\hyperlink{class_eigen_1_1_tensor_afcdacf58c5ed7c2266a98a27008e183d}{dimensions}}());}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ layout\ =\ \mbox{\hyperlink{class_eigen_1_1_tensor_ab92d20a891085bf474b3c1e2562105a0a01cf86dd60d981ecd74a08e337521db0}{Tensor::Layout}};}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_map}{Map<const\ Array<Scalar,\ Dynamic,\ Dynamic,\ layout>}}\ >\ \mbox{\hyperlink{external_2taskflow_2benchmarks_2wavefront_2main_8cpp_aed60820750f2ab1bf9dd99bc0a9eaab8}{matrix}}(\textcolor{keyword}{const\_cast<}\mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Scalar}}*\textcolor{keyword}{>}(tensor.\mbox{\hyperlink{class_eigen_1_1_tensor_a85786e910919756b2aac8e785bd8fb95}{data}}()),\ first\_dim,\ total\_size/first\_dim);}
\DoxyCodeLine{00028\ \ \ \ \ \ \ os\ <<\ \mbox{\hyperlink{external_2taskflow_2benchmarks_2wavefront_2main_8cpp_aed60820750f2ab1bf9dd99bc0a9eaab8}{matrix}};}
\DoxyCodeLine{00029\ \ \ \ \ \}}
\DoxyCodeLine{00030\ \ \ \}}
\DoxyCodeLine{00031\ \};}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{comment}{//\ Print\ the\ tensor\ as\ a\ vector}}
\DoxyCodeLine{00035\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Tensor>}
\DoxyCodeLine{00036\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_eigen_1_1internal_1_1_tensor_printer}{TensorPrinter}}<\mbox{\hyperlink{class_eigen_1_1_tensor}{Tensor}},\ 1>\ \{}
\DoxyCodeLine{00037\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1_tensor_printer_3_01_tensor_00_011_01_4_a0937497ab765508ea5720dbd71c016c0}{run}}\ (std::ostream\&\ os,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_eigen_1_1_tensor}{Tensor}}\&\ tensor)\ \{}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1remove__const_afe3dbb0bdee2ec8eed4416723d75bc90}{internal::remove\_const<typename\ Tensor::Scalar>::type}}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Scalar}};}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{class_eigen_1_1_tensor_acce4583bb4ed73c3dd16306c3d96b7f1}{Tensor::Index}}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}};}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ total\_size\ =\ \mbox{\hyperlink{namespace_eigen_1_1internal_a3b99e338d92a91c8b3f89d32d0ca2c39}{internal::array\_prod}}(tensor.\mbox{\hyperlink{class_eigen_1_1_tensor_afcdacf58c5ed7c2266a98a27008e183d}{dimensions}}());}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keywordflow}{if}\ (total\_size\ >\ 0)\ \{}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_map}{Map<const\ Array<Scalar,\ Dynamic,\ 1>}}\ >\ \mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}}(\textcolor{keyword}{const\_cast<}\mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Scalar}}*\textcolor{keyword}{>}(tensor.\mbox{\hyperlink{class_eigen_1_1_tensor_a85786e910919756b2aac8e785bd8fb95}{data}}()),\ total\_size);}
\DoxyCodeLine{00043\ \ \ \ \ \ \ os\ <<\ \mbox{\hyperlink{class_eigen_1_1array}{array}};}
\DoxyCodeLine{00044\ \ \ \ \ \}}
\DoxyCodeLine{00045\ \ \ \}}
\DoxyCodeLine{00046\ \};}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \textcolor{comment}{//\ Print\ the\ tensor\ as\ a\ scalar}}
\DoxyCodeLine{00050\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Tensor>}
\DoxyCodeLine{00051\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_eigen_1_1internal_1_1_tensor_printer}{TensorPrinter}}<\mbox{\hyperlink{class_eigen_1_1_tensor}{Tensor}},\ 0>\ \{}
\DoxyCodeLine{00052\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1_tensor_printer_3_01_tensor_00_010_01_4_a4ed64d0c0cceee3f2aec009c833937e0}{run}}\ (std::ostream\&\ os,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_eigen_1_1_tensor}{Tensor}}\&\ tensor)\ \{}
\DoxyCodeLine{00053\ \ \ \ \ os\ <<\ tensor.\mbox{\hyperlink{class_eigen_1_1_tensor_a19c2e19abf6bec7e194526b2ee26357c}{coeff}}(0);}
\DoxyCodeLine{00054\ \ \ \}}
\DoxyCodeLine{00055\ \};}
\DoxyCodeLine{00056\ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00059\ std::ostream\&\ \mbox{\hyperlink{namespace_eigen_aef71933e43383bd0d52d4f23a8c5fdff}{operator\ <<\ }}(std::ostream\&\ os,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_eigen_1_1_tensor_base}{TensorBase<T,\ ReadOnlyAccessors>}}\&\ expr)\ \{}
\DoxyCodeLine{00060\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_eigen_1_1_tensor_evaluator}{TensorEvaluator<const\ TensorForcedEvalOp<const\ T>}},\ \mbox{\hyperlink{struct_eigen_1_1_default_device}{DefaultDevice}}>\ Evaluator;}
\DoxyCodeLine{00061\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ Evaluator::Dimensions\ \mbox{\hyperlink{struct_eigen_1_1_tensor_evaluator}{Dimensions}};}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \textcolor{comment}{//\ Evaluate\ the\ expression\ if\ needed}}
\DoxyCodeLine{00064\ \ \ \mbox{\hyperlink{class_eigen_1_1_tensor_forced_eval_op}{TensorForcedEvalOp<const\ T>}}\ \mbox{\hyperlink{sparse__permutations_8cpp_abf03ad46cd5db5b4eabad69a86a13a6c}{eval}}\ =\ expr.eval();}
\DoxyCodeLine{00065\ \ \ Evaluator\ tensor(\mbox{\hyperlink{sparse__permutations_8cpp_abf03ad46cd5db5b4eabad69a86a13a6c}{eval}},\ \mbox{\hyperlink{struct_eigen_1_1_default_device}{DefaultDevice}}());}
\DoxyCodeLine{00066\ \ \ tensor.evalSubExprsIfNeeded(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \textcolor{comment}{//\ Print\ the\ result}}
\DoxyCodeLine{00069\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{ittnotify__static_8h_a4d59258314b5b7d431d257e3a5a98b57}{rank}}\ =\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1array__size}{internal::array\_size<Dimensions>::value}};}
\DoxyCodeLine{00070\ \ \ \mbox{\hyperlink{struct_eigen_1_1internal_1_1_tensor_printer_a8021cfd7526ef9baf49379ff95465ab2}{internal::TensorPrinter<Evaluator,\ rank>::run}}(os,\ tensor);}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \textcolor{comment}{//\ Cleanup.}}
\DoxyCodeLine{00073\ \ \ tensor.cleanup();}
\DoxyCodeLine{00074\ \ \ \textcolor{keywordflow}{return}\ os;}
\DoxyCodeLine{00075\ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \}\ \textcolor{comment}{//\ end\ namespace\ Eigen}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ EIGEN\_CXX11\_TENSOR\_TENSOR\_IO\_H}}

\end{DoxyCode}
