\doxysection{sparse\+\_\+buffer.\+h}
\hypertarget{sparse__buffer_8h_source}{}\label{sparse__buffer_8h_source}\index{runtime/runtime/sparse\_buffer.h@{runtime/runtime/sparse\_buffer.h}}
\mbox{\hyperlink{sparse__buffer_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <luisa/runtime/buffer.h>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <luisa/runtime/stream\_event.h>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <luisa/runtime/rhi/tile\_modification.h>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <luisa/runtime/sparse\_heap.h>}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceluisa_1_1compute}{luisa::compute}}\ \{}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail}{detail}}\ \{}
\DoxyCodeLine{00011\ \mbox{\hyperlink{dll__export_8h_ad06d699c99cabff41979e596b53ac25a}{LC\_RUNTIME\_API}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a4c82c1d19b7a704ad066c7054bff6f56}{check\_sparse\_buffer\_map}}(\textcolor{keywordtype}{size\_t}\ size\_bytes,\ \textcolor{keywordtype}{size\_t}\ tile\_size,\ \mbox{\hyperlink{sugar_8h_ad46b2ebcd4c426b06cda147ddc1001e7}{uint}}\ start\_tile,\ \mbox{\hyperlink{sugar_8h_ad46b2ebcd4c426b06cda147ddc1001e7}{uint}}\ tile\_count);}
\DoxyCodeLine{00012\ \mbox{\hyperlink{dll__export_8h_ad06d699c99cabff41979e596b53ac25a}{LC\_RUNTIME\_API}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_aab767ac2dd10e6a495685bca819d6546}{check\_sparse\_buffer\_unmap}}(\textcolor{keywordtype}{size\_t}\ size\_bytes,\ \textcolor{keywordtype}{size\_t}\ tile\_size,\ \mbox{\hyperlink{sugar_8h_ad46b2ebcd4c426b06cda147ddc1001e7}{uint}}\ start\_tile);}
\DoxyCodeLine{00013\ \}\textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00016\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a416712d44bb1e05238c5189b9db8a2e8}{SparseBuffer}}\ final\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_ad04c9df5461ad463bc3bfa340590a61a}{Resource}}\ \{}
\DoxyCodeLine{00017\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{namespaceluisa_1_1compute_a3f36be869569840a3a84ff8ca5134f34}{is\_valid\_buffer\_element\_v<T>}});}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a97a877cd4185b21bf932e0ac617709bb}{\_size}}\{\};}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a008122769e6133de2eaf6bfbb50aed54}{\_element\_stride}}\{\};}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_abe09db1489c78ff7e8d48f0ceb0f2d03}{\_tile\_size}}\{\};}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a520fa05e0bf58785da428f7a0241eee2}{Device}};}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_af0f59d273cf4f78f9d79e494e13500f8}{ResourceGenerator}};}
\DoxyCodeLine{00028\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a416712d44bb1e05238c5189b9db8a2e8}{SparseBuffer}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_device_interface}{DeviceInterface}}\ *\mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a80d70cb175660af12e01637de33f32bc}{device}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_sparse_buffer_creation_info}{SparseBufferCreationInfo}}\ \&info)\ noexcept}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_ad04c9df5461ad463bc3bfa340590a61a}{Resource}}\{\mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a80d70cb175660af12e01637de33f32bc}{device}},\ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a3d72fc24a13e8e17d2284bf4f59a19d6aa0ca29a594bb8af821e81e997c0a3c56}{Tag::SPARSE\_BUFFER}},\ info\},}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \ \ \_size\{info.total\_size\_bytes\ /\ info.element\_stride\},}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ \_element\_stride\{info.element\_stride\},}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \_tile\_size\{info.tile\_size\_bytes\}\ \{\}}
\DoxyCodeLine{00033\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_ae8edeb4de866ec18ebe25b8fdab8f28b}{SparseBuffer}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_device_interface}{DeviceInterface}}\ *\mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a80d70cb175660af12e01637de33f32bc}{device}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a46406399376cda757f10fa71c1f131d8}{size}})\ noexcept}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a416712d44bb1e05238c5189b9db8a2e8}{SparseBuffer}}\{}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a80d70cb175660af12e01637de33f32bc}{device}},}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&]\ \{}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a46406399376cda757f10fa71c1f131d8}{size}}\ ==\ 0)\ [[unlikely]]\ \{}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a8557c7c1aa4dc81519b55d28861ee1db}{detail::error\_buffer\_size\_is\_zero}}();}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a80d70cb175660af12e01637de33f32bc}{device}}-\/>create\_sparse\_buffer(Type::of<T>(),\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a46406399376cda757f10fa71c1f131d8}{size}});}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}()\}\ \{\}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00044\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_afacb1a04c846b6d44fde2d940c9db87e}{SparseBuffer}}()\ noexcept\ =\ \mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}};}
\DoxyCodeLine{00045\ \ \ \ \ \string~\mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a416712d44bb1e05238c5189b9db8a2e8}{SparseBuffer}}()\ noexcept\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (*\textcolor{keyword}{this})\ \{\ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a80d70cb175660af12e01637de33f32bc}{device}}()-\/>destroy\_sparse\_buffer(\mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a00d6db28ea14237c5c3ee4f3c1afbd46}{handle}}());\ \}}
\DoxyCodeLine{00047\ \ \ \ \ \}}
\DoxyCodeLine{00048\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a7601d153356fe049007fbeb4c178a6b2}{SparseBuffer}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a416712d44bb1e05238c5189b9db8a2e8}{SparseBuffer}}\ \&\&)\ noexcept\ =\ \mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}};}
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a416712d44bb1e05238c5189b9db8a2e8}{SparseBuffer}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a416712d44bb1e05238c5189b9db8a2e8}{SparseBuffer}}\ const\ \&)\ noexcept\ =\ delete;}
\DoxyCodeLine{00050\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a416712d44bb1e05238c5189b9db8a2e8}{SparseBuffer}}\ \&operator=(\mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a416712d44bb1e05238c5189b9db8a2e8}{SparseBuffer}}\ \&\&rhs)\ noexcept\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_ac8bd4f95e29f120931f646355e51323a}{\_move\_from}}(std::move(rhs));}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00053\ \ \ \ \ \}}
\DoxyCodeLine{00054\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a816454bd7e5c45f63f822af55b6ac4cb}{map\_tile}}(\mbox{\hyperlink{namespaceluisa_a70f466a8a407b18f0870c81f4bd3bf66}{uint}}\ start\_tile,\ \mbox{\hyperlink{namespaceluisa_a70f466a8a407b18f0870c81f4bd3bf66}{uint}}\ tile\_count,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_heap}{SparseBufferHeap}}\ \&heap)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_acd4eeb601dbaa644497541380a30c9aa}{\_check\_is\_valid}}();}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a4c82c1d19b7a704ad066c7054bff6f56}{detail::check\_sparse\_buffer\_map}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a0f5592c1741a7fa394dae87380096c07}{size\_bytes}}(),\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_abe09db1489c78ff7e8d48f0ceb0f2d03}{\_tile\_size}},\ start\_tile,\ tile\_count);}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_sparse_update_tile}{SparseUpdateTile}}\{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ .handle\ =\ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a00d6db28ea14237c5c3ee4f3c1afbd46}{handle}}(),}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ .operations\ =\ \mbox{\hyperlink{structluisa_1_1compute_1_1_sparse_buffer_map_operation}{SparseBufferMapOperation}}\{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .allocated\_heap\ =\ heap.handle(),}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .start\_tile\ =\ start\_tile,}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .tile\_count\ =\ tile\_count\}\};}
\DoxyCodeLine{00063\ \ \ \ \ \}}
\DoxyCodeLine{00064\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a4c9be1ac92c1817abd6fd4932a0d55e6}{unmap\_tile}}(\mbox{\hyperlink{namespaceluisa_a70f466a8a407b18f0870c81f4bd3bf66}{uint}}\ start\_tile,\ \mbox{\hyperlink{namespaceluisa_a70f466a8a407b18f0870c81f4bd3bf66}{uint}}\ tile\_count)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_acd4eeb601dbaa644497541380a30c9aa}{\_check\_is\_valid}}();}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_aab767ac2dd10e6a495685bca819d6546}{detail::check\_sparse\_buffer\_unmap}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a0f5592c1741a7fa394dae87380096c07}{size\_bytes}}(),\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_abe09db1489c78ff7e8d48f0ceb0f2d03}{\_tile\_size}},\ start\_tile);}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_sparse_update_tile}{SparseUpdateTile}}\{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ .handle\ =\ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a00d6db28ea14237c5c3ee4f3c1afbd46}{handle}}(),}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ .operations\ =\ \mbox{\hyperlink{structluisa_1_1compute_1_1_sparse_buffer_un_map_operation}{SparseBufferUnMapOperation}}\{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .start\_tile\ =\ start\_tile,}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .tile\_count\ =\ tile\_count\}\};}
\DoxyCodeLine{00072\ \ \ \ \ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a416712d44bb1e05238c5189b9db8a2e8}{SparseBuffer}}\ \&\mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a24ea80442763de2888f80e46643cde90}{operator=}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a416712d44bb1e05238c5189b9db8a2e8}{SparseBuffer}}\ \textcolor{keyword}{const}\ \&)\ \textcolor{keyword}{noexcept}\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keyword}{using\ }Resource::operator\ \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}};}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{comment}{//\ properties}}
\DoxyCodeLine{00077\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a46406399376cda757f10fa71c1f131d8}{size}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_acd4eeb601dbaa644497541380a30c9aa}{\_check\_is\_valid}}();}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a97a877cd4185b21bf932e0ac617709bb}{\_size}};}
\DoxyCodeLine{00080\ \ \ \ \ \}}
\DoxyCodeLine{00081\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a9160e7a4edab80221902a00034e7ec3a}{stride}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_acd4eeb601dbaa644497541380a30c9aa}{\_check\_is\_valid}}();}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a008122769e6133de2eaf6bfbb50aed54}{\_element\_stride}};}
\DoxyCodeLine{00084\ \ \ \ \ \}}
\DoxyCodeLine{00085\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a0f5592c1741a7fa394dae87380096c07}{size\_bytes}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_acd4eeb601dbaa644497541380a30c9aa}{\_check\_is\_valid}}();}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a97a877cd4185b21bf932e0ac617709bb}{\_size}}\ *\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a008122769e6133de2eaf6bfbb50aed54}{\_element\_stride}};}
\DoxyCodeLine{00088\ \ \ \ \ \}}
\DoxyCodeLine{00089\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a05c717b20d2f732dc7e296a3e95f78e8}{tile\_size}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_acd4eeb601dbaa644497541380a30c9aa}{\_check\_is\_valid}}();}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_abe09db1489c78ff7e8d48f0ceb0f2d03}{\_tile\_size}};}
\DoxyCodeLine{00092\ \ \ \ \ \}}
\DoxyCodeLine{00093\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_af35ba02d8b6389d2e6edbd604233b6cf}{view}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_acd4eeb601dbaa644497541380a30c9aa}{\_check\_is\_valid}}();}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_buffer_view}{BufferView<T>}}\{this-\/>\mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a80d70cb175660af12e01637de33f32bc}{device}}(),\ this-\/>\mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a00d6db28ea14237c5c3ee4f3c1afbd46}{handle}}(),\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a008122769e6133de2eaf6bfbb50aed54}{\_element\_stride}},\ 0u,\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a97a877cd4185b21bf932e0ac617709bb}{\_size}},\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a97a877cd4185b21bf932e0ac617709bb}{\_size}}\};}
\DoxyCodeLine{00096\ \ \ \ \ \}}
\DoxyCodeLine{00097\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_ad5f4e330f86511d73f32e9fe1bb102d6}{view}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae1b92ae085ddef4b1cdca7d749339fb0}{offset}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a619bc20e8198de3bd3f3d7fc34de66b2}{count}})\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_af35ba02d8b6389d2e6edbd604233b6cf}{view}}().subview(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae1b92ae085ddef4b1cdca7d749339fb0}{offset}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a619bc20e8198de3bd3f3d7fc34de66b2}{count}});}
\DoxyCodeLine{00099\ \ \ \ \ \}}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{comment}{//\ commands}}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{comment}{//\ copy\ buffer's\ data\ to\ pointer}}
\DoxyCodeLine{00102\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a9f7b80a225a2f25a92e2aa523e519f94}{copy\_to}}(\textcolor{keywordtype}{void}\ *\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abd87654504355b4c1bb002dcb1d4d16a}{data}})\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_acd4eeb601dbaa644497541380a30c9aa}{\_check\_is\_valid}}();}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>\mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_af35ba02d8b6389d2e6edbd604233b6cf}{view}}().copy\_to(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abd87654504355b4c1bb002dcb1d4d16a}{data}});}
\DoxyCodeLine{00105\ \ \ \ \ \}}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{comment}{//\ copy\ pointer's\ data\ to\ buffer}}
\DoxyCodeLine{00107\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_ada983fcd5f9e134a89d250d0f83b3d30}{copy\_from}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abd87654504355b4c1bb002dcb1d4d16a}{data}})\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_acd4eeb601dbaa644497541380a30c9aa}{\_check\_is\_valid}}();}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>\mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_af35ba02d8b6389d2e6edbd604233b6cf}{view}}().copy\_from(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abd87654504355b4c1bb002dcb1d4d16a}{data}});}
\DoxyCodeLine{00110\ \ \ \ \ \}}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{comment}{//\ copy\ source\ buffer's\ data\ to\ buffer}}
\DoxyCodeLine{00112\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_a43ec53e24b7c8303ca16024745a4ace0}{copy\_from}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_buffer_view}{BufferView<T>}}\ source)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_acd4eeb601dbaa644497541380a30c9aa}{\_check\_is\_valid}}();}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>\mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer_af35ba02d8b6389d2e6edbd604233b6cf}{view}}().copy\_from(source);}
\DoxyCodeLine{00115\ \ \ \ \ \}}
\DoxyCodeLine{00116\ \};}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedetail}{detail}}\ \{}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00121\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1is__buffer__impl}{is\_buffer\_impl}}<\mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer}{SparseBuffer}}<T>>\ :\ std::true\_type\ \{\};}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00124\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1buffer__element__impl}{buffer\_element\_impl}}<\mbox{\hyperlink{classluisa_1_1compute_1_1_sparse_buffer}{SparseBuffer}}<T>>\ \{}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1buffer__element__impl_3_01_sparse_buffer_3_01_t_01_4_01_4_af724efafba4daaa3994f78818d9854df}{type}}\ =\ T;}
\DoxyCodeLine{00126\ \};}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \}\textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \}\textcolor{comment}{//\ namespace\ luisa::compute}}

\end{DoxyCode}
