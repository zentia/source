\doxysection{accel.\+h}
\hypertarget{runtime_2rtx_2accel_8h_source}{}\label{runtime_2rtx_2accel_8h_source}\index{runtime/runtime/rtx/accel.h@{runtime/runtime/rtx/accel.h}}
\mbox{\hyperlink{runtime_2rtx_2accel_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{dll__export_8h}{runtime/core/dll\_export.h}}>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{spin__mutex_8h}{runtime/core/spin\_mutex.h}}>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{basic__types_8h}{runtime/core/basic\_types.h}}>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{core_2stl_2unordered__map_8h}{runtime/core/stl/unordered\_map.h}}>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{runtime_2rhi_2resource_8h}{runtime/runtime/rhi/resource.h}}>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{command_8h}{runtime/runtime/rhi/command.h}}>}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceluisa_1_1compute}{luisa::compute}}\ \{}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{keyword}{class\ }Mesh;}
\DoxyCodeLine{00013\ \textcolor{keyword}{class\ }Curve;}
\DoxyCodeLine{00014\ \textcolor{keyword}{class\ }ProceduralPrimitive;}
\DoxyCodeLine{00015\ \textcolor{keyword}{class\ }MotionInstance;}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail}{detail}}\ \{}
\DoxyCodeLine{00018\ \textcolor{comment}{//\ for\ DSL}}
\DoxyCodeLine{00019\ \textcolor{keyword}{class\ }AccelExprProxy;}
\DoxyCodeLine{00020\ \}\textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{comment}{//\ Accel\ is\ top-\/level\ acceleration\ structure(TLAS)\ for\ ray-\/tracing}}
\DoxyCodeLine{00023\ \textcolor{keyword}{class\ }\mbox{\hyperlink{dll__export_8h_ad06d699c99cabff41979e596b53ac25a}{LC\_RUNTIME\_API}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a446db2ee347989ea9e213a6338e129ef}{Accel}}\ final\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_ad04c9df5461ad463bc3bfa340590a61a}{Resource}}\ \{}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a18e486126c9bdfbea8163bfeaab83b5f}{ManagedAccel}};}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a39efd6a28a99a2200233613c7a9cd5a6}{BuildRequest}}\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_a64463a2984ce24f41388a1cf382ead11}{AccelBuildRequest}};}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_accel_ac7bac057544032e5f0cd446e0c43226e}{Modification}}\ =\ \mbox{\hyperlink{structluisa_1_1compute_1_1_accel_build_command_1_1_modification}{AccelBuildCommand::Modification}};}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00031\ \ \ \ \ luisa::unordered\_map<size\_t,\ Modification>\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a1322fe5fafaf202504c081f5500649b6}{\_modifications}};}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keyword}{mutable}\ luisa::spin\_mutex\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a32e4726765f82bbf20f9498ee183e75a}{\_mtx}};}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a8e0a27a3da9c4f6e7ad89c14e760669d}{\_instance\_count}}\{\};}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a520fa05e0bf58785da428f7a0241eee2}{Device}};}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_accel_aa41a130f156b145bffb3f4b5172c4c93}{Mesh}};}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a446db2ee347989ea9e213a6338e129ef}{Accel}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_device_interface}{DeviceInterface}}\ *\mbox{\hyperlink{classluisa_1_1compute_1_1_resource_a80d70cb175660af12e01637de33f32bc}{device}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_accel_option}{AccelOption}}\ \&\mbox{\hyperlink{structoption}{option}})\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00039\ \ \ \ \ luisa::unique\_ptr<Command>\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a636cec1fa9aed1ce9f29ca6efc806d7f}{\_build}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a39efd6a28a99a2200233613c7a9cd5a6}{Accel::BuildRequest}}\ request,}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ update\_instance\_buffer\_only)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00043\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a571359311630cbb6e49e348f2bb03df0}{Accel}}()\ noexcept\ =\ \mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}};}
\DoxyCodeLine{00044\ \ \ \ \ \string~\mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a446db2ee347989ea9e213a6338e129ef}{Accel}}()\ noexcept\ override;}
\DoxyCodeLine{00045\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a446db2ee347989ea9e213a6338e129ef}{Accel}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a446db2ee347989ea9e213a6338e129ef}{Accel}}\ \&\&)\ noexcept;}
\DoxyCodeLine{00046\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a446db2ee347989ea9e213a6338e129ef}{Accel}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a446db2ee347989ea9e213a6338e129ef}{Accel}}\ const\ \&)\ noexcept\ =\ delete;}
\DoxyCodeLine{00047\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a446db2ee347989ea9e213a6338e129ef}{Accel}}\ \&operator=(\mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a446db2ee347989ea9e213a6338e129ef}{Accel}}\ \&\&rhs)\ noexcept;}
\DoxyCodeLine{00048\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a446db2ee347989ea9e213a6338e129ef}{Accel}}\ \&operator=(\mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a446db2ee347989ea9e213a6338e129ef}{Accel}}\ const\ \&)\ noexcept\ =\ delete;}
\DoxyCodeLine{00049\ \ \ \ \ using\ \mbox{\hyperlink{classluisa_1_1compute_1_1_resource_ad04c9df5461ad463bc3bfa340590a61a}{Resource}}::operator\ \textcolor{keywordtype}{bool};}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{comment}{//\ number\ of\ instances}}
\DoxyCodeLine{00052\ \ \ \ \ [[nodiscard]]\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a9b0a8f37904d5306278f627f596b4fbc}{size}}()\ const\ noexcept;}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{comment}{//\ whether\ there\ are\ any\ stashed\ updates}}
\DoxyCodeLine{00055\ \ \ \ \ [[nodiscard]]\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a0a9e481dd18040c11d98bb7a44fd8ff0}{dirty}}()\ const\ noexcept;}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{comment}{//\ low-\/level\ interfaces}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a255cec97cdd39b0245405c5510dca044}{emplace\_back\_handle}}(\mbox{\hyperlink{eabase_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\_t}}\ mesh\_handle,}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aa265c9f4149500b446114ab68a968446}{float4x4}}\ const\ \&\mbox{\hyperlink{namespaceluisa_a5b7f7d471e0ca55c89b109ee3e0489db}{transform}},}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}\ visibility\_mask,}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ opaque,}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_a70f466a8a407b18f0870c81f4bd3bf66}{uint}}\ user\_id)\ noexcept;}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a98c6a33e9dc628ba5458dfec114119d4}{set\_handle}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ \mbox{\hyperlink{eabase_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\_t}}\ mesh\_handle,}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aa265c9f4149500b446114ab68a968446}{float4x4}}\ const\ \&\mbox{\hyperlink{namespaceluisa_a5b7f7d471e0ca55c89b109ee3e0489db}{transform}},}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}\ visibility\_mask,\ \textcolor{keywordtype}{bool}\ opaque,\ \mbox{\hyperlink{namespaceluisa_a70f466a8a407b18f0870c81f4bd3bf66}{uint}}\ user\_id)\ noexcept;}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a798d132a0adcf6c539db351a661325d5}{set\_prim\_handle}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ \mbox{\hyperlink{eabase_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\_t}}\ prim\_handle)\ noexcept;}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{comment}{//\ host\ interfaces}}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{comment}{//\ operations\ is\ committed\ by\ update\_instance()\ or\ build()}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_aa1afba6b0300e5063aa2c51f966f8b7c}{emplace\_back}}(const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_aa41a130f156b145bffb3f4b5172c4c93}{Mesh}}\ \&\mbox{\hyperlink{heightmap_8c_a9b554c9d084f2927e359b25d19606131}{mesh}},}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aa265c9f4149500b446114ab68a968446}{float4x4}}\ \mbox{\hyperlink{namespaceluisa_a5b7f7d471e0ca55c89b109ee3e0489db}{transform}}\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_a1fae07aa7d0ab46bd147898a10186466}{make\_float4x4}}(1.f),}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}\ visibility\_mask\ =\ 0xffu,}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ opaque\ =\ true,}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_a70f466a8a407b18f0870c81f4bd3bf66}{uint}}\ user\_id\ =\ 0)\ noexcept;}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_aa1afba6b0300e5063aa2c51f966f8b7c}{emplace\_back}}(const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_curve}{Curve}}\ \&curve,}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aa265c9f4149500b446114ab68a968446}{float4x4}}\ \mbox{\hyperlink{namespaceluisa_a5b7f7d471e0ca55c89b109ee3e0489db}{transform}}\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_a1fae07aa7d0ab46bd147898a10186466}{make\_float4x4}}(1.f),}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}\ visibility\_mask\ =\ 0xffu,}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ opaque\ =\ true,}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_a70f466a8a407b18f0870c81f4bd3bf66}{uint}}\ user\_id\ =\ 0)\ noexcept;}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_aa1afba6b0300e5063aa2c51f966f8b7c}{emplace\_back}}(const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_procedural_primitive}{ProceduralPrimitive}}\ \&prim,}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aa265c9f4149500b446114ab68a968446}{float4x4}}\ \mbox{\hyperlink{namespaceluisa_a5b7f7d471e0ca55c89b109ee3e0489db}{transform}}\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_a1fae07aa7d0ab46bd147898a10186466}{make\_float4x4}}(1.f),}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}\ visibility\_mask\ =\ 0xffu,}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_a70f466a8a407b18f0870c81f4bd3bf66}{uint}}\ user\_id\ =\ 0)\ noexcept;}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_aa1afba6b0300e5063aa2c51f966f8b7c}{emplace\_back}}(const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_motion_instance}{MotionInstance}}\ \&instance,}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aa265c9f4149500b446114ab68a968446}{float4x4}}\ \mbox{\hyperlink{namespaceluisa_a5b7f7d471e0ca55c89b109ee3e0489db}{transform}}\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_a1fae07aa7d0ab46bd147898a10186466}{make\_float4x4}}(1.f),}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}\ visibility\_mask\ =\ 0xffu,}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ opaque\ =\ true,}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_a70f466a8a407b18f0870c81f4bd3bf66}{uint}}\ user\_id\ =\ 0)\ noexcept;}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_ad83e4d2506d93f21703f894a03c067f9}{set}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_aa41a130f156b145bffb3f4b5172c4c93}{Mesh}}\ \&\mbox{\hyperlink{heightmap_8c_a9b554c9d084f2927e359b25d19606131}{mesh}},}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aa265c9f4149500b446114ab68a968446}{float4x4}}\ \mbox{\hyperlink{namespaceluisa_a5b7f7d471e0ca55c89b109ee3e0489db}{transform}}\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_a1fae07aa7d0ab46bd147898a10186466}{make\_float4x4}}(1.f),}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}\ visibility\_mask\ =\ 0xffu,}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ opaque\ =\ true,}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_a70f466a8a407b18f0870c81f4bd3bf66}{uint}}\ user\_id\ =\ 0)\ noexcept;}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_ad83e4d2506d93f21703f894a03c067f9}{set}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_curve}{Curve}}\ \&curve,}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aa265c9f4149500b446114ab68a968446}{float4x4}}\ \mbox{\hyperlink{namespaceluisa_a5b7f7d471e0ca55c89b109ee3e0489db}{transform}}\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_a1fae07aa7d0ab46bd147898a10186466}{make\_float4x4}}(1.f),}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}\ visibility\_mask\ =\ 0xffu,}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ opaque\ =\ true,}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_a70f466a8a407b18f0870c81f4bd3bf66}{uint}}\ user\_id\ =\ 0)\ noexcept;}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_ad83e4d2506d93f21703f894a03c067f9}{set}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_procedural_primitive}{ProceduralPrimitive}}\ \&prim,}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aa265c9f4149500b446114ab68a968446}{float4x4}}\ \mbox{\hyperlink{namespaceluisa_a5b7f7d471e0ca55c89b109ee3e0489db}{transform}}\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_a1fae07aa7d0ab46bd147898a10186466}{make\_float4x4}}(1.f),}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}\ visibility\_mask\ =\ 0xffu,}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_a70f466a8a407b18f0870c81f4bd3bf66}{uint}}\ user\_id\ =\ 0)\ noexcept;}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_ad83e4d2506d93f21703f894a03c067f9}{set}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_motion_instance}{MotionInstance}}\ \&instance,}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aa265c9f4149500b446114ab68a968446}{float4x4}}\ \mbox{\hyperlink{namespaceluisa_a5b7f7d471e0ca55c89b109ee3e0489db}{transform}}\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_a1fae07aa7d0ab46bd147898a10186466}{make\_float4x4}}(1.f),}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}\ visibility\_mask\ =\ 0xffu,}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ opaque\ =\ true,}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_a70f466a8a407b18f0870c81f4bd3bf66}{uint}}\ user\_id\ =\ 0)\ noexcept;}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a3a3a0b8876d0774e6cacc78fb91bc89f}{set\_mesh}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_aa41a130f156b145bffb3f4b5172c4c93}{Mesh}}\ \&\mbox{\hyperlink{heightmap_8c_a9b554c9d084f2927e359b25d19606131}{mesh}})\ noexcept;}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_afb8b13cf3b1fe1987c4de5d9ed5a0ffd}{set\_curve}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_curve}{Curve}}\ \&curve)\ noexcept;}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a084a383267b991e41dcdfd6b3e65f59e}{set\_procedural\_primitive}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_procedural_primitive}{ProceduralPrimitive}}\ \&prim)\ noexcept;}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a1cb31ff0bf0541c0c50ae258610cfdc9}{set\_motion\_instance}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_motion_instance}{MotionInstance}}\ \&instance)\ noexcept;}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a7fd0d01ed0680994944157a9fb98f795}{pop\_back}}()\ noexcept;}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_ad3e000a75a7f47b2ceeb1759168bf97d}{set\_transform\_on\_update}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ \mbox{\hyperlink{namespaceluisa_aa265c9f4149500b446114ab68a968446}{float4x4}}\ \mbox{\hyperlink{namespaceluisa_a5b7f7d471e0ca55c89b109ee3e0489db}{transform}})\ noexcept;}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a30c59d333724941160605e6c76eedd95}{set\_visibility\_on\_update}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ \mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}\ visibility\_mask)\ noexcept;}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a4691645991d907806d09a21ca9a0828b}{set\_opaque\_on\_update}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ \textcolor{keywordtype}{bool}\ opaque)\ noexcept;}
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a106368c006233ff509860921d24c9e4f}{set\_instance\_user\_id\_on\_update}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab47dd9958bcadea08866b42bf358e95e}{index}},\ \mbox{\hyperlink{namespaceluisa_a70f466a8a407b18f0870c81f4bd3bf66}{uint}}\ user\_id)\ noexcept;}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{comment}{//\ update\ top-\/level\ acceleration\ structure's\ instance\ data\ without\ build}}
\DoxyCodeLine{00130\ \ \ \ \ [[nodiscard]]\ \mbox{\hyperlink{namespaceluisa}{luisa}}::\mbox{\hyperlink{classeastl_1_1unique__ptr}{unique\_ptr}}<\mbox{\hyperlink{classluisa_1_1compute_1_1_command}{Command}}>\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a834e428bce1b03f8d9ae9401ab9dbde6}{update\_instance\_buffer}}()\ noexcept;}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{comment}{//\ update\ top-\/level\ acceleration\ structure's\ instance\ data\ and\ build}}
\DoxyCodeLine{00132\ \ \ \ \ [[nodiscard]]\ \mbox{\hyperlink{namespaceluisa}{luisa}}::\mbox{\hyperlink{classeastl_1_1unique__ptr}{unique\_ptr}}<\mbox{\hyperlink{classluisa_1_1compute_1_1_command}{Command}}>\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a462aa1bc1b92b92feaa7278404a6d6f3}{build}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a39efd6a28a99a2200233613c7a9cd5a6}{BuildRequest}}\ request\ =\ \mbox{\hyperlink{classluisa_1_1compute_1_1_accel_a39efd6a28a99a2200233613c7a9cd5a6}{BuildRequest}}::\mbox{\hyperlink{namespaceluisa_1_1compute_a64463a2984ce24f41388a1cf382ead11a51c5ea1e50025d8780628e8894a6635f}{PREFER\_UPDATE}})\ noexcept;}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{comment}{//\ DSL\ interface}}
\DoxyCodeLine{00135\ \ \ \ \ [[nodiscard]]\ const\ \mbox{\hyperlink{namespacedetail}{detail}}::AccelExprProxy\ *operator-\/>()\ const\ noexcept;}
\DoxyCodeLine{00136\ \};}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \}\textcolor{comment}{//\ namespace\ luisa::compute}}

\end{DoxyCode}
