\doxysection{logger-\/inl.h}
\hypertarget{logger-inl_8h_source}{}\label{logger-inl_8h_source}\index{runtime/spdlog/include/spdlog/logger-\/inl.h@{runtime/spdlog/include/spdlog/logger-\/inl.h}}
\mbox{\hyperlink{logger-inl_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright(c)\ 2015-\/present,\ Gabi\ Melman\ \&\ spdlog\ contributors.}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ Distributed\ under\ the\ MIT\ License\ (http://opensource.org/licenses/MIT)}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#ifndef\ SPDLOG\_HEADER\_ONLY}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\ \ \ \ \#include\ <\mbox{\hyperlink{logger_8h}{spdlog/logger.h}}>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{backtracer_8h}{spdlog/details/backtracer.h}}>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{pattern__formatter_8h}{spdlog/pattern\_formatter.h}}>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{sink_8h}{spdlog/sinks/sink.h}}>}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <cstdio>}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacespdlog}{spdlog}}\ \{}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{comment}{//\ public\ methods}}
\DoxyCodeLine{00019\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \mbox{\hyperlink{classspdlog_1_1logger_a441b6358c8df8fdc2367c9977b3c6fc2}{logger::logger}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classspdlog_1_1logger_a441b6358c8df8fdc2367c9977b3c6fc2}{logger}}\ \&other)}
\DoxyCodeLine{00020\ \ \ \ \ :\ \mbox{\hyperlink{classspdlog_1_1logger_a75c1f8d46f532e221eb0ace35fdd0513}{name\_}}(other.\mbox{\hyperlink{classspdlog_1_1logger_a75c1f8d46f532e221eb0ace35fdd0513}{name\_}}),}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_a24a3b3250f3fe52fa7c3053e77076f07}{sinks\_}}(other.\mbox{\hyperlink{classspdlog_1_1logger_a24a3b3250f3fe52fa7c3053e77076f07}{sinks\_}}),}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_af167b5b45a369b3cef019b40a87ed71d}{level\_}}(other.\mbox{\hyperlink{classspdlog_1_1logger_af167b5b45a369b3cef019b40a87ed71d}{level\_}}.load(\mbox{\hyperlink{namespacestd}{std}}::memory\_order\_relaxed)),}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_a69f7cbb7e1b2d5204a409906a62c1e94}{flush\_level\_}}(other.\mbox{\hyperlink{classspdlog_1_1logger_a69f7cbb7e1b2d5204a409906a62c1e94}{flush\_level\_}}.load(\mbox{\hyperlink{namespacestd}{std}}::memory\_order\_relaxed)),}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_a30967665909689412dfdfc856fd6a291}{custom\_err\_handler\_}}(other.\mbox{\hyperlink{classspdlog_1_1logger_a30967665909689412dfdfc856fd6a291}{custom\_err\_handler\_}}),}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_aa1e98497db9dadb18f7f1b5ac22570d1}{tracer\_}}(other.\mbox{\hyperlink{classspdlog_1_1logger_aa1e98497db9dadb18f7f1b5ac22570d1}{tracer\_}})\ \{\}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \mbox{\hyperlink{classspdlog_1_1logger_a441b6358c8df8fdc2367c9977b3c6fc2}{logger::logger}}(\mbox{\hyperlink{classspdlog_1_1logger_a441b6358c8df8fdc2367c9977b3c6fc2}{logger}}\ \&\&other)\ \mbox{\hyperlink{common_8h_a15d2dc432e6bb83beb5130be9a4ca8d6}{SPDLOG\_NOEXCEPT}}}
\DoxyCodeLine{00028\ \ \ \ \ :\ \mbox{\hyperlink{classspdlog_1_1logger_a75c1f8d46f532e221eb0ace35fdd0513}{name\_}}(std::move(other.name\_)),}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_a24a3b3250f3fe52fa7c3053e77076f07}{sinks\_}}(std::move(other.sinks\_)),}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_af167b5b45a369b3cef019b40a87ed71d}{level\_}}(other.level\_.load(std::memory\_order\_relaxed)),}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_a69f7cbb7e1b2d5204a409906a62c1e94}{flush\_level\_}}(other.flush\_level\_.load(std::memory\_order\_relaxed)),}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_a30967665909689412dfdfc856fd6a291}{custom\_err\_handler\_}}(std::move(other.custom\_err\_handler\_)),}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_aa1e98497db9dadb18f7f1b5ac22570d1}{tracer\_}}(std::move(other.tracer\_))}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \{\}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \mbox{\hyperlink{classspdlog_1_1logger_a441b6358c8df8fdc2367c9977b3c6fc2}{logger}}\ \&\mbox{\hyperlink{classspdlog_1_1logger_ac600636cb690d41f6652ad1c9cc957cf}{logger::operator=}}(\mbox{\hyperlink{classspdlog_1_1logger_a441b6358c8df8fdc2367c9977b3c6fc2}{logger}}\ other)\ \mbox{\hyperlink{common_8h_a15d2dc432e6bb83beb5130be9a4ca8d6}{SPDLOG\_NOEXCEPT}}\ \{}
\DoxyCodeLine{00038\ \ \ \ \ this-\/>\mbox{\hyperlink{namespacespdlog_a722a6537a51b47603039c380f22472e5}{swap}}(other);}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00040\ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classspdlog_1_1logger_ae051dea63dc86dd5bb30106ee3b32404}{logger::swap}}(\mbox{\hyperlink{classspdlog_1_1logger}{spdlog::logger}}\ \&other)\ \mbox{\hyperlink{common_8h_a15d2dc432e6bb83beb5130be9a4ca8d6}{SPDLOG\_NOEXCEPT}}\ \{}
\DoxyCodeLine{00043\ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_a75c1f8d46f532e221eb0ace35fdd0513}{name\_}}.swap(other.name\_);}
\DoxyCodeLine{00044\ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_a24a3b3250f3fe52fa7c3053e77076f07}{sinks\_}}.swap(other.sinks\_);}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{comment}{//\ swap\ level\_}}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keyword}{auto}\ other\_level\ =\ other.level\_.load();}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{auto}\ my\_level\ =\ \mbox{\hyperlink{classspdlog_1_1logger_af167b5b45a369b3cef019b40a87ed71d}{level\_}}.exchange(other\_level);}
\DoxyCodeLine{00049\ \ \ \ \ other.level\_.store(my\_level);}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{comment}{//\ swap\ flush\ level\_}}
\DoxyCodeLine{00052\ \ \ \ \ other\_level\ =\ other.flush\_level\_.load();}
\DoxyCodeLine{00053\ \ \ \ \ my\_level\ =\ \mbox{\hyperlink{classspdlog_1_1logger_a69f7cbb7e1b2d5204a409906a62c1e94}{flush\_level\_}}.exchange(other\_level);}
\DoxyCodeLine{00054\ \ \ \ \ other.flush\_level\_.store(my\_level);}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_a30967665909689412dfdfc856fd6a291}{custom\_err\_handler\_}}.swap(other.custom\_err\_handler\_);}
\DoxyCodeLine{00057\ \ \ \ \ std::swap(\mbox{\hyperlink{classspdlog_1_1logger_aa1e98497db9dadb18f7f1b5ac22570d1}{tracer\_}},\ other.tracer\_);}
\DoxyCodeLine{00058\ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacespdlog_a722a6537a51b47603039c380f22472e5}{swap}}(\mbox{\hyperlink{classspdlog_1_1logger}{logger}}\ \&a,\ \mbox{\hyperlink{classspdlog_1_1logger}{logger}}\ \&\mbox{\hyperlink{offscreen_8c_a83fc1af92e29717b4513d121b0c72c7d}{b}})\ \{\ a.\mbox{\hyperlink{classspdlog_1_1logger_ae051dea63dc86dd5bb30106ee3b32404}{swap}}(\mbox{\hyperlink{offscreen_8c_a83fc1af92e29717b4513d121b0c72c7d}{b}});\ \}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classspdlog_1_1logger_aeaf7078135688ea4df96ea8c8e11e0e7}{logger::set\_level}}(level::level\_enum\ log\_level)\ \{\ \mbox{\hyperlink{classspdlog_1_1logger_af167b5b45a369b3cef019b40a87ed71d}{level\_}}.store(log\_level);\ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ level::level\_enum\ \mbox{\hyperlink{classspdlog_1_1logger_a07de3c012b7f11d19ff1007e8aff6a31}{logger::level}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}level::level\_enum\textcolor{keyword}{>}(\mbox{\hyperlink{classspdlog_1_1logger_af167b5b45a369b3cef019b40a87ed71d}{level\_}}.load(std::memory\_order\_relaxed));}
\DoxyCodeLine{00066\ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keyword}{const}\ std::string\ \&\mbox{\hyperlink{classspdlog_1_1logger_ab1f5f63fcc8517b1105b4f640c1143ad}{logger::name}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classspdlog_1_1logger_a75c1f8d46f532e221eb0ace35fdd0513}{name\_}};\ \}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \textcolor{comment}{//\ set\ formatting\ for\ the\ sinks\ in\ this\ logger.}}
\DoxyCodeLine{00071\ \textcolor{comment}{//\ each\ sink\ will\ get\ a\ separate\ instance\ of\ the\ formatter\ object.}}
\DoxyCodeLine{00072\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classspdlog_1_1logger_a109da2030da643440092613cb100b5f0}{logger::set\_formatter}}(std::unique\_ptr<formatter>\ f)\ \{}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ it\ =\ \mbox{\hyperlink{classspdlog_1_1logger_a24a3b3250f3fe52fa7c3053e77076f07}{sinks\_}}.begin();\ it\ !=\ \mbox{\hyperlink{classspdlog_1_1logger_a24a3b3250f3fe52fa7c3053e77076f07}{sinks\_}}.end();\ ++it)\ \{}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (std::next(it)\ ==\ \mbox{\hyperlink{classspdlog_1_1logger_a24a3b3250f3fe52fa7c3053e77076f07}{sinks\_}}.end())\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ last\ element\ -\/\ we\ can\ be\ move\ it.}}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ (*it)-\/>set\_formatter(std::move(f));}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \ \textcolor{comment}{//\ to\ prevent\ clang-\/tidy\ warning}}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ (*it)-\/>set\_formatter(f-\/>clone());}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00081\ \ \ \ \ \}}
\DoxyCodeLine{00082\ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classspdlog_1_1logger_a12cd69af480fb8b4059821000a9afd20}{logger::set\_pattern}}(std::string\ pattern,\ \mbox{\hyperlink{namespacespdlog_ad598fbd8338772e66ae09e8723a07ced}{pattern\_time\_type}}\ time\_type)\ \{}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keyword}{auto}\ new\_formatter\ =\ \mbox{\hyperlink{namespacespdlog_1_1details_ac80ca96e75367f1d2de72eea3cb48fe7}{details::make\_unique<pattern\_formatter>}}(std::move(pattern),\ time\_type);}
\DoxyCodeLine{00086\ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_a109da2030da643440092613cb100b5f0}{set\_formatter}}(std::move(new\_formatter));}
\DoxyCodeLine{00087\ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \textcolor{comment}{//\ create\ new\ backtrace\ sink\ and\ move\ to\ it\ all\ our\ child\ sinks}}
\DoxyCodeLine{00090\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classspdlog_1_1logger_a815292ea2223b77b86c39bb2e0a98462}{logger::enable\_backtrace}}(\textcolor{keywordtype}{size\_t}\ n\_messages)\ \{\ \mbox{\hyperlink{classspdlog_1_1logger_aa1e98497db9dadb18f7f1b5ac22570d1}{tracer\_}}.enable(n\_messages);\ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \textcolor{comment}{//\ restore\ orig\ sinks\ and\ level\ and\ delete\ the\ backtrace\ sink}}
\DoxyCodeLine{00093\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classspdlog_1_1logger_af3803316079e8e814a2f8460aee0dc63}{logger::disable\_backtrace}}()\ \{\ \mbox{\hyperlink{classspdlog_1_1logger_aa1e98497db9dadb18f7f1b5ac22570d1}{tracer\_}}.disable();\ \}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classspdlog_1_1logger_adc83cee10165291cd75b100c51e20f3f}{logger::dump\_backtrace}}()\ \{\ \mbox{\hyperlink{classspdlog_1_1logger_aec0da766a100f05af1926404d1ce975f}{dump\_backtrace\_}}();\ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \textcolor{comment}{//\ flush\ functions}}
\DoxyCodeLine{00098\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classspdlog_1_1logger_ae7dacca7ca1d6383d910d2a1c483b6da}{logger::flush}}()\ \{\ \mbox{\hyperlink{classspdlog_1_1logger_a4410446ddde8880655f00729521e9718}{flush\_}}();\ \}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classspdlog_1_1logger_a57179a06ab8a21e4f16e7497302c47db}{logger::flush\_on}}(level::level\_enum\ log\_level)\ \{\ \mbox{\hyperlink{classspdlog_1_1logger_a69f7cbb7e1b2d5204a409906a62c1e94}{flush\_level\_}}.store(log\_level);\ \}}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ level::level\_enum\ \mbox{\hyperlink{classspdlog_1_1logger_a531a5fdd8cc96405858bf64a272614d3}{logger::flush\_level}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}level::level\_enum\textcolor{keyword}{>}(\mbox{\hyperlink{classspdlog_1_1logger_a69f7cbb7e1b2d5204a409906a62c1e94}{flush\_level\_}}.load(std::memory\_order\_relaxed));}
\DoxyCodeLine{00104\ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \textcolor{comment}{//\ sinks}}
\DoxyCodeLine{00107\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keyword}{const}\ std::vector<sink\_ptr>\ \&\mbox{\hyperlink{classspdlog_1_1logger_a6d64051f87d3c1c9d01693e1f4d4982b}{logger::sinks}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classspdlog_1_1logger_a24a3b3250f3fe52fa7c3053e77076f07}{sinks\_}};\ \}}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ std::vector<sink\_ptr>\ \&\mbox{\hyperlink{classspdlog_1_1logger_a6d64051f87d3c1c9d01693e1f4d4982b}{logger::sinks}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classspdlog_1_1logger_a24a3b3250f3fe52fa7c3053e77076f07}{sinks\_}};\ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \textcolor{comment}{//\ error\ handler}}
\DoxyCodeLine{00112\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classspdlog_1_1logger_ab855ed44bf4807a0441a5e053b5c1ac1}{logger::set\_error\_handler}}(\mbox{\hyperlink{namespacespdlog_a03dd18287597b4e682f1f901ad7c1ee1}{err\_handler}}\ handler)\ \{}
\DoxyCodeLine{00113\ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_a30967665909689412dfdfc856fd6a291}{custom\_err\_handler\_}}\ =\ std::move(handler);}
\DoxyCodeLine{00114\ \}}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \textcolor{comment}{//\ create\ new\ logger\ with\ same\ sinks\ and\ configuration.}}
\DoxyCodeLine{00117\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ std::shared\_ptr<logger>\ \mbox{\hyperlink{classspdlog_1_1logger_a953200cbe04c2e694d53781c2066a834}{logger::clone}}(std::string\ logger\_name)\ \{}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keyword}{auto}\ cloned\ =\ std::make\_shared<logger>(*\textcolor{keyword}{this});}
\DoxyCodeLine{00119\ \ \ \ \ cloned-\/>name\_\ =\ std::move(logger\_name);}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordflow}{return}\ cloned;}
\DoxyCodeLine{00121\ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \textcolor{comment}{//\ protected\ methods}}
\DoxyCodeLine{00124\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classspdlog_1_1logger_af4f4e7fef776a4443e8e691dca560aec}{logger::log\_it\_}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structspdlog_1_1details_1_1log__msg}{spdlog::details::log\_msg}}\ \&log\_msg,}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ log\_enabled,}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ traceback\_enabled)\ \{}
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keywordflow}{if}\ (log\_enabled)\ \{}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_a903938d3018e32dedcbd090e624ab5ee}{sink\_it\_}}(log\_msg);}
\DoxyCodeLine{00129\ \ \ \ \ \}}
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keywordflow}{if}\ (traceback\_enabled)\ \{}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_aa1e98497db9dadb18f7f1b5ac22570d1}{tracer\_}}.push\_back(log\_msg);}
\DoxyCodeLine{00132\ \ \ \ \ \}}
\DoxyCodeLine{00133\ \}}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classspdlog_1_1logger_a903938d3018e32dedcbd090e624ab5ee}{logger::sink\_it\_}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structspdlog_1_1details_1_1log__msg}{details::log\_msg}}\ \&msg)\ \{}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&sink\ :\ \mbox{\hyperlink{classspdlog_1_1logger_a24a3b3250f3fe52fa7c3053e77076f07}{sinks\_}})\ \{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sink-\/>should\_log(msg.\mbox{\hyperlink{structspdlog_1_1details_1_1log__msg_a4142f4d66140a1ea24053311ebea5706}{level}}))\ \{}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{common_8h_a4e499b4744b7b9df9452dd67d7380e90}{SPDLOG\_TRY}}\ \{\ sink-\/>log(msg);\ \}}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8h_a5c51810e21b98f4506f2d2940afc86a1}{SPDLOG\_LOGGER\_CATCH}}(msg.\mbox{\hyperlink{structspdlog_1_1details_1_1log__msg_a607e0014c79c1d39e28b515662ca2ca1}{source}})}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00141\ \ \ \ \ \}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classspdlog_1_1logger_ad39bf7f0608d13e335dd19dfce484b36}{should\_flush\_}}(msg))\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_a4410446ddde8880655f00729521e9718}{flush\_}}();}
\DoxyCodeLine{00145\ \ \ \ \ \}}
\DoxyCodeLine{00146\ \}}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classspdlog_1_1logger_a4410446ddde8880655f00729521e9718}{logger::flush\_}}()\ \{}
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&sink\ :\ \mbox{\hyperlink{classspdlog_1_1logger_a24a3b3250f3fe52fa7c3053e77076f07}{sinks\_}})\ \{}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{common_8h_a4e499b4744b7b9df9452dd67d7380e90}{SPDLOG\_TRY}}\ \{\ sink-\/>flush();\ \}}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8h_a5c51810e21b98f4506f2d2940afc86a1}{SPDLOG\_LOGGER\_CATCH}}(\mbox{\hyperlink{structspdlog_1_1source__loc}{source\_loc}}())}
\DoxyCodeLine{00152\ \ \ \ \ \}}
\DoxyCodeLine{00153\ \}}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classspdlog_1_1logger_aec0da766a100f05af1926404d1ce975f}{logger::dump\_backtrace\_}}()\ \{}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structspdlog_1_1details_1_1log__msg}{details::log\_msg}};}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classspdlog_1_1logger_aa1e98497db9dadb18f7f1b5ac22570d1}{tracer\_}}.enabled()\ \&\&\ !\mbox{\hyperlink{classspdlog_1_1logger_aa1e98497db9dadb18f7f1b5ac22570d1}{tracer\_}}.empty())\ \{}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_a903938d3018e32dedcbd090e624ab5ee}{sink\_it\_}}(}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ log\_msg\{\mbox{\hyperlink{classspdlog_1_1logger_ab1f5f63fcc8517b1105b4f640c1143ad}{name}}(),\ level::info,\ \textcolor{stringliteral}{"{}******************\ Backtrace\ Start\ ******************"{}}\});}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_aa1e98497db9dadb18f7f1b5ac22570d1}{tracer\_}}.foreach\_pop([\textcolor{keyword}{this}](\textcolor{keyword}{const}\ log\_msg\ \&msg)\ \{\ this-\/>\mbox{\hyperlink{classspdlog_1_1logger_a903938d3018e32dedcbd090e624ab5ee}{sink\_it\_}}(msg);\ \});}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_a903938d3018e32dedcbd090e624ab5ee}{sink\_it\_}}(}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ log\_msg\{\mbox{\hyperlink{classspdlog_1_1logger_ab1f5f63fcc8517b1105b4f640c1143ad}{name}}(),\ level::info,\ \textcolor{stringliteral}{"{}******************\ Backtrace\ End\ ********************"{}}\});}
\DoxyCodeLine{00163\ \ \ \ \ \}}
\DoxyCodeLine{00164\ \}}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classspdlog_1_1logger_ad39bf7f0608d13e335dd19dfce484b36}{logger::should\_flush\_}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structspdlog_1_1details_1_1log__msg}{details::log\_msg}}\ \&msg)\ \{}
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classspdlog_1_1logger_a531a5fdd8cc96405858bf64a272614d3}{flush\_level}}\ =\ \mbox{\hyperlink{classspdlog_1_1logger_a69f7cbb7e1b2d5204a409906a62c1e94}{flush\_level\_}}.load(std::memory\_order\_relaxed);}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{keywordflow}{return}\ (msg.\mbox{\hyperlink{structspdlog_1_1details_1_1log__msg_a4142f4d66140a1ea24053311ebea5706}{level}}\ >=\ \mbox{\hyperlink{classspdlog_1_1logger_a531a5fdd8cc96405858bf64a272614d3}{flush\_level}})\ \&\&\ (msg.\mbox{\hyperlink{structspdlog_1_1details_1_1log__msg_a4142f4d66140a1ea24053311ebea5706}{level}}\ !=\ level::off);}
\DoxyCodeLine{00169\ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classspdlog_1_1logger_a6bd679195d6f128bc60750113608f65c}{logger::err\_handler\_}}(\textcolor{keyword}{const}\ std::string\ \&msg)\ \{}
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classspdlog_1_1logger_a30967665909689412dfdfc856fd6a291}{custom\_err\_handler\_}})\ \{}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_a30967665909689412dfdfc856fd6a291}{custom\_err\_handler\_}}(msg);}
\DoxyCodeLine{00174\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }std::chrono::system\_clock;}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ std::mutex\ mutex;}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ std::chrono::system\_clock::time\_point\ last\_report\_time;}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ err\_counter\ =\ 0;}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ lk\{mutex\};}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ now\ =\ system\_clock::now();}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ err\_counter++;}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (now\ -\/\ last\_report\_time\ <\ std::chrono::seconds(1))\ \{}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ last\_report\_time\ =\ now;}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ tm\_time\ =\ \mbox{\hyperlink{namespacespdlog_1_1details_1_1os_ab090524da42b398917c5f90b3919599a}{details::os::localtime}}(system\_clock::to\_time\_t(now));}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ date\_buf[64];}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ std::strftime(date\_buf,\ \textcolor{keyword}{sizeof}(date\_buf),\ \textcolor{stringliteral}{"{}\%Y-\/\%m-\/\%d\ \%H:\%M:\%S"{}},\ \&tm\_time);}
\DoxyCodeLine{00189\ \textcolor{preprocessor}{\#if\ defined(USING\_R)\ \&\&\ defined(R\_R\_H)\ \ }\textcolor{comment}{//\ if\ in\ R\ environment}}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ REprintf(\textcolor{stringliteral}{"{}[***\ LOG\ ERROR\ \#\%04zu\ ***]\ [\%s]\ [\%s]\ \%s\(\backslash\)n"{}},\ err\_counter,\ date\_buf,\ \mbox{\hyperlink{classspdlog_1_1logger_ab1f5f63fcc8517b1105b4f640c1143ad}{name}}().c\_str(),}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg.c\_str());}
\DoxyCodeLine{00192\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ std::fprintf(stderr,\ \textcolor{stringliteral}{"{}[***\ LOG\ ERROR\ \#\%04zu\ ***]\ [\%s]\ [\%s]\ \%s\(\backslash\)n"{}},\ err\_counter,\ date\_buf,}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1logger_ab1f5f63fcc8517b1105b4f640c1143ad}{name}}().c\_str(),\ msg.c\_str());}
\DoxyCodeLine{00195\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00196\ \ \ \ \ \}}
\DoxyCodeLine{00197\ \}}
\DoxyCodeLine{00198\ \}\ \ \textcolor{comment}{//\ namespace\ spdlog}}

\end{DoxyCode}
