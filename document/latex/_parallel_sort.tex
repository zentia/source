\doxysection{Parallel Sort}
\hypertarget{_parallel_sort}{}\label{_parallel_sort}\index{Parallel Sort@{Parallel Sort}}
Taskflow provides template functions for constructing tasks to sort ranges of items in parallel.\hypertarget{_parallel_sort_ParallelSortInclude}{}\doxysubsection{\texorpdfstring{Include the Header}{Include the Header}}\label{_parallel_sort_ParallelSortInclude}
You need to include the header file, {\ttfamily \doxylink{taskflow_2algorithm_2sort_8hpp}{taskflow/algorithm/sort.\+hpp}}, for creating a parallel-\/sort task.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{taskflow_2algorithm_2sort_8hpp}{taskflow/algorithm/sort.hpp}}>}}

\end{DoxyCode}
\hypertarget{_parallel_sort_SortARangeOfItems}{}\doxysubsection{\texorpdfstring{Sort a Range of Items}{Sort a Range of Items}}\label{_parallel_sort_SortARangeOfItems}
The task created by \doxylink{classtf_1_1_flow_builder_a7d844e9856c7c65b26ccdb83ffdab1d6}{tf\+::\+Taskflow\+::sort(\+B first, E last)} performs parallel sort to rank a range of elements specified by {\ttfamily \mbox{[}first, last)} in increasing order. The given iterators must be {\itshape random-\/accessible}. The following example creates a task to sort a data vector in increasing order.


\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{classtf_1_1_taskflow}{tf::Taskflow}}\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}};}
\DoxyCodeLine{\mbox{\hyperlink{classtf_1_1_executor}{tf::Executor}}\ \mbox{\hyperlink{thread__pool_8cpp_a543e564a8407bbeac15cb2d929fec755}{executor}};}
\DoxyCodeLine{}
\DoxyCodeLine{std::vector<int>\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}\ =\ \{1,\ 4,\ 9,\ 2,\ 3,\ 11,\ -\/8\};}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{classtf_1_1_task}{tf::Task}}\ sort\ =\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}}.sort(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}.begin(),\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}.end());}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{thread__pool_8cpp_a543e564a8407bbeac15cb2d929fec755}{executor}}.run(\mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}}).wait();}
\DoxyCodeLine{}
\DoxyCodeLine{assert(std::is\_sorted(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}.begin(),\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}.end()));}

\end{DoxyCode}


\begin{DoxyAttention}{注意}
Elements are compared using the operator {\ttfamily \texorpdfstring{$<$}{<}}.
\end{DoxyAttention}
\hypertarget{_parallel_sort_SortARangeOfItemsWithACustomComparator}{}\doxysubsection{\texorpdfstring{Sort a Range of Items with a Custom Comparator}{Sort a Range of Items with a Custom Comparator}}\label{_parallel_sort_SortARangeOfItemsWithACustomComparator}
\doxylink{classtf_1_1_flow_builder_a35e180eb63de6c9f28e43185e837a4fa}{tf\+::\+Taskflow\+::sort(\+B first, E last, C cmp)} is an overload of parallel sort that allows users to specify a custom comparator. The following example sorts a data vector in decreasing order.


\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{classtf_1_1_taskflow}{tf::Taskflow}}\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}};}
\DoxyCodeLine{\mbox{\hyperlink{classtf_1_1_executor}{tf::Executor}}\ \mbox{\hyperlink{thread__pool_8cpp_a543e564a8407bbeac15cb2d929fec755}{executor}};}
\DoxyCodeLine{}
\DoxyCodeLine{std::vector<int>\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}\ =\ \{1,\ 4,\ 9,\ 2,\ 3,\ 11,\ -\/8\};}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{classtf_1_1_task}{tf::Task}}\ sort\ =\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}}.sort(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}.begin(),\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}.end(),\ }
\DoxyCodeLine{\ \ [](\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}},\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}})\ \{\ return\ a\ >\ b;\ \}}
\DoxyCodeLine{);}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{thread__pool_8cpp_a543e564a8407bbeac15cb2d929fec755}{executor}}.run(\mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}}).wait();}
\DoxyCodeLine{}
\DoxyCodeLine{assert(std::is\_sorted(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}.begin(),\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}.end(),\ std::greater<int>\{\}));}

\end{DoxyCode}


\begin{DoxyAttention}{注意}
\doxylink{classtf_1_1_flow_builder_a35e180eb63de6c9f28e43185e837a4fa}{tf\+::\+Taskflow\+::sort} is not stable. That is, two or more objects with equal keys may not appear in the same order before sorting.
\end{DoxyAttention}
\hypertarget{_parallel_sort_ParallelSortEnableStatefulDataPassing}{}\doxysubsection{\texorpdfstring{Enable Stateful Data Passing}{Enable Stateful Data Passing}}\label{_parallel_sort_ParallelSortEnableStatefulDataPassing}
The iterators taken by \doxylink{classtf_1_1_flow_builder_a35e180eb63de6c9f28e43185e837a4fa}{tf\+::\+Taskflow\+::sort} are templated. You can use std\+::reference\+\_\+wrapper to enable stateful data passing between the sort task and others. The following example creates a task {\ttfamily init} to initialize the data vector and a task {\ttfamily sort} to sort the data in parallel after {\ttfamily init} finishes.


\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{classtf_1_1_taskflow}{tf::Taskflow}}\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}};}
\DoxyCodeLine{\mbox{\hyperlink{classtf_1_1_executor}{tf::Executor}}\ \mbox{\hyperlink{thread__pool_8cpp_a543e564a8407bbeac15cb2d929fec755}{executor}};}
\DoxyCodeLine{}
\DoxyCodeLine{std::vector<int>\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}};}
\DoxyCodeLine{std::vector<int>::iterator\ first,\ last;}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{classtf_1_1_task}{tf::Task}}\ \mbox{\hyperlink{structinit}{init}}\ =\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}}.emplace([\&]()\{\ }
\DoxyCodeLine{\ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}\ \ =\ \{1,\ 4,\ 9,\ 2,\ 3,\ 11,\ -\/8\};\ }
\DoxyCodeLine{\ \ first\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}.begin();}
\DoxyCodeLine{\ \ last\ \ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}.end();}
\DoxyCodeLine{\});}
\DoxyCodeLine{tf::Task\ \mbox{\hyperlink{namespaceluisa_a08fa599f3509804d7ec363f0901af3fa}{sort}}\ =\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}}.sort(}
\DoxyCodeLine{\ \ std::ref(first),\ std::ref(last),\ []\ (\textcolor{keywordtype}{int}\ l,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}})\ \{\ \textcolor{keywordflow}{return}\ l\ <\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}};\ \}}
\DoxyCodeLine{);}
\DoxyCodeLine{\mbox{\hyperlink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init}}.precede(sort);}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{thread__pool_8cpp_a543e564a8407bbeac15cb2d929fec755}{executor}}.\mbox{\hyperlink{classtf_1_1_executor_a519777f5783981d534e9e53b99712069}{run}}(\mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}}).wait();}
\DoxyCodeLine{}
\DoxyCodeLine{assert(std::is\_sorted(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}.begin(),\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}.end()));}

\end{DoxyCode}
 