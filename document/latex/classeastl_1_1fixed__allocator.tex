\doxysection{eastl\+::fixed\+\_\+allocator类 参考}
\hypertarget{classeastl_1_1fixed__allocator}{}\label{classeastl_1_1fixed__allocator}\index{eastl::fixed\_allocator@{eastl::fixed\_allocator}}


{\ttfamily \#include $<$fixed\+\_\+allocator.\+h$>$}



类 eastl\+::fixed\+\_\+allocator 继承关系图\+:
% FIG 0


eastl\+::fixed\+\_\+allocator 的协作图\+:
% FIG 1
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classeastl_1_1fixed__allocator_aba09b3df6b2d8021500e8d8de4cbdd80}{fixed\+\_\+allocator}} (const char \texorpdfstring{$\ast$}{*}=\mbox{\hyperlink{fixed__pool_8h_a94f96e9fd5654b10be261f240f5b4ede}{EASTL\+\_\+\+FIXED\+\_\+\+POOL\+\_\+\+DEFAULT\+\_\+\+NAME}})
\item 
\mbox{\hyperlink{classeastl_1_1fixed__allocator_ac8332fe1d93479faf346191b436d8c97}{fixed\+\_\+allocator}} (const \mbox{\hyperlink{classeastl_1_1fixed__allocator}{fixed\+\_\+allocator}} \&)
\item 
\mbox{\hyperlink{classeastl_1_1fixed__allocator}{fixed\+\_\+allocator}} \& \mbox{\hyperlink{classeastl_1_1fixed__allocator_a0b450707b1b448bc902134a02ef5741f}{operator=}} (const \mbox{\hyperlink{classeastl_1_1fixed__allocator}{fixed\+\_\+allocator}} \&)
\item 
\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classeastl_1_1fixed__allocator_a996843b85529afe7650abfb614727484}{allocate}} (size\+\_\+t n, \mbox{\hyperlink{sugar_8h_ae88a82478e3818cade3f598c25437904}{int}}=0)
\item 
\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classeastl_1_1fixed__allocator_a989020e0196866adc1a56f298daeccd1}{allocate}} (size\+\_\+t n, size\+\_\+t, size\+\_\+t, \mbox{\hyperlink{sugar_8h_ae88a82478e3818cade3f598c25437904}{int}} flags=0)
\item 
\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \mbox{\hyperlink{classeastl_1_1fixed__allocator_a83dbc09d7a06bb0a360aa4d31b341ec3}{deallocate}} (\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}, size\+\_\+t)
\item 
const char \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classeastl_1_1fixed__allocator_aee8090b1e0b2888e26b78c1c29795923}{get\+\_\+name}} () const
\item 
\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \mbox{\hyperlink{classeastl_1_1fixed__allocator_a8accfc6bb11e0443ea16e7be19263796}{set\+\_\+name}} (const char \texorpdfstring{$\ast$}{*})
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classeastl_1_1fixed__allocator_a60631458edbef2554e24e71e02ef8088}{can\+\_\+allocate}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Public 成员函数 继承自 \mbox{\hyperlink{structeastl_1_1fixed__pool__base}{eastl\+::fixed\+\_\+pool\+\_\+base}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structeastl_1_1fixed__pool__base_a006eb1411d25facda3bc440e62009958}{fixed\+\_\+pool\+\_\+base}} (\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*}p\+Memory=\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})
\item 
\mbox{\hyperlink{structeastl_1_1fixed__pool__base}{fixed\+\_\+pool\+\_\+base}} \& \mbox{\hyperlink{structeastl_1_1fixed__pool__base_af0319a15c0bbceccba4a1b82939e6863}{operator=}} (const \mbox{\hyperlink{structeastl_1_1fixed__pool__base}{fixed\+\_\+pool\+\_\+base}} \&)
\item 
\mbox{\hyperlink{config_8h_abe3e0ba09c3562043e16fd05e36385d7}{EASTL\+\_\+\+API}} \mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \mbox{\hyperlink{structeastl_1_1fixed__pool__base_a91271c8c5d3e5927a7199c0a597ae900}{init}} (\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*}p\+Memory, size\+\_\+t memory\+Size, size\+\_\+t node\+Size, size\+\_\+t alignment, size\+\_\+t alignment\+Offset=0)
\item 
size\+\_\+t \mbox{\hyperlink{structeastl_1_1fixed__pool__base_adccc4e4a6dc19280e76d930aeb63d818}{peak\+\_\+size}} () const
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{structeastl_1_1fixed__pool__base_a60631458edbef2554e24e71e02ef8088}{can\+\_\+allocate}} () const
\end{DoxyCompactItemize}
\doxysubsubsection*{额外继承的成员函数}
\doxysubsection*{Public 属性 继承自 \mbox{\hyperlink{structeastl_1_1fixed__pool__base}{eastl\+::fixed\+\_\+pool\+\_\+base}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structeastl_1_1fixed__pool__base_1_1_link}{Link}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{structeastl_1_1fixed__pool__base_a5c08cfb3393e108443c246f7f63c3846}{mp\+Head}}
\item 
\mbox{\hyperlink{structeastl_1_1fixed__pool__base_1_1_link}{Link}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{structeastl_1_1fixed__pool__base_ae4fdadd117fa973a14aa87fe8c0b3bdd}{mp\+Next}}
\item 
\mbox{\hyperlink{structeastl_1_1fixed__pool__base_1_1_link}{Link}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{structeastl_1_1fixed__pool__base_acaabaf8541af665bf3b7a32c040d1fab}{mp\+Capacity}}
\item 
size\+\_\+t \mbox{\hyperlink{structeastl_1_1fixed__pool__base_ad02ceceac44b2f6c36ea1de00a86f132}{mn\+Node\+Size}}
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
\doxylink{classeastl_1_1fixed__allocator}{fixed\+\_\+allocator}

Implements an allocator which allocates a single fixed size where the size, alignment, and memory used for the pool is defined at runtime by the user. This is different from fixed containers such as \doxylink{classeastl_1_1fixed__list}{fixed\+\_\+list} whereby the size and alignment are determined at compile time and the memory is directly built into the container\textquotesingle{}s member data.

If the pool\textquotesingle{}s memory is exhausted or was never initialized, the allocate function returns NULL. Consider the \doxylink{classeastl_1_1fixed__allocator__with__overflow}{fixed\+\_\+allocator\+\_\+with\+\_\+overflow} class as an alternative in order to deal with this situation.

This class requires the user to call container.\+get\+\_\+allocator().\doxylink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init()} after constructing the container. There currently isn\textquotesingle{}t a way to construct the container with the initialization parameters, though with some effort such a thing could probably be made possible. It\textquotesingle{}s not as simple as it might first seem, due to the non-\/copyable nature of fixed allocators. A side effect of this limitation is that you cannot copy-\/construct a container using fixed\+\_\+allocators.

Another side-\/effect is that you cannot swap two containers using a \doxylink{classeastl_1_1fixed__allocator}{fixed\+\_\+allocator}, as a swap requires temporary memory allocated by an equivalent allocator, and such a thing cannot be done implicitly. A workaround for the swap limitation is that you can implement your own swap whereby you provide an explicitly created temporary object.

Note\+: Be careful to set the allocator\textquotesingle{}s node size to the size of the container node and not the size of the contained object. Note that the example code below uses Int\+List\+Node.

Example usage\+: typedef \doxylink{classeastl_1_1list}{eastl\+::list$<$int, fixed\+\_\+allocator$>$} Int\+List; typedef Int\+List\+::node\+\_\+type Int\+List\+Node;

Int\+List\+Node buffer\mbox{[}200\mbox{]}; Int\+List int\+List; int\+List.\+get\+\_\+allocator().init(buffer, sizeof(buffer), sizeof(\+Int\+List\+Node), \+\_\+\+\_\+alignof(\+Int\+List\+Node)); 

\doxysubsection{构造及析构函数说明}
\Hypertarget{classeastl_1_1fixed__allocator_aba09b3df6b2d8021500e8d8de4cbdd80}\index{eastl::fixed\_allocator@{eastl::fixed\_allocator}!fixed\_allocator@{fixed\_allocator}}
\index{fixed\_allocator@{fixed\_allocator}!eastl::fixed\_allocator@{eastl::fixed\_allocator}}
\doxysubsubsection{\texorpdfstring{fixed\_allocator()}{fixed\_allocator()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classeastl_1_1fixed__allocator_aba09b3df6b2d8021500e8d8de4cbdd80} 
eastl\+::fixed\+\_\+allocator\+::fixed\+\_\+allocator (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{}{ = {\ttfamily \mbox{\hyperlink{fixed__pool_8h_a94f96e9fd5654b10be261f240f5b4ede}{EASTL\+\_\+\+FIXED\+\_\+\+POOL\+\_\+\+DEFAULT\+\_\+\+NAME}}}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\doxylink{classeastl_1_1fixed__allocator}{fixed\+\_\+allocator}

Default constructor. The user usually will need to call \doxylink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init()} after ~\newline
 constructing via this constructor. 函数调用图\+:
% FIG 2
\Hypertarget{classeastl_1_1fixed__allocator_ac8332fe1d93479faf346191b436d8c97}\index{eastl::fixed\_allocator@{eastl::fixed\_allocator}!fixed\_allocator@{fixed\_allocator}}
\index{fixed\_allocator@{fixed\_allocator}!eastl::fixed\_allocator@{eastl::fixed\_allocator}}
\doxysubsubsection{\texorpdfstring{fixed\_allocator()}{fixed\_allocator()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classeastl_1_1fixed__allocator_ac8332fe1d93479faf346191b436d8c97} 
eastl\+::fixed\+\_\+allocator\+::fixed\+\_\+allocator (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classeastl_1_1fixed__allocator}{fixed\+\_\+allocator}} \&}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\doxylink{classeastl_1_1fixed__allocator}{fixed\+\_\+allocator}

Copy constructor. The user usually will need to call \doxylink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init()} after ~\newline
 constructing via this constructor. By their nature, fixed-\/allocators cannot be copied in any useful way, as by their nature the user must manually initialize them. 函数调用图\+:
% FIG 3


\doxysubsection{成员函数说明}
\Hypertarget{classeastl_1_1fixed__allocator_a996843b85529afe7650abfb614727484}\index{eastl::fixed\_allocator@{eastl::fixed\_allocator}!allocate@{allocate}}
\index{allocate@{allocate}!eastl::fixed\_allocator@{eastl::fixed\_allocator}}
\doxysubsubsection{\texorpdfstring{allocate()}{allocate()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classeastl_1_1fixed__allocator_a996843b85529afe7650abfb614727484} 
\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*} eastl\+::fixed\+\_\+allocator\+::allocate (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{n}{, }\item[{\mbox{\hyperlink{sugar_8h_ae88a82478e3818cade3f598c25437904}{int}}}]{}{ = {\ttfamily 0}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

allocate

Allocates a new object of the size specified upon class initialization. Returns NULL if there is no more memory. \Hypertarget{classeastl_1_1fixed__allocator_a989020e0196866adc1a56f298daeccd1}\index{eastl::fixed\_allocator@{eastl::fixed\_allocator}!allocate@{allocate}}
\index{allocate@{allocate}!eastl::fixed\_allocator@{eastl::fixed\_allocator}}
\doxysubsubsection{\texorpdfstring{allocate()}{allocate()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classeastl_1_1fixed__allocator_a989020e0196866adc1a56f298daeccd1} 
\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*} eastl\+::fixed\+\_\+allocator\+::allocate (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{n}{, }\item[{size\+\_\+t}]{}{, }\item[{size\+\_\+t}]{}{, }\item[{\mbox{\hyperlink{sugar_8h_ae88a82478e3818cade3f598c25437904}{int}}}]{flags}{ = {\ttfamily 0}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

allocate 函数调用图\+:
% FIG 4
\Hypertarget{classeastl_1_1fixed__allocator_a60631458edbef2554e24e71e02ef8088}\index{eastl::fixed\_allocator@{eastl::fixed\_allocator}!can\_allocate@{can\_allocate}}
\index{can\_allocate@{can\_allocate}!eastl::fixed\_allocator@{eastl::fixed\_allocator}}
\doxysubsubsection{\texorpdfstring{can\_allocate()}{can\_allocate()}}
{\footnotesize\ttfamily \label{classeastl_1_1fixed__allocator_a60631458edbef2554e24e71e02ef8088} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} eastl\+::fixed\+\_\+pool\+\_\+base\+::can\+\_\+allocate (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

can\+\_\+allocate

Returns true if there are any free links. \Hypertarget{classeastl_1_1fixed__allocator_a83dbc09d7a06bb0a360aa4d31b341ec3}\index{eastl::fixed\_allocator@{eastl::fixed\_allocator}!deallocate@{deallocate}}
\index{deallocate@{deallocate}!eastl::fixed\_allocator@{eastl::fixed\_allocator}}
\doxysubsubsection{\texorpdfstring{deallocate()}{deallocate()}}
{\footnotesize\ttfamily \label{classeastl_1_1fixed__allocator_a83dbc09d7a06bb0a360aa4d31b341ec3} 
\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} eastl\+::fixed\+\_\+allocator\+::deallocate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*}}]{p}{, }\item[{size\+\_\+t}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

deallocate

Frees the given object which was allocated by \doxylink{classeastl_1_1fixed__allocator_a996843b85529afe7650abfb614727484}{allocate()}. If the given node was not allocated by \doxylink{classeastl_1_1fixed__allocator_a996843b85529afe7650abfb614727484}{allocate()} then the behaviour is undefined. \Hypertarget{classeastl_1_1fixed__allocator_aee8090b1e0b2888e26b78c1c29795923}\index{eastl::fixed\_allocator@{eastl::fixed\_allocator}!get\_name@{get\_name}}
\index{get\_name@{get\_name}!eastl::fixed\_allocator@{eastl::fixed\_allocator}}
\doxysubsubsection{\texorpdfstring{get\_name()}{get\_name()}}
{\footnotesize\ttfamily \label{classeastl_1_1fixed__allocator_aee8090b1e0b2888e26b78c1c29795923} 
const char \texorpdfstring{$\ast$}{*} eastl\+::fixed\+\_\+allocator\+::get\+\_\+name (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\Hypertarget{classeastl_1_1fixed__allocator_a0b450707b1b448bc902134a02ef5741f}\index{eastl::fixed\_allocator@{eastl::fixed\_allocator}!operator=@{operator=}}
\index{operator=@{operator=}!eastl::fixed\_allocator@{eastl::fixed\_allocator}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \label{classeastl_1_1fixed__allocator_a0b450707b1b448bc902134a02ef5741f} 
\mbox{\hyperlink{classeastl_1_1fixed__allocator}{fixed\+\_\+allocator}} \& eastl\+::fixed\+\_\+allocator\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classeastl_1_1fixed__allocator}{fixed\+\_\+allocator}} \&}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

operator=

By their nature, fixed-\/allocators cannot be copied in any useful way, as by their nature the user must manually initialize them. 函数调用图\+:
% FIG 5
\Hypertarget{classeastl_1_1fixed__allocator_a8accfc6bb11e0443ea16e7be19263796}\index{eastl::fixed\_allocator@{eastl::fixed\_allocator}!set\_name@{set\_name}}
\index{set\_name@{set\_name}!eastl::fixed\_allocator@{eastl::fixed\_allocator}}
\doxysubsubsection{\texorpdfstring{set\_name()}{set\_name()}}
{\footnotesize\ttfamily \label{classeastl_1_1fixed__allocator_a8accfc6bb11e0443ea16e7be19263796} 
\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} eastl\+::fixed\+\_\+allocator\+::set\+\_\+name (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
runtime/\+EASTL/include/\+EASTL/\mbox{\hyperlink{fixed__allocator_8h}{fixed\+\_\+allocator.\+h}}\end{DoxyCompactItemize}
