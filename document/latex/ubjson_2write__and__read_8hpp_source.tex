\doxysection{write\+\_\+and\+\_\+read.\+hpp}
\hypertarget{ubjson_2write__and__read_8hpp_source}{}\label{ubjson_2write__and__read_8hpp_source}\index{external/reflect-\/cpp/tests/ubjson/write\_and\_read.hpp@{external/reflect-\/cpp/tests/ubjson/write\_and\_read.hpp}}
\mbox{\hyperlink{ubjson_2write__and__read_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ WRITE\_AND\_READ\_}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ WRITE\_AND\_READ\_}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <gtest/gtest.h>}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{ubjson_8hpp}{rfl/ubjson.hpp}}>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}...\ Ps>}
\DoxyCodeLine{00011\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{avro_2write__and__read_8hpp_afbf9dc00f8e3fd7cabcd088b57e4e638}{write\_and\_read}}(\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \_struct)\ \{}
\DoxyCodeLine{00012\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ =\ std::remove\_cvref\_t<\textcolor{keyword}{decltype}(\_struct)>;}
\DoxyCodeLine{00013\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ serialized1\ =\ \mbox{\hyperlink{namespacerfl_1_1ubjson_ae5eff9fbb6a419029978ea624558b02c}{rfl::ubjson::write}}<Ps...>(\_struct);}
\DoxyCodeLine{00014\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}\ =\ \mbox{\hyperlink{namespacerfl_1_1ubjson_a7237f51363a66109ced397899bcb2870}{rfl::ubjson::read}}<\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ Ps...>(serialized1);}
\DoxyCodeLine{00015\ \ \ EXPECT\_TRUE(\mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}\ \&\&\ \textcolor{keyword}{true})\ <<\ \textcolor{stringliteral}{"{}Test\ failed\ on\ read.\ Error:\ "{}}}
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}.error().what();}
\DoxyCodeLine{00017\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ serialized2\ =\ \mbox{\hyperlink{namespacerfl_1_1ubjson_ae5eff9fbb6a419029978ea624558b02c}{rfl::ubjson::write}}<Ps...>(\mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}.value());}
\DoxyCodeLine{00018\ \ \ EXPECT\_EQ(serialized1,\ serialized2);}
\DoxyCodeLine{00019\ \}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
