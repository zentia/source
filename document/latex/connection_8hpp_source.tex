\doxysection{connection.\+hpp}
\hypertarget{connection_8hpp_source}{}\label{connection_8hpp_source}\index{external/taskflow/taskflow/dsl/connection.hpp@{external/taskflow/taskflow/dsl/connection.hpp}}
\mbox{\hyperlink{connection_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ 2020/08/28\ -\/\ Created\ by\ netcan:\ https://github.com/netcan}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{flow__builder_8hpp}{../core/flow\_builder.hpp}}"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{task__trait_8hpp}{task\_trait.hpp}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{tuple__utils_8hpp}{tuple\_utils.hpp}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{type__list_8hpp}{type\_list.hpp}}"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetf}{tf}}\ \{}
\DoxyCodeLine{00009\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetf_1_1dsl}{dsl}}\ \{}
\DoxyCodeLine{00010\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F,\ \textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtf_1_1dsl_1_1_connection}{Connection}}\ \{}
\DoxyCodeLine{00011\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classtf_1_1dsl_1_1_connection_a33bba1c84e06612294c3cdf463abc0da}{FROMs}}\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structtf_1_1dsl_1_1_task_trait}{TaskTrait<F>::TaskList}};}
\DoxyCodeLine{00012\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classtf_1_1dsl_1_1_connection_a1e2b58cbd3675e8696ab066fddba9ecc}{TOs}}\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structtf_1_1dsl_1_1_task_trait}{TaskTrait<T>::TaskList}};}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00015\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classtf_1_1dsl_1_1_connection_ac5f5e5d266c790ed8d1192e4829b8d5b}{FromTaskList}}\ =\ \mbox{\hyperlink{namespacetf_1_1dsl_a09576ad6e39020850ce8531914ee195d}{Unique\_t<Flatten\_t<FROMs>}}>;}
\DoxyCodeLine{00016\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classtf_1_1dsl_1_1_connection_ab77176e75f2614839dc7812c6d784ab7}{ToTaskList}}\ =\ \mbox{\hyperlink{namespacetf_1_1dsl_a09576ad6e39020850ce8531914ee195d}{Unique\_t<Flatten\_t<TOs>}}>;}
\DoxyCodeLine{00017\ \};}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ OUT\ =\ TypeList<>>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtf_1_1dsl_1_1_chain}{Chain}};}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F,\ \textcolor{keyword}{typename}\ OUT>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtf_1_1dsl_1_1_chain}{Chain}}<auto\ (*)(\mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}})-\/>void,\ \mbox{\hyperlink{structtf_1_1dsl_1_1_o_u_t}{OUT}}>\ \{}
\DoxyCodeLine{00022\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structtf_1_1dsl_1_1_o_u_t_a54c50db44aa9f0a55bcde4b53d148a78}{From}}\ =\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}};}
\DoxyCodeLine{00023\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structtf_1_1dsl_1_1_o_u_t_ada90e43ad15e2484c87847275e3554c9}{type}}\ =\ \mbox{\hyperlink{structtf_1_1dsl_1_1_o_u_t}{OUT}};}
\DoxyCodeLine{00024\ \};}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F,\ \textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ OUT>}
\DoxyCodeLine{00027\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtf_1_1dsl_1_1_chain}{Chain}}<auto\ (*)(\mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}})-\/>T,\ \mbox{\hyperlink{structtf_1_1dsl_1_1_o_u_t}{OUT}}>\ \{}
\DoxyCodeLine{00028\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00029\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structtf_1_1dsl_1_1_o_u_t_a16f7f94987516ca921e1fa6e088207ea}{To}}\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structtf_1_1dsl_1_1_chain}{Chain<T,\ OUT>::From}};}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00032\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structtf_1_1dsl_1_1_o_u_t_a54c50db44aa9f0a55bcde4b53d148a78}{From}}\ =\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}};}
\DoxyCodeLine{00033\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structtf_1_1dsl_1_1_o_u_t_ada90e43ad15e2484c87847275e3554c9}{type}}\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structtf_1_1dsl_1_1_chain}{Chain}}<}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{typename}\ OUT::template\ appendTo<Connection<From,\ To>>>\mbox{\hyperlink{structtf_1_1dsl_1_1_o_u_t_ada90e43ad15e2484c87847275e3554c9}{::type}};}
\DoxyCodeLine{00035\ \};}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FROM,\ \textcolor{keyword}{typename}\ TO>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtf_1_1dsl_1_1_one_to_one_link}{OneToOneLink}}\ \{}
\DoxyCodeLine{00038\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TasksCB>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtf_1_1dsl_1_1_one_to_one_link_1_1_instance_type}{InstanceType}}\ \{}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structtf_1_1dsl_1_1_one_to_one_link_1_1_instance_type_a3e775f5c0a181acf9919f4b36e38be2f}{build}}(TasksCB\ \&tasksCb)\ \{}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{size\_t}\ TasksCBSize\ =\ std::tuple\_size<TasksCB>::value;}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{size\_t}\ FromTaskIndex\ =}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetf_1_1dsl_a510d682f2ec4114b0c68afb61e5f5084}{TupleElementByF\_v<TasksCB,\ IsTask<FROM>::template}}\ apply>;}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{size\_t}\ ToTaskIndex\ =}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetf_1_1dsl_a510d682f2ec4114b0c68afb61e5f5084}{TupleElementByF\_v<TasksCB,\ IsTask<TO>::template}}\ apply>;}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(FromTaskIndex\ <\ TasksCBSize\ \&\&\ ToTaskIndex\ <\ TasksCBSize,}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}fatal:\ not\ find\ TaskCb\ in\ TasksCB"{}});}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \mbox{\hyperlink{namespacestd_aae41d8280b7ccc3f0e0a0be2dab21c8f}{std::get<FromTaskIndex>}}(tasksCb).task\_.precede(}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacestd_aae41d8280b7ccc3f0e0a0be2dab21c8f}{std::get<ToTaskIndex>}}(tasksCb).task\_);}
\DoxyCodeLine{00049\ \ \ \ \ \}}
\DoxyCodeLine{00050\ \ \ \};}
\DoxyCodeLine{00051\ \};}
\DoxyCodeLine{00052\ \}\ \textcolor{comment}{//\ namespace\ dsl}}
\DoxyCodeLine{00053\ \};\ \textcolor{comment}{//\ namespace\ tf}}

\end{DoxyCode}
