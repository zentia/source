\doxysection{pool\+Evolution.\+hpp}
\hypertarget{pool_evolution_8hpp_source}{}\label{pool_evolution_8hpp_source}\index{external/taskflow/3rd-\/party/ff/poolEvolution.hpp@{external/taskflow/3rd-\/party/ff/poolEvolution.hpp}}
\mbox{\hyperlink{pool_evolution_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ -\/*-\/\ Mode:\ C++;\ tab-\/width:\ 4;\ c-\/basic-\/offset:\ 4;\ indent-\/tabs-\/mode:\ nil\ -\/*-\/\ */}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00011\ \ }
\DoxyCodeLine{00012\ \textcolor{comment}{/*\ ***************************************************************************}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ \ FastFlow\ is\ free\ software;\ you\ can\ redistribute\ it\ and/or\ modify\ it}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ \ under\ the\ terms\ of\ the\ GNU\ Lesser\ General\ Public\ License\ version\ 3\ as}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *\ \ published\ by\ the\ Free\ Software\ Foundation.}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ \ Starting\ from\ version\ 3.0.1\ FastFlow\ is\ dual\ licensed\ under\ the\ GNU\ LGPLv3}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ \ or\ MIT\ License\ (https://github.com/ParaGroup/WindFlow/blob/vers3.x/LICENSE.MIT)}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *\ \ This\ program\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,\ but\ WITHOUT}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ *\ \ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of\ MERCHANTABILITY\ or}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ *\ \ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the\ GNU\ Lesser\ General\ Public}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ *\ \ License\ for\ more\ details.}}
\DoxyCodeLine{00024\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00025\ \textcolor{comment}{\ *\ \ You\ should\ have\ received\ a\ copy\ of\ the\ GNU\ Lesser\ General\ Public\ License}}
\DoxyCodeLine{00026\ \textcolor{comment}{\ *\ \ along\ with\ this\ program;\ if\ not,\ write\ to\ the\ Free\ Software\ Foundation,}}
\DoxyCodeLine{00027\ \textcolor{comment}{\ *\ \ Inc.,\ 59\ Temple\ Place\ -\/\ Suite\ 330,\ Boston,\ MA\ 02111-\/1307,\ USA.}}
\DoxyCodeLine{00028\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00029\ \textcolor{comment}{\ ****************************************************************************}}
\DoxyCodeLine{00030\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{comment}{/*}}
\DoxyCodeLine{00033\ \textcolor{comment}{\ *\ The\ PoolEvolution\ pattern\ models\ the\ evolution\ of\ a\ population.\ }}
\DoxyCodeLine{00034\ \textcolor{comment}{\ *\ In\ the\ pattern,\ a\ “candidate\ selection”\ function\ (s)\ selects\ a\ subset\ of\ objects\ belonging\ }}
\DoxyCodeLine{00035\ \textcolor{comment}{\ *\ to\ an\ unstructured\ object\ pool\ (P).\ }}
\DoxyCodeLine{00036\ \textcolor{comment}{\ *\ The\ selected\ objects\ are\ processed\ by\ means\ of\ an\ “evolution”\ function\ (e).\ }}
\DoxyCodeLine{00037\ \textcolor{comment}{\ *\ The\ evolution\ function\ may\ produce\ any\ number\ of\ new/modified\ \ objects\ out\ of\ the\ input\ one.\ }}
\DoxyCodeLine{00038\ \textcolor{comment}{\ *\ The\ set\ of\ objects\ computed\ by\ the\ evolution\ function\ on\ the\ selected\ object\ are\ filtered\ }}
\DoxyCodeLine{00039\ \textcolor{comment}{\ *\ through\ a\ “filter”\ function\ (f)\ and\ eventually\ inserted\ into\ the\ object\ pool.\ }}
\DoxyCodeLine{00040\ \textcolor{comment}{\ *\ At\ any\ insertion/extraction\ into/from\ the\ object\ pool\ a\ “termination”\ function\ (t)\ is\ }}
\DoxyCodeLine{00041\ \textcolor{comment}{\ *\ evaluated\ on\ the\ object\ pool,\ to\ determine\ whether\ the\ evolution\ process\ has\ to\ be\ stopped\ or\ }}
\DoxyCodeLine{00042\ \textcolor{comment}{\ *\ continued\ for\ further\ iterations.}}
\DoxyCodeLine{00043\ \textcolor{comment}{\ *\ A\ pool\ evolution\ pattern\ therefore\ computes\ P\ as\ result\ of\ the\ following\ algorithm:}}
\DoxyCodeLine{00044\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00045\ \textcolor{comment}{\ *\ \ while\ not(\ t(P)\ )\ do}}
\DoxyCodeLine{00046\ \textcolor{comment}{\ *\ \ \ \ N\ \ =\ e\ (\ s(P)\ )}}
\DoxyCodeLine{00047\ \textcolor{comment}{\ *\ \ \ \ P\ +=\ f\ (N,\ P)}}
\DoxyCodeLine{00048\ \textcolor{comment}{\ *\ \ end\ while}}
\DoxyCodeLine{00049\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00050\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \textcolor{comment}{//\ TODO:}}
\DoxyCodeLine{00053\ \textcolor{comment}{//\ reuse\ the\ pool\ pattern\ multiple\ times\ in\ a\ non\ streaming\ fashion}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \textcolor{preprocessor}{\#ifndef\ FF\_POOL\_HPP}}
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\#define\ FF\_POOL\_HPP}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{preprocessor}{\#include\ <iosfwd>}}
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00060\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{node_8hpp}{ff/node.hpp}}>}}
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{parallel__for_8hpp}{ff/parallel\_for.hpp}}>}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceff}{ff}}\ \{}
\DoxyCodeLine{00064\ \ }
\DoxyCodeLine{00084\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ env\_t=\textcolor{keywordtype}{char}>}
\DoxyCodeLine{00085\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classff_1_1pool_evolution_a111520d9464011c610e40f128c286a3a}{poolEvolution}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classff_1_1ff__node_a53ab8b2244539766bdea3eb65cb04f9b}{ff\_node}}\ \{}
\DoxyCodeLine{00086\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}\ \ \ \ \ (*\mbox{\hyperlink{classff_1_1pool_evolution_abfe1fca2cfb8606ebd1e0d8e581f32ea}{selection\_t}})\ \ (\mbox{\hyperlink{classff_1_1_parallel_for_reduce}{ParallelForReduce<T>}}\ \&,\ std::vector<T>\ \&,\ std::vector<T>\ \&,\ env\_t\ \&);}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ (*evolution\_t)\ \ (\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&,\ \textcolor{keyword}{const}\ env\_t\&,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}});\ }
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}\ \ \ \ \ (*\mbox{\hyperlink{classff_1_1pool_evolution_a089c7626f7ad0dd51e893f7e9f7e7c54}{filtering\_t}})\ \ (\mbox{\hyperlink{classff_1_1_parallel_for_reduce}{ParallelForReduce<T>}}\ \&,\ std::vector<T>\ \&,\ std::vector<T>\ \&,\ env\_t\ \&);}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}\ \ \ \ \ (*\mbox{\hyperlink{classff_1_1pool_evolution_ae2d32a14b13f41bb0c9a08c79c6b5f4c}{termination\_t}})(\textcolor{keyword}{const}\ std::vector<T>\ \&\mbox{\hyperlink{classff_1_1ff__node_ad5cc2cf5075a13cb58eddeb948d46deb}{pop}},\ env\_t\ \&);}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keyword}{typedef}\ env\_t\ \mbox{\hyperlink{classff_1_1pool_evolution_adb8e06bd016072af08922e73dd4d67b6}{envT}};}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classff_1_1pool_evolution_ac05e3bd983aaa137948724e072b91a4d}{maxp}},\mbox{\hyperlink{classff_1_1pool_evolution_a60ade6185e8dadf0127697cb5b4b4322}{pE}};}
\DoxyCodeLine{00097\ \ \ \ \ env\_t\ \ \mbox{\hyperlink{classff_1_1pool_evolution_aa86774bc00ed22c72944871f7506d49f}{env}};}
\DoxyCodeLine{00098\ \ \ \ \ std::vector<T>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\mbox{\hyperlink{classff_1_1pool_evolution_ae5b338603eb18b7dccd6f8a004517222}{input}};}
\DoxyCodeLine{00099\ \ \ \ \ std::vector<T>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_ae010f9a7660dd5fd282075ea8a7f3128}{buffer}};}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_abfe1fca2cfb8606ebd1e0d8e581f32ea}{selection\_t}}\ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_a8e9f6381a7e95dd9ed1eb9d42f597c82}{selection}};}
\DoxyCodeLine{00102\ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_ab3d6c9c5e5cce398ad59716e83f0c935}{evolution\_t}}\ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_a34e47a093f129762eba58b5e3dd25ea9}{evolution}};}
\DoxyCodeLine{00103\ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_a089c7626f7ad0dd51e893f7e9f7e7c54}{filtering\_t}}\ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_af2c13f966ef175d10345220bbd969250}{filter}};}
\DoxyCodeLine{00104\ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_ae2d32a14b13f41bb0c9a08c79c6b5f4c}{termination\_t}}\ \mbox{\hyperlink{classff_1_1pool_evolution_acc471341b3e6eb0a3c18c965f0865a9e}{termination}};}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \ \ \mbox{\hyperlink{classff_1_1_parallel_for_reduce}{ParallelForReduce<T>}}\ \mbox{\hyperlink{classff_1_1pool_evolution_a1fb7fec12c5ee632fc6eec29b59336eb}{loopevol}};}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ public\ :}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{comment}{/*\ selection\_t\ is\ the\ selection\ function\ type,\ it\ takes\ the\ popolution\ and\ returns\ a\ sub-\/population\ }}
\DoxyCodeLine{00111\ \textcolor{comment}{\ \ \ \ \ *\ evolution\_t\ is\ the\ evolution\ function\ type,\ it\ works\ on\ the\ single\ element\ }}
\DoxyCodeLine{00112\ \textcolor{comment}{\ \ \ \ \ *\ filtering\_t\ is\ the\ filter\ function\ type,\ it\ takes\ the\ population\ produced\ at\ the\ previous\ step\ and\ }}
\DoxyCodeLine{00113\ \textcolor{comment}{\ \ \ \ \ *\ produces\ a\ new\ population\ }}
\DoxyCodeLine{00114\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{comment}{//\ constructor\ :\ to\ be\ used\ in\ non-\/streaming\ applications}}
\DoxyCodeLine{00117\ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_a111520d9464011c610e40f128c286a3a}{poolEvolution}}\ (\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classff_1_1pool_evolution_ac05e3bd983aaa137948724e072b91a4d}{maxp}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ maximum\ parallelism\ degree\ }}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<T>\ \&\ \mbox{\hyperlink{classff_1_1ff__node_ad5cc2cf5075a13cb58eddeb948d46deb}{pop}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ initial\ population}}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_abfe1fca2cfb8606ebd1e0d8e581f32ea}{selection\_t}}\ sel\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ,\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ selection\ function}}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_ab3d6c9c5e5cce398ad59716e83f0c935}{evolution\_t}}\ evol,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ evolution\ function}}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_a089c7626f7ad0dd51e893f7e9f7e7c54}{filtering\_t}}\ fil,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ filter\ function}}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_ae2d32a14b13f41bb0c9a08c79c6b5f4c}{termination\_t}}\ term,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ termination\ function}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ env\_t\ \&\mbox{\hyperlink{sandbox_2strassen_2omp_8cpp_a4bfa035cad7c3258704669810cd5de5d}{E}}=\ env\_t(),\ \textcolor{keywordtype}{bool}\ spinWait=\textcolor{keyword}{true})\ \textcolor{comment}{//\ NOTE:\ spinWait\ does\ not\ enable\ spinBarrier\ !}}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ :\mbox{\hyperlink{classff_1_1pool_evolution_ac05e3bd983aaa137948724e072b91a4d}{maxp}}(\mbox{\hyperlink{classff_1_1pool_evolution_ac05e3bd983aaa137948724e072b91a4d}{maxp}}),\ \mbox{\hyperlink{classff_1_1pool_evolution_a60ade6185e8dadf0127697cb5b4b4322}{pE}}(\mbox{\hyperlink{classff_1_1pool_evolution_ac05e3bd983aaa137948724e072b91a4d}{maxp}}),\mbox{\hyperlink{classff_1_1pool_evolution_aa86774bc00ed22c72944871f7506d49f}{env}}(\mbox{\hyperlink{sandbox_2strassen_2omp_8cpp_a4bfa035cad7c3258704669810cd5de5d}{E}}),\mbox{\hyperlink{classff_1_1pool_evolution_ae5b338603eb18b7dccd6f8a004517222}{input}}(\&\mbox{\hyperlink{classff_1_1ff__node_ad5cc2cf5075a13cb58eddeb948d46deb}{pop}}),\mbox{\hyperlink{classff_1_1pool_evolution_a8e9f6381a7e95dd9ed1eb9d42f597c82}{selection}}(sel),\mbox{\hyperlink{classff_1_1pool_evolution_a34e47a093f129762eba58b5e3dd25ea9}{evolution}}(evol),\mbox{\hyperlink{classff_1_1pool_evolution_af2c13f966ef175d10345220bbd969250}{filter}}(fil),\mbox{\hyperlink{classff_1_1pool_evolution_acc471341b3e6eb0a3c18c965f0865a9e}{termination}}(term),}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_a1fb7fec12c5ee632fc6eec29b59336eb}{loopevol}}(\mbox{\hyperlink{classff_1_1pool_evolution_ac05e3bd983aaa137948724e072b91a4d}{maxp}},spinWait)\ \{\ }
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_a1fb7fec12c5ee632fc6eec29b59336eb}{loopevol}}.disableScheduler(\textcolor{keyword}{true});}
\DoxyCodeLine{00127\ \ \ \ \ \}}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{comment}{//\ constructor\ :\ to\ be\ used\ in\ streaming\ applications}}
\DoxyCodeLine{00129\ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_a6ba36a6f2f2461b9ed100086725647b6}{poolEvolution}}\ (\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classff_1_1pool_evolution_ac05e3bd983aaa137948724e072b91a4d}{maxp}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ maximum\ parallelism\ degree\ }}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_abfe1fca2cfb8606ebd1e0d8e581f32ea}{selection\_t}}\ sel\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ,\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ selection\ function}}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_ab3d6c9c5e5cce398ad59716e83f0c935}{evolution\_t}}\ evol,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ evolution\ function}}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_a089c7626f7ad0dd51e893f7e9f7e7c54}{filtering\_t}}\ fil,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ filter\ function}}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_ae2d32a14b13f41bb0c9a08c79c6b5f4c}{termination\_t}}\ term,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ termination\ function}}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ env\_t\ \&\mbox{\hyperlink{sandbox_2strassen_2omp_8cpp_a4bfa035cad7c3258704669810cd5de5d}{E}}=\ env\_t(),\ \textcolor{keywordtype}{bool}\ spinWait=\textcolor{keyword}{true})}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ :\mbox{\hyperlink{classff_1_1pool_evolution_ac05e3bd983aaa137948724e072b91a4d}{maxp}}(\mbox{\hyperlink{classff_1_1pool_evolution_ac05e3bd983aaa137948724e072b91a4d}{maxp}}),\ \mbox{\hyperlink{classff_1_1pool_evolution_a60ade6185e8dadf0127697cb5b4b4322}{pE}}(\mbox{\hyperlink{classff_1_1pool_evolution_ac05e3bd983aaa137948724e072b91a4d}{maxp}}),\mbox{\hyperlink{classff_1_1pool_evolution_aa86774bc00ed22c72944871f7506d49f}{env}}(\mbox{\hyperlink{sandbox_2strassen_2omp_8cpp_a4bfa035cad7c3258704669810cd5de5d}{E}}),\mbox{\hyperlink{classff_1_1pool_evolution_ae5b338603eb18b7dccd6f8a004517222}{input}}(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}),\mbox{\hyperlink{classff_1_1pool_evolution_a8e9f6381a7e95dd9ed1eb9d42f597c82}{selection}}(sel),\mbox{\hyperlink{classff_1_1pool_evolution_a34e47a093f129762eba58b5e3dd25ea9}{evolution}}(evol),\mbox{\hyperlink{classff_1_1pool_evolution_af2c13f966ef175d10345220bbd969250}{filter}}(fil),\mbox{\hyperlink{classff_1_1pool_evolution_acc471341b3e6eb0a3c18c965f0865a9e}{termination}}(term),}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_a1fb7fec12c5ee632fc6eec29b59336eb}{loopevol}}(\mbox{\hyperlink{classff_1_1pool_evolution_ac05e3bd983aaa137948724e072b91a4d}{maxp}},\ spinWait)\ \{\ }
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_a1fb7fec12c5ee632fc6eec29b59336eb}{loopevol}}.disableScheduler(\textcolor{keyword}{true});}
\DoxyCodeLine{00138\ \ \ \ \ \}}
\DoxyCodeLine{00139\ \ \ \ \ }
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{comment}{//\ the\ function\ returning\ the\ result\ in\ non\ streaming\ applications}}
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keyword}{const}\ std::vector<T>\&\ \mbox{\hyperlink{classff_1_1pool_evolution_a23733d8b421f07340b6fa0b812c03a04}{get\_result}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ *\mbox{\hyperlink{classff_1_1pool_evolution_ae5b338603eb18b7dccd6f8a004517222}{input}};\ \}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{comment}{//\ changing\ the\ parallelism\ degree}}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1pool_evolution_a295f43db9167c6c6af252f96e89730bc}{setParEvolution}}(\textcolor{keywordtype}{size\_t}\ pardegree)\ \ \ \{\ }
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pardegree>\mbox{\hyperlink{classff_1_1pool_evolution_ac05e3bd983aaa137948724e072b91a4d}{maxp}})}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}setParEvolution:\ pardegree\ too\ high,\ it\ should\ be\ less\ than\ or\ equal\ to\ \%ld\(\backslash\)n"{}},\mbox{\hyperlink{classff_1_1pool_evolution_ac05e3bd983aaa137948724e072b91a4d}{maxp}});}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \mbox{\hyperlink{classff_1_1pool_evolution_a60ade6185e8dadf0127697cb5b4b4322}{pE}}\ =\ pardegree;\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00148\ \ \ \ \ \}}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keyword}{const}\ env\_t\&\ \mbox{\hyperlink{classff_1_1pool_evolution_a9f463051f37279929e4bfb5ec3da714c}{getEnv}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1pool_evolution_aa86774bc00ed22c72944871f7506d49f}{env}};\}}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classff_1_1pool_evolution_a0f43f0762d930b1959d65ce48e5c1229}{run\_and\_wait\_end}}()\ \{}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:}}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ (isfrozen())\ \{}}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ stop();}}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ thaw();}}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ if\ (wait()<0)\ return\ -\/1;}}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ return\ 0;}}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \}}}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ stop();}}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__node_aec4506dc3946ff9e6ce5bb5370545864}{ff\_node::run}}()<0)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__node_a060b15e97e9fdc8d50fd10c0dd141a0f}{ff\_node::wait}}()<0)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00164\ \ \ \ \ \}}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00166\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{classff_1_1pool_evolution_a545f31f8d767570c6b16e0d95f8ad8ee}{svc}}(\textcolor{keywordtype}{void}\ *\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}})\ \{}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}})\ \mbox{\hyperlink{classff_1_1pool_evolution_ae5b338603eb18b7dccd6f8a004517222}{input}}\ =\ ((std::vector<T>*)\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}});}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(!\mbox{\hyperlink{classff_1_1pool_evolution_acc471341b3e6eb0a3c18c965f0865a9e}{termination}}(*\mbox{\hyperlink{classff_1_1pool_evolution_ae5b338603eb18b7dccd6f8a004517222}{input}},\mbox{\hyperlink{classff_1_1pool_evolution_aa86774bc00ed22c72944871f7506d49f}{env}}))\ \{}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ selection\ phase}}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_ae010f9a7660dd5fd282075ea8a7f3128}{buffer}}.clear();\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_a8e9f6381a7e95dd9ed1eb9d42f597c82}{selection}}(\mbox{\hyperlink{classff_1_1pool_evolution_a1fb7fec12c5ee632fc6eec29b59336eb}{loopevol}},\ *\mbox{\hyperlink{classff_1_1pool_evolution_ae5b338603eb18b7dccd6f8a004517222}{input}},\ \mbox{\hyperlink{classff_1_1pool_evolution_ae010f9a7660dd5fd282075ea8a7f3128}{buffer}},\ \mbox{\hyperlink{classff_1_1pool_evolution_aa86774bc00ed22c72944871f7506d49f}{env}});}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ evolution\ phase}}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{sandbox_2strassen_2omp_8cpp_a4bfa035cad7c3258704669810cd5de5d}{E}}\ =\ [\&](\textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ thid)\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_ae010f9a7660dd5fd282075ea8a7f3128}{buffer}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]=\mbox{\hyperlink{classff_1_1pool_evolution_a34e47a093f129762eba58b5e3dd25ea9}{evolution}}(\mbox{\hyperlink{classff_1_1pool_evolution_ae010f9a7660dd5fd282075ea8a7f3128}{buffer}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}],\ \mbox{\hyperlink{classff_1_1pool_evolution_aa86774bc00ed22c72944871f7506d49f}{env}},\ thid);\ }
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ to\ add\ dynamic\ scheduling\ option}}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_a1fb7fec12c5ee632fc6eec29b59336eb}{loopevol}}.parallel\_for\_thid(0,\mbox{\hyperlink{classff_1_1pool_evolution_ae010f9a7660dd5fd282075ea8a7f3128}{buffer}}.size(),1,}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_aebaf75dc17f130d2be1e1d78bbbd80e2}{PARFOR\_STATIC}}(0),\mbox{\hyperlink{sandbox_2strassen_2omp_8cpp_a4bfa035cad7c3258704669810cd5de5d}{E}},\ \mbox{\hyperlink{classff_1_1pool_evolution_a60ade6185e8dadf0127697cb5b4b4322}{pE}});\ }
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ filtering\ phase}}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_af2c13f966ef175d10345220bbd969250}{filter}}(\mbox{\hyperlink{classff_1_1pool_evolution_a1fb7fec12c5ee632fc6eec29b59336eb}{loopevol}},\ *\mbox{\hyperlink{classff_1_1pool_evolution_ae5b338603eb18b7dccd6f8a004517222}{input}},\ \mbox{\hyperlink{classff_1_1pool_evolution_ae010f9a7660dd5fd282075ea8a7f3128}{buffer}},\ \mbox{\hyperlink{classff_1_1pool_evolution_aa86774bc00ed22c72944871f7506d49f}{env}});}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_ae5b338603eb18b7dccd6f8a004517222}{input}}-\/>swap(\mbox{\hyperlink{classff_1_1pool_evolution_ae010f9a7660dd5fd282075ea8a7f3128}{buffer}});}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1pool_evolution_a1fb7fec12c5ee632fc6eec29b59336eb}{loopevol}}.threadPause();}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}?\mbox{\hyperlink{classff_1_1pool_evolution_ae5b338603eb18b7dccd6f8a004517222}{input}}:\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00190\ \ \ \ \ \}\ \ \ \ }
\DoxyCodeLine{00191\ \};}
\DoxyCodeLine{00192\ \ \ \ \ }
\DoxyCodeLine{00193\ \}\ \textcolor{comment}{//\ namespace\ ff}}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ FF\_POOL\_HPP\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
