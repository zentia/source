\doxysection{Single Task}
\hypertarget{_single_task_s_y_c_l}{}\label{_single_task_s_y_c_l}\index{Single \%Task@{Single \%Task}}
\doxylink{classtf_1_1sycl_flow}{tf\+::sycl\+Flow} provides a template method, \doxylink{classtf_1_1sycl_flow_a05ff6f331b6cf48e21ae7f0d6aea9094}{tf\+::sycl\+Flow\+::single\+\_\+task}, for creating a task to run the given callable using a single kernel thread.\hypertarget{_single_task_s_y_c_l_SingleTaskSYCLSingleTask}{}\doxysubsection{\texorpdfstring{Run a Task with a Single Thread}{Run a Task with a Single Thread}}\label{_single_task_s_y_c_l_SingleTaskSYCLSingleTask}
You can create a task to run a kernel function just once, i.\+e., using one GPU thread. This is handy when you want to set up a single or a few global variables that do not need multiple threads and will be used by multiple kernels afterwards. The following example creates a single-\/task kernel that sets {\ttfamily gpu\+\_\+variable} to 1.


\begin{DoxyCode}{0}
\DoxyCodeLine{sycl::queue\ \mbox{\hyperlink{namespacequeue}{queue}};}
\DoxyCodeLine{\textcolor{keywordtype}{int}*\ gpu\_variable\ =\ sycl::malloc\_shared<int>(1,\ \mbox{\hyperlink{namespacequeue}{queue}});}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{classtf_1_1_task}{tf::Task}}\ =\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}}.emplace\_on([\&]\ (\mbox{\hyperlink{classtf_1_1sycl_flow}{tf::syclFlow}}\&\ sf)\ \{}
\DoxyCodeLine{\ \ \textcolor{comment}{//\ create\ a\ single\ task\ to\ set\ the\ gpu\_variable\ to\ 1}}
\DoxyCodeLine{\ \ \mbox{\hyperlink{classtf_1_1sycl_task}{tf::syclTask}}\ set\_var\ =\ sf.single\_task(}
\DoxyCodeLine{\ \ \ \ [gpu\_variable]\ ()\ \{\ *gpu\_variable\ =\ 1;\ \}}
\DoxyCodeLine{\ \ );}
\DoxyCodeLine{\ \ \textcolor{comment}{//\ create\ one\ kernel\ task\ that\ needs\ access\ to\ gpu\_variable}}
\DoxyCodeLine{\ \ \mbox{\hyperlink{classtf_1_1sycl_task}{tf::syclTask}}\ kernel1\ =\ sf.parallel\_for(}
\DoxyCodeLine{\ \ \ \ sycl::range<1>(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}),\ [=]\ (sycl::id<1>\ \textcolor{keywordtype}{id})\ \{\ data1[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}]\ *=\ gpu\_variable;\ \}}
\DoxyCodeLine{\ \ );}
\DoxyCodeLine{\ \ set\_par.\mbox{\hyperlink{classtf_1_1sycl_task_a92d0dd0929b9ac4e46baf4d546497389}{precede}}(kernel1);}
\DoxyCodeLine{\},\ \mbox{\hyperlink{namespaceluisa_aa1eb922874c2e5b0b13f4fc9a37747eb}{queue}});}

\end{DoxyCode}
 