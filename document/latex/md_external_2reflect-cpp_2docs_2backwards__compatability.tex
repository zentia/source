\chapter{Maintaining backwards compatability}
\hypertarget{md_external_2reflect-cpp_2docs_2backwards__compatability}{}\label{md_external_2reflect-cpp_2docs_2backwards__compatability}\index{Maintaining backwards compatability@{Maintaining backwards compatability}}
\label{md_external_2reflect-cpp_2docs_2backwards__compatability_autotoc_md523}%
\Hypertarget{md_external_2reflect-cpp_2docs_2backwards__compatability_autotoc_md523}%


If you change your structs, you probably want to be able to interact with data generated by previous versions of your structs. This section explains how you can do that.

For the purpose of this section, any field of type {\ttfamily std\+::optional}, {\ttfamily std\+::shared\+\_\+ptr} or {\ttfamily std\+::unique\+\_\+ptr} is an optional field. Any other fields are required.

Please refer to the section on optional fields for details.\hypertarget{md_external_2reflect-cpp_2docs_2backwards__compatability_autotoc_md524}{}\doxysection{\texorpdfstring{Rules}{Rules}}\label{md_external_2reflect-cpp_2docs_2backwards__compatability_autotoc_md524}
The following rules apply\+:


\begin{DoxyItemize}
\item You {\itshape can} add optional fields.
\item You {\itshape can} remove any optional or required fields, if they are no longer needed.
\item You {\itshape can} change the field names of any optional fields.
\item You {\itshape can} change the order of any existing fields.
\item You {\itshape can not} add any required fields.
\item You {\itshape can not} change the field names of any required fields.
\end{DoxyItemize}\hypertarget{md_external_2reflect-cpp_2docs_2backwards__compatability_autotoc_md525}{}\doxysection{\texorpdfstring{API versioning}{API versioning}}\label{md_external_2reflect-cpp_2docs_2backwards__compatability_autotoc_md525}
If you find it difficult to follow the rules as stated above or you cannot guarantee that you will always be able to follow them in the future, you might want to use API versioning.

You can either use {\ttfamily \doxylink{structrfl_1_1_tagged_union}{rfl\+::\+Tagged\+Union}} or externally tagged variants\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct\ }API\_v\_1\_0\ \{}
\DoxyCodeLine{\ \ \textcolor{keyword}{using\ }Tag\ =\ rfl::Literal<\textcolor{stringliteral}{"{}v1.0"{}}>;}
\DoxyCodeLine{\ \ ...}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{struct\ }API\_v\_1\_1\ \{}
\DoxyCodeLine{\ \ \textcolor{keyword}{using\ }Tag\ =\ rfl::Literal<\textcolor{stringliteral}{"{}v1.1"{}}>;}
\DoxyCodeLine{\ \ ...}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{...}
\DoxyCodeLine{}
\DoxyCodeLine{using\ APIs\ =\ \mbox{\hyperlink{structrfl_1_1_tagged_union}{rfl::TaggedUnion}}<\textcolor{stringliteral}{"{}version"{}},\ API\_v\_1\_0,\ API\_v\_1\_1,\ ...>;}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct\ }API\_v\_1\_0\ \{}
\DoxyCodeLine{\ \ ...}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{struct\ }API\_v\_1\_1\ \{}
\DoxyCodeLine{\ \ ...}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{...}
\DoxyCodeLine{}
\DoxyCodeLine{using\ APIs\ =\ \mbox{\hyperlink{classrfl_1_1_variant}{rfl::Variant}}<\mbox{\hyperlink{structrfl_1_1_field}{rfl::Field}}<\textcolor{stringliteral}{"{}v1.0"{}},\ API\_v\_1\_0>,\ \mbox{\hyperlink{structrfl_1_1_field}{rfl::Field}}<\textcolor{stringliteral}{"{}v1.1"{}},\ API\_v\_1\_1>,\ ...>;}

\end{DoxyCode}
 