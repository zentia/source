\doxysubsubsection{The class hierarchy}
\hypertarget{_topic_class_hierarchy}{}\label{_topic_class_hierarchy}\index{The class hierarchy@{The class hierarchy}}
This page explains the design of the core classes in \doxylink{namespace_eigen}{Eigen}\textquotesingle{}s class hierarchy and how they fit together. Casual users probably need not concern themselves with these details, but it may be useful for both advanced users and \doxylink{namespace_eigen}{Eigen} developers.

\textbackslash{}eigen\+Auto\+Toc\hypertarget{_topic_class_hierarchy_TopicClassHierarchyPrinciples}{}\doxysubsubsubsection{\texorpdfstring{Principles}{Principles}}\label{_topic_class_hierarchy_TopicClassHierarchyPrinciples}
\doxylink{namespace_eigen}{Eigen}\textquotesingle{}s class hierarchy is designed so that virtual functions are avoided where their overhead would significantly impair performance. Instead, \doxylink{namespace_eigen}{Eigen} achieves polymorphism with the Curiously Recurring Template Pattern (CRTP). In this pattern, the base class (for instance, {\ttfamily \doxylink{class_eigen_1_1_matrix_base}{Matrix\+Base}}) is in fact a template class, and the derived class (for instance, {\ttfamily \doxylink{class_eigen_1_1_matrix}{Matrix}}) inherits the base class with the derived class itself as a template argument (in this case, {\ttfamily \doxylink{class_eigen_1_1_matrix}{Matrix}} inherits from {\ttfamily \doxylink{class_eigen_1_1_matrix_base}{Matrix\+Base}\texorpdfstring{$<$}{<}\doxylink{class_eigen_1_1_matrix}{Matrix}\texorpdfstring{$>$}{>}}). This allows \doxylink{namespace_eigen}{Eigen} to resolve the polymorphic function calls at compile time.

In addition, the design avoids multiple inheritance. One reason for this is that in our experience, some compilers (like MSVC) fail to perform empty base class optimization, which is crucial for our fixed-\/size types.\hypertarget{_topic_class_hierarchy_TopicClassHierarchyCoreClasses}{}\doxysubsubsubsection{\texorpdfstring{The core classes}{The core classes}}\label{_topic_class_hierarchy_TopicClassHierarchyCoreClasses}
These are the classes that you need to know about if you want to write functions that accept or return \doxylink{namespace_eigen}{Eigen} objects.


\begin{DoxyItemize}
\item \doxylink{class_eigen_1_1_matrix}{Matrix} means plain dense matrix. If {\ttfamily m} is a {\ttfamily Matrix}, then, for instance, {\ttfamily m+m} is no longer a {\ttfamily Matrix}, it is a "{}matrix expression"{}.
\item \doxylink{class_eigen_1_1_matrix_base}{Matrix\+Base} means dense matrix expression. This means that a {\ttfamily Matrix\+Base} is something that can be added, matrix-\/multiplied, LU-\/decomposed, QR-\/decomposed... All matrix expression classes, including {\ttfamily Matrix} itself, inherit {\ttfamily Matrix\+Base}.
\item \doxylink{class_eigen_1_1_array}{Array} means plain dense array. If {\ttfamily x} is an {\ttfamily Array}, then, for instance, {\ttfamily x+x} is no longer an {\ttfamily Array}, it is an "{}array expression"{}.
\item \doxylink{class_eigen_1_1_array_base}{Array\+Base} means dense array expression. This means that an {\ttfamily Array\+Base} is something that can be added, array-\/multiplied, and on which you can perform all sorts of array operations... All array expression classes, including {\ttfamily Array} itself, inherit {\ttfamily Array\+Base}.
\item \doxylink{class_eigen_1_1_dense_base}{Dense\+Base} means dense (matrix or array) expression. Both {\ttfamily Array\+Base} and {\ttfamily Matrix\+Base} inherit {\ttfamily Dense\+Base}. {\ttfamily Dense\+Base} is where all the methods go that apply to dense expressions regardless of whether they are matrix or array expressions. For example, the \doxylink{class_eigen_1_1_dense_base_ab8e42e67c5cfd5fa13e684642f0f65bf}{block(...) } methods are in {\ttfamily Dense\+Base}.
\end{DoxyItemize}\hypertarget{_topic_class_hierarchy_TopicClassHierarchyBaseClasses}{}\doxysubsubsubsection{\texorpdfstring{Base classes}{Base classes}}\label{_topic_class_hierarchy_TopicClassHierarchyBaseClasses}
These classes serve as base classes for the five core classes mentioned above. They are more internal and so less interesting for users of the \doxylink{namespace_eigen}{Eigen} library.


\begin{DoxyItemize}
\item \doxylink{class_eigen_1_1_plain_object_base}{Plain\+Object\+Base} means dense (matrix or array) plain object, i.\+e. something that stores its own dense array of coefficients. This is where, for instance, the \doxylink{class_eigen_1_1_plain_object_base_a99d9054ee2d5a40c6e00ded0265e9cea}{resize() } methods go. {\ttfamily Plain\+Object\+Base} is inherited by {\ttfamily Matrix} and by {\ttfamily Array}. But above, we said that {\ttfamily Matrix} inherits {\ttfamily Matrix\+Base} and {\ttfamily Array} inherits {\ttfamily Array\+Base}. So does that mean multiple inheritance? No, because {\ttfamily Plain\+Object\+Base} {\itshape itself} inherits {\ttfamily Matrix\+Base} or {\ttfamily Array\+Base} depending on whether we are in the matrix or array case. When we said above that {\ttfamily Matrix} inherited {\ttfamily Matrix\+Base}, we omitted to say it does so indirectly via {\ttfamily Plain\+Object\+Base}. Same for {\ttfamily Array}.
\item \doxylink{class_eigen_1_1_dense_coeffs_base}{Dense\+Coeffs\+Base} means something that has dense coefficient accessors. It is a base class for {\ttfamily Dense\+Base}. The reason for {\ttfamily Dense\+Coeffs\+Base} to exist is that the set of available coefficient accessors is very different depending on whether a dense expression has direct memory access or not (the {\ttfamily Direct\+Access\+Bit} flag). For example, if {\ttfamily x} is a plain matrix, then {\ttfamily x} has direct access, and {\ttfamily x.\+transpose()} and {\ttfamily x.\+block(...)} also have direct access, because their coefficients can be read right off memory, but for example, {\ttfamily x+x} does not have direct memory access, because obtaining any of its coefficients requires a computation (an addition), it can\textquotesingle{}t be just read off memory.
\item \doxylink{struct_eigen_1_1_eigen_base}{Eigen\+Base} means anything that can be evaluated into a plain dense matrix or array (even if that would be a bad idea). {\ttfamily Eigen\+Base} is really the absolute base class for anything that remotely looks like a matrix or array. It is a base class for {\ttfamily Dense\+Coeffs\+Base}, so it sits below all our dense class hierarchy, but it is not limited to dense expressions. For example, {\ttfamily Eigen\+Base} is also inherited by diagonal matrices, sparse matrices, etc...
\end{DoxyItemize}\hypertarget{_topic_class_hierarchy_TopicClassHierarchyInheritanceDiagrams}{}\doxysubsubsubsection{\texorpdfstring{Inheritance diagrams}{Inheritance diagrams}}\label{_topic_class_hierarchy_TopicClassHierarchyInheritanceDiagrams}
The inheritance diagram for \doxylink{class_eigen_1_1_matrix}{Matrix} looks as follows\+:


\begin{DoxyPre}
\doxylink{struct_eigen_1_1_eigen_base}{EigenBase}<Matrix>
  <-\/-\/ \doxylink{class_eigen_1_1_dense_coeffs_base}{DenseCoeffsBase}<Matrix>    (direct access case)
    <-\/-\/ \doxylink{class_eigen_1_1_dense_base}{DenseBase}<Matrix>
      <-\/-\/ \doxylink{class_eigen_1_1_matrix_base}{MatrixBase}<Matrix>
        <-\/-\/ \doxylink{class_eigen_1_1_plain_object_base}{PlainObjectBase}<Matrix>    (matrix case)
          <-\/-\/ \doxylink{class_eigen_1_1_matrix}{Matrix}
\end{DoxyPre}


The inheritance diagram for \doxylink{class_eigen_1_1_array}{Array} looks as follows\+:


\begin{DoxyPre}
\doxylink{struct_eigen_1_1_eigen_base}{EigenBase}<Array>
  <-\/-\/ \doxylink{class_eigen_1_1_dense_coeffs_base}{DenseCoeffsBase}<Array>    (direct access case)
    <-\/-\/ \doxylink{class_eigen_1_1_dense_base}{DenseBase}<Array>
      <-\/-\/ \doxylink{class_eigen_1_1_array_base}{ArrayBase}<Array>
        <-\/-\/ \doxylink{class_eigen_1_1_plain_object_base}{PlainObjectBase}<Array>    (array case)
          <-\/-\/ \doxylink{class_eigen_1_1_array}{Array}
\end{DoxyPre}


The inheritance diagram for some other matrix expression class, here denoted by {\ttfamily Some\+Matrix\+Xpr}, looks as follows\+:


\begin{DoxyPre}
\doxylink{struct_eigen_1_1_eigen_base}{EigenBase}<SomeMatrixXpr>
  <-\/-\/ \doxylink{class_eigen_1_1_dense_coeffs_base}{DenseCoeffsBase}<SomeMatrixXpr>    (direct access or no direct access case)
    <-\/-\/ \doxylink{class_eigen_1_1_dense_base}{DenseBase}<SomeMatrixXpr>
      <-\/-\/ \doxylink{class_eigen_1_1_matrix_base}{MatrixBase}<SomeMatrixXpr>
        <-\/-\/ SomeMatrixXpr
\end{DoxyPre}


The inheritance diagram for some other array expression class, here denoted by {\ttfamily Some\+Array\+Xpr}, looks as follows\+:


\begin{DoxyPre}
\doxylink{struct_eigen_1_1_eigen_base}{EigenBase}<SomeArrayXpr>
  <-\/-\/ \doxylink{class_eigen_1_1_dense_coeffs_base}{DenseCoeffsBase}<SomeArrayXpr>    (direct access or no direct access case)
    <-\/-\/ \doxylink{class_eigen_1_1_dense_base}{DenseBase}<SomeArrayXpr>
      <-\/-\/ \doxylink{class_eigen_1_1_array_base}{ArrayBase}<SomeArrayXpr>
        <-\/-\/ SomeArrayXpr
\end{DoxyPre}


Finally, consider an example of something that is not a dense expression, for instance a diagonal matrix. The corresponding inheritance diagram is\+:


\begin{DoxyPre}
\doxylink{struct_eigen_1_1_eigen_base}{EigenBase}<DiagonalMatrix>
  <-\/-\/ \doxylink{class_eigen_1_1_diagonal_base}{DiagonalBase}<DiagonalMatrix>
    <-\/-\/ \doxylink{class_eigen_1_1_diagonal_matrix}{DiagonalMatrix}
\end{DoxyPre}
 