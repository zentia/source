\doxysection{Direct\+XBase.\+h}
\hypertarget{_direct_x_base_8h_source}{}\label{_direct_x_base_8h_source}\index{external/taskflow/3rd-\/party/tbb/examples/parallel\_for/tachyon/msvs/uwp/DirectXBase.h@{external/taskflow/3rd-\/party/tbb/examples/parallel\_for/tachyon/msvs/uwp/DirectXBase.h}}
\mbox{\hyperlink{_direct_x_base_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <wrl/client.h>}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <d3d11\_1.h>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <d2d1\_1.h>}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <d2d1effects.h>}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <dwrite\_1.h>}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ <wincodec.h>}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_app_8xaml_8h}{App.xaml.h}}"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <agile.h>}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#pragma\ warning\ (disable:\ 4449)}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{comment}{//\ Helper\ utilities\ to\ make\ DirectX\ APIs\ work\ with\ exceptions}}
\DoxyCodeLine{00031\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_d_x}{DX}}}
\DoxyCodeLine{00032\ \{}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_d_x_aa15dd958b09a7ddbfdf9f4c34d2e8f52}{ThrowIfFailed}}(HRESULT\ hr)}
\DoxyCodeLine{00034\ \ \ \ \ \{}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (FAILED(hr))}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ a\ breakpoint\ on\ this\ line\ to\ catch\ DirectX\ API\ errors}}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ Platform::Exception::CreateException(hr);}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00040\ \ \ \ \ \}}
\DoxyCodeLine{00041\ \}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{comment}{//\ Helper\ class\ that\ initializes\ DirectX\ APIs}}
\DoxyCodeLine{00044\ \textcolor{keyword}{ref\ class}\ DirectXBase\ \textcolor{keyword}{abstract}}
\DoxyCodeLine{00045\ \{}
\DoxyCodeLine{00046\ \mbox{\hyperlink{namespaceinternal}{internal}}:}
\DoxyCodeLine{00047\ \ \ \ \ DirectXBase();}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabstract_aaa6a9122e00cafba61a2f253df50e340}{Initialize}}(Windows::UI::Core::CoreWindow\string^\ \mbox{\hyperlink{joysticks_8c_a80de27bd7dc4e2b2ad3d5895b97a70f0}{window}},\ Windows::UI::Xaml::Controls::SwapChainBackgroundPanel\string^\ panel,\ \textcolor{keywordtype}{float}\ dpi);}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabstract_ae5d9c0f184dd5b93fa25c592b1216a48}{CreateDeviceIndependentResources}}();}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabstract_a7552b9f91e3323806eaa5ee1ff98272b}{CreateDeviceResources}}();}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabstract_a919866f3e1802ac79792f1298c5ece87}{SetDpi}}(\textcolor{keywordtype}{float}\ dpi);}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabstract_acfccc8b9e516e87c3e04cf09221e0992}{CreateWindowSizeDependentResources}}();}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabstract_a3804ec15b30b817f87d5d3a8e85675c9}{UpdateForWindowSizeChange}}();}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabstract_ac1ca23d738617f830fc0914e0ed1fb0d}{Render}}()\ =\ 0;}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabstract_a05542813f28858202c441b8a6cfe3f72}{Present}}();}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{classabstract_a08561ac9785cb94afcb6b46c418166f8}{ConvertDipsToPixels}}(\textcolor{keywordtype}{float}\ dips);}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \textcolor{keyword}{protected}\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ Platform::Agile<Windows::UI::Core::CoreWindow>\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabstract_af768060de8c1ef1bdc70b4555736b4ab}{m\_window}};}
\DoxyCodeLine{00063\ \ \ \ \ Windows::UI::Xaml::Controls::SwapChainBackgroundPanel\string^\ \mbox{\hyperlink{classabstract_a7fae023bc0051c223cbe6afed8e6ec18}{m\_panel}};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{comment}{//\ Direct2D\ Objects}}
\DoxyCodeLine{00066\ \ \ \ \ Microsoft::WRL::ComPtr<ID2D1Factory1>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabstract_a6aec73708a3b9fd80c9114bd32748354}{m\_d2dFactory}};}
\DoxyCodeLine{00067\ \ \ \ \ Microsoft::WRL::ComPtr<ID2D1Device>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabstract_a162dd28edfd4d000fe649e80bf34f19d}{m\_d2dDevice}};}
\DoxyCodeLine{00068\ \ \ \ \ Microsoft::WRL::ComPtr<ID2D1DeviceContext>\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabstract_a49a51b8af4b1aef013e6a5416d98a396}{m\_d2dContext}};}
\DoxyCodeLine{00069\ \ \ \ \ Microsoft::WRL::ComPtr<ID2D1Bitmap1>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabstract_a041c4ff1df46b071642592772cdac97f}{m\_d2dTargetBitmap}};}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{comment}{//\ DirectWrite\ \&\ Windows\ Imaging\ Component\ Objects}}
\DoxyCodeLine{00072\ \ \ \ \ Microsoft::WRL::ComPtr<IDWriteFactory1>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabstract_aa33621f048234b361eb92e906a07cf6e}{m\_dwriteFactory}};}
\DoxyCodeLine{00073\ \ \ \ \ Microsoft::WRL::ComPtr<IWICImagingFactory2>\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabstract_a1dd9bbdc19b6d0c63c098ef8ec416b0e}{m\_wicFactory}};}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{comment}{//\ Direct3D\ Objects}}
\DoxyCodeLine{00076\ \ \ \ \ Microsoft::WRL::ComPtr<ID3D11Device1>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabstract_a73f1ca066d93cb83467e62dc1f8dddac}{m\_d3dDevice}};}
\DoxyCodeLine{00077\ \ \ \ \ Microsoft::WRL::ComPtr<ID3D11DeviceContext1>\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabstract_acac768d8178b3beed2ebc78a64434638}{m\_d3dContext}};}
\DoxyCodeLine{00078\ \ \ \ \ Microsoft::WRL::ComPtr<IDXGISwapChain1>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabstract_a96c11e831b010b4cc43ee62ed826d0c1}{m\_swapChain}};}
\DoxyCodeLine{00079\ \ \ \ \ Microsoft::WRL::ComPtr<ID3D11RenderTargetView>\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabstract_a0a941d0ad810d31762dedb5c2ccba1d6}{m\_renderTargetView}};}
\DoxyCodeLine{00080\ \ \ \ \ Microsoft::WRL::ComPtr<ID3D11DepthStencilView>\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabstract_acdb8ad6e8493e81b1c563e6810e8cd29}{m\_depthStencilView}};}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ D3D\_FEATURE\_LEVEL\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabstract_a21e1e4ef4c3625fa1848d8942a238209}{m\_featureLevel}};}
\DoxyCodeLine{00083\ \ \ \ \ Windows::Foundation::Size\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabstract_a39f9dc27bbfd0f4c87f180a2b09af30f}{m\_renderTargetSize}};}
\DoxyCodeLine{00084\ \ \ \ \ Windows::Foundation::Rect\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabstract_a620a6e1076640a09e5417af0317e392d}{m\_windowBounds}};}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabstract_ac810cfc965eb3e8f2dc81c96a6d57968}{m\_dpi}};}
\DoxyCodeLine{00086\ \};}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \textcolor{preprocessor}{\#pragma\ warning\ (default:\ 4449)}}

\end{DoxyCode}
