\doxysection{external/taskflow/3rd-\/party/tbb/src/test/harness.h 文件参考}
\hypertarget{harness_8h}{}\label{harness_8h}\index{external/taskflow/3rd-\/party/tbb/src/test/harness.h@{external/taskflow/3rd-\/party/tbb/src/test/harness.h}}
{\ttfamily \#include "{}tbb/tbb\+\_\+config.\+h"{}}\newline
{\ttfamily \#include "{}harness\+\_\+defs.\+h"{}}\newline
{\ttfamily \#include $<$cstdlib$>$}\newline
{\ttfamily \#include $<$cstring$>$}\newline
{\ttfamily \#include $<$cerrno$>$}\newline
{\ttfamily \#include $<$cctype$>$}\newline
{\ttfamily \#include $<$new$>$}\newline
{\ttfamily \#include $<$pthread.\+h$>$}\newline
{\ttfamily \#include "{}harness\+\_\+runtime\+\_\+loader.\+h"{}}\newline
{\ttfamily \#include "{}harness\+\_\+report.\+h"{}}\newline
{\ttfamily \#include $<$exception$>$}\newline
{\ttfamily \#include "{}harness\+\_\+assert.\+h"{}}\newline
harness.\+h 的引用(Include)关系图\+:
% FIG 0
\doxysubsubsection*{类}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_harness_1_1_native_mutex}{Harness\+::\+Native\+Mutex}}
\item 
struct \mbox{\hyperlink{struct_init_reporter}{Init\+Reporter}}
\item 
class \mbox{\hyperlink{class_no_assign}{No\+Assign}}
\begin{DoxyCompactList}\small\item\em \doxylink{class_base}{Base} class for prohibiting compiler-\/generated operator= \end{DoxyCompactList}\item 
class \mbox{\hyperlink{class_no_copy}{No\+Copy}}
\begin{DoxyCompactList}\small\item\em \doxylink{class_base}{Base} class for prohibiting compiler-\/generated copy constructor or operator= \end{DoxyCompactList}\item 
class \mbox{\hyperlink{class_native_parallel_for_task}{Native\+Parallel\+For\+Task$<$ Index, Body $>$}}
\begin{DoxyCompactList}\small\item\em For internal use by template function Native\+Parallel\+For \end{DoxyCompactList}\item 
class \mbox{\hyperlink{class_harness_1_1_no_afterlife}{Harness\+::\+No\+Afterlife}}
\begin{DoxyCompactList}\small\item\em \doxylink{class_base}{Base} class that asserts that no operations are made with the object after its destruction. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{class_harness_1_1_fast_random}{Harness\+::\+Fast\+Random}}
\item 
class \mbox{\hyperlink{class_harness_1_1_fast_random_body}{Harness\+::\+Fast\+Random\+Body$<$ T $>$}}
\item 
class \mbox{\hyperlink{class_harness_1_1_dummy_body}{Harness\+::\+Dummy\+Body}}
\end{DoxyCompactItemize}
\doxysubsubsection*{命名空间}
\begin{DoxyCompactItemize}
\item 
namespace \mbox{\hyperlink{namespace_harness}{Harness}}
\item 
namespace \mbox{\hyperlink{namespace_harness_1_1internal}{Harness\+::internal}}
\end{DoxyCompactItemize}
\doxysubsubsection*{宏定义}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{harness_8h_a708456e0290efec33b8b6b61f94b685a}{HARNESS\+\_\+\+EXPORT}}
\item 
\#define \mbox{\hyperlink{harness_8h_acf150291060caf91f62704d33eedcdde}{REPORT\+\_\+\+FATAL\+\_\+\+ERROR}}~\mbox{\hyperlink{harness__report_8h_a787099914a94ed31fa544b985b55752f}{REPORT}}
\item 
\#define \mbox{\hyperlink{harness_8h_a47bf51675e69e4df432f179f3a8b4f2d}{HARNESS\+\_\+\+DEFAULT\+\_\+\+MIN\+\_\+\+THREADS}}~1
\item 
\#define \mbox{\hyperlink{harness_8h_a698d9e49a51e0bea9e88dac9f8bd49b0}{HARNESS\+\_\+\+DEFAULT\+\_\+\+MAX\+\_\+\+THREADS}}~4
\end{DoxyCompactItemize}
\doxysubsubsection*{类型定义}
\begin{DoxyCompactItemize}
\item 
typedef \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}(\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{harness_8h_a1b93f1a8c723f766b8b5c7c9b5cd1c94}{test\+\_\+error\+\_\+extra\+\_\+t}}) (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}})
\item 
typedef \mbox{\hyperlink{pthread__minport__windows_8h_ad665cf4bf4a61dd23aab712d9c5e9d81}{pthread\+\_\+t}} \mbox{\hyperlink{namespace_harness_a8dcaafd107ad9fba52286ab3fabe68b6}{Harness\+::tid\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsubsection*{枚举}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{namespace_harness_af69f2621193acb5830367304bef3ffdb}{Harness\+::\+Test\+Result}} \{ \mbox{\hyperlink{namespace_harness_af69f2621193acb5830367304bef3ffdbadcc4d407b25d6323252f96a52263ac64}{Harness\+::\+Done}}
, \mbox{\hyperlink{namespace_harness_af69f2621193acb5830367304bef3ffdbac7fec41a351710612372f06ff2b2871b}{Harness\+::\+Skipped}}
, \mbox{\hyperlink{namespace_harness_af69f2621193acb5830367304bef3ffdba6ef56579b99b07644235953202382a37}{Harness\+::\+Unknown}}
 \}
\end{DoxyCompactItemize}
\doxysubsubsection*{函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{harness_8h_ac7bfd5b2c3dd5c7fdbd14f64c92d9c5f}{Test\+Main}} ()
\begin{DoxyCompactList}\small\item\em Entry point to a \doxylink{struct_t_b_b}{TBB} unit test application \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{harness_8h_aead635fc1d8823afa5e4df6cf46e110b}{print\+\_\+call\+\_\+stack}} ()
\begin{DoxyCompactList}\small\item\em Prints current call stack \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{harness_8h_abc505f2fbe0a205435c1b85dde3ee411}{Set\+Harness\+Error\+Processing}} (\mbox{\hyperlink{harness_8h_a1b93f1a8c723f766b8b5c7c9b5cd1c94}{test\+\_\+error\+\_\+extra\+\_\+t}} extra\+\_\+call)
\begin{DoxyCompactList}\small\item\em Set additional handler to process failed assertions \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{harness_8h_a1d87333ad8865fea249c2d82bdf30c7a}{Report\+Error}} (const char \texorpdfstring{$\ast$}{*}filename, \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} line, const char \texorpdfstring{$\ast$}{*}expression, const char \texorpdfstring{$\ast$}{*}message)
\begin{DoxyCompactList}\small\item\em Reports errors issued by failed assertions \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{harness_8h_aa38d00ee0015d0b812f101b548db6135}{Report\+Warning}} (const char \texorpdfstring{$\ast$}{*}filename, \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} line, const char \texorpdfstring{$\ast$}{*}expression, const char \texorpdfstring{$\ast$}{*}message)
\begin{DoxyCompactList}\small\item\em Reports warnings issued by failed warning assertions \end{DoxyCompactList}\item 
{\footnotesize template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, size\+\_\+t N$>$ }\\size\+\_\+t \mbox{\hyperlink{namespace_harness_ab206cca6eab4aa536242981c7c4f3e3c}{Harness\+::array\+\_\+length}} (const \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}(\&)\mbox{[}\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\mbox{]})
\item 
{\footnotesize template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, size\+\_\+t N$>$ }\\\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{namespace_harness_ab1be15de63e4c94f6f879c6ef290f4a5}{Harness\+::end}} (\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}(\&\mbox{\hyperlink{classarray}{array}})\mbox{[}\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\mbox{]})
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{harness_8h_afdda6d1c4184e16b014a78ae53ddf958}{Parse\+Command\+Line}} (\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} argc, char \texorpdfstring{$\ast$}{*}argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Parse command line of the form "{}name \mbox{[}-\/v\mbox{]} \mbox{[}\+Min\+Threads\mbox{[}\+:\+Max\+Threads\mbox{]}\mbox{]}"{} \end{DoxyCompactList}\item 
\mbox{\hyperlink{harness_8h_a708456e0290efec33b8b6b61f94b685a}{HARNESS\+\_\+\+EXPORT}} \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{harness_8h_af1850fbb183de7f743b0f3571e1dbdef}{main}} (\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} argc, char \texorpdfstring{$\ast$}{*}argv\mbox{[}$\,$\mbox{]})
\item 
{\footnotesize template$<$typename Index, typename \mbox{\hyperlink{class_body}{Body}}$>$ }\\\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{harness_8h_ad5b2c9cf4e169014b7919debb3c91d45}{Native\+Parallel\+For}} (Index \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}, const \mbox{\hyperlink{class_body}{Body}} \&body)
\begin{DoxyCompactList}\small\item\em Execute body(i) in parallel for i in the interval \mbox{[}0,n). \end{DoxyCompactList}\item 
{\footnotesize template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ }\\\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{harness_8h_aa0749d3c849e389ed534c5c980354adc}{zero\+\_\+fill}} (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classarray}{array}}, size\+\_\+t \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}})
\begin{DoxyCompactList}\small\item\em The function to zero-\/initialize arrays; useful to avoid warnings \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T1, typename T2$>$ }\\T1 \mbox{\hyperlink{harness_8h_a0db8ad342b6b037f40e434c7c80a0eaa}{min}} (const T1 \&val1, const T2 \&val2)
\begin{DoxyCompactList}\small\item\em Utility template function returning lesser of the two values. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T1, typename T2$>$ }\\T1 \mbox{\hyperlink{harness_8h_a870255027f8b7c8396fb47af24315929}{max}} (const T1 \&val1, const T2 \&val2)
\begin{DoxyCompactList}\small\item\em Utility template function returning greater of the two values. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ }\\static \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{harness_8h_a2cd6d606b7a354545b2cdecca67efa44}{is\+\_\+aligned}} (\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}}, size\+\_\+t alignment)
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{namespace_harness_a6109bacdcb4cd184d842b933d7fb18a4}{Harness\+::\+Sleep}} (\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} ms)
\item 
\mbox{\hyperlink{namespace_harness_a8dcaafd107ad9fba52286ab3fabe68b6}{tid\+\_\+t}} \mbox{\hyperlink{namespace_harness_a3592f6148257145315e054c1e36cea9e}{Harness\+::\+Current\+Tid}} ()
\item 
\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{namespace_harness_a02cbb1155b17196bacbbb2bd45df976e}{Harness\+::\+Set\+Env}} (const char \texorpdfstring{$\ast$}{*}envname, const char \texorpdfstring{$\ast$}{*}envval)
\item 
char \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{namespace_harness_a088ad693af4f25a5b0d97dad282ae93e}{Harness\+::\+Get\+Env}} (const char \texorpdfstring{$\ast$}{*}envname)
\item 
long \mbox{\hyperlink{namespace_harness_aa36f98ebd2a6eaa6c73dae1c46a1d6b7}{Harness\+::\+Get\+Int\+Env}} (const char \texorpdfstring{$\ast$}{*}envname)
\end{DoxyCompactItemize}
\doxysubsubsection*{变量}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{class_harness_1_1_native_mutex}{Native\+Mutex}} \mbox{\hyperlink{namespace_harness_1_1internal_a3d8abf296d4f409306741b64aa3e0c3f}{Harness\+::internal\+::print\+\_\+stack\+\_\+mutex}}
\item 
static \mbox{\hyperlink{struct_init_reporter}{Init\+Reporter}} \mbox{\hyperlink{harness_8h_af11f4cf7f74b3d8903c213be1ba44450}{Init\+Report\+Error}}
\item 
static \mbox{\hyperlink{harness_8h_a1b93f1a8c723f766b8b5c7c9b5cd1c94}{test\+\_\+error\+\_\+extra\+\_\+t}} \mbox{\hyperlink{harness_8h_a2e30922ec0b6ecfc00526cfd993bebf6}{Error\+Extra\+Call}}
\item 
static \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{harness_8h_a464788622bab18d3e81852e65fb6a7c7}{Verbose}}
\begin{DoxyCompactList}\small\item\em Controls level of commentary printed via printf-\/like \doxylink{harness__report_8h_ace9fba7267bf6a9a92654ce7f25c5516}{REMARK()} macro. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{harness_8h_afc1c4a6f82d8f81c0a0fd2525149824a}{Min\+Thread}} = \mbox{\hyperlink{test__mutex__v2_8cpp_a47bf51675e69e4df432f179f3a8b4f2d}{HARNESS\+\_\+\+DEFAULT\+\_\+\+MIN\+\_\+\+THREADS}}
\begin{DoxyCompactList}\small\item\em Minimum number of threads \end{DoxyCompactList}\item 
static \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{harness_8h_a1c41cdeec6c1cec819e816d1adada13b}{Max\+Thread}} = \mbox{\hyperlink{test__mutex__v2_8cpp_a698d9e49a51e0bea9e88dac9f8bd49b0}{HARNESS\+\_\+\+DEFAULT\+\_\+\+MAX\+\_\+\+THREADS}}
\begin{DoxyCompactList}\small\item\em Maximum number of threads \end{DoxyCompactList}\item 
static const unsigned \mbox{\hyperlink{namespace_harness_a0a8a8cbd7efc5037b6dc773772a4b89a}{Harness\+::\+Primes}} \mbox{[}$\,$\mbox{]}
\end{DoxyCompactItemize}


\doxysubsection{宏定义说明}
\Hypertarget{harness_8h_a698d9e49a51e0bea9e88dac9f8bd49b0}\index{harness.h@{harness.h}!HARNESS\_DEFAULT\_MAX\_THREADS@{HARNESS\_DEFAULT\_MAX\_THREADS}}
\index{HARNESS\_DEFAULT\_MAX\_THREADS@{HARNESS\_DEFAULT\_MAX\_THREADS}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{HARNESS\_DEFAULT\_MAX\_THREADS}{HARNESS\_DEFAULT\_MAX\_THREADS}}
{\footnotesize\ttfamily \label{harness_8h_a698d9e49a51e0bea9e88dac9f8bd49b0} 
\#define HARNESS\+\_\+\+DEFAULT\+\_\+\+MAX\+\_\+\+THREADS~4}

\Hypertarget{harness_8h_a47bf51675e69e4df432f179f3a8b4f2d}\index{harness.h@{harness.h}!HARNESS\_DEFAULT\_MIN\_THREADS@{HARNESS\_DEFAULT\_MIN\_THREADS}}
\index{HARNESS\_DEFAULT\_MIN\_THREADS@{HARNESS\_DEFAULT\_MIN\_THREADS}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{HARNESS\_DEFAULT\_MIN\_THREADS}{HARNESS\_DEFAULT\_MIN\_THREADS}}
{\footnotesize\ttfamily \label{harness_8h_a47bf51675e69e4df432f179f3a8b4f2d} 
\#define HARNESS\+\_\+\+DEFAULT\+\_\+\+MIN\+\_\+\+THREADS~1}

\Hypertarget{harness_8h_a708456e0290efec33b8b6b61f94b685a}\index{harness.h@{harness.h}!HARNESS\_EXPORT@{HARNESS\_EXPORT}}
\index{HARNESS\_EXPORT@{HARNESS\_EXPORT}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{HARNESS\_EXPORT}{HARNESS\_EXPORT}}
{\footnotesize\ttfamily \label{harness_8h_a708456e0290efec33b8b6b61f94b685a} 
\#define HARNESS\+\_\+\+EXPORT}

\Hypertarget{harness_8h_acf150291060caf91f62704d33eedcdde}\index{harness.h@{harness.h}!REPORT\_FATAL\_ERROR@{REPORT\_FATAL\_ERROR}}
\index{REPORT\_FATAL\_ERROR@{REPORT\_FATAL\_ERROR}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{REPORT\_FATAL\_ERROR}{REPORT\_FATAL\_ERROR}}
{\footnotesize\ttfamily \label{harness_8h_acf150291060caf91f62704d33eedcdde} 
\#define REPORT\+\_\+\+FATAL\+\_\+\+ERROR~\mbox{\hyperlink{harness__report_8h_a787099914a94ed31fa544b985b55752f}{REPORT}}}



\doxysubsection{类型定义说明}
\Hypertarget{harness_8h_a1b93f1a8c723f766b8b5c7c9b5cd1c94}\index{harness.h@{harness.h}!test\_error\_extra\_t@{test\_error\_extra\_t}}
\index{test\_error\_extra\_t@{test\_error\_extra\_t}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{test\_error\_extra\_t}{test\_error\_extra\_t}}
{\footnotesize\ttfamily \label{harness_8h_a1b93f1a8c723f766b8b5c7c9b5cd1c94} 
typedef \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}(\texorpdfstring{$\ast$}{*} test\+\_\+error\+\_\+extra\+\_\+t) (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}})}



\doxysubsection{函数说明}
\Hypertarget{harness_8h_a2cd6d606b7a354545b2cdecca67efa44}\index{harness.h@{harness.h}!is\_aligned@{is\_aligned}}
\index{is\_aligned@{is\_aligned}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{is\_aligned()}{is\_aligned()}}
{\footnotesize\ttfamily \label{harness_8h_a2cd6d606b7a354545b2cdecca67efa44} 
template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ \\
static \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} is\+\_\+aligned (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}}]{arg}{, }\item[{size\+\_\+t}]{alignment}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

\Hypertarget{harness_8h_af1850fbb183de7f743b0f3571e1dbdef}\index{harness.h@{harness.h}!main@{main}}
\index{main@{main}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily \label{harness_8h_af1850fbb183de7f743b0f3571e1dbdef} 
\mbox{\hyperlink{harness_8h_a708456e0290efec33b8b6b61f94b685a}{HARNESS\+\_\+\+EXPORT}} \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} main (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{argc}{, }\item[{char \texorpdfstring{$\ast$}{*}}]{argv}{\mbox{[}$\,$\mbox{]}}\end{DoxyParamCaption})}

函数调用图\+:
% FIG 1
\Hypertarget{harness_8h_a870255027f8b7c8396fb47af24315929}\index{harness.h@{harness.h}!max@{max}}
\index{max@{max}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{max()}{max()}}
{\footnotesize\ttfamily \label{harness_8h_a870255027f8b7c8396fb47af24315929} 
template$<$typename T1, typename T2$>$ \\
T1 max (\begin{DoxyParamCaption}\item[{const T1 \&}]{val1}{, }\item[{const T2 \&}]{val2}{}\end{DoxyParamCaption})}



Utility template function returning greater of the two values. 

Provided here to avoid including not strict safe $<$algorithm$>$.~\newline
In case operands cause signed/unsigned or size mismatch warnings it is caller\textquotesingle{}s responsibility to do the appropriate cast before calling the function. \Hypertarget{harness_8h_a0db8ad342b6b037f40e434c7c80a0eaa}\index{harness.h@{harness.h}!min@{min}}
\index{min@{min}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{min()}{min()}}
{\footnotesize\ttfamily \label{harness_8h_a0db8ad342b6b037f40e434c7c80a0eaa} 
template$<$typename T1, typename T2$>$ \\
T1 min (\begin{DoxyParamCaption}\item[{const T1 \&}]{val1}{, }\item[{const T2 \&}]{val2}{}\end{DoxyParamCaption})}



Utility template function returning lesser of the two values. 

Provided here to avoid including not strict safe $<$algorithm$>$.~\newline
In case operands cause signed/unsigned or size mismatch warnings it is caller\textquotesingle{}s responsibility to do the appropriate cast before calling the function. \Hypertarget{harness_8h_ad5b2c9cf4e169014b7919debb3c91d45}\index{harness.h@{harness.h}!NativeParallelFor@{NativeParallelFor}}
\index{NativeParallelFor@{NativeParallelFor}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{NativeParallelFor()}{NativeParallelFor()}}
{\footnotesize\ttfamily \label{harness_8h_ad5b2c9cf4e169014b7919debb3c91d45} 
template$<$typename Index, typename \mbox{\hyperlink{class_body}{Body}}$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} Native\+Parallel\+For (\begin{DoxyParamCaption}\item[{Index}]{n}{, }\item[{const \mbox{\hyperlink{class_body}{Body}} \&}]{body}{}\end{DoxyParamCaption})}



Execute body(i) in parallel for i in the interval \mbox{[}0,n). 

Each iteration is performed by a separate thread. \Hypertarget{harness_8h_afdda6d1c4184e16b014a78ae53ddf958}\index{harness.h@{harness.h}!ParseCommandLine@{ParseCommandLine}}
\index{ParseCommandLine@{ParseCommandLine}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{ParseCommandLine()}{ParseCommandLine()}}
{\footnotesize\ttfamily \label{harness_8h_afdda6d1c4184e16b014a78ae53ddf958} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} Parse\+Command\+Line (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{argc}{, }\item[{char \texorpdfstring{$\ast$}{*}}]{argv}{\mbox{[}$\,$\mbox{]}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Parse command line of the form "{}name \mbox{[}-\/v\mbox{]} \mbox{[}\+Min\+Threads\mbox{[}\+:\+Max\+Threads\mbox{]}\mbox{]}"{} 

Sets Verbose, Min\+Thread, and Max\+Thread accordingly. The nthread argument can be a single number or a range of the form m\+:n. \doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} single number m is interpreted as if written m\+:m. The numbers must be non-\/negative. Clients often treat the value 0 as "{}run sequentially."{} \Hypertarget{harness_8h_aead635fc1d8823afa5e4df6cf46e110b}\index{harness.h@{harness.h}!print\_call\_stack@{print\_call\_stack}}
\index{print\_call\_stack@{print\_call\_stack}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{print\_call\_stack()}{print\_call\_stack()}}
{\footnotesize\ttfamily \label{harness_8h_aead635fc1d8823afa5e4df6cf46e110b} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} print\+\_\+call\+\_\+stack (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Prints current call stack 

\Hypertarget{harness_8h_a1d87333ad8865fea249c2d82bdf30c7a}\index{harness.h@{harness.h}!ReportError@{ReportError}}
\index{ReportError@{ReportError}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{ReportError()}{ReportError()}}
{\footnotesize\ttfamily \label{harness_8h_a1d87333ad8865fea249c2d82bdf30c7a} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} Report\+Error (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{filename}{, }\item[{\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{line}{, }\item[{const char \texorpdfstring{$\ast$}{*}}]{expression}{, }\item[{const char \texorpdfstring{$\ast$}{*}}]{message}{}\end{DoxyParamCaption})}



Reports errors issued by failed assertions 

函数调用图\+:
% FIG 2
\Hypertarget{harness_8h_aa38d00ee0015d0b812f101b548db6135}\index{harness.h@{harness.h}!ReportWarning@{ReportWarning}}
\index{ReportWarning@{ReportWarning}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{ReportWarning()}{ReportWarning()}}
{\footnotesize\ttfamily \label{harness_8h_aa38d00ee0015d0b812f101b548db6135} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} Report\+Warning (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{filename}{, }\item[{\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{line}{, }\item[{const char \texorpdfstring{$\ast$}{*}}]{expression}{, }\item[{const char \texorpdfstring{$\ast$}{*}}]{message}{}\end{DoxyParamCaption})}



Reports warnings issued by failed warning assertions 

\Hypertarget{harness_8h_abc505f2fbe0a205435c1b85dde3ee411}\index{harness.h@{harness.h}!SetHarnessErrorProcessing@{SetHarnessErrorProcessing}}
\index{SetHarnessErrorProcessing@{SetHarnessErrorProcessing}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{SetHarnessErrorProcessing()}{SetHarnessErrorProcessing()}}
{\footnotesize\ttfamily \label{harness_8h_abc505f2fbe0a205435c1b85dde3ee411} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} Set\+Harness\+Error\+Processing (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{harness_8h_a1b93f1a8c723f766b8b5c7c9b5cd1c94}{test\+\_\+error\+\_\+extra\+\_\+t}}}]{extra\+\_\+call}{}\end{DoxyParamCaption})}



Set additional handler to process failed assertions 

\Hypertarget{harness_8h_ac7bfd5b2c3dd5c7fdbd14f64c92d9c5f}\index{harness.h@{harness.h}!TestMain@{TestMain}}
\index{TestMain@{TestMain}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{TestMain()}{TestMain()}}
{\footnotesize\ttfamily \label{harness_8h_ac7bfd5b2c3dd5c7fdbd14f64c92d9c5f} 
\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} Test\+Main (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Entry point to a \doxylink{struct_t_b_b}{TBB} unit test application 

It MUST be defined by the test application.

If HARNESS\+\_\+\+NO\+\_\+\+PARSE\+\_\+\+COMMAND\+\_\+\+LINE macro was not explicitly set before including \doxylink{harness_8h}{harness.\+h}, then global variables Min\+Thread, and Max\+Thread will be available and initialized when it is called.

Returns \doxylink{namespace_harness_af69f2621193acb5830367304bef3ffdbadcc4d407b25d6323252f96a52263ac64}{Harness\+::\+Done} when the tests passed successfully. When the test fail, it must not return, calling exit(errcode) or abort() instead. When the test is not supported for the given platform/compiler/etc, it should return \doxylink{namespace_harness_af69f2621193acb5830367304bef3ffdbac7fec41a351710612372f06ff2b2871b}{Harness\+::\+Skipped}.

To provide non-\/standard variant of \doxylink{main-override-static_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}{main()} for the test, define HARNESS\+\_\+\+CUSTOM\+\_\+\+MAIN before including \doxylink{harness_8h}{harness.\+h} \+\_\+\+\_\+\+TBB\+\_\+\+CPP11\+\_\+\+STD\+\_\+\+PLACEHOLDERS\+\_\+\+LINKING\+\_\+\+BROKEN

\+\_\+\+\_\+\+TBB\+\_\+\+SSE\+\_\+\+STACK\+\_\+\+ALIGNMENT\+\_\+\+BROKEN\Hypertarget{harness_8h_aa0749d3c849e389ed534c5c980354adc}\index{harness.h@{harness.h}!zero\_fill@{zero\_fill}}
\index{zero\_fill@{zero\_fill}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{zero\_fill()}{zero\_fill()}}
{\footnotesize\ttfamily \label{harness_8h_aa0749d3c849e389ed534c5c980354adc} 
template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} zero\+\_\+fill (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}}]{array}{, }\item[{size\+\_\+t}]{n}{}\end{DoxyParamCaption})}



The function to zero-\/initialize arrays; useful to avoid warnings 



\doxysubsection{变量说明}
\Hypertarget{harness_8h_a2e30922ec0b6ecfc00526cfd993bebf6}\index{harness.h@{harness.h}!ErrorExtraCall@{ErrorExtraCall}}
\index{ErrorExtraCall@{ErrorExtraCall}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{ErrorExtraCall}{ErrorExtraCall}}
{\footnotesize\ttfamily \label{harness_8h_a2e30922ec0b6ecfc00526cfd993bebf6} 
\mbox{\hyperlink{harness_8h_a1b93f1a8c723f766b8b5c7c9b5cd1c94}{test\+\_\+error\+\_\+extra\+\_\+t}} Error\+Extra\+Call\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{harness_8h_af11f4cf7f74b3d8903c213be1ba44450}\index{harness.h@{harness.h}!InitReportError@{InitReportError}}
\index{InitReportError@{InitReportError}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{InitReportError}{InitReportError}}
{\footnotesize\ttfamily \label{harness_8h_af11f4cf7f74b3d8903c213be1ba44450} 
\mbox{\hyperlink{struct_init_reporter}{Init\+Reporter}} Init\+Report\+Error\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{harness_8h_a1c41cdeec6c1cec819e816d1adada13b}\index{harness.h@{harness.h}!MaxThread@{MaxThread}}
\index{MaxThread@{MaxThread}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{MaxThread}{MaxThread}}
{\footnotesize\ttfamily \label{harness_8h_a1c41cdeec6c1cec819e816d1adada13b} 
\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} Max\+Thread = \mbox{\hyperlink{test__mutex__v2_8cpp_a698d9e49a51e0bea9e88dac9f8bd49b0}{HARNESS\+\_\+\+DEFAULT\+\_\+\+MAX\+\_\+\+THREADS}}\hspace{0.3cm}{\ttfamily [static]}}



Maximum number of threads 

\Hypertarget{harness_8h_afc1c4a6f82d8f81c0a0fd2525149824a}\index{harness.h@{harness.h}!MinThread@{MinThread}}
\index{MinThread@{MinThread}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{MinThread}{MinThread}}
{\footnotesize\ttfamily \label{harness_8h_afc1c4a6f82d8f81c0a0fd2525149824a} 
\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} Min\+Thread = \mbox{\hyperlink{test__mutex__v2_8cpp_a47bf51675e69e4df432f179f3a8b4f2d}{HARNESS\+\_\+\+DEFAULT\+\_\+\+MIN\+\_\+\+THREADS}}\hspace{0.3cm}{\ttfamily [static]}}



Minimum number of threads 

\Hypertarget{harness_8h_a464788622bab18d3e81852e65fb6a7c7}\index{harness.h@{harness.h}!Verbose@{Verbose}}
\index{Verbose@{Verbose}!harness.h@{harness.h}}
\doxysubsubsection{\texorpdfstring{Verbose}{Verbose}}
{\footnotesize\ttfamily \label{harness_8h_a464788622bab18d3e81852e65fb6a7c7} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} Verbose\hspace{0.3cm}{\ttfamily [static]}}



Controls level of commentary printed via printf-\/like \doxylink{harness__report_8h_ace9fba7267bf6a9a92654ce7f25c5516}{REMARK()} macro. 

If true, makes the test print commentary. If false, test should print "{}done"{} and nothing more. 