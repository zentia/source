\doxysection{Eigen\+::internal\+::Inner\+Reducer\texorpdfstring{$<$}{<} Self, Op, const Eigen\+::Sycl\+Device \texorpdfstring{$>$}{>} 模板结构体 参考}
\hypertarget{struct_eigen_1_1internal_1_1_inner_reducer_3_01_self_00_01_op_00_01const_01_eigen_1_1_sycl_device_01_4}{}\label{struct_eigen_1_1internal_1_1_inner_reducer_3_01_self_00_01_op_00_01const_01_eigen_1_1_sycl_device_01_4}\index{Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$@{Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$}}


{\ttfamily \#include $<$Tensor\+Reduction\+Sycl.\+h$>$}

\doxysubsubsection*{Public 类型}
\begin{DoxyCompactItemize}
\item 
typedef Self\+::\+Coeff\+Return\+Type \mbox{\hyperlink{struct_eigen_1_1internal_1_1_inner_reducer_3_01_self_00_01_op_00_01const_01_eigen_1_1_sycl_device_01_4_acef5848945739203d911256e0b846ba5}{Coeff\+Return\+Type}}
\end{DoxyCompactItemize}
\doxysubsubsection*{静态 Public 成员函数}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{struct_eigen_1_1internal_1_1_inner_reducer_3_01_self_00_01_op_00_01const_01_eigen_1_1_sycl_device_01_4_a471bb175078f166e0d5c4040fc4494d9}{run}} (const Self \&self, Op \&reducer, const Eigen\+::\+Sycl\+Device \&dev, \mbox{\hyperlink{struct_eigen_1_1internal_1_1_inner_reducer_3_01_self_00_01_op_00_01const_01_eigen_1_1_sycl_device_01_4_acef5848945739203d911256e0b846ba5}{Coeff\+Return\+Type}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}}, typename Self\+::\+Index, typename Self\+::\+Index num\+\_\+coeffs\+\_\+to\+\_\+preserve)
\item 
static EIGEN\+\_\+\+DEVICE\+\_\+\+FUNC \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{struct_eigen_1_1internal_1_1_inner_reducer_ab0f80bf14245c83efc5e5616f2775a7e}{run}} (const Self \&, Op \&, const const Eigen\+::\+Sycl\+Device \&, typename Self\+::\+Coeff\+Return\+Type \texorpdfstring{$\ast$}{*}, typename Self\+::\+Index, typename Self\+::\+Index)
\end{DoxyCompactItemize}
\doxysubsubsection*{静态 Public 属性}
\begin{DoxyCompactItemize}
\item 
static const \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{struct_eigen_1_1internal_1_1_inner_reducer_3_01_self_00_01_op_00_01const_01_eigen_1_1_sycl_device_01_4_a9a67d8b5bbd79ec618e724ccf81fdce5}{Has\+Optimized\+Implementation}} = \mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}}
\item 
static const \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{struct_eigen_1_1internal_1_1_inner_reducer_aa157c28481202ce463fd531c4c12104c}{Has\+Optimized\+Implementation}}
\end{DoxyCompactItemize}


\doxysubsection{成员类型定义说明}
\Hypertarget{struct_eigen_1_1internal_1_1_inner_reducer_3_01_self_00_01_op_00_01const_01_eigen_1_1_sycl_device_01_4_acef5848945739203d911256e0b846ba5}\index{Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$@{Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$}!CoeffReturnType@{CoeffReturnType}}
\index{CoeffReturnType@{CoeffReturnType}!Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$@{Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$}}
\doxysubsubsection{\texorpdfstring{CoeffReturnType}{CoeffReturnType}}
{\footnotesize\ttfamily \label{struct_eigen_1_1internal_1_1_inner_reducer_3_01_self_00_01_op_00_01const_01_eigen_1_1_sycl_device_01_4_acef5848945739203d911256e0b846ba5} 
template$<$typename Self, typename Op$>$ \\
typedef Self\+::\+Coeff\+Return\+Type \mbox{\hyperlink{struct_eigen_1_1internal_1_1_inner_reducer}{Eigen\+::internal\+::\+Inner\+Reducer}}$<$ Self, Op, const Eigen\+::\+Sycl\+Device $>$\+::\+Coeff\+Return\+Type}



\doxysubsection{成员函数说明}
\Hypertarget{struct_eigen_1_1internal_1_1_inner_reducer_ab0f80bf14245c83efc5e5616f2775a7e}\index{Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$@{Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$}!run@{run}}
\index{run@{run}!Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$@{Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$}}
\doxysubsubsection{\texorpdfstring{run()}{run()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{struct_eigen_1_1internal_1_1_inner_reducer_ab0f80bf14245c83efc5e5616f2775a7e} 
static EIGEN\+\_\+\+DEVICE\+\_\+\+FUNC \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{struct_eigen_1_1internal_1_1_inner_reducer}{Eigen\+::internal\+::\+Inner\+Reducer}}$<$ Self, Op, const Eigen\+::\+Sycl\+Device $>$\+::run (\begin{DoxyParamCaption}\item[{const Self \&}]{}{, }\item[{Op \&}]{}{, }\item[{const const Eigen\+::\+Sycl\+Device \&}]{}{, }\item[{typename Self\+::\+Coeff\+Return\+Type \texorpdfstring{$\ast$}{*}}]{}{, }\item[{typename Self\+::\+Index}]{}{, }\item[{typename Self\+::\+Index}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

\Hypertarget{struct_eigen_1_1internal_1_1_inner_reducer_3_01_self_00_01_op_00_01const_01_eigen_1_1_sycl_device_01_4_a471bb175078f166e0d5c4040fc4494d9}\index{Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$@{Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$}!run@{run}}
\index{run@{run}!Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$@{Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$}}
\doxysubsubsection{\texorpdfstring{run()}{run()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{struct_eigen_1_1internal_1_1_inner_reducer_3_01_self_00_01_op_00_01const_01_eigen_1_1_sycl_device_01_4_a471bb175078f166e0d5c4040fc4494d9} 
template$<$typename Self, typename Op$>$ \\
static \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{struct_eigen_1_1internal_1_1_inner_reducer}{Eigen\+::internal\+::\+Inner\+Reducer}}$<$ Self, Op, const Eigen\+::\+Sycl\+Device $>$\+::run (\begin{DoxyParamCaption}\item[{const Self \&}]{self}{, }\item[{Op \&}]{reducer}{, }\item[{const Eigen\+::\+Sycl\+Device \&}]{dev}{, }\item[{\mbox{\hyperlink{struct_eigen_1_1internal_1_1_inner_reducer_3_01_self_00_01_op_00_01const_01_eigen_1_1_sycl_device_01_4_acef5848945739203d911256e0b846ba5}{Coeff\+Return\+Type}} \texorpdfstring{$\ast$}{*}}]{output}{, }\item[{typename Self\+::\+Index}]{}{, }\item[{typename Self\+::\+Index}]{num\+\_\+coeffs\+\_\+to\+\_\+preserve}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

this is the child of reduction

creating the shared memory for calculating reduction. This one is used to collect all the reduced value of shared memory as we dont have global barrier on GPU. Once it is saved we can recursively apply reduction on it in order to reduce the whole.

reduction cannot be captured automatically through our device conversion recursion. The reason is that reduction has two behaviour the first behaviour is when it is used as a root to lauch the sub-\/kernel. The second one is when it is treated as a leafnode to pass the calculated result to its parent kernel. While the latter is automatically detected through our device expression generator. The former is created here.

This is the evaluator for device\+\_\+self\+\_\+expr. This is exactly similar to the self which has been passed to run function. The difference is the device\+\_\+evaluator is detectable and recognisable on the device.

const cast added as a naive solution to solve the qualifier drop error函数调用图\+:
% FIG 0


\doxysubsection{类成员变量说明}
\Hypertarget{struct_eigen_1_1internal_1_1_inner_reducer_aa157c28481202ce463fd531c4c12104c}\index{Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$@{Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$}!HasOptimizedImplementation@{HasOptimizedImplementation}}
\index{HasOptimizedImplementation@{HasOptimizedImplementation}!Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$@{Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$}}
\doxysubsubsection{\texorpdfstring{HasOptimizedImplementation}{HasOptimizedImplementation}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{struct_eigen_1_1internal_1_1_inner_reducer_aa157c28481202ce463fd531c4c12104c} 
const \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{struct_eigen_1_1internal_1_1_inner_reducer}{Eigen\+::internal\+::\+Inner\+Reducer}}$<$ Self, Op, const Eigen\+::\+Sycl\+Device $>$\+::\+Has\+Optimized\+Implementation\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{struct_eigen_1_1internal_1_1_inner_reducer_3_01_self_00_01_op_00_01const_01_eigen_1_1_sycl_device_01_4_a9a67d8b5bbd79ec618e724ccf81fdce5}\index{Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$@{Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$}!HasOptimizedImplementation@{HasOptimizedImplementation}}
\index{HasOptimizedImplementation@{HasOptimizedImplementation}!Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$@{Eigen::internal::InnerReducer$<$ Self, Op, const Eigen::SyclDevice $>$}}
\doxysubsubsection{\texorpdfstring{HasOptimizedImplementation}{HasOptimizedImplementation}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{struct_eigen_1_1internal_1_1_inner_reducer_3_01_self_00_01_op_00_01const_01_eigen_1_1_sycl_device_01_4_a9a67d8b5bbd79ec618e724ccf81fdce5} 
template$<$typename Self, typename Op$>$ \\
const \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{struct_eigen_1_1internal_1_1_inner_reducer}{Eigen\+::internal\+::\+Inner\+Reducer}}$<$ Self, Op, const Eigen\+::\+Sycl\+Device $>$\+::\+Has\+Optimized\+Implementation = \mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}}\hspace{0.3cm}{\ttfamily [static]}}



该结构体的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/taskflow/3rd-\/party/eigen-\/3.\+3.\+7/unsupported/\+Eigen/\+CXX11/src/\+Tensor/\mbox{\hyperlink{_tensor_reduction_sycl_8h}{Tensor\+Reduction\+Sycl.\+h}}\end{DoxyCompactItemize}
