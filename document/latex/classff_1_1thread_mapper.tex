\doxysection{ff\+::thread\+Mapper类 参考}
\hypertarget{classff_1_1thread_mapper}{}\label{classff_1_1thread_mapper}\index{ff::threadMapper@{ff::threadMapper}}


The thread mapper allows to map threads to specific core using a predefined mapping policy.  




{\ttfamily \#include $<$mapper.\+hpp$>$}



ff\+::thread\+Mapper 的协作图\+:
% FIG 0
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classff_1_1thread_mapper_a866a7064d47917d9e4af03ddfa7ae2fc}{thread\+Mapper}} ()
\item 
\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{classff_1_1thread_mapper_a26c07e9815c8da6bf496fccff29bf0c8}{set\+Mapping\+List}} (const char \texorpdfstring{$\ast$}{*}str)
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classff_1_1thread_mapper_ab60e281e1b06d77161ae792a973dcd83}{set\+Mapping\+List}} (const std\+::vector$<$ size\+\_\+t $>$ \&mapping)
\item 
\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{classff_1_1thread_mapper_a61e5c76e85405419992019500d8f2eba}{get\+Core\+Id}} ()
\item 
unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{classff_1_1thread_mapper_ae04c44a400cc22d7a06aa4fae3310dfb}{get\+Mask}} ()
\item 
unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{classff_1_1thread_mapper_a6537766cd4cfd45512ec3777002c55f3}{get\+CList\+Size}} ()
\item 
\mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\+\_\+t}} \mbox{\hyperlink{classff_1_1thread_mapper_a6fe96d999c1d36186c6adab4592c0101}{get\+Core\+Id}} (unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} tid)
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classff_1_1thread_mapper_aefcda3f2a9ec5a55c4f8454e27f09e20}{check\+CPUId}} (const \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} cpu\+Id) const
\end{DoxyCompactItemize}
\doxysubsubsection*{静态 Public 成员函数}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{classff_1_1thread_mapper}{thread\+Mapper}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classff_1_1thread_mapper_ae889e3e371cc7bb4e0fc067f74f097c1}{instance}} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected 属性}
\begin{DoxyCompactItemize}
\item 
long \mbox{\hyperlink{classff_1_1thread_mapper_a8fde6dae3228e3544ff23c8de40b7d74}{rrcnt}}
\item 
unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{classff_1_1thread_mapper_a9d9f9498c722f47378b26b53ab18162b}{mask}}
\item 
unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{classff_1_1thread_mapper_ae4c344d8a952636c932d40392285749f}{num\+\_\+cores}}
\item 
\mbox{\hyperlink{classff_1_1svector}{svector}}$<$ \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} $>$ \mbox{\hyperlink{classff_1_1thread_mapper_a1d0e69163426de2c85e400920386c430}{CList}}
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
The thread mapper allows to map threads to specific core using a predefined mapping policy. 

The \doxylink{classff_1_1thread_mapper}{thread\+Mapper} stores a list of CPU ids. By default the list is simply a linear sequence of core ids of the system, for example in a quad-\/core system the default list is 0 1 2 3. It is possible to change the default list using the method set\+Mapping\+List by passing a string of space-\/serated (or comma-\/separated) CPU ids. The policy implemented in the thread\+Manager is to pick up a CPU id from the list using a round-\/robin policy.

This class is defined in \doxylink{mapper_8hpp}{mapper.\+hpp} 

\doxysubsection{构造及析构函数说明}
\Hypertarget{classff_1_1thread_mapper_a866a7064d47917d9e4af03ddfa7ae2fc}\index{ff::threadMapper@{ff::threadMapper}!threadMapper@{threadMapper}}
\index{threadMapper@{threadMapper}!ff::threadMapper@{ff::threadMapper}}
\doxysubsubsection{\texorpdfstring{threadMapper()}{threadMapper()}}
{\footnotesize\ttfamily \label{classff_1_1thread_mapper_a866a7064d47917d9e4af03ddfa7ae2fc} 
ff\+::thread\+Mapper\+::thread\+Mapper (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Default constructor. 

\doxysubsection{成员函数说明}
\Hypertarget{classff_1_1thread_mapper_aefcda3f2a9ec5a55c4f8454e27f09e20}\index{ff::threadMapper@{ff::threadMapper}!checkCPUId@{checkCPUId}}
\index{checkCPUId@{checkCPUId}!ff::threadMapper@{ff::threadMapper}}
\doxysubsubsection{\texorpdfstring{checkCPUId()}{checkCPUId()}}
{\footnotesize\ttfamily \label{classff_1_1thread_mapper_aefcda3f2a9ec5a55c4f8454e27f09e20} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} ff\+::thread\+Mapper\+::check\+CPUId (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{cpu\+Id}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

It checks whether the taken core is within the range of the cores available on the machine.

\begin{DoxyReturn}{返回}
It will return either {\ttfamily true} of {\ttfamily false}. 
\end{DoxyReturn}
\Hypertarget{classff_1_1thread_mapper_a6537766cd4cfd45512ec3777002c55f3}\index{ff::threadMapper@{ff::threadMapper}!getCListSize@{getCListSize}}
\index{getCListSize@{getCListSize}!ff::threadMapper@{ff::threadMapper}}
\doxysubsubsection{\texorpdfstring{getCListSize()}{getCListSize()}}
{\footnotesize\ttfamily \label{classff_1_1thread_mapper_a6537766cd4cfd45512ec3777002c55f3} 
unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} ff\+::thread\+Mapper\+::get\+CList\+Size (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

It is used for debugging.

\begin{DoxyReturn}{返回}
TODO 
\end{DoxyReturn}
\Hypertarget{classff_1_1thread_mapper_a61e5c76e85405419992019500d8f2eba}\index{ff::threadMapper@{ff::threadMapper}!getCoreId@{getCoreId}}
\index{getCoreId@{getCoreId}!ff::threadMapper@{ff::threadMapper}}
\doxysubsubsection{\texorpdfstring{getCoreId()}{getCoreId()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classff_1_1thread_mapper_a61e5c76e85405419992019500d8f2eba} 
\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} ff\+::thread\+Mapper\+::get\+Core\+Id (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Returns the next CPU id using a round-\/robin mapping access on the mapping list.

\begin{DoxyReturn}{返回}
The identifier of the core. 
\end{DoxyReturn}
\Hypertarget{classff_1_1thread_mapper_a6fe96d999c1d36186c6adab4592c0101}\index{ff::threadMapper@{ff::threadMapper}!getCoreId@{getCoreId}}
\index{getCoreId@{getCoreId}!ff::threadMapper@{ff::threadMapper}}
\doxysubsubsection{\texorpdfstring{getCoreId()}{getCoreId()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classff_1_1thread_mapper_a6fe96d999c1d36186c6adab4592c0101} 
\mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\+\_\+t}} ff\+::thread\+Mapper\+::get\+Core\+Id (\begin{DoxyParamCaption}\item[{unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{tid}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

It is used to get the identifier of the core.

\begin{DoxyReturn}{返回}
The identifier of the core. 
\end{DoxyReturn}
\Hypertarget{classff_1_1thread_mapper_ae04c44a400cc22d7a06aa4fae3310dfb}\index{ff::threadMapper@{ff::threadMapper}!getMask@{getMask}}
\index{getMask@{getMask}!ff::threadMapper@{ff::threadMapper}}
\doxysubsubsection{\texorpdfstring{getMask()}{getMask()}}
{\footnotesize\ttfamily \label{classff_1_1thread_mapper_ae04c44a400cc22d7a06aa4fae3310dfb} 
unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} ff\+::thread\+Mapper\+::get\+Mask (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

It is used for debugging.

\begin{DoxyReturn}{返回}
TODO 
\end{DoxyReturn}
\Hypertarget{classff_1_1thread_mapper_ae889e3e371cc7bb4e0fc067f74f097c1}\index{ff::threadMapper@{ff::threadMapper}!instance@{instance}}
\index{instance@{instance}!ff::threadMapper@{ff::threadMapper}}
\doxysubsubsection{\texorpdfstring{instance()}{instance()}}
{\footnotesize\ttfamily \label{classff_1_1thread_mapper_ae889e3e371cc7bb4e0fc067f74f097c1} 
static \mbox{\hyperlink{classff_1_1thread_mapper}{thread\+Mapper}} \texorpdfstring{$\ast$}{*} ff\+::thread\+Mapper\+::instance (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

Get a static instance of the \doxylink{classff_1_1thread_mapper}{thread\+Mapper} object

\begin{DoxyReturn}{返回}
TODO 
\end{DoxyReturn}
函数调用图\+:
% FIG 1
\Hypertarget{classff_1_1thread_mapper_a26c07e9815c8da6bf496fccff29bf0c8}\index{ff::threadMapper@{ff::threadMapper}!setMappingList@{setMappingList}}
\index{setMappingList@{setMappingList}!ff::threadMapper@{ff::threadMapper}}
\doxysubsubsection{\texorpdfstring{setMappingList()}{setMappingList()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classff_1_1thread_mapper_a26c07e9815c8da6bf496fccff29bf0c8} 
\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} ff\+::thread\+Mapper\+::set\+Mapping\+List (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{str}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

It allows to set a new list of CPU ids.

The str variable should contain a space-\/separated or a comma-\/separated list of CPU ids. For example if the string str is "{}0 1 1 2 3"{}, then the first thread will be bind to CPU 0, the second to CPU 1, the third to CPU 1, the fourth to CPU 2, the fifth to CPU 3. Then it follows the same rule for the subsequent threads.

\begin{DoxyReturn}{返回}
-\/1 for errors, otherwise it returns the number of elements in str 
\end{DoxyReturn}
函数调用图\+:
% FIG 2
\Hypertarget{classff_1_1thread_mapper_ab60e281e1b06d77161ae792a973dcd83}\index{ff::threadMapper@{ff::threadMapper}!setMappingList@{setMappingList}}
\index{setMappingList@{setMappingList}!ff::threadMapper@{ff::threadMapper}}
\doxysubsubsection{\texorpdfstring{setMappingList()}{setMappingList()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classff_1_1thread_mapper_ab60e281e1b06d77161ae792a973dcd83} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} ff\+::thread\+Mapper\+::set\+Mapping\+List (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ size\+\_\+t $>$ \&}]{mapping}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

函数调用图\+:
% FIG 3


\doxysubsection{类成员变量说明}
\Hypertarget{classff_1_1thread_mapper_a1d0e69163426de2c85e400920386c430}\index{ff::threadMapper@{ff::threadMapper}!CList@{CList}}
\index{CList@{CList}!ff::threadMapper@{ff::threadMapper}}
\doxysubsubsection{\texorpdfstring{CList}{CList}}
{\footnotesize\ttfamily \label{classff_1_1thread_mapper_a1d0e69163426de2c85e400920386c430} 
\mbox{\hyperlink{classff_1_1svector}{svector}}$<$\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}$>$ ff\+::thread\+Mapper\+::\+CList\hspace{0.3cm}{\ttfamily [protected]}}

\Hypertarget{classff_1_1thread_mapper_a9d9f9498c722f47378b26b53ab18162b}\index{ff::threadMapper@{ff::threadMapper}!mask@{mask}}
\index{mask@{mask}!ff::threadMapper@{ff::threadMapper}}
\doxysubsubsection{\texorpdfstring{mask}{mask}}
{\footnotesize\ttfamily \label{classff_1_1thread_mapper_a9d9f9498c722f47378b26b53ab18162b} 
unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} ff\+::thread\+Mapper\+::mask\hspace{0.3cm}{\ttfamily [protected]}}

\Hypertarget{classff_1_1thread_mapper_ae4c344d8a952636c932d40392285749f}\index{ff::threadMapper@{ff::threadMapper}!num\_cores@{num\_cores}}
\index{num\_cores@{num\_cores}!ff::threadMapper@{ff::threadMapper}}
\doxysubsubsection{\texorpdfstring{num\_cores}{num\_cores}}
{\footnotesize\ttfamily \label{classff_1_1thread_mapper_ae4c344d8a952636c932d40392285749f} 
unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} ff\+::thread\+Mapper\+::num\+\_\+cores\hspace{0.3cm}{\ttfamily [protected]}}

\Hypertarget{classff_1_1thread_mapper_a8fde6dae3228e3544ff23c8de40b7d74}\index{ff::threadMapper@{ff::threadMapper}!rrcnt@{rrcnt}}
\index{rrcnt@{rrcnt}!ff::threadMapper@{ff::threadMapper}}
\doxysubsubsection{\texorpdfstring{rrcnt}{rrcnt}}
{\footnotesize\ttfamily \label{classff_1_1thread_mapper_a8fde6dae3228e3544ff23c8de40b7d74} 
long ff\+::thread\+Mapper\+::rrcnt\hspace{0.3cm}{\ttfamily [protected]}}



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/taskflow/3rd-\/party/ff/\mbox{\hyperlink{mapper_8hpp}{mapper.\+hpp}}\end{DoxyCompactItemize}
