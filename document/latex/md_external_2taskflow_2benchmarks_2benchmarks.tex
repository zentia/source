\chapter{Benchmarks}
\hypertarget{md_external_2taskflow_2benchmarks_2benchmarks}{}\label{md_external_2taskflow_2benchmarks_2benchmarks}\index{Benchmarks@{Benchmarks}}
\label{md_external_2taskflow_2benchmarks_2benchmarks_autotoc_md1321}%
\Hypertarget{md_external_2taskflow_2benchmarks_2benchmarks_autotoc_md1321}%


This folder contains a set of benchmarks to evaluate and compare the performance of Taskflow with the following task programming frameworks\+:


\begin{DoxyItemize}
\item \href{https://www.openmp.org/spec-html/5.0/openmpsu99.html}{\texttt{ Open\+MP Task Dependency Clause}}
\item \href{https://www.threadingbuildingblocks.org/tutorial-intel-tbb-flow-graph}{\texttt{ Intel Threading Building Blocks (TBB) Flow\+Graph}}
\end{DoxyItemize}

To compile the benchmark sources, enable the option {\ttfamily TF\+\_\+\+BUILD\+\_\+\+BENCHMARKS} in cmake build\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\string~\$\ mkdir\ build\ \ \ \ \ \ \ \ \#\ create\ a\ build\ folder\ under\ taskflow/}
\DoxyCodeLine{\string~\$\ cd\ build}
\DoxyCodeLine{\string~\$\ cmake\ ../\ -\/DTF\_BUILD\_BENCHMARKS=ON}
\DoxyCodeLine{\string~\$\ make\ }

\end{DoxyCode}


After you successfully compile all benchmark sources, executables will be available in the respective folder of an application. Currently, we provide the following applications\+:


\begin{DoxyItemize}
\item \href{./graph_traversal}{\texttt{ Graph Traveral}}\+: traverses a direct acyclic graph
\item \href{./wavefront}{\texttt{ Wavefront}}\+: propagates computations in a two-\/dimensional (2D) grid
\item \href{./linear_chain}{\texttt{ Linear Chain}}\+: computes a linear chain of tasks
\item \href{./binary_tree}{\texttt{ Binary Tree}}\+: traverse a complete binary tree
\item \href{./matrix_multiplication}{\texttt{ Matrix Multiplication}}\+: multiplies two matrices
\item \href{./mnist}{\texttt{ MNIST}}\+: trains a neural network-\/based image classfier on the \doxylink{struct_m_n_i_s_t}{MNIST} dataset
\end{DoxyItemize}

We have provided a python wrapper \href{./benchmarks.py}{\texttt{ benchmarks.\+py}} to help configure the benchmark of each application, including thread count, rounds to average, tasking methods, and plot.


\begin{DoxyCode}{0}
\DoxyCodeLine{\string~\$\ chmod\ 755\ benchmarks.py\ \ \ \ \#\ change\ the\ permission\ to\ execute}
\DoxyCodeLine{\string~\$\ ./benchmarks.py\ -\/h\ \ \ \ \ \ \ \ \ \#\ show\ the\ help\ message}

\end{DoxyCode}


For example, the following command benchmarks Taskflow (tf), Open\+MP (omp), and \doxylink{struct_t_b_b}{TBB} (tbb) on graph traversal, wavefront, and linear chain applications across 1, 4, 8, and 16 threads, with data collected in an average of ten runs. Results are illustrated in a plot and saved to {\ttfamily result.\+png}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\string~\$\ ./benchmarks.py\ -\/m\ tf\ omp\ tbb\ \(\backslash\)\ }
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/b\ graph\_traversal\ wavefront\ linear\_chain\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/t\ 1\ 4\ 8\ 16\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/r\ 10\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/p\ true\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/o\ result.png}

\end{DoxyCode}


When the program completes, you will see a combined plot of all specified benchmarks. The x-\/axis represents the growth of problem size and the y-\/axis denotes the runtime in millisecond.



\DoxyHorRuler{0}
 