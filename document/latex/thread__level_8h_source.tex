\doxysection{thread\+\_\+level.\+h}
\hypertarget{thread__level_8h_source}{}\label{thread__level_8h_source}\index{external/taskflow/3rd-\/party/tbb/src/rml/perfor/thread\_level.h@{external/taskflow/3rd-\/party/tbb/src/rml/perfor/thread\_level.h}}
\mbox{\hyperlink{thread__level_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{comment}{//\ Thread\ level\ recorder}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#ifndef\ \_\_THREAD\_LEVEL\_H}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#define\ \_\_THREAD\_LEVEL\_H}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <cstdio>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <omp.h>}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <assert.h>}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2include_2tbb_2atomic_8h}{tbb/atomic.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{tick__count_8h}{tbb/tick\_count.h}}"{}}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{comment}{//\#define\ LOG\_THREADS\ //\ use\ this\ to\ ifdef\ out\ calls\ to\ this\ class\ }}
\DoxyCodeLine{00027\ \textcolor{comment}{//\#define\ NO\_BAIL\_OUT\ //\ continue\ execution\ after\ detecting\ oversubscription}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}};}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \{\mbox{\hyperlink{thread__level_8h_a4d12032612d048cfc391d3725e14c3a0ae9ed6300bb2250dbe1d2409d0f5cb7ba}{tbb\_outer}},\ \mbox{\hyperlink{thread__level_8h_a4d12032612d048cfc391d3725e14c3a0a11b64792959696696df5aa80f7f84c60}{tbb\_inner}},\ \mbox{\hyperlink{thread__level_8h_a4d12032612d048cfc391d3725e14c3a0abbf119f16b337dac92d6f4b7a15eb11e}{omp\_outer}},\ \mbox{\hyperlink{thread__level_8h_a4d12032612d048cfc391d3725e14c3a0a473dca637bc458988c87ef442bf5b1a3}{omp\_inner}}\}\ \mbox{\hyperlink{thread__level_8h_a4d12032612d048cfc391d3725e14c3a0}{client\_t}};}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_thread_level_recorder}{ThreadLevelRecorder}}\ \{}
\DoxyCodeLine{00034\ \ \ tbb::atomic<int>\ \mbox{\hyperlink{class_thread_level_recorder_a0b9681302fc2d5ca28a56786b24766c2}{tbb\_outer\_level}};}
\DoxyCodeLine{00035\ \ \ tbb::atomic<int>\ \mbox{\hyperlink{class_thread_level_recorder_ace3b2f1a86285ec7c2a547d4efa98c9e}{tbb\_inner\_level}};}
\DoxyCodeLine{00036\ \ \ tbb::atomic<int>\ \mbox{\hyperlink{class_thread_level_recorder_a71ba0bf4df68731f15e3d839ae1fb6c5}{omp\_outer\_level}};}
\DoxyCodeLine{00037\ \ \ tbb::atomic<int>\ \mbox{\hyperlink{class_thread_level_recorder_a4c8ec6efdb3bd73f61c1ce674c606ccf}{omp\_inner\_level}};}
\DoxyCodeLine{00038\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_thread_level_recorder_1_1record}{record}}\ \{}
\DoxyCodeLine{00039\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1tick__count}{tbb::tick\_count}}\ \mbox{\hyperlink{struct_thread_level_recorder_1_1record_aa189bc5d8fbd56d27f5ac810cebb97da}{time}};}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_thread_level_recorder_1_1record_a3557ceb33f4628b68a18660dfd06c937}{n\_tbb\_outer\_thread}};}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_thread_level_recorder_1_1record_a95a7d7ce1457a5ab3b4702ebdfd77a90}{n\_tbb\_inner\_thread}};}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_thread_level_recorder_1_1record_afec0d2d437bcbd645580afa4865aa388}{n\_omp\_outer\_thread}};}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_thread_level_recorder_1_1record_aa9b185bb7d4cd8fd2f2c94d53cb0bd0b}{n\_omp\_inner\_thread}};}
\DoxyCodeLine{00044\ \ \ \};}
\DoxyCodeLine{00045\ \ \ tbb::atomic<unsigned>\ \mbox{\hyperlink{class_thread_level_recorder_a0d00b8949ed0c866f861835d39fddbc4}{next}};}
\DoxyCodeLine{00047\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{class_thread_level_recorder_a48217c04ce1aa40d472964fa8d967f7a}{max\_record\_count}}\ =\ 1<<20;}
\DoxyCodeLine{00048\ \ \ \mbox{\hyperlink{struct_thread_level_recorder_1_1record}{record}}\ \mbox{\hyperlink{class_thread_level_recorder_af526e700cf8e5bcbca0d1e049c77b573}{array}}[\mbox{\hyperlink{class_thread_level_recorder_a48217c04ce1aa40d472964fa8d967f7a}{max\_record\_count}}];}
\DoxyCodeLine{00049\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_thread_level_recorder_a63e2f69c3aefcb26040d4a7ccf4979aa}{max\_threads}};}
\DoxyCodeLine{00050\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_thread_level_recorder_a2e0ccc80f1593acfa9769a16d2fe8975}{fail}};}
\DoxyCodeLine{00051\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00052\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_thread_level_recorder_adaa9c5546adba830287c630e8fbd8bca}{change\_level}}(\textcolor{keywordtype}{int}\ delta,\ \mbox{\hyperlink{thread__level_8h_a4d12032612d048cfc391d3725e14c3a0}{client\_t}}\ whichClient);}
\DoxyCodeLine{00053\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_thread_level_recorder_a4741e2b6c77f747f1dd70364aaf16073}{dump}}();}
\DoxyCodeLine{00054\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_thread_level_recorder_a7f9686d4797aaea70f7d90e170d68b8f}{init}}();}
\DoxyCodeLine{00055\ \};}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_thread_level_recorder_adaa9c5546adba830287c630e8fbd8bca}{ThreadLevelRecorder::change\_level}}(\textcolor{keywordtype}{int}\ delta,\ \mbox{\hyperlink{thread__level_8h_a4d12032612d048cfc391d3725e14c3a0}{client\_t}}\ whichClient)\ \{}
\DoxyCodeLine{00058\ \ \ \textcolor{keywordtype}{int}\ tox=\mbox{\hyperlink{class_thread_level_recorder_a0b9681302fc2d5ca28a56786b24766c2}{tbb\_outer\_level}},\ tix=\mbox{\hyperlink{class_thread_level_recorder_ace3b2f1a86285ec7c2a547d4efa98c9e}{tbb\_inner\_level}},\ oox=\mbox{\hyperlink{class_thread_level_recorder_a71ba0bf4df68731f15e3d839ae1fb6c5}{omp\_outer\_level}},\ oix=\mbox{\hyperlink{class_thread_level_recorder_a4c8ec6efdb3bd73f61c1ce674c606ccf}{omp\_inner\_level}};}
\DoxyCodeLine{00059\ \ \ \textcolor{keywordflow}{if}\ (whichClient\ ==\ \mbox{\hyperlink{thread__level_8h_a4d12032612d048cfc391d3725e14c3a0ae9ed6300bb2250dbe1d2409d0f5cb7ba}{tbb\_outer}})\ \{}
\DoxyCodeLine{00060\ \ \ \ \ tox\ =\ \mbox{\hyperlink{class_thread_level_recorder_a0b9681302fc2d5ca28a56786b24766c2}{tbb\_outer\_level}}+=delta;}
\DoxyCodeLine{00061\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (whichClient\ ==\ \mbox{\hyperlink{thread__level_8h_a4d12032612d048cfc391d3725e14c3a0a11b64792959696696df5aa80f7f84c60}{tbb\_inner}})\ \{}
\DoxyCodeLine{00062\ \ \ \ \ tix\ =\ \mbox{\hyperlink{class_thread_level_recorder_ace3b2f1a86285ec7c2a547d4efa98c9e}{tbb\_inner\_level}}+=delta;}
\DoxyCodeLine{00063\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (whichClient\ ==\ \mbox{\hyperlink{thread__level_8h_a4d12032612d048cfc391d3725e14c3a0abbf119f16b337dac92d6f4b7a15eb11e}{omp\_outer}})\ \{}
\DoxyCodeLine{00064\ \ \ \ \ oox\ =\ \mbox{\hyperlink{class_thread_level_recorder_a71ba0bf4df68731f15e3d839ae1fb6c5}{omp\_outer\_level}}+=delta;}
\DoxyCodeLine{00065\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (whichClient\ ==\ \mbox{\hyperlink{thread__level_8h_a4d12032612d048cfc391d3725e14c3a0a473dca637bc458988c87ef442bf5b1a3}{omp\_inner}})\ \{}
\DoxyCodeLine{00066\ \ \ \ \ oix\ =\ \mbox{\hyperlink{class_thread_level_recorder_a4c8ec6efdb3bd73f61c1ce674c606ccf}{omp\_inner\_level}}+=delta;}
\DoxyCodeLine{00067\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \mbox{\hyperlink{printf_8h_aee3ed3a831f25f07e7be3919fff2203a}{printf}}(\textcolor{stringliteral}{"{}WARNING:\ Bad\ client\ type;\ ignoring.\(\backslash\)n"{}});}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00070\ \ \ \}}
\DoxyCodeLine{00071\ \ \ \textcolor{comment}{//\ log\ non-\/negative\ entries}}
\DoxyCodeLine{00072\ \ \ \mbox{\hyperlink{classtbb_1_1tick__count}{tbb::tick\_count}}\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ \mbox{\hyperlink{classtbb_1_1tick__count_a74dcecde7431ff4591d7c46fc1d50d7e}{tbb::tick\_count::now}}();}
\DoxyCodeLine{00073\ \ \ \textcolor{keywordtype}{unsigned}\ k\ =\ \mbox{\hyperlink{class_thread_level_recorder_a0d00b8949ed0c866f861835d39fddbc4}{next}}++;}
\DoxyCodeLine{00074\ \ \ \textcolor{keywordflow}{if}\ (k<\mbox{\hyperlink{class_thread_level_recorder_a48217c04ce1aa40d472964fa8d967f7a}{max\_record\_count}})\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \mbox{\hyperlink{struct_thread_level_recorder_1_1record}{record}}\&\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ \mbox{\hyperlink{class_thread_level_recorder_af526e700cf8e5bcbca0d1e049c77b573}{array}}[k];}
\DoxyCodeLine{00076\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.time\ =\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}};}
\DoxyCodeLine{00077\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.n\_tbb\_outer\_thread\ =\ tox>=0?tox:0;}
\DoxyCodeLine{00078\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.n\_omp\_outer\_thread\ =\ oox>=0?oox:0;}
\DoxyCodeLine{00079\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.n\_tbb\_inner\_thread\ =\ tix>=0?tix:0;}
\DoxyCodeLine{00080\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.n\_omp\_inner\_thread\ =\ oix>=0?oix:0;}
\DoxyCodeLine{00081\ \ \ \}}
\DoxyCodeLine{00082\ \ \ \textcolor{keywordtype}{char}\ errStr[100];}
\DoxyCodeLine{00083\ \ \ \textcolor{keywordtype}{int}\ tot\_threads;}
\DoxyCodeLine{00084\ \ \ tot\_threads\ =\ tox+tix+oox+oix;}
\DoxyCodeLine{00085\ \ \ \mbox{\hyperlink{printf_8h_aa7d2e7e454d3fe606a71504a119dc894}{sprintf}}(errStr,\ \textcolor{stringliteral}{"{}ERROR:\ Number\ of\ threads\ (\%d+\%d+\%d+\%d=\%d)\ in\ use\ exceeds\ maximum\ (\%d).\(\backslash\)n"{}},\ }
\DoxyCodeLine{00086\ \ \ \ \ \ \ tox,\ tix,\ oox,\ oix,\ tot\_threads,\ \mbox{\hyperlink{class_thread_level_recorder_a63e2f69c3aefcb26040d4a7ccf4979aa}{max\_threads}});}
\DoxyCodeLine{00087\ \ \ \textcolor{keywordflow}{if}\ (tot\_threads\ >\ \mbox{\hyperlink{class_thread_level_recorder_a63e2f69c3aefcb26040d4a7ccf4979aa}{max\_threads}})\ \{}
\DoxyCodeLine{00088\ \textcolor{preprocessor}{\#ifdef\ NO\_BAIL\_OUT}}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_thread_level_recorder_a2e0ccc80f1593acfa9769a16d2fe8975}{fail}})\ \{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \mbox{\hyperlink{printf_8h_aee3ed3a831f25f07e7be3919fff2203a}{printf}}(\textcolor{stringliteral}{"{}\%sContinuing...\(\backslash\)n"{}},\ errStr);}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \mbox{\hyperlink{class_thread_level_recorder_a2e0ccc80f1593acfa9769a16d2fe8975}{fail}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00092\ \ \ \ \ \}}
\DoxyCodeLine{00093\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00094\ \ \ \ \ \mbox{\hyperlink{class_thread_level_recorder_a4741e2b6c77f747f1dd70364aaf16073}{dump}}();}
\DoxyCodeLine{00095\ \ \ \ \ \mbox{\hyperlink{printf_8h_aee3ed3a831f25f07e7be3919fff2203a}{printf}}(\textcolor{stringliteral}{"{}\%s\(\backslash\)n"{}},\ errStr);}
\DoxyCodeLine{00096\ \ \ \ \ assert(tot\_threads\ <=\ \mbox{\hyperlink{class_thread_level_recorder_a63e2f69c3aefcb26040d4a7ccf4979aa}{max\_threads}});}
\DoxyCodeLine{00097\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00098\ \ \ \}}
\DoxyCodeLine{00099\ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_thread_level_recorder_a4741e2b6c77f747f1dd70364aaf16073}{ThreadLevelRecorder::dump}}()\ \{}
\DoxyCodeLine{00102\ \ \ FILE*\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ =\ fopen(\textcolor{stringliteral}{"{}time.txt"{}},\textcolor{stringliteral}{"{}w"{}});}
\DoxyCodeLine{00103\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\ \{}
\DoxyCodeLine{00104\ \ \ \ \ perror(\textcolor{stringliteral}{"{}fopen(time.txt)\(\backslash\)n"{}});}
\DoxyCodeLine{00105\ \ \ \ \ exit(1);}
\DoxyCodeLine{00106\ \ \ \}}
\DoxyCodeLine{00107\ \ \ \textcolor{keywordtype}{unsigned}\ limit\ =\ \mbox{\hyperlink{class_thread_level_recorder_a0d00b8949ed0c866f861835d39fddbc4}{next}};}
\DoxyCodeLine{00108\ \ \ \textcolor{keywordflow}{if}\ (limit>\mbox{\hyperlink{class_thread_level_recorder_a48217c04ce1aa40d472964fa8d967f7a}{max\_record\_count}})\ \{\ \textcolor{comment}{//\ Clip}}
\DoxyCodeLine{00109\ \ \ \ \ limit\ =\ \mbox{\hyperlink{class_thread_level_recorder_a48217c04ce1aa40d472964fa8d967f7a}{max\_record\_count}};}
\DoxyCodeLine{00110\ \ \ \}}
\DoxyCodeLine{00111\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<limit;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00112\ \ \ \ \ \mbox{\hyperlink{printf_8h_a9f315126362cae9675de1642105e631e}{fprintf}}(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\textcolor{stringliteral}{"{}\%f\(\backslash\)t\%d\(\backslash\)t\%d\(\backslash\)t\%d\(\backslash\)t\%d\(\backslash\)n"{}},(\mbox{\hyperlink{class_thread_level_recorder_af526e700cf8e5bcbca0d1e049c77b573}{array}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].time-\/\mbox{\hyperlink{class_thread_level_recorder_af526e700cf8e5bcbca0d1e049c77b573}{array}}[0].time).seconds(),\ \mbox{\hyperlink{class_thread_level_recorder_af526e700cf8e5bcbca0d1e049c77b573}{array}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].n\_tbb\_outer\_thread,}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_thread_level_recorder_af526e700cf8e5bcbca0d1e049c77b573}{array}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].n\_tbb\_inner\_thread,\ \mbox{\hyperlink{class_thread_level_recorder_af526e700cf8e5bcbca0d1e049c77b573}{array}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].n\_omp\_outer\_thread,\ \mbox{\hyperlink{class_thread_level_recorder_af526e700cf8e5bcbca0d1e049c77b573}{array}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].n\_omp\_inner\_thread);}
\DoxyCodeLine{00114\ \ \ \}}
\DoxyCodeLine{00115\ \ \ fclose(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});}
\DoxyCodeLine{00116\ \ \ \textcolor{keywordtype}{int}\ tox=\mbox{\hyperlink{class_thread_level_recorder_a0b9681302fc2d5ca28a56786b24766c2}{tbb\_outer\_level}},\ tix=\mbox{\hyperlink{class_thread_level_recorder_ace3b2f1a86285ec7c2a547d4efa98c9e}{tbb\_inner\_level}},\ oox=\mbox{\hyperlink{class_thread_level_recorder_a71ba0bf4df68731f15e3d839ae1fb6c5}{omp\_outer\_level}},\ oix=\mbox{\hyperlink{class_thread_level_recorder_a4c8ec6efdb3bd73f61c1ce674c606ccf}{omp\_inner\_level}};}
\DoxyCodeLine{00117\ \ \ \textcolor{keywordtype}{int}\ tot\_threads;}
\DoxyCodeLine{00118\ \ \ tot\_threads\ =\ tox+tix+oox+oix;}
\DoxyCodeLine{00119\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_thread_level_recorder_a2e0ccc80f1593acfa9769a16d2fe8975}{fail}})\ \mbox{\hyperlink{printf_8h_aee3ed3a831f25f07e7be3919fff2203a}{printf}}(\textcolor{stringliteral}{"{}INFO:\ Passed.\(\backslash\)n"{}});}
\DoxyCodeLine{00120\ \ \ \textcolor{keywordflow}{else}\ \mbox{\hyperlink{printf_8h_aee3ed3a831f25f07e7be3919fff2203a}{printf}}(\textcolor{stringliteral}{"{}INFO:\ Failed.\(\backslash\)n"{}});}
\DoxyCodeLine{00121\ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_thread_level_recorder_a7f9686d4797aaea70f7d90e170d68b8f}{ThreadLevelRecorder::init}}()\ \{}
\DoxyCodeLine{00124\ \ \ \mbox{\hyperlink{class_thread_level_recorder_a2e0ccc80f1593acfa9769a16d2fe8975}{fail}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00125\ \ \ \mbox{\hyperlink{class_thread_level_recorder_a63e2f69c3aefcb26040d4a7ccf4979aa}{max\_threads}}\ =\ omp\_get\_max\_threads();}
\DoxyCodeLine{00126\ \ \ \mbox{\hyperlink{printf_8h_aee3ed3a831f25f07e7be3919fff2203a}{printf}}(\textcolor{stringliteral}{"{}INFO:\ Getting\ maximum\ hardware\ threads...\ \%d.\(\backslash\)n"{}},\ \mbox{\hyperlink{class_thread_level_recorder_a63e2f69c3aefcb26040d4a7ccf4979aa}{max\_threads}});}
\DoxyCodeLine{00127\ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \mbox{\hyperlink{class_thread_level_recorder}{ThreadLevelRecorder}}\ \mbox{\hyperlink{thread__level_8h_ae625cb4d9280d778583bde9b948187e9}{TotalThreadLevel}};}
\DoxyCodeLine{00130\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
