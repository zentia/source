\doxysubsection{Extending Matrix\+Base (and other classes)}
\hypertarget{_topic_customizing__plugins}{}\label{_topic_customizing__plugins}\index{Extending MatrixBase (and other classes)@{Extending MatrixBase (and other classes)}}
In this section we will see how to add custom methods to \doxylink{class_eigen_1_1_matrix_base}{Matrix\+Base}. Since all expressions and matrix types inherit \doxylink{class_eigen_1_1_matrix_base}{Matrix\+Base}, adding a method to \doxylink{class_eigen_1_1_matrix_base}{Matrix\+Base} make it immediately available to all expressions ! \doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} typical use case is, for instance, to make \doxylink{namespace_eigen}{Eigen} compatible with another API.

You certainly know that in C++ it is not possible to add methods to an existing class. So how that\textquotesingle{}s possible ? Here the trick is to include in the declaration of \doxylink{class_eigen_1_1_matrix_base}{Matrix\+Base} a file defined by the preprocessor token {\ttfamily EIGEN\+\_\+\+MATRIXBASE\+\_\+\+PLUGIN\+:} 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{class\ }\mbox{\hyperlink{class_eigen_1_1_matrix_base}{MatrixBase}}\ \{}
\DoxyCodeLine{\ \ \textcolor{comment}{//\ ...}}
\DoxyCodeLine{\textcolor{preprocessor}{\ \ \#ifdef\ EIGEN\_MATRIXBASE\_PLUGIN}}
\DoxyCodeLine{\textcolor{preprocessor}{\ \ \#include\ EIGEN\_MATRIXBASE\_PLUGIN}}
\DoxyCodeLine{\textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{\};}

\end{DoxyCode}
 Therefore to extend \doxylink{class_eigen_1_1_matrix_base}{Matrix\+Base} with your own methods you just have to create a file with your method declaration and define EIGEN\+\_\+\+MATRIXBASE\+\_\+\+PLUGIN before you include any \doxylink{namespace_eigen}{Eigen}\textquotesingle{}s header file.

You can extend many of the other classes used in \doxylink{namespace_eigen}{Eigen} by defining similarly named preprocessor symbols. For instance, define {\ttfamily EIGEN\+\_\+\+ARRAYBASE\+\_\+\+PLUGIN} if you want to extend the \doxylink{class_eigen_1_1_array_base}{Array\+Base} class. \doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} full list of classes that can be extended in this way and the corresponding preprocessor symbols can be found on our page \doxylink{TopicPreprocessorDirectives}{Preprocessor directives}.

Here is an example of an extension file for adding methods to \doxylink{class_eigen_1_1_matrix_base}{Matrix\+Base}\+: ~\newline
{\bfseries{Matrix\+Base\+Addons.\+h}} 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{inline}\ \mbox{\hyperlink{class_eigen_1_1_product}{Scalar}}\ at(\mbox{\hyperlink{sugar_8h_ad46b2ebcd4c426b06cda147ddc1001e7}{uint}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ \mbox{\hyperlink{sugar_8h_ad46b2ebcd4c426b06cda147ddc1001e7}{uint}}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ this-\/>operator()(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}});\ \}}
\DoxyCodeLine{\textcolor{keyword}{inline}\ \mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}\&\ at(\mbox{\hyperlink{sugar_8h_ad46b2ebcd4c426b06cda147ddc1001e7}{uint}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ \mbox{\hyperlink{sugar_8h_ad46b2ebcd4c426b06cda147ddc1001e7}{uint}}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})\ \{\ \textcolor{keywordflow}{return}\ this-\/>operator()(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}});\ \}}
\DoxyCodeLine{\textcolor{keyword}{inline}\ \mbox{\hyperlink{class_eigen_1_1_product}{Scalar}}\ at(\mbox{\hyperlink{sugar_8h_ad46b2ebcd4c426b06cda147ddc1001e7}{uint}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ this-\/>operator[](\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});\ \}}
\DoxyCodeLine{\textcolor{keyword}{inline}\ \mbox{\hyperlink{class_eigen_1_1_product}{Scalar}}\&\ at(\mbox{\hyperlink{sugar_8h_ad46b2ebcd4c426b06cda147ddc1001e7}{uint}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{\ \textcolor{keywordflow}{return}\ this-\/>operator[](\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});\ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{inline}\ \mbox{\hyperlink{bench__gemm_8cpp_acb5c3dc237f99cf17167e8a629f01b43}{RealScalar}}\ squaredLength()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ squaredNorm();\ \}}
\DoxyCodeLine{\textcolor{keyword}{inline}\ \mbox{\hyperlink{bench__gemm_8cpp_acb5c3dc237f99cf17167e8a629f01b43}{RealScalar}}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a8d1f7eae43fb4349a6a6f3f0c7eb7e0b}{length}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ norm();\ \}}
\DoxyCodeLine{\textcolor{keyword}{inline}\ \mbox{\hyperlink{bench__gemm_8cpp_acb5c3dc237f99cf17167e8a629f01b43}{RealScalar}}\ invLength(\textcolor{keywordtype}{void})\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ fast\_inv\_sqrt(squaredNorm());\ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OtherDerived>}
\DoxyCodeLine{\textcolor{keyword}{inline}\ \mbox{\hyperlink{class_eigen_1_1_product}{Scalar}}\ squaredDistanceTo(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{MatrixBase<OtherDerived>}}\&\ other)\textcolor{keyword}{\ const}}
\DoxyCodeLine{\textcolor{keyword}{}\{\ \textcolor{keywordflow}{return}\ (derived()\ -\/\ other.derived()).squaredNorm();\ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OtherDerived>}
\DoxyCodeLine{\textcolor{keyword}{inline}\ \mbox{\hyperlink{bench__gemm_8cpp_acb5c3dc237f99cf17167e8a629f01b43}{RealScalar}}\ distanceTo(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{MatrixBase<OtherDerived>}}\&\ other)\textcolor{keyword}{\ const}}
\DoxyCodeLine{\textcolor{keyword}{}\{\ \textcolor{keywordflow}{return}\ internal::sqrt(derived().squaredDistanceTo(other));\ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ scaleTo(\mbox{\hyperlink{bench__gemm_8cpp_acb5c3dc237f99cf17167e8a629f01b43}{RealScalar}}\ l)\ \{\ \mbox{\hyperlink{bench__gemm_8cpp_acb5c3dc237f99cf17167e8a629f01b43}{RealScalar}}\ vl\ =\ norm();\ \textcolor{keywordflow}{if}\ (vl>1\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}-\/9)\ derived()\ *=\ (l/vl);\ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{inline}\ \mbox{\hyperlink{class_eigen_1_1_transpose}{Transpose<Derived>}}\ transposed()\ \{\textcolor{keywordflow}{return}\ this-\/>\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abddae8e27995e1aa57df4d93edd33803}{transpose}}();\}}
\DoxyCodeLine{\textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_eigen_1_1_transpose}{Transpose<Derived>}}\ transposed()\textcolor{keyword}{\ const\ }\{\textcolor{keywordflow}{return}\ this-\/>\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abddae8e27995e1aa57df4d93edd33803}{transpose}}();\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{inline}\ \mbox{\hyperlink{sugar_8h_ad46b2ebcd4c426b06cda147ddc1001e7}{uint}}\ minComponentId(\textcolor{keywordtype}{void})\textcolor{keyword}{\ const\ \ }\{\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};\ this-\/>minCoeff(\&\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};\ \}}
\DoxyCodeLine{\textcolor{keyword}{inline}\ \mbox{\hyperlink{sugar_8h_ad46b2ebcd4c426b06cda147ddc1001e7}{uint}}\ maxComponentId(\textcolor{keywordtype}{void})\textcolor{keyword}{\ const\ \ }\{\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};\ this-\/>maxCoeff(\&\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};\ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OtherDerived>}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ makeFloor(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{MatrixBase<OtherDerived>}}\&\ other)\ \{\ derived()\ =\ derived().cwiseMin(other.derived());\ \}}
\DoxyCodeLine{\textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OtherDerived>}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ makeCeil(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{MatrixBase<OtherDerived>}}\&\ other)\ \{\ derived()\ =\ derived().cwiseMax(other.derived());\ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{const}\ \mbox{\hyperlink{class_eigen_1_1_cwise_binary_op}{CwiseBinaryOp<internal::scalar\_sum\_op<Scalar>}},\ \textcolor{keyword}{const}\ Derived,\ \textcolor{keyword}{const}\ ConstantReturnType>}
\DoxyCodeLine{\mbox{\hyperlink{namespace_eigen_a054138fa4cd47163a7d8d5972044ae09}{operator+}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_eigen_1_1_product}{Scalar}}\&\ scalar)\textcolor{keyword}{\ const}}
\DoxyCodeLine{\textcolor{keyword}{}\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_eigen_1_1_cwise_binary_op}{CwiseBinaryOp<internal::scalar\_sum\_op<Scalar>}},\ \textcolor{keyword}{const}\ Derived,\ \textcolor{keyword}{const}\ ConstantReturnType>(derived(),\ \mbox{\hyperlink{namespaceluisa_1_1compute_abec73516c4043cf293b7c1bf69baead1}{Constant}}(\mbox{\hyperlink{_tutorial__commainit__02_8cpp_a061459acc9e078fa4699e0e349887215}{rows}}(),\mbox{\hyperlink{_tutorial__commainit__02_8cpp_a4407a60bc4387adae24cee658711f2d9}{cols}}(),scalar));\ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{friend}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_eigen_1_1_cwise_binary_op}{CwiseBinaryOp<internal::scalar\_sum\_op<Scalar>}},\ \textcolor{keyword}{const}\ ConstantReturnType,\ Derived>}
\DoxyCodeLine{\mbox{\hyperlink{namespace_eigen_a054138fa4cd47163a7d8d5972044ae09}{operator+}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_eigen_1_1_product}{Scalar}}\&\ scalar,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{MatrixBase<Derived>}}\&\ \mbox{\hyperlink{_tutorial___advanced_initialization___comma_temporary_8cpp_a5d2ded7a4c8830608d7b218f5f27c0a0}{mat}})}
\DoxyCodeLine{\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_eigen_1_1_cwise_binary_op}{CwiseBinaryOp<internal::scalar\_sum\_op<Scalar>}},\ \textcolor{keyword}{const}\ ConstantReturnType,\ Derived>(\mbox{\hyperlink{namespaceluisa_1_1compute_abec73516c4043cf293b7c1bf69baead1}{Constant}}(\mbox{\hyperlink{_tutorial__commainit__02_8cpp_a061459acc9e078fa4699e0e349887215}{rows}}(),\mbox{\hyperlink{_tutorial__commainit__02_8cpp_a4407a60bc4387adae24cee658711f2d9}{cols}}(),scalar),\ \mbox{\hyperlink{_tutorial___advanced_initialization___comma_temporary_8cpp_a5d2ded7a4c8830608d7b218f5f27c0a0}{mat}}.derived());\ \}}

\end{DoxyCode}


Then one can the following declaration in the config.\+h or whatever prerequisites header file of his project\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ EIGEN\_MATRIXBASE\_PLUGIN\ "{}MatrixBaseAddons.h"{}}}

\end{DoxyCode}
 