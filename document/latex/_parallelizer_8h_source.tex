\doxysection{Parallelizer.\+h}
\hypertarget{_parallelizer_8h_source}{}\label{_parallelizer_8h_source}\index{external/taskflow/3rd-\/party/eigen-\/3.3.7/Eigen/src/Core/products/Parallelizer.h@{external/taskflow/3rd-\/party/eigen-\/3.3.7/Eigen/src/Core/products/Parallelizer.h}}
\mbox{\hyperlink{_parallelizer_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ This\ file\ is\ part\ of\ Eigen,\ a\ lightweight\ C++\ template\ library}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ for\ linear\ algebra.}}
\DoxyCodeLine{00003\ \textcolor{comment}{//}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ Copyright\ (C)\ 2010\ Gael\ Guennebaud\ <gael.guennebaud@inria.fr>}}
\DoxyCodeLine{00005\ \textcolor{comment}{//}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ This\ Source\ Code\ Form\ is\ subject\ to\ the\ terms\ of\ the\ Mozilla}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ Public\ License\ v.\ 2.0.\ If\ a\ copy\ of\ the\ MPL\ was\ not\ distributed}}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ with\ this\ file,\ You\ can\ obtain\ one\ at\ http://mozilla.org/MPL/2.0/.}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#ifndef\ EIGEN\_PARALLELIZER\_H}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#define\ EIGEN\_PARALLELIZER\_H}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_eigen}{Eigen}}\ \{}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_eigen_1_1internal}{internal}}\ \{}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00018\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_eigen_1_1internal_a6e841e3c4f4914cf1e06704ec8537db3}{manage\_multi\_threading}}(\mbox{\hyperlink{namespace_eigen_a3cbc3ee52075935e7854d9f65c5a8e03}{Action}}\ action,\ \textcolor{keywordtype}{int}*\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})}
\DoxyCodeLine{00019\ \{}
\DoxyCodeLine{00020\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{eigen-3_83_87_2_eigen_2src_2_core_2util_2_macros_8h_a93128615d484fbc06833a7ad602ef946}{EIGEN\_UNUSED}}\ \textcolor{keywordtype}{int}\ m\_maxThreads\ =\ -\/1;}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \ \ \textcolor{keywordflow}{if}(action==\mbox{\hyperlink{namespace_eigen_a3cbc3ee52075935e7854d9f65c5a8e03af86f2d01b29fe43e67fee437b0cf45ba}{SetAction}})}
\DoxyCodeLine{00023\ \ \ \{}
\DoxyCodeLine{00024\ \ \ \ \ \mbox{\hyperlink{eigen-3_83_87_2_eigen_2src_2_core_2util_2_macros_8h_a4e742b5a08636a61784c0e173b61e710}{eigen\_internal\_assert}}(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}!=0);}
\DoxyCodeLine{00025\ \ \ \ \ m\_maxThreads\ =\ *\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}};}
\DoxyCodeLine{00026\ \ \ \}}
\DoxyCodeLine{00027\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(action==\mbox{\hyperlink{namespace_eigen_a3cbc3ee52075935e7854d9f65c5a8e03a50e0300a7050ebe879b82484f89efb68}{GetAction}})}
\DoxyCodeLine{00028\ \ \ \{}
\DoxyCodeLine{00029\ \ \ \ \ \mbox{\hyperlink{eigen-3_83_87_2_eigen_2src_2_core_2util_2_macros_8h_a4e742b5a08636a61784c0e173b61e710}{eigen\_internal\_assert}}(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}!=0);}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EIGEN\_HAS\_OPENMP}}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keywordflow}{if}(m\_maxThreads>0)}
\DoxyCodeLine{00032\ \ \ \ \ \ \ *\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ m\_maxThreads;}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00034\ \ \ \ \ \ \ *\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ omp\_get\_max\_threads();}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{00036\ \ \ \ \ *\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ 1;}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00038\ \ \ \}}
\DoxyCodeLine{00039\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00040\ \ \ \{}
\DoxyCodeLine{00041\ \ \ \ \ \mbox{\hyperlink{eigen-3_83_87_2_eigen_2src_2_core_2util_2_macros_8h_a4e742b5a08636a61784c0e173b61e710}{eigen\_internal\_assert}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00042\ \ \ \}}
\DoxyCodeLine{00043\ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00048\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_eigen_a820c0e0460934cc17eb6dacbad54a9f5}{initParallel}}()}
\DoxyCodeLine{00049\ \{}
\DoxyCodeLine{00050\ \ \ \textcolor{keywordtype}{int}\ nbt;}
\DoxyCodeLine{00051\ \ \ \mbox{\hyperlink{namespace_eigen_1_1internal_a6e841e3c4f4914cf1e06704ec8537db3}{internal::manage\_multi\_threading}}(\mbox{\hyperlink{namespace_eigen_a3cbc3ee52075935e7854d9f65c5a8e03a50e0300a7050ebe879b82484f89efb68}{GetAction}},\ \&nbt);}
\DoxyCodeLine{00052\ \ \ std::ptrdiff\_t\ l1,\ l2,\ l3;}
\DoxyCodeLine{00053\ \ \ \mbox{\hyperlink{namespace_eigen_1_1internal_aa32f9fb4cd20f86ef87d00db101e2f7c}{internal::manage\_caching\_sizes}}(\mbox{\hyperlink{namespace_eigen_a3cbc3ee52075935e7854d9f65c5a8e03a50e0300a7050ebe879b82484f89efb68}{GetAction}},\ \&l1,\ \&l2,\ \&l3);}
\DoxyCodeLine{00054\ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00058\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespace_eigen_a9aca97d83e21b91a04ec079360dfffeb}{nbThreads}}()}
\DoxyCodeLine{00059\ \{}
\DoxyCodeLine{00060\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}};}
\DoxyCodeLine{00061\ \ \ \mbox{\hyperlink{namespace_eigen_1_1internal_a6e841e3c4f4914cf1e06704ec8537db3}{internal::manage\_multi\_threading}}(\mbox{\hyperlink{namespace_eigen_a3cbc3ee52075935e7854d9f65c5a8e03a50e0300a7050ebe879b82484f89efb68}{GetAction}},\ \&\mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}});}
\DoxyCodeLine{00062\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}};}
\DoxyCodeLine{00063\ \}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00067\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_eigen_af9cd17c2fe18204239cd11c88c120b50}{setNbThreads}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})}
\DoxyCodeLine{00068\ \{}
\DoxyCodeLine{00069\ \ \ \mbox{\hyperlink{namespace_eigen_1_1internal_a6e841e3c4f4914cf1e06704ec8537db3}{internal::manage\_multi\_threading}}(\mbox{\hyperlink{namespace_eigen_a3cbc3ee52075935e7854d9f65c5a8e03af86f2d01b29fe43e67fee437b0cf45ba}{SetAction}},\ \&\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}});}
\DoxyCodeLine{00070\ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinternal}{internal}}\ \{}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Index>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_eigen_1_1internal_1_1_gemm_parallel_info_a667052537d47851e8561ce8c8679a5de}{GemmParallelInfo}}}
\DoxyCodeLine{00075\ \{}
\DoxyCodeLine{00076\ \ \ \mbox{\hyperlink{struct_eigen_1_1internal_1_1_gemm_parallel_info_a667052537d47851e8561ce8c8679a5de}{GemmParallelInfo}}()\ :\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1_gemm_parallel_info_addd681205a1798c16f2373f15e923681}{sync}}(-\/1),\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1_gemm_parallel_info_ae2a039eef23196ca53108a2d3b8dc319}{users}}(0),\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1_gemm_parallel_info_a7a6a21f9b9b4a9fa4833659509333fdb}{lhs\_start}}(0),\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1_gemm_parallel_info_a6709199f56602a45662c9eb6c1178dd2}{lhs\_length}}(0)\ \{\}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ \textcolor{keyword}{volatile}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1_gemm_parallel_info_addd681205a1798c16f2373f15e923681}{sync}};}
\DoxyCodeLine{00079\ \ \ \textcolor{keywordtype}{int}\ \textcolor{keyword}{volatile}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1_gemm_parallel_info_ae2a039eef23196ca53108a2d3b8dc319}{users}};}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1_gemm_parallel_info_a7a6a21f9b9b4a9fa4833659509333fdb}{lhs\_start}};}
\DoxyCodeLine{00082\ \ \ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1_gemm_parallel_info_a6709199f56602a45662c9eb6c1178dd2}{lhs\_length}};}
\DoxyCodeLine{00083\ \};}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \textcolor{keyword}{template}<\textcolor{keywordtype}{bool}\ Condition,\ \textcolor{keyword}{typename}\ Functor,\ \textcolor{keyword}{typename}\ Index>}
\DoxyCodeLine{00086\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_eigen_1_1internal_a2a7e89a0df89d06dd95f0c3dda17cf3e}{parallelize\_gemm}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_functor}{Functor}}\&\ \mbox{\hyperlink{structfunc}{func}},\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ \mbox{\hyperlink{_tutorial__commainit__02_8cpp_a061459acc9e078fa4699e0e349887215}{rows}},\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ \mbox{\hyperlink{_tutorial__commainit__02_8cpp_a4407a60bc4387adae24cee658711f2d9}{cols}},\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ depth,\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abddae8e27995e1aa57df4d93edd33803}{transpose}})}
\DoxyCodeLine{00087\ \{}
\DoxyCodeLine{00088\ \ \ \textcolor{comment}{//\ TODO\ when\ EIGEN\_USE\_BLAS\ is\ defined,}}
\DoxyCodeLine{00089\ \ \ \textcolor{comment}{//\ we\ should\ still\ enable\ OMP\ for\ other\ scalar\ types}}
\DoxyCodeLine{00090\ \textcolor{preprocessor}{\#if\ !(defined\ (EIGEN\_HAS\_OPENMP))\ ||\ defined\ (EIGEN\_USE\_BLAS)}}
\DoxyCodeLine{00091\ \ \ \textcolor{comment}{//\ FIXME\ the\ transpose\ variable\ is\ only\ needed\ to\ properly\ split}}
\DoxyCodeLine{00092\ \ \ \textcolor{comment}{//\ the\ matrix\ product\ when\ multithreading\ is\ enabled.\ This\ is\ a\ temporary}}
\DoxyCodeLine{00093\ \ \ \textcolor{comment}{//\ fix\ to\ support\ row-\/major\ destination\ matrices.\ This\ whole}}
\DoxyCodeLine{00094\ \ \ \textcolor{comment}{//\ parallelizer\ mechanism\ has\ to\ be\ redisigned\ anyway.}}
\DoxyCodeLine{00095\ \ \ \mbox{\hyperlink{eigen-3_83_87_2_eigen_2src_2_core_2util_2_macros_8h_a7cf6d5b460def34dc4e6acf42889b6a9}{EIGEN\_UNUSED\_VARIABLE}}(depth);}
\DoxyCodeLine{00096\ \ \ \mbox{\hyperlink{eigen-3_83_87_2_eigen_2src_2_core_2util_2_macros_8h_a7cf6d5b460def34dc4e6acf42889b6a9}{EIGEN\_UNUSED\_VARIABLE}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abddae8e27995e1aa57df4d93edd33803}{transpose}});}
\DoxyCodeLine{00097\ \ \ \mbox{\hyperlink{benchmarks_2async__task_2async__task_8hpp_abce53bb5cc1ee70cdc013fd9b93547eb}{func}}(0,\mbox{\hyperlink{_tutorial__commainit__02_8cpp_a061459acc9e078fa4699e0e349887215}{rows}},\ 0,\mbox{\hyperlink{_tutorial__commainit__02_8cpp_a4407a60bc4387adae24cee658711f2d9}{cols}});}
\DoxyCodeLine{00098\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \textcolor{comment}{//\ Dynamically\ check\ whether\ we\ should\ enable\ or\ disable\ OpenMP.}}
\DoxyCodeLine{00101\ \ \ \textcolor{comment}{//\ The\ conditions\ are:}}
\DoxyCodeLine{00102\ \ \ \textcolor{comment}{//\ -\/\ the\ max\ number\ of\ threads\ we\ can\ create\ is\ greater\ than\ 1}}
\DoxyCodeLine{00103\ \ \ \textcolor{comment}{//\ -\/\ we\ are\ not\ already\ in\ a\ parallel\ code}}
\DoxyCodeLine{00104\ \ \ \textcolor{comment}{//\ -\/\ the\ sizes\ are\ large\ enough}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \textcolor{comment}{//\ compute\ the\ maximal\ number\ of\ threads\ from\ the\ size\ of\ the\ product:}}
\DoxyCodeLine{00107\ \ \ \textcolor{comment}{//\ This\ first\ heuristic\ takes\ into\ account\ that\ the\ product\ kernel\ is\ fully\ optimized\ when\ working\ with\ nr\ columns\ at\ once.}}
\DoxyCodeLine{00108\ \ \ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abddae8e27995e1aa57df4d93edd33803}{transpose}}\ ?\ \mbox{\hyperlink{_tutorial__commainit__02_8cpp_a061459acc9e078fa4699e0e349887215}{rows}}\ :\ \mbox{\hyperlink{_tutorial__commainit__02_8cpp_a4407a60bc4387adae24cee658711f2d9}{cols}};}
\DoxyCodeLine{00109\ \ \ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ pb\_max\_threads\ =\ std::max<Index>(1,\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ /\ Functor::Traits::nr);}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \textcolor{comment}{//\ compute\ the\ maximal\ number\ of\ threads\ from\ the\ total\ amount\ of\ work:}}
\DoxyCodeLine{00112\ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{graph__pipeline_2levelgraph_8hpp_aa24fdf691a71c708fccdc6e29a805b42}{work}}\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(\mbox{\hyperlink{_tutorial__commainit__02_8cpp_a061459acc9e078fa4699e0e349887215}{rows}})\ *\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(\mbox{\hyperlink{_tutorial__commainit__02_8cpp_a4407a60bc4387adae24cee658711f2d9}{cols}})\ *}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(depth);}
\DoxyCodeLine{00114\ \ \ \textcolor{keywordtype}{double}\ kMinTaskSize\ =\ 50000;\ \ \textcolor{comment}{//\ FIXME\ improve\ this\ heuristic.}}
\DoxyCodeLine{00115\ \ \ pb\_max\_threads\ =\ std::max<Index>(1,\ \mbox{\hyperlink{namespacestd_ac7b9885417769949d76890454b6d072e}{std::min<Index>}}(pb\_max\_threads,\ \mbox{\hyperlink{graph__pipeline_2levelgraph_8hpp_aa24fdf691a71c708fccdc6e29a805b42}{work}}\ /\ kMinTaskSize));}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \textcolor{comment}{//\ compute\ the\ number\ of\ threads\ we\ are\ going\ to\ use}}
\DoxyCodeLine{00118\ \ \ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ threads\ =\ \mbox{\hyperlink{namespacestd_ac7b9885417769949d76890454b6d072e}{std::min<Index>}}(\mbox{\hyperlink{namespace_eigen_a9aca97d83e21b91a04ec079360dfffeb}{nbThreads}}(),\ pb\_max\_threads);}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \textcolor{comment}{//\ if\ multi-\/threading\ is\ explicitely\ disabled,\ not\ useful,\ or\ if\ we\ already\ are\ in\ a\ parallel\ session,}}
\DoxyCodeLine{00121\ \ \ \textcolor{comment}{//\ then\ abort\ multi-\/threading}}
\DoxyCodeLine{00122\ \ \ \textcolor{comment}{//\ FIXME\ omp\_get\_num\_threads()>1\ only\ works\ for\ openmp,\ what\ if\ the\ user\ does\ not\ use\ openmp?}}
\DoxyCodeLine{00123\ \ \ \textcolor{keywordflow}{if}((!Condition)\ ||\ (threads==1)\ ||\ (omp\_get\_num\_threads()>1))}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{benchmarks_2async__task_2async__task_8hpp_abce53bb5cc1ee70cdc013fd9b93547eb}{func}}(0,\mbox{\hyperlink{_tutorial__commainit__02_8cpp_a061459acc9e078fa4699e0e349887215}{rows}},\ 0,\mbox{\hyperlink{_tutorial__commainit__02_8cpp_a4407a60bc4387adae24cee658711f2d9}{cols}});}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \ \ \mbox{\hyperlink{namespace_eigen_a820c0e0460934cc17eb6dacbad54a9f5}{Eigen::initParallel}}();}
\DoxyCodeLine{00127\ \ \ \mbox{\hyperlink{structfunc}{func}}.initParallelSession(threads);}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abddae8e27995e1aa57df4d93edd33803}{transpose}})}
\DoxyCodeLine{00130\ \ \ \ \ \mbox{\hyperlink{namespacestd_a3acbe51b6415e9284430194bf04944e1}{std::swap}}(\mbox{\hyperlink{_tutorial__commainit__02_8cpp_a061459acc9e078fa4699e0e349887215}{rows}},\mbox{\hyperlink{_tutorial__commainit__02_8cpp_a4407a60bc4387adae24cee658711f2d9}{cols}});}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \mbox{\hyperlink{external_2taskflow_23rd-party_2eigen-3_83_87_2_eigen_2src_2_core_2util_2memory_8h_ae4bf2b34741512d206aa238550a2c42c}{ei\_declare\_aligned\_stack\_constructed\_variable}}(\mbox{\hyperlink{struct_eigen_1_1internal_1_1_gemm_parallel_info}{GemmParallelInfo<Index>}},\mbox{\hyperlink{eigen-3_83_87_2lapack_2cholesky_8cpp_a19e186475eb822b276da4b357d68140d}{info}},threads,0);}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \textcolor{preprocessor}{\ \ \#pragma\ omp\ parallel\ num\_threads(threads)}}
\DoxyCodeLine{00135\ \ \ \{}
\DoxyCodeLine{00136\ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ omp\_get\_thread\_num();}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{comment}{//\ Note\ that\ the\ actual\ number\ of\ threads\ might\ be\ lower\ than\ the\ number\ of\ request\ ones.}}
\DoxyCodeLine{00138\ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ actual\_threads\ =\ omp\_get\_num\_threads();}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ blockCols\ =\ (\mbox{\hyperlink{_tutorial__commainit__02_8cpp_a4407a60bc4387adae24cee658711f2d9}{cols}}\ /\ actual\_threads)\ \&\ \string~\mbox{\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}(0x3);}
\DoxyCodeLine{00141\ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ blockRows\ =\ (\mbox{\hyperlink{_tutorial__commainit__02_8cpp_a061459acc9e078fa4699e0e349887215}{rows}}\ /\ actual\_threads);}
\DoxyCodeLine{00142\ \ \ \ \ blockRows\ =\ (blockRows/Functor::Traits::mr)*Functor::Traits::mr;}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ r0\ =\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}*blockRows;}
\DoxyCodeLine{00145\ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ actualBlockRows\ =\ (\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}+1==actual\_threads)\ ?\ \mbox{\hyperlink{_tutorial__commainit__02_8cpp_a061459acc9e078fa4699e0e349887215}{rows}}-\/r0\ :\ blockRows;}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ c0\ =\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}*blockCols;}
\DoxyCodeLine{00148\ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{Index}}\ actualBlockCols\ =\ (\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}+1==actual\_threads)\ ?\ \mbox{\hyperlink{_tutorial__commainit__02_8cpp_a4407a60bc4387adae24cee658711f2d9}{cols}}-\/c0\ :\ blockCols;}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \ \ \mbox{\hyperlink{eigen-3_83_87_2lapack_2cholesky_8cpp_a19e186475eb822b276da4b357d68140d}{info}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].lhs\_start\ =\ r0;}
\DoxyCodeLine{00151\ \ \ \ \ \mbox{\hyperlink{eigen-3_83_87_2lapack_2cholesky_8cpp_a19e186475eb822b276da4b357d68140d}{info}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].lhs\_length\ =\ actualBlockRows;}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abddae8e27995e1aa57df4d93edd33803}{transpose}})\ \mbox{\hyperlink{benchmarks_2async__task_2async__task_8hpp_abce53bb5cc1ee70cdc013fd9b93547eb}{func}}(c0,\ actualBlockCols,\ 0,\ \mbox{\hyperlink{_tutorial__commainit__02_8cpp_a061459acc9e078fa4699e0e349887215}{rows}},\ \mbox{\hyperlink{eigen-3_83_87_2lapack_2cholesky_8cpp_a19e186475eb822b276da4b357d68140d}{info}});}
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{keywordflow}{else}\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{benchmarks_2async__task_2async__task_8hpp_abce53bb5cc1ee70cdc013fd9b93547eb}{func}}(0,\ \mbox{\hyperlink{_tutorial__commainit__02_8cpp_a061459acc9e078fa4699e0e349887215}{rows}},\ c0,\ actualBlockCols,\ \mbox{\hyperlink{eigen-3_83_87_2lapack_2cholesky_8cpp_a19e186475eb822b276da4b357d68140d}{info}});}
\DoxyCodeLine{00155\ \ \ \}}
\DoxyCodeLine{00156\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00157\ \}}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \}\ \textcolor{comment}{//\ end\ namespace\ internal}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \}\ \textcolor{comment}{//\ end\ namespace\ Eigen}}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ EIGEN\_PARALLELIZER\_H}}

\end{DoxyCode}
