\doxysection{tf\+::Async\+Task类 参考}
\hypertarget{classtf_1_1_async_task}{}\label{classtf_1_1_async_task}\index{tf::AsyncTask@{tf::AsyncTask}}


class to create a dependent asynchronous task (async task)  




{\ttfamily \#include $<$async\+\_\+task.\+hpp$>$}



tf\+::Async\+Task 的协作图\+:
% FIG 0
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtf_1_1_async_task_a68689c79c7d794a8be2e1c181c818001}{Async\+Task}} ()=\mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}}
\begin{DoxyCompactList}\small\item\em constructs an empty task handle \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtf_1_1_async_task_a148ddcabda8fd44746b278499cd4cb53}{\texorpdfstring{$\sim$}{\string~}\+Async\+Task}} ()
\begin{DoxyCompactList}\small\item\em destroys the managed async task if this is the last owner \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtf_1_1_async_task_a682bc679a773da5e45714f71c8137f70}{Async\+Task}} (const \mbox{\hyperlink{classtf_1_1_async_task}{Async\+Task}} \&\mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}})
\begin{DoxyCompactList}\small\item\em constructs an async task that shares ownership of {\ttfamily rhs} \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtf_1_1_async_task_a5a31f85d2ee542f62e784d551ec78896}{Async\+Task}} (\mbox{\hyperlink{classtf_1_1_async_task}{Async\+Task}} \&\&\mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}})
\begin{DoxyCompactList}\small\item\em move-\/constructs an async task from {\ttfamily rhs} \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtf_1_1_async_task}{Async\+Task}} \& \mbox{\hyperlink{classtf_1_1_async_task_a14fa18d27a02c41e01b48ea07e87f5c5}{operator=}} (const \mbox{\hyperlink{classtf_1_1_async_task}{Async\+Task}} \&\mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}})
\begin{DoxyCompactList}\small\item\em copy-\/assigns the async task from {\ttfamily rhs} \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtf_1_1_async_task}{Async\+Task}} \& \mbox{\hyperlink{classtf_1_1_async_task_a8dc18d17f3a5d72ef4d9c20ebf7ade4a}{operator=}} (\mbox{\hyperlink{classtf_1_1_async_task}{Async\+Task}} \&\&\mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}})
\begin{DoxyCompactList}\small\item\em move-\/assigns the async task from {\ttfamily rhs} \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtf_1_1_async_task_ae42c70dc0c5edc6d58f47b346125fca3}{empty}} () const
\begin{DoxyCompactList}\small\item\em checks if this async task is associated with a callable \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1_async_task_a7c12835577fbdc1bca3190cf92c78088}{reset}} ()
\begin{DoxyCompactList}\small\item\em release the managed object of {\ttfamily this} \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classtf_1_1_async_task_a826a2ea909094f5a26c2df876de58056}{hash\+\_\+value}} () const
\begin{DoxyCompactList}\small\item\em obtains the hashed value of this async task \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classtf_1_1_async_task_a6a4a54030f57d1ef05c04ae01825165d}{use\+\_\+count}} () const
\begin{DoxyCompactList}\small\item\em returns the number of shared owners that are currently managing this async task \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtf_1_1_async_task_aefeefa30d7cafdfbb7dc8def542e8e51}{is\+\_\+done}} () const
\begin{DoxyCompactList}\small\item\em checks if the async task finishes \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtf_1_1_async_task_ad6a3bcc865f13ecddc1d32306b6df1bb}{Async\+Task}} (\mbox{\hyperlink{classtf_1_1_node}{Node}} \texorpdfstring{$\ast$}{*})
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1_async_task_ae2eefe6ee6de4f97dd0b247b053addb1}{\+\_\+incref}} ()
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1_async_task_aaee1f8ef1109eb90ad20bac2cba4eaca}{\+\_\+decref}} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Private 属性}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtf_1_1_node}{Node}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classtf_1_1_async_task_aa84e10d306fd24a7ecfa8de2cc964cac}{\+\_\+node}} \{nullptr\}
\end{DoxyCompactItemize}
\doxysubsubsection*{友元}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classtf_1_1_async_task_a763b2f90bc53f92d680a635fe28e858e}{Executor}}
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
class to create a dependent asynchronous task (async task) 

\doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} \doxylink{classtf_1_1_async_task}{tf\+::\+Async\+Task} is a lightweight handle that retains {\itshape shared} ownership of a dependent asynchronous task (async task) created by an executor. This shared ownership ensures that the async task remains alive when adding it to the dependency list of another async task, thus avoiding the classical \href{https://en.wikipedia.org/wiki/ABA_problem}{\texttt{ ABA problem}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ main\ thread\ retains\ shared\ ownership\ of\ async\ task\ A}}
\DoxyCodeLine{tf::AsyncTask\ \mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}}\ =\ \mbox{\hyperlink{thread__pool_8cpp_a543e564a8407bbeac15cb2d929fec755}{executor}}.\mbox{\hyperlink{classtf_1_1_executor_a0e2d792f28136b8227b413d0c27d5c7f}{silent\_dependent\_async}}([]()\{\});}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ task\ A\ remains\ alive\ (i.e.,\ at\ least\ one\ ref\ count\ by\ the\ main\ thread)\ }}
\DoxyCodeLine{\textcolor{comment}{//\ when\ being\ added\ to\ the\ dependency\ list\ of\ async\ task\ B}}
\DoxyCodeLine{tf::AsyncTask\ \mbox{\hyperlink{bench__gemm_8cpp_a37a83060ac796961b44991c836f083f7}{B}}\ =\ \mbox{\hyperlink{thread__pool_8cpp_a543e564a8407bbeac15cb2d929fec755}{executor}}.\mbox{\hyperlink{classtf_1_1_executor_a0e2d792f28136b8227b413d0c27d5c7f}{silent\_dependent\_async}}([]()\{\},\ \mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}});}

\end{DoxyCode}


Currently, \doxylink{classtf_1_1_async_task}{tf\+::\+Async\+Task} is implemented based on the logic of C++ smart pointer std\+::shared\+\_\+ptr and is considered cheap to copy or move as long as only a handful of objects own it. When a worker completes an async task, it will remove the task from the executor, decrementing the number of shared owners by one. If that counter reaches zero, the task is destroyed. 

\doxysubsection{构造及析构函数说明}
\Hypertarget{classtf_1_1_async_task_a68689c79c7d794a8be2e1c181c818001}\index{tf::AsyncTask@{tf::AsyncTask}!AsyncTask@{AsyncTask}}
\index{AsyncTask@{AsyncTask}!tf::AsyncTask@{tf::AsyncTask}}
\doxysubsubsection{\texorpdfstring{AsyncTask()}{AsyncTask()}\hspace{0.1cm}{\footnotesize\ttfamily [1/4]}}
{\footnotesize\ttfamily \label{classtf_1_1_async_task_a68689c79c7d794a8be2e1c181c818001} 
tf\+::\+Async\+Task\+::\+Async\+Task (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



constructs an empty task handle 

函数调用图\+:
% FIG 1
\Hypertarget{classtf_1_1_async_task_a148ddcabda8fd44746b278499cd4cb53}\index{tf::AsyncTask@{tf::AsyncTask}!````~AsyncTask@{\texorpdfstring{$\sim$}{\string~}AsyncTask}}
\index{````~AsyncTask@{\texorpdfstring{$\sim$}{\string~}AsyncTask}!tf::AsyncTask@{tf::AsyncTask}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}AsyncTask()}{\string~AsyncTask()}}
{\footnotesize\ttfamily \label{classtf_1_1_async_task_a148ddcabda8fd44746b278499cd4cb53} 
tf\+::\+Async\+Task\+::\texorpdfstring{$\sim$}{\string~}\+Async\+Task (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



destroys the managed async task if this is the last owner 

函数调用图\+:
% FIG 2
\Hypertarget{classtf_1_1_async_task_a682bc679a773da5e45714f71c8137f70}\index{tf::AsyncTask@{tf::AsyncTask}!AsyncTask@{AsyncTask}}
\index{AsyncTask@{AsyncTask}!tf::AsyncTask@{tf::AsyncTask}}
\doxysubsubsection{\texorpdfstring{AsyncTask()}{AsyncTask()}\hspace{0.1cm}{\footnotesize\ttfamily [2/4]}}
{\footnotesize\ttfamily \label{classtf_1_1_async_task_a682bc679a773da5e45714f71c8137f70} 
tf\+::\+Async\+Task\+::\+Async\+Task (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classtf_1_1_async_task}{Async\+Task}} \&}]{rhs}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



constructs an async task that shares ownership of {\ttfamily rhs} 

函数调用图\+:
% FIG 3
\Hypertarget{classtf_1_1_async_task_a5a31f85d2ee542f62e784d551ec78896}\index{tf::AsyncTask@{tf::AsyncTask}!AsyncTask@{AsyncTask}}
\index{AsyncTask@{AsyncTask}!tf::AsyncTask@{tf::AsyncTask}}
\doxysubsubsection{\texorpdfstring{AsyncTask()}{AsyncTask()}\hspace{0.1cm}{\footnotesize\ttfamily [3/4]}}
{\footnotesize\ttfamily \label{classtf_1_1_async_task_a5a31f85d2ee542f62e784d551ec78896} 
tf\+::\+Async\+Task\+::\+Async\+Task (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtf_1_1_async_task}{Async\+Task}} \&\&}]{rhs}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



move-\/constructs an async task from {\ttfamily rhs} 

函数调用图\+:
% FIG 4
\Hypertarget{classtf_1_1_async_task_ad6a3bcc865f13ecddc1d32306b6df1bb}\index{tf::AsyncTask@{tf::AsyncTask}!AsyncTask@{AsyncTask}}
\index{AsyncTask@{AsyncTask}!tf::AsyncTask@{tf::AsyncTask}}
\doxysubsubsection{\texorpdfstring{AsyncTask()}{AsyncTask()}\hspace{0.1cm}{\footnotesize\ttfamily [4/4]}}
{\footnotesize\ttfamily \label{classtf_1_1_async_task_ad6a3bcc865f13ecddc1d32306b6df1bb} 
tf\+::\+Async\+Task\+::\+Async\+Task (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtf_1_1_node}{Node}} \texorpdfstring{$\ast$}{*}}]{ptr}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}, {\ttfamily [private]}}

函数调用图\+:
% FIG 5


\doxysubsection{成员函数说明}
\Hypertarget{classtf_1_1_async_task_aaee1f8ef1109eb90ad20bac2cba4eaca}\index{tf::AsyncTask@{tf::AsyncTask}!\_decref@{\_decref}}
\index{\_decref@{\_decref}!tf::AsyncTask@{tf::AsyncTask}}
\doxysubsubsection{\texorpdfstring{\_decref()}{\_decref()}}
{\footnotesize\ttfamily \label{classtf_1_1_async_task_aaee1f8ef1109eb90ad20bac2cba4eaca} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tf\+::\+Async\+Task\+::\+\_\+decref (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

函数调用图\+:
% FIG 6
\Hypertarget{classtf_1_1_async_task_ae2eefe6ee6de4f97dd0b247b053addb1}\index{tf::AsyncTask@{tf::AsyncTask}!\_incref@{\_incref}}
\index{\_incref@{\_incref}!tf::AsyncTask@{tf::AsyncTask}}
\doxysubsubsection{\texorpdfstring{\_incref()}{\_incref()}}
{\footnotesize\ttfamily \label{classtf_1_1_async_task_ae2eefe6ee6de4f97dd0b247b053addb1} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tf\+::\+Async\+Task\+::\+\_\+incref (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

\Hypertarget{classtf_1_1_async_task_ae42c70dc0c5edc6d58f47b346125fca3}\index{tf::AsyncTask@{tf::AsyncTask}!empty@{empty}}
\index{empty@{empty}!tf::AsyncTask@{tf::AsyncTask}}
\doxysubsubsection{\texorpdfstring{empty()}{empty()}}
{\footnotesize\ttfamily \label{classtf_1_1_async_task_ae42c70dc0c5edc6d58f47b346125fca3} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} tf\+::\+Async\+Task\+::empty (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



checks if this async task is associated with a callable 

\Hypertarget{classtf_1_1_async_task_a826a2ea909094f5a26c2df876de58056}\index{tf::AsyncTask@{tf::AsyncTask}!hash\_value@{hash\_value}}
\index{hash\_value@{hash\_value}!tf::AsyncTask@{tf::AsyncTask}}
\doxysubsubsection{\texorpdfstring{hash\_value()}{hash\_value()}}
{\footnotesize\ttfamily \label{classtf_1_1_async_task_a826a2ea909094f5a26c2df876de58056} 
size\+\_\+t tf\+::\+Async\+Task\+::hash\+\_\+value (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



obtains the hashed value of this async task 

\Hypertarget{classtf_1_1_async_task_aefeefa30d7cafdfbb7dc8def542e8e51}\index{tf::AsyncTask@{tf::AsyncTask}!is\_done@{is\_done}}
\index{is\_done@{is\_done}!tf::AsyncTask@{tf::AsyncTask}}
\doxysubsubsection{\texorpdfstring{is\_done()}{is\_done()}}
{\footnotesize\ttfamily \label{classtf_1_1_async_task_aefeefa30d7cafdfbb7dc8def542e8e51} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} tf\+::\+Async\+Task\+::is\+\_\+done (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



checks if the async task finishes 

\Hypertarget{classtf_1_1_async_task_a8dc18d17f3a5d72ef4d9c20ebf7ade4a}\index{tf::AsyncTask@{tf::AsyncTask}!operator=@{operator=}}
\index{operator=@{operator=}!tf::AsyncTask@{tf::AsyncTask}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classtf_1_1_async_task_a8dc18d17f3a5d72ef4d9c20ebf7ade4a} 
\mbox{\hyperlink{classtf_1_1_async_task}{Async\+Task}} \& tf\+::\+Async\+Task\+::operator= (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtf_1_1_async_task}{Async\+Task}} \&\&}]{rhs}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



move-\/assigns the async task from {\ttfamily rhs} 

Releases the managed object of {\ttfamily this} and takes over the ownership of {\ttfamily rhs}. 函数调用图\+:
% FIG 7
\Hypertarget{classtf_1_1_async_task_a14fa18d27a02c41e01b48ea07e87f5c5}\index{tf::AsyncTask@{tf::AsyncTask}!operator=@{operator=}}
\index{operator=@{operator=}!tf::AsyncTask@{tf::AsyncTask}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classtf_1_1_async_task_a14fa18d27a02c41e01b48ea07e87f5c5} 
\mbox{\hyperlink{classtf_1_1_async_task}{Async\+Task}} \& tf\+::\+Async\+Task\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classtf_1_1_async_task}{Async\+Task}} \&}]{rhs}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



copy-\/assigns the async task from {\ttfamily rhs} 

Releases the managed object of {\ttfamily this} and retains a new shared ownership of {\ttfamily rhs}. 函数调用图\+:
% FIG 8
\Hypertarget{classtf_1_1_async_task_a7c12835577fbdc1bca3190cf92c78088}\index{tf::AsyncTask@{tf::AsyncTask}!reset@{reset}}
\index{reset@{reset}!tf::AsyncTask@{tf::AsyncTask}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily \label{classtf_1_1_async_task_a7c12835577fbdc1bca3190cf92c78088} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tf\+::\+Async\+Task\+::reset (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



release the managed object of {\ttfamily this} 

函数调用图\+:
% FIG 9
\Hypertarget{classtf_1_1_async_task_a6a4a54030f57d1ef05c04ae01825165d}\index{tf::AsyncTask@{tf::AsyncTask}!use\_count@{use\_count}}
\index{use\_count@{use\_count}!tf::AsyncTask@{tf::AsyncTask}}
\doxysubsubsection{\texorpdfstring{use\_count()}{use\_count()}}
{\footnotesize\ttfamily \label{classtf_1_1_async_task_a6a4a54030f57d1ef05c04ae01825165d} 
size\+\_\+t tf\+::\+Async\+Task\+::use\+\_\+count (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



returns the number of shared owners that are currently managing this async task 



\doxysubsection{友元及相关符号说明}
\Hypertarget{classtf_1_1_async_task_a763b2f90bc53f92d680a635fe28e858e}\index{tf::AsyncTask@{tf::AsyncTask}!Executor@{Executor}}
\index{Executor@{Executor}!tf::AsyncTask@{tf::AsyncTask}}
\doxysubsubsection{\texorpdfstring{Executor}{Executor}}
{\footnotesize\ttfamily \label{classtf_1_1_async_task_a763b2f90bc53f92d680a635fe28e858e} 
friend class \mbox{\hyperlink{classtf_1_1_executor}{Executor}}\hspace{0.3cm}{\ttfamily [friend]}}



\doxysubsection{类成员变量说明}
\Hypertarget{classtf_1_1_async_task_aa84e10d306fd24a7ecfa8de2cc964cac}\index{tf::AsyncTask@{tf::AsyncTask}!\_node@{\_node}}
\index{\_node@{\_node}!tf::AsyncTask@{tf::AsyncTask}}
\doxysubsubsection{\texorpdfstring{\_node}{\_node}}
{\footnotesize\ttfamily \label{classtf_1_1_async_task_aa84e10d306fd24a7ecfa8de2cc964cac} 
\mbox{\hyperlink{classtf_1_1_node}{Node}}\texorpdfstring{$\ast$}{*} tf\+::\+Async\+Task\+::\+\_\+node \{nullptr\}\hspace{0.3cm}{\ttfamily [private]}}



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/taskflow/taskflow/core/\mbox{\hyperlink{taskflow_2core_2async__task_8hpp}{async\+\_\+task.\+hpp}}\end{DoxyCompactItemize}
