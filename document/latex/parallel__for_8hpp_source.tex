\doxysection{parallel\+\_\+for.\+hpp}
\hypertarget{parallel__for_8hpp_source}{}\label{parallel__for_8hpp_source}\index{external/taskflow/3rd-\/party/ff/parallel\_for.hpp@{external/taskflow/3rd-\/party/ff/parallel\_for.hpp}}
\mbox{\hyperlink{parallel__for_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ -\/*-\/\ Mode:\ C++;\ tab-\/width:\ 4;\ c-\/basic-\/offset:\ 4;\ indent-\/tabs-\/mode:\ nil\ -\/*-\/\ */}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00011\ \ }
\DoxyCodeLine{00012\ \textcolor{comment}{/*\ ***************************************************************************}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ \ FastFlow\ is\ free\ software;\ you\ can\ redistribute\ it\ and/or\ modify\ it}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ \ under\ the\ terms\ of\ the\ GNU\ Lesser\ General\ Public\ License\ version\ 3\ as}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *\ \ published\ by\ the\ Free\ Software\ Foundation.}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ \ Starting\ from\ version\ 3.0.1\ FastFlow\ is\ dual\ licensed\ under\ the\ GNU\ LGPLv3}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ \ or\ MIT\ License\ (https://github.com/ParaGroup/WindFlow/blob/vers3.x/LICENSE.MIT)}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *\ \ This\ program\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,\ but\ WITHOUT}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ *\ \ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of\ MERCHANTABILITY\ or}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ *\ \ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the\ GNU\ Lesser\ General\ Public}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ *\ \ License\ for\ more\ details.}}
\DoxyCodeLine{00024\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00025\ \textcolor{comment}{\ *\ \ You\ should\ have\ received\ a\ copy\ of\ the\ GNU\ Lesser\ General\ Public\ License}}
\DoxyCodeLine{00026\ \textcolor{comment}{\ *\ \ along\ with\ this\ program;\ if\ not,\ write\ to\ the\ Free\ Software\ Foundation,}}
\DoxyCodeLine{00027\ \textcolor{comment}{\ *\ \ Inc.,\ 59\ Temple\ Place\ -\/\ Suite\ 330,\ Boston,\ MA\ 02111-\/1307,\ USA.}}
\DoxyCodeLine{00028\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00029\ \textcolor{comment}{\ ****************************************************************************}}
\DoxyCodeLine{00030\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00031\ \textcolor{comment}{/*}}
\DoxyCodeLine{00032\ \textcolor{comment}{\ *\ \ -\/\ Author:\ }}
\DoxyCodeLine{00033\ \textcolor{comment}{\ *\ \ \ \ \ Massimo\ Torquati\ <torquati@di.unipi.it>}}
\DoxyCodeLine{00034\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00035\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00036\ \textcolor{comment}{\ *\ \ This\ file\ contains\ the\ ParallelFor\ and\ the\ ParallelForReduce\ classes\ }}
\DoxyCodeLine{00037\ \textcolor{comment}{\ *\ \ (and\ also\ some\ static\ functions).}}
\DoxyCodeLine{00038\ \textcolor{comment}{\ *\ }}
\DoxyCodeLine{00039\ \textcolor{comment}{\ *\ \ Iterations\ scheduling:}}
\DoxyCodeLine{00040\ \textcolor{comment}{\ *\ }}
\DoxyCodeLine{00041\ \textcolor{comment}{\ *\ \ As\ a\ general\ rule,\ the\ scheduling\ strategy\ is\ selected\ according\ to\ the\ chunk\ value:}}
\DoxyCodeLine{00042\ \textcolor{comment}{\ *\ \ \ \ \ \ -\/\ chunk\ ==\ 0\ means\ default\ static\ scheduling,\ that\ is,\ \string~(\#iteration\_space/num\_workers)\ }}
\DoxyCodeLine{00043\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ iterations\ per\ thread\ assigned\ in\ one\ single\ shot\ at\ the\ beginning.}}
\DoxyCodeLine{00044\ \textcolor{comment}{\ *\ \ \ \ \ \ -\/\ chunk\ >\ \ 0\ means\ dynamic\ scheduling\ with\ grain\ equal\ to\ the\ chunk\ size,\ that\ is,}}
\DoxyCodeLine{00045\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ no\ more\ than\ chunk\ iterations\ at\ a\ time\ is\ assigned\ to\ one\ Worker,\ the\ }}
\DoxyCodeLine{00046\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ chunk\ is\ assigned\ to\ Workers\ dynamically}}
\DoxyCodeLine{00047\ \textcolor{comment}{\ *\ \ \ \ \ \ -\/\ chunk\ <\ \ 0\ means\ static\ scheduling\ with\ grain\ equal\ to\ the\ chunk\ size,\ that\ is,}}
\DoxyCodeLine{00048\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ the\ iteration\ space\ is\ divided\ into\ chunks\ each\ one\ of\ no\ more\ }}
\DoxyCodeLine{00049\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ than\ chunk\ iterations.\ Then\ chunks\ are\ assigned\ to\ the\ Workers\ statically\ }}
\DoxyCodeLine{00050\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ and\ in\ a\ round-\/robin\ fashion.}}
\DoxyCodeLine{00051\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00052\ \textcolor{comment}{\ *\ \ If\ you\ want\ to\ use\ the\ static\ scheduling\ policy\ (either\ default\ or\ with\ a\ given\ grain),}}
\DoxyCodeLine{00053\ \textcolor{comment}{\ *\ \ please\ use\ the\ **parallel\_for\_static**\ method.}}
\DoxyCodeLine{00054\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00055\ \textcolor{comment}{\ *\ \ To\ use\ or\ not\ to\ use\ a\ scheduler\ thread\ ?}}
\DoxyCodeLine{00056\ \textcolor{comment}{\ *\ \ As\ always,\ it\ depends\ on\ the\ application,\ scheduling\ strategy,\ platform\ at\ hand,\ }}
\DoxyCodeLine{00057\ \textcolor{comment}{\ *\ \ parallelism\ degree,\ ...etc....}}
\DoxyCodeLine{00058\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00059\ \textcolor{comment}{\ *\ \ The\ general\ rule\ is:\ a\ scheduler\ thread\ is\ started\ if:}}
\DoxyCodeLine{00060\ \textcolor{comment}{\ *\ \ \ 1.\ the\ dynamic\ scheduling\ policy\ is\ used\ (chunk>0);}}
\DoxyCodeLine{00061\ \textcolor{comment}{\ *\ \ \ 2.\ there\ are\ enough\ cores\ for\ hosting\ both\ worker\ threads\ and\ the\ scheduler\ thread;}}
\DoxyCodeLine{00062\ \textcolor{comment}{\ *\ \ \ 3.\ the\ number\ of\ tasks\ per\ thread\ is\ greater\ than\ 1.}}
\DoxyCodeLine{00063\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00064\ \textcolor{comment}{\ *\ \ In\ case\ of\ static\ scheduling\ (chunk\ <=\ 0),\ the\ scheduler\ thread\ is\ never\ started.}}
\DoxyCodeLine{00065\ \textcolor{comment}{\ *\ \ It\ is\ possible\ to\ explicitly\ disable/enable\ the\ presence\ of\ the\ scheduler\ thread}}
\DoxyCodeLine{00066\ \textcolor{comment}{\ *\ \ both\ at\ compile\ time\ and\ at\ run-\/time\ by\ using\ the\ disableScheduler\ method\ and\ the\ }}
\DoxyCodeLine{00067\ \textcolor{comment}{\ *\ \ two\ defines\ NO\_PARFOR\_SCHEDULER\_THREAD\ and\ PARFOR\_SCHEDULER\_THREAD.\ }}
\DoxyCodeLine{00068\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00069\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00070\ \textcolor{comment}{\ *\ \ How\ to\ use\ the\ ParallelFor\ (in\ a\ nutshell)\ :}}
\DoxyCodeLine{00071\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ParallelForReduce<long>\ pfr;}}
\DoxyCodeLine{00072\ \textcolor{comment}{\ *\ \ \ \ for(long\ i=0;i<N;i++)\ \ \ \ \ \ \ \ \ \ \ \ \ pfr.parallel\_for(0,N,[\&](const\ long\ i)\ \{}}
\DoxyCodeLine{00073\ \textcolor{comment}{\ *\ \ \ \ \ \ \ A[i]=f(i);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ A[i]=f(i);}}
\DoxyCodeLine{00074\ \textcolor{comment}{\ *\ \ \ \ long\ sum=0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/-\/>\ \ \ \ \});}}
\DoxyCodeLine{00075\ \textcolor{comment}{\ *\ \ \ \ for(long\ i=0;\ i<N;++i)\ \ \ \ \ \ \ \ \ \ \ \ long\ sum=0;}}
\DoxyCodeLine{00076\ \textcolor{comment}{\ *\ \ \ \ \ \ \ sum+=g(A[i]);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pfr.parallel\_reduce(sum,0,0,N,[\&](const\ long\ i,long\ \&sum)\ \{}}
\DoxyCodeLine{00077\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sum+=g(A[i]);}}
\DoxyCodeLine{00078\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},\ [](long\ \&v,\ const\ long\ elem)\ \{v+=elem;\});}}
\DoxyCodeLine{00079\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00080\ \textcolor{comment}{\ *\ }}
\DoxyCodeLine{00081\ \textcolor{comment}{\ *\ }}
\DoxyCodeLine{00082\ \textcolor{comment}{\ *\ For\ just\ a\ single\ parallel\ loop,\ it\ is\ better\ to\ use\ the\ one-\/shot\ version\ (see\ at\ the\ end\ of\ }}
\DoxyCodeLine{00083\ \textcolor{comment}{\ *\ this\ file).\ \ Useful\ when\ there\ is\ just\ }}
\DoxyCodeLine{00084\ \textcolor{comment}{\ \ \ \ \ *\ a\ single\ parallel\ loop.}}
\DoxyCodeLine{00085\ \textcolor{comment}{\ \ \ \ \ *\ This\ version\ should\ not\ be\ used\ if\ the\ parallel\ loop\ is\ called\ many\ }}
\DoxyCodeLine{00086\ \textcolor{comment}{\ \ \ \ \ *\ times\ (e.g.,\ within\ a\ sequential\ loop)\ \ or\ if\ there\ are\ several\ loops\ }}
\DoxyCodeLine{00087\ \textcolor{comment}{\ \ \ \ \ *\ that\ can\ be\ parallelized\ by\ using\ the\ same\ ParallelFor*\ object.\ }}
\DoxyCodeLine{00088\ \textcolor{comment}{\ \ \ \ \ *\ If\ this\ is\ the\ case,\ the\ version\ with\ the\ object\ instance\ is\ more\ }}
\DoxyCodeLine{00089\ \textcolor{comment}{\ \ \ \ \ *\ efficient\ because\ the\ Worker\ threads\ are\ created\ once\ and\ then\ }}
\DoxyCodeLine{00090\ \textcolor{comment}{\ \ \ \ \ *\ re-\/used\ many\ times.}}
\DoxyCodeLine{00091\ \textcolor{comment}{\ \ \ \ \ *\ On\ the\ contrary,\ the\ one-\/shot\ version\ has\ a\ lower\ setup\ overhead\ but\ }}
\DoxyCodeLine{00092\ \textcolor{comment}{\ \ \ \ \ *\ Worker\ threads\ are\ destroyed\ at\ the\ end\ of\ the\ loop.}}
\DoxyCodeLine{00093\ \textcolor{comment}{}}
\DoxyCodeLine{00094\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00095\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \textcolor{preprocessor}{\#ifndef\ FF\_PARFOR\_HPP}}
\DoxyCodeLine{00098\ \textcolor{preprocessor}{\#define\ FF\_PARFOR\_HPP}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{3rd-party_2ff_2pipeline_8hpp}{ff/pipeline.hpp}}>}}
\DoxyCodeLine{00101\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{parallel__for__internals_8hpp}{ff/parallel\_for\_internals.hpp}}>}}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceff}{ff}}\ \{}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \textcolor{comment}{//}}
\DoxyCodeLine{00106\ \textcolor{comment}{//\ TODO:\ to\ re-\/write\ the\ ParallelFor\ class\ as\ a\ specialization\ of\ the\ ParallelForReduce}}
\DoxyCodeLine{00107\ \textcolor{comment}{//}}
\DoxyCodeLine{00108\ \ \ \ \ \ }
\DoxyCodeLine{00121\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classff_1_1_parallel_for_af5f8175d3d8af6bb7a17e4a12812cfc4}{ParallelFor}}:\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a853e08b55ff63d1c5a38d9b6aa0014ee}{ff\_forall\_farm}}<forallreduce\_W<int>\ >\ \{}
\DoxyCodeLine{00122\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classff_1_1_parallel_for_af5f8175d3d8af6bb7a17e4a12812cfc4}{ParallelFor}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ maxnw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}},\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_af17988819c07da0586d0ab2eeb5555a7}{spinwait}}=\textcolor{keyword}{false},\ \textcolor{keywordtype}{bool}\ spinbarrier=\textcolor{keyword}{false}):}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_a853e08b55ff63d1c5a38d9b6aa0014ee}{ff\_forall\_farm}}<\mbox{\hyperlink{classff_1_1forallreduce___w}{forallreduce\_W}}<\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}>\ >(maxnw,\mbox{\hyperlink{classff_1_1ff__forall__farm_af17988819c07da0586d0ab2eeb5555a7}{spinwait}},\mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}},spinbarrier)\ \{\}}
\DoxyCodeLine{00152\ \ \ \ \ \mbox{\hyperlink{classff_1_1_parallel_for_a9f145a09715bff8b0f7aabddc24981ea}{\string~ParallelFor}}()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ }
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_a853e08b55ff63d1c5a38d9b6aa0014ee}{ff\_forall\_farm<forallreduce\_W<int>}}\ >\mbox{\hyperlink{classff_1_1ff__farm_a2c7d4b190bed5cd9d9758a99393a72e1}{::stop}}();}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_a853e08b55ff63d1c5a38d9b6aa0014ee}{ff\_forall\_farm<forallreduce\_W<int>}}\ >\mbox{\hyperlink{classff_1_1ff__forall__farm_ad96b830f42323f4cedeef0ba20995578}{::wait}}();}
\DoxyCodeLine{00155\ \ \ \ \ \}}
\DoxyCodeLine{00156\ \ }
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_a1eb18a7269715a4cf397807eb3003afe}{disableScheduler}}(\textcolor{keywordtype}{bool}\ onoff=\textcolor{keyword}{true})\ \{\ }
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_a853e08b55ff63d1c5a38d9b6aa0014ee}{ff\_forall\_farm<forallreduce\_W<int>}}\ >\mbox{\hyperlink{classff_1_1_parallel_for_a1eb18a7269715a4cf397807eb3003afe}{::disableScheduler}}(onoff);}
\DoxyCodeLine{00174\ \ \ \ \ \}}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{comment}{//\ It\ puts\ all\ spinning\ threads\ to\ sleep.\ It\ does\ not\ disable\ the\ spinWait\ flag}}
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{comment}{//\ so\ at\ the\ next\ call,\ threads\ start\ spinning\ again.}}
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classff_1_1_parallel_for_aa1fd5053e9f0f97ce7d2fc3f78305d5b}{threadPause}}()\ \{}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a853e08b55ff63d1c5a38d9b6aa0014ee}{ff\_forall\_farm<forallreduce\_W<int>}}\ >\mbox{\hyperlink{classff_1_1ff__forall__farm_ac599f4eaa27d4a8a5381701d51b4c606}{::stopSpinning}}();}
\DoxyCodeLine{00180\ \ \ \ \ \}}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ parallel\_for\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function>}
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_a2c87cec51135615ab1c598bc86d3f75b}{parallel\_for}}(\textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keyword}{const}\ Function\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ }
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_a417a5797ec4fb3b267d51ec35f37baec}{FF\_PARFOR\_START}}(\textcolor{keyword}{this},\ parforidx,first,last,1,\mbox{\hyperlink{parallel__for__internals_8hpp_aebaf75dc17f130d2be1e1d78bbbd80e2}{PARFOR\_STATIC}}(0),nw)\ \{}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(parforidx);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a609db55c8533f4b368ef23e5eb376f24}{FF\_PARFOR\_STOP}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00203\ \ \ \ \ \}}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function>}
\DoxyCodeLine{00220\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_a7db60bff4919292f078183624816281d}{parallel\_for}}(\textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keyword}{const}\ Function\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ }
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_a417a5797ec4fb3b267d51ec35f37baec}{FF\_PARFOR\_START}}(\textcolor{keyword}{this},\ parforidx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_aebaf75dc17f130d2be1e1d78bbbd80e2}{PARFOR\_STATIC}}(0),nw)\ \{}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(parforidx);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a609db55c8533f4b368ef23e5eb376f24}{FF\_PARFOR\_STOP}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00225\ \ \ \ \ \}}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00244\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function>}
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_a790e1396dc6771e0e2bc83c4ee50cb74}{parallel\_for}}(\textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ grain,\ }
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_a417a5797ec4fb3b267d51ec35f37baec}{FF\_PARFOR\_START}}(\textcolor{keyword}{this},\ parforidx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_a392081d94f08a8c3e339dbc0eaf5ecb4}{PARFOR\_DYNAMIC}}(grain),nw)\ \{}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(parforidx);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a609db55c8533f4b368ef23e5eb376f24}{FF\_PARFOR\_STOP}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00250\ \ \ \ \ \}\ \ \ \ }
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00267\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function>}
\DoxyCodeLine{00268\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_a4c17da9283837b33bc4855b4a6811eb3}{parallel\_for\_thid}}(\textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ grain,\ }
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_a417a5797ec4fb3b267d51ec35f37baec}{FF\_PARFOR\_START}}(\textcolor{keyword}{this},\ parforidx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_a392081d94f08a8c3e339dbc0eaf5ecb4}{PARFOR\_DYNAMIC}}(grain),nw)\ \{}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(parforidx,\_ff\_thread\_id);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a609db55c8533f4b368ef23e5eb376f24}{FF\_PARFOR\_STOP}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00273\ \ \ \ \ \}\ \ \ \ }
\DoxyCodeLine{00274\ }
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function>}
\DoxyCodeLine{00299\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_aaea96c0847435dff090ee76206de4111}{parallel\_for\_idx}}(\textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ grain,\ }
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_abae544558dc367353f45a1a31cde958b}{FF\_PARFOR\_START\_IDX}}(\textcolor{keyword}{this},parforidx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_a392081d94f08a8c3e339dbc0eaf5ecb4}{PARFOR\_DYNAMIC}}(grain),nw)\ \{}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(ff\_start\_idx,\ ff\_stop\_idx,\_ff\_thread\_id);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a609db55c8533f4b368ef23e5eb376f24}{FF\_PARFOR\_STOP}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00304\ \ \ \ \ \}}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00326\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function>}
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_ab26990c5b0896f2809c4244d6b54d55b}{parallel\_for\_static}}(\textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ grain,\ }
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (grain==0\ ||\ nw==1)\ \{}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Divide\ in\ evenly\ partioned\ parts}}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_a417a5797ec4fb3b267d51ec35f37baec}{FF\_PARFOR\_START}}(\textcolor{keyword}{this},\ parforidx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_aebaf75dc17f130d2be1e1d78bbbd80e2}{PARFOR\_STATIC}}(grain),nw)\ \{}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(parforidx);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a609db55c8533f4b368ef23e5eb376f24}{FF\_PARFOR\_STOP}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_a91e10388bcebd480a4e2fbcdada9b9bb}{FF\_PARFOR\_T\_START\_STATIC}}(\textcolor{keyword}{this},\ \textcolor{keywordtype}{int},\ parforidx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_aebaf75dc17f130d2be1e1d78bbbd80e2}{PARFOR\_STATIC}}(grain),nw)\ \{}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(parforidx);}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a5d675c387bb864dfcc200f46cb7c14d3}{FF\_PARFOR\_T\_STOP}}(\textcolor{keyword}{this},\textcolor{keywordtype}{int});}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00339\ \ \ \ \ \}}
\DoxyCodeLine{00340\ \};}
\DoxyCodeLine{00341\ }
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00361\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00362\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classff_1_1_parallel_for_reduce_a5cebe62d467a514b740e559173dd6068}{ParallelForReduce}}:\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a853e08b55ff63d1c5a38d9b6aa0014ee}{ff\_forall\_farm}}<forallreduce\_W<T>\ >\ \{}
\DoxyCodeLine{00363\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00372\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classff_1_1_parallel_for_reduce_a5cebe62d467a514b740e559173dd6068}{ParallelForReduce}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ maxnw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}},\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_af17988819c07da0586d0ab2eeb5555a7}{spinwait}}=\textcolor{keyword}{false},\ \textcolor{keywordtype}{bool}\ spinbarrier=\textcolor{keyword}{false}):}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_a853e08b55ff63d1c5a38d9b6aa0014ee}{ff\_forall\_farm}}<\mbox{\hyperlink{classff_1_1forallreduce___w}{forallreduce\_W}}<\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}>\ >(maxnw,\mbox{\hyperlink{classff_1_1ff__forall__farm_af17988819c07da0586d0ab2eeb5555a7}{spinwait}},\mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}},spinbarrier)\ \{\}}
\DoxyCodeLine{00374\ }
\DoxyCodeLine{00375\ }
\DoxyCodeLine{00376\ \ \ \ \ \textcolor{comment}{//\ this\ constructor\ is\ useful\ to\ skip\ loop\ warmup\ and\ to\ disable\ spinwait}}
\DoxyCodeLine{00386\ \ \ \ \ \mbox{\hyperlink{classff_1_1_parallel_for_reduce_a4d3e6eccc22ae65049be8851db5b46e9}{ParallelForReduce}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ maxnw,\ \textcolor{keywordtype}{bool}\ \textcolor{comment}{/*spinWait*/},\ \textcolor{keywordtype}{bool}\ \textcolor{comment}{/*skipWarmup*/},\ \textcolor{keywordtype}{bool}\ \textcolor{comment}{/*spinbarrier*/}):\ }
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_a853e08b55ff63d1c5a38d9b6aa0014ee}{ff\_forall\_farm}}<\mbox{\hyperlink{classff_1_1forallreduce___w}{forallreduce\_W}}<\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}>\ >(maxnw,\mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}},\ \mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}},\ \mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}})\ \{\}}
\DoxyCodeLine{00388\ }
\DoxyCodeLine{00389\ }
\DoxyCodeLine{00390\ \ \ \ \ \mbox{\hyperlink{classff_1_1_parallel_for_reduce_a868501faf9854266df1e0d7b5ee89aa3}{\string~ParallelForReduce}}()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ }
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_a853e08b55ff63d1c5a38d9b6aa0014ee}{ff\_forall\_farm<forallreduce\_W<T>}}\ >\mbox{\hyperlink{classff_1_1ff__farm_a2c7d4b190bed5cd9d9758a99393a72e1}{::stop}}();}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_a853e08b55ff63d1c5a38d9b6aa0014ee}{ff\_forall\_farm<forallreduce\_W<T>}}\ >\mbox{\hyperlink{classff_1_1ff__forall__farm_ad96b830f42323f4cedeef0ba20995578}{::wait}}();}
\DoxyCodeLine{00393\ \ \ \ \ \}}
\DoxyCodeLine{00394\ }
\DoxyCodeLine{00395\ \ \ \ \ \textcolor{comment}{//\ By\ calling\ this\ method\ with\ 'true'\ the\ scheduler\ will\ be\ disabled,}}
\DoxyCodeLine{00396\ \ \ \ \ \textcolor{comment}{//\ to\ restore\ the\ usage\ of\ the\ scheduler\ thread\ just\ pass\ 'false'\ as\ }}
\DoxyCodeLine{00397\ \ \ \ \ \textcolor{comment}{//\ parameter}}
\DoxyCodeLine{00398\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_reduce_adf63310f445854413fa1d56795c05e88}{disableScheduler}}(\textcolor{keywordtype}{bool}\ onoff=\textcolor{keyword}{true})\ \{\ }
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm_a853e08b55ff63d1c5a38d9b6aa0014ee}{ff\_forall\_farm<forallreduce\_W<T>}}\ >\mbox{\hyperlink{classff_1_1_parallel_for_reduce_adf63310f445854413fa1d56795c05e88}{::disableScheduler}}(onoff);}
\DoxyCodeLine{00400\ \ \ \ \ \}}
\DoxyCodeLine{00401\ }
\DoxyCodeLine{00402\ \ \ \ \ \textcolor{comment}{//\ It\ puts\ all\ spinning\ threads\ to\ sleep.\ It\ does\ not\ disable\ the\ spinWait\ flag}}
\DoxyCodeLine{00403\ \ \ \ \ \textcolor{comment}{//\ so\ at\ the\ next\ call,\ threads\ start\ spinning\ again.}}
\DoxyCodeLine{00404\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classff_1_1_parallel_for_reduce_ac67043ebedc0dd9d9b635a253c4523e3}{threadPause}}()\ \{}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__forall__farm_a853e08b55ff63d1c5a38d9b6aa0014ee}{ff\_forall\_farm<forallreduce\_W<T>}}\ >\mbox{\hyperlink{classff_1_1ff__forall__farm_ac599f4eaa27d4a8a5381701d51b4c606}{::stopSpinning}}();}
\DoxyCodeLine{00406\ \ \ \ \ \}}
\DoxyCodeLine{00407\ }
\DoxyCodeLine{00408\ \ \ \ \ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ parallel\_for\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00422\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function>}
\DoxyCodeLine{00423\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_reduce_a657c6feffb95290a17a3924df8df6622}{parallel\_for}}(\textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keyword}{const}\ Function\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ }
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_a270569940da19933e400ca62c7fcb251}{FF\_PARFOR\_T\_START}}(\textcolor{keyword}{this},\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ parforidx,first,last,1,\mbox{\hyperlink{parallel__for__internals_8hpp_aebaf75dc17f130d2be1e1d78bbbd80e2}{PARFOR\_STATIC}}(0),nw)\ \{}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(parforidx);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a5d675c387bb864dfcc200f46cb7c14d3}{FF\_PARFOR\_T\_STOP}}(\textcolor{keyword}{this},\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}});}
\DoxyCodeLine{00428\ \ \ \ \ \}}
\DoxyCodeLine{00442\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function>}
\DoxyCodeLine{00443\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_reduce_a316493fd720d3a3e4e0836981e3e4d0f}{parallel\_for}}(\textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keyword}{const}\ Function\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ }
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_a270569940da19933e400ca62c7fcb251}{FF\_PARFOR\_T\_START}}(\textcolor{keyword}{this},\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ parforidx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_aebaf75dc17f130d2be1e1d78bbbd80e2}{PARFOR\_STATIC}}(0),nw)\ \{}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(parforidx);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a5d675c387bb864dfcc200f46cb7c14d3}{FF\_PARFOR\_T\_STOP}}(\textcolor{keyword}{this},\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}});}
\DoxyCodeLine{00448\ \ \ \ \ \}}
\DoxyCodeLine{00465\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function>}
\DoxyCodeLine{00466\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_reduce_a48e9c46c45ed0fe5c18e4e794f1bb785}{parallel\_for}}(\textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ grain,\ }
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_a270569940da19933e400ca62c7fcb251}{FF\_PARFOR\_T\_START}}(\textcolor{keyword}{this},\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ parforidx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_a392081d94f08a8c3e339dbc0eaf5ecb4}{PARFOR\_DYNAMIC}}(grain),nw)\ \{}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(parforidx);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a609db55c8533f4b368ef23e5eb376f24}{FF\_PARFOR\_STOP}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00471\ \ \ \ \ \}\ \ \ \ }
\DoxyCodeLine{00487\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function>}
\DoxyCodeLine{00488\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_reduce_a00a7ab662d57e15d1a0e18ec462679a6}{parallel\_for\_thid}}(\textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ grain,\ }
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_a270569940da19933e400ca62c7fcb251}{FF\_PARFOR\_T\_START}}(\textcolor{keyword}{this},\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ parforidx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_a392081d94f08a8c3e339dbc0eaf5ecb4}{PARFOR\_DYNAMIC}}(grain),nw)\ \{}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(parforidx,\_ff\_thread\_id);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a5d675c387bb864dfcc200f46cb7c14d3}{FF\_PARFOR\_T\_STOP}}(\textcolor{keyword}{this},\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}});}
\DoxyCodeLine{00493\ \ \ \ \ \}\ \ \ \ }
\DoxyCodeLine{00517\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function>}
\DoxyCodeLine{00518\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_reduce_aa1509b664d8de9c2cf8f615356ed0290}{parallel\_for\_idx}}(\textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ grain,\ }
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00520\ }
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_abe55f4ca8ff552b4701f4ee3fbf8334d}{FF\_PARFOR\_T\_START\_IDX}}(\textcolor{keyword}{this},\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ parforidx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_a392081d94f08a8c3e339dbc0eaf5ecb4}{PARFOR\_DYNAMIC}}(grain),nw)\ \{}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(ff\_start\_idx,\ ff\_stop\_idx,\_ff\_thread\_id);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a5d675c387bb864dfcc200f46cb7c14d3}{FF\_PARFOR\_T\_STOP}}(\textcolor{keyword}{this},\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}});}
\DoxyCodeLine{00524\ \ \ \ \ \}\ \ \ \ }
\DoxyCodeLine{00539\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function>}
\DoxyCodeLine{00540\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_reduce_a7e62e6a79c2969a76e536bccbe501c14}{parallel\_for\_static}}(\textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ grain,\ }
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (grain==0\ ||\ nw==1)\ \{}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_a270569940da19933e400ca62c7fcb251}{FF\_PARFOR\_T\_START}}(\textcolor{keyword}{this},\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ parforidx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_aebaf75dc17f130d2be1e1d78bbbd80e2}{PARFOR\_STATIC}}(grain),nw)\ \{}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(parforidx);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a5d675c387bb864dfcc200f46cb7c14d3}{FF\_PARFOR\_T\_STOP}}(\textcolor{keyword}{this},\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}});}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_a91e10388bcebd480a4e2fbcdada9b9bb}{FF\_PARFOR\_T\_START\_STATIC}}(\textcolor{keyword}{this},\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ parforidx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_aebaf75dc17f130d2be1e1d78bbbd80e2}{PARFOR\_STATIC}}(grain),nw)\ \{}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(parforidx);}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a5d675c387bb864dfcc200f46cb7c14d3}{FF\_PARFOR\_T\_STOP}}(\textcolor{keyword}{this},\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}});}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00551\ \ \ \ \ \}}
\DoxyCodeLine{00552\ }
\DoxyCodeLine{00553\ \ \ \ \ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ parallel\_reduce\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00573\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function,\ \textcolor{keyword}{typename}\ FReduction>}
\DoxyCodeLine{00574\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_reduce_a4f9f057502c19a53bd980742e5dd8b1d}{parallel\_reduce}}(\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ var,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}},\ }
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ }
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ partialreduce\_body,\ \textcolor{keyword}{const}\ FReduction\&\ finalreduce\_body,}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_afee466de681fc3a237bd820abdf04cb5}{FF\_PARFORREDUCE\_START}}(\textcolor{keyword}{this},\ var,\ \mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}},\ parforidx,\ first,\ last,\ 1,\ \mbox{\hyperlink{parallel__for__internals_8hpp_aebaf75dc17f130d2be1e1d78bbbd80e2}{PARFOR\_STATIC}}(0),\ nw)\ \{}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ \ \ \ \ partialreduce\_body(parforidx,\ var);}
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a709203bf3140e9f3b1bd7faa48dac45a}{FF\_PARFORREDUCE\_F\_STOP}}(\textcolor{keyword}{this},\ var,\ finalreduce\_body);}
\DoxyCodeLine{00581\ \ \ \ \ \}}
\DoxyCodeLine{00603\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function,\ \textcolor{keyword}{typename}\ FReduction>}
\DoxyCodeLine{00604\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_reduce_a78a84915a9e3b20142333f9ebe6313cc}{parallel\_reduce}}(\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ var,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}},\ }
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ }
\DoxyCodeLine{00606\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ body,\ \textcolor{keyword}{const}\ FReduction\&\ finalreduce,}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_afee466de681fc3a237bd820abdf04cb5}{FF\_PARFORREDUCE\_START}}(\textcolor{keyword}{this},\ var,\ \mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}},\ parforidx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_aebaf75dc17f130d2be1e1d78bbbd80e2}{PARFOR\_STATIC}}(0),nw)\ \{}
\DoxyCodeLine{00609\ \ \ \ \ \ \ \ \ \ \ \ \ body(parforidx,\ var);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a709203bf3140e9f3b1bd7faa48dac45a}{FF\_PARFORREDUCE\_F\_STOP}}(\textcolor{keyword}{this},\ var,\ finalreduce);}
\DoxyCodeLine{00611\ \ \ \ \ \}}
\DoxyCodeLine{00633\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function,\ \textcolor{keyword}{typename}\ FReduction>}
\DoxyCodeLine{00634\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_reduce_abe6cc081097aca1290a39e4eda04376d}{parallel\_reduce}}(\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ var,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}},\ }
\DoxyCodeLine{00635\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ grain,\ }
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ body,\ \textcolor{keyword}{const}\ FReduction\&\ finalreduce,}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00638\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_afee466de681fc3a237bd820abdf04cb5}{FF\_PARFORREDUCE\_START}}(\textcolor{keyword}{this},\ var,\ \mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}},\ parforidx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_a392081d94f08a8c3e339dbc0eaf5ecb4}{PARFOR\_DYNAMIC}}(grain),nw)\ \{}
\DoxyCodeLine{00639\ \ \ \ \ \ \ \ \ \ \ \ \ body(parforidx,\ var);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00640\ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a709203bf3140e9f3b1bd7faa48dac45a}{FF\_PARFORREDUCE\_F\_STOP}}(\textcolor{keyword}{this},\ var,\ finalreduce);}
\DoxyCodeLine{00641\ \ \ \ \ \}}
\DoxyCodeLine{00642\ }
\DoxyCodeLine{00643\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function,\ \textcolor{keyword}{typename}\ FReduction>}
\DoxyCodeLine{00644\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_reduce_aea2fa20a7fb23a641bc73d91a5eaacd7}{parallel\_reduce\_thid}}(\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ var,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}},}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ grain,}
\DoxyCodeLine{00646\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ body,\ \textcolor{keyword}{const}\ FReduction\&\ finalreduce,}
\DoxyCodeLine{00647\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00648\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_afee466de681fc3a237bd820abdf04cb5}{FF\_PARFORREDUCE\_START}}(\textcolor{keyword}{this},\ var,\ \mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}},\ parforidx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_a392081d94f08a8c3e339dbc0eaf5ecb4}{PARFOR\_DYNAMIC}}(grain),nw)\ \{}
\DoxyCodeLine{00649\ \ \ \ \ \ \ \ \ \ \ \ \ body(parforidx,\ var,\ \_ff\_thread\_id);}
\DoxyCodeLine{00650\ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a709203bf3140e9f3b1bd7faa48dac45a}{FF\_PARFORREDUCE\_F\_STOP}}(\textcolor{keyword}{this},\ var,\ finalreduce);}
\DoxyCodeLine{00651\ \ \ \ \ \}}
\DoxyCodeLine{00652\ }
\DoxyCodeLine{00653\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function,\ \textcolor{keyword}{typename}\ FReduction>}
\DoxyCodeLine{00654\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_reduce_ab718fb112b9a9f10ceff563a02f41b2a}{parallel\_reduce\_idx}}(\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ var,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}},}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ grain,}
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ body,\ \textcolor{keyword}{const}\ FReduction\&\ finalreduce,}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_a3428f352d29e1ce0276ed0dd3e0cadbd}{FF\_PARFORREDUCE\_START\_IDX}}(\textcolor{keyword}{this},\ var,\ \mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}},\ idx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_a392081d94f08a8c3e339dbc0eaf5ecb4}{PARFOR\_DYNAMIC}}(grain),nw)\ \{}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \ \ \ \ body(ff\_start\_idx,\ ff\_stop\_idx,\ var,\ \_ff\_thread\_id);}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a709203bf3140e9f3b1bd7faa48dac45a}{FF\_PARFORREDUCE\_F\_STOP}}(\textcolor{keyword}{this},\ var,\ finalreduce);}
\DoxyCodeLine{00661\ \ \ \ \ \}}
\DoxyCodeLine{00662\ }
\DoxyCodeLine{00680\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function,\ \textcolor{keyword}{typename}\ FReduction>}
\DoxyCodeLine{00681\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_reduce_a18976846d0cc774facbffb2075dc7a7f}{parallel\_reduce\_static}}(\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ var,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}},}
\DoxyCodeLine{00682\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ grain,\ }
\DoxyCodeLine{00683\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ body,\ \textcolor{keyword}{const}\ FReduction\&\ finalreduce,}
\DoxyCodeLine{00684\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00685\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (grain==0\ ||\ nw==1)\ \{}
\DoxyCodeLine{00686\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_afee466de681fc3a237bd820abdf04cb5}{FF\_PARFORREDUCE\_START}}(\textcolor{keyword}{this},\ var,\ \mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}},\ parforidx,first,last,step,grain,nw)\ \{}
\DoxyCodeLine{00687\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ body(parforidx,\ var);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00688\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a709203bf3140e9f3b1bd7faa48dac45a}{FF\_PARFORREDUCE\_F\_STOP}}(\textcolor{keyword}{this},\ var,\ finalreduce);}
\DoxyCodeLine{00689\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00690\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_ad321e0c7c67c7df932d5fecabc25c5c4}{FF\_PARFORREDUCE\_START\_STATIC}}(\textcolor{keyword}{this},\ var,\ \mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}},\ parforidx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_aebaf75dc17f130d2be1e1d78bbbd80e2}{PARFOR\_STATIC}}(grain),nw)\ \{}
\DoxyCodeLine{00691\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ body(parforidx,\ var);}
\DoxyCodeLine{00692\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_a709203bf3140e9f3b1bd7faa48dac45a}{FF\_PARFORREDUCE\_F\_STOP}}(\textcolor{keyword}{this},\ var,\ finalreduce);}
\DoxyCodeLine{00693\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00694\ \ \ \ \ \}}
\DoxyCodeLine{00695\ \ \ \ \ }
\DoxyCodeLine{00696\ \};}
\DoxyCodeLine{00697\ }
\DoxyCodeLine{00698\ }
\DoxyCodeLine{00699\ \textcolor{comment}{//\#ifndef\ WIN32\ //VS12}}
\DoxyCodeLine{00700\ }
\DoxyCodeLine{00702\ }
\DoxyCodeLine{00706\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ task\_t>}
\DoxyCodeLine{00707\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_a7df8fe6cf335802e63d8bfb9eb98211e}{ParallelForPipeReduce}}:\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classff_1_1ff__pipeline_a05e2c125dd1007c027b0713281b2d07f}{ff\_pipeline}}\ \{}
\DoxyCodeLine{00708\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00709\ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__forall__farm}{ff\_forall\_farm<forallpipereduce\_W>}}\ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}};\ }
\DoxyCodeLine{00710\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structff_1_1_parallel_for_pipe_reduce_1_1reduce_stage}{reduceStage}}:\ \mbox{\hyperlink{classff_1_1ff__minode_a65c242a04572c5a0655d0e497544477b}{ff\_minode}}\ \{\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00711\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ std::function<\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}(\textcolor{keyword}{const}\ task\_t\ \&)>\ \mbox{\hyperlink{structff_1_1_parallel_for_pipe_reduce_1_1reduce_stage_a84ec0f630e4b56474cbc6005932ecaa4}{F\_t}};}
\DoxyCodeLine{00712\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{structff_1_1_parallel_for_pipe_reduce_1_1reduce_stage_a0272a945799f3cf752286d63f674124f}{svc}}(\textcolor{keywordtype}{void}\ *\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00713\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ task\_t\&\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}=\textcolor{keyword}{reinterpret\_cast<}task\_t\textcolor{keyword}{>}(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}});}
\DoxyCodeLine{00714\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1_parallel_for_pipe_reduce_1_1reduce_stage_a0977e5c1f3ca67864c9dacaafd5de115}{F}}(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}});}
\DoxyCodeLine{00715\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__node_aeb850854e59fe44fe3c0ddcb76263de8}{GO\_ON}};}
\DoxyCodeLine{00716\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00717\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \ \mbox{\hyperlink{structff_1_1_parallel_for_pipe_reduce_1_1reduce_stage_abde22ce7e490e99645cc5b326092281c}{wait}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__minode_a511e43731643c9c1d0a47853a0d5d352}{ff\_minode::wait}}();\ \}\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00718\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structff_1_1_parallel_for_pipe_reduce_1_1reduce_stage_a9f40c285dbc8aade2463395b25703e35}{setF}}(\mbox{\hyperlink{structff_1_1_parallel_for_pipe_reduce_1_1reduce_stage_a84ec0f630e4b56474cbc6005932ecaa4}{F\_t}}\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\ \{\ \mbox{\hyperlink{structff_1_1_parallel_for_pipe_reduce_1_1reduce_stage_a0977e5c1f3ca67864c9dacaafd5de115}{F}}\ =\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}};\ \}}
\DoxyCodeLine{00719\ }
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1_parallel_for_pipe_reduce_1_1reduce_stage_a84ec0f630e4b56474cbc6005932ecaa4}{F\_t}}\ \mbox{\hyperlink{structff_1_1_parallel_for_pipe_reduce_1_1reduce_stage_a0977e5c1f3ca67864c9dacaafd5de115}{F}};}
\DoxyCodeLine{00721\ \ \ \ \ \}\ \mbox{\hyperlink{parallel__reduce_8cpp_a8daa97b415aeb7997134ab56ca3bc31e}{reduce}};}
\DoxyCodeLine{00722\ }
\DoxyCodeLine{00723\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00724\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_a7df8fe6cf335802e63d8bfb9eb98211e}{ParallelForPipeReduce}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ maxnw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}},\ \textcolor{keywordtype}{bool}\ spinwait=\textcolor{keyword}{false},\ \textcolor{keywordtype}{bool}\ \textcolor{comment}{/*spinbarrier*/}=\textcolor{keyword}{false}):}
\DoxyCodeLine{00725\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}(maxnw,\mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}},\mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}},\mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}})\ \textcolor{comment}{//\ skip\ loop\ warmup\ and\ disable\ spinwait/spinbarrier}}
\DoxyCodeLine{00726\ \ \ \ \ \{}
\DoxyCodeLine{00727\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__pipeline_ab58d4873ed5492773a5dc0b013eaebc5}{ff\_pipeline::add\_stage}}(\&\mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}});}
\DoxyCodeLine{00728\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__pipeline_ab58d4873ed5492773a5dc0b013eaebc5}{ff\_pipeline::add\_stage}}(\&\mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_aca4d5d6ae235fa88a81b12a71b034df3}{reduce}});}
\DoxyCodeLine{00729\ }
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ required\ to\ avoid\ error}}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}.remove\_collector();}
\DoxyCodeLine{00732\ }
\DoxyCodeLine{00733\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ avoiding\ initial\ barrier}}
\DoxyCodeLine{00734\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__pipeline_af088dc37328c5fef07653551b36209a0}{ff\_pipeline::dryrun}}()<0)\ \ \textcolor{comment}{//\ preparing\ all\ connections}}
\DoxyCodeLine{00735\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}ParallelForPipeReduce:\ preparing\ pipe\(\backslash\)n"{}});}
\DoxyCodeLine{00736\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00737\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ warmup\ phase}}
\DoxyCodeLine{00738\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}.resetskipwarmup();}
\DoxyCodeLine{00739\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}=-\/1;}
\DoxyCodeLine{00740\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}.run\_then\_freeze()\ !=\ -\/1)\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00741\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_aca4d5d6ae235fa88a81b12a71b034df3}{reduce}}.run\_then\_freeze()\ !=\ -\/1)}
\DoxyCodeLine{00742\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ \mbox{\hyperlink{classff_1_1ff__pipeline_a1a176d9106e7dd2788c74816164d4992}{ff\_pipeline::wait\_freezing}}();\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00743\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}<0)\ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}ParallelForPipeReduce:\ running\ pipe\(\backslash\)n"{}});}
\DoxyCodeLine{00744\ }
\DoxyCodeLine{00745\ }
\DoxyCodeLine{00746\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (spinwait)\ \{\ \textcolor{comment}{//\ NOTE:\ spinning\ is\ enabled\ only\ for\ the\ Map\ part\ and\ not\ for\ the\ Reduce\ part}}
\DoxyCodeLine{00747\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}.enableSpinning()\ ==\ -\/1)}
\DoxyCodeLine{00748\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}ParallelForPipeReduce:\ enabling\ spinwait\(\backslash\)n"{}});}
\DoxyCodeLine{00749\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00750\ \ \ \ \ \}}
\DoxyCodeLine{00751\ \ \ \ \ }
\DoxyCodeLine{00752\ \ \ \ \ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_a2e1a8270dfe4e048bac4af07e654272b}{\string~ParallelForPipeReduce}}()\ \{}
\DoxyCodeLine{00753\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}.stop();\ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}.wait();}
\DoxyCodeLine{00754\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_aca4d5d6ae235fa88a81b12a71b034df3}{reduce}}.wait();\ }
\DoxyCodeLine{00755\ \ \ \ \ \}}
\DoxyCodeLine{00756\ }
\DoxyCodeLine{00757\ \ \ \ \ \textcolor{comment}{//\ By\ calling\ this\ method\ with\ 'true'\ the\ scheduler\ will\ be\ disabled,}}
\DoxyCodeLine{00758\ \ \ \ \ \textcolor{comment}{//\ to\ restore\ the\ usage\ of\ the\ scheduler\ thread\ just\ pass\ 'false'\ as\ }}
\DoxyCodeLine{00759\ \ \ \ \ \textcolor{comment}{//\ parameter}}
\DoxyCodeLine{00760\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_a71c2cba2ae3bdad45e8ced4784f3855f}{disableScheduler}}(\textcolor{keywordtype}{bool}\ onoff=\textcolor{keyword}{true})\ \{\ }
\DoxyCodeLine{00761\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}.disableScheduler(onoff);}
\DoxyCodeLine{00762\ \ \ \ \ \}}
\DoxyCodeLine{00763\ }
\DoxyCodeLine{00764\ \ \ \ \ \textcolor{comment}{//\ It\ puts\ all\ spinning\ threads\ to\ sleep.\ It\ does\ not\ disable\ the\ spinWait\ flag}}
\DoxyCodeLine{00765\ \ \ \ \ \textcolor{comment}{//\ so\ at\ the\ next\ call,\ threads\ start\ spinning\ again.}}
\DoxyCodeLine{00766\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_a2df7bdca2498dbe747f2efeccda6b3f6}{threadPause}}()\ \{}
\DoxyCodeLine{00767\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}.stopSpinning();}
\DoxyCodeLine{00768\ \ \ \ \ \}}
\DoxyCodeLine{00769\ \ }
\DoxyCodeLine{00774\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function>}
\DoxyCodeLine{00775\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_acc1bee8a77c12eb97d928969d4883aca}{parallel\_for\_idx}}(\textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ grain,\ }
\DoxyCodeLine{00776\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ Map,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00777\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00778\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ setloop\ decides\ the\ real\ number\ of\ worker\ threads\ that\ will\ be\ started}}
\DoxyCodeLine{00779\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ n.\ maybe\ different\ from\ nw\ !}}
\DoxyCodeLine{00780\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}.setloop(first,last,step,grain,nw);\ }
\DoxyCodeLine{00781\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}.setF(Map);}
\DoxyCodeLine{00782\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ donothing=[](task\_t)\ \{\ \};}
\DoxyCodeLine{00783\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_aca4d5d6ae235fa88a81b12a71b034df3}{reduce}}.setF(donothing);}
\DoxyCodeLine{00784\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}=-\/1;}
\DoxyCodeLine{00785\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}.run\_then\_freeze(\mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}.getnw())\ !=\ -\/1)}
\DoxyCodeLine{00786\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_aca4d5d6ae235fa88a81b12a71b034df3}{reduce}}.run\_then\_freeze(\mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}.getnw())\ !=\ -\/1)}
\DoxyCodeLine{00787\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ \mbox{\hyperlink{classff_1_1ff__pipeline_a1a176d9106e7dd2788c74816164d4992}{ff\_pipeline::wait\_freezing}}();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00788\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}<0)\ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}ParallelForPipeReduce:\ parallel\_for\_idx,\ starting\ pipe\(\backslash\)n"{}});\ \ \ \ \ \ }
\DoxyCodeLine{00789\ \ \ \ \ \}}
\DoxyCodeLine{00790\ \ \ \ \ }
\DoxyCodeLine{00795\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function,\ \textcolor{keyword}{typename}\ FReduction>}
\DoxyCodeLine{00796\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_a1942e586e2695674f80e45b73cd088df}{parallel\_reduce\_idx}}(\textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ grain,\ }
\DoxyCodeLine{00797\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ Map,\ \textcolor{keyword}{const}\ FReduction\&\ Reduce,}
\DoxyCodeLine{00798\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00799\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00800\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ setloop\ decides\ the\ real\ number\ of\ worker\ threads\ that\ will\ be\ started}}
\DoxyCodeLine{00801\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ n.\ maybe\ different\ from\ nw\ !}}
\DoxyCodeLine{00802\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}.setloop(first,last,step,grain,nw);\ }
\DoxyCodeLine{00803\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}.setF(Map);}
\DoxyCodeLine{00804\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_aca4d5d6ae235fa88a81b12a71b034df3}{reduce}}.setF(Reduce);}
\DoxyCodeLine{00805\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}=-\/1;}
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}.run\_then\_freeze(\mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}.getnw())\ !=\ -\/1)}
\DoxyCodeLine{00807\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_aca4d5d6ae235fa88a81b12a71b034df3}{reduce}}.run\_then\_freeze(\mbox{\hyperlink{classff_1_1_parallel_for_pipe_reduce_adea16bb9fe42010ade19f66d0c91e0be}{pfr}}.getnw())\ !=\ -\/1)}
\DoxyCodeLine{00808\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ \mbox{\hyperlink{classff_1_1ff__pipeline_a1a176d9106e7dd2788c74816164d4992}{ff\_pipeline::wait\_freezing}}();\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00809\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}<0)\ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}ParallelForPipeReduce:\ parallel\_reduce\_idx,\ starting\ pipe\(\backslash\)n"{}});}
\DoxyCodeLine{00810\ \ \ \ \ \}}
\DoxyCodeLine{00811\ \};}
\DoxyCodeLine{00812\ \textcolor{comment}{//\#endif\ //VS12}}
\DoxyCodeLine{00813\ }
\DoxyCodeLine{00818\ }
\DoxyCodeLine{00819\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ parallel\_for\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ \ \ \ }}
\DoxyCodeLine{00821\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function>}
\DoxyCodeLine{00822\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceff_a6b0eaea94a5da3d18241939239df5768}{parallel\_for}}(\textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keyword}{const}\ Function\&\ body,\ }
\DoxyCodeLine{00823\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00824\ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_a666c25abd901a02885e4f6b67bb5029b}{FF\_PARFOR\_BEGIN}}(pfor,\ parforidx,first,last,1,\mbox{\hyperlink{parallel__for__internals_8hpp_aebaf75dc17f130d2be1e1d78bbbd80e2}{PARFOR\_STATIC}}(0),nw)\ \{}
\DoxyCodeLine{00825\ \ \ \ \ \ \ \ \ body(parforidx);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00826\ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_aa00f920ee55b91b02123244e76ed1b75}{FF\_PARFOR\_END}}(pfor);}
\DoxyCodeLine{00827\ \}}
\DoxyCodeLine{00829\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function>}
\DoxyCodeLine{00830\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceff_a6b0eaea94a5da3d18241939239df5768}{parallel\_for}}(\textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keyword}{const}\ Function\&\ body,\ }
\DoxyCodeLine{00831\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00832\ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_a666c25abd901a02885e4f6b67bb5029b}{FF\_PARFOR\_BEGIN}}(pfor,\ parforidx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_aebaf75dc17f130d2be1e1d78bbbd80e2}{PARFOR\_STATIC}}(0),nw)\ \{}
\DoxyCodeLine{00833\ \ \ \ \ \ \ \ \ body(parforidx);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00834\ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_aa00f920ee55b91b02123244e76ed1b75}{FF\_PARFOR\_END}}(pfor);}
\DoxyCodeLine{00835\ \}}
\DoxyCodeLine{00837\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function>}
\DoxyCodeLine{00838\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceff_a6b0eaea94a5da3d18241939239df5768}{parallel\_for}}(\textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ grain,\ }
\DoxyCodeLine{00839\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ body,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00840\ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_a666c25abd901a02885e4f6b67bb5029b}{FF\_PARFOR\_BEGIN}}(pfor,\ parforidx,first,last,step,grain,nw)\ \{}
\DoxyCodeLine{00841\ \ \ \ \ \ \ \ \ body(parforidx);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00842\ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_aa00f920ee55b91b02123244e76ed1b75}{FF\_PARFOR\_END}}(pfor);}
\DoxyCodeLine{00843\ \}}
\DoxyCodeLine{00844\ }
\DoxyCodeLine{00845\ \textcolor{comment}{//\ advanced\ version\ \ \ \ }}
\DoxyCodeLine{00846\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function>}
\DoxyCodeLine{00847\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceff_ac7dad08c0241851662aba617bc0983fd}{parallel\_for\_idx}}(\textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ grain,\ }
\DoxyCodeLine{00848\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}},}
\DoxyCodeLine{00849\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ noActiveScheduler=\textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00850\ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_a86503b93d380831b9c7101fc7800866b}{FF\_PARFOR\_BEGIN\_IDX}}(pfor,parforidx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_a392081d94f08a8c3e339dbc0eaf5ecb4}{PARFOR\_DYNAMIC}}(grain),nw,noActiveScheduler)\{}
\DoxyCodeLine{00851\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(ff\_start\_idx,\ ff\_stop\_idx,\_ff\_thread\_id);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00852\ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_aa00f920ee55b91b02123244e76ed1b75}{FF\_PARFOR\_END}}(pfor);}
\DoxyCodeLine{00853\ \}}
\DoxyCodeLine{00854\ }
\DoxyCodeLine{00855\ }
\DoxyCodeLine{00856\ }
\DoxyCodeLine{00857\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ parallel\_reduce\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ \ \ \ }}
\DoxyCodeLine{00858\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function,\ \textcolor{keyword}{typename}\ Value\_t,\ \textcolor{keyword}{typename}\ FReduction>}
\DoxyCodeLine{00859\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceff_a66f9fbc0301f1a65529c1a3d96dc66c3}{parallel\_reduce}}(Value\_t\&\ var,\ \textcolor{keyword}{const}\ Value\_t\&\ \mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}},\ }
\DoxyCodeLine{00860\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ grain,}
\DoxyCodeLine{00861\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ body,\ \textcolor{keyword}{const}\ FReduction\&\ finalreduce,}
\DoxyCodeLine{00862\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}})\ \{}
\DoxyCodeLine{00863\ \ \ \ \ Value\_t\ \_var\ =\ var;}
\DoxyCodeLine{00864\ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_aa0aa58d0664cbde38fa32dbd0cc2a9a6}{FF\_PARFORREDUCE\_BEGIN}}(pfr,\ \_var,\ \mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}},\ parforidx,\ first,\ last,\ step,\ \mbox{\hyperlink{parallel__for__internals_8hpp_a392081d94f08a8c3e339dbc0eaf5ecb4}{PARFOR\_DYNAMIC}}(grain),\ nw)\ \{}
\DoxyCodeLine{00865\ \ \ \ \ \ \ \ \ body(parforidx,\ \_var);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00866\ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_aa28605b8bfa18964660a47b6d01222cd}{FF\_PARFORREDUCE\_F\_END}}(pfr,\ \_var,\ finalreduce);}
\DoxyCodeLine{00867\ \ \ \ \ var=\_var;}
\DoxyCodeLine{00868\ \}}
\DoxyCodeLine{00869\ }
\DoxyCodeLine{00870\ \textcolor{comment}{//\ advanced\ version}}
\DoxyCodeLine{00871\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Function,\ \textcolor{keyword}{typename}\ Value\_t,\ \textcolor{keyword}{typename}\ FReduction>}
\DoxyCodeLine{00872\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceff_a190ba93acb28aa6a10acae4385987ff3}{parallel\_reduce\_idx}}(Value\_t\&\ var,\ \textcolor{keyword}{const}\ Value\_t\&\ \mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}},\ }
\DoxyCodeLine{00873\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ first,\ \textcolor{keywordtype}{long}\ last,\ \textcolor{keywordtype}{long}\ step,\ \textcolor{keywordtype}{long}\ grain,}
\DoxyCodeLine{00874\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Function\&\ body,\ \textcolor{keyword}{const}\ FReduction\&\ finalreduce,}
\DoxyCodeLine{00875\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ nw=\mbox{\hyperlink{parallel__for__internals_8hpp_ab644edd57ae830fef7b853cf824dfaf9aeff2909576680846fb1dbc59d1926af7}{FF\_AUTO}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ noActiveScheduler=\textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00876\ \ \ \ \ Value\_t\ \_var\ =\ var;}
\DoxyCodeLine{00877\ \ \ \ \ \mbox{\hyperlink{parallel__for__internals_8hpp_af44f5e3062b44b3c59a4c0130e60b440}{FF\_PARFORREDUCE\_BEGIN\_IDX}}(pfr,\ \_var,\ \mbox{\hyperlink{bench_hash_8c_a0aa0e76fd996840c0b91e4fe3f3acb86}{identity}},\ idx,first,last,step,\mbox{\hyperlink{parallel__for__internals_8hpp_a392081d94f08a8c3e339dbc0eaf5ecb4}{PARFOR\_DYNAMIC}}(grain),nw,noActiveScheduler)\ \{}
\DoxyCodeLine{00878\ \ \ \ \ \ \ \ \ body(ff\_start\_idx,\ ff\_stop\_idx,\ \_var,\ \_ff\_thread\_id);}
\DoxyCodeLine{00879\ \ \ \ \ \}\ \mbox{\hyperlink{parallel__for__internals_8hpp_aa28605b8bfa18964660a47b6d01222cd}{FF\_PARFORREDUCE\_F\_END}}(pfr,\ \_var,\ finalreduce);}
\DoxyCodeLine{00880\ \ \ \ \ var=\_var;}
\DoxyCodeLine{00881\ \}}
\DoxyCodeLine{00882\ \ \ \ \ }
\DoxyCodeLine{00883\ \ \ \ \ }
\DoxyCodeLine{00884\ \}\ \textcolor{comment}{//\ namespace\ ff}}
\DoxyCodeLine{00885\ }
\DoxyCodeLine{00886\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ FF\_PARFOR\_HPP\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00887\ \ \ \ \ }

\end{DoxyCode}
