\doxysection{imgui\+\_\+window.\+h}
\hypertarget{imgui__window_8h_source}{}\label{imgui__window_8h_source}\index{runtime/gui/imgui\_window.h@{runtime/gui/imgui\_window.h}}
\mbox{\hyperlink{imgui__window_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <runtime/runtime/device.h>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <runtime/core/dll\_export.h>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <runtime/core/basic\_types.h>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <runtime/core/stl/memory.h>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <runtime/core/stl/string.h>}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{keyword}{struct\ }GLFWwindow;}
\DoxyCodeLine{00010\ \textcolor{keyword}{struct\ }ImGuiContext;}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceluisa_1_1compute}{luisa::compute}}\ \{}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{class\ }Swapchain;}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00017\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_image}{Image}};}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{class\ }Sampler;}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{class\ }LC\_GUI\_API\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_ac3fda60fbc27b71b867998b543456be1}{ImGuiWindow}}\ \{}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1_im_gui_window_1_1_config}{Config}}\ \{}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ uint2\ \mbox{\hyperlink{structluisa_1_1compute_1_1_im_gui_window_1_1_config_a261cfc91a9739ba9487647d734d245f2}{size}}\{800,\ 600\};}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_im_gui_window_1_1_config_addf0a6e95def7617611a2dc1114e450d}{resizable}}\{\textcolor{keyword}{true}\};}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_im_gui_window_1_1_config_a1933d41dbf1377fe839440a8b29d96fe}{vsync}}\{\textcolor{keyword}{false}\};}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_im_gui_window_1_1_config_a15bd120af0e4e9a485adb6033771b45f}{hdr}}\{\textcolor{keyword}{false}\};}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_im_gui_window_1_1_config_a6d91603b525e625bda24b4d75ea0e95d}{ssaa}}\{\textcolor{keyword}{false}\};}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_im_gui_window_1_1_config_af7fb3eb32d5b8d006e09376b18dce964}{docking}}\{\textcolor{keyword}{true}\};}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_im_gui_window_1_1_config_a9fa5fcd02f116b2caa71f6e2d3d8df87}{multi\_viewport}}\{\textcolor{keyword}{true}\};}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ uint\ \mbox{\hyperlink{structluisa_1_1compute_1_1_im_gui_window_1_1_config_a7c766d44ace833662474a293ddcb5326}{back\_buffers}}\{2\};}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{static}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_im_gui_window_1_1_config}{Config}}\ \mbox{\hyperlink{structluisa_1_1compute_1_1_im_gui_window_1_1_config_a42e1e4edbd1619003f5fe8f3bde9b739}{make\_default}}()\ noexcept\ \{\ \textcolor{keywordflow}{return}\ \{\};\ \}}
\DoxyCodeLine{00036\ \ \ \ \ \};}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_1_1_context_guard_a5c97726a848c348ece54b4148e23eefd}{ContextGuard}}\ \{}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_ac3fda60fbc27b71b867998b543456be1}{ImGuiWindow}}\ *\mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_1_1_context_guard_a9ba122b454129cadf7f36db946e2022e}{\_self}};}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_1_1_context_guard_a5c97726a848c348ece54b4148e23eefd}{ContextGuard}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_ac3fda60fbc27b71b867998b543456be1}{ImGuiWindow}}\ *self)\ noexcept}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_1_1_context_guard_a9ba122b454129cadf7f36db946e2022e}{\_self}}\{self\}\ \{\ \_self-\/>\mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_ab9377a233ce21947394229153ddfb71b}{push\_context}}();\ \}}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_1_1_context_guard_aed441bbd65f2f22ea8244a6377d05517}{\string~ContextGuard}}()\ noexcept\ \{\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_1_1_context_guard_a9ba122b454129cadf7f36db946e2022e}{\_self}}-\/>pop\_context();\ \}}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_1_1_context_guard_a4a36045123c25b122feba1799f722427}{ContextGuard}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_1_1_context_guard_a5c97726a848c348ece54b4148e23eefd}{ContextGuard}}\ \&)\ \textcolor{keyword}{noexcept}\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_1_1_context_guard_a0ea94c6beae3c09ef35c7865f0e67b28}{ContextGuard}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_1_1_context_guard_a5c97726a848c348ece54b4148e23eefd}{ContextGuard}}\ \&\&)\ noexcept\ =\ delete;}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_1_1_context_guard_a5c97726a848c348ece54b4148e23eefd}{ContextGuard}}\ \&operator=(const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_1_1_context_guard_a5c97726a848c348ece54b4148e23eefd}{ContextGuard}}\ \&)\ noexcept\ =\ delete;}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_1_1_context_guard_a5c97726a848c348ece54b4148e23eefd}{ContextGuard}}\ \&operator=(\mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_1_1_context_guard_a5c97726a848c348ece54b4148e23eefd}{ContextGuard}}\ \&\&)\ noexcept\ =\ delete;}
\DoxyCodeLine{00052\ \ \ \ \ \};}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ public:}
\DoxyCodeLine{00055\ \ \ \ \ class\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_1_1_impl}{Impl}};}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ private:}
\DoxyCodeLine{00058\ \ \ \ \ \mbox{\hyperlink{namespaceluisa}{luisa}}::unique\_ptr<\mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_1_1_impl}{Impl}}>\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_a8be3b2fa541d73c7fb34e13e5f10647b}{\_impl}};}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ public:}
\DoxyCodeLine{00061\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_ac3fda60fbc27b71b867998b543456be1}{ImGuiWindow}}()\ noexcept\ =\ default;}
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_ac3fda60fbc27b71b867998b543456be1}{ImGuiWindow}}(Device\ \&device,\ Stream\ \&stream,}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa}{luisa}}::\textcolor{keywordtype}{string}\ name,}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ \mbox{\hyperlink{structluisa_1_1compute_1_1_im_gui_window_1_1_config}{Config}}\ \&config\ =\ \mbox{\hyperlink{structluisa_1_1compute_1_1_im_gui_window_1_1_config}{Config}}::make\_default())\ noexcept;}
\DoxyCodeLine{00065\ \ \ \ \ \string~\mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_ac3fda60fbc27b71b867998b543456be1}{ImGuiWindow}}()\ noexcept;}
\DoxyCodeLine{00066\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_ac3fda60fbc27b71b867998b543456be1}{ImGuiWindow}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_ac3fda60fbc27b71b867998b543456be1}{ImGuiWindow}}\ \&\&)\ noexcept;}
\DoxyCodeLine{00067\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_ac3fda60fbc27b71b867998b543456be1}{ImGuiWindow}}\ \&operator=(\mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_ac3fda60fbc27b71b867998b543456be1}{ImGuiWindow}}\ \&\&)\ noexcept;}
\DoxyCodeLine{00068\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_ac3fda60fbc27b71b867998b543456be1}{ImGuiWindow}}(const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_ac3fda60fbc27b71b867998b543456be1}{ImGuiWindow}}\ \&)\ noexcept\ =\ delete;}
\DoxyCodeLine{00069\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_ac3fda60fbc27b71b867998b543456be1}{ImGuiWindow}}\ \&operator=(const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_ac3fda60fbc27b71b867998b543456be1}{ImGuiWindow}}\ \&)\ noexcept\ =\ delete;}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ public:}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_aac4296534b2d2c211fe1b9d5aae4b0ff}{create}}(Device\ \&device,\ Stream\ \&stream,}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa}{luisa}}::\textcolor{keywordtype}{string}\ name,}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ \mbox{\hyperlink{structluisa_1_1compute_1_1_im_gui_window_1_1_config}{Config}}\ \&config\ =\ \mbox{\hyperlink{structluisa_1_1compute_1_1_im_gui_window_1_1_config}{Config}}::make\_default())\ noexcept;}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_a31b1b9a16e5627084834663abe61bd82}{destroy}}()\ noexcept;}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ [[nodiscard]]\ ImGuiContext\ *\mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_abbefe3ac673d91378b3b84fe99b1d018}{context}}()\ const\ noexcept;}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_ab9377a233ce21947394229153ddfb71b}{push\_context}}()\ noexcept;}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_a6b740aa08eb0593cdf9fa4ea2fa8b76a}{pop\_context}}()\ noexcept;}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ [[nodiscard]]\ GLFWwindow\ *\mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_a677ebb7390a6f474a2fdbb3202c97949}{handle}}()\ const\ noexcept;}
\DoxyCodeLine{00082\ \ \ \ \ [[nodiscard]]\ Swapchain\ \&\mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_a68ec2cf34850d4aa255fa96c335e7f16}{swapchain}}()\ const\ noexcept;}
\DoxyCodeLine{00083\ \ \ \ \ [[nodiscard]]\ \mbox{\hyperlink{classluisa_1_1compute_1_1_image}{Image}}<\textcolor{keywordtype}{float}>\ \&\mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_ab3de00828906629b794cf0ed5be44efe}{framebuffer}}()\ const\ noexcept;}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \ \ [[nodiscard]]\ auto\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_a9e7ad3065c51ed8a4ec9b68b8eb1c949}{valid}}()\ const\ noexcept\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_a8be3b2fa541d73c7fb34e13e5f10647b}{\_impl}}\ !=\ \textcolor{keyword}{nullptr};\ \}}
\DoxyCodeLine{00086\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{explicit}\ \textcolor{keyword}{operator}\ bool()\ const\ noexcept\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_a9e7ad3065c51ed8a4ec9b68b8eb1c949}{valid}}();\ \}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ [[nodiscard]]\ \textcolor{keywordtype}{bool}\ should\_close()\ const\ noexcept;}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordtype}{void}\ set\_should\_close(\textcolor{keywordtype}{bool}\ b\ =\ true)\ noexcept;}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordtype}{void}\ prepare\_frame()\ noexcept;\textcolor{comment}{//\ calls\ glfwPollEvents,\ ImGui::NewFrame,\ and\ other\ stuff;\ also\ makes\ the\ context\ current}}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordtype}{void}\ render\_frame()\ noexcept;\ \textcolor{comment}{//\ calls\ ImGui::Render,\ glfwSwapBuffers,\ and\ other\ stuff;\ also\ restores\ the\ current\ context\ as\ before\ prepare\_frame}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ [[nodiscard]]\ uint64\_t\ register\_texture(const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_image}{Image}}<\textcolor{keywordtype}{float}>\ \&image,\ const\ Sampler\ \&sampler)\ noexcept;}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordtype}{void}\ unregister\_texture(uint64\_t\ tex\_id)\ noexcept;}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ template<typename\ F>}
\DoxyCodeLine{00098\ \ \ \ \ decltype(auto)\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_ae494e63471547aef13be4dde85e8600a}{with\_context}}(F\ \&\&f)\ noexcept\ \{}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_1_1_context_guard}{ContextGuard}}\ g\{\textcolor{keyword}{this}\};}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ luisa::invoke(std::forward<F>(f));}
\DoxyCodeLine{00101\ \ \ \ \ \}}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_a507c48231727f4f1c6f5140f3b3b152f}{with\_frame}}(F\ \&\&f)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_a6c1385b6cf3178ce9aa880b9779bc8ce}{prepare\_frame}}();}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ luisa::invoke(std::forward<F>(f));}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_im_gui_window_a1d645710e348e57af377fe3591138b77}{render\_frame}}();}
\DoxyCodeLine{00108\ \ \ \ \ \}}
\DoxyCodeLine{00109\ \};}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \}\textcolor{comment}{//\ namespace\ luisa::compute}}

\end{DoxyCode}
