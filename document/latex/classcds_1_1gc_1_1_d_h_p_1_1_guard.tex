\doxysection{cds\+::gc\+::DHP\+::Guard类 参考}
\hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard}{}\label{classcds_1_1gc_1_1_d_h_p_1_1_guard}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}


Dynamic Hazard Pointer guard  




{\ttfamily \#include $<$dhp.\+h$>$}

\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard_ab7361ef5f77e695e3fcf49391bbc5430}{Guard}} () noexcept
\begin{DoxyCompactList}\small\item\em Default ctor allocates a guard (hazard pointer) from thread-\/private storage \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard_a3cabec45108c34f53ab90080a131bc36}{Guard}} (std\+::nullptr\+\_\+t) noexcept
\begin{DoxyCompactList}\small\item\em Initilalizes an unlinked guard i.\+e. the guard contains no hazard pointer. Used for move semantics support \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard_aa54734c5643203ecc5315b15ce5d9bd6}{Guard}} (\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard}{Guard}} \&\&\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}) noexcept
\begin{DoxyCompactList}\small\item\em Move ctor -\/ {\ttfamily src} guard becomes unlinked (transfer internal guard ownership) \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard}{Guard}} \& \mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard_abdaac3924101abf4dca441484fcf29c1}{operator=}} (\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard}{Guard}} \&\&\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}) noexcept
\begin{DoxyCompactList}\small\item\em Move assignment\+: the internal guards are swapped between {\ttfamily src} and {\ttfamily this} \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard_aec53fad0500aa4c2efdf1ba0c3366d70}{Guard}} (\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard}{Guard}} const \&)=delete
\begin{DoxyCompactList}\small\item\em Copy ctor is prohibited -\/ the guard is not copyable \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard}{Guard}} \& \mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard_a7ebaa403b02c59bcd2f5b24b594d5694}{operator=}} (\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard}{Guard}} const \&)=delete
\begin{DoxyCompactList}\small\item\em Copy assignment is prohibited \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard_a26f820c384e4ea698ad69b352937accd}{\texorpdfstring{$\sim$}{\string~}\+Guard}} ()
\begin{DoxyCompactList}\small\item\em Frees the internal hazard pointer if the guard is in linked state \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard_ac272251169e8234bcb287da2bcc954b9}{is\+\_\+linked}} () const
\begin{DoxyCompactList}\small\item\em Checks if the guard object linked with any internal hazard pointer \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard_a77339250455cd82c5e8bb7ae9a631b1c}{link}} ()
\begin{DoxyCompactList}\small\item\em Links the guard with internal hazard pointer if the guard is in unlinked state \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard_a8e261fd3e7fbc1e9aa614b4bb33053ee}{unlink}} ()
\begin{DoxyCompactList}\small\item\em Unlinks the guard from internal hazard pointer; the guard becomes in unlinked state \end{DoxyCompactList}\item 
{\footnotesize template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ }\\\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard_acd6e4942550e0d3e1b4e346a063ced2c}{protect}} (atomics\+::atomic$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} $>$ const \&to\+Guard)
\begin{DoxyCompactList}\small\item\em Protects a pointer of type {\ttfamily  atomic$<$\+T\texorpdfstring{$\ast$}{*}$>$ } \end{DoxyCompactList}\item 
{\footnotesize template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, class Func$>$ }\\\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard_a7d546681e37820a759f1a54f4bf5f526}{protect}} (atomics\+::atomic$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} $>$ const \&to\+Guard, Func \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})
\begin{DoxyCompactList}\small\item\em Protects a converted pointer of type {\ttfamily  atomic$<$\+T\texorpdfstring{$\ast$}{*}$>$ } \end{DoxyCompactList}\item 
{\footnotesize template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ }\\\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard_a413df2ce208978c897e861a23825bef9}{assign}} (\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})
\begin{DoxyCompactList}\small\item\em Store {\ttfamily p} to the guard \end{DoxyCompactList}\item 
{\footnotesize template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} BITMASK$>$ }\\\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard_a5a15de5554d065faef2e1379f0285fd7}{assign}} (\mbox{\hyperlink{classcds_1_1details_1_1marked__ptr}{cds\+::details\+::marked\+\_\+ptr}}$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, BITMASK $>$ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})
\begin{DoxyCompactList}\small\item\em Store marked pointer {\ttfamily p} to the guard \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard_a8a7d649210a28924e6ea04ac616e70e6}{copy}} (\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard}{Guard}} const \&\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}})
\begin{DoxyCompactList}\small\item\em Copy from {\ttfamily src} guard to {\ttfamily this} guard \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard_ad88c8403befe77869252dffd9b562762}{clear}} ()
\begin{DoxyCompactList}\small\item\em Clears value of the guard \end{DoxyCompactList}\item 
{\footnotesize template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ }\\\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard_a7ef2740e7e925b2b6db584ed7997c1df}{get}} () const
\begin{DoxyCompactList}\small\item\em Gets the value currently protected (relaxed read) \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard_a573599f81542381e4bd9ff2b8aee5213}{get\+\_\+native}} () const
\begin{DoxyCompactList}\small\item\em Gets native guarded pointer stored \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
Dynamic Hazard Pointer guard 

\doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} guard is a hazard pointer. Additionally, the {\ttfamily Guard} class manages allocation and deallocation of the hazard pointer

{\ttfamily Guard} object is movable but not copyable.

The guard object can be in two states\+:
\begin{DoxyItemize}
\item unlinked -\/ the guard is not linked with any internal hazard pointer. In this state no operation except {\ttfamily \doxylink{classcds_1_1gc_1_1_d_h_p_1_1_guard_a77339250455cd82c5e8bb7ae9a631b1c}{link()}} and move assignment is supported.
\item linked (default) -\/ the guard allocates an internal hazard pointer and fully operable.
\end{DoxyItemize}

Due to performance reason the implementation does not check state of the guard in runtime.

\begin{DoxyWarning}{警告}
Move assignment can transfer the guard in unlinked state, use with care. 
\end{DoxyWarning}


\doxysubsection{构造及析构函数说明}
\Hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard_ab7361ef5f77e695e3fcf49391bbc5430}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}!Guard@{Guard}}
\index{Guard@{Guard}!cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}
\doxysubsubsection{\texorpdfstring{Guard()}{Guard()}\hspace{0.1cm}{\footnotesize\ttfamily [1/4]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1_d_h_p_1_1_guard_ab7361ef5f77e695e3fcf49391bbc5430} 
cds\+::gc\+::\+DHP\+::\+Guard\+::\+Guard (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}



Default ctor allocates a guard (hazard pointer) from thread-\/private storage 

\Hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard_a3cabec45108c34f53ab90080a131bc36}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}!Guard@{Guard}}
\index{Guard@{Guard}!cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}
\doxysubsubsection{\texorpdfstring{Guard()}{Guard()}\hspace{0.1cm}{\footnotesize\ttfamily [2/4]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1_d_h_p_1_1_guard_a3cabec45108c34f53ab90080a131bc36} 
cds\+::gc\+::\+DHP\+::\+Guard\+::\+Guard (\begin{DoxyParamCaption}\item[{std\+::nullptr\+\_\+t}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}, {\ttfamily [noexcept]}}



Initilalizes an unlinked guard i.\+e. the guard contains no hazard pointer. Used for move semantics support 

\Hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard_aa54734c5643203ecc5315b15ce5d9bd6}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}!Guard@{Guard}}
\index{Guard@{Guard}!cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}
\doxysubsubsection{\texorpdfstring{Guard()}{Guard()}\hspace{0.1cm}{\footnotesize\ttfamily [3/4]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1_d_h_p_1_1_guard_aa54734c5643203ecc5315b15ce5d9bd6} 
cds\+::gc\+::\+DHP\+::\+Guard\+::\+Guard (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard}{Guard}} \&\&}]{src}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}



Move ctor -\/ {\ttfamily src} guard becomes unlinked (transfer internal guard ownership) 

函数调用图\+:
% FIG 0
\Hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard_aec53fad0500aa4c2efdf1ba0c3366d70}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}!Guard@{Guard}}
\index{Guard@{Guard}!cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}
\doxysubsubsection{\texorpdfstring{Guard()}{Guard()}\hspace{0.1cm}{\footnotesize\ttfamily [4/4]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1_d_h_p_1_1_guard_aec53fad0500aa4c2efdf1ba0c3366d70} 
cds\+::gc\+::\+DHP\+::\+Guard\+::\+Guard (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard}{Guard}} const \&}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



Copy ctor is prohibited -\/ the guard is not copyable 

函数调用图\+:
% FIG 1
\Hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard_a26f820c384e4ea698ad69b352937accd}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}!````~Guard@{\texorpdfstring{$\sim$}{\string~}Guard}}
\index{````~Guard@{\texorpdfstring{$\sim$}{\string~}Guard}!cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}Guard()}{\string~Guard()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1_d_h_p_1_1_guard_a26f820c384e4ea698ad69b352937accd} 
cds\+::gc\+::\+DHP\+::\+Guard\+::\texorpdfstring{$\sim$}{\string~}\+Guard (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Frees the internal hazard pointer if the guard is in linked state 

函数调用图\+:
% FIG 2


\doxysubsection{成员函数说明}
\Hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard_a5a15de5554d065faef2e1379f0285fd7}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}!assign@{assign}}
\index{assign@{assign}!cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}
\doxysubsubsection{\texorpdfstring{assign()}{assign()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1_d_h_p_1_1_guard_a5a15de5554d065faef2e1379f0285fd7} 
template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} BITMASK$>$ \\
\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*} cds\+::gc\+::\+DHP\+::\+Guard\+::assign (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcds_1_1details_1_1marked__ptr}{cds\+::details\+::marked\+\_\+ptr}}$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, BITMASK $>$}]{p}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Store marked pointer {\ttfamily p} to the guard 

The function is just an assignment of {\ttfamily p.\+ptr()}, no loop is performed. Can be used for a marked pointer that cannot be changed concurrently or for already guarded pointer. 函数调用图\+:
% FIG 3
\Hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard_a413df2ce208978c897e861a23825bef9}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}!assign@{assign}}
\index{assign@{assign}!cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}
\doxysubsubsection{\texorpdfstring{assign()}{assign()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1_d_h_p_1_1_guard_a413df2ce208978c897e861a23825bef9} 
template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ \\
\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*} cds\+::gc\+::\+DHP\+::\+Guard\+::assign (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*}}]{p}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Store {\ttfamily p} to the guard 

The function is just an assignment, no loop is performed. Can be used for a pointer that cannot be changed concurrently or for already guarded pointer. \Hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard_ad88c8403befe77869252dffd9b562762}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}!clear@{clear}}
\index{clear@{clear}!cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}
\doxysubsubsection{\texorpdfstring{clear()}{clear()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1_d_h_p_1_1_guard_ad88c8403befe77869252dffd9b562762} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} cds\+::gc\+::\+DHP\+::\+Guard\+::clear (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Clears value of the guard 

\Hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard_a8a7d649210a28924e6ea04ac616e70e6}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}!copy@{copy}}
\index{copy@{copy}!cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}
\doxysubsubsection{\texorpdfstring{copy()}{copy()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1_d_h_p_1_1_guard_a8a7d649210a28924e6ea04ac616e70e6} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} cds\+::gc\+::\+DHP\+::\+Guard\+::copy (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard}{Guard}} const \&}]{src}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Copy from {\ttfamily src} guard to {\ttfamily this} guard 

函数调用图\+:
% FIG 4
\Hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard_a7ef2740e7e925b2b6db584ed7997c1df}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}!get@{get}}
\index{get@{get}!cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}
\doxysubsubsection{\texorpdfstring{get()}{get()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1_d_h_p_1_1_guard_a7ef2740e7e925b2b6db584ed7997c1df} 
template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ \\
\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*} cds\+::gc\+::\+DHP\+::\+Guard\+::get (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Gets the value currently protected (relaxed read) 

\Hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard_a573599f81542381e4bd9ff2b8aee5213}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}!get\_native@{get\_native}}
\index{get\_native@{get\_native}!cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}
\doxysubsubsection{\texorpdfstring{get\_native()}{get\_native()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1_d_h_p_1_1_guard_a573599f81542381e4bd9ff2b8aee5213} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*} cds\+::gc\+::\+DHP\+::\+Guard\+::get\+\_\+native (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Gets native guarded pointer stored 

\Hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard_ac272251169e8234bcb287da2bcc954b9}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}!is\_linked@{is\_linked}}
\index{is\_linked@{is\_linked}!cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}
\doxysubsubsection{\texorpdfstring{is\_linked()}{is\_linked()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1_d_h_p_1_1_guard_ac272251169e8234bcb287da2bcc954b9} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} cds\+::gc\+::\+DHP\+::\+Guard\+::is\+\_\+linked (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Checks if the guard object linked with any internal hazard pointer 

\Hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard_a77339250455cd82c5e8bb7ae9a631b1c}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}!link@{link}}
\index{link@{link}!cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}
\doxysubsubsection{\texorpdfstring{link()}{link()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1_d_h_p_1_1_guard_a77339250455cd82c5e8bb7ae9a631b1c} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} cds\+::gc\+::\+DHP\+::\+Guard\+::link (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Links the guard with internal hazard pointer if the guard is in unlinked state 

\Hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard_abdaac3924101abf4dca441484fcf29c1}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}!operator=@{operator=}}
\index{operator=@{operator=}!cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1_d_h_p_1_1_guard_abdaac3924101abf4dca441484fcf29c1} 
\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard}{Guard}} \& cds\+::gc\+::\+DHP\+::\+Guard\+::operator= (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard}{Guard}} \&\&}]{src}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}



Move assignment\+: the internal guards are swapped between {\ttfamily src} and {\ttfamily this} 

\begin{DoxyWarning}{警告}
{\ttfamily src} will become in unlinked state if {\ttfamily this} was unlinked on entry. 
\end{DoxyWarning}
函数调用图\+:
% FIG 5
\Hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard_a7ebaa403b02c59bcd2f5b24b594d5694}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}!operator=@{operator=}}
\index{operator=@{operator=}!cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1_d_h_p_1_1_guard_a7ebaa403b02c59bcd2f5b24b594d5694} 
\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard}{Guard}} \& cds\+::gc\+::\+DHP\+::\+Guard\+::operator= (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcds_1_1gc_1_1_d_h_p_1_1_guard}{Guard}} const \&}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



Copy assignment is prohibited 

函数调用图\+:
% FIG 6
\Hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard_acd6e4942550e0d3e1b4e346a063ced2c}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}!protect@{protect}}
\index{protect@{protect}!cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}
\doxysubsubsection{\texorpdfstring{protect()}{protect()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1_d_h_p_1_1_guard_acd6e4942550e0d3e1b4e346a063ced2c} 
template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ \\
\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} cds\+::gc\+::\+DHP\+::\+Guard\+::protect (\begin{DoxyParamCaption}\item[{atomics\+::atomic$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} $>$ const \&}]{to\+Guard}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Protects a pointer of type {\ttfamily  atomic$<$\+T\texorpdfstring{$\ast$}{*}$>$ } 

Return the value of {\ttfamily to\+Guard} 

The function tries to load {\ttfamily to\+Guard} and to store it to the \doxylink{namespacecds_1_1gc_af0523881f089593a7559d194ee2b5dd9}{HP} slot repeatedly until the guard\textquotesingle{}s value equals {\ttfamily to\+Guard} 函数调用图\+:
% FIG 7
\Hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard_a7d546681e37820a759f1a54f4bf5f526}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}!protect@{protect}}
\index{protect@{protect}!cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}
\doxysubsubsection{\texorpdfstring{protect()}{protect()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1_d_h_p_1_1_guard_a7d546681e37820a759f1a54f4bf5f526} 
template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, class Func$>$ \\
\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} cds\+::gc\+::\+DHP\+::\+Guard\+::protect (\begin{DoxyParamCaption}\item[{atomics\+::atomic$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} $>$ const \&}]{to\+Guard}{, }\item[{Func}]{f}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Protects a converted pointer of type {\ttfamily  atomic$<$\+T\texorpdfstring{$\ast$}{*}$>$ } 

Return the value of {\ttfamily to\+Guard} 

The function tries to load {\ttfamily to\+Guard} and to store result of {\ttfamily f} functor to the \doxylink{namespacecds_1_1gc_af0523881f089593a7559d194ee2b5dd9}{HP} slot repeatedly until the guard\textquotesingle{}s value equals {\ttfamily to\+Guard}.

The function is useful for intrusive containers when {\ttfamily to\+Guard} is a node pointer that should be converted to a pointer to the value type before guarding. The parameter {\ttfamily f} of type Func is a functor that makes this conversion\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct\ }functor\ \{}
\DoxyCodeLine{\ \ \ \ value\_type\ *\ operator()(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ );}
\DoxyCodeLine{\};}

\end{DoxyCode}
 Really, the result of {\ttfamily  f( to\+Guard.\+load()) } is assigned to the hazard pointer. 函数调用图\+:
% FIG 8
\Hypertarget{classcds_1_1gc_1_1_d_h_p_1_1_guard_a8e261fd3e7fbc1e9aa614b4bb33053ee}\index{cds::gc::DHP::Guard@{cds::gc::DHP::Guard}!unlink@{unlink}}
\index{unlink@{unlink}!cds::gc::DHP::Guard@{cds::gc::DHP::Guard}}
\doxysubsubsection{\texorpdfstring{unlink()}{unlink()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1_d_h_p_1_1_guard_a8e261fd3e7fbc1e9aa614b4bb33053ee} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} cds\+::gc\+::\+DHP\+::\+Guard\+::unlink (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Unlinks the guard from internal hazard pointer; the guard becomes in unlinked state 



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/libcds/cds/gc/\mbox{\hyperlink{dhp_8h}{dhp.\+h}}\end{DoxyCompactItemize}
