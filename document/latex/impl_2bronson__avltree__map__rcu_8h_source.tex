\doxysection{bronson\+\_\+avltree\+\_\+map\+\_\+rcu.\+h}
\hypertarget{impl_2bronson__avltree__map__rcu_8h_source}{}\label{impl_2bronson__avltree__map__rcu_8h_source}\index{external/libcds/cds/container/impl/bronson\_avltree\_map\_rcu.h@{external/libcds/cds/container/impl/bronson\_avltree\_map\_rcu.h}}
\mbox{\hyperlink{impl_2bronson__avltree__map__rcu_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ (c)\ 2006-\/2018\ Maxim\ Khizhinsky}}
\DoxyCodeLine{00002\ \textcolor{comment}{//}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ Distributed\ under\ the\ Boost\ Software\ License,\ Version\ 1.0.\ (See\ accompanying}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ file\ LICENSE\ or\ copy\ at\ http://www.boost.org/LICENSE\_1\_0.txt)}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#ifndef\ CDSLIB\_CONTAINER\_IMPL\_BRONSON\_AVLTREE\_MAP\_RCU\_H}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#define\ CDSLIB\_CONTAINER\_IMPL\_BRONSON\_AVLTREE\_MAP\_RCU\_H}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <type\_traits>}\ \textcolor{comment}{//\ is\_base\_of}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{bronson__avltree__base_8h}{cds/container/details/bronson\_avltree\_base.h}}>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{check__deadlock_8h}{cds/urcu/details/check\_deadlock.h}}>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{exempt__ptr_8h}{cds/urcu/exempt\_ptr.h}}>}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds}{cds}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds_1_1container}{container}}\ \{}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keyword}{template}\ <}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ RCU,}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{namespaceluisa_1_1compute_aadc5aa11e9ee4ae71146a25cd0ab9c41}{Key}},}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#\ \ \ ifdef\ CDS\_DOXYGEN\_INVOKED}}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ Traits\ =\ \mbox{\hyperlink{structcds_1_1container_1_1bronson__avltree_1_1traits}{bronson\_avltree::traits}}}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ Traits}
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00048\ \ \ \ \ >}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a9311a5a3a29859a04f371b99ad70843c}{BronsonAVLTreeMap}}<\ \mbox{\hyperlink{namespacecds}{cds}}::urcu::gc<RCU>,\ Key,\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}*,\ Traits\ >}
\DoxyCodeLine{00050\ \ \ \ \ \{}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ cds::urcu::gc<RCU>\ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aaed9b1acee4c48f573a800a921289375}{gc}};\ \ \ }
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ Key\ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af1241636918651c696267269ff61e682}{key\_type}};\ \ \ \ }
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ *\ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aa955a3d4f22ee5ef4026606f9b7eb487}{mapped\_type}};\ }
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ Traits\ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a14b954a25ba303fe21eddec2652e7fbc}{traits}};\ \ \ \ \ \ }
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \textcolor{preprocessor}{\#\ \ \ ifdef\ CDS\_DOXYGEN\_INVOKED}}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ implementation\_defined\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a8032ccde9388b5471cfac47b0695d411}{key\_comparator}};\ \ \ \ }
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\#\ \ \ else}}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ opt::details::make\_comparator<\ key\_type,\ traits\ >::type\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a8032ccde9388b5471cfac47b0695d411}{key\_comparator}};}
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::item\_counter\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a8bbae578888bd3706652cdaf6b42d72c}{item\_counter}};\ \ \ \ \ \ \ }
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::memory\_model\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_acb4ea0faa83564f45c85dcd1f1ed02f4}{memory\_model}};\ \ \ \ \ \ \ }
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::node\_allocator\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a7520161e80670a6720e79530ee6c985f}{node\_allocator\_type}};\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::stat\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_ab498349cd9695a96cdbc21e11a2f9941}{stat}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::rcu\_check\_deadlock\ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_ab18c3df8b3b2dc4a21db03d2153c6248}{rcu\_check\_deadlock}};\ }
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::back\_off\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aad91532ad46333ea0f3e5aadc67c9f03}{back\_off}};\ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::disposer\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aaa1d0f97e8cb375833a76cc1e7d1e8d3}{disposer}};\ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ traits::sync\_monitor\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a6b081575c5536963822350e265a44ad6}{sync\_monitor}};\ \ \ \ \ \ \ }
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_ae222095a858065553f04e842ebca3f91}{c\_bRelaxedInsert}}\ =\ traits::relaxed\_insert;}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aa6bb4e5ada7821e8140f694fbcad0375}{c\_bExtractLockExternal}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \textcolor{preprocessor}{\#\ \ \ ifdef\ CDS\_DOXYGEN\_INVOKED}}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classcds_1_1urcu_1_1exempt__ptr}{cds::urcu::exempt\_ptr<\ gc,\ T,\ T,\ disposer,\ void\ >}}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af2ba18900e1dcdaf089a05d67f35988b}{exempt\_ptr}};}
\DoxyCodeLine{00080\ \textcolor{preprocessor}{\#\ \ \ else}}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classcds_1_1urcu_1_1exempt__ptr}{cds::urcu::exempt\_ptr}}<\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aaed9b1acee4c48f573a800a921289375}{gc}},}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ std::remove\_pointer<mapped\_type>::type,}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ std::remove\_pointer<mapped\_type>::type,}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aaa1d0f97e8cb375833a76cc1e7d1e8d3}{disposer}},}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ >\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af2ba18900e1dcdaf089a05d67f35988b}{exempt\_ptr}};}
\DoxyCodeLine{00087\ \textcolor{preprocessor}{\#\ \ \ endif}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ gc::scoped\_lock\ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_abf85b466c8c79656546ea8193c37ccfc}{rcu\_lock}};\ \ }
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structcds_1_1container_1_1bronson__avltree_1_1node}{bronson\_avltree::node<\ key\_type,\ mapped\_type,\ sync\_monitor\ >}}\ node\_type;}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ node\_type::version\_type\ version\_type;}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classcds_1_1details_1_1_allocator}{cds::details::Allocator<\ node\_type,\ node\_allocator\_type\ >}}\ cxx\_allocator;}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ cds::urcu::details::check\_deadlock\_policy<\ gc,\ rcu\_check\_deadlock\ >\ \ \ check\_deadlock\_policy;}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum\ class}\ find\_result}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ not\_found,}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ found,}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ retry}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }update\_flags}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ allow\_insert\ =\ 1,}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ allow\_update\ =\ 2,}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//allow\_remove\ =\ 4,}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ retry\ =\ 1024,}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{testhelper_8h_ad4ec5aab9b62fbbe9b8fc2d8ac0a5989}{failed}}\ =\ 0,}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\_inserted\ =\ allow\_insert,}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\_updated\ =\ allow\_update,}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\_removed\ =\ 4}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum}\ node\_condition}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ nothing\_required\ =\ -\/3,}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ rebalance\_required\ =\ -\/2,}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ unlink\_required\ =\ -\/1}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum}\ direction\ \{}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ left\_child\ =\ -\/1,}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ right\_child\ =\ 1}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ sync\_monitor::template\ scoped\_lock<node\_type>\ node\_scoped\_lock;}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K>}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ node\_type\ *\ alloc\_node(\ K\&\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ \textcolor{keywordtype}{int}\ nHeight,\ version\_type\ version,\ node\_type\ *\ pParent,\ node\_type\ *\ pLeft,\ node\_type\ *\ pRight\ )}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ cxx\_allocator().\mbox{\hyperlink{classcds_1_1details_1_1_allocator_ad159de071a083b84de588870d97440a2}{New}}(\ std::forward<K>(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}}\ ),\ nHeight,\ version,\ pParent,\ pLeft,\ pRight\ );}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ free\_node(\ node\_type\ *\ pNode\ )}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Free\ node\ without\ disposer}}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ !pNode-\/>is\_valued(\ memory\_model::memory\_order\_relaxed\ ));}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pNode-\/>m\_SyncMonitorInjection.check\_free());}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ cxx\_allocator().Delete(\ pNode\ );}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ free\_value(\ mapped\_type\ pVal\ )}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ disposer()(pVal);}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ node\_type\ *\ child(\ node\_type\ *\ pNode,\ \textcolor{keywordtype}{int}\ nDir,\ atomics::memory\_order\ order\ )}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode-\/>child(\ nDir,\ order\ );}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ node\_type\ *\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}(\ node\_type\ *\ pNode,\ atomics::memory\_order\ order\ )}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode-\/>parent(\ order\ );}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ RCU\ safe\ disposer}}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }rcu\_disposer}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ \ \ \ \ m\_pRetiredList;\ \ \ \ \ }
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ mapped\_type\ \ \ \ \ m\_pRetiredValue;\ \ \ \ }
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ rcu\_disposer()}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ m\_pRetiredList(\ nullptr\ )}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ,\ m\_pRetiredValue(\ nullptr\ )}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \string~rcu\_disposer()}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clean();}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ dispose(\ node\_type\ *\ pNode\ )}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ !pNode-\/>is\_valued(\ memory\_model::memory\_order\_relaxed\ ));}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pNode-\/>m\_pNextRemoved\ =\ m\_pRetiredList;}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_pRetiredList\ =\ pNode;}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ dispose\_value(\ mapped\_type\ pVal\ )}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ m\_pRetiredValue\ ==\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_pRetiredValue\ =\ pVal;}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }internal\_disposer}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ operator()(\ node\_type\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\textcolor{keyword}{\ const}}
\DoxyCodeLine{00202\ \textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ free\_node(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ );}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00206\ }
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ clean()}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ !gc::is\_locked());}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ use\ RCU::batch\_retire}}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Dispose\ nodes}}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ node\_type\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ m\_pRetiredList;\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};\ )\ \{}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pNext\ =\ \textcolor{keyword}{static\_cast<}node\_type\ *\textcolor{keyword}{>}(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>m\_pNextRemoved\ );}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Value\ already\ disposed}}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ gc::template\ retire\_ptr<internal\_disposer>(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ );}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ pNext;}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Dispose\ value}}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ m\_pRetiredValue\ \ )}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ gc::template\ retire\_ptr<disposer>(\ m\_pRetiredValue\ );}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ node\_type::base\_class\ m\_Root;}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ node\_type\ *\ \ \ \ \ \ \ \ \ \ \ \ \ m\_pRoot;}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ item\_counter\ \ \ \ \ \ \ \ \ \ \ \ m\_ItemCounter;}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \textcolor{keyword}{mutable}\ sync\_monitor\ \ \ \ m\_Monitor;}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \textcolor{keyword}{mutable}\ \mbox{\hyperlink{namespacecds_1_1container_1_1basket__queue_ab4fd69b62dc1db5ac80a22b5a3a0e999}{stat}}\ \ \ \ \ \ \ \ \ \ \ \ m\_stat;}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a9311a5a3a29859a04f371b99ad70843c}{BronsonAVLTreeMap}}()}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ :\ m\_pRoot(\ static\_cast<node\_type\ *>(\ \&m\_Root\ ))}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a3929dfff3cba5fa08766ea0ae43c241b}{\string~BronsonAVLTreeMap}}()}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_ac08f24b55ec8cfecde4e9360caab8f75}{unsafe\_clear}}();}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K>}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a13226bcab1d76e8cf24b0038bb482e98}{insert}}(\ K\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aa955a3d4f22ee5ef4026606f9b7eb487}{mapped\_type}}\ pVal\ )}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ do\_update(\mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a8032ccde9388b5471cfac47b0695d411}{key\_comparator}}(),}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [pVal](\ node\_type\ *\ pNode\ )\ -\/>\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aa955a3d4f22ee5ef4026606f9b7eb487}{mapped\_type}}}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pNode-\/>m\_pValue.load(\ memory\_model::memory\_order\_relaxed\ )\ ==\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{details_2defs_8h_a782b7f1736e3581e010449d710517c25}{CDS\_UNUSED}}(\ pNode\ );}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pVal;}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ update\_flags::allow\_insert}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ )\ ==\ update\_flags::result\_inserted;}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K>}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ std::pair<bool,\ bool>\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a28ec8f6421eb271c98c155eb49c16e65}{update}}(\ K\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aa955a3d4f22ee5ef4026606f9b7eb487}{mapped\_type}}\ pVal,\ \textcolor{keywordtype}{bool}\ bInsert\ =\ \textcolor{keyword}{true}\ )}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ do\_update(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a8032ccde9388b5471cfac47b0695d411}{key\_comparator}}(),}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [pVal](\ node\_type\ *\ )\ -\/>\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aa955a3d4f22ee5ef4026606f9b7eb487}{mapped\_type}}}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pVal;}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ update\_flags::allow\_update\ |\ (bInsert\ ?\ update\_flags::allow\_insert\ :\ 0)}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::make\_pair(\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ !=\ 0,\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ \&\ update\_flags::result\_inserted)\ !=\ 0\ );}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00304\ }
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K>}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a0c94f4a0fb5127e5ff5443f5c3367119}{erase}}(\ K\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}}\ )}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ do\_remove(}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a8032ccde9388b5471cfac47b0695d411}{key\_comparator}}(),}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [](\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af1241636918651c696267269ff61e682}{key\_type}}\ \textcolor{keyword}{const}\&,\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aa955a3d4f22ee5ef4026606f9b7eb487}{mapped\_type}}\ pVal,\ rcu\_disposer\&\ disp\ )\ -\/>\ \textcolor{keywordtype}{bool}\ \{\ disp.dispose\_value(\ pVal\ );\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00318\ }
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K,\ \textcolor{keyword}{typename}\ Less>}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a0366890161a2a550abfc858eb85d1ccf}{erase\_with}}(\ K\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ Less\ pred\ )}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{details_2defs_8h_a782b7f1736e3581e010449d710517c25}{CDS\_UNUSED}}(\ pred\ );}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ do\_remove(}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cds::opt::details::make\_comparator\_from\_less<Less>(),}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [](\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af1241636918651c696267269ff61e682}{key\_type}}\ \textcolor{keyword}{const}\&,\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aa955a3d4f22ee5ef4026606f9b7eb487}{mapped\_type}}\ pVal,\ rcu\_disposer\&\ disp\ )\ -\/>\ \textcolor{keywordtype}{bool}\ \{\ disp.dispose\_value(\ pVal\ );\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \ \}}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00336\ }
\DoxyCodeLine{00338\ }
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K,\ \textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a32fa503a18c8117edc55099ea6da871e}{erase}}(\ K\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ Func\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ do\_remove(}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a8032ccde9388b5471cfac47b0695d411}{key\_comparator}}(),}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}](\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af1241636918651c696267269ff61e682}{key\_type}}\ \textcolor{keyword}{const}\&\ k,\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aa955a3d4f22ee5ef4026606f9b7eb487}{mapped\_type}}\ pVal,\ rcu\_disposer\&\ disp\ )\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pVal\ );}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(\ k,\ *pVal\ );}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ disp.dispose\_value(pVal);}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00367\ }
\DoxyCodeLine{00369\ }
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K,\ \textcolor{keyword}{typename}\ Less,\ \textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a7767e7ab2b47adf96ddd91b4215f0edd}{erase\_with}}(\ K\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ Less\ pred,\ Func\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{details_2defs_8h_a782b7f1736e3581e010449d710517c25}{CDS\_UNUSED}}(\ pred\ );}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ do\_remove(}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cds::opt::details::make\_comparator\_from\_less<Less>(),}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}](\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af1241636918651c696267269ff61e682}{key\_type}}\ \textcolor{keyword}{const}\&\ k,\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aa955a3d4f22ee5ef4026606f9b7eb487}{mapped\_type}}\ pVal,\ rcu\_disposer\&\ disp\ )\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pVal\ );}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(\ k,\ *pVal\ );}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ disp.dispose\_value(pVal);}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00390\ }
\DoxyCodeLine{00392\ }
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af2ba18900e1dcdaf089a05d67f35988b}{exempt\_ptr}}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_ad66eab7b97360e818168b13cb2665388}{extract\_min}}()}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af2ba18900e1dcdaf089a05d67f35988b}{exempt\_ptr}}(do\_extract\_min(\ [](\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af1241636918651c696267269ff61e682}{key\_type}}\ \textcolor{keyword}{const}\&\ )\ \{\}));}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00413\ }
\DoxyCodeLine{00415\ }
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af2ba18900e1dcdaf089a05d67f35988b}{exempt\_ptr}}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_ac9c3f0993ad9fa44530c9a2caccfeb60}{extract\_min}}(\ Func\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af2ba18900e1dcdaf089a05d67f35988b}{exempt\_ptr}}(do\_extract\_min(\ [\&\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}](\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af1241636918651c696267269ff61e682}{key\_type}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}}\ )\ \{\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(\mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}});\ \}));}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00445\ }
\DoxyCodeLine{00447\ }
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ std::enable\_if<\ std::is\_copy\_assignable<key\_type>::value,\ exempt\_ptr\ >\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{::type}}}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a155b7c19b4418946707935f0f1db10d0}{extract\_min\_key}}(\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af1241636918651c696267269ff61e682}{key\_type}}\&\ min\_key\ )}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af2ba18900e1dcdaf089a05d67f35988b}{exempt\_ptr}}(do\_extract\_min(\ [\&min\_key](\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af1241636918651c696267269ff61e682}{key\_type}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}}\ )\ \{\ min\_key\ =\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}};\ \}));}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00461\ }
\DoxyCodeLine{00463\ }
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af2ba18900e1dcdaf089a05d67f35988b}{exempt\_ptr}}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a2de1f1a047a429235abe84edbe1c7855}{extract\_max}}()}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af2ba18900e1dcdaf089a05d67f35988b}{exempt\_ptr}}(do\_extract\_max(\ [](\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af1241636918651c696267269ff61e682}{key\_type}}\ \textcolor{keyword}{const}\&\ )\ \{\}));}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00484\ }
\DoxyCodeLine{00486\ }
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af2ba18900e1dcdaf089a05d67f35988b}{exempt\_ptr}}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a3b5e169c62720516c5c9d4c1f3b607b3}{extract\_max}}(\ Func\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af2ba18900e1dcdaf089a05d67f35988b}{exempt\_ptr}}(do\_extract\_max(\ [\&\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}](\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af1241636918651c696267269ff61e682}{key\_type}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}}\ )\ \{\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(\mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}});\ \}));}
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00516\ }
\DoxyCodeLine{00518\ }
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ std::enable\_if<\ std::is\_copy\_assignable<key\_type>::value,\ exempt\_ptr\ >\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{::type}}}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af15d230c743afee63386c22b29716f65}{extract\_max\_key}}(\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af1241636918651c696267269ff61e682}{key\_type}}\&\ max\_key\ )}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af2ba18900e1dcdaf089a05d67f35988b}{exempt\_ptr}}(do\_extract\_max(\ [\&max\_key](\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af1241636918651c696267269ff61e682}{key\_type}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}}\ )\ \{\ max\_key\ =\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}};\ \}));}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00532\ }
\DoxyCodeLine{00534\ }
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Q>}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af2ba18900e1dcdaf089a05d67f35988b}{exempt\_ptr}}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aef8f3f8582421331ead9530dd9185d09}{extract}}(\ \mbox{\hyperlink{_householder_q_r__householder_q_8cpp_a7e56035a736d269ad670f312496a0846}{Q}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}}\ )}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af2ba18900e1dcdaf089a05d67f35988b}{exempt\_ptr}}(do\_extract(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}}\ ));}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00549\ }
\DoxyCodeLine{00550\ }
\DoxyCodeLine{00552\ }
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Q,\ \textcolor{keyword}{typename}\ Less>}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af2ba18900e1dcdaf089a05d67f35988b}{exempt\_ptr}}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a7a8876b237b7a4803159aea0ed02a723}{extract\_with}}(\ \mbox{\hyperlink{_householder_q_r__householder_q_8cpp_a7e56035a736d269ad670f312496a0846}{Q}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ Less\ pred\ )}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_af2ba18900e1dcdaf089a05d67f35988b}{exempt\_ptr}}(do\_extract\_with(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ pred\ ));}
\DoxyCodeLine{00562\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00563\ }
\DoxyCodeLine{00565\ }
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K,\ \textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aec008afbe0336c747abad6d61448f640}{find}}(\ K\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ Func\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ do\_find(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a8032ccde9388b5471cfac47b0695d411}{key\_comparator}}(),}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}](\ node\_type\ *\ pNode\ )\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pNode\ !=\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aa955a3d4f22ee5ef4026606f9b7eb487}{mapped\_type}}\ pVal\ =\ pNode-\/>m\_pValue.load(\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pVal\ )\ \{}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(\ pNode-\/>m\_key,\ *pVal\ );}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00593\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00595\ }
\DoxyCodeLine{00597\ }
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K,\ \textcolor{keyword}{typename}\ Less,\ \textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_ac4f832d644c8cb32d2566b818887b689}{find\_with}}(\ K\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ Less\ pred,\ Func\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00606\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{details_2defs_8h_a782b7f1736e3581e010449d710517c25}{CDS\_UNUSED}}(\ pred\ );}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ do\_find(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ cds::opt::details::make\_comparator\_from\_less<Less>(),}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}](\ node\_type\ *\ pNode\ )\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{00609\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pNode\ !=\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_aa955a3d4f22ee5ef4026606f9b7eb487}{mapped\_type}}\ pVal\ =\ pNode-\/>m\_pValue.load(\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{00611\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pVal\ )\ \{}
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(\ pNode-\/>m\_key,\ *pVal\ );}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00614\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00617\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00618\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00619\ }
\DoxyCodeLine{00621\ }
\DoxyCodeLine{00627\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K>}
\DoxyCodeLine{00628\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a0b5e850207b41f5dce6af6468fb5dbaf}{contains}}(\ K\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}}\ )}
\DoxyCodeLine{00629\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00630\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ do\_find(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a8032ccde9388b5471cfac47b0695d411}{key\_comparator}}(),\ [](\ node\_type\ *\ )\ -\/>\ \textcolor{keywordtype}{bool}\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \});}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00632\ }
\DoxyCodeLine{00634\ }
\DoxyCodeLine{00639\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K,\ \textcolor{keyword}{typename}\ Less>}
\DoxyCodeLine{00640\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a4c2287d7dbb737ba2911881e52a3aa32}{contains}}(\ K\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ Less\ pred\ )}
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00642\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{details_2defs_8h_a782b7f1736e3581e010449d710517c25}{CDS\_UNUSED}}(\ pred\ );}
\DoxyCodeLine{00643\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ do\_find(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ cds::opt::details::make\_comparator\_from\_less<Less>(),\ [](\ node\_type\ *\ )\ -\/>\ \textcolor{keywordtype}{bool}\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}\ );}
\DoxyCodeLine{00644\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00645\ }
\DoxyCodeLine{00647\ }
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a498154314d46257923293f1a580962d0}{clear}}()}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_ad66eab7b97360e818168b13cb2665388}{extract\_min}}());}
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00665\ }
\DoxyCodeLine{00667\ }
\DoxyCodeLine{00671\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_ac08f24b55ec8cfecde4e9360caab8f75}{unsafe\_clear}}()}
\DoxyCodeLine{00672\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00673\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a498154314d46257923293f1a580962d0}{clear}}();\ \textcolor{comment}{//\ temp\ solution}}
\DoxyCodeLine{00674\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//TODO}}
\DoxyCodeLine{00675\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00676\ }
\DoxyCodeLine{00678\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a2c8bcae6b7c97af42590778f6cc6159e}{empty}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00679\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00680\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_Root.m\_pRight.load(\ memory\_model::memory\_order\_relaxed\ )\ ==\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00681\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00682\ }
\DoxyCodeLine{00684\ }
\DoxyCodeLine{00693\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a132b657d7615066d19a2034faf06097a}{size}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00694\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00695\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_ItemCounter;}
\DoxyCodeLine{00696\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00697\ }
\DoxyCodeLine{00699\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_ab498349cd9695a96cdbc21e11a2f9941}{stat}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a87515e3abb6ebef5780ed087101b51c5}{statistics}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00700\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00701\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_stat;}
\DoxyCodeLine{00702\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00703\ }
\DoxyCodeLine{00705\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a6b081575c5536963822350e265a44ad6}{sync\_monitor}}\&\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a12e6a4b52b3c8e782d7a7fc51f4ae139}{monitor}}()}
\DoxyCodeLine{00706\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00707\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_Monitor;}
\DoxyCodeLine{00708\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00709\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00710\ \ \ \ \ \ \ \ \ sync\_monitor\ \textcolor{keyword}{const}\&\ monitor()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00711\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00712\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_Monitor;}
\DoxyCodeLine{00713\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00714\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00715\ }
\DoxyCodeLine{00717\ }
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a42ecf76bee9832ac1ea11031d746f761}{check\_consistency}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00721\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00722\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_a42ecf76bee9832ac1ea11031d746f761}{check\_consistency}}([](\ \textcolor{keywordtype}{size\_t}\ \textcolor{comment}{/*nLevel*/},\ \textcolor{keywordtype}{size\_t}\ \textcolor{comment}{/*hLeft*/},\ \textcolor{keywordtype}{size\_t}\ \textcolor{comment}{/*hRight*/}\ )\{\}\ );}
\DoxyCodeLine{00723\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00724\ }
\DoxyCodeLine{00726\ }
\DoxyCodeLine{00742\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00743\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1container_1_1_bronson_a_v_l_tree_map_3_01cds_1_1urcu_1_1gc_3_01_r_c_u_01_4_00_01_key_00_01_t_01_5_00_01_traits_01_4_ae1ad0dae6734658eef4494cdc679da0a}{check\_consistency}}(\ Func\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )\textcolor{keyword}{\ const}}
\DoxyCodeLine{00744\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00745\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pChild\ =\ child(\ m\_pRoot,\ right\_child,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{00746\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pChild\ )\ \{}
\DoxyCodeLine{00747\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ nErrors\ =\ 0;}
\DoxyCodeLine{00748\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ do\_check\_consistency(\ pChild,\ 1,\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ nErrors\ );}
\DoxyCodeLine{00749\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ nErrors\ ==\ 0;}
\DoxyCodeLine{00750\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00751\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00752\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00753\ }
\DoxyCodeLine{00754\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00755\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00756\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ do\_check\_consistency(\ node\_type\ *\ pNode,\ \textcolor{keywordtype}{size\_t}\ nLevel,\ Func\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{keywordtype}{size\_t}\&\ nErrors\ )\textcolor{keyword}{\ const}}
\DoxyCodeLine{00758\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00759\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode\ )\ \{}
\DoxyCodeLine{00760\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ key\_comparator\ cmp;}
\DoxyCodeLine{00761\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pLeft\ =\ child(\ pNode,\ left\_child,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{00762\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pRight\ =\ child(\ pNode,\ right\_child,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{00763\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pLeft\ \&\&\ cmp(\ pLeft-\/>m\_key,\ pNode-\/>m\_key\ )\ >\ 0\ )}
\DoxyCodeLine{00764\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++nErrors;}
\DoxyCodeLine{00765\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \ pRight\ \&\&\ cmp(\ pNode-\/>m\_key,\ pRight-\/>m\_key\ )\ >\ 0\ )}
\DoxyCodeLine{00766\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++nErrors;}
\DoxyCodeLine{00767\ }
\DoxyCodeLine{00768\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ hLeft\ =\ do\_check\_consistency(\ pLeft,\ nLevel\ +\ 1,\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ nErrors\ );}
\DoxyCodeLine{00769\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ hRight\ =\ do\_check\_consistency(\ pRight,\ nLevel\ +\ 1,\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ nErrors\ );}
\DoxyCodeLine{00770\ }
\DoxyCodeLine{00771\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ hLeft\ >=\ hRight\ )\ \{}
\DoxyCodeLine{00772\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ hLeft\ -\/\ hRight\ >\ 1\ )\ \{}
\DoxyCodeLine{00773\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(\ nLevel,\ hLeft,\ hRight\ );}
\DoxyCodeLine{00774\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++nErrors;}
\DoxyCodeLine{00775\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00776\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ hLeft;}
\DoxyCodeLine{00777\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00778\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00779\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ hRight\ -\/\ hLeft\ >\ 1\ )\ \{}
\DoxyCodeLine{00780\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(\ nLevel,\ hLeft,\ hRight\ );}
\DoxyCodeLine{00781\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++nErrors;}
\DoxyCodeLine{00782\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00783\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ hRight;}
\DoxyCodeLine{00784\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00785\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00786\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00787\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00788\ }
\DoxyCodeLine{00789\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Q,\ \textcolor{keyword}{typename}\ Compare,\ \textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00790\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ do\_find(\ \mbox{\hyperlink{_householder_q_r__householder_q_8cpp_a7e56035a736d269ad670f312496a0846}{Q}}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ Compare\ cmp,\ Func\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )\textcolor{keyword}{\ const}}
\DoxyCodeLine{00791\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00792\ \ \ \ \ \ \ \ \ \ \ \ \ find\_result\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}};}
\DoxyCodeLine{00793\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00794\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rcu\_lock\ l;}
\DoxyCodeLine{00795\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ try\_find(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ cmp,\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ m\_pRoot,\ right\_child,\ 0\ );}
\DoxyCodeLine{00796\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00797\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ !=\ find\_result::retry\ );}
\DoxyCodeLine{00798\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ ==\ find\_result::found;}
\DoxyCodeLine{00799\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00800\ }
\DoxyCodeLine{00801\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K,\ \textcolor{keyword}{typename}\ Compare,\ \textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00802\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ do\_update(\ K\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ Compare\ cmp,\ Func\ funcUpdate,\ \textcolor{keywordtype}{int}\ nFlags\ )}
\DoxyCodeLine{00803\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00804\ \ \ \ \ \ \ \ \ \ \ \ \ check\_deadlock\_policy::check();}
\DoxyCodeLine{00805\ }
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ \ \ \ \ rcu\_disposer\ removed\_list;}
\DoxyCodeLine{00807\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00808\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rcu\_lock\ l;}
\DoxyCodeLine{00809\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ try\_update\_root(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ cmp,\ nFlags,\ funcUpdate,\ removed\_list\ );}
\DoxyCodeLine{00810\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00811\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00812\ }
\DoxyCodeLine{00813\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K,\ \textcolor{keyword}{typename}\ Compare,\ \textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00814\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ do\_remove(\ K\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ Compare\ cmp,\ Func\ \mbox{\hyperlink{benchmarks_2async__task_2async__task_8hpp_abce53bb5cc1ee70cdc013fd9b93547eb}{func}}\ )}
\DoxyCodeLine{00815\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00816\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Func\ must\ return\ true\ if\ the\ value\ was\ disposed}}
\DoxyCodeLine{00817\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ or\ false\ if\ the\ value\ was\ extracted}}
\DoxyCodeLine{00818\ }
\DoxyCodeLine{00819\ \ \ \ \ \ \ \ \ \ \ \ \ check\_deadlock\_policy::check();}
\DoxyCodeLine{00820\ }
\DoxyCodeLine{00821\ \ \ \ \ \ \ \ \ \ \ \ \ rcu\_disposer\ removed\_list;}
\DoxyCodeLine{00822\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00823\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rcu\_lock\ l;}
\DoxyCodeLine{00824\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ try\_remove\_root(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ cmp,\ \mbox{\hyperlink{benchmarks_2async__task_2async__task_8hpp_abce53bb5cc1ee70cdc013fd9b93547eb}{func}},\ removed\_list\ );}
\DoxyCodeLine{00825\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00826\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00827\ }
\DoxyCodeLine{00828\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00829\ \ \ \ \ \ \ \ \ mapped\_type\ do\_extract\_min(\ Func\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )}
\DoxyCodeLine{00830\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00831\ \ \ \ \ \ \ \ \ \ \ \ \ mapped\_type\ pExtracted\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00832\ \ \ \ \ \ \ \ \ \ \ \ \ do\_extract\_minmax(}
\DoxyCodeLine{00833\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ left\_child,}
\DoxyCodeLine{00834\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&pExtracted,\ \&\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}](\ key\_type\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ mapped\_type\ pVal,\ rcu\_disposer\&\ )\ -\/>\ \textcolor{keywordtype}{bool}\ \{\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}}\ );\ pExtracted\ =\ pVal;\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00835\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00836\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pExtracted;}
\DoxyCodeLine{00837\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00838\ }
\DoxyCodeLine{00839\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00840\ \ \ \ \ \ \ \ \ mapped\_type\ do\_extract\_max(\ Func\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )}
\DoxyCodeLine{00841\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00842\ \ \ \ \ \ \ \ \ \ \ \ \ mapped\_type\ pExtracted\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00843\ \ \ \ \ \ \ \ \ \ \ \ \ do\_extract\_minmax(}
\DoxyCodeLine{00844\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ right\_child,}
\DoxyCodeLine{00845\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&pExtracted,\ \&\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}](\ key\_type\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ mapped\_type\ pVal,\ rcu\_disposer\&\ )\ -\/>\ \textcolor{keywordtype}{bool}\ \{\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}}\ );\ pExtracted\ =\ pVal;\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00846\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00847\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pExtracted;}
\DoxyCodeLine{00848\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00849\ }
\DoxyCodeLine{00850\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00851\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ do\_extract\_minmax(\ \textcolor{keywordtype}{int}\ nDir,\ Func\ \mbox{\hyperlink{benchmarks_2async__task_2async__task_8hpp_abce53bb5cc1ee70cdc013fd9b93547eb}{func}}\ )}
\DoxyCodeLine{00852\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00853\ \ \ \ \ \ \ \ \ \ \ \ \ check\_deadlock\_policy::check();}
\DoxyCodeLine{00854\ }
\DoxyCodeLine{00855\ \ \ \ \ \ \ \ \ \ \ \ \ rcu\_disposer\ removed\_list;}
\DoxyCodeLine{00856\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00857\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rcu\_lock\ l;}
\DoxyCodeLine{00858\ }
\DoxyCodeLine{00859\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \textcolor{keyword}{true}\ )\ \{}
\DoxyCodeLine{00860\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}};}
\DoxyCodeLine{00861\ }
\DoxyCodeLine{00862\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ get\ right\ child\ of\ root}}
\DoxyCodeLine{00863\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pChild\ =\ child(\ m\_pRoot,\ right\_child,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{00864\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pChild\ )\ \{}
\DoxyCodeLine{00865\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerml_1_1internal_a6d7c4a28fe342251dc983cb357a36506}{version\_type}}\ nChildVersion\ =\ pChild-\/>version(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{00866\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nChildVersion\ \&\ node\_type::shrinking\ )\ \{}
\DoxyCodeLine{00867\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveRootWaitShrinking();}
\DoxyCodeLine{00868\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pChild-\/>template\ wait\_until\_shrink\_completed<back\_off>(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{00869\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ update\_flags::retry;}
\DoxyCodeLine{00870\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00871\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ pChild\ ==\ child(\ m\_pRoot,\ right\_child,\ memory\_model::memory\_order\_acquire\ ))\ \{}
\DoxyCodeLine{00872\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ try\_extract\_minmax(\ nDir,\ \mbox{\hyperlink{benchmarks_2async__task_2async__task_8hpp_abce53bb5cc1ee70cdc013fd9b93547eb}{func}},\ m\_pRoot,\ pChild,\ nChildVersion,\ removed\_list\ );}
\DoxyCodeLine{00873\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00874\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00875\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ update\_flags::retry;}
\DoxyCodeLine{00876\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00877\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00878\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00879\ }
\DoxyCodeLine{00880\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ ==\ update\_flags::retry\ )}
\DoxyCodeLine{00881\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveRetry();}
\DoxyCodeLine{00882\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00883\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onExtract(\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ ==\ update\_flags::result\_removed\ );}
\DoxyCodeLine{00884\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00885\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00886\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00887\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00888\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00889\ }
\DoxyCodeLine{00890\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Q>}
\DoxyCodeLine{00891\ \ \ \ \ \ \ \ \ mapped\_type\ do\_extract(\ \mbox{\hyperlink{_householder_q_r__householder_q_8cpp_a7e56035a736d269ad670f312496a0846}{Q}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}}\ )}
\DoxyCodeLine{00892\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00893\ \ \ \ \ \ \ \ \ \ \ \ \ mapped\_type\ pExtracted\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00894\ \ \ \ \ \ \ \ \ \ \ \ \ do\_remove(}
\DoxyCodeLine{00895\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},}
\DoxyCodeLine{00896\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ key\_comparator(),}
\DoxyCodeLine{00897\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&pExtracted](\ key\_type\ \textcolor{keyword}{const}\&,\ mapped\_type\ pVal,\ rcu\_disposer\&\ )\ -\/>\ \textcolor{keywordtype}{bool}\ \{\ pExtracted\ =\ pVal;\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00898\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00899\ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onExtract(\ pExtracted\ !=\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{00900\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pExtracted;}
\DoxyCodeLine{00901\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00902\ }
\DoxyCodeLine{00903\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Q,\ \textcolor{keyword}{typename}\ Less>}
\DoxyCodeLine{00904\ \ \ \ \ \ \ \ \ mapped\_type\ do\_extract\_with(\ \mbox{\hyperlink{_householder_q_r__householder_q_8cpp_a7e56035a736d269ad670f312496a0846}{Q}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ Less\ pred\ )}
\DoxyCodeLine{00905\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00906\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{details_2defs_8h_a782b7f1736e3581e010449d710517c25}{CDS\_UNUSED}}(\ pred\ );}
\DoxyCodeLine{00907\ \ \ \ \ \ \ \ \ \ \ \ \ mapped\_type\ pExtracted\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00908\ \ \ \ \ \ \ \ \ \ \ \ \ do\_remove(}
\DoxyCodeLine{00909\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},}
\DoxyCodeLine{00910\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cds::opt::details::make\_comparator\_from\_less<Less>(),}
\DoxyCodeLine{00911\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&pExtracted](\ key\_type\ \textcolor{keyword}{const}\&,\ mapped\_type\ pVal,\ rcu\_disposer\&\ )\ -\/>\ \textcolor{keywordtype}{bool}\ \{\ pExtracted\ =\ pVal;\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00912\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00913\ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onExtract(\ pExtracted\ !=\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{00914\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pExtracted;}
\DoxyCodeLine{00915\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00916\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00917\ }
\DoxyCodeLine{00918\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00919\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00920\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a31d490b16f4b63c2afa4c7198ef2c31e}{height}}(\ node\_type\ *\ pNode,\ atomics::memory\_order\ order\ )}
\DoxyCodeLine{00921\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00922\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pNode\ );}
\DoxyCodeLine{00923\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode-\/>m\_nHeight.load(\ order\ );}
\DoxyCodeLine{00924\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00925\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ set\_height(\ node\_type\ *\ pNode,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}},\ atomics::memory\_order\ order\ )}
\DoxyCodeLine{00926\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00927\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pNode\ );}
\DoxyCodeLine{00928\ \ \ \ \ \ \ \ \ \ \ \ \ pNode-\/>m\_nHeight.store(\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}},\ order\ );}
\DoxyCodeLine{00929\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00930\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ height\_null(\ node\_type\ *\ pNode,\ atomics::memory\_order\ order\ )}
\DoxyCodeLine{00931\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00932\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode\ ?\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a31d490b16f4b63c2afa4c7198ef2c31e}{height}}(\ pNode,\ order\ )\ :\ 0;}
\DoxyCodeLine{00933\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00934\ }
\DoxyCodeLine{00935\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \textcolor{keyword}{const}\ c\_stackSize\ =\ 64;}
\DoxyCodeLine{00936\ }
\DoxyCodeLine{00937\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Q,\ \textcolor{keyword}{typename}\ Compare,\ \textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00938\ \ \ \ \ \ \ \ \ find\_result\ try\_find(\ \mbox{\hyperlink{_householder_q_r__householder_q_8cpp_a7e56035a736d269ad670f312496a0846}{Q}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ Compare\ cmp,\ Func\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ node\_type\ *\ pNode,\ \textcolor{keywordtype}{int}\ nDir,\ version\_type\ nVersion\ )\textcolor{keyword}{\ const}}
\DoxyCodeLine{00939\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00940\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ gc::is\_locked());}
\DoxyCodeLine{00941\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pNode\ );}
\DoxyCodeLine{00942\ }
\DoxyCodeLine{00943\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }stack\_record}
\DoxyCodeLine{00944\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00945\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pNode;}
\DoxyCodeLine{00946\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerml_1_1internal_a6d7c4a28fe342251dc983cb357a36506}{version\_type}}\ nVersion;}
\DoxyCodeLine{00947\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ nDir;}
\DoxyCodeLine{00948\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00949\ }
\DoxyCodeLine{00950\ \ \ \ \ \ \ \ \ \ \ \ \ stack\_record\ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[c\_stackSize];}
\DoxyCodeLine{00951\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ pos\ =\ 0;}
\DoxyCodeLine{00952\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[0].pNode\ =\ pNode;}
\DoxyCodeLine{00953\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[0].nVersion\ =\ nVersion;}
\DoxyCodeLine{00954\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[0].nDir\ =\ nDir;}
\DoxyCodeLine{00955\ }
\DoxyCodeLine{00956\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ pos\ >=\ 0\ )\ \{}
\DoxyCodeLine{00957\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pNode\ =\ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].pNode;}
\DoxyCodeLine{00958\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nVersion\ =\ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].nVersion;}
\DoxyCodeLine{00959\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nDir\ =\ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].nDir;}
\DoxyCodeLine{00960\ }
\DoxyCodeLine{00961\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \textcolor{keyword}{true}\ )\ \{}
\DoxyCodeLine{00962\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pChild\ =\ child(\ pNode,\ nDir,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{00963\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !pChild\ )\ \{}
\DoxyCodeLine{00964\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>version(memory\_model::memory\_order\_acquire)\ !=\ nVersion\ )\ \{}
\DoxyCodeLine{00965\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/pos;}
\DoxyCodeLine{00966\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onFindRetry();}
\DoxyCodeLine{00967\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \textcolor{comment}{//\ retry}}
\DoxyCodeLine{00968\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00969\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onFindFailed();}
\DoxyCodeLine{00970\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ find\_result::not\_found;}
\DoxyCodeLine{00971\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00972\ }
\DoxyCodeLine{00973\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ nCmp\ =\ cmp(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ pChild-\/>m\_key\ );}
\DoxyCodeLine{00974\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nCmp\ ==\ 0\ )\ \{}
\DoxyCodeLine{00975\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pChild-\/>is\_valued(\ memory\_model::memory\_order\_acquire\ ))\ \{}
\DoxyCodeLine{00976\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ key\ found}}
\DoxyCodeLine{00977\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_scoped\_lock\ l(\ m\_Monitor,\ *pChild\ );}
\DoxyCodeLine{00978\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ child(pNode,\ nDir,\ memory\_model::memory\_order\_acquire)\ ==\ pChild\ )\ \{}
\DoxyCodeLine{00979\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pChild-\/>is\_valued(\ memory\_model::memory\_order\_relaxed\ ))\ \{}
\DoxyCodeLine{00980\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(\ pChild\ ))\ \{}
\DoxyCodeLine{00981\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onFindSuccess();}
\DoxyCodeLine{00982\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ find\_result::found;}
\DoxyCodeLine{00983\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00984\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00985\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00986\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00987\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onFindRetry();}
\DoxyCodeLine{00988\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00989\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00990\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00991\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onFindFailed();}
\DoxyCodeLine{00992\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ find\_result::not\_found;}
\DoxyCodeLine{00993\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00994\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00995\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerml_1_1internal_a6d7c4a28fe342251dc983cb357a36506}{version\_type}}\ nChildVersion\ =\ pChild-\/>version(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{00996\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nChildVersion\ \&\ node\_type::shrinking\ )\ \{}
\DoxyCodeLine{00997\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onFindWaitShrinking();}
\DoxyCodeLine{00998\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pChild-\/>template\ wait\_until\_shrink\_completed<back\_off>(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{00999\ }
\DoxyCodeLine{01000\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>version(memory\_model::memory\_order\_acquire)\ !=\ nVersion\ )\ \{}
\DoxyCodeLine{01001\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/pos;}
\DoxyCodeLine{01002\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onFindRetry();}
\DoxyCodeLine{01003\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \textcolor{comment}{//\ retry}}
\DoxyCodeLine{01004\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01005\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01006\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ nChildVersion\ !=\ node\_type::unlinked\ \&\&\ child(\ pNode,\ nDir,\ memory\_model::memory\_order\_acquire\ )\ ==\ pChild\ )}
\DoxyCodeLine{01007\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01008\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>version(memory\_model::memory\_order\_acquire)\ !=\ nVersion\ )\ \{}
\DoxyCodeLine{01009\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/pos;}
\DoxyCodeLine{01010\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onFindRetry();}
\DoxyCodeLine{01011\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \textcolor{comment}{//\ retry}}
\DoxyCodeLine{01012\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01013\ }
\DoxyCodeLine{01014\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++pos;}
\DoxyCodeLine{01015\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(pos\ <\ c\_stackSize);}
\DoxyCodeLine{01016\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].pNode\ =\ pChild;}
\DoxyCodeLine{01017\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].nVersion\ =\ nChildVersion;}
\DoxyCodeLine{01018\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].nDir\ =\ nCmp;}
\DoxyCodeLine{01019\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \textcolor{comment}{//\ child\ iteration}}
\DoxyCodeLine{01020\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01021\ }
\DoxyCodeLine{01022\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>version(memory\_model::memory\_order\_acquire)\ !=\ nVersion\ )\ \{}
\DoxyCodeLine{01023\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/pos;}
\DoxyCodeLine{01024\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onFindRetry();}
\DoxyCodeLine{01025\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \textcolor{comment}{//\ retry}}
\DoxyCodeLine{01026\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01027\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01028\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onFindRetry();}
\DoxyCodeLine{01029\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01030\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01031\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ find\_result::retry;}
\DoxyCodeLine{01032\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01033\ }
\DoxyCodeLine{01034\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K,\ \textcolor{keyword}{typename}\ Compare,\ \textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{01035\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ try\_update\_root(\ K\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ Compare\ cmp,\ \textcolor{keywordtype}{int}\ nFlags,\ Func\ funcUpdate,\ rcu\_disposer\&\ disp\ )}
\DoxyCodeLine{01036\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01037\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ gc::is\_locked());}
\DoxyCodeLine{01038\ }
\DoxyCodeLine{01039\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \textcolor{keyword}{true}\ )\ \{}
\DoxyCodeLine{01040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}};}
\DoxyCodeLine{01041\ }
\DoxyCodeLine{01042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ get\ right\ child\ of\ root}}
\DoxyCodeLine{01043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pChild\ =\ child(\ m\_pRoot,\ right\_child,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pChild\ )\ \{}
\DoxyCodeLine{01045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerml_1_1internal_a6d7c4a28fe342251dc983cb357a36506}{version\_type}}\ nChildVersion\ =\ pChild-\/>version(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01046\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nChildVersion\ \&\ node\_type::shrinking\ )\ \{}
\DoxyCodeLine{01047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onUpdateRootWaitShrinking();}
\DoxyCodeLine{01048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pChild-\/>template\ wait\_until\_shrink\_completed<back\_off>(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ update\_flags::retry;}
\DoxyCodeLine{01050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ pChild\ ==\ child(\ m\_pRoot,\ right\_child,\ memory\_model::memory\_order\_acquire\ ))}
\DoxyCodeLine{01052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ try\_update(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ cmp,\ nFlags,\ funcUpdate,\ pChild,\ nChildVersion,\ disp\ );}
\DoxyCodeLine{01053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ update\_flags::retry;}
\DoxyCodeLine{01055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01056\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ tree\ is\ empty}}
\DoxyCodeLine{01058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nFlags\ \&\ update\_flags::allow\_insert\ )\ \{}
\DoxyCodeLine{01059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ insert\ into\ tree\ as\ right\ child\ of\ the\ root}}
\DoxyCodeLine{01060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_scoped\_lock\ l(\ m\_Monitor,\ *m\_pRoot\ );}
\DoxyCodeLine{01062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ child(\ m\_pRoot,\ right\_child,\ memory\_model::memory\_order\_acquire\ )\ !=\ \textcolor{keyword}{nullptr}\ )\ \{}
\DoxyCodeLine{01063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ update\_flags::retry;}
\DoxyCodeLine{01064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01066\ }
\DoxyCodeLine{01067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pNew\ =\ alloc\_node(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ 1,\ 0,\ m\_pRoot,\ \textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{01068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mapped\_type\ pVal\ =\ funcUpdate(\ pNew\ );}
\DoxyCodeLine{01069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pVal\ !=\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{01070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pNew-\/>m\_pValue.store(\ pVal,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{01071\ }
\DoxyCodeLine{01072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_pRoot-\/>child(\ pNew,\ right\_child,\ memory\_model::memory\_order\_release);}
\DoxyCodeLine{01073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_height(\ m\_pRoot,\ 2,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{01074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01075\ }
\DoxyCodeLine{01076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++m\_ItemCounter;}
\DoxyCodeLine{01077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onInsertSuccess();}
\DoxyCodeLine{01078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::result\_inserted;}
\DoxyCodeLine{01079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01080\ }
\DoxyCodeLine{01081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::failed;}
\DoxyCodeLine{01082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01083\ }
\DoxyCodeLine{01084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ !=\ update\_flags::retry\ )}
\DoxyCodeLine{01085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}};}
\DoxyCodeLine{01086\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01087\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01088\ }
\DoxyCodeLine{01089\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K,\ \textcolor{keyword}{typename}\ Compare,\ \textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{01090\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ try\_remove\_root(\ K\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ Compare\ cmp,\ Func\ \mbox{\hyperlink{benchmarks_2async__task_2async__task_8hpp_abce53bb5cc1ee70cdc013fd9b93547eb}{func}},\ rcu\_disposer\&\ disp\ )}
\DoxyCodeLine{01091\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01092\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ gc::is\_locked());}
\DoxyCodeLine{01093\ }
\DoxyCodeLine{01094\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \textcolor{keyword}{true}\ )\ \{}
\DoxyCodeLine{01095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}};}
\DoxyCodeLine{01096\ }
\DoxyCodeLine{01097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ get\ right\ child\ of\ root}}
\DoxyCodeLine{01098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pChild\ =\ child(\ m\_pRoot,\ right\_child,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pChild\ )\ \{}
\DoxyCodeLine{01100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerml_1_1internal_a6d7c4a28fe342251dc983cb357a36506}{version\_type}}\ nChildVersion\ =\ pChild-\/>version(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nChildVersion\ \&\ node\_type::shrinking\ )\ \{}
\DoxyCodeLine{01102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveRootWaitShrinking();}
\DoxyCodeLine{01103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pChild-\/>template\ wait\_until\_shrink\_completed<back\_off>(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ update\_flags::retry;}
\DoxyCodeLine{01105\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ pChild\ ==\ child(\ m\_pRoot,\ right\_child,\ memory\_model::memory\_order\_acquire\ ))\ \{}
\DoxyCodeLine{01107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ try\_remove(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ cmp,\ \mbox{\hyperlink{benchmarks_2async__task_2async__task_8hpp_abce53bb5cc1ee70cdc013fd9b93547eb}{func}},\ m\_pRoot,\ pChild,\ nChildVersion,\ disp\ );}
\DoxyCodeLine{01108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ update\_flags::retry;}
\DoxyCodeLine{01111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01114\ }
\DoxyCodeLine{01115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ ==\ update\_flags::retry\ )}
\DoxyCodeLine{01116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveRetry();}
\DoxyCodeLine{01117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemove(\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ ==\ update\_flags::result\_removed\ );}
\DoxyCodeLine{01119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ ==\ update\_flags::result\_removed;}
\DoxyCodeLine{01120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01121\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01122\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01123\ }
\DoxyCodeLine{01124\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K,\ \textcolor{keyword}{typename}\ Compare,\ \textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{01125\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ try\_update(\ K\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ Compare\ cmp,\ \textcolor{keywordtype}{int}\ nFlags,\ Func\ funcUpdate,\ node\_type\ *\ pNode,\ version\_type\ nVersion,\ rcu\_disposer\&\ disp\ )}
\DoxyCodeLine{01126\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01127\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ gc::is\_locked());}
\DoxyCodeLine{01128\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ nVersion\ !=\ node\_type::unlinked\ );}
\DoxyCodeLine{01129\ }
\DoxyCodeLine{01130\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }stack\_record}
\DoxyCodeLine{01131\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pNode;}
\DoxyCodeLine{01133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerml_1_1internal_a6d7c4a28fe342251dc983cb357a36506}{version\_type}}\ nVersion;}
\DoxyCodeLine{01134\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{01135\ }
\DoxyCodeLine{01136\ \ \ \ \ \ \ \ \ \ \ \ \ stack\_record\ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[c\_stackSize];}
\DoxyCodeLine{01137\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ pos\ =\ 0;}
\DoxyCodeLine{01138\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[0].pNode\ =\ pNode;}
\DoxyCodeLine{01139\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[0].nVersion\ =\ nVersion;}
\DoxyCodeLine{01140\ }
\DoxyCodeLine{01141\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ pos\ >=\ 0\ )\ \{}
\DoxyCodeLine{01142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pNode\ =\ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].pNode;}
\DoxyCodeLine{01143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nVersion\ =\ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].nVersion;}
\DoxyCodeLine{01144\ }
\DoxyCodeLine{01145\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ nCmp\ =\ cmp(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ pNode-\/>m\_key\ );}
\DoxyCodeLine{01146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nCmp\ ==\ 0\ )\ \{}
\DoxyCodeLine{01147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ try\_update\_node(\ nFlags,\ funcUpdate,\ pNode,\ nVersion,\ disp\ );}
\DoxyCodeLine{01148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ !=\ update\_flags::retry\ )}
\DoxyCodeLine{01149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}};}
\DoxyCodeLine{01150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/pos;}
\DoxyCodeLine{01151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onUpdateRetry();}
\DoxyCodeLine{01152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01154\ }
\DoxyCodeLine{01155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \textcolor{keyword}{true}\ )\ \{}
\DoxyCodeLine{01156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pChild\ =\ child(\ pNode,\ nCmp,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>version(memory\_model::memory\_order\_acquire)\ !=\ nVersion\ )\ \{}
\DoxyCodeLine{01158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/pos;}
\DoxyCodeLine{01159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onUpdateRetry();}
\DoxyCodeLine{01160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01162\ }
\DoxyCodeLine{01163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pChild\ ==\ \textcolor{keyword}{nullptr}\ )\ \{}
\DoxyCodeLine{01164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ insert\ new\ node}}
\DoxyCodeLine{01165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nFlags\ \&\ update\_flags::allow\_insert\ )\ \{}
\DoxyCodeLine{01166\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ try\_insert\_node(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ funcUpdate,\ pNode,\ nCmp,\ nVersion,\ disp\ );}
\DoxyCodeLine{01167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ !=\ update\_flags::retry\ )}
\DoxyCodeLine{01168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}};}
\DoxyCodeLine{01169\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/pos;}
\DoxyCodeLine{01170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onUpdateRetry();}
\DoxyCodeLine{01171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::failed;}
\DoxyCodeLine{01175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ update\ child}}
\DoxyCodeLine{01178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerml_1_1internal_a6d7c4a28fe342251dc983cb357a36506}{version\_type}}\ nChildVersion\ =\ pChild-\/>version(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nChildVersion\ \&\ node\_type::shrinking\ )\ \{}
\DoxyCodeLine{01180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onUpdateWaitShrinking();}
\DoxyCodeLine{01181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pChild-\/>template\ wait\_until\_shrink\_completed<back\_off>(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ retry}}
\DoxyCodeLine{01183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ pChild\ ==\ child(\ pNode,\ nCmp,\ memory\_model::memory\_order\_acquire\ ))\ \{}
\DoxyCodeLine{01185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ second\ read\ is\ important,\ because\ it\ is\ protected\ by\ nChildVersion}}
\DoxyCodeLine{01186\ }
\DoxyCodeLine{01187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ validate\ the\ read\ that\ our\ caller\ took\ to\ get\ to\ node}}
\DoxyCodeLine{01188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>version(\ memory\_model::memory\_order\_acquire\ )\ !=\ nVersion\ )\ \{}
\DoxyCodeLine{01189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/pos;}
\DoxyCodeLine{01190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onUpdateRetry();}
\DoxyCodeLine{01191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \textcolor{comment}{//\ retry}}
\DoxyCodeLine{01192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ At\ this\ point\ we\ know\ that\ the\ traversal\ our\ parent\ took\ to\ get\ to\ node\ is\ still\ valid.}}
\DoxyCodeLine{01194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ recursive\ implementation\ will\ validate\ the\ traversal\ from\ node\ to}}
\DoxyCodeLine{01195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ child,\ so\ just\ prior\ to\ the\ node\ nVersion\ validation\ both\ traversals\ were\ definitely\ okay.}}
\DoxyCodeLine{01196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ means\ that\ we\ are\ no\ longer\ vulnerable\ to\ node\ shrinks,\ and\ we\ don't\ need}}
\DoxyCodeLine{01197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ to\ validate\ node\ version\ any\ more.}}
\DoxyCodeLine{01198\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++pos;}
\DoxyCodeLine{01199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pos\ <\ c\_stackSize\ );}
\DoxyCodeLine{01200\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].pNode\ =\ pChild;}
\DoxyCodeLine{01201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].nVersion\ =\ nChildVersion;}
\DoxyCodeLine{01202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ nChildVersion\ !=\ node\_type::unlinked\ );}
\DoxyCodeLine{01203\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \textcolor{comment}{//\ child\ iteration}}
\DoxyCodeLine{01204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onUpdateRetry();}
\DoxyCodeLine{01206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01208\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01209\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::retry;}
\DoxyCodeLine{01210\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01211\ }
\DoxyCodeLine{01212\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K,\ \textcolor{keyword}{typename}\ Compare,\ \textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{01213\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ try\_remove(\ K\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ Compare\ cmp,\ Func\ \mbox{\hyperlink{benchmarks_2async__task_2async__task_8hpp_abce53bb5cc1ee70cdc013fd9b93547eb}{func}},\ node\_type\ *\ pParent,\ node\_type\ *\ pNode,\ version\_type\ nVersion,\ rcu\_disposer\&\ disp\ )}
\DoxyCodeLine{01214\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01215\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ gc::is\_locked());}
\DoxyCodeLine{01216\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ nVersion\ !=\ node\_type::unlinked\ );}
\DoxyCodeLine{01217\ }
\DoxyCodeLine{01218\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }stack\_record}
\DoxyCodeLine{01219\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01220\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pParent;}
\DoxyCodeLine{01221\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pNode;}
\DoxyCodeLine{01222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerml_1_1internal_a6d7c4a28fe342251dc983cb357a36506}{version\_type}}\ nVersion;}
\DoxyCodeLine{01223\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{01224\ }
\DoxyCodeLine{01225\ \ \ \ \ \ \ \ \ \ \ \ \ stack\_record\ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[c\_stackSize];}
\DoxyCodeLine{01226\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ pos\ =\ 0;}
\DoxyCodeLine{01227\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[0].pParent\ =\ pParent;}
\DoxyCodeLine{01228\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[0].pNode\ =\ pNode;}
\DoxyCodeLine{01229\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[0].nVersion\ =\ nVersion;}
\DoxyCodeLine{01230\ }
\DoxyCodeLine{01231\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ pos\ >=\ 0\ )\ \{}
\DoxyCodeLine{01232\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pParent\ =\ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].pParent;}
\DoxyCodeLine{01233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pNode\ =\ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].pNode;}
\DoxyCodeLine{01234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nVersion\ =\ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].nVersion;}
\DoxyCodeLine{01235\ }
\DoxyCodeLine{01236\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ nCmp\ =\ cmp(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ pNode-\/>m\_key\ );}
\DoxyCodeLine{01237\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nCmp\ ==\ 0\ )\ \{}
\DoxyCodeLine{01238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ try\_remove\_node(\ pParent,\ pNode,\ nVersion,\ \mbox{\hyperlink{benchmarks_2async__task_2async__task_8hpp_abce53bb5cc1ee70cdc013fd9b93547eb}{func}},\ disp\ );}
\DoxyCodeLine{01239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ !=\ update\_flags::retry\ )}
\DoxyCodeLine{01240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}};}
\DoxyCodeLine{01241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/pos;}
\DoxyCodeLine{01242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveRetry();}
\DoxyCodeLine{01243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01245\ }
\DoxyCodeLine{01246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \textcolor{keyword}{true}\ )\ \{}
\DoxyCodeLine{01247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pChild\ =\ child(\ pNode,\ nCmp,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>version(memory\_model::memory\_order\_acquire)\ !=\ nVersion\ )\ \{}
\DoxyCodeLine{01249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/pos;}
\DoxyCodeLine{01250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveRetry();}
\DoxyCodeLine{01251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01252\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01253\ }
\DoxyCodeLine{01254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pChild\ ==\ \textcolor{keyword}{nullptr}\ )}
\DoxyCodeLine{01255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::failed;}
\DoxyCodeLine{01256\ }
\DoxyCodeLine{01257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ update\ child}}
\DoxyCodeLine{01258\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerml_1_1internal_a6d7c4a28fe342251dc983cb357a36506}{version\_type}}\ nChildVersion\ =\ pChild-\/>version(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01259\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nChildVersion\ \&\ node\_type::shrinking\ )\ \{}
\DoxyCodeLine{01260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveWaitShrinking();}
\DoxyCodeLine{01261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pChild-\/>template\ wait\_until\_shrink\_completed<back\_off>(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ retry}}
\DoxyCodeLine{01263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ pChild\ ==\ child(\ pNode,\ nCmp,\ memory\_model::memory\_order\_acquire\ ))\ \{}
\DoxyCodeLine{01265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ second\ read\ is\ important,\ because\ it\ is\ protected\ by\ nChildVersion}}
\DoxyCodeLine{01266\ }
\DoxyCodeLine{01267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ validate\ the\ read\ that\ our\ caller\ took\ to\ get\ to\ node}}
\DoxyCodeLine{01268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>version(memory\_model::memory\_order\_acquire)\ !=\ nVersion\ )\ \{}
\DoxyCodeLine{01269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/pos;}
\DoxyCodeLine{01270\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveRetry();}
\DoxyCodeLine{01271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01273\ }
\DoxyCodeLine{01274\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ At\ this\ point\ we\ know\ that\ the\ traversal\ our\ parent\ took\ to\ get\ to\ node\ is\ still\ valid.}}
\DoxyCodeLine{01275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ recursive\ implementation\ will\ validate\ the\ traversal\ from\ node\ to}}
\DoxyCodeLine{01276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ child,\ so\ just\ prior\ to\ the\ node\ nVersion\ validation\ both\ traversals\ were\ definitely\ okay.}}
\DoxyCodeLine{01277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ means\ that\ we\ are\ no\ longer\ vulnerable\ to\ node\ shrinks,\ and\ we\ don't\ need}}
\DoxyCodeLine{01278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ to\ validate\ node\ version\ any\ more.}}
\DoxyCodeLine{01279\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++pos;}
\DoxyCodeLine{01280\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pos\ <\ c\_stackSize\ );}
\DoxyCodeLine{01281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].pParent\ =\ pNode;}
\DoxyCodeLine{01282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].pNode\ =\ pChild;}
\DoxyCodeLine{01283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].nVersion\ =\ nChildVersion;}
\DoxyCodeLine{01284\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \textcolor{comment}{//\ child\ iteration}}
\DoxyCodeLine{01285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01286\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveRetry();}
\DoxyCodeLine{01287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01288\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01289\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::retry;}
\DoxyCodeLine{01290\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01291\ }
\DoxyCodeLine{01292\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{01293\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ try\_extract\_minmax(\ \textcolor{keywordtype}{int}\ nDir,\ Func\ \mbox{\hyperlink{benchmarks_2async__task_2async__task_8hpp_abce53bb5cc1ee70cdc013fd9b93547eb}{func}},\ node\_type\ *\ pParent,\ node\_type\ *\ pNode,\ version\_type\ nVersion,\ rcu\_disposer\&\ disp\ )}
\DoxyCodeLine{01294\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01295\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ gc::is\_locked());}
\DoxyCodeLine{01296\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ nVersion\ !=\ node\_type::unlinked\ );}
\DoxyCodeLine{01297\ }
\DoxyCodeLine{01298\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }stack\_record}
\DoxyCodeLine{01299\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pParent;}
\DoxyCodeLine{01301\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pNode;}
\DoxyCodeLine{01302\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerml_1_1internal_a6d7c4a28fe342251dc983cb357a36506}{version\_type}}\ nVersion;}
\DoxyCodeLine{01303\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{01304\ }
\DoxyCodeLine{01305\ \ \ \ \ \ \ \ \ \ \ \ \ stack\_record\ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[c\_stackSize];}
\DoxyCodeLine{01306\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ pos\ =\ 0;}
\DoxyCodeLine{01307\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[0].pParent\ =\ pParent;}
\DoxyCodeLine{01308\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[0].pNode\ =\ pNode;}
\DoxyCodeLine{01309\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[0].nVersion\ =\ nVersion;}
\DoxyCodeLine{01310\ }
\DoxyCodeLine{01311\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ pos\ >=\ 0\ )\ \{}
\DoxyCodeLine{01312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pParent\ =\ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].pParent;}
\DoxyCodeLine{01313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pNode\ =\ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].pNode;}
\DoxyCodeLine{01314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nVersion\ =\ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].nVersion;}
\DoxyCodeLine{01315\ }
\DoxyCodeLine{01316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \textcolor{keyword}{true}\ )\ \{}
\DoxyCodeLine{01317\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ iterDir\ =\ nDir;}
\DoxyCodeLine{01318\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pChild\ =\ child(\ pNode,\ iterDir,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01319\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>version(memory\_model::memory\_order\_acquire)\ !=\ nVersion\ )\ \{}
\DoxyCodeLine{01320\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/pos;}
\DoxyCodeLine{01321\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveRetry();}
\DoxyCodeLine{01322\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01323\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01324\ }
\DoxyCodeLine{01325\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !pChild\ )\ \{}
\DoxyCodeLine{01326\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Found\ min/max}}
\DoxyCodeLine{01327\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>is\_valued(\ memory\_model::memory\_order\_acquire\ ))\ \{}
\DoxyCodeLine{01328\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ try\_remove\_node(\ pParent,\ pNode,\ nVersion,\ \mbox{\hyperlink{benchmarks_2async__task_2async__task_8hpp_abce53bb5cc1ee70cdc013fd9b93547eb}{func}},\ disp\ );}
\DoxyCodeLine{01329\ }
\DoxyCodeLine{01330\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ ==\ update\_flags::result\_removed\ )}
\DoxyCodeLine{01331\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}};}
\DoxyCodeLine{01332\ }
\DoxyCodeLine{01333\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/pos;}
\DoxyCodeLine{01334\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveRetry();}
\DoxyCodeLine{01335\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01337\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01338\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ check\ right\ (for\ min)\ or\ left\ (for\ max)\ child\ node}}
\DoxyCodeLine{01339\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ iterDir\ =\ -\/iterDir;}
\DoxyCodeLine{01340\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pChild\ =\ child(\ pNode,\ iterDir,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01341\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !pChild\ )\ \{}
\DoxyCodeLine{01342\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/pos;}
\DoxyCodeLine{01343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveRetry();}
\DoxyCodeLine{01344\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01346\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01347\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01348\ }
\DoxyCodeLine{01349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerml_1_1internal_a6d7c4a28fe342251dc983cb357a36506}{version\_type}}\ nChildVersion\ =\ pChild-\/>version(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nChildVersion\ \&\ node\_type::shrinking\ )\ \{}
\DoxyCodeLine{01351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveWaitShrinking();}
\DoxyCodeLine{01352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pChild-\/>template\ wait\_until\_shrink\_completed<back\_off>(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ retry}}
\DoxyCodeLine{01354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01355\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ pChild\ ==\ child(\ pNode,\ iterDir,\ memory\_model::memory\_order\_acquire\ ))\ \{}
\DoxyCodeLine{01356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ second\ read\ is\ important,\ because\ it\ is\ protected\ by\ nChildVersion}}
\DoxyCodeLine{01357\ }
\DoxyCodeLine{01358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ validate\ the\ read\ that\ our\ caller\ took\ to\ get\ to\ node}}
\DoxyCodeLine{01359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>version(\ memory\_model::memory\_order\_acquire\ )\ !=\ nVersion\ )\ \{}
\DoxyCodeLine{01360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/pos;}
\DoxyCodeLine{01361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveRetry();}
\DoxyCodeLine{01362\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01363\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01364\ }
\DoxyCodeLine{01365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ At\ this\ point\ we\ know\ that\ the\ traversal\ our\ parent\ took\ to\ get\ to\ node\ is\ still\ valid.}}
\DoxyCodeLine{01366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ recursive\ implementation\ will\ validate\ the\ traversal\ from\ node\ to}}
\DoxyCodeLine{01367\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ child,\ so\ just\ prior\ to\ the\ node\ nVersion\ validation\ both\ traversals\ were\ definitely\ okay.}}
\DoxyCodeLine{01368\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ means\ that\ we\ are\ no\ longer\ vulnerable\ to\ node\ shrinks,\ and\ we\ don't\ need}}
\DoxyCodeLine{01369\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ to\ validate\ node\ version\ any\ more.}}
\DoxyCodeLine{01370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++pos;}
\DoxyCodeLine{01371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pos\ <\ c\_stackSize\ );}
\DoxyCodeLine{01372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].pParent\ =\ pNode;}
\DoxyCodeLine{01373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].pNode\ =\ pChild;}
\DoxyCodeLine{01374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceluisa_aac116168b3a7f5580f82d7da42bd1c42}{stack}}[pos].nVersion\ =\ nChildVersion;}
\DoxyCodeLine{01375\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \textcolor{comment}{//\ child\ iteration}}
\DoxyCodeLine{01376\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveRetry();}
\DoxyCodeLine{01378\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01379\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01380\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::retry;}
\DoxyCodeLine{01381\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01382\ }
\DoxyCodeLine{01383\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K,\ \textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{01384\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ try\_insert\_node(\ K\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ Func\ funcUpdate,\ node\_type\ *\ pNode,\ \textcolor{keywordtype}{int}\ nDir,\ version\_type\ nVersion,\ rcu\_disposer\&\ disp\ )}
\DoxyCodeLine{01385\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01386\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pNew;}
\DoxyCodeLine{01387\ }
\DoxyCodeLine{01388\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ fnCreateNode\ =\ [\&funcUpdate](\ node\_type\ *\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}\ )\ \{}
\DoxyCodeLine{01389\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mapped\_type\ pVal\ =\ funcUpdate(\ node\ );}
\DoxyCodeLine{01390\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pVal\ !=\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{01391\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>m\_pValue.store(\ pVal,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{01392\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{01393\ }
\DoxyCodeLine{01394\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{compiler_2defs_8h_abac13a0c511abaae94722f439addf3b3}{constexpr\_if}}\ (\ c\_bRelaxedInsert\ )\ \{}
\DoxyCodeLine{01395\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>version(\ memory\_model::memory\_order\_acquire\ )\ !=\ nVersion}
\DoxyCodeLine{01396\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ child(\ pNode,\ nDir,\ memory\_model::memory\_order\_acquire\ )\ !=\ \textcolor{keyword}{nullptr}\ )}
\DoxyCodeLine{01397\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01398\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onInsertRetry();}
\DoxyCodeLine{01399\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::retry;}
\DoxyCodeLine{01400\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01401\ }
\DoxyCodeLine{01402\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fnCreateNode(\ pNew\ =\ alloc\_node(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ 1,\ 0,\ pNode,\ \textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr}\ ));}
\DoxyCodeLine{01403\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01404\ }
\DoxyCodeLine{01405\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pDamaged;}
\DoxyCodeLine{01406\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01407\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pNode\ !=\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{01408\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_scoped\_lock\ l(\ m\_Monitor,\ *pNode\ );}
\DoxyCodeLine{01409\ }
\DoxyCodeLine{01410\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>version(\ memory\_model::memory\_order\_acquire\ )\ !=\ nVersion}
\DoxyCodeLine{01411\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ child(\ pNode,\ nDir,\ memory\_model::memory\_order\_acquire\ )\ !=\ \textcolor{keyword}{nullptr}\ )}
\DoxyCodeLine{01412\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01413\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{compiler_2defs_8h_abac13a0c511abaae94722f439addf3b3}{constexpr\_if}}\ (\ c\_bRelaxedInsert\ )\ \{}
\DoxyCodeLine{01414\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mapped\_type\ pVal\ =\ pNew-\/>m\_pValue.load(\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01415\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pNew-\/>m\_pValue.store(\ \textcolor{keyword}{nullptr},\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01416\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ free\_value(\ pVal\ );}
\DoxyCodeLine{01417\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ free\_node(\ pNew\ );}
\DoxyCodeLine{01418\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRelaxedInsertFailed();}
\DoxyCodeLine{01419\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01420\ }
\DoxyCodeLine{01421\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onInsertRetry();}
\DoxyCodeLine{01422\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::retry;}
\DoxyCodeLine{01423\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01424\ }
\DoxyCodeLine{01425\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{compiler_2defs_8h_abac13a0c511abaae94722f439addf3b3}{constexpr\_if}}\ (\ !c\_bRelaxedInsert\ )}
\DoxyCodeLine{01426\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fnCreateNode(\ pNew\ =\ alloc\_node(\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ 1,\ 0,\ pNode,\ \textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr}\ ));}
\DoxyCodeLine{01427\ }
\DoxyCodeLine{01428\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pNode-\/>child(\ pNew,\ nDir,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{01429\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pDamaged\ =\ fix\_height\_locked(\ pNode\ );}
\DoxyCodeLine{01430\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01431\ }
\DoxyCodeLine{01432\ \ \ \ \ \ \ \ \ \ \ \ \ ++m\_ItemCounter;}
\DoxyCodeLine{01433\ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onInsertSuccess();}
\DoxyCodeLine{01434\ }
\DoxyCodeLine{01435\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pDamaged\ )\ \{}
\DoxyCodeLine{01436\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fix\_height\_and\_rebalance(\ pDamaged,\ disp\ );}
\DoxyCodeLine{01437\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onInsertRebalanceRequired();}
\DoxyCodeLine{01438\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01439\ }
\DoxyCodeLine{01440\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::result\_inserted;}
\DoxyCodeLine{01441\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01442\ }
\DoxyCodeLine{01443\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{01444\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ try\_update\_node(\ \textcolor{keywordtype}{int}\ nFlags,\ Func\ funcUpdate,\ node\_type\ *\ pNode,\ version\_type\ nVersion,\ rcu\_disposer\&\ disp\ )}
\DoxyCodeLine{01445\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01446\ \ \ \ \ \ \ \ \ \ \ \ \ mapped\_type\ pOld;}
\DoxyCodeLine{01447\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ bInserted;}
\DoxyCodeLine{01448\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pNode\ !=\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{01449\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01450\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_scoped\_lock\ l(\ m\_Monitor,\ *pNode\ );}
\DoxyCodeLine{01451\ }
\DoxyCodeLine{01452\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>version(memory\_model::memory\_order\_acquire)\ !=\ nVersion\ )}
\DoxyCodeLine{01453\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::retry;}
\DoxyCodeLine{01454\ }
\DoxyCodeLine{01455\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>is\_unlinked(\ memory\_model::memory\_order\_acquire\ ))\ \{}
\DoxyCodeLine{01456\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onUpdateUnlinked();}
\DoxyCodeLine{01457\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::retry;}
\DoxyCodeLine{01458\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01459\ }
\DoxyCodeLine{01460\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>is\_valued(\ memory\_model::memory\_order\_relaxed\ )\ \&\&\ !(nFlags\ \&\ update\_flags::allow\_update))\ \{}
\DoxyCodeLine{01461\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onInsertFailed();}
\DoxyCodeLine{01462\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::failed;}
\DoxyCodeLine{01463\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01464\ }
\DoxyCodeLine{01465\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pOld\ =\ pNode-\/>value(\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01466\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bInserted\ =\ pOld\ ==\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01467\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mapped\_type\ pVal\ =\ funcUpdate(\ pNode\ );}
\DoxyCodeLine{01468\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pVal\ ==\ pOld\ )}
\DoxyCodeLine{01469\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pOld\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01470\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01471\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pVal\ !=\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{01472\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pNode-\/>m\_pValue.store(\ pVal,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{01473\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01474\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01475\ }
\DoxyCodeLine{01476\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pOld\ )\ \{}
\DoxyCodeLine{01477\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ disp.dispose\_value(pOld);}
\DoxyCodeLine{01478\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onDisposeValue();}
\DoxyCodeLine{01479\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01480\ }
\DoxyCodeLine{01481\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ bInserted\ )\ \{}
\DoxyCodeLine{01482\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++m\_ItemCounter;}
\DoxyCodeLine{01483\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onInsertSuccess();}
\DoxyCodeLine{01484\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::result\_inserted;}
\DoxyCodeLine{01485\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01486\ }
\DoxyCodeLine{01487\ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onUpdateSuccess();}
\DoxyCodeLine{01488\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::result\_updated;}
\DoxyCodeLine{01489\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01490\ }
\DoxyCodeLine{01491\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{01492\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ try\_remove\_node(\ node\_type\ *\ pParent,\ node\_type\ *\ pNode,\ version\_type\ nVersion,\ Func\ \mbox{\hyperlink{benchmarks_2async__task_2async__task_8hpp_abce53bb5cc1ee70cdc013fd9b93547eb}{func}},\ rcu\_disposer\&\ disp\ )}
\DoxyCodeLine{01493\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01494\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pParent\ !=\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{01495\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pNode\ !=\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{01496\ }
\DoxyCodeLine{01497\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !pNode-\/>is\_valued(\ memory\_model::memory\_order\_acquire\ ))}
\DoxyCodeLine{01498\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::failed;}
\DoxyCodeLine{01499\ }
\DoxyCodeLine{01500\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ child(\ pNode,\ left\_child,\ memory\_model::memory\_order\_acquire\ )\ ==\ \textcolor{keyword}{nullptr}}
\DoxyCodeLine{01501\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ child(\ pNode,\ right\_child,\ memory\_model::memory\_order\_acquire\ )\ ==\ \textcolor{keyword}{nullptr}\ )}
\DoxyCodeLine{01502\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01503\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ pNode\ can\ be\ replaced\ with\ its\ child}}
\DoxyCodeLine{01504\ }
\DoxyCodeLine{01505\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pDamaged;}
\DoxyCodeLine{01506\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mapped\_type\ pOld;}
\DoxyCodeLine{01507\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01508\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_scoped\_lock\ lp(\ m\_Monitor,\ *pParent\ );}
\DoxyCodeLine{01509\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pParent-\/>is\_unlinked(\ memory\_model::memory\_order\_acquire\ )\ ||\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}(\ pNode,\ memory\_model::memory\_order\_acquire\ )\ !=\ pParent\ )}
\DoxyCodeLine{01510\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::retry;}
\DoxyCodeLine{01511\ }
\DoxyCodeLine{01512\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01513\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_scoped\_lock\ ln(\ m\_Monitor,\ *pNode\ );}
\DoxyCodeLine{01514\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>version(\ memory\_model::memory\_order\_acquire\ )\ !=\ nVersion\ )}
\DoxyCodeLine{01515\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::retry;}
\DoxyCodeLine{01516\ }
\DoxyCodeLine{01517\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pOld\ =\ pNode-\/>value(\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01518\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !pOld\ )}
\DoxyCodeLine{01519\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::failed;}
\DoxyCodeLine{01520\ }
\DoxyCodeLine{01521\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !try\_unlink\_locked(\ pParent,\ pNode,\ disp\ ))}
\DoxyCodeLine{01522\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::retry;}
\DoxyCodeLine{01523\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01524\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pDamaged\ =\ fix\_height\_locked(\ pParent\ );}
\DoxyCodeLine{01525\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01526\ }
\DoxyCodeLine{01527\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/m\_ItemCounter;}
\DoxyCodeLine{01528\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{benchmarks_2async__task_2async__task_8hpp_abce53bb5cc1ee70cdc013fd9b93547eb}{func}}(\ pNode-\/>m\_key,\ pOld,\ disp\ ))\ \ \ \textcolor{comment}{//\ calls\ pOld\ disposer\ inside}}
\DoxyCodeLine{01529\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onDisposeValue();}
\DoxyCodeLine{01530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01531\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onExtractValue();}
\DoxyCodeLine{01532\ }
\DoxyCodeLine{01533\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pDamaged\ )\ \{}
\DoxyCodeLine{01534\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fix\_height\_and\_rebalance(\ pDamaged,\ disp\ );}
\DoxyCodeLine{01535\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveRebalanceRequired();}
\DoxyCodeLine{01536\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01537\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01538\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01539\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ pNode\ is\ an\ internal\ with\ two\ children}}
\DoxyCodeLine{01540\ }
\DoxyCodeLine{01541\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mapped\_type\ pOld;}
\DoxyCodeLine{01542\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01543\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_scoped\_lock\ ln(\ m\_Monitor,\ *pNode\ );}
\DoxyCodeLine{01544\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pOld\ =\ pNode-\/>value(\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01545\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>version(\ memory\_model::memory\_order\_relaxed\ )\ !=\ nVersion\ )}
\DoxyCodeLine{01546\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::retry;}
\DoxyCodeLine{01547\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !pOld\ )}
\DoxyCodeLine{01548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::failed;}
\DoxyCodeLine{01549\ }
\DoxyCodeLine{01550\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pNode-\/>m\_pValue.store(\ \textcolor{keyword}{nullptr},\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{01551\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onMakeRoutingNode();}
\DoxyCodeLine{01552\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01553\ }
\DoxyCodeLine{01554\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/m\_ItemCounter;}
\DoxyCodeLine{01555\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{benchmarks_2async__task_2async__task_8hpp_abce53bb5cc1ee70cdc013fd9b93547eb}{func}}(\ pNode-\/>m\_key,\ pOld,\ disp\ ))\ \ \textcolor{comment}{//\ calls\ pOld\ disposer\ inside}}
\DoxyCodeLine{01556\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onDisposeValue();}
\DoxyCodeLine{01557\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01558\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onExtractValue();}
\DoxyCodeLine{01559\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01560\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ update\_flags::result\_removed;}
\DoxyCodeLine{01561\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01562\ }
\DoxyCodeLine{01563\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ try\_unlink\_locked(\ node\_type\ *\ pParent,\ node\_type\ *\ pNode,\ rcu\_disposer\&\ disp\ )}
\DoxyCodeLine{01564\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01565\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ pParent\ and\ pNode\ must\ be\ locked}}
\DoxyCodeLine{01566\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ !pParent-\/>is\_unlinked(memory\_model::memory\_order\_relaxed));}
\DoxyCodeLine{01567\ }
\DoxyCodeLine{01568\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pParentLeft\ =\ child(\ pParent,\ left\_child,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01569\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pParentRight\ =\ child(\ pParent,\ right\_child,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01570\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode\ !=\ pParentLeft\ \&\&\ pNode\ !=\ pParentRight\ )\ \{}
\DoxyCodeLine{01571\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ node\ is\ no\ longer\ a\ child\ of\ parent}}
\DoxyCodeLine{01572\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01573\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01574\ }
\DoxyCodeLine{01575\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ !pNode-\/>is\_unlinked(\ memory\_model::memory\_order\_relaxed\ ));}
\DoxyCodeLine{01576\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pParent\ ==\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}(\ pNode,\ memory\_model::memory\_order\_relaxed\ ));}
\DoxyCodeLine{01577\ }
\DoxyCodeLine{01578\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pLeft\ =\ child(\ pNode,\ left\_child,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01579\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pRight\ =\ child(\ pNode,\ right\_child,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01580\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pLeft\ !=\ \textcolor{keyword}{nullptr}\ \&\&\ pRight\ !=\ \textcolor{keyword}{nullptr}\ )\ \{}
\DoxyCodeLine{01581\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ splicing\ is\ no\ longer\ possible}}
\DoxyCodeLine{01582\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01583\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01584\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pSplice\ =\ pLeft\ ?\ pLeft\ :\ pRight;}
\DoxyCodeLine{01585\ }
\DoxyCodeLine{01586\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pParentLeft\ ==\ pNode\ )}
\DoxyCodeLine{01587\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pParent-\/>m\_pLeft.store(\ pSplice,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{01588\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01589\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pParent-\/>m\_pRight.store(\ pSplice,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{01590\ }
\DoxyCodeLine{01591\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pSplice\ )}
\DoxyCodeLine{01592\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pSplice-\/>parent(\ pParent,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{01593\ }
\DoxyCodeLine{01594\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Mark\ the\ node\ as\ unlinked}}
\DoxyCodeLine{01595\ \ \ \ \ \ \ \ \ \ \ \ \ pNode-\/>version(\ node\_type::unlinked,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{01596\ }
\DoxyCodeLine{01597\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ value\ will\ be\ disposed\ by\ calling\ function}}
\DoxyCodeLine{01598\ \ \ \ \ \ \ \ \ \ \ \ \ pNode-\/>m\_pValue.store(\ \textcolor{keyword}{nullptr},\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{01599\ }
\DoxyCodeLine{01600\ \ \ \ \ \ \ \ \ \ \ \ \ disp.dispose(\ pNode\ );}
\DoxyCodeLine{01601\ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onDisposeNode();}
\DoxyCodeLine{01602\ }
\DoxyCodeLine{01603\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01604\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01605\ }
\DoxyCodeLine{01606\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{01607\ }
\DoxyCodeLine{01608\ \ \ \ \ \textcolor{keyword}{private}:\ \textcolor{comment}{//\ rotations}}
\DoxyCodeLine{01609\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{01610\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ check\_node\_ordering(\ node\_type*\ pParent,\ node\_type*\ pChild\ )}
\DoxyCodeLine{01611\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01612\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ key\_comparator()(\ pParent-\/>m\_key,\ pChild-\/>m\_key\ );}
\DoxyCodeLine{01613\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01614\ }
\DoxyCodeLine{01615\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ estimate\_node\_condition(\ node\_type\ *\ pNode\ )}
\DoxyCodeLine{01616\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01617\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pLeft\ =\ child(\ pNode,\ left\_child,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01618\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pRight\ =\ child(\ pNode,\ right\_child,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01619\ }
\DoxyCodeLine{01620\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (pLeft\ ==\ \textcolor{keyword}{nullptr}\ ||\ pRight\ ==\ \textcolor{keyword}{nullptr})\ \&\&\ !pNode-\/>is\_valued(\ memory\_model::memory\_order\_acquire\ ))}
\DoxyCodeLine{01621\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ unlink\_required;}
\DoxyCodeLine{01622\ }
\DoxyCodeLine{01623\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a31d490b16f4b63c2afa4c7198ef2c31e}{height}}(\ pNode,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01624\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hL\ =\ height\_null(\ pLeft,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01625\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hR\ =\ height\_null(\ pRight,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01626\ }
\DoxyCodeLine{01627\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hNew\ =\ 1\ +\ std::max(\ hL,\ hR\ );}
\DoxyCodeLine{01628\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ nBalance\ =\ hL\ -\/\ hR;}
\DoxyCodeLine{01629\ }
\DoxyCodeLine{01630\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nBalance\ <\ -\/1\ ||\ nBalance\ >\ 1\ )}
\DoxyCodeLine{01631\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rebalance\_required;}
\DoxyCodeLine{01632\ }
\DoxyCodeLine{01633\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}\ !=\ hNew\ ?\ hNew\ :\ nothing\_required;}
\DoxyCodeLine{01634\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01635\ }
\DoxyCodeLine{01636\ \ \ \ \ \ \ \ \ node\_type\ *\ fix\_height(\ node\_type\ *\ pNode\ )}
\DoxyCodeLine{01637\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01638\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pNode\ !=\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{01639\ \ \ \ \ \ \ \ \ \ \ \ \ node\_scoped\_lock\ l(\ m\_Monitor,\ *pNode\ );}
\DoxyCodeLine{01640\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ fix\_height\_locked(\ pNode\ );}
\DoxyCodeLine{01641\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01642\ }
\DoxyCodeLine{01643\ \ \ \ \ \ \ \ \ node\_type\ *\ fix\_height\_locked(\ node\_type\ *\ pNode\ )}
\DoxyCodeLine{01644\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01645\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ pNode\ must\ be\ locked!!!}}
\DoxyCodeLine{01646\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}\ =\ estimate\_node\_condition(\ pNode\ );}
\DoxyCodeLine{01647\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}\ )\ \{}
\DoxyCodeLine{01648\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ rebalance\_required:}
\DoxyCodeLine{01649\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ unlink\_required:}
\DoxyCodeLine{01650\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode;}
\DoxyCodeLine{01651\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ nothing\_required:}
\DoxyCodeLine{01652\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01653\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01654\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_height(\ pNode,\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}},\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{01655\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}(\ pNode,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01656\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01657\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01658\ }
\DoxyCodeLine{01659\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ fix\_height\_and\_rebalance(\ node\_type\ *\ pNode,\ rcu\_disposer\&\ disp\ )}
\DoxyCodeLine{01660\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01661\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ pNode\ \&\&\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}(\ pNode,\ memory\_model::memory\_order\_acquire\ ))\ \{}
\DoxyCodeLine{01662\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ nCond\ =\ estimate\_node\_condition(\ pNode\ );}
\DoxyCodeLine{01663\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nCond\ ==\ nothing\_required\ ||\ pNode-\/>is\_unlinked(\ memory\_model::memory\_order\_acquire\ ))}
\DoxyCodeLine{01664\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01665\ }
\DoxyCodeLine{01666\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nCond\ !=\ unlink\_required\ \&\&\ nCond\ !=\ rebalance\_required\ )}
\DoxyCodeLine{01667\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pNode\ =\ fix\_height(\ pNode\ );}
\DoxyCodeLine{01668\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01669\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pParent\ =\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}(\ pNode,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01670\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pParent\ !=\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{01671\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01672\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_scoped\_lock\ lp(\ m\_Monitor,\ *pParent\ );}
\DoxyCodeLine{01673\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !pParent-\/>is\_unlinked(\ memory\_model::memory\_order\_relaxed\ )\ \&\&\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}(\ pNode,\ memory\_model::memory\_order\_acquire\ )\ ==\ pParent\ )\ \{}
\DoxyCodeLine{01674\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_scoped\_lock\ ln(\ m\_Monitor,\ *pNode\ );}
\DoxyCodeLine{01675\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pNode\ =\ rebalance\_locked(\ pParent,\ pNode,\ disp\ );}
\DoxyCodeLine{01676\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01677\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01678\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01679\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01680\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01681\ }
\DoxyCodeLine{01682\ \ \ \ \ \ \ \ \ node\_type\ *\ rebalance\_locked(\ node\_type\ *\ pParent,\ node\_type\ *\ pNode,\ rcu\_disposer\&\ disp\ )}
\DoxyCodeLine{01683\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01684\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ pParent\ and\ pNode\ should\ be\ locked.}}
\DoxyCodeLine{01685\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Returns\ a\ damaged\ node,\ or\ nullptr\ if\ no\ more\ rebalancing\ is\ necessary}}
\DoxyCodeLine{01686\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}(\ pNode,\ memory\_model::memory\_order\_relaxed\ )\ ==\ pParent\ );}
\DoxyCodeLine{01687\ }
\DoxyCodeLine{01688\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pLeft\ =\ child(\ pNode,\ left\_child,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01689\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pRight\ =\ child(\ pNode,\ right\_child,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01690\ }
\DoxyCodeLine{01691\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (pLeft\ ==\ \textcolor{keyword}{nullptr}\ ||\ pRight\ ==\ \textcolor{keyword}{nullptr})\ \&\&\ !pNode-\/>is\_valued(\ memory\_model::memory\_order\_relaxed\ ))\ \{}
\DoxyCodeLine{01692\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ try\_unlink\_locked(\ pParent,\ pNode,\ disp\ ))}
\DoxyCodeLine{01693\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ fix\_height\_locked(\ pParent\ );}
\DoxyCodeLine{01694\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01695\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ retry\ needed\ for\ pNode}}
\DoxyCodeLine{01696\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode;}
\DoxyCodeLine{01697\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01698\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01699\ }
\DoxyCodeLine{01700\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ child(\ pParent,\ left\_child,\ memory\_model::memory\_order\_relaxed\ )\ ==\ pNode}
\DoxyCodeLine{01701\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ child(\ pParent,\ right\_child,\ memory\_model::memory\_order\_relaxed\ )\ ==\ pNode\ );}
\DoxyCodeLine{01702\ }
\DoxyCodeLine{01703\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a31d490b16f4b63c2afa4c7198ef2c31e}{height}}(\ pNode,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01704\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hL\ =\ height\_null(\ pLeft,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01705\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hR\ =\ height\_null(\ pRight,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01706\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hNew\ =\ 1\ +\ std::max(\ hL,\ hR\ );}
\DoxyCodeLine{01707\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ balance\ =\ hL\ -\/\ hR;}
\DoxyCodeLine{01708\ }
\DoxyCodeLine{01709\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ balance\ >\ 1\ )}
\DoxyCodeLine{01710\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rebalance\_to\_right\_locked(\ pParent,\ pNode,\ pLeft,\ hR\ );}
\DoxyCodeLine{01711\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ balance\ <\ -\/1\ )}
\DoxyCodeLine{01712\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rebalance\_to\_left\_locked(\ pParent,\ pNode,\ pRight,\ hL\ );}
\DoxyCodeLine{01713\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ hNew\ !=\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}\ )\ \{}
\DoxyCodeLine{01714\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_height(\ pNode,\ hNew,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{01715\ }
\DoxyCodeLine{01716\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ pParent\ is\ already\ locked}}
\DoxyCodeLine{01717\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ fix\_height\_locked(\ pParent\ );}
\DoxyCodeLine{01718\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01719\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01720\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01721\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01722\ }
\DoxyCodeLine{01723\ \ \ \ \ \ \ \ \ node\_type\ *\ rebalance\_to\_right\_locked(\ node\_type\ *\ pParent,\ node\_type\ *\ pNode,\ node\_type\ *\ pLeft,\ \textcolor{keywordtype}{int}\ hR\ )}
\DoxyCodeLine{01724\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01725\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}(\ pNode,\ memory\_model::memory\_order\_relaxed\ )\ ==\ pParent\ );}
\DoxyCodeLine{01726\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ child(\ pParent,\ left\_child,\ memory\_model::memory\_order\_relaxed\ )\ ==\ pNode}
\DoxyCodeLine{01727\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ child(\ pParent,\ right\_child,\ memory\_model::memory\_order\_relaxed\ )\ ==\ pNode\ );}
\DoxyCodeLine{01728\ }
\DoxyCodeLine{01729\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ pParent\ and\ pNode\ is\ locked\ yet}}
\DoxyCodeLine{01730\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ pNode-\/>pLeft\ is\ too\ large,\ we\ will\ rotate-\/right.}}
\DoxyCodeLine{01731\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ pLeft-\/>pRight\ is\ taller\ than\ pLeft-\/>pLeft,\ then\ we\ will\ first\ rotate-\/left\ pLeft.}}
\DoxyCodeLine{01732\ }
\DoxyCodeLine{01733\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pLeft\ !=\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{01734\ \ \ \ \ \ \ \ \ \ \ \ \ node\_scoped\_lock\ l(\ m\_Monitor,\ *pLeft\ );}
\DoxyCodeLine{01735\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>m\_pLeft.load(\ memory\_model::memory\_order\_relaxed\ )\ !=\ pLeft\ )}
\DoxyCodeLine{01736\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode;\ \textcolor{comment}{//\ retry\ for\ pNode}}
\DoxyCodeLine{01737\ }
\DoxyCodeLine{01738\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ check\_node\_ordering(\ pNode,\ pLeft\ )\ >\ 0\ );}
\DoxyCodeLine{01739\ }
\DoxyCodeLine{01740\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hL\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a31d490b16f4b63c2afa4c7198ef2c31e}{height}}(\ pLeft,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01741\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ hL\ -\/\ hR\ <=\ 1\ )}
\DoxyCodeLine{01742\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode;\ \textcolor{comment}{//\ retry}}
\DoxyCodeLine{01743\ }
\DoxyCodeLine{01744\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pLRight\ =\ child(\ pLeft,\ right\_child,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01745\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hLR\ =\ height\_null(\ pLRight,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01746\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pLLeft\ =\ child(\ pLeft,\ left\_child,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01747\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hLL\ =\ height\_null(\ pLLeft,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01748\ }
\DoxyCodeLine{01749\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pLRight\ )\ \{}
\DoxyCodeLine{01750\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01751\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_scoped\_lock\ lr(\ m\_Monitor,\ *pLRight\ );}
\DoxyCodeLine{01752\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pLeft-\/>m\_pRight.load(\ memory\_model::memory\_order\_acquire\ )\ !=\ pLRight\ )}
\DoxyCodeLine{01753\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode;\ \textcolor{comment}{//\ retry}}
\DoxyCodeLine{01754\ }
\DoxyCodeLine{01755\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ check\_node\_ordering(\ pLeft,\ pLRight\ )\ <\ 0\ );}
\DoxyCodeLine{01756\ }
\DoxyCodeLine{01757\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ hLR\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a31d490b16f4b63c2afa4c7198ef2c31e}{height}}(\ pLRight,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01758\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ hLL\ >\ hLR\ )}
\DoxyCodeLine{01759\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rotate\_right\_locked(\ pParent,\ pNode,\ pLeft,\ hR,\ hLL,\ pLRight,\ hLR\ );}
\DoxyCodeLine{01760\ }
\DoxyCodeLine{01761\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hLRL\ =\ height\_null(\ child(\ pLRight,\ left\_child,\ memory\_model::memory\_order\_relaxed\ ),\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01762\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ balance\ =\ hLL\ -\/\ hLRL;}
\DoxyCodeLine{01763\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ balance\ >=\ -\/1\ \&\&\ balance\ <=\ 1\ \&\&\ !(\ (\ hLL\ ==\ 0\ ||\ hLRL\ ==\ 0\ )\ \&\&\ !pLeft-\/>is\_valued(\ memory\_model::memory\_order\_relaxed\ )))\ \{}
\DoxyCodeLine{01764\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ nParent.child.left\ won't\ be\ damaged\ after\ a\ double\ rotation}}
\DoxyCodeLine{01765\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rotate\_right\_over\_left\_locked(\ pParent,\ pNode,\ pLeft,\ hR,\ hLL,\ pLRight,\ hLRL\ );}
\DoxyCodeLine{01766\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01767\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01768\ }
\DoxyCodeLine{01769\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ focus\ on\ pLeft,\ if\ necessary\ pNode\ will\ be\ balanced\ later}}
\DoxyCodeLine{01770\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rebalance\_to\_left\_locked(\ pNode,\ pLeft,\ pLRight,\ hLL\ );}
\DoxyCodeLine{01771\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01772\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ hLL\ >\ hLR\ )\ \{}
\DoxyCodeLine{01773\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ rotate\ right}}
\DoxyCodeLine{01774\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rotate\_right\_locked(\ pParent,\ pNode,\ pLeft,\ hR,\ hLL,\ pLRight,\ hLR\ );}
\DoxyCodeLine{01775\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01776\ }
\DoxyCodeLine{01777\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode;\ \textcolor{comment}{//\ retry}}
\DoxyCodeLine{01778\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01779\ }
\DoxyCodeLine{01780\ \ \ \ \ \ \ \ \ node\_type\ *\ rebalance\_to\_left\_locked(\ node\_type\ *\ pParent,\ node\_type\ *\ pNode,\ node\_type\ *\ pRight,\ \textcolor{keywordtype}{int}\ hL\ )}
\DoxyCodeLine{01781\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01782\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}(\ pNode,\ memory\_model::memory\_order\_relaxed\ )\ ==\ pParent\ );}
\DoxyCodeLine{01783\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ child(\ pParent,\ left\_child,\ memory\_model::memory\_order\_relaxed\ )\ ==\ pNode}
\DoxyCodeLine{01784\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ child(\ pParent,\ right\_child,\ memory\_model::memory\_order\_relaxed\ )\ ==\ pNode\ );}
\DoxyCodeLine{01785\ }
\DoxyCodeLine{01786\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ pParent\ and\ pNode\ is\ locked\ yet}}
\DoxyCodeLine{01787\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pRight\ !=\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{01788\ \ \ \ \ \ \ \ \ \ \ \ \ node\_scoped\_lock\ l(\ m\_Monitor,\ *pRight\ );}
\DoxyCodeLine{01789\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pNode-\/>m\_pRight.load(\ memory\_model::memory\_order\_relaxed\ )\ !=\ pRight\ )}
\DoxyCodeLine{01790\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode;\ \textcolor{comment}{//\ retry\ for\ pNode}}
\DoxyCodeLine{01791\ }
\DoxyCodeLine{01792\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ check\_node\_ordering(\ pNode,\ pRight\ )\ <\ 0\ );}
\DoxyCodeLine{01793\ }
\DoxyCodeLine{01794\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hR\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a31d490b16f4b63c2afa4c7198ef2c31e}{height}}(\ pRight,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01795\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ hL\ -\/\ hR\ >=\ -\/1\ )}
\DoxyCodeLine{01796\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode;\ \textcolor{comment}{//\ retry}}
\DoxyCodeLine{01797\ }
\DoxyCodeLine{01798\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pRLeft\ =\ child(\ pRight,\ left\_child,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01799\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hRL\ =\ height\_null(\ pRLeft,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01800\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pRRight\ =\ child(\ pRight,\ right\_child,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01801\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hRR\ =\ height\_null(\ pRRight,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01802\ }
\DoxyCodeLine{01803\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pRLeft\ )\ \{}
\DoxyCodeLine{01804\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01805\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_scoped\_lock\ lrl(\ m\_Monitor,\ *pRLeft\ );}
\DoxyCodeLine{01806\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pRight-\/>m\_pLeft.load(\ memory\_model::memory\_order\_acquire\ )\ !=\ pRLeft\ )}
\DoxyCodeLine{01807\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode;\ \textcolor{comment}{//\ retry}}
\DoxyCodeLine{01808\ }
\DoxyCodeLine{01809\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ check\_node\_ordering(\ pRight,\ pRLeft\ )\ >\ 0\ );}
\DoxyCodeLine{01810\ }
\DoxyCodeLine{01811\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ hRL\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a31d490b16f4b63c2afa4c7198ef2c31e}{height}}(\ pRLeft,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01812\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ hRR\ >=\ hRL\ )}
\DoxyCodeLine{01813\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rotate\_left\_locked(\ pParent,\ pNode,\ hL,\ pRight,\ pRLeft,\ hRL,\ hRR\ );}
\DoxyCodeLine{01814\ }
\DoxyCodeLine{01815\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pRLRight\ =\ child(\ pRLeft,\ right\_child,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01816\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hRLR\ =\ height\_null(\ pRLRight,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01817\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ balance\ =\ hRR\ -\/\ hRLR;}
\DoxyCodeLine{01818\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ balance\ >=\ -\/1\ \&\&\ balance\ <=\ 1\ \&\&\ !(\ (\ hRR\ ==\ 0\ ||\ hRLR\ ==\ 0\ )\ \&\&\ !pRight-\/>is\_valued(\ memory\_model::memory\_order\_relaxed\ )))}
\DoxyCodeLine{01819\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rotate\_left\_over\_right\_locked(\ pParent,\ pNode,\ hL,\ pRight,\ pRLeft,\ hRR,\ hRLR\ );}
\DoxyCodeLine{01820\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01821\ }
\DoxyCodeLine{01822\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rebalance\_to\_right\_locked(\ pNode,\ pRight,\ pRLeft,\ hRR\ );}
\DoxyCodeLine{01823\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01824\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ hRR\ >\ hRL\ )}
\DoxyCodeLine{01825\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rotate\_left\_locked(\ pParent,\ pNode,\ hL,\ pRight,\ pRLeft,\ hRL,\ hRR\ );}
\DoxyCodeLine{01826\ }
\DoxyCodeLine{01827\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode;\ \ \ \textcolor{comment}{//\ retry}}
\DoxyCodeLine{01828\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01829\ }
\DoxyCodeLine{01830\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ begin\_change(\ node\_type\ *\ pNode,\ version\_type\ version\ )}
\DoxyCodeLine{01831\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01832\ \ \ \ \ \ \ \ \ \ \ \ \ assert(pNode-\/>version(memory\_model::memory\_order\_acquire)\ ==\ version\ );}
\DoxyCodeLine{01833\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ (version\ \&\ node\_type::shrinking)\ ==\ 0\ );}
\DoxyCodeLine{01834\ \ \ \ \ \ \ \ \ \ \ \ \ pNode-\/>exchange\_version(\ version\ |\ node\_type::shrinking,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{01835\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01836\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ end\_change(\ node\_type\ *\ pNode,\ version\_type\ version\ )}
\DoxyCodeLine{01837\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01838\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Clear\ shrinking\ and\ unlinked\ flags\ and\ increment\ version}}
\DoxyCodeLine{01839\ \ \ \ \ \ \ \ \ \ \ \ \ pNode-\/>version(\ (version\ |\ node\_type::version\_flags)\ +\ 1,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{01840\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01841\ }
\DoxyCodeLine{01842\ \ \ \ \ \ \ \ \ node\_type\ *\ rotate\_right\_locked(\ node\_type\ *\ pParent,\ node\_type\ *\ pNode,\ node\_type\ *\ pLeft,\ \textcolor{keywordtype}{int}\ hR,\ \textcolor{keywordtype}{int}\ hLL,\ node\_type\ *\ pLRight,\ \textcolor{keywordtype}{int}\ hLR\ )}
\DoxyCodeLine{01843\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01844\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerml_1_1internal_a6d7c4a28fe342251dc983cb357a36506}{version\_type}}\ nodeVersion\ =\ pNode-\/>version(\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01845\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pParentLeft\ =\ child(\ pParent,\ left\_child,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01846\ }
\DoxyCodeLine{01847\ \ \ \ \ \ \ \ \ \ \ \ \ begin\_change(\ pNode,\ nodeVersion\ );}
\DoxyCodeLine{01848\ }
\DoxyCodeLine{01849\ \ \ \ \ \ \ \ \ \ \ \ \ pNode-\/>m\_pLeft.store(\ pLRight,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{01850\ }
\DoxyCodeLine{01851\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pLRight\ !=\ \textcolor{keyword}{nullptr}\ )\ \{}
\DoxyCodeLine{01852\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{01853\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pLRight-\/>m\_pParent\ );}
\DoxyCodeLine{01854\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pLRight-\/>parent(\ pNode,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01855\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ check\_node\_ordering(\ pNode,\ pLRight\ )\ >\ 0\ );}
\DoxyCodeLine{01856\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01857\ }
\DoxyCodeLine{01858\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{01859\ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pLeft-\/>m\_pRight\ );}
\DoxyCodeLine{01860\ \ \ \ \ \ \ \ \ \ \ \ \ pLeft-\/>m\_pRight.store(\ pNode,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01861\ }
\DoxyCodeLine{01862\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{01863\ }
\DoxyCodeLine{01864\ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pNode-\/>m\_pParent\ );}
\DoxyCodeLine{01865\ \ \ \ \ \ \ \ \ \ \ \ \ pNode-\/>parent(\ pLeft,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01866\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ check\_node\_ordering(\ pLeft,\ pNode\ )\ <\ 0\ );}
\DoxyCodeLine{01867\ }
\DoxyCodeLine{01868\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{01869\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pParentLeft\ ==\ pNode\ )\ \{}
\DoxyCodeLine{01870\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pParent-\/>m\_pLeft\ );}
\DoxyCodeLine{01871\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pParent-\/>m\_pLeft.store(\ pLeft,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01872\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01873\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01874\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pParent-\/>m\_pRight.load(\ memory\_model::memory\_order\_relaxed\ )\ ==\ pNode\ );}
\DoxyCodeLine{01875\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pParent-\/>m\_pRight\ );}
\DoxyCodeLine{01876\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pParent-\/>m\_pRight.store(\ pLeft,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01877\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01878\ }
\DoxyCodeLine{01879\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{01880\ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pLeft-\/>m\_pParent\ );}
\DoxyCodeLine{01881\ \ \ \ \ \ \ \ \ \ \ \ \ pLeft-\/>parent(\ pParent,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01882\ }
\DoxyCodeLine{01883\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{01884\ }
\DoxyCodeLine{01885\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ fix\ up\ heights\ links}}
\DoxyCodeLine{01886\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hNode\ =\ 1\ +\ std::max(\ hLR,\ hR\ );}
\DoxyCodeLine{01887\ \ \ \ \ \ \ \ \ \ \ \ \ set\_height(\ pNode,\ hNode,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{01888\ \ \ \ \ \ \ \ \ \ \ \ \ set\_height(\ pLeft,\ 1\ +\ std::max(\ hLL,\ hNode\ ),\ memory\_model::memory\_order\_release);}
\DoxyCodeLine{01889\ }
\DoxyCodeLine{01890\ \ \ \ \ \ \ \ \ \ \ \ \ end\_change(\ pNode,\ nodeVersion\ );}
\DoxyCodeLine{01891\ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRotateRight();}
\DoxyCodeLine{01892\ }
\DoxyCodeLine{01893\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ have\ damaged\ pParent,\ pNode\ (now\ parent.child.right),\ and\ pLeft\ (now}}
\DoxyCodeLine{01894\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ parent.child).\ \ pNode\ is\ the\ deepest.\ \ Perform\ as\ many\ fixes\ as\ we\ can}}
\DoxyCodeLine{01895\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ with\ the\ locks\ we've\ got.}}
\DoxyCodeLine{01896\ }
\DoxyCodeLine{01897\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We've\ already\ fixed\ the\ height\ for\ pNode,\ but\ it\ might\ still\ be\ outside}}
\DoxyCodeLine{01898\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ our\ allowable\ balance\ range.\ \ In\ that\ case\ a\ simple\ fix\_height\_locked()}}
\DoxyCodeLine{01899\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ won't\ help.}}
\DoxyCodeLine{01900\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ nodeBalance\ =\ hLR\ -\/\ hR;}
\DoxyCodeLine{01901\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nodeBalance\ <\ -\/1\ ||\ nodeBalance\ >\ 1\ )\ \{}
\DoxyCodeLine{01902\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ need\ another\ rotation\ at\ pNode}}
\DoxyCodeLine{01903\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRotateAfterRightRotation();}
\DoxyCodeLine{01904\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode;}
\DoxyCodeLine{01905\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01906\ }
\DoxyCodeLine{01907\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we've\ fixed\ balance\ and\ height\ damage\ for\ pNode,\ now\ handle}}
\DoxyCodeLine{01908\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ extra-\/routing\ node\ damage}}
\DoxyCodeLine{01909\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (pLRight\ ==\ \textcolor{keyword}{nullptr}\ ||\ hR\ ==\ 0)\ \&\&\ !pNode-\/>is\_valued(memory\_model::memory\_order\_relaxed))\ \{}
\DoxyCodeLine{01910\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ need\ to\ remove\ pNode\ and\ then\ repair}}
\DoxyCodeLine{01911\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveAfterRightRotation();}
\DoxyCodeLine{01912\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode;}
\DoxyCodeLine{01913\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01914\ }
\DoxyCodeLine{01915\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we've\ already\ fixed\ the\ height\ at\ pLeft,\ do\ we\ need\ a\ rotation\ here?}}
\DoxyCodeLine{01916\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ leftBalance\ =\ hLL\ -\/\ hNode;}
\DoxyCodeLine{01917\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ leftBalance\ <\ -\/1\ ||\ leftBalance\ >\ 1\ )\ \{}
\DoxyCodeLine{01918\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRotateAfterRightRotation();}
\DoxyCodeLine{01919\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pLeft;}
\DoxyCodeLine{01920\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01921\ }
\DoxyCodeLine{01922\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ pLeft\ might\ also\ have\ routing\ node\ damage\ (if\ pLeft.left\ was\ null)}}
\DoxyCodeLine{01923\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ hLL\ ==\ 0\ \&\&\ !pLeft-\/>is\_valued(memory\_model::memory\_order\_acquire))\ \{}
\DoxyCodeLine{01924\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onDamageAfterRightRotation();}
\DoxyCodeLine{01925\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pLeft;}
\DoxyCodeLine{01926\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01927\ }
\DoxyCodeLine{01928\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ try\ to\ fix\ the\ parent\ height\ while\ we've\ still\ got\ the\ lock}}
\DoxyCodeLine{01929\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ fix\_height\_locked(\ pParent\ );}
\DoxyCodeLine{01930\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01931\ }
\DoxyCodeLine{01932\ \ \ \ \ \ \ \ \ node\_type\ *\ rotate\_left\_locked(\ node\_type\ *\ pParent,\ node\_type\ *\ pNode,\ \textcolor{keywordtype}{int}\ hL,\ node\_type\ *\ pRight,\ node\_type\ *\ pRLeft,\ \textcolor{keywordtype}{int}\ hRL,\ \textcolor{keywordtype}{int}\ hRR\ )}
\DoxyCodeLine{01933\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01934\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerml_1_1internal_a6d7c4a28fe342251dc983cb357a36506}{version\_type}}\ nodeVersion\ =\ pNode-\/>version(\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01935\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pParentLeft\ =\ child(\ pParent,\ left\_child,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01936\ }
\DoxyCodeLine{01937\ \ \ \ \ \ \ \ \ \ \ \ \ begin\_change(\ pNode,\ nodeVersion\ );}
\DoxyCodeLine{01938\ }
\DoxyCodeLine{01939\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ fix\ up\ pNode\ links,\ careful\ to\ be\ compatible\ with\ concurrent\ traversal\ for\ all\ but\ pNode}}
\DoxyCodeLine{01940\ \ \ \ \ \ \ \ \ \ \ \ \ pNode-\/>m\_pRight.store(\ pRLeft,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{01941\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pRLeft\ !=\ \textcolor{keyword}{nullptr}\ )\ \{}
\DoxyCodeLine{01942\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{01943\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pRLeft-\/>m\_pParent\ );}
\DoxyCodeLine{01944\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRLeft-\/>parent(\ pNode,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01945\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01946\ }
\DoxyCodeLine{01947\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{01948\ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pRight-\/>m\_pLeft\ );}
\DoxyCodeLine{01949\ \ \ \ \ \ \ \ \ \ \ \ \ pRight-\/>m\_pLeft.store(\ pNode,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01950\ }
\DoxyCodeLine{01951\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{01952\ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pNode-\/>m\_pParent\ );}
\DoxyCodeLine{01953\ \ \ \ \ \ \ \ \ \ \ \ \ pNode-\/>parent(\ pRight,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01954\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ check\_node\_ordering(\ pRight,\ pNode\ )\ >\ 0\ );}
\DoxyCodeLine{01955\ }
\DoxyCodeLine{01956\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{01957\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pParentLeft\ ==\ pNode\ )\ \{}
\DoxyCodeLine{01958\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pParent-\/>m\_pLeft\ );}
\DoxyCodeLine{01959\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pParent-\/>m\_pLeft.store(\ pRight,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01960\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01961\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01962\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pParent-\/>m\_pRight.load(\ memory\_model::memory\_order\_relaxed\ )\ ==\ pNode\ );}
\DoxyCodeLine{01963\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pParent-\/>m\_pRight\ );}
\DoxyCodeLine{01964\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pParent-\/>m\_pRight.store(\ pRight,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01965\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01966\ }
\DoxyCodeLine{01967\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{01968\ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pRight-\/>m\_pParent\ );}
\DoxyCodeLine{01969\ \ \ \ \ \ \ \ \ \ \ \ \ pRight-\/>parent(\ pParent,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{01970\ }
\DoxyCodeLine{01971\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{01972\ }
\DoxyCodeLine{01973\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ fix\ up\ heights}}
\DoxyCodeLine{01974\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hNode\ =\ 1\ +\ std::max(\ hL,\ hRL\ );}
\DoxyCodeLine{01975\ \ \ \ \ \ \ \ \ \ \ \ \ set\_height(\ pNode,\ hNode,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{01976\ \ \ \ \ \ \ \ \ \ \ \ \ set\_height(\ pRight,\ 1\ +\ std::max(\ hNode,\ hRR\ ),\ memory\_model::memory\_order\_release);}
\DoxyCodeLine{01977\ }
\DoxyCodeLine{01978\ \ \ \ \ \ \ \ \ \ \ \ \ end\_change(\ pNode,\ nodeVersion\ );}
\DoxyCodeLine{01979\ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRotateLeft();}
\DoxyCodeLine{01980\ }
\DoxyCodeLine{01981\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ nodeBalance\ =\ hRL\ -\/\ hL;}
\DoxyCodeLine{01982\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nodeBalance\ <\ -\/1\ ||\ nodeBalance\ >\ 1\ )\ \{}
\DoxyCodeLine{01983\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRotateAfterLeftRotation();}
\DoxyCodeLine{01984\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode;}
\DoxyCodeLine{01985\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01986\ }
\DoxyCodeLine{01987\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (pRLeft\ ==\ \textcolor{keyword}{nullptr}\ ||\ hL\ ==\ 0)\ \&\&\ !pNode-\/>is\_valued(memory\_model::memory\_order\_relaxed))\ \{}
\DoxyCodeLine{01988\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveAfterLeftRotation();}
\DoxyCodeLine{01989\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode;}
\DoxyCodeLine{01990\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01991\ }
\DoxyCodeLine{01992\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ rightBalance\ =\ hRR\ -\/\ hNode;}
\DoxyCodeLine{01993\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ rightBalance\ <\ -\/1\ ||\ rightBalance\ >\ 1\ )\ \{}
\DoxyCodeLine{01994\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRotateAfterLeftRotation();}
\DoxyCodeLine{01995\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pRight;}
\DoxyCodeLine{01996\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01997\ }
\DoxyCodeLine{01998\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ hRR\ ==\ 0\ \&\&\ !pRight-\/>is\_valued(memory\_model::memory\_order\_acquire))\ \{}
\DoxyCodeLine{01999\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onDamageAfterLeftRotation();}
\DoxyCodeLine{02000\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pRight;}
\DoxyCodeLine{02001\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02002\ }
\DoxyCodeLine{02003\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ fix\_height\_locked(\ pParent\ );}
\DoxyCodeLine{02004\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02005\ }
\DoxyCodeLine{02006\ \ \ \ \ \ \ \ \ node\_type\ *\ rotate\_right\_over\_left\_locked(\ node\_type\ *\ pParent,\ node\_type\ *\ pNode,\ node\_type\ *\ pLeft,\ \textcolor{keywordtype}{int}\ hR,\ \textcolor{keywordtype}{int}\ hLL,\ node\_type\ *\ pLRight,\ \textcolor{keywordtype}{int}\ hLRL\ )}
\DoxyCodeLine{02007\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02008\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerml_1_1internal_a6d7c4a28fe342251dc983cb357a36506}{version\_type}}\ nodeVersion\ =\ pNode-\/>version(\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02009\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerml_1_1internal_a6d7c4a28fe342251dc983cb357a36506}{version\_type}}\ leftVersion\ =\ pLeft-\/>version(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{02010\ }
\DoxyCodeLine{02011\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pPL\ =\ child(\ pParent,\ left\_child,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02012\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pLRL\ =\ child(\ pLRight,\ left\_child,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{02013\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pLRR\ =\ child(\ pLRight,\ right\_child,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{02014\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hLRR\ =\ height\_null(\ pLRR,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{02015\ }
\DoxyCodeLine{02016\ \ \ \ \ \ \ \ \ \ \ \ \ begin\_change(\ pNode,\ nodeVersion\ );}
\DoxyCodeLine{02017\ \ \ \ \ \ \ \ \ \ \ \ \ begin\_change(\ pLeft,\ leftVersion\ );}
\DoxyCodeLine{02018\ }
\DoxyCodeLine{02019\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ fix\ up\ pNode\ links,\ careful\ about\ the\ order!}}
\DoxyCodeLine{02020\ \ \ \ \ \ \ \ \ \ \ \ \ pNode-\/>m\_pLeft.store(\ pLRR,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{02021\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pLRR\ !=\ \textcolor{keyword}{nullptr}\ )\ \{}
\DoxyCodeLine{02022\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02023\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pLRR-\/>m\_pParent\ );}
\DoxyCodeLine{02024\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pLRR-\/>parent(\ pNode,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02025\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02026\ }
\DoxyCodeLine{02027\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02028\ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pLeft-\/>m\_pRight\ );}
\DoxyCodeLine{02029\ \ \ \ \ \ \ \ \ \ \ \ \ pLeft-\/>m\_pRight.store(\ pLRL,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02030\ }
\DoxyCodeLine{02031\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pLRL\ !=\ \textcolor{keyword}{nullptr}\ )\ \{}
\DoxyCodeLine{02032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pLRL-\/>m\_pParent\ );}
\DoxyCodeLine{02034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pLRL-\/>parent(\ pLeft,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02035\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02036\ }
\DoxyCodeLine{02037\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02038\ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pLRight-\/>m\_pLeft\ );}
\DoxyCodeLine{02039\ \ \ \ \ \ \ \ \ \ \ \ \ pLRight-\/>m\_pLeft.store(\ pLeft,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02040\ }
\DoxyCodeLine{02041\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02042\ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pLeft-\/>m\_pParent\ );}
\DoxyCodeLine{02043\ \ \ \ \ \ \ \ \ \ \ \ \ pLeft-\/>parent(\ pLRight,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02044\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ check\_node\_ordering(\ pLRight,\ pLeft\ )\ >\ 0\ );}
\DoxyCodeLine{02045\ }
\DoxyCodeLine{02046\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02047\ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pLRight-\/>m\_pRight\ );}
\DoxyCodeLine{02048\ \ \ \ \ \ \ \ \ \ \ \ \ pLRight-\/>m\_pRight.store(\ pNode,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02049\ }
\DoxyCodeLine{02050\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02051\ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pNode-\/>m\_pParent\ );}
\DoxyCodeLine{02052\ \ \ \ \ \ \ \ \ \ \ \ \ pNode-\/>parent(\ pLRight,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02053\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ check\_node\_ordering(\ pLRight,\ pNode\ )\ <\ 0\ );}
\DoxyCodeLine{02054\ }
\DoxyCodeLine{02055\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02056\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pPL\ ==\ pNode\ )\ \{}
\DoxyCodeLine{02057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pParent-\/>m\_pLeft\ );}
\DoxyCodeLine{02058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pParent-\/>m\_pLeft.store(\ pLRight,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02059\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02060\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ child(\ pParent,\ right\_child,\ memory\_model::memory\_order\_relaxed\ )\ ==\ pNode\ );}
\DoxyCodeLine{02062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pParent-\/>m\_pRight\ );}
\DoxyCodeLine{02063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pParent-\/>m\_pRight.store(\ pLRight,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02064\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02065\ }
\DoxyCodeLine{02066\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02067\ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pLRight-\/>m\_pParent\ );}
\DoxyCodeLine{02068\ \ \ \ \ \ \ \ \ \ \ \ \ pLRight-\/>parent(\ pParent,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02069\ }
\DoxyCodeLine{02070\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02071\ }
\DoxyCodeLine{02072\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ fix\ up\ heights}}
\DoxyCodeLine{02073\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hNode\ =\ 1\ +\ std::max(\ hLRR,\ hR\ );}
\DoxyCodeLine{02074\ \ \ \ \ \ \ \ \ \ \ \ \ set\_height(\ pNode,\ hNode,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{02075\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hLeft\ =\ 1\ +\ std::max(\ hLL,\ hLRL\ );}
\DoxyCodeLine{02076\ \ \ \ \ \ \ \ \ \ \ \ \ set\_height(\ pLeft,\ hLeft,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{02077\ \ \ \ \ \ \ \ \ \ \ \ \ set\_height(\ pLRight,\ 1\ +\ std::max(\ hLeft,\ hNode\ ),\ memory\_model::memory\_order\_release);}
\DoxyCodeLine{02078\ }
\DoxyCodeLine{02079\ \ \ \ \ \ \ \ \ \ \ \ \ end\_change(\ pNode,\ nodeVersion\ );}
\DoxyCodeLine{02080\ \ \ \ \ \ \ \ \ \ \ \ \ end\_change(\ pLeft,\ leftVersion\ );}
\DoxyCodeLine{02081\ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRotateRightOverLeft();}
\DoxyCodeLine{02082\ }
\DoxyCodeLine{02083\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ caller\ should\ have\ performed\ only\ a\ single\ rotation\ if\ pLeft\ was\ going}}
\DoxyCodeLine{02084\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ to\ end\ up\ damaged}}
\DoxyCodeLine{02085\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ hLL\ -\/\ hLRL\ <=\ 1\ \&\&\ hLRL\ -\/\ hLL\ <=\ 1\ );}
\DoxyCodeLine{02086\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ !((hLL\ ==\ 0\ ||\ pLRL\ ==\ \textcolor{keyword}{nullptr})\ \&\&\ !pLeft-\/>is\_valued(\ memory\_model::memory\_order\_acquire\ )));}
\DoxyCodeLine{02087\ }
\DoxyCodeLine{02088\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ have\ damaged\ pParent,\ pLR\ (now\ parent.child),\ and\ pNode\ (now}}
\DoxyCodeLine{02089\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ parent.child.right).\ \ pNode\ is\ the\ deepest.\ \ Perform\ as\ many\ fixes\ as\ we}}
\DoxyCodeLine{02090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ can\ with\ the\ locks\ we've\ got.}}
\DoxyCodeLine{02091\ }
\DoxyCodeLine{02092\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We've\ already\ fixed\ the\ height\ for\ pNode,\ but\ it\ might\ still\ be\ outside}}
\DoxyCodeLine{02093\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ our\ allowable\ balance\ range.\ \ In\ that\ case\ a\ simple\ fix\_height\_locked()}}
\DoxyCodeLine{02094\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ won't\ help.}}
\DoxyCodeLine{02095\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ nodeBalance\ =\ hLRR\ -\/\ hR;}
\DoxyCodeLine{02096\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nodeBalance\ <\ -\/1\ ||\ nodeBalance\ >\ 1\ )\ \{}
\DoxyCodeLine{02097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ need\ another\ rotation\ at\ pNode}}
\DoxyCodeLine{02098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRotateAfterRLRotation();}
\DoxyCodeLine{02099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode;}
\DoxyCodeLine{02100\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02101\ }
\DoxyCodeLine{02102\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ pNode\ might\ also\ be\ damaged\ by\ being\ an\ unnecessary\ routing\ node}}
\DoxyCodeLine{02103\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (pLRR\ ==\ \textcolor{keyword}{nullptr}\ ||\ hR\ ==\ 0)\ \&\&\ !pNode-\/>is\_valued(\ memory\_model::memory\_order\_relaxed\ ))\ \{}
\DoxyCodeLine{02104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ repair\ involves\ splicing\ out\ pNode\ and\ maybe\ more\ rotations}}
\DoxyCodeLine{02105\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveAfterRLRotation();}
\DoxyCodeLine{02106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode;}
\DoxyCodeLine{02107\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02108\ }
\DoxyCodeLine{02109\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we've\ already\ fixed\ the\ height\ at\ pLRight,\ do\ we\ need\ a\ rotation\ here?}}
\DoxyCodeLine{02110\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ balanceLR\ =\ hLeft\ -\/\ hNode;}
\DoxyCodeLine{02111\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ balanceLR\ <\ -\/1\ ||\ balanceLR\ >\ 1\ )\ \{}
\DoxyCodeLine{02112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRotateAfterRLRotation();}
\DoxyCodeLine{02113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pLRight;}
\DoxyCodeLine{02114\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02115\ }
\DoxyCodeLine{02116\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ try\ to\ fix\ the\ parent\ height\ while\ we've\ still\ got\ the\ lock}}
\DoxyCodeLine{02117\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ fix\_height\_locked(\ pParent\ );}
\DoxyCodeLine{02118\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02119\ }
\DoxyCodeLine{02120\ \ \ \ \ \ \ \ \ node\_type\ *\ rotate\_left\_over\_right\_locked(\ node\_type\ *\ pParent,\ node\_type\ *\ pNode,\ \textcolor{keywordtype}{int}\ hL,\ node\_type\ *\ pRight,\ node\_type\ *\ pRLeft,\ \textcolor{keywordtype}{int}\ hRR,\ \textcolor{keywordtype}{int}\ hRLR\ )}
\DoxyCodeLine{02121\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02122\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerml_1_1internal_a6d7c4a28fe342251dc983cb357a36506}{version\_type}}\ nodeVersion\ =\ pNode-\/>version(\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02123\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerml_1_1internal_a6d7c4a28fe342251dc983cb357a36506}{version\_type}}\ rightVersion\ =\ pRight-\/>version(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{02124\ }
\DoxyCodeLine{02125\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pPL\ =\ child(\ pParent,\ left\_child,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02126\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pRLL\ =\ child(\ pRLeft,\ left\_child,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{02127\ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pRLR\ =\ child(\ pRLeft,\ right\_child,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{02128\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hRLL\ =\ height\_null(\ pRLL,\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{02129\ }
\DoxyCodeLine{02130\ \ \ \ \ \ \ \ \ \ \ \ \ begin\_change(\ pNode,\ nodeVersion\ );}
\DoxyCodeLine{02131\ \ \ \ \ \ \ \ \ \ \ \ \ begin\_change(\ pRight,\ rightVersion\ );}
\DoxyCodeLine{02132\ }
\DoxyCodeLine{02133\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ fix\ up\ pNode\ links,\ careful\ about\ the\ order!}}
\DoxyCodeLine{02134\ \ \ \ \ \ \ \ \ \ \ \ \ pNode-\/>m\_pRight.store(\ pRLL,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{02135\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pRLL\ !=\ \textcolor{keyword}{nullptr}\ )\ \{}
\DoxyCodeLine{02136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pRLL-\/>m\_pParent\ );}
\DoxyCodeLine{02138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRLL-\/>parent(\ pNode,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02139\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02140\ }
\DoxyCodeLine{02141\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02142\ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pRight-\/>m\_pLeft\ );}
\DoxyCodeLine{02143\ \ \ \ \ \ \ \ \ \ \ \ \ pRight-\/>m\_pLeft.store(\ pRLR,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02144\ }
\DoxyCodeLine{02145\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pRLR\ !=\ \textcolor{keyword}{nullptr}\ )\ \{}
\DoxyCodeLine{02146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pRLR-\/>m\_pParent\ );}
\DoxyCodeLine{02148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRLR-\/>parent(\ pRight,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02149\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02150\ }
\DoxyCodeLine{02151\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02152\ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pRLeft-\/>m\_pRight\ );}
\DoxyCodeLine{02153\ \ \ \ \ \ \ \ \ \ \ \ \ pRLeft-\/>m\_pRight.store(\ pRight,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02154\ }
\DoxyCodeLine{02155\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02156\ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pRight-\/>m\_pParent\ );}
\DoxyCodeLine{02157\ \ \ \ \ \ \ \ \ \ \ \ \ pRight-\/>parent(\ pRLeft,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02158\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ check\_node\_ordering(\ pRLeft,\ pRight\ )\ <\ 0\ );}
\DoxyCodeLine{02159\ }
\DoxyCodeLine{02160\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02161\ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pRLeft-\/>m\_pLeft\ );}
\DoxyCodeLine{02162\ \ \ \ \ \ \ \ \ \ \ \ \ pRLeft-\/>m\_pLeft.store(\ pNode,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02163\ }
\DoxyCodeLine{02164\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02165\ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pNode-\/>m\_pParent\ );}
\DoxyCodeLine{02166\ \ \ \ \ \ \ \ \ \ \ \ \ pNode-\/>parent(\ pRLeft,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02167\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ check\_node\_ordering(\ pRLeft,\ pNode\ )\ >\ 0\ );}
\DoxyCodeLine{02168\ }
\DoxyCodeLine{02169\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02170\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pPL\ ==\ pNode\ )\ \{}
\DoxyCodeLine{02171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pParent-\/>m\_pLeft\ );}
\DoxyCodeLine{02172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pParent-\/>m\_pLeft.store(\ pRLeft,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02173\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02174\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pParent-\/>m\_pRight.load(\ memory\_model::memory\_order\_relaxed\ )\ ==\ pNode\ );}
\DoxyCodeLine{02176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pParent-\/>m\_pRight\ );}
\DoxyCodeLine{02177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pParent-\/>m\_pRight.store(\ pRLeft,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02178\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02179\ }
\DoxyCodeLine{02180\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02181\ \ \ \ \ \ \ \ \ \ \ \ \ CDS\_TSAN\_ANNOTATE\_HAPPENS\_BEFORE(\ \&pRLeft-\/>m\_pParent\ );}
\DoxyCodeLine{02182\ \ \ \ \ \ \ \ \ \ \ \ \ pRLeft-\/>parent(\ pParent,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{02183\ }
\DoxyCodeLine{02184\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic\_thread\_fence(\ memory\_model::memory\_order\_acq\_rel\ );}
\DoxyCodeLine{02185\ }
\DoxyCodeLine{02186\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ fix\ up\ heights}}
\DoxyCodeLine{02187\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hNode\ =\ 1\ +\ std::max(\ hL,\ hRLL\ );}
\DoxyCodeLine{02188\ \ \ \ \ \ \ \ \ \ \ \ \ set\_height(\ pNode,\ hNode,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{02189\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hRight\ =\ 1\ +\ std::max(\ hRLR,\ hRR\ );}
\DoxyCodeLine{02190\ \ \ \ \ \ \ \ \ \ \ \ \ set\_height(\ pRight,\ hRight,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{02191\ \ \ \ \ \ \ \ \ \ \ \ \ set\_height(\ pRLeft,\ 1\ +\ std::max(\ hNode,\ hRight\ ),\ memory\_model::memory\_order\_release);}
\DoxyCodeLine{02192\ }
\DoxyCodeLine{02193\ \ \ \ \ \ \ \ \ \ \ \ \ end\_change(\ pNode,\ nodeVersion\ );}
\DoxyCodeLine{02194\ \ \ \ \ \ \ \ \ \ \ \ \ end\_change(\ pRight,\ rightVersion\ );}
\DoxyCodeLine{02195\ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRotateLeftOverRight();}
\DoxyCodeLine{02196\ }
\DoxyCodeLine{02197\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ hRR\ -\/\ hRLR\ <=\ 1\ \&\&\ hRLR\ -\/\ hRR\ <=\ 1\ );}
\DoxyCodeLine{02198\ }
\DoxyCodeLine{02199\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ nodeBalance\ =\ hRLL\ -\/\ hL;}
\DoxyCodeLine{02200\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ nodeBalance\ <\ -\/1\ ||\ nodeBalance\ >\ 1\ )\ \{}
\DoxyCodeLine{02201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRotateAfterLRRotation();}
\DoxyCodeLine{02202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode;}
\DoxyCodeLine{02203\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02204\ }
\DoxyCodeLine{02205\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (pRLL\ ==\ \textcolor{keyword}{nullptr}\ ||\ hL\ ==\ 0)\ \&\&\ !pNode-\/>is\_valued(memory\_model::memory\_order\_relaxed))\ \{}
\DoxyCodeLine{02206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRemoveAfterLRRotation();}
\DoxyCodeLine{02207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pNode;}
\DoxyCodeLine{02208\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02209\ }
\DoxyCodeLine{02210\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ balRL\ =\ hRight\ -\/\ hNode;}
\DoxyCodeLine{02211\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ balRL\ <\ -\/1\ ||\ balRL\ >\ 1\ )\ \{}
\DoxyCodeLine{02212\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_stat.onRotateAfterLRRotation();}
\DoxyCodeLine{02213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pRLeft;}
\DoxyCodeLine{02214\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02215\ }
\DoxyCodeLine{02216\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ fix\_height\_locked(\ pParent\ );}
\DoxyCodeLine{02217\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02218\ }
\DoxyCodeLine{02219\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{02220\ \ \ \ \ \};}
\DoxyCodeLine{02221\ \}\}\ \textcolor{comment}{//\ namespace\ cds::container}}
\DoxyCodeLine{02222\ }
\DoxyCodeLine{02223\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \#ifndef\ CDSLIB\_CONTAINER\_IMPL\_BRONSON\_AVLTREE\_MAP\_RCU\_H}}

\end{DoxyCode}
