\doxysection{external/taskflow/3rd-\/party/ff/farm.hpp 文件参考}
\hypertarget{farm_8hpp}{}\label{farm_8hpp}\index{external/taskflow/3rd-\/party/ff/farm.hpp@{external/taskflow/3rd-\/party/ff/farm.hpp}}


Farm pattern  


{\ttfamily \#include $<$iosfwd$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
{\ttfamily \#include $<$algorithm$>$}\newline
{\ttfamily \#include $<$memory$>$}\newline
{\ttfamily \#include $<$ff/platforms/platform.\+h$>$}\newline
{\ttfamily \#include $<$ff/lb.\+hpp$>$}\newline
{\ttfamily \#include $<$ff/gt.\+hpp$>$}\newline
{\ttfamily \#include $<$ff/node.\+hpp$>$}\newline
{\ttfamily \#include $<$ff/multinode.\+hpp$>$}\newline
{\ttfamily \#include $<$ff/ordering\+\_\+policies.\+hpp$>$}\newline
{\ttfamily \#include $<$ff/all2all.\+hpp$>$}\newline
farm.\+hpp 的引用(Include)关系图\+:
% FIG 0
此图展示该文件被哪些文件直接或间接地引用了\+:
% FIG 1
\doxysubsubsection*{类}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classff_1_1ff__farm}{ff\+::ff\+\_\+farm}}
\begin{DoxyCompactList}\small\item\em The Farm skeleton, with Emitter ({\ttfamily \doxylink{classff_1_1ff__farm_a28b9c788ddcfcb6cdad0f5dfc2b46e80}{lb\+\_\+t}}) and Collector ({\ttfamily \doxylink{classff_1_1ff__farm_a6cfb8f61c59e30639b95479b466a81ba}{gt\+\_\+t}}). \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structff_1_1ff__farm_1_1ofarm__lb}{ff\+::ff\+\_\+farm\+::ofarm\+\_\+lb}}
\item 
struct \mbox{\hyperlink{structff_1_1ff__farm_1_1ofarm__gt}{ff\+::ff\+\_\+farm\+::ofarm\+\_\+gt}}
\end{DoxyCompactItemize}
\doxysubsubsection*{命名空间}
\begin{DoxyCompactItemize}
\item 
namespace \mbox{\hyperlink{namespaceff}{ff}}
\end{DoxyCompactItemize}
\doxysubsubsection*{函数}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{namespaceff_a7f7589d2b1d91f35218bad0cd1370fc4}{ff\+::optimize\+\_\+static}} (\mbox{\hyperlink{classff_1_1ff__farm}{ff\+\_\+farm}} \&, const \mbox{\hyperlink{structff_1_1_opt_level}{Opt\+Level}} \&)
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
Farm pattern 

It works on a stream of tasks. Workers are non-\/blocking threads not tasks. It is composed by\+: Emitter (E), Workers (W), Collector (C). They all are C++ objects. Overall, it has one (optional) input stream and one (optional) output stream. Emitter gets stream items (tasks, i.\+e. C++ objects) and disptach them to Workers (activating svc method). On svn return (or ff\+\_\+send\+\_\+out call), tasks are sent to Collector that gather them and output them in the output stream.

Dispatching policy can be configured in the Emitter. Gathering policy in the Collector.

In case of no output stream the Collector is usually not needed. Emitter should always exist, even with no input stream.

There exists several variants of the farm pattern, including

\begin{DoxyItemize}
\item Master-\/worker\+: no collector, tasks from Workers return to Emitter \item Ordering farm\+: default emitter and collector, tasks are gathered in the same order they are dispatched\end{DoxyItemize}
\begin{DoxyRefDesc}{待办事项}
\item[\mbox{\hyperlink{todo__todo000004}{待办事项}}]Includes classes at different levels. To be split sooner or later. High level farm function to be wrapped in a separate class. \end{DoxyRefDesc}
