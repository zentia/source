\doxysection{tf\+::cuda\+Stream\+Base\texorpdfstring{$<$}{<} Creator, Deleter \texorpdfstring{$>$}{>} 模板类 参考}
\hypertarget{classtf_1_1cuda_stream_base}{}\label{classtf_1_1cuda_stream_base}\index{tf::cudaStreamBase$<$ Creator, Deleter $>$@{tf::cudaStreamBase$<$ Creator, Deleter $>$}}


class to create a smart pointer wrapper for managing {\ttfamily cuda\+Stream\+\_\+t}  




{\ttfamily \#include $<$cuda\+\_\+stream.\+hpp$>$}



类 tf\+::cuda\+Stream\+Base\texorpdfstring{$<$}{<} Creator, Deleter \texorpdfstring{$>$}{>} 继承关系图\+:
% FIG 0


tf\+::cuda\+Stream\+Base\texorpdfstring{$<$}{<} Creator, Deleter \texorpdfstring{$>$}{>} 的协作图\+:
% FIG 1
\doxysubsubsection*{Public 类型}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{classtf_1_1cuda_stream_base_ac613c15c23d0dd05331532c6256533d1}{base\+\_\+type}} = std\+::unique\+\_\+ptr$<$std\+::remove\+\_\+pointer\+\_\+t$<$cuda\+Stream\+\_\+t$>$, Deleter$>$
\begin{DoxyCompactList}\small\item\em base type for the underlying unique pointer \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename... ArgsT$>$ }\\\mbox{\hyperlink{classtf_1_1cuda_stream_base_a53917d60c2fc050ecf15a30433a87f08}{cuda\+Stream\+Base}} (ArgsT \&\&... \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}})
\begin{DoxyCompactList}\small\item\em constructs a {\ttfamily \doxylink{namespacetf_af19c9b301dc0b0fe2a51a960fa427e83}{cuda\+Stream}} object by passing the given arguments to the stream creator \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtf_1_1cuda_stream_base_af91431fdc0b42ebb02b9d6a0ce3e01b6}{operator cuda\+Stream\+\_\+t}} () const noexcept
\begin{DoxyCompactList}\small\item\em implicit conversion to the underlying {\ttfamily cuda\+Stream\+\_\+t} object \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1cuda_stream_base_a08857ff2874cd5378e578822e2e96dd0}{synchronize}} () const
\begin{DoxyCompactList}\small\item\em synchronizes the associated stream \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1cuda_stream_base_a4ad9778fb045ebc9e9d87ca72c2cc772}{begin\+\_\+capture}} (cuda\+Stream\+Capture\+Mode \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}=cuda\+Stream\+Capture\+Mode\+Global) const
\begin{DoxyCompactList}\small\item\em begins graph capturing on the stream \end{DoxyCompactList}\item 
cuda\+Graph\+\_\+t \mbox{\hyperlink{classtf_1_1cuda_stream_base_a4c23849c994f6e797bb547f6229a55e3}{end\+\_\+capture}} () const
\begin{DoxyCompactList}\small\item\em ends graph capturing on the stream \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1cuda_stream_base_a54df1c74423c0476c0ca1f1798584def}{record}} (cuda\+Event\+\_\+t \mbox{\hyperlink{classevent}{event}}) const
\begin{DoxyCompactList}\small\item\em records an event on the stream \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1cuda_stream_base_a9c877b1346e66dcb18a898e649c254b3}{wait}} (cuda\+Event\+\_\+t \mbox{\hyperlink{classevent}{event}}) const
\begin{DoxyCompactList}\small\item\em waits on an event \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
\subsubsection*{template$<$typename Creator, typename Deleter$>$\newline
class tf\+::cuda\+Stream\+Base$<$ Creator, Deleter $>$}
class to create a smart pointer wrapper for managing {\ttfamily cuda\+Stream\+\_\+t} 


\begin{DoxyTemplParams}{模板参数}
{\em Creator} & functor to create the stream (used in constructor) \\
\hline
{\em Deleter} & functor to delete the stream (used in destructor)\\
\hline
\end{DoxyTemplParams}
The {\ttfamily \doxylink{namespacetf_af19c9b301dc0b0fe2a51a960fa427e83}{cuda\+Stream}} class encapsulates a {\ttfamily cuda\+Stream\+\_\+t} using {\ttfamily std\+::unique\+\_\+ptr}, ensuring that CUDA events are properly created and destroyed with a unique ownership. 

\doxysubsection{成员类型定义说明}
\Hypertarget{classtf_1_1cuda_stream_base_ac613c15c23d0dd05331532c6256533d1}\index{tf::cudaStreamBase$<$ Creator, Deleter $>$@{tf::cudaStreamBase$<$ Creator, Deleter $>$}!base\_type@{base\_type}}
\index{base\_type@{base\_type}!tf::cudaStreamBase$<$ Creator, Deleter $>$@{tf::cudaStreamBase$<$ Creator, Deleter $>$}}
\doxysubsubsection{\texorpdfstring{base\_type}{base\_type}}
{\footnotesize\ttfamily \label{classtf_1_1cuda_stream_base_ac613c15c23d0dd05331532c6256533d1} 
template$<$typename Creator, typename Deleter$>$ \\
using \mbox{\hyperlink{classtf_1_1cuda_stream_base}{tf\+::cuda\+Stream\+Base}}$<$ Creator, Deleter $>$\+::base\+\_\+type = std\+::unique\+\_\+ptr$<$std\+::remove\+\_\+pointer\+\_\+t$<$cuda\+Stream\+\_\+t$>$, Deleter$>$}



base type for the underlying unique pointer 

This alias provides a shorthand for the underlying {\ttfamily std\+::unique\+\_\+ptr} type that manages CUDA stream resources with an associated deleter. 

\doxysubsection{构造及析构函数说明}
\Hypertarget{classtf_1_1cuda_stream_base_a53917d60c2fc050ecf15a30433a87f08}\index{tf::cudaStreamBase$<$ Creator, Deleter $>$@{tf::cudaStreamBase$<$ Creator, Deleter $>$}!cudaStreamBase@{cudaStreamBase}}
\index{cudaStreamBase@{cudaStreamBase}!tf::cudaStreamBase$<$ Creator, Deleter $>$@{tf::cudaStreamBase$<$ Creator, Deleter $>$}}
\doxysubsubsection{\texorpdfstring{cudaStreamBase()}{cudaStreamBase()}}
{\footnotesize\ttfamily \label{classtf_1_1cuda_stream_base_a53917d60c2fc050ecf15a30433a87f08} 
template$<$typename Creator, typename Deleter$>$ \\
template$<$typename... ArgsT$>$ \\
\mbox{\hyperlink{classtf_1_1cuda_stream_base}{tf\+::cuda\+Stream\+Base}}$<$ Creator, Deleter $>$\+::cuda\+Stream\+Base (\begin{DoxyParamCaption}\item[{ArgsT \&\&...}]{args}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}



constructs a {\ttfamily \doxylink{namespacetf_af19c9b301dc0b0fe2a51a960fa427e83}{cuda\+Stream}} object by passing the given arguments to the stream creator 

Constructs a {\ttfamily \doxylink{namespacetf_af19c9b301dc0b0fe2a51a960fa427e83}{cuda\+Stream}} object by passing the given arguments to the stream creator


\begin{DoxyParams}{参数}
{\em args} & arguments to pass to the stream creator \\
\hline
\end{DoxyParams}


\doxysubsection{成员函数说明}
\Hypertarget{classtf_1_1cuda_stream_base_a4ad9778fb045ebc9e9d87ca72c2cc772}\index{tf::cudaStreamBase$<$ Creator, Deleter $>$@{tf::cudaStreamBase$<$ Creator, Deleter $>$}!begin\_capture@{begin\_capture}}
\index{begin\_capture@{begin\_capture}!tf::cudaStreamBase$<$ Creator, Deleter $>$@{tf::cudaStreamBase$<$ Creator, Deleter $>$}}
\doxysubsubsection{\texorpdfstring{begin\_capture()}{begin\_capture()}}
{\footnotesize\ttfamily \label{classtf_1_1cuda_stream_base_a4ad9778fb045ebc9e9d87ca72c2cc772} 
template$<$typename Creator, typename Deleter$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1cuda_stream_base}{tf\+::cuda\+Stream\+Base}}$<$ Creator, Deleter $>$\+::begin\+\_\+capture (\begin{DoxyParamCaption}\item[{cuda\+Stream\+Capture\+Mode}]{m}{ = {\ttfamily cudaStreamCaptureModeGlobal}}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



begins graph capturing on the stream 

When a stream is in capture mode, all operations pushed into the stream will not be executed, but will instead be captured into a graph, which will be returned via \doxylink{classtf_1_1cuda_stream_base_a4c23849c994f6e797bb547f6229a55e3}{cuda\+Stream\+::end\+\_\+capture}.

\doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} thread\textquotesingle{}s mode can be one of the following\+:
\begin{DoxyItemize}
\item {\ttfamily cuda\+Stream\+Capture\+Mode\+Global\+:} This is the default mode. If the local thread has an ongoing capture sequence that was not initiated with {\ttfamily cuda\+Stream\+Capture\+Mode\+Relaxed} at {\ttfamily cu\+Stream\+Begin\+Capture}, or if any other thread has a concurrent capture sequence initiated with {\ttfamily cuda\+Stream\+Capture\+Mode\+Global}, this thread is prohibited from potentially unsafe API calls.
\item {\ttfamily cuda\+Stream\+Capture\+Mode\+Thread\+Local\+:} If the local thread has an ongoing capture sequence not initiated with {\ttfamily cuda\+Stream\+Capture\+Mode\+Relaxed}, it is prohibited from potentially unsafe API calls. Concurrent capture sequences in other threads are ignored.
\item {\ttfamily cuda\+Stream\+Capture\+Mode\+Relaxed\+:} The local thread is not prohibited from potentially unsafe API calls. Note that the thread is still prohibited from API calls which necessarily conflict with stream capture, for example, attempting {\ttfamily cuda\+Event\+Query} on an event that was last recorded inside a capture sequence. 
\end{DoxyItemize}\Hypertarget{classtf_1_1cuda_stream_base_a4c23849c994f6e797bb547f6229a55e3}\index{tf::cudaStreamBase$<$ Creator, Deleter $>$@{tf::cudaStreamBase$<$ Creator, Deleter $>$}!end\_capture@{end\_capture}}
\index{end\_capture@{end\_capture}!tf::cudaStreamBase$<$ Creator, Deleter $>$@{tf::cudaStreamBase$<$ Creator, Deleter $>$}}
\doxysubsubsection{\texorpdfstring{end\_capture()}{end\_capture()}}
{\footnotesize\ttfamily \label{classtf_1_1cuda_stream_base_a4c23849c994f6e797bb547f6229a55e3} 
template$<$typename Creator, typename Deleter$>$ \\
cuda\+Graph\+\_\+t \mbox{\hyperlink{classtf_1_1cuda_stream_base}{tf\+::cuda\+Stream\+Base}}$<$ Creator, Deleter $>$\+::end\+\_\+capture (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



ends graph capturing on the stream 

Equivalently calling {\ttfamily cuda\+Stream\+End\+Capture} to end capture on stream and returning the captured graph. Capture must have been initiated on stream via a call to \doxylink{classtf_1_1cuda_stream_base_a4ad9778fb045ebc9e9d87ca72c2cc772}{cuda\+Stream\+::begin\+\_\+capture}. If capture was invalidated, due to a violation of the rules of stream capture, then a NULL graph will be returned. \Hypertarget{classtf_1_1cuda_stream_base_af91431fdc0b42ebb02b9d6a0ce3e01b6}\index{tf::cudaStreamBase$<$ Creator, Deleter $>$@{tf::cudaStreamBase$<$ Creator, Deleter $>$}!operator cudaStream\_t@{operator cudaStream\_t}}
\index{operator cudaStream\_t@{operator cudaStream\_t}!tf::cudaStreamBase$<$ Creator, Deleter $>$@{tf::cudaStreamBase$<$ Creator, Deleter $>$}}
\doxysubsubsection{\texorpdfstring{operator cudaStream\_t()}{operator cudaStream\_t()}}
{\footnotesize\ttfamily \label{classtf_1_1cuda_stream_base_af91431fdc0b42ebb02b9d6a0ce3e01b6} 
template$<$typename Creator, typename Deleter$>$ \\
\mbox{\hyperlink{classtf_1_1cuda_stream_base}{tf\+::cuda\+Stream\+Base}}$<$ Creator, Deleter $>$\+::operator cuda\+Stream\+\_\+t (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}



implicit conversion to the underlying {\ttfamily cuda\+Stream\+\_\+t} object 

Returns the underlying {\ttfamily cuda\+Stream\+\_\+t} object, equivalently calling base\+\_\+type\+::get(). \Hypertarget{classtf_1_1cuda_stream_base_a54df1c74423c0476c0ca1f1798584def}\index{tf::cudaStreamBase$<$ Creator, Deleter $>$@{tf::cudaStreamBase$<$ Creator, Deleter $>$}!record@{record}}
\index{record@{record}!tf::cudaStreamBase$<$ Creator, Deleter $>$@{tf::cudaStreamBase$<$ Creator, Deleter $>$}}
\doxysubsubsection{\texorpdfstring{record()}{record()}}
{\footnotesize\ttfamily \label{classtf_1_1cuda_stream_base_a54df1c74423c0476c0ca1f1798584def} 
template$<$typename Creator, typename Deleter$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1cuda_stream_base}{tf\+::cuda\+Stream\+Base}}$<$ Creator, Deleter $>$\+::record (\begin{DoxyParamCaption}\item[{cuda\+Event\+\_\+t}]{event}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



records an event on the stream 

Equivalently calling {\ttfamily cuda\+Event\+Record} to record an event on this stream, both of which must be on the same CUDA context. \Hypertarget{classtf_1_1cuda_stream_base_a08857ff2874cd5378e578822e2e96dd0}\index{tf::cudaStreamBase$<$ Creator, Deleter $>$@{tf::cudaStreamBase$<$ Creator, Deleter $>$}!synchronize@{synchronize}}
\index{synchronize@{synchronize}!tf::cudaStreamBase$<$ Creator, Deleter $>$@{tf::cudaStreamBase$<$ Creator, Deleter $>$}}
\doxysubsubsection{\texorpdfstring{synchronize()}{synchronize()}}
{\footnotesize\ttfamily \label{classtf_1_1cuda_stream_base_a08857ff2874cd5378e578822e2e96dd0} 
template$<$typename Creator, typename Deleter$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1cuda_stream_base}{tf\+::cuda\+Stream\+Base}}$<$ Creator, Deleter $>$\+::synchronize (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



synchronizes the associated stream 

Equivalently calling {\ttfamily cuda\+Stream\+Synchronize} to block until this stream has completed all operations. \Hypertarget{classtf_1_1cuda_stream_base_a9c877b1346e66dcb18a898e649c254b3}\index{tf::cudaStreamBase$<$ Creator, Deleter $>$@{tf::cudaStreamBase$<$ Creator, Deleter $>$}!wait@{wait}}
\index{wait@{wait}!tf::cudaStreamBase$<$ Creator, Deleter $>$@{tf::cudaStreamBase$<$ Creator, Deleter $>$}}
\doxysubsubsection{\texorpdfstring{wait()}{wait()}}
{\footnotesize\ttfamily \label{classtf_1_1cuda_stream_base_a9c877b1346e66dcb18a898e649c254b3} 
template$<$typename Creator, typename Deleter$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1cuda_stream_base}{tf\+::cuda\+Stream\+Base}}$<$ Creator, Deleter $>$\+::wait (\begin{DoxyParamCaption}\item[{cuda\+Event\+\_\+t}]{event}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



waits on an event 

Equivalently calling {\ttfamily cuda\+Stream\+Wait\+Event} to make all future work submitted to stream wait for all work captured in event. 

该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/taskflow/taskflow/cuda/\mbox{\hyperlink{cuda__stream_8hpp}{cuda\+\_\+stream.\+hpp}}\end{DoxyCompactItemize}
