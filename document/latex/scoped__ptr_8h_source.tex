\doxysection{scoped\+\_\+ptr.\+h}
\hypertarget{scoped__ptr_8h_source}{}\label{scoped__ptr_8h_source}\index{runtime/EASTL/include/EASTL/scoped\_ptr.h@{runtime/EASTL/include/EASTL/scoped\_ptr.h}}
\mbox{\hyperlink{scoped__ptr_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00002\ \textcolor{comment}{//\ Copyright\ (c)\ Electronic\ Arts\ Inc.\ All\ rights\ reserved.}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00007\ \textcolor{comment}{//\ ***\ Note\ ***}}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ ***\ This\ code\ is\ deprecated\ in\ favor\ of\ the\ C++11-\/conforming\ \ \ \ \ \ \ \ \ \ \ \ \ ***\ }}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ ***\ eastl::unique\_ptr\ template\ class\ found\ in\ <EASTL/unique\_ptr.h>\ \ \ \ \ \ \ ***\ }}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#ifndef\ EASTL\_SCOPED\_PTR\_H}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#define\ EASTL\_SCOPED\_PTR\_H}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{config_8h}{EASTL/internal/config.h}}>}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{smart__ptr_8h}{EASTL/internal/smart\_ptr.h}}>}\ \ \ \textcolor{comment}{//\ Defines\ smart\_ptr\_deleter}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <stddef.h>}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#if\ defined(EA\_PRAGMA\_ONCE\_SUPPORTED)}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ once\ }\textcolor{comment}{//\ Some\ compilers\ (e.g.\ VC++)\ benefit\ significantly\ from\ using\ this.\ We've\ measured\ 3-\/4\%\ build\ speed\ improvements\ in\ apps\ as\ a\ result.}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceeastl}{eastl}}}
\DoxyCodeLine{00028\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Deleter\ =\ smart\_ptr\_deleter<T>\ >\ }
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classeastl_1_1scoped__ptr_af28071dc0548f024a4381f6c8237be09}{scoped\_ptr}}}
\DoxyCodeLine{00057\ \ \ \ \ \{}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_af28071dc0548f024a4381f6c8237be09}{scoped\_ptr<T>}}\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a3352b63cec8a2914ae99dbc8161b2afa}{this\_type}};}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ Deleter\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a444035d776edb94ff2a66c1c98e6c878}{deleter\_type}};}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ T*\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a6045a11181aaa948089f9ebe6ce99e8e}{mpValue}};}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classeastl_1_1scoped__ptr_af28071dc0548f024a4381f6c8237be09}{scoped\_ptr}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_af28071dc0548f024a4381f6c8237be09}{scoped\_ptr}}\&);}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classeastl_1_1scoped__ptr_af28071dc0548f024a4381f6c8237be09}{scoped\_ptr}}\&\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a14b3817f8bd451bc70cbc07f20a2d796}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_af28071dc0548f024a4381f6c8237be09}{scoped\_ptr}}\&);}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classeastl_1_1scoped__ptr_af28071dc0548f024a4381f6c8237be09}{scoped\_ptr}}\&\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a9acd2548f6bee46678f145b2bf0586c7}{operator=}}(T*\ pValue);}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ T\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_ab1b839beac9f105c546b73506f82f5d3}{element\_type}};}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_accd856784a3756f23e6573f46fc20100}{scoped\_ptr}}(T*\ pValue\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a6045a11181aaa948089f9ebe6ce99e8e}{mpValue}}(pValue)\ \{\}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a0de623e69c9e224b49b2c48d7f0b295f}{\string~scoped\_ptr}}()}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ Deleter\ del;}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ del(\mbox{\hyperlink{classeastl_1_1scoped__ptr_a6045a11181aaa948089f9ebe6ce99e8e}{mpValue}});}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a9b7d9efa8747dc0054d3fb412995371f}{reset}}(T*\ pValue\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(pValue\ !=\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a6045a11181aaa948089f9ebe6ce99e8e}{mpValue}})}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Deleter\ del;}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ del(\mbox{\hyperlink{classeastl_1_1scoped__ptr_a6045a11181aaa948089f9ebe6ce99e8e}{mpValue}});}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a6045a11181aaa948089f9ebe6ce99e8e}{mpValue}}\ =\ pValue;}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ T*\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_ad5d800fe60ad4a744c54bd9169611269}{detach}}()}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ T*\ \textcolor{keyword}{const}\ pTemp\ =\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a6045a11181aaa948089f9ebe6ce99e8e}{mpValue}};}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a6045a11181aaa948089f9ebe6ce99e8e}{mpValue}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pTemp;}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a8d18a94b07722358609f17d57c6614d6}{swap}}(\mbox{\hyperlink{classeastl_1_1scoped__ptr_a3352b63cec8a2914ae99dbc8161b2afa}{this\_type}}\&\ scopedPtr)}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::swap(mpValue,\ scopedPtr.mpValue);\ //\ Not\ used\ so\ that\ we\ can\ reduce\ a\ dependency.}}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ T*\ \textcolor{keyword}{const}\ pValue\ \ \ =\ scopedPtr.\mbox{\hyperlink{classeastl_1_1scoped__ptr_a6045a11181aaa948089f9ebe6ce99e8e}{mpValue}};}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ scopedPtr.\mbox{\hyperlink{classeastl_1_1scoped__ptr_a6045a11181aaa948089f9ebe6ce99e8e}{mpValue}}\ =\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a6045a11181aaa948089f9ebe6ce99e8e}{mpValue}};}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a6045a11181aaa948089f9ebe6ce99e8e}{mpValue}}\ \ \ \ \ \ \ \ \ \ \ =\ pValue;}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structeastl_1_1add__lvalue__reference}{add\_lvalue\_reference<T>::type}}\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_aa2f54fffc2d722ec1418cf211d1cc642}{operator*}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00149\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ assert(mpValue);}}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\mbox{\hyperlink{classeastl_1_1scoped__ptr_a6045a11181aaa948089f9ebe6ce99e8e}{mpValue}};}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ T*\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_aec60c92d0eb61a8f9c2d124306fbf3d9}{operator-\/>}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00161\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ assert(mpValue);}}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a6045a11181aaa948089f9ebe6ce99e8e}{mpValue}};}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ T*\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a85eb360cd01705085269e3b40ce32021}{get}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00176\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a6045a11181aaa948089f9ebe6ce99e8e}{mpValue}};}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ T*\ (\mbox{\hyperlink{classeastl_1_1scoped__ptr_a3352b63cec8a2914ae99dbc8161b2afa}{this\_type}}::*\mbox{\hyperlink{classeastl_1_1scoped__ptr_a88581737eef1fa5a0f2f73e525b3a3db}{bool\_}})()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \textcolor{keyword}{operator}\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_a88581737eef1fa5a0f2f73e525b3a3db}{bool\_}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00192\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classeastl_1_1scoped__ptr_a6045a11181aaa948089f9ebe6ce99e8e}{mpValue}})}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \&\mbox{\hyperlink{classeastl_1_1scoped__ptr_a85eb360cd01705085269e3b40ce32021}{this\_type::get}};}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classeastl_1_1scoped__ptr_abe9e830509c9a314b9a0e483bf441d5d}{operator!}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00205\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{classeastl_1_1scoped__ptr_a6045a11181aaa948089f9ebe6ce99e8e}{mpValue}}\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \};\ \textcolor{comment}{//\ class\ scoped\_ptr}}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ D>}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keyword}{inline}\ T*\ \mbox{\hyperlink{namespaceeastl_a2d396992344e048e51e6fe283a807bc0}{get\_pointer}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classeastl_1_1scoped__ptr}{scoped\_ptr<T,\ D>}}\&\ scopedPtr)}
\DoxyCodeLine{00217\ \ \ \ \ \{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ scopedPtr.\mbox{\hyperlink{classeastl_1_1scoped__ptr_a85eb360cd01705085269e3b40ce32021}{get}}();}
\DoxyCodeLine{00219\ \ \ \ \ \}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ D>}
\DoxyCodeLine{00227\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceeastl_a98898432a5e178e354c5af6abeb58f8b}{swap}}(\mbox{\hyperlink{classeastl_1_1scoped__ptr}{scoped\_ptr<T,\ D>}}\&\ scopedPtr1,\ \mbox{\hyperlink{classeastl_1_1scoped__ptr}{scoped\_ptr<T,\ D>}}\&\ scopedPtr2)}
\DoxyCodeLine{00228\ \ \ \ \ \{}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ scopedPtr1.\mbox{\hyperlink{classeastl_1_1scoped__ptr_a8d18a94b07722358609f17d57c6614d6}{swap}}(scopedPtr2);}
\DoxyCodeLine{00230\ \ \ \ \ \}}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ D>}
\DoxyCodeLine{00237\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespaceeastl_a289733486746877431e53fcf9adbf633}{operator<}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classeastl_1_1scoped__ptr}{scoped\_ptr<T,\ D>}}\&\ scopedPtr1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classeastl_1_1scoped__ptr}{scoped\_ptr<T,\ D>}}\&\ scopedPtr2)}
\DoxyCodeLine{00238\ \ \ \ \ \{}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (scopedPtr1.\mbox{\hyperlink{classeastl_1_1scoped__ptr_a85eb360cd01705085269e3b40ce32021}{get}}()\ <\ scopedPtr2.\mbox{\hyperlink{classeastl_1_1scoped__ptr_a85eb360cd01705085269e3b40ce32021}{get}}());\ \textcolor{comment}{//\ Alternatively\ use:\ std::less<T*>(scopedPtr1.get(),\ scopedPtr2.get());}}
\DoxyCodeLine{00240\ \ \ \ \ \}}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \}\ \textcolor{comment}{//\ namespace\ eastl}}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ Header\ include\ guard}}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ }

\end{DoxyCode}
