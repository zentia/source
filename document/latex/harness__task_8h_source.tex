\doxysection{harness\+\_\+task.\+h}
\hypertarget{harness__task_8h_source}{}\label{harness__task_8h_source}\index{external/taskflow/3rd-\/party/tbb/src/test/harness\_task.h@{external/taskflow/3rd-\/party/tbb/src/test/harness\_task.h}}
\mbox{\hyperlink{harness__task_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{task_8h}{tbb/task.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{harness_8h}{harness.h}}"{}}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00021\ tbb::task*\ \mbox{\hyperlink{harness__task_8h_ac6e8d864442457eb873ca20f45458251}{GetTaskPtr}}(\ \textcolor{keywordtype}{int}\&\ \mbox{\hyperlink{events_8c_ac6c464b0a83a481fee26175f6229c5cc}{counter}}\ )\ \{}
\DoxyCodeLine{00022\ \ \ \ \ ++\mbox{\hyperlink{events_8c_ac6c464b0a83a481fee26175f6229c5cc}{counter}};}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00024\ \}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_task_generator_adcd198e2a44a7723634af78a1ab2521b}{TaskGenerator}}:\ \textcolor{keyword}{public}\ tbb::task\ \{}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_task_generator_aa80fc2108fbc762862bc7df9c0b354ea}{m\_ChildCount}};}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_task_generator_a32a86c5ad607d961d4b59339f18f972d}{m\_Depth}};}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00031\ \ \ \ \ \mbox{\hyperlink{class_task_generator_adcd198e2a44a7723634af78a1ab2521b}{TaskGenerator}}(\ \textcolor{keywordtype}{int}\ child\_count,\ \textcolor{keywordtype}{int}\ \_depth\ )\ :\ \mbox{\hyperlink{class_task_generator_aa80fc2108fbc762862bc7df9c0b354ea}{m\_ChildCount}}(child\_count),\ \mbox{\hyperlink{class_task_generator_a32a86c5ad607d961d4b59339f18f972d}{m\_Depth}}(\_depth)\ \{\}}
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{class_task_generator_a5a7e2e17ebe27248d5bac03e45c6d01c}{\string~TaskGenerator}}(\ )\ \{\ \mbox{\hyperlink{class_task_generator_aa80fc2108fbc762862bc7df9c0b354ea}{m\_ChildCount}}\ =\ \mbox{\hyperlink{class_task_generator_a32a86c5ad607d961d4b59339f18f972d}{m\_Depth}}\ =\ -\/125;\ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ tbb::task*\ \mbox{\hyperlink{class_task_generator_aa2060fe960755a2ddf7f745c11185ed8}{execute}}()\ \_\_TBB\_override\ \{}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{class_task_generator_aa80fc2108fbc762862bc7df9c0b354ea}{m\_ChildCount}}>=0\ \&\&\ \mbox{\hyperlink{class_task_generator_a32a86c5ad607d961d4b59339f18f972d}{m\_Depth}}>=0,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{class_task_generator_a32a86c5ad607d961d4b59339f18f972d}{m\_Depth}}>0\ )\ \{}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ recycle\_as\_safe\_continuation();}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ set\_ref\_count(\ \mbox{\hyperlink{class_task_generator_aa80fc2108fbc762862bc7df9c0b354ea}{m\_ChildCount}}+1\ );}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ k=0;}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}=0;\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}<\mbox{\hyperlink{class_task_generator_aa80fc2108fbc762862bc7df9c0b354ea}{m\_ChildCount}};\ ++\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}\ )\ \{}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tbb::task\&\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ *\textcolor{keyword}{new}(\ allocate\_child()\ )\ \mbox{\hyperlink{class_task_generator_adcd198e2a44a7723634af78a1ab2521b}{TaskGenerator}}(\mbox{\hyperlink{class_task_generator_aa80fc2108fbc762862bc7df9c0b354ea}{m\_ChildCount}}/2,\mbox{\hyperlink{class_task_generator_a32a86c5ad607d961d4b59339f18f972d}{m\_Depth}}-\/1);}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__task_8h_ac6e8d864442457eb873ca20f45458251}{GetTaskPtr}}(k)-\/>spawn(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}});}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(k==\mbox{\hyperlink{class_task_generator_aa80fc2108fbc762862bc7df9c0b354ea}{m\_ChildCount}},\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/\mbox{\hyperlink{class_task_generator_a32a86c5ad607d961d4b59339f18f972d}{m\_Depth}};}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ibm__aix51_8h_a2b17e6e4504bddf60a920f609fc46ea6}{\_\_TBB\_Yield}}();}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ state()==recycle\ \&\&\ ref\_count()>0,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00050\ \ \ \ \ \}}
\DoxyCodeLine{00051\ \};}

\end{DoxyCode}
