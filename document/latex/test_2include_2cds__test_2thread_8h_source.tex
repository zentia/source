\doxysection{thread.\+h}
\hypertarget{test_2include_2cds__test_2thread_8h_source}{}\label{test_2include_2cds__test_2thread_8h_source}\index{external/libcds/test/include/cds\_test/thread.h@{external/libcds/test/include/cds\_test/thread.h}}
\mbox{\hyperlink{test_2include_2cds__test_2thread_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ (c)\ 2006-\/2018\ Maxim\ Khizhinsky}}
\DoxyCodeLine{00002\ \textcolor{comment}{//}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ Distributed\ under\ the\ Boost\ Software\ License,\ Version\ 1.0.\ (See\ accompanying}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ file\ LICENSE\ or\ copy\ at\ http://www.boost.org/LICENSE\_1\_0.txt)}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#ifndef\ CDSTEST\_THREAD\_H}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#define\ CDSTEST\_THREAD\_H}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{ext__gtest_8h}{cds\_test/ext\_gtest.h}}>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <thread>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <condition\_variable>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <mutex>}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <chrono>}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{model_8h}{cds/threading/model.h}}>}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{hp_8h}{cds/gc/hp.h}}>}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds__test}{cds\_test}}\ \{}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{comment}{//\ Forwards}}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcds__test_1_1thread}{thread}};}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcds__test_1_1thread__pool}{thread\_pool}};}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{comment}{//\ Test\ thread}}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcds__test_1_1thread_a500fe48010a5e92a7206855ac45cdf54}{thread}}}
\DoxyCodeLine{00026\ \ \ \ \ \{}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds__test_1_1thread_a46092db7916c38eafa1bcaf52ad4ce07}{run}}();}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keyword}{protected}:\ \textcolor{comment}{//\ thread\_pool\ interface}}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread_a500fe48010a5e92a7206855ac45cdf54}{thread}}(\ \mbox{\hyperlink{classcds__test_1_1thread_a500fe48010a5e92a7206855ac45cdf54}{thread}}\ \textcolor{keyword}{const}\&\ sample\ );}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classcds__test_1_1thread_aac037637f5a8694a07f56b1612484d67}{\string~thread}}()}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classcds__test_1_1thread_a500fe48010a5e92a7206855ac45cdf54}{thread}}\ *\ \mbox{\hyperlink{classcds__test_1_1thread_a517d5f90fe4bd40ff14003e6186dbea2}{clone}}()\ =\ 0;}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds__test_1_1thread_a856b121c194ea4b676f70c4f0d33acaf}{test}}()\ =\ 0;}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds__test_1_1thread_aa1f8f00424e4afa2df2c4732c0e04236}{SetUp}}()}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ cds::threading::Manager::attachThread();}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1gc_1_1hp_1_1details_1_1generic__smr_ac9d3abdea4e8df2378481f6668a656ed}{cds::gc::hp::custom\_smr<cds::gc::hp::details::StrangeTLSManager>::attach\_thread}}();}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds__test_1_1thread_a3fd24d782ab8851abc8512ab75954ce8}{TearDown}}()}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1gc_1_1hp_1_1details_1_1generic__smr_acbceeee2110fff019e19f3db16721f73}{cds::gc::hp::custom\_smr<cds::gc::hp::details::StrangeTLSManager>::detach\_thread}}();}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ cds::threading::Manager::detachThread();}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classcds__test_1_1thread_a500fe48010a5e92a7206855ac45cdf54}{thread}}(\ \mbox{\hyperlink{classcds__test_1_1thread__pool}{thread\_pool}}\&\ master,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structstrip__const}{type}}\ =\ 0\ );}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread_a63d668995109028bdc9cdbb726de4807}{thread\_pool}}\&\ \mbox{\hyperlink{classcds__test_1_1thread_aaec869e554d6801b6de091cfada44b71}{pool}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds__test_1_1thread_a1c791b5e3ca55b1a571e5199b5cc0c25}{m\_pool}};\ \}}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classcds__test_1_1thread_ac8c2317fda6984cf6c6d1b0e310ff01b}{type}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds__test_1_1thread_ab9a1a51138f56097a43c2789c6f82e36}{m\_type}};\ \}}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classcds__test_1_1thread_a936b5d86b30608d6f959e179ff6128c5}{id}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds__test_1_1thread_a573bd23c17faaf401bfdf67156e59480}{m\_id}};\ \ \}}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds__test_1_1thread_a2541f9cbe14f12ec8b4b05b1496df687}{time\_elapsed}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcds__test_1_1thread_a63d668995109028bdc9cdbb726de4807}{thread\_pool}};}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread_a63d668995109028bdc9cdbb726de4807}{thread\_pool}}\&\ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread_a1c791b5e3ca55b1a571e5199b5cc0c25}{m\_pool}};}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \textcolor{keyword}{const}\ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread_ab9a1a51138f56097a43c2789c6f82e36}{m\_type}};}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \textcolor{keyword}{const}\ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread_a573bd23c17faaf401bfdf67156e59480}{m\_id}};}
\DoxyCodeLine{00065\ \ \ \ \ \};}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{comment}{//\ Pool\ of\ test\ threads}}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcds__test_1_1thread__pool_a12f34432339c7ff1a5bd181896ef2b5a}{thread\_pool}}}
\DoxyCodeLine{00069\ \ \ \ \ \{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcds__test_1_1thread__pool_1_1barrier_aedd8eb7a2faea36308aa83e157719c3a}{barrier}}}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1barrier_aedd8eb7a2faea36308aa83e157719c3a}{barrier}}()}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1barrier_a94232bb46905e625c197250c09be4f2c}{m\_count}}(\ 0\ )}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1barrier_a2b9ab471ec0038302dcac986be17772a}{reset}}(\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a78e23769680a273f948d4bd3e946fcae}{count}}\ )}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::unique\_lock<\ std::mutex\ >\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1barrier_a5fd08dacd973e48733abc854770fc172}{m\_mtx}}\ );}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1barrier_a94232bb46905e625c197250c09be4f2c}{m\_count}}\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a78e23769680a273f948d4bd3e946fcae}{count}};}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1barrier_a38ce6ec3b157b465616646498f2d79f7}{wait}}()}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::unique\_lock<\ std::mutex\ >\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1barrier_a5fd08dacd973e48733abc854770fc172}{m\_mtx}}\ );}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ -\/-\/\mbox{\hyperlink{classcds__test_1_1thread__pool_1_1barrier_a94232bb46905e625c197250c09be4f2c}{m\_count}}\ ==\ 0\ )\ \{}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1barrier_aefd6b7c4842dee445b69eab8fc840cf1}{m\_cv}}.notify\_all();}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1barrier_a94232bb46905e625c197250c09be4f2c}{m\_count}}\ !=\ 0\ )}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1barrier_aefd6b7c4842dee445b69eab8fc840cf1}{m\_cv}}.wait(\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}\ );}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1barrier_a94232bb46905e625c197250c09be4f2c}{m\_count}};}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ std::mutex\ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1barrier_a5fd08dacd973e48733abc854770fc172}{m\_mtx}};}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ std::condition\_variable\ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1barrier_aefd6b7c4842dee445b69eab8fc840cf1}{m\_cv}};}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcds__test_1_1thread__pool_1_1initial__gate_a41e0b0656839c558eaadbed2624e2508}{initial\_gate}}}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1initial__gate_a41e0b0656839c558eaadbed2624e2508}{initial\_gate}}()}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1initial__gate_a6e9ea9c0d7e6c26010a54b877cef46ea}{m\_ready}}(\ \mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}}\ )}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1initial__gate_a4a3175b3f3b5dd8e5493e52ba74a2b25}{wait}}()}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::unique\_lock<\ std::mutex\ >\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1initial__gate_a5d757d8a6c1b2c9212d222e373fdcb23}{m\_mtx}}\ );}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ !\mbox{\hyperlink{classcds__test_1_1thread__pool_1_1initial__gate_a6e9ea9c0d7e6c26010a54b877cef46ea}{m\_ready}}\ )}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1initial__gate_a559666ae4460b9714e672ea5e437de07}{m\_cv}}.wait(\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}\ );}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1initial__gate_a726175b524b6d7ead8266a2855c0ac01}{ready}}()}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::unique\_lock<\ std::mutex\ >\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1initial__gate_a5d757d8a6c1b2c9212d222e373fdcb23}{m\_mtx}}\ );}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1initial__gate_a6e9ea9c0d7e6c26010a54b877cef46ea}{m\_ready}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1initial__gate_a559666ae4460b9714e672ea5e437de07}{m\_cv}}.notify\_all();}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1initial__gate_ab09e856a1b9d4151f64b27aaea12b5cf}{reset}}()}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::unique\_lock<\ std::mutex\ >\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1initial__gate_a5d757d8a6c1b2c9212d222e373fdcb23}{m\_mtx}}\ );}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1initial__gate_a6e9ea9c0d7e6c26010a54b877cef46ea}{m\_ready}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ std::mutex\ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1initial__gate_a5d757d8a6c1b2c9212d222e373fdcb23}{m\_mtx}};}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ std::condition\_variable\ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1initial__gate_a559666ae4460b9714e672ea5e437de07}{m\_cv}};}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1initial__gate_a6e9ea9c0d7e6c26010a54b877cef46ea}{m\_ready}};}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a12f34432339c7ff1a5bd181896ef2b5a}{thread\_pool}}(\ ::testing::Test\&\ fx\ )}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classcds__test_1_1thread__pool_adbdf9af97cab40dae6ef69b54adf6a69}{m\_fixture}}(\ fx\ )}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ ,\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a132220311a4f14e6f9e6bc3b3fa15bbb}{m\_bTimeElapsed}}(\ \mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}}\ )}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_a82b769e22f7a605fddf932b21544f9af}{\string~thread\_pool}}()}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_a17041d294528f3078a3063964c6dc11a}{clear}}();}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_adacf14c99b34b4fb5de31cb8503239a0}{add}}(\ \mbox{\hyperlink{classcds__test_1_1thread__pool_adb314a48b19f4325e5e69e8a60091fce}{thread}}\ *\ what\ )}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_a8fabfb232b8a959850faf375612eade8}{m\_workers}}.push\_back(\ what\ );}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_afd0bf6b8f7ab60a4d5a8434da4321c9e}{add}}(\ \mbox{\hyperlink{classcds__test_1_1thread__pool_adb314a48b19f4325e5e69e8a60091fce}{thread}}\ *\ what,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a78e23769680a273f948d4bd3e946fcae}{count}}\ )}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_adacf14c99b34b4fb5de31cb8503239a0}{add}}(\ what\ );}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 1;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a78e23769680a273f948d4bd3e946fcae}{count}};\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ )\ \{}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_adb314a48b19f4325e5e69e8a60091fce}{thread}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ what-\/>\mbox{\hyperlink{classcds__test_1_1thread_a517d5f90fe4bd40ff14003e6186dbea2}{clone}}();}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_adacf14c99b34b4fb5de31cb8503239a0}{add}}(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ );}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ std::chrono::milliseconds\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a64815f020680ea9f18a09ec7cd4ba91c}{run}}()}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a64815f020680ea9f18a09ec7cd4ba91c}{run}}(\ std::chrono::seconds::zero());}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ std::chrono::milliseconds\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a5bfea1d679ecb5f014a704c8076bf110}{run}}(\ std::chrono::seconds\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a799b7aaa73ef85e111a8febc84e69860}{duration}}\ )}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_aee865079d70fbed5351e1b16a6b7bd8b}{m\_startBarrier}}.reset(\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a8fabfb232b8a959850faf375612eade8}{m\_workers}}.size()\ +\ 1\ );}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_a7a0cdd0a323994cefa8efcf81341f005}{m\_stopBarrier}}.reset(\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a8fabfb232b8a959850faf375612eade8}{m\_workers}}.size()\ +\ 1\ );}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ threads}}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<\ std::thread\ >\ threads;}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ threads.reserve(\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a8fabfb232b8a959850faf375612eade8}{m\_workers}}.size());}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}\ :\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a8fabfb232b8a959850faf375612eade8}{m\_workers}}\ )}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ threads.emplace\_back(\ \&\mbox{\hyperlink{classcds__test_1_1thread_a46092db7916c38eafa1bcaf52ad4ce07}{thread::run}},\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}\ );}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ pool\ is\ intialized}}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_a25c7e50aea3d13660daa02162b2ee1ee}{m\_startPoint}}.ready();}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_a132220311a4f14e6f9e6bc3b3fa15bbb}{m\_bTimeElapsed}}.store(\ \textcolor{keyword}{false},\ std::memory\_order\_release\ );}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ native\_duration\ =\ std::chrono::duration\_cast<std::chrono::steady\_clock::duration>(\mbox{\hyperlink{classcds__test_1_1thread__pool_a799b7aaa73ef85e111a8febc84e69860}{duration}});}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ pool\ is\ ready\ to\ start\ all\ workers}}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_aee865079d70fbed5351e1b16a6b7bd8b}{m\_startBarrier}}.wait();}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ time\_start\ =\ std::chrono::steady\_clock::now();}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\ expected\_end\ =\ time\_start\ +\ native\_duration;}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a799b7aaa73ef85e111a8febc84e69860}{duration}}\ !=\ std::chrono::seconds::zero())\ \{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ ;;\ )\ \{}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::this\_thread::sleep\_for(\ native\_duration\ );}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ time\_now\ =\ std::chrono::steady\_clock::now();}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ time\_now\ >=\ expected\_end\ )}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ native\_duration\ =\ expected\_end\ -\/\ time\_now;}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_a132220311a4f14e6f9e6bc3b3fa15bbb}{m\_bTimeElapsed}}.store(\ \textcolor{keyword}{true},\ std::memory\_order\_release\ );}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Waiting\ for\ all\ workers\ done}}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_a7a0cdd0a323994cefa8efcf81341f005}{m\_stopBarrier}}.wait();}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ time\_end\ =\ std::chrono::steady\_clock::now();}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ :\ threads\ )}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.join();}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a582787ef7dc83f4ee165c7daeeeab5ae}{m\_testDuration}}\ =\ std::chrono::duration\_cast<std::chrono::milliseconds>(time\_end\ -\/\ time\_start);}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a23de21b354688d4e180f8b9766ed0e49}{size}}()\textcolor{keyword}{\ const\ \ \ \ \ \ \ \ \ \ \ \ \ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a8fabfb232b8a959850faf375612eade8}{m\_workers}}.size();\ \}}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_adb314a48b19f4325e5e69e8a60091fce}{thread}}\&\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a2361900d2078105c856504f9cce5bb43}{get}}(\ \textcolor{keywordtype}{size\_t}\ idx\ )\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ *\mbox{\hyperlink{classcds__test_1_1thread__pool_a8fabfb232b8a959850faf375612eade8}{m\_workers}}.at(\ idx\ );\ \}}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Fixture>}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ Fixture\&\ \mbox{\hyperlink{classcds__test_1_1thread__pool_afa629654e2b330d01ce2334b5d6c8056}{fixture}}()}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}Fixture\&\textcolor{keyword}{>}(\mbox{\hyperlink{classcds__test_1_1thread__pool_adbdf9af97cab40dae6ef69b54adf6a69}{m\_fixture}});}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ std::chrono::milliseconds\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a799b7aaa73ef85e111a8febc84e69860}{duration}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a582787ef7dc83f4ee165c7daeeeab5ae}{m\_testDuration}};\ \}}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a17041d294528f3078a3063964c6dc11a}{clear}}()}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ :\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a8fabfb232b8a959850faf375612eade8}{m\_workers}}\ )}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}};}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_a8fabfb232b8a959850faf375612eade8}{m\_workers}}.clear();}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_a25c7e50aea3d13660daa02162b2ee1ee}{m\_startPoint}}.reset();}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_ad7b501553909f5dda3f059b324958f8d}{reset}}()}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_a17041d294528f3078a3063964c6dc11a}{clear}}();}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{keyword}{protected}:\ \textcolor{comment}{//\ thread\ interface}}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a8b83900033a66d6d4ddaae9c3cb61c42}{get\_next\_id}}()}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a8fabfb232b8a959850faf375612eade8}{m\_workers}}.size();}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a9f97c9e4712eed3e37eb9c9ac14bc936}{ready\_to\_start}}(\ \mbox{\hyperlink{classcds__test_1_1thread__pool_adb314a48b19f4325e5e69e8a60091fce}{thread}}\&\ \textcolor{comment}{/*who*/}\ )}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Called\ from\ test\ thread}}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Wait\ until\ the\ pool\ is\ ready}}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_a25c7e50aea3d13660daa02162b2ee1ee}{m\_startPoint}}.wait();}
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Wait\ until\ all\ thread\ ready}}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_aee865079d70fbed5351e1b16a6b7bd8b}{m\_startBarrier}}.wait();}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a03bbae84230d9ea547ee366c80052d1f}{thread\_done}}(\ \mbox{\hyperlink{classcds__test_1_1thread__pool_adb314a48b19f4325e5e69e8a60091fce}{thread}}\&\ \textcolor{comment}{/*who*/}\ )}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Called\ from\ test\ thread}}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_a7a0cdd0a323994cefa8efcf81341f005}{m\_stopBarrier}}.wait();}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcds__test_1_1thread__pool_adb314a48b19f4325e5e69e8a60091fce}{thread}};}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ ::testing::Test\&\ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_adbdf9af97cab40dae6ef69b54adf6a69}{m\_fixture}};}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ std::vector<thread\ *>\ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_a8fabfb232b8a959850faf375612eade8}{m\_workers}};}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1initial__gate}{initial\_gate}}\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_a25c7e50aea3d13660daa02162b2ee1ee}{m\_startPoint}};}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1barrier}{barrier}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_aee865079d70fbed5351e1b16a6b7bd8b}{m\_startBarrier}};}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_1_1barrier}{barrier}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread__pool_a7a0cdd0a323994cefa8efcf81341f005}{m\_stopBarrier}};}
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ std::atomic<bool>\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a132220311a4f14e6f9e6bc3b3fa15bbb}{m\_bTimeElapsed}};}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ std::chrono::milliseconds\ \mbox{\hyperlink{classcds__test_1_1thread__pool_a582787ef7dc83f4ee165c7daeeeab5ae}{m\_testDuration}};}
\DoxyCodeLine{00271\ \ \ \ \ \};}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classcds__test_1_1thread_a500fe48010a5e92a7206855ac45cdf54}{thread::thread}}(\ \mbox{\hyperlink{classcds__test_1_1thread_a63d668995109028bdc9cdbb726de4807}{thread\_pool}}\&\ master,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classcds__test_1_1thread_ac8c2317fda6984cf6c6d1b0e310ff01b}{type}}\ \textcolor{comment}{/*=\ 0*/}\ )}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classcds__test_1_1thread_a1c791b5e3ca55b1a571e5199b5cc0c25}{m\_pool}}(\ master\ )}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ ,\ \mbox{\hyperlink{classcds__test_1_1thread_ab9a1a51138f56097a43c2789c6f82e36}{m\_type}}(\ \mbox{\hyperlink{classcds__test_1_1thread_ac8c2317fda6984cf6c6d1b0e310ff01b}{type}}\ )}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ ,\ \mbox{\hyperlink{classcds__test_1_1thread_a573bd23c17faaf401bfdf67156e59480}{m\_id}}(\ master.get\_next\_id())}
\DoxyCodeLine{00277\ \ \ \ \ \{\}}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classcds__test_1_1thread_a500fe48010a5e92a7206855ac45cdf54}{thread::thread}}(\ \mbox{\hyperlink{classcds__test_1_1thread_a500fe48010a5e92a7206855ac45cdf54}{thread}}\ \textcolor{keyword}{const}\&\ sample\ )}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classcds__test_1_1thread_a1c791b5e3ca55b1a571e5199b5cc0c25}{m\_pool}}(\ sample.\mbox{\hyperlink{classcds__test_1_1thread_a1c791b5e3ca55b1a571e5199b5cc0c25}{m\_pool}}\ )}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ ,\ \mbox{\hyperlink{classcds__test_1_1thread_ab9a1a51138f56097a43c2789c6f82e36}{m\_type}}(\ sample.\mbox{\hyperlink{classcds__test_1_1thread_ab9a1a51138f56097a43c2789c6f82e36}{m\_type}}\ )}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ ,\ \mbox{\hyperlink{classcds__test_1_1thread_a573bd23c17faaf401bfdf67156e59480}{m\_id}}(\ \mbox{\hyperlink{classcds__test_1_1thread_a1c791b5e3ca55b1a571e5199b5cc0c25}{m\_pool}}.get\_next\_id())}
\DoxyCodeLine{00283\ \ \ \ \ \{\}}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds__test_1_1thread_a46092db7916c38eafa1bcaf52ad4ce07}{thread::run}}()}
\DoxyCodeLine{00286\ \ \ \ \ \{}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread_aa1f8f00424e4afa2df2c4732c0e04236}{SetUp}}();}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread_a1c791b5e3ca55b1a571e5199b5cc0c25}{m\_pool}}.ready\_to\_start(\ *\textcolor{keyword}{this}\ );}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread_a856b121c194ea4b676f70c4f0d33acaf}{test}}();}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread_a1c791b5e3ca55b1a571e5199b5cc0c25}{m\_pool}}.thread\_done(\ *\textcolor{keyword}{this}\ );}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds__test_1_1thread_a3fd24d782ab8851abc8512ab75954ce8}{TearDown}}();}
\DoxyCodeLine{00292\ \ \ \ \ \}}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds__test_1_1thread_a2541f9cbe14f12ec8b4b05b1496df687}{thread::time\_elapsed}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00295\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds__test_1_1thread_a1c791b5e3ca55b1a571e5199b5cc0c25}{m\_pool}}.m\_bTimeElapsed.load(\ std::memory\_order\_acquire\ );}
\DoxyCodeLine{00297\ \ \ \ \ \}}
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00299\ \}\ \textcolor{comment}{//\ namespace\ cds\_test}}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00301\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ CDSTEST\_THREAD\_H}}

\end{DoxyCode}
