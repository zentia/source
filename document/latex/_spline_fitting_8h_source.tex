\doxysection{Spline\+Fitting.\+h}
\hypertarget{_spline_fitting_8h_source}{}\label{_spline_fitting_8h_source}\index{external/taskflow/3rd-\/party/eigen-\/3.3.7/unsupported/Eigen/src/Splines/SplineFitting.h@{external/taskflow/3rd-\/party/eigen-\/3.3.7/unsupported/Eigen/src/Splines/SplineFitting.h}}
\mbox{\hyperlink{_spline_fitting_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ This\ file\ is\ part\ of\ Eigen,\ a\ lightweight\ C++\ template\ library}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ for\ linear\ algebra.}}
\DoxyCodeLine{00003\ \textcolor{comment}{//}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ Copyright\ (C)\ 20010-\/2011\ Hauke\ Heibel\ <hauke.heibel@gmail.com>}}
\DoxyCodeLine{00005\ \textcolor{comment}{//}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ This\ Source\ Code\ Form\ is\ subject\ to\ the\ terms\ of\ the\ Mozilla}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ Public\ License\ v.\ 2.0.\ If\ a\ copy\ of\ the\ MPL\ was\ not\ distributed}}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ with\ this\ file,\ You\ can\ obtain\ one\ at\ http://mozilla.org/MPL/2.0/.}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#ifndef\ EIGEN\_SPLINE\_FITTING\_H}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#define\ EIGEN\_SPLINE\_FITTING\_H}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <functional>}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <numeric>}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_spline_fwd_8h}{SplineFwd.h}}"{}}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <Eigen/LU>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <Eigen/QR>}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_eigen}{Eigen}}}
\DoxyCodeLine{00024\ \{}
\DoxyCodeLine{00044\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ KnotVectorType>}
\DoxyCodeLine{00045\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___splines___module_ga9474da5ed68bbd9a6788a999330416d6}{KnotAveraging}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_eigen_1_1_spline_traits}{KnotVectorType}}\&\ parameters,\ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ degree,\ \mbox{\hyperlink{struct_eigen_1_1_spline_traits}{KnotVectorType}}\&\ knots)}
\DoxyCodeLine{00046\ \ \ \{}
\DoxyCodeLine{00047\ \ \ \ \ knots.resize(parameters.size()+degree+1);\ \ \ \ \ \ }
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}=1;\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}<parameters.size()-\/degree;\ ++\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})}
\DoxyCodeLine{00050\ \ \ \ \ \ \ knots(\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}+degree)\ =\ parameters.segment(\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}},degree).mean();}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ knots.segment(0,degree+1)\ =\ KnotVectorType::Zero(degree+1);}
\DoxyCodeLine{00053\ \ \ \ \ knots.segment(knots.size()-\/degree-\/1,degree+1)\ =\ KnotVectorType::Ones(degree+1);}
\DoxyCodeLine{00054\ \ \ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00077\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ KnotVectorType,\ \textcolor{keyword}{typename}\ ParameterVectorType,\ \textcolor{keyword}{typename}\ IndexArray>}
\DoxyCodeLine{00078\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___splines___module_gae10a6f9b6ab7fb400a2526b6382c533b}{KnotAveragingWithDerivatives}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_eigen_1_1_spline_traits}{ParameterVectorType}}\&\ parameters,}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ degree,}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ IndexArray\&\ derivativeIndices,}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1_spline_traits}{KnotVectorType}}\&\ knots)}
\DoxyCodeLine{00082\ \ \ \{}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ ParameterVectorType::Scalar\ \mbox{\hyperlink{class_eigen_1_1_product}{Scalar}};}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \ \ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ numParameters\ =\ parameters.size();}
\DoxyCodeLine{00086\ \ \ \ \ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ numDerivatives\ =\ derivativeIndices.size();}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordflow}{if}\ (numDerivatives\ <\ 1)}
\DoxyCodeLine{00089\ \ \ \ \ \{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \mbox{\hyperlink{group___splines___module_ga9474da5ed68bbd9a6788a999330416d6}{KnotAveraging}}(parameters,\ degree,\ knots);}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00092\ \ \ \ \ \}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ startIndex;}
\DoxyCodeLine{00095\ \ \ \ \ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ endIndex;}
\DoxyCodeLine{00096\ \ \ }
\DoxyCodeLine{00097\ \ \ \ \ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ numInternalDerivatives\ =\ numDerivatives;}
\DoxyCodeLine{00098\ \ \ \ \ }
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordflow}{if}\ (derivativeIndices[0]\ ==\ 0)}
\DoxyCodeLine{00100\ \ \ \ \ \{}
\DoxyCodeLine{00101\ \ \ \ \ \ \ startIndex\ =\ 0;}
\DoxyCodeLine{00102\ \ \ \ \ \ \ -\/-\/numInternalDerivatives;}
\DoxyCodeLine{00103\ \ \ \ \ \}}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00105\ \ \ \ \ \{}
\DoxyCodeLine{00106\ \ \ \ \ \ \ startIndex\ =\ 1;}
\DoxyCodeLine{00107\ \ \ \ \ \}}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keywordflow}{if}\ (derivativeIndices[numDerivatives\ -\/\ 1]\ ==\ numParameters\ -\/\ 1)}
\DoxyCodeLine{00109\ \ \ \ \ \{}
\DoxyCodeLine{00110\ \ \ \ \ \ \ endIndex\ =\ numParameters\ -\/\ degree;}
\DoxyCodeLine{00111\ \ \ \ \ \ \ -\/-\/numInternalDerivatives;}
\DoxyCodeLine{00112\ \ \ \ \ \}}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00114\ \ \ \ \ \{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ endIndex\ =\ numParameters\ -\/\ degree\ -\/\ 1;}
\DoxyCodeLine{00116\ \ \ \ \ \}}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{comment}{//\ There\ are\ (endIndex\ -\/\ startIndex\ +\ 1)\ knots\ obtained\ from\ the\ averaging}}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{comment}{//\ and\ 2\ for\ the\ first\ and\ last\ parameters.}}
\DoxyCodeLine{00120\ \ \ \ \ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ numAverageKnots\ =\ endIndex\ -\/\ startIndex\ +\ 3;}
\DoxyCodeLine{00121\ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1_spline_traits}{KnotVectorType}}\ averageKnots(numAverageKnots);}
\DoxyCodeLine{00122\ \ \ \ \ averageKnots[0]\ =\ parameters[0];}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordtype}{int}\ newKnotIndex\ =\ 0;}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ startIndex;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <=\ endIndex;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})}
\DoxyCodeLine{00126\ \ \ \ \ \ \ averageKnots[++newKnotIndex]\ =\ parameters.segment(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ degree).mean();}
\DoxyCodeLine{00127\ \ \ \ \ averageKnots[++newKnotIndex]\ =\ parameters[numParameters\ -\/\ 1];}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ newKnotIndex\ =\ -\/1;}
\DoxyCodeLine{00130\ \ \ }
\DoxyCodeLine{00131\ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1_spline_traits}{ParameterVectorType}}\ temporaryParameters(numParameters\ +\ 1);}
\DoxyCodeLine{00132\ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1_spline_traits}{KnotVectorType}}\ derivativeKnots(numInternalDerivatives);}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ numAverageKnots\ -\/\ 1;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})}
\DoxyCodeLine{00134\ \ \ \ \ \{}
\DoxyCodeLine{00135\ \ \ \ \ \ \ temporaryParameters[0]\ =\ averageKnots[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}];}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1_spline_traits}{ParameterVectorType}}\ parameterIndices(numParameters);}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ temporaryParameterIndex\ =\ 1;}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}\ =\ 0;\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}\ <\ numParameters;\ ++\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_product}{Scalar}}\ \mbox{\hyperlink{ittnotify__static_8h_ab3e5722c0849857e50afa299c6b2e08b}{parameter}}\ =\ parameters[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}];}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ittnotify__static_8h_ab3e5722c0849857e50afa299c6b2e08b}{parameter}}\ >=\ averageKnots[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]\ \&\&\ \mbox{\hyperlink{ittnotify__static_8h_ab3e5722c0849857e50afa299c6b2e08b}{parameter}}\ <\ averageKnots[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ +\ 1])}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ parameterIndices[temporaryParameterIndex]\ =\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}};}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ temporaryParameters[temporaryParameterIndex++]\ =\ \mbox{\hyperlink{ittnotify__static_8h_ab3e5722c0849857e50afa299c6b2e08b}{parameter}};}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00147\ \ \ \ \ \ \ temporaryParameters[temporaryParameterIndex]\ =\ averageKnots[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ +\ 1];}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}\ =\ 0;\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}\ <=\ temporaryParameterIndex\ -\/\ 2;\ ++\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ k\ =\ 0;\ k\ <\ derivativeIndices.size();\ ++k)}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (parameterIndices[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}\ +\ 1]\ ==\ derivativeIndices[k]}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ parameterIndices[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}\ +\ 1]\ !=\ 0}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ parameterIndices[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}\ +\ 1]\ !=\ numParameters\ -\/\ 1)}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ derivativeKnots[++newKnotIndex]\ =\ temporaryParameters.segment(\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}},\ 3).mean();}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00162\ \ \ \ \ \}}
\DoxyCodeLine{00163\ \ \ \ \ }
\DoxyCodeLine{00164\ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1_spline_traits}{KnotVectorType}}\ temporaryKnots(averageKnots.size()\ +\ derivativeKnots.size());}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ std::merge(averageKnots.data(),\ averageKnots.data()\ +\ averageKnots.size(),}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ derivativeKnots.data(),\ derivativeKnots.data()\ +\ derivativeKnots.size(),}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ temporaryKnots.data());}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{comment}{//\ Number\ of\ knots\ (one\ for\ each\ point\ and\ derivative)\ plus\ spline\ order.}}
\DoxyCodeLine{00171\ \ \ \ \ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ numKnots\ =\ numParameters\ +\ numDerivatives\ +\ degree\ +\ 1;}
\DoxyCodeLine{00172\ \ \ \ \ knots.resize(numKnots);}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \ \ \ knots.head(degree).fill(temporaryKnots[0]);}
\DoxyCodeLine{00175\ \ \ \ \ knots.tail(degree).fill(temporaryKnots.template\ \mbox{\hyperlink{ittnotify__static_8h_ae6f0aed6c2af4489760c7c13c49ae904}{tail<1>}}()[0]);}
\DoxyCodeLine{00176\ \ \ \ \ knots.segment(degree,\ temporaryKnots.size())\ =\ temporaryKnots;}
\DoxyCodeLine{00177\ \ \ \}}
\DoxyCodeLine{00178\ \ \ \ }
\DoxyCodeLine{00188\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Po\textcolor{keywordtype}{int}ArrayType,\ \textcolor{keyword}{typename}\ KnotVectorType>}
\DoxyCodeLine{00189\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___splines___module_ga1b4cbde5d98411405871accf877552d2}{ChordLengths}}(\textcolor{keyword}{const}\ PointArrayType\&\ pts,\ \mbox{\hyperlink{struct_eigen_1_1_spline_traits}{KnotVectorType}}\&\ chord\_lengths)}
\DoxyCodeLine{00190\ \ \ \{}
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ KnotVectorType::Scalar\ \mbox{\hyperlink{class_eigen_1_1_product}{Scalar}};}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ =\ pts.cols();}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{comment}{//\ 1.\ compute\ the\ column-\/wise\ norms}}
\DoxyCodeLine{00196\ \ \ \ \ chord\_lengths.resize(pts.cols());}
\DoxyCodeLine{00197\ \ \ \ \ chord\_lengths[0]\ =\ 0;}
\DoxyCodeLine{00198\ \ \ \ \ chord\_lengths.rightCols(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/1)\ =\ (pts.array().\mbox{\hyperlink{_block_methods_8h_a7de059ca182a0ea76a1372c1d61aeeee}{leftCols}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/1)\ -\/\ pts.array().rightCols(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/1)).matrix().colwise().norm();}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{comment}{//\ 2.\ compute\ the\ partial\ sums}}
\DoxyCodeLine{00201\ \ \ \ \ std::partial\_sum(chord\_lengths.data(),\ chord\_lengths.data()+\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}},\ chord\_lengths.data());}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{comment}{//\ 3.\ normalize\ the\ data}}
\DoxyCodeLine{00204\ \ \ \ \ chord\_lengths\ /=\ chord\_lengths(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/1);}
\DoxyCodeLine{00205\ \ \ \ \ chord\_lengths(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/1)\ =\ \mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}(1);}
\DoxyCodeLine{00206\ \ \ \}}
\DoxyCodeLine{00207\ \ \ \ \ \ }
\DoxyCodeLine{00212\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ SplineType>}
\DoxyCodeLine{00213\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_eigen_1_1_spline_fitting}{SplineFitting}}}
\DoxyCodeLine{00214\ \ \ \{}
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ SplineType::KnotVectorType\ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_a4d10d41fbec87890b1695244b1d074be}{KnotVectorType}};}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ SplineType::ParameterVectorType\ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_af7757885fc599a6e0d298d40ca634953}{ParameterVectorType}};}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Po\textcolor{keywordtype}{int}ArrayType>}
\DoxyCodeLine{00227\ \ \ \ \ \textcolor{keyword}{static}\ SplineType\ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_adc80b6f0dd0dbbea28130fb254626874}{Interpolate}}(\textcolor{keyword}{const}\ PointArrayType\&\ pts,\ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ degree);}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Po\textcolor{keywordtype}{int}ArrayType>}
\DoxyCodeLine{00239\ \ \ \ \ \textcolor{keyword}{static}\ SplineType\ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_adc80b6f0dd0dbbea28130fb254626874}{Interpolate}}(\textcolor{keyword}{const}\ PointArrayType\&\ pts,\ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ degree,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_a4d10d41fbec87890b1695244b1d074be}{KnotVectorType}}\&\ knot\_parameters);}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Po\textcolor{keywordtype}{int}ArrayType,\ \textcolor{keyword}{typename}\ IndexArray>}
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{keyword}{static}\ SplineType\ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_a7bd937fdcfa168dbdc27932886a4da9f}{InterpolateWithDerivatives}}(\textcolor{keyword}{const}\ PointArrayType\&\ points,}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ PointArrayType\&\ derivatives,}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ IndexArray\&\ derivativeIndices,}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ degree);}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00280\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Po\textcolor{keywordtype}{int}ArrayType,\ \textcolor{keyword}{typename}\ IndexArray>}
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{keyword}{static}\ SplineType\ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_a7bd937fdcfa168dbdc27932886a4da9f}{InterpolateWithDerivatives}}(\textcolor{keyword}{const}\ PointArrayType\&\ points,}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ PointArrayType\&\ derivatives,}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ IndexArray\&\ derivativeIndices,}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ degree,}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_af7757885fc599a6e0d298d40ca634953}{ParameterVectorType}}\&\ parameters);}
\DoxyCodeLine{00286\ \ \ \};}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ SplineType>}
\DoxyCodeLine{00289\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Po\textcolor{keywordtype}{int}ArrayType>}
\DoxyCodeLine{00290\ \ \ SplineType\ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_adc80b6f0dd0dbbea28130fb254626874}{SplineFitting<SplineType>::Interpolate}}(\textcolor{keyword}{const}\ PointArrayType\&\ pts,\ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ degree,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_a4d10d41fbec87890b1695244b1d074be}{KnotVectorType}}\&\ knot\_parameters)}
\DoxyCodeLine{00291\ \ \ \{}
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ SplineType::KnotVectorType::Scalar\ \mbox{\hyperlink{class_eigen_1_1_product}{Scalar}};\ \ \ \ \ \ }
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ SplineType::ControlPointVectorType\ \mbox{\hyperlink{struct_eigen_1_1_spline_traits}{ControlPointVectorType}};\ \ \ \ \ \ }
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00295\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{class_eigen_1_1_matrix}{Matrix<Scalar,Dynamic,Dynamic>}}\ \mbox{\hyperlink{class_eigen_1_1_transform}{MatrixType}};}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_a4d10d41fbec87890b1695244b1d074be}{KnotVectorType}}\ knots;}
\DoxyCodeLine{00298\ \ \ \ \ \mbox{\hyperlink{group___splines___module_ga9474da5ed68bbd9a6788a999330416d6}{KnotAveraging}}(knot\_parameters,\ degree,\ knots);}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ =\ pts.cols();}
\DoxyCodeLine{00301\ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_transform}{MatrixType}}\ \mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}}\ =\ MatrixType::Zero(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}},\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=1;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/1;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})}
\DoxyCodeLine{00303\ \ \ \ \ \{}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ span\ =\ SplineType::Span(knot\_parameters[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}],\ degree,\ knots);}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ segment\ call\ should\ somehow\ be\ told\ the\ spline\ order\ at\ compile\ time.}}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}}.row(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}).segment(span-\/degree,\ degree+1)\ =\ SplineType::BasisFunctions(knot\_parameters[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}],\ degree,\ knots);}
\DoxyCodeLine{00308\ \ \ \ \ \}}
\DoxyCodeLine{00309\ \ \ \ \ \mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}}(0,0)\ =\ 1.0;}
\DoxyCodeLine{00310\ \ \ \ \ \mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/1,\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/1)\ =\ 1.0;}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_householder_q_r}{HouseholderQR<MatrixType>}}\ \mbox{\hyperlink{qr__colpivoting_8cpp_a234047f1d6b0303293c8918968a9670e}{qr}}(\mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}});}
\DoxyCodeLine{00313\ }
\DoxyCodeLine{00314\ \ \ \ \ \textcolor{comment}{//\ Here,\ we\ are\ creating\ a\ temporary\ due\ to\ an\ Eigen\ issue.}}
\DoxyCodeLine{00315\ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1_spline_traits}{ControlPointVectorType}}\ ctrls\ =\ \mbox{\hyperlink{_householder_q_r__householder_q_8cpp_ab766ef1a187400b0619104b16613d3cf}{qr}}.solve(\mbox{\hyperlink{benchmark-blocking-sizes_8cpp_af5fcaa2ea9f565466ca96c2992ea0771}{MatrixType}}(pts.transpose())).transpose();}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ \ \ \ \ \textcolor{keywordflow}{return}\ SplineType(knots,\ ctrls);}
\DoxyCodeLine{00318\ \ \ \}}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00320\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ SplineType>}
\DoxyCodeLine{00321\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Po\textcolor{keywordtype}{int}ArrayType>}
\DoxyCodeLine{00322\ \ \ SplineType\ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_adc80b6f0dd0dbbea28130fb254626874}{SplineFitting<SplineType>::Interpolate}}(\textcolor{keyword}{const}\ PointArrayType\&\ pts,\ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ degree)}
\DoxyCodeLine{00323\ \ \ \{}
\DoxyCodeLine{00324\ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_a4d10d41fbec87890b1695244b1d074be}{KnotVectorType}}\ chord\_lengths;\ \textcolor{comment}{//\ knot\ parameters}}
\DoxyCodeLine{00325\ \ \ \ \ \mbox{\hyperlink{group___splines___module_ga1b4cbde5d98411405871accf877552d2}{ChordLengths}}(pts,\ chord\_lengths);}
\DoxyCodeLine{00326\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_adc80b6f0dd0dbbea28130fb254626874}{Interpolate}}(pts,\ degree,\ chord\_lengths);}
\DoxyCodeLine{00327\ \ \ \}}
\DoxyCodeLine{00328\ \ \ }
\DoxyCodeLine{00329\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ SplineType>}
\DoxyCodeLine{00330\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Po\textcolor{keywordtype}{int}ArrayType,\ \textcolor{keyword}{typename}\ IndexArray>}
\DoxyCodeLine{00331\ \ \ SplineType\ }
\DoxyCodeLine{00332\ \ \ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_a7bd937fdcfa168dbdc27932886a4da9f}{SplineFitting<SplineType>::InterpolateWithDerivatives}}(\textcolor{keyword}{const}\ PointArrayType\&\ points,}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ PointArrayType\&\ derivatives,}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ IndexArray\&\ derivativeIndices,}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ degree,}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_af7757885fc599a6e0d298d40ca634953}{ParameterVectorType}}\&\ parameters)}
\DoxyCodeLine{00337\ \ \ \{}
\DoxyCodeLine{00338\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ SplineType::KnotVectorType::Scalar\ \mbox{\hyperlink{class_eigen_1_1_product}{Scalar}};\ \ \ \ \ \ }
\DoxyCodeLine{00339\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ SplineType::ControlPointVectorType\ \mbox{\hyperlink{struct_eigen_1_1_spline_traits}{ControlPointVectorType}};}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00341\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{class_eigen_1_1_matrix}{Matrix<Scalar,\ Dynamic,\ Dynamic>}}\ \mbox{\hyperlink{class_eigen_1_1_transform}{MatrixType}};}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00343\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ =\ points.cols()\ +\ derivatives.cols();}
\DoxyCodeLine{00344\ \ \ \ \ }
\DoxyCodeLine{00345\ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_a4d10d41fbec87890b1695244b1d074be}{KnotVectorType}}\ knots;}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00347\ \ \ \ \ \mbox{\hyperlink{group___splines___module_gae10a6f9b6ab7fb400a2526b6382c533b}{KnotAveragingWithDerivatives}}(parameters,\ degree,\ derivativeIndices,\ knots);}
\DoxyCodeLine{00348\ \ \ \ \ }
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{comment}{//\ fill\ matrix}}
\DoxyCodeLine{00350\ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_transform}{MatrixType}}\ \mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}}\ =\ MatrixType::Zero(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}},\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \ \ \ \ \textcolor{comment}{//\ Use\ these\ dimensions\ for\ quicker\ populating,\ then\ transpose\ for\ solving.}}
\DoxyCodeLine{00353\ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_transform}{MatrixType}}\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}(points.rows(),\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{00354\ }
\DoxyCodeLine{00355\ \ \ \ \ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ startRow;}
\DoxyCodeLine{00356\ \ \ \ \ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ derivativeStart;}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00358\ \ \ \ \ \textcolor{comment}{//\ End\ derivatives.}}
\DoxyCodeLine{00359\ \ \ \ \ \textcolor{keywordflow}{if}\ (derivativeIndices[0]\ ==\ 0)}
\DoxyCodeLine{00360\ \ \ \ \ \{}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}}.template\ \mbox{\hyperlink{mimalloc_8h_af7f922b73e3acdb4a430b72f1a1334a5}{block<1,\ 2>}}(1,\ 0)\ <<\ -\/1,\ 1;}
\DoxyCodeLine{00362\ \ \ \ \ \ \ }
\DoxyCodeLine{00363\ \ \ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_product}{Scalar}}\ \mbox{\hyperlink{namespace_eigen_ae998329a5bd49a32b6048a27e1a232a0}{y}}\ =\ (knots(degree\ +\ 1)\ -\/\ knots(0))\ /\ degree;}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}.col(1)\ =\ \mbox{\hyperlink{namespace_eigen_ae998329a5bd49a32b6048a27e1a232a0}{y}}*derivatives.col(0);}
\DoxyCodeLine{00365\ \ \ \ \ \ \ }
\DoxyCodeLine{00366\ \ \ \ \ \ \ startRow\ =\ 2;}
\DoxyCodeLine{00367\ \ \ \ \ \ \ derivativeStart\ =\ 1;}
\DoxyCodeLine{00368\ \ \ \ \ \}}
\DoxyCodeLine{00369\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00370\ \ \ \ \ \{}
\DoxyCodeLine{00371\ \ \ \ \ \ \ startRow\ =\ 1;}
\DoxyCodeLine{00372\ \ \ \ \ \ \ derivativeStart\ =\ 0;}
\DoxyCodeLine{00373\ \ \ \ \ \}}
\DoxyCodeLine{00374\ \ \ \ \ \textcolor{keywordflow}{if}\ (derivativeIndices[derivatives.cols()\ -\/\ 1]\ ==\ points.cols()\ -\/\ 1)}
\DoxyCodeLine{00375\ \ \ \ \ \{}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}}.template\ \mbox{\hyperlink{mimalloc_8h_af7f922b73e3acdb4a430b72f1a1334a5}{block<1,\ 2>}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ -\/\ 2,\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ -\/\ 2)\ <<\ -\/1,\ 1;}
\DoxyCodeLine{00377\ }
\DoxyCodeLine{00378\ \ \ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_product}{Scalar}}\ \mbox{\hyperlink{namespace_eigen_ae998329a5bd49a32b6048a27e1a232a0}{y}}\ =\ (knots(knots.size()\ -\/\ 1)\ -\/\ knots(knots.size()\ -\/\ (degree\ +\ 2)))\ /\ degree;}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}.col(\mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}.cols()\ -\/\ 2)\ =\ \mbox{\hyperlink{namespace_eigen_ae998329a5bd49a32b6048a27e1a232a0}{y}}*derivatives.col(derivatives.cols()\ -\/\ 1);}
\DoxyCodeLine{00380\ \ \ \ \ \}}
\DoxyCodeLine{00381\ \ \ \ \ }
\DoxyCodeLine{00382\ \ \ \ \ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ \mbox{\hyperlink{_matrix_base__row_8cpp_a64ef8efef59f875033a27e7cbbc879ec}{row}}\ =\ startRow;}
\DoxyCodeLine{00383\ \ \ \ \ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ derivativeIndex\ =\ derivativeStart;}
\DoxyCodeLine{00384\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 1;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ parameters.size()\ -\/\ 1;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})}
\DoxyCodeLine{00385\ \ \ \ \ \{}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespace_eigen_aa06499c94936a19673e53deb516a1b76}{DenseIndex}}\ span\ =\ SplineType::Span(parameters[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}],\ degree,\ knots);}
\DoxyCodeLine{00387\ }
\DoxyCodeLine{00388\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (derivativeIndices[derivativeIndex]\ ==\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}}.block(\mbox{\hyperlink{_matrix_base__row_8cpp_a64ef8efef59f875033a27e7cbbc879ec}{row}},\ span\ -\/\ degree,\ 2,\ degree\ +\ 1)}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \ \ =\ SplineType::BasisFunctionDerivatives(parameters[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}],\ 1,\ degree,\ knots);}
\DoxyCodeLine{00392\ }
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}.col(\mbox{\hyperlink{_matrix_base__row_8cpp_a64ef8efef59f875033a27e7cbbc879ec}{row}}++)\ =\ points.col(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}.col(\mbox{\hyperlink{_matrix_base__row_8cpp_a64ef8efef59f875033a27e7cbbc879ec}{row}}++)\ =\ derivatives.col(derivativeIndex++);}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}}.row(\mbox{\hyperlink{_matrix_base__row_8cpp_a64ef8efef59f875033a27e7cbbc879ec}{row}}++).segment(span\ -\/\ degree,\ degree\ +\ 1)}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ =\ SplineType::BasisFunctions(parameters[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}],\ degree,\ knots);}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00401\ \ \ \ \ \}}
\DoxyCodeLine{00402\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}.col(0)\ =\ points.col(0);}
\DoxyCodeLine{00403\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}.col(\mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}.cols()\ -\/\ 1)\ =\ points.col(points.cols()\ -\/\ 1);}
\DoxyCodeLine{00404\ \ \ \ \ \mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}}(0,0)\ =\ 1;}
\DoxyCodeLine{00405\ \ \ \ \ \mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ -\/\ 1,\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ -\/\ 1)\ =\ 1;}
\DoxyCodeLine{00406\ \ \ \ \ }
\DoxyCodeLine{00407\ \ \ \ \ \textcolor{comment}{//\ Solve}}
\DoxyCodeLine{00408\ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_full_piv_l_u}{FullPivLU<MatrixType>}}\ \mbox{\hyperlink{ittnotify__static_8h_aef8d747d36e02b71d5523ec355959ace}{lu}}(\mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}});}
\DoxyCodeLine{00409\ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1_spline_traits}{ControlPointVectorType}}\ controlPoints\ =\ \mbox{\hyperlink{ittnotify__static_8h_aef8d747d36e02b71d5523ec355959ace}{lu}}.solve(\mbox{\hyperlink{benchmark-blocking-sizes_8cpp_af5fcaa2ea9f565466ca96c2992ea0771}{MatrixType}}(\mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}.transpose())).transpose();}
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00411\ \ \ \ \ SplineType\ spline(knots,\ controlPoints);}
\DoxyCodeLine{00412\ \ \ \ \ }
\DoxyCodeLine{00413\ \ \ \ \ \textcolor{keywordflow}{return}\ spline;}
\DoxyCodeLine{00414\ \ \ \}}
\DoxyCodeLine{00415\ \ \ }
\DoxyCodeLine{00416\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ SplineType>}
\DoxyCodeLine{00417\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Po\textcolor{keywordtype}{int}ArrayType,\ \textcolor{keyword}{typename}\ IndexArray>}
\DoxyCodeLine{00418\ \ \ SplineType}
\DoxyCodeLine{00419\ \ \ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_a7bd937fdcfa168dbdc27932886a4da9f}{SplineFitting<SplineType>::InterpolateWithDerivatives}}(\textcolor{keyword}{const}\ PointArrayType\&\ points,}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ PointArrayType\&\ derivatives,}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ IndexArray\&\ derivativeIndices,}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ degree)}
\DoxyCodeLine{00423\ \ \ \{}
\DoxyCodeLine{00424\ \ \ \ \ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_af7757885fc599a6e0d298d40ca634953}{ParameterVectorType}}\ parameters;}
\DoxyCodeLine{00425\ \ \ \ \ \mbox{\hyperlink{group___splines___module_ga1b4cbde5d98411405871accf877552d2}{ChordLengths}}(points,\ parameters);}
\DoxyCodeLine{00426\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_eigen_1_1_spline_fitting_a7bd937fdcfa168dbdc27932886a4da9f}{InterpolateWithDerivatives}}(points,\ derivatives,\ derivativeIndices,\ degree,\ parameters);}
\DoxyCodeLine{00427\ \ \ \}}
\DoxyCodeLine{00428\ \}}
\DoxyCodeLine{00429\ }
\DoxyCodeLine{00430\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ EIGEN\_SPLINE\_FITTING\_H}}

\end{DoxyCode}
