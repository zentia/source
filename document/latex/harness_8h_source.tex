\doxysection{harness.\+h}
\hypertarget{harness_8h_source}{}\label{harness_8h_source}\index{external/taskflow/3rd-\/party/tbb/src/test/harness.h@{external/taskflow/3rd-\/party/tbb/src/test/harness.h}}
\mbox{\hyperlink{harness_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{comment}{//\ Declarations\ for\ rock-\/bottom\ simple\ test\ harness.}}
\DoxyCodeLine{00018\ \textcolor{comment}{//\ Just\ include\ this\ file\ to\ use\ it.}}
\DoxyCodeLine{00019\ \textcolor{comment}{//\ Every\ test\ is\ presumed\ to\ have\ a\ command\ line\ of\ the\ form\ "{}test\ [-\/v]\ [MinThreads[:MaxThreads]]"{}}}
\DoxyCodeLine{00020\ \textcolor{comment}{//\ The\ default\ for\ MinThreads\ is\ 1,\ for\ MaxThreads\ 4.}}
\DoxyCodeLine{00021\ \textcolor{comment}{//\ The\ defaults\ can\ be\ overridden\ by\ defining\ macros\ HARNESS\_DEFAULT\_MIN\_THREADS}}
\DoxyCodeLine{00022\ \textcolor{comment}{//\ and\ HARNESS\_DEFAULT\_MAX\_THREADS\ before\ including\ harness.h}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#ifndef\ tbb\_tests\_harness\_H}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#define\ tbb\_tests\_harness\_H}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{tbb__config_8h}{tbb/tbb\_config.h}}"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{harness__defs_8h}{harness\_defs.h}}"{}}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_harness}{Harness}}\ \{}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keyword}{enum}\ \mbox{\hyperlink{namespace_harness_af69f2621193acb5830367304bef3ffdb}{TestResult}}\ \{}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_harness_af69f2621193acb5830367304bef3ffdbadcc4d407b25d6323252f96a52263ac64}{Done}},}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_harness_af69f2621193acb5830367304bef3ffdbac7fec41a351710612372f06ff2b2871b}{Skipped}},}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_harness_af69f2621193acb5830367304bef3ffdba6ef56579b99b07644235953202382a37}{Unknown}}}
\DoxyCodeLine{00035\ \ \ \ \ \};}
\DoxyCodeLine{00036\ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00051\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{harness_8h_ac7bfd5b2c3dd5c7fdbd14f64c92d9c5f}{TestMain}}\ ();}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{preprocessor}{\#if\ \_\_SUNPRO\_CC}}
\DoxyCodeLine{00054\ \textcolor{preprocessor}{\ \ \ \ \#include\ <stdlib.h>}}
\DoxyCodeLine{00055\ \textcolor{preprocessor}{\ \ \ \ \#include\ <\mbox{\hyperlink{string_8h}{string.h}}>}}
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\ \ \ \ \#include\ <ucontext.h>}}
\DoxyCodeLine{00057\ \textcolor{preprocessor}{\#else\ }\textcolor{comment}{/*\ !\_\_SUNPRO\_CC\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00058\ \textcolor{preprocessor}{\ \ \ \ \#include\ <cstdlib>}}
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\ \ \ \ \#include\ <cstring>}}
\DoxyCodeLine{00060\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ !\_\_SUNPRO\_CC\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\#include\ <cerrno>}}
\DoxyCodeLine{00062\ \textcolor{preprocessor}{\#include\ <cctype>}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \textcolor{preprocessor}{\#include\ <new>}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \textcolor{preprocessor}{\#if\ \_\_TBB\_MIC\_NATIVE}}
\DoxyCodeLine{00067\ \textcolor{preprocessor}{\ \ \ \ \#include\ "{}\mbox{\hyperlink{harness__mic_8h}{harness\_mic.h}}"{}}}
\DoxyCodeLine{00068\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00069\ \textcolor{preprocessor}{\ \ \ \ \#define\ HARNESS\_EXPORT}}
\DoxyCodeLine{00070\ \textcolor{preprocessor}{\ \ \ \ \#define\ REPORT\_FATAL\_ERROR\ REPORT}}
\DoxyCodeLine{00071\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ !\_\_MIC\_\_\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \textcolor{preprocessor}{\#if\ \_WIN32||\_WIN64}}
\DoxyCodeLine{00074\ \textcolor{preprocessor}{\ \ \ \ \#include\ "{}\mbox{\hyperlink{windows__api_8h}{tbb/machine/windows\_api.h}}"{}}}
\DoxyCodeLine{00075\ \textcolor{preprocessor}{\ \ \ \ \#if\ \_WIN32\_WINNT\ >\ 0x0501\ \&\&\ \_MSC\_VER\ \&\&\ !\_M\_ARM}}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Suppress\ "{}typedef\ ignored\ ...\ when\ no\ variable\ is\ declared"{}\ warning\ by\ vc14}}
\DoxyCodeLine{00077\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#pragma\ warning\ (push)}}
\DoxyCodeLine{00078\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#pragma\ warning\ (disable:\ 4091)}}
\DoxyCodeLine{00079\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#include\ <dbghelp.h>}}
\DoxyCodeLine{00080\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#pragma\ warning\ (pop)}}
\DoxyCodeLine{00081\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#pragma\ comment\ (lib,\ "{}dbghelp.lib"{})}}
\DoxyCodeLine{00082\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00083\ \textcolor{preprocessor}{\ \ \ \ \#if\ \_\_TBB\_WIN8UI\_SUPPORT}}
\DoxyCodeLine{00084\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#include\ <thread>}}
\DoxyCodeLine{00085\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00086\ \textcolor{preprocessor}{\ \ \ \ \#if\ \_MSC\_VER}}
\DoxyCodeLine{00087\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#include\ <crtdbg.h>}}
\DoxyCodeLine{00088\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00089\ \textcolor{preprocessor}{\ \ \ \ \#include\ <process.h>}}
\DoxyCodeLine{00090\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00091\ \textcolor{preprocessor}{\ \ \ \ \#include\ <\mbox{\hyperlink{pthread_8h}{pthread.h}}>}}
\DoxyCodeLine{00092\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \textcolor{preprocessor}{\#if\ \_\_linux\_\_}}
\DoxyCodeLine{00095\ \textcolor{preprocessor}{\ \ \ \ \#include\ <sys/utsname.h>}\ \textcolor{comment}{/*\ for\ uname\ */}}
\DoxyCodeLine{00096\ \textcolor{preprocessor}{\ \ \ \ \#include\ <errno.h>}\ \ \ \ \ \ \ \textcolor{comment}{/*\ for\ use\ in\ LinuxKernelVersion()\ */}}
\DoxyCodeLine{00097\ \textcolor{preprocessor}{\ \ \ \ \#include\ <features.h>}}
\DoxyCodeLine{00098\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00099\ \textcolor{comment}{//\ at\ least\ GLIBC\ 2.1\ or\ OSX\ 10.5}}
\DoxyCodeLine{00100\ \textcolor{preprocessor}{\#if\ \_\_GLIBC\_\_>2\ ||\ (\ \_\_GLIBC\_\_==2\ \&\&\ \_\_GLIBC\_MINOR\_\_\ >=\ 1)\ ||\ \_\_APPLE\_\_}}
\DoxyCodeLine{00101\ \textcolor{preprocessor}{\ \ \ \ \#include\ <execinfo.h>}\ \textcolor{comment}{/*backtrace*/}}
\DoxyCodeLine{00102\ \textcolor{preprocessor}{\ \ \ \ \#define\ BACKTRACE\_FUNCTION\_AVAILABLE\ 1}}
\DoxyCodeLine{00103\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_harness}{Harness}}\ \{}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_harness_1_1_native_mutex_a9e119a0fbcf3ed4aeee48a73627fbd0f}{NativeMutex}}\ \{}
\DoxyCodeLine{00107\ \textcolor{preprocessor}{\#if\ \_WIN32||\_WIN64}}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ CRITICAL\_SECTION\ my\_critical\_section;}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_harness_1_1_native_mutex_a9e119a0fbcf3ed4aeee48a73627fbd0f}{NativeMutex}}()\ \{}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ InitializeCriticalSectionEx(\&my\_critical\_section,\ 4000,\ 0);}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_harness_1_1_native_mutex_abd467f76941388cd170dbe9799cea917}{lock}}()\ \{}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ EnterCriticalSection(\&my\_critical\_section);}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_harness_1_1_native_mutex_ad121f2eac43f0217684119d20cd51432}{unlock}}()\ \{}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ LeaveCriticalSection(\&my\_critical\_section);}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_harness_1_1_native_mutex_adfe524ead097dc9bd223f6e07b96a869}{\string~NativeMutex}}()\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ DeleteCriticalSection(\&my\_critical\_section);}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00122\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{pthread__minport__windows_8h_a572a3762cb738984c3957ba91426b08d}{pthread\_mutex\_t}}\ \mbox{\hyperlink{class_harness_1_1_native_mutex_ac001f76136b38ee9e2f292b8f4c0b72c}{m\_mutex}};}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_harness_1_1_native_mutex_a9e119a0fbcf3ed4aeee48a73627fbd0f}{NativeMutex}}()\ \{}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{pthread__minport__windows_8h_a06769b1c0f650377fed34ef94ac2a01c}{pthread\_mutex\_init}}(\&\mbox{\hyperlink{class_harness_1_1_native_mutex_ac001f76136b38ee9e2f292b8f4c0b72c}{m\_mutex}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_harness_1_1_native_mutex_abd467f76941388cd170dbe9799cea917}{lock}}()\ \{}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{pthread__minport__windows_8h_ac24005266439bc710f8d85235c0c9213}{pthread\_mutex\_lock}}(\&\mbox{\hyperlink{class_harness_1_1_native_mutex_ac001f76136b38ee9e2f292b8f4c0b72c}{m\_mutex}});}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_harness_1_1_native_mutex_ad121f2eac43f0217684119d20cd51432}{unlock}}()\ \{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{pthread__minport__windows_8h_a9ebcb4bbf90f780d17be7acd63b0e92f}{pthread\_mutex\_unlock}}(\&\mbox{\hyperlink{class_harness_1_1_native_mutex_ac001f76136b38ee9e2f292b8f4c0b72c}{m\_mutex}});}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_harness_1_1_native_mutex_adfe524ead097dc9bd223f6e07b96a869}{\string~NativeMutex}}()\ \{}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{pthread__minport__windows_8h_a733a87c6f8ed4dc0b76662dac0ea4a9a}{pthread\_mutex\_destroy}}(\&\mbox{\hyperlink{class_harness_1_1_native_mutex_ac001f76136b38ee9e2f292b8f4c0b72c}{m\_mutex}});}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00137\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00138\ \ \ \ \ \};}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinternal}{internal}}\ \{}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_harness_1_1_native_mutex}{NativeMutex}}\ \mbox{\hyperlink{namespace_harness_1_1internal_a3d8abf296d4f409306741b64aa3e0c3f}{print\_stack\_mutex}};}
\DoxyCodeLine{00141\ \ \ \ \ \}}
\DoxyCodeLine{00142\ \}}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{harness__runtime__loader_8h}{harness\_runtime\_loader.h}}"{}}}
\DoxyCodeLine{00145\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{harness__report_8h}{harness\_report.h}}"{}}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00148\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{harness_8h_aead635fc1d8823afa5e4df6cf46e110b}{print\_call\_stack}}()\ \{}
\DoxyCodeLine{00149\ \ \ \ \ \mbox{\hyperlink{namespace_harness_1_1internal_a3d8abf296d4f409306741b64aa3e0c3f}{Harness::internal::print\_stack\_mutex}}.lock();}
\DoxyCodeLine{00150\ \ \ \ \ fflush(stdout);\ fflush(stderr);}
\DoxyCodeLine{00151\ \textcolor{preprocessor}{\ \ \ \ \#if\ BACKTRACE\_FUNCTION\_AVAILABLE}}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ sz\ =\ 100;\ \textcolor{comment}{//\ max\ number\ of\ frames\ to\ capture}}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *buff[sz];}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ =\ backtrace(buff,\ sz);}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__report_8h_a787099914a94ed31fa544b985b55752f}{REPORT}}(\textcolor{stringliteral}{"{}Call\ stack\ info\ (\%d):\(\backslash\)n"{}},\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ backtrace\_symbols\_fd(buff,\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}},\ fileno(stdout));}
\DoxyCodeLine{00157\ \textcolor{preprocessor}{\ \ \ \ \#elif\ \_\_SUNPRO\_CC}}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__report_8h_a787099914a94ed31fa544b985b55752f}{REPORT}}(\textcolor{stringliteral}{"{}Call\ stack\ info:\(\backslash\)n"{}});}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ printstack(fileno(stdout));}
\DoxyCodeLine{00160\ \textcolor{preprocessor}{\ \ \ \ \#elif\ \_WIN32\_WINNT\ >\ 0x0501\ \&\&\ \_MSC\_VER>=1500\ \&\&\ !\_\_TBB\_WIN8UI\_SUPPORT}}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ sz\ =\ 62;\ \textcolor{comment}{//\ XP\ limitation\ for\ number\ of\ frames}}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *buff[sz];}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ =\ CaptureStackBackTrace(0,\ sz,\ buff,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__report_8h_a787099914a94ed31fa544b985b55752f}{REPORT}}(\textcolor{stringliteral}{"{}Call\ stack\ info\ (\%d):\(\backslash\)n"{}},\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ LONG\ once\ =\ 0;}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !InterlockedExchange(\&once,\ 1)\ )}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ SymInitialize(GetCurrentProcess(),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \mbox{\hyperlink{tinycthread_8c_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}});}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}}\ =\ 255;\ \textcolor{comment}{//\ just\ some\ reasonable\ string\ buffer\ size}}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \textcolor{keyword}{union\ }\{\ SYMBOL\_INFO\ sym;\ \textcolor{keywordtype}{char}\ pad[\textcolor{keyword}{sizeof}(SYMBOL\_INFO)+\mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}}];\ \};}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ sym.MaxNameLen\ =\ \mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}};}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ sym.SizeOfStruct\ =\ \textcolor{keyword}{sizeof}(\ SYMBOL\_INFO\ );}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ DWORD64\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae1b92ae085ddef4b1cdca7d749339fb0}{offset}};}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 1;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}};\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++)\ \{\ \textcolor{comment}{//\ skip\ current\ frame}}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!SymFromAddr(\ GetCurrentProcess(),\ DWORD64(buff[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]),\ \&\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae1b92ae085ddef4b1cdca7d749339fb0}{offset}},\ \&sym\ ))\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sym.Address\ =\ ULONG64(buff[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae1b92ae085ddef4b1cdca7d749339fb0}{offset}}\ =\ 0;\ sym.Name[0]\ =\ 0;}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__report_8h_a787099914a94ed31fa544b985b55752f}{REPORT}}(\textcolor{stringliteral}{"{}[\%d]\ \%016I64X+\%04I64X:\ \%s\(\backslash\)n"{}},\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ sym.Address,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae1b92ae085ddef4b1cdca7d749339fb0}{offset}},\ sym.Name);\ \textcolor{comment}{//TODO:\ print\ module\ name}}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00179\ \textcolor{preprocessor}{\ \ \ \ \#endif\ }\textcolor{comment}{/*BACKTRACE\_FUNCTION\_AVAILABLE*/}\textcolor{preprocessor}{}}
\DoxyCodeLine{00180\ \ \ \ \ \mbox{\hyperlink{namespace_harness_1_1internal_a3d8abf296d4f409306741b64aa3e0c3f}{Harness::internal::print\_stack\_mutex}}.unlock();}
\DoxyCodeLine{00181\ \}}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \textcolor{preprocessor}{\#if\ !HARNESS\_NO\_ASSERT}}
\DoxyCodeLine{00184\ \textcolor{preprocessor}{\ \ \ \ \#include\ <exception>}\ \textcolor{comment}{//for\ set\_terminate}}
\DoxyCodeLine{00185\ \textcolor{preprocessor}{\ \ \ \ \#include\ "{}\mbox{\hyperlink{harness__assert_8h}{harness\_assert.h}}"{}}}
\DoxyCodeLine{00186\ \textcolor{preprocessor}{\ \ \ \ \#if\ TEST\_USES\_TBB}}
\DoxyCodeLine{00187\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#include\ <\mbox{\hyperlink{tbb__stddef_8h}{tbb/tbb\_stddef.h}}>}\ \textcolor{comment}{/*set\_assertion\_handler*/}}
\DoxyCodeLine{00188\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_init_reporter_ab2d85a85c022518417752331a3a6b24c}{InitReporter}}\ \{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}\ (*\mbox{\hyperlink{struct_init_reporter_ab0464c136b1a900b1db16772efde2d14}{default\_terminate\_handler}})()\ ;}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_init_reporter_ab2d85a85c022518417752331a3a6b24c}{InitReporter}}():\ \mbox{\hyperlink{struct_init_reporter_ab0464c136b1a900b1db16772efde2d14}{default\_terminate\_handler}}(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{}
\DoxyCodeLine{00193\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#if\ TEST\_USES\_TBB}}
\DoxyCodeLine{00194\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#if\ TBB\_USE\_ASSERT}}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_a4c95ae5d0eb374299c1be4fdb8fb88e3}{tbb::set\_assertion\_handler}}(\mbox{\hyperlink{harness_8h_a1d87333ad8865fea249c2d82bdf30c7a}{ReportError}});}
\DoxyCodeLine{00196\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__assert_8h_a8779f2ab0d9b52cc015cefe27e01db68}{ASSERT\_WARNING}}(\mbox{\hyperlink{tbb__stddef_8h_a807df374ec89e4c365c22f804eed73ba}{TBB\_INTERFACE\_VERSION}}\ <=\ \mbox{\hyperlink{namespacetbb_a5f474a376c6d74ac55c943da765d609b}{tbb::TBB\_runtime\_interface\_version}}(),\ \textcolor{stringliteral}{"{}runtime\ version\ mismatch"{}});}
\DoxyCodeLine{00198\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00199\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#if\ TBB\_USE\_EXCEPTIONS}}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_init_reporter_ab0464c136b1a900b1db16772efde2d14}{default\_terminate\_handler}}\ =\ std::set\_terminate(\mbox{\hyperlink{struct_init_reporter_aa597a8fe5a6ade3bb4324a4f952f640b}{handle\_terminate}});}
\DoxyCodeLine{00201\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_init_reporter_aa597a8fe5a6ade3bb4324a4f952f640b}{handle\_terminate}}();}
\DoxyCodeLine{00204\ \ \ \ \ \};}
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_init_reporter}{InitReporter}}\ \mbox{\hyperlink{harness_8h_af11f4cf7f74b3d8903c213be1ba44450}{InitReportError}};}
\DoxyCodeLine{00206\ }
\DoxyCodeLine{00207\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_init_reporter_aa597a8fe5a6ade3bb4324a4f952f640b}{InitReporter::handle\_terminate}}()\{}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__report_8h_a787099914a94ed31fa544b985b55752f}{REPORT}}(\textcolor{stringliteral}{"{}std::terminate\ called.\(\backslash\)n"{}});}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness_8h_aead635fc1d8823afa5e4df6cf46e110b}{print\_call\_stack}}();}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{harness_8h_af11f4cf7f74b3d8903c213be1ba44450}{InitReportError}}.default\_terminate\_handler)\{}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness_8h_af11f4cf7f74b3d8903c213be1ba44450}{InitReportError}}.default\_terminate\_handler();}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00213\ \ \ \ \ \}}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}\ (*\mbox{\hyperlink{harness_8h_a1b93f1a8c723f766b8b5c7c9b5cd1c94}{test\_error\_extra\_t}})(\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}});}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{harness_8h_a1b93f1a8c723f766b8b5c7c9b5cd1c94}{test\_error\_extra\_t}}\ \mbox{\hyperlink{harness_8h_a2e30922ec0b6ecfc00526cfd993bebf6}{ErrorExtraCall}};}
\DoxyCodeLine{00218\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{harness_8h_abc505f2fbe0a205435c1b85dde3ee411}{SetHarnessErrorProcessing}}(\ \mbox{\hyperlink{harness_8h_a1b93f1a8c723f766b8b5c7c9b5cd1c94}{test\_error\_extra\_t}}\ extra\_call\ )\ \{}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness_8h_a2e30922ec0b6ecfc00526cfd993bebf6}{ErrorExtraCall}}\ =\ extra\_call;}
\DoxyCodeLine{00220\ \ \ \ \ \}}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00223\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{harness_8h_a1d87333ad8865fea249c2d82bdf30c7a}{ReportError}}(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ filename,\ \textcolor{keywordtype}{int}\ line,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ expression,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\ message\ )\ \{}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness_8h_aead635fc1d8823afa5e4df6cf46e110b}{print\_call\_stack}}();}
\DoxyCodeLine{00225\ \textcolor{preprocessor}{\ \ \ \ \#if\ \_\_TBB\_ICL\_11\_1\_CODE\_GEN\_BROKEN}}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{printf_8h_aee3ed3a831f25f07e7be3919fff2203a}{printf}}(\textcolor{stringliteral}{"{}\%s:\%d,\ assertion\ \%s:\ \%s\(\backslash\)n"{}},\ filename,\ line,\ expression,\ message\ ?\ message\ :\ \textcolor{stringliteral}{"{}failed"{}}\ );}
\DoxyCodeLine{00227\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness_8h_acf150291060caf91f62704d33eedcdde}{REPORT\_FATAL\_ERROR}}(\textcolor{stringliteral}{"{}\%s:\%d,\ assertion\ \%s:\ \%s\(\backslash\)n"{}},\ filename,\ line,\ expression,\ message\ ?\ message\ :\ \textcolor{stringliteral}{"{}failed"{}}\ );}
\DoxyCodeLine{00229\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{harness_8h_a2e30922ec0b6ecfc00526cfd993bebf6}{ErrorExtraCall}}\ )}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ (*ErrorExtraCall)();}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ fflush(stdout);\ fflush(stderr);}
\DoxyCodeLine{00234\ \textcolor{preprocessor}{\ \ \ \ \#if\ HARNESS\_TERMINATE\_ON\_ASSERT}}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ TerminateProcess(GetCurrentProcess(),\ 1);}
\DoxyCodeLine{00236\ \textcolor{preprocessor}{\ \ \ \ \#elif\ HARNESS\_EXIT\_ON\_ASSERT}}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ exit(1);}
\DoxyCodeLine{00238\ \textcolor{preprocessor}{\ \ \ \ \#elif\ HARNESS\_CONTINUE\_ON\_ASSERT}}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ continue\ testing}}
\DoxyCodeLine{00240\ \textcolor{preprocessor}{\ \ \ \ \#elif\ \_MSC\_VER\ \&\&\ \_DEBUG}}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ aligned\ with\ tbb\_assert\_impl.h\ behavior}}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(1\ ==\ \_CrtDbgReport(\_CRT\_ASSERT,\ filename,\ line,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \textcolor{stringliteral}{"{}\%s\(\backslash\)r\(\backslash\)n\%s"{}},\ expression,\ message?message:\textcolor{stringliteral}{"{}"{}}))}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \_CrtDbgBreak();}
\DoxyCodeLine{00244\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ abort();}
\DoxyCodeLine{00246\ \textcolor{preprocessor}{\ \ \ \ \#endif\ }\textcolor{comment}{/*\ HARNESS\_EXIT\_ON\_ASSERT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00247\ \ \ \ \ \}}
\DoxyCodeLine{00249\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{harness_8h_aa38d00ee0015d0b812f101b548db6135}{ReportWarning}}(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ filename,\ \textcolor{keywordtype}{int}\ line,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ expression,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\ message\ )\ \{}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__report_8h_a787099914a94ed31fa544b985b55752f}{REPORT}}(\textcolor{stringliteral}{"{}Warning:\ \%s:\%d,\ assertion\ \%s:\ \%s\(\backslash\)n"{}},\ filename,\ line,\ expression,\ message\ ?\ message\ :\ \textcolor{stringliteral}{"{}failed"{}}\ );}
\DoxyCodeLine{00251\ \ \ \ \ \}}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \textcolor{preprocessor}{\#else\ }\textcolor{comment}{/*\ !HARNESS\_NO\_ASSERT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \textcolor{preprocessor}{\ \ \ \ \#define\ ASSERT(p,msg)\ (Harness::suppress\_unused\_warning(p),\ (void)0)}}
\DoxyCodeLine{00256\ \textcolor{preprocessor}{\ \ \ \ \#define\ ASSERT\_WARNING(p,msg)\ (Harness::suppress\_unused\_warning(p),\ (void)0)}}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ !HARNESS\_NO\_ASSERT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00260\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_harness}{Harness}}\ \{}
\DoxyCodeLine{00261\ \ \ \ \ \textcolor{comment}{//TODO:\ unify\ with\ utility::internal::array\_length\ from\ examples\ common\ utilities}}
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T,\ \textcolor{keywordtype}{size\_t}\ N>}
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{namespace_harness_ab206cca6eab4aa536242981c7c4f3e3c}{array\_length}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(\&)[\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}])}
\DoxyCodeLine{00264\ \ \ \ \ \{}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}};}
\DoxyCodeLine{00266\ \ \ \ \ \}}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T,\ \textcolor{keywordtype}{size\_t}\ N>}
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}}(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(\&\ \mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}})[\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}])}
\DoxyCodeLine{00270\ \ \ \ \ \{}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}}+\ \mbox{\hyperlink{namespace_harness_ab206cca6eab4aa536242981c7c4f3e3c}{array\_length}}(\mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}})\ ;}
\DoxyCodeLine{00272\ \ \ \ \ \}}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \}\ \textcolor{comment}{//namespace\ Harness}}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00276\ \textcolor{preprocessor}{\#if\ TEST\_USES\_TBB}}
\DoxyCodeLine{00277\ \textcolor{preprocessor}{\ \ \ \ \#include\ "{}\mbox{\hyperlink{blocked__range_8h}{tbb/blocked\_range.h}}"{}}}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_harness}{Harness}}\ \{}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T,\ \textcolor{keywordtype}{size\_t}\ N>}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ tbb::blocked\_range<T*>\ make\_blocked\_range(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(\&\ \mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}})[\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}])\{\ \textcolor{keywordflow}{return}\ tbb::blocked\_range<T*>(\mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}},\ \mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}}\ +\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}});\}}
\DoxyCodeLine{00282\ \ \ \ \ \}}
\DoxyCodeLine{00283\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \textcolor{preprocessor}{\#if\ !HARNESS\_NO\_PARSE\_COMMAND\_LINE}}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00289\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{3rd-party_2tbb_2examples_2test__all_2fibonacci_2_fibonacci_8cpp_a464788622bab18d3e81852e65fb6a7c7}{Verbose}};}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00291\ \textcolor{preprocessor}{\#ifndef\ HARNESS\_DEFAULT\_MIN\_THREADS}}
\DoxyCodeLine{00292\ \textcolor{preprocessor}{\ \ \ \ \#define\ HARNESS\_DEFAULT\_MIN\_THREADS\ 1}}
\DoxyCodeLine{00293\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00296\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{harness_8h_afc1c4a6f82d8f81c0a0fd2525149824a}{MinThread}}\ =\ \mbox{\hyperlink{test__mutex__v2_8cpp_a47bf51675e69e4df432f179f3a8b4f2d}{HARNESS\_DEFAULT\_MIN\_THREADS}};}
\DoxyCodeLine{00297\ }
\DoxyCodeLine{00298\ \textcolor{preprocessor}{\#ifndef\ HARNESS\_DEFAULT\_MAX\_THREADS}}
\DoxyCodeLine{00299\ \textcolor{preprocessor}{\ \ \ \ \#define\ HARNESS\_DEFAULT\_MAX\_THREADS\ 4}}
\DoxyCodeLine{00300\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00303\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{harness_8h_a1c41cdeec6c1cec819e816d1adada13b}{MaxThread}}\ =\ \mbox{\hyperlink{test__mutex__v2_8cpp_a698d9e49a51e0bea9e88dac9f8bd49b0}{HARNESS\_DEFAULT\_MAX\_THREADS}};}
\DoxyCodeLine{00304\ }
\DoxyCodeLine{00306\ }
\DoxyCodeLine{00311\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{harness_8h_afdda6d1c4184e16b014a78ae53ddf958}{ParseCommandLine}}(\ \textcolor{keywordtype}{int}\ argc,\ \textcolor{keywordtype}{char}*\ argv[]\ )\ \{}
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{keywordflow}{if}(\ !argc\ )\ \mbox{\hyperlink{harness__report_8h_a787099914a94ed31fa544b985b55752f}{REPORT}}(\textcolor{stringliteral}{"{}Command\ line\ with\ 0\ arguments\(\backslash\)n"{}});}
\DoxyCodeLine{00313\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 1;}
\DoxyCodeLine{00314\ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<argc\ )\ \{}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ strncmp(\ argv[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}],\ \textcolor{stringliteral}{"{}-\/v"{}},\ 2\ )==0\ )\ \{}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{3rd-party_2tbb_2examples_2test__all_2fibonacci_2_fibonacci_8cpp_a464788622bab18d3e81852e65fb6a7c7}{Verbose}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00319\ \ \ \ \ \}}
\DoxyCodeLine{00320\ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<argc\ )\ \{}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}*\ endptr;}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness_8h_afc1c4a6f82d8f81c0a0fd2525149824a}{MinThread}}\ =\ strtol(\ argv[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}],\ \&endptr,\ 0\ );}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ *endptr==\textcolor{charliteral}{':'}\ )}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness_8h_a1c41cdeec6c1cec819e816d1adada13b}{MaxThread}}\ =\ strtol(\ endptr+1,\ \&endptr,\ 0\ );}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ *endptr==\textcolor{charliteral}{'\(\backslash\)0'}\ )}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness_8h_a1c41cdeec6c1cec819e816d1adada13b}{MaxThread}}\ =\ \mbox{\hyperlink{harness_8h_afc1c4a6f82d8f81c0a0fd2525149824a}{MinThread}};}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ *endptr!=\textcolor{charliteral}{'\(\backslash\)0'}\ )\ \{}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness_8h_acf150291060caf91f62704d33eedcdde}{REPORT\_FATAL\_ERROR}}(\textcolor{stringliteral}{"{}garbled\ nthread\ range\(\backslash\)n"{}});}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \ \ \ \ exit(1);}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{harness_8h_afc1c4a6f82d8f81c0a0fd2525149824a}{MinThread}}<0\ )\ \{}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness_8h_acf150291060caf91f62704d33eedcdde}{REPORT\_FATAL\_ERROR}}(\textcolor{stringliteral}{"{}nthread\ must\ be\ nonnegative\(\backslash\)n"{}});}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \ \ \ \ exit(1);}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{harness_8h_a1c41cdeec6c1cec819e816d1adada13b}{MaxThread}}<\mbox{\hyperlink{harness_8h_afc1c4a6f82d8f81c0a0fd2525149824a}{MinThread}}\ )\ \{}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness_8h_acf150291060caf91f62704d33eedcdde}{REPORT\_FATAL\_ERROR}}(\textcolor{stringliteral}{"{}nthread\ range\ is\ backwards\(\backslash\)n"{}});}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \ \ \ \ exit(1);}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};}
\DoxyCodeLine{00340\ \ \ \ \ \}}
\DoxyCodeLine{00341\ \textcolor{preprocessor}{\#if\ \_\_TBB\_STDARGS\_BROKEN}}
\DoxyCodeLine{00342\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !argc\ )}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ argc\ =\ 1;}
\DoxyCodeLine{00344\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ argc\ \&\&\ argv[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}][0]\ ==\ 0\ )}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};}
\DoxyCodeLine{00347\ \ \ \ \ \}}
\DoxyCodeLine{00348\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_STDARGS\_BROKEN\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}!=argc\ )\ \{}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness_8h_acf150291060caf91f62704d33eedcdde}{REPORT\_FATAL\_ERROR}}(\textcolor{stringliteral}{"{}Usage:\ \%s\ [-\/v]\ [nthread|minthread:maxthread]\(\backslash\)n"{}},\ argv[0]\ );}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ exit(1);}
\DoxyCodeLine{00352\ \ \ \ \ \}}
\DoxyCodeLine{00353\ \}}
\DoxyCodeLine{00354\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ HARNESS\_NO\_PARSE\_COMMAND\_LINE\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00356\ \textcolor{preprocessor}{\#if\ !HARNESS\_CUSTOM\_MAIN}}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00358\ \textcolor{preprocessor}{\#if\ \_\_TBB\_MPI\_INTEROP}}
\DoxyCodeLine{00359\ \textcolor{preprocessor}{\#undef\ SEEK\_SET}}
\DoxyCodeLine{00360\ \textcolor{preprocessor}{\#undef\ SEEK\_CUR}}
\DoxyCodeLine{00361\ \textcolor{preprocessor}{\#undef\ SEEK\_END}}
\DoxyCodeLine{00362\ \textcolor{preprocessor}{\#include\ "{}mpi.h"{}}}
\DoxyCodeLine{00363\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00365\ \textcolor{preprocessor}{\#if\ \_\_TBB\_MIC\_OFFLOAD\ \&\&\ \_\_MIC\_\_}}
\DoxyCodeLine{00366\ \textcolor{keyword}{extern}\ \textcolor{stringliteral}{"{}C"{}}\ \textcolor{keywordtype}{int}\ COIProcessProxyFlush();}
\DoxyCodeLine{00367\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00368\ }
\DoxyCodeLine{00369\ \mbox{\hyperlink{harness_8h_a708456e0290efec33b8b6b61f94b685a}{HARNESS\_EXPORT}}}
\DoxyCodeLine{00370\ \textcolor{preprocessor}{\#if\ HARNESS\_NO\_PARSE\_COMMAND\_LINE}}
\DoxyCodeLine{00371\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{main-override-static_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}{main}}()\ \{}
\DoxyCodeLine{00372\ \textcolor{preprocessor}{\#if\ \_\_TBB\_MPI\_INTEROP}}
\DoxyCodeLine{00373\ \ \ \ \ MPI\_Init(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00374\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00375\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00376\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{main-override-static_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}{main}}(\textcolor{keywordtype}{int}\ argc,\ \textcolor{keywordtype}{char}*\ argv[])\ \{}
\DoxyCodeLine{00377\ \ \ \ \ \mbox{\hyperlink{harness_8h_afdda6d1c4184e16b014a78ae53ddf958}{ParseCommandLine}}(\ argc,\ argv\ );}
\DoxyCodeLine{00378\ \textcolor{preprocessor}{\#if\ \_\_TBB\_MPI\_INTEROP}}
\DoxyCodeLine{00379\ \ \ \ \ MPI\_Init(\&argc,\&argv);}
\DoxyCodeLine{00380\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00381\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00382\ \textcolor{preprocessor}{\#if\ HARNESS\_SKIP\_TEST}}
\DoxyCodeLine{00383\ \ \ \ \ \mbox{\hyperlink{harness__report_8h_a787099914a94ed31fa544b985b55752f}{REPORT}}(\ \textcolor{stringliteral}{"{}skip\(\backslash\)n"{}}\ );}
\DoxyCodeLine{00384\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00385\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00386\ \textcolor{preprocessor}{\#if\ \_\_TBB\_MPI\_INTEROP}}
\DoxyCodeLine{00387\ \ \ \ \ \textcolor{comment}{//\ Simple\ TBB/MPI\ interoperability\ harness\ for\ most\ of\ tests}}
\DoxyCodeLine{00388\ \ \ \ \ \textcolor{comment}{//\ Worker\ processes\ send\ blocking\ messages\ to\ the\ master\ process\ about\ their\ rank\ and\ group\ size}}
\DoxyCodeLine{00389\ \ \ \ \ \textcolor{comment}{//\ Master\ process\ receives\ this\ info\ and\ print\ it\ in\ verbose\ mode}}
\DoxyCodeLine{00390\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{ittnotify__static_8h_a4d59258314b5b7d431d257e3a5a98b57}{rank}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ myrank;}
\DoxyCodeLine{00391\ \ \ \ \ MPI\_Status\ status;}
\DoxyCodeLine{00392\ \ \ \ \ MPI\_Comm\_size(MPI\_COMM\_WORLD,\&\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00393\ \ \ \ \ MPI\_Comm\_rank(MPI\_COMM\_WORLD,\&myrank);}
\DoxyCodeLine{00394\ \ \ \ \ \textcolor{keywordflow}{if}\ (myrank\ ==\ 0)\ \{}
\DoxyCodeLine{00395\ \textcolor{preprocessor}{\#if\ !HARNESS\_NO\_PARSE\_COMMAND\_LINE}}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__report_8h_ace9fba7267bf6a9a92654ce7f25c5516}{REMARK}}(\textcolor{stringliteral}{"{}Hello\ mpi\ world.\ I\ am\ \%d\ of\ \%d\(\backslash\)n"{}},\ myrank,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00397\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 1;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}};\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++\ )\ \{}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Recv\ (\&\mbox{\hyperlink{ittnotify__static_8h_a4d59258314b5b7d431d257e3a5a98b57}{rank}},\ 1,\ MPI\_INT,\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ 1,\ MPI\_COMM\_WORLD,\ \&status);}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Recv\ (\&\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ 1,\ MPI\_INT,\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ 1,\ MPI\_COMM\_WORLD,\ \&status);}
\DoxyCodeLine{00401\ \textcolor{preprocessor}{\#if\ !HARNESS\_NO\_PARSE\_COMMAND\_LINE}}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__report_8h_ace9fba7267bf6a9a92654ce7f25c5516}{REMARK}}(\textcolor{stringliteral}{"{}Hello\ mpi\ world.\ I\ am\ \%d\ of\ \%d\(\backslash\)n"{}},\ \mbox{\hyperlink{ittnotify__static_8h_a4d59258314b5b7d431d257e3a5a98b57}{rank}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00403\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00405\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ MPI\_Send\ (\&myrank,\ 1,\ MPI\_INT,\ 0,\ 1,\ MPI\_COMM\_WORLD);}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ MPI\_Send\ (\&\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ 1,\ MPI\_INT,\ 0,\ 1,\ MPI\_COMM\_WORLD);}
\DoxyCodeLine{00408\ \ \ \ \ \}}
\DoxyCodeLine{00409\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00411\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}\ =\ \mbox{\hyperlink{namespace_harness_af69f2621193acb5830367304bef3ffdba6ef56579b99b07644235953202382a37}{Harness::Unknown}};}
\DoxyCodeLine{00412\ \textcolor{preprocessor}{\#if\ \_\_TBB\_MIC\_OFFLOAD}}
\DoxyCodeLine{00413\ \ \ \ \ \textcolor{comment}{//\ "{}mic:-\/1"{}\ or\ "{}mandatory"{}\ specifies\ execution\ on\ the\ target.\ The\ runtime}}
\DoxyCodeLine{00414\ \ \ \ \ \textcolor{comment}{//\ system\ chooses\ the\ specific\ target.\ Execution\ on\ the\ CPU\ is\ not\ allowed.}}
\DoxyCodeLine{00415\ \textcolor{preprocessor}{\#if\ \_\_INTEL\_COMPILER\ <\ 1400}}
\DoxyCodeLine{00416\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ offload\ target(mic:-\/1)\ out(res)}}
\DoxyCodeLine{00417\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00418\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ offload\ target(mic)\ out(res)\ mandatory}}
\DoxyCodeLine{00419\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00420\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00421\ \ \ \ \ \{}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}\ =\ \mbox{\hyperlink{harness_8h_ac7bfd5b2c3dd5c7fdbd14f64c92d9c5f}{TestMain}}();}
\DoxyCodeLine{00423\ \textcolor{preprocessor}{\#if\ \_\_TBB\_MIC\_OFFLOAD\ \&\&\ \_\_MIC\_\_}}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ It\ is\ recommended\ not\ to\ use\ the\ \_\_MIC\_\_\ macro\ directly\ in\ the\ offload\ block\ but\ it\ is\ Ok\ here}}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ since\ it\ does\ not\ lead\ to\ an\ unexpected\ difference\ between\ host\ and\ target\ compilation\ phases.}}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ need\ to\ flush\ internal\ Intel(R)\ Coprocessor\ Offload\ Infrastructure\ (Intel(R)\ COI)\ buffers}}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ to\ order\ output\ from\ the\ offload\ part\ before\ the\ host\ part.}}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Also\ it\ is\ work-\/around\ for\ the\ issue\ with\ missed\ output.}}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ COIProcessProxyFlush();}
\DoxyCodeLine{00430\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00431\ \ \ \ \ \}}
\DoxyCodeLine{00432\ }
\DoxyCodeLine{00433\ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}==\mbox{\hyperlink{namespace_harness_af69f2621193acb5830367304bef3ffdbadcc4d407b25d6323252f96a52263ac64}{Harness::Done}}\ ||\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}==\mbox{\hyperlink{namespace_harness_af69f2621193acb5830367304bef3ffdbac7fec41a351710612372f06ff2b2871b}{Harness::Skipped}},\ \textcolor{stringliteral}{"{}Wrong\ return\ code\ by\ TestMain"{}});}
\DoxyCodeLine{00434\ \textcolor{preprocessor}{\#if\ \_\_TBB\_MPI\_INTEROP}}
\DoxyCodeLine{00435\ \ \ \ \ \textcolor{keywordflow}{if}\ (myrank\ ==\ 0)\ \{}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness__report_8h_a787099914a94ed31fa544b985b55752f}{REPORT}}(\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}==\mbox{\hyperlink{namespace_harness_af69f2621193acb5830367304bef3ffdbadcc4d407b25d6323252f96a52263ac64}{Harness::Done}}\ ?\ \textcolor{stringliteral}{"{}done\(\backslash\)n"{}}\ :\ \textcolor{stringliteral}{"{}skip\(\backslash\)n"{}}\ );}
\DoxyCodeLine{00437\ \ \ \ \ \}}
\DoxyCodeLine{00438\ \ \ \ \ MPI\_Finalize();}
\DoxyCodeLine{00439\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00440\ \ \ \ \ \mbox{\hyperlink{harness__report_8h_a787099914a94ed31fa544b985b55752f}{REPORT}}(\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}==\mbox{\hyperlink{namespace_harness_af69f2621193acb5830367304bef3ffdbadcc4d407b25d6323252f96a52263ac64}{Harness::Done}}\ ?\ \textcolor{stringliteral}{"{}done\(\backslash\)n"{}}\ :\ \textcolor{stringliteral}{"{}skip\(\backslash\)n"{}}\ );}
\DoxyCodeLine{00441\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00442\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00443\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ HARNESS\_SKIP\_TEST\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00444\ \}}
\DoxyCodeLine{00445\ }
\DoxyCodeLine{00446\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ !HARNESS\_CUSTOM\_MAIN\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00447\ }
\DoxyCodeLine{00448\ \textcolor{preprocessor}{\#if\ \_\_TBB\_DEFAULTED\_AND\_DELETED\_FUNC\_PRESENT}}
\DoxyCodeLine{00449\ }
\DoxyCodeLine{00451\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_no_assign}{NoAssign}}\ \{}
\DoxyCodeLine{00452\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00453\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_no_assign_a7127ff3c9dd9268b852995ce68bae4cc}{operator=}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_no_assign_acb5f52ed820065725301a8152ccc2eb3}{NoAssign}}\&\ )\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00454\ \ \ \ \ \mbox{\hyperlink{class_no_assign_acb5f52ed820065725301a8152ccc2eb3}{NoAssign}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_no_assign_acb5f52ed820065725301a8152ccc2eb3}{NoAssign}}\&\ )\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00455\ \ \ \ \ \mbox{\hyperlink{class_no_assign_acb5f52ed820065725301a8152ccc2eb3}{NoAssign}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00456\ \};}
\DoxyCodeLine{00457\ }
\DoxyCodeLine{00459\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_no_copy}{NoCopy}}:\ \mbox{\hyperlink{class_no_assign}{NoAssign}}\ \{}
\DoxyCodeLine{00460\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00461\ \ \ \ \ \mbox{\hyperlink{class_no_copy_a6599661c2ef5c84171956f7811953c63}{NoCopy}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_no_copy_a495bdeffea1eda9d33e338e5b5cd2313}{NoCopy}}\&\ )\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00462\ \ \ \ \ \mbox{\hyperlink{class_no_copy_a6599661c2ef5c84171956f7811953c63}{NoCopy}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00463\ \};}
\DoxyCodeLine{00464\ }
\DoxyCodeLine{00465\ \textcolor{preprocessor}{\#else\ }\textcolor{comment}{/*\_\_TBB\_DEFAULTED\_AND\_DELETED\_FUNC\_PRESENT*/}\textcolor{preprocessor}{}}
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00468\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_no_assign_acb5f52ed820065725301a8152ccc2eb3}{NoAssign}}\ \{}
\DoxyCodeLine{00470\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_no_assign_a7127ff3c9dd9268b852995ce68bae4cc}{operator=}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_no_assign_acb5f52ed820065725301a8152ccc2eb3}{NoAssign}}\&\ );}
\DoxyCodeLine{00471\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00472\ \ \ \ \ \mbox{\hyperlink{class_no_assign_acb5f52ed820065725301a8152ccc2eb3}{NoAssign}}()\ \{\}\ \textcolor{comment}{//\ explicitly\ defined\ to\ prevent\ gratuitous\ warnings}}
\DoxyCodeLine{00473\ \};}
\DoxyCodeLine{00474\ }
\DoxyCodeLine{00476\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_no_copy_a495bdeffea1eda9d33e338e5b5cd2313}{NoCopy}}:\ \mbox{\hyperlink{class_no_assign_acb5f52ed820065725301a8152ccc2eb3}{NoAssign}}\ \{}
\DoxyCodeLine{00478\ \ \ \ \ \mbox{\hyperlink{class_no_copy_a495bdeffea1eda9d33e338e5b5cd2313}{NoCopy}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_no_copy_a495bdeffea1eda9d33e338e5b5cd2313}{NoCopy}}\&\ );}
\DoxyCodeLine{00479\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00480\ \ \ \ \ \mbox{\hyperlink{class_no_copy_a6599661c2ef5c84171956f7811953c63}{NoCopy}}()\ \{\}}
\DoxyCodeLine{00481\ \};}
\DoxyCodeLine{00482\ }
\DoxyCodeLine{00483\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\_\_TBB\_DEFAULTED\_AND\_DELETED\_FUNC\_PRESENT*/}\textcolor{preprocessor}{}}
\DoxyCodeLine{00484\ }
\DoxyCodeLine{00485\ \textcolor{preprocessor}{\#if\ \_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT}}
\DoxyCodeLine{00486\ \textcolor{preprocessor}{\#include\ <utility>}}
\DoxyCodeLine{00487\ }
\DoxyCodeLine{00489\ \textcolor{keyword}{class\ }Movable\ \{}
\DoxyCodeLine{00490\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00491\ \ \ \ \ Movable()\ :\ alive(\mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}})\ \{\}}
\DoxyCodeLine{00492\ \ \ \ \ \textcolor{keywordtype}{void}\ Reset()\ \{\ alive\ =\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{00493\ \ \ \ \ Movable(Movable\&\&\ other)\ \{}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(other.alive,\ \textcolor{stringliteral}{"{}Moving\ from\ a\ dead\ object"{}});}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ alive\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ other.alive\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00497\ \ \ \ \ \}}
\DoxyCodeLine{00498\ \ \ \ \ Movable\&\ operator=(Movable\&\&\ other)\ \{}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(alive,\ \textcolor{stringliteral}{"{}Assignment\ to\ a\ dead\ object"{}});}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(other.alive,\ \textcolor{stringliteral}{"{}Assignment\ of\ a\ dead\ object"{}});}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ other.alive\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00503\ \ \ \ \ \}}
\DoxyCodeLine{00504\ \ \ \ \ Movable\&\ operator=(\textcolor{keyword}{const}\ Movable\&\ other)\ \{}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(alive,\ \textcolor{stringliteral}{"{}Assignment\ to\ a\ dead\ object"{}});}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(other.alive,\ \textcolor{stringliteral}{"{}Assignment\ of\ a\ dead\ object"{}});}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00508\ \ \ \ \ \}}
\DoxyCodeLine{00509\ \ \ \ \ Movable(\textcolor{keyword}{const}\ Movable\&\ other)\ \{}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(other.alive,\ \textcolor{stringliteral}{"{}Const\ reference\ to\ a\ dead\ object"{}});}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ alive\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00512\ \ \ \ \ \}}
\DoxyCodeLine{00513\ \ \ \ \ \string~Movable()\ \{\ alive\ =\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00514\ \ \ \ \ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ alive;}
\DoxyCodeLine{00515\ \};}
\DoxyCodeLine{00516\ }
\DoxyCodeLine{00517\ \textcolor{keyword}{class\ }MoveOnly\ :\ Movable,\ \mbox{\hyperlink{class_no_copy}{NoCopy}}\ \{}
\DoxyCodeLine{00518\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00519\ \ \ \ \ MoveOnly()\ :\ Movable()\ \{\}}
\DoxyCodeLine{00520\ \ \ \ \ MoveOnly(MoveOnly\&\&\ other)\ :\ Movable(\ std::\mbox{\hyperlink{namespaceeastl_a58ada88d74ffe16bba892a0ccccc8aba}{move}}(other)\ )\ \{\}}
\DoxyCodeLine{00521\ \};}
\DoxyCodeLine{00522\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00523\ }
\DoxyCodeLine{00524\ \textcolor{preprocessor}{\#if\ HARNESS\_TBBMALLOC\_THREAD\_SHUTDOWN\ \&\&\ \_\_TBB\_SOURCE\_DIRECTLY\_INCLUDED\ \&\&\ (\_WIN32||\_WIN64)}}
\DoxyCodeLine{00525\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{tbbmalloc__internal__api_8h}{../tbbmalloc/tbbmalloc\_internal\_api.h}}"{}}}
\DoxyCodeLine{00526\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00527\ }
\DoxyCodeLine{00529\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Index,\ \textcolor{keyword}{typename}\ Body>}
\DoxyCodeLine{00530\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_native_parallel_for_task_a36d7a3aa4d0ec0895caeefc3a3ba8718}{NativeParallelForTask}}:\ \mbox{\hyperlink{class_no_copy_a495bdeffea1eda9d33e338e5b5cd2313}{NoCopy}}\ \{}
\DoxyCodeLine{00531\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00532\ \ \ \ \ \mbox{\hyperlink{class_native_parallel_for_task_a36d7a3aa4d0ec0895caeefc3a3ba8718}{NativeParallelForTask}}(\ Index\ index\_,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_body}{Body}}\&\ body\_\ )\ :}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_native_parallel_for_task_aac90e263b9359113ced52c9fe66ae6c4}{index}}(index\_),}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_native_parallel_for_task_abbcccdc83d6611c359a198ebeb8cb96f}{body}}(body\_)}
\DoxyCodeLine{00535\ \ \ \ \ \{\}}
\DoxyCodeLine{00536\ }
\DoxyCodeLine{00538\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_native_parallel_for_task_aa728bdd704432a7fc6aec116bbde52a9}{start}}()\ \{}
\DoxyCodeLine{00539\ \textcolor{preprocessor}{\#if\ \_WIN32||\_WIN64}}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{class_native_parallel_for_task_a56896e2de34ef5578f1f95cae3b9fdcd}{thread\_id}};}
\DoxyCodeLine{00541\ \textcolor{preprocessor}{\#if\ \_\_TBB\_WIN8UI\_SUPPORT}}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ std::thread*\ thread\_tmp=\textcolor{keyword}{new}\ std::thread(\mbox{\hyperlink{class_native_parallel_for_task_a266a0333ac8ff6ff7bc685f0283bf0a5}{thread\_function}},\ \textcolor{keyword}{this});}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ thread\_handle\ =\ thread\_tmp-\/>native\_handle();}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_native_parallel_for_task_a56896e2de34ef5578f1f95cae3b9fdcd}{thread\_id}}\ =\ 0;}
\DoxyCodeLine{00545\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ stack\_size\ =\ 0;}
\DoxyCodeLine{00547\ \textcolor{preprocessor}{\#if\ HARNESS\_THREAD\_STACK\_SIZE}}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ stack\_size\ =\ HARNESS\_THREAD\_STACK\_SIZE;}
\DoxyCodeLine{00549\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ thread\_handle\ =\ (HANDLE)\_beginthreadex(\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ stack\_size,\ \mbox{\hyperlink{class_native_parallel_for_task_a266a0333ac8ff6ff7bc685f0283bf0a5}{thread\_function}},\ \textcolor{keyword}{this},\ 0,\ \&\mbox{\hyperlink{class_native_parallel_for_task_a56896e2de34ef5578f1f95cae3b9fdcd}{thread\_id}}\ );}
\DoxyCodeLine{00551\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ thread\_handle!=0,\ \textcolor{stringliteral}{"{}NativeParallelFor:\ \_beginthreadex\ failed"{}}\ );}
\DoxyCodeLine{00553\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00554\ \textcolor{preprocessor}{\#if\ \_\_ICC==1100}}
\DoxyCodeLine{00555\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ warning\ (push)}}
\DoxyCodeLine{00556\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ warning\ (disable:\ 2193)}}
\DoxyCodeLine{00557\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_ICC==1100\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Some\ machines\ may\ have\ very\ large\ hard\ stack\ limit.\ When\ the\ test\ is}}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ launched\ by\ make,\ the\ default\ stack\ size\ is\ set\ to\ the\ hard\ limit,\ and}}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ calls\ to\ pthread\_create\ fail\ with\ out-\/of-\/memory\ error.}}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Therefore\ we\ set\ the\ stack\ size\ explicitly\ (as\ for\ TBB\ worker\ threads).}}
\DoxyCodeLine{00562\ \textcolor{preprocessor}{\#if\ !defined(HARNESS\_THREAD\_STACK\_SIZE)}}
\DoxyCodeLine{00563\ \textcolor{preprocessor}{\#if\ \_\_i386\_\_||\_\_i386||\_\_arm\_\_}}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ stack\_size\ =\ 1*\mbox{\hyperlink{harness__defs_8h_a681fc7c4f7b15c4736680eb723d58450}{MByte}};}
\DoxyCodeLine{00565\ \textcolor{preprocessor}{\#elif\ \_\_x86\_64\_\_}}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ stack\_size\ =\ 2*\mbox{\hyperlink{harness__defs_8h_a681fc7c4f7b15c4736680eb723d58450}{MByte}};}
\DoxyCodeLine{00567\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00568\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ stack\_size\ =\ 4*\mbox{\hyperlink{harness__defs_8h_a681fc7c4f7b15c4736680eb723d58450}{MByte}};}
\DoxyCodeLine{00569\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00570\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ stack\_size\ =\ HARNESS\_THREAD\_STACK\_SIZE;}
\DoxyCodeLine{00572\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ HARNESS\_THREAD\_STACK\_SIZE\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{pthread__minport__windows_8h_ad1483d9532e78abdc68abd50693a3bb6}{pthread\_attr\_t}}\ attr\_stack;}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ status\ =\ \mbox{\hyperlink{pthread__minport__windows_8h_a5c66c9042370b9d9220428bbd0108da0}{pthread\_attr\_init}}(\&attr\_stack);}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(0==status,\ \textcolor{stringliteral}{"{}NativeParallelFor:\ pthread\_attr\_init\ failed"{}});}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ status\ =\ pthread\_attr\_setstacksize(\ \&attr\_stack,\ stack\_size\ );}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(0==status,\ \textcolor{stringliteral}{"{}NativeParallelFor:\ pthread\_attr\_setstacksize\ failed"{}});}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \ \ status\ =\ \mbox{\hyperlink{pthread__minport__windows_8h_a6afb84a81a45d337464674b9ff88d41e}{pthread\_create}}(\&\mbox{\hyperlink{class_native_parallel_for_task_a56896e2de34ef5578f1f95cae3b9fdcd}{thread\_id}},\ \&attr\_stack,\ \mbox{\hyperlink{class_native_parallel_for_task_a266a0333ac8ff6ff7bc685f0283bf0a5}{thread\_function}},\ \textcolor{keyword}{this});}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(0==status,\ \textcolor{stringliteral}{"{}NativeParallelFor:\ pthread\_create\ failed"{}});}
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{pthread__minport__windows_8h_a2836afab79bfa407e60adab6001b0c73}{pthread\_attr\_destroy}}(\&attr\_stack);}
\DoxyCodeLine{00581\ \textcolor{preprocessor}{\#if\ \_\_ICC==1100}}
\DoxyCodeLine{00582\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ warning\ (pop)}}
\DoxyCodeLine{00583\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00584\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_WIN32||\_WIN64\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00585\ \ \ \ \ \}}
\DoxyCodeLine{00586\ }
\DoxyCodeLine{00588\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_native_parallel_for_task_aaa2319d8cf4c2dc9b475708081bc6239}{wait\_to\_finish}}()\ \{}
\DoxyCodeLine{00589\ \textcolor{preprocessor}{\#if\ \_WIN32||\_WIN64}}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__malloc__compliance_8cpp_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ status\ =\ WaitForSingleObjectEx(\ thread\_handle,\ INFINITE,\ \mbox{\hyperlink{tinycthread_8c_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}}\ );}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ status!=WAIT\_FAILED,\ \textcolor{stringliteral}{"{}WaitForSingleObject\ failed"{}}\ );}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ CloseHandle(\ thread\_handle\ );}
\DoxyCodeLine{00593\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ status\ =\ \mbox{\hyperlink{pthread__minport__windows_8h_ab55b290bca62946e18d5eb3c7a1c5114}{pthread\_join}}(\ \mbox{\hyperlink{class_native_parallel_for_task_a56896e2de34ef5578f1f95cae3b9fdcd}{thread\_id}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ !status,\ \textcolor{stringliteral}{"{}pthread\_join\ failed"{}}\ );}
\DoxyCodeLine{00596\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00597\ \textcolor{preprocessor}{\#if\ HARNESS\_NO\_ASSERT}}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}})status;}
\DoxyCodeLine{00599\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00600\ \ \ \ \ \}}
\DoxyCodeLine{00601\ }
\DoxyCodeLine{00602\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00603\ \textcolor{preprocessor}{\#if\ \_WIN32||\_WIN64}}
\DoxyCodeLine{00604\ \ \ \ \ HANDLE\ thread\_handle;}
\DoxyCodeLine{00605\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00606\ \ \ \ \ \mbox{\hyperlink{pthread__minport__windows_8h_ad665cf4bf4a61dd23aab712d9c5e9d81}{pthread\_t}}\ \mbox{\hyperlink{class_native_parallel_for_task_a56896e2de34ef5578f1f95cae3b9fdcd}{thread\_id}};}
\DoxyCodeLine{00607\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00608\ }
\DoxyCodeLine{00610\ \ \ \ \ \textcolor{keyword}{const}\ Index\ \mbox{\hyperlink{class_native_parallel_for_task_aac90e263b9359113ced52c9fe66ae6c4}{index}};}
\DoxyCodeLine{00611\ }
\DoxyCodeLine{00613\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_body}{Body}}\ \mbox{\hyperlink{class_native_parallel_for_task_abbcccdc83d6611c359a198ebeb8cb96f}{body}};}
\DoxyCodeLine{00614\ }
\DoxyCodeLine{00615\ \textcolor{preprocessor}{\#if\ \_WIN32||\_WIN64}}
\DoxyCodeLine{00616\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{unsigned}\ \_\_stdcall\ \mbox{\hyperlink{class_native_parallel_for_task_a266a0333ac8ff6ff7bc685f0283bf0a5}{thread\_function}}(\ \textcolor{keywordtype}{void}*\ \textcolor{keywordtype}{object}\ )}
\DoxyCodeLine{00617\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00618\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{class_native_parallel_for_task_a266a0333ac8ff6ff7bc685f0283bf0a5}{thread\_function}}(\textcolor{keywordtype}{void}*\ \textcolor{keywordtype}{object})}
\DoxyCodeLine{00619\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00620\ \ \ \ \ \{}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_native_parallel_for_task_a36d7a3aa4d0ec0895caeefc3a3ba8718}{NativeParallelForTask}}\&\ self\ =\ *\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_native_parallel_for_task_a36d7a3aa4d0ec0895caeefc3a3ba8718}{NativeParallelForTask}}*\textcolor{keyword}{>}(\mbox{\hyperlink{classobject}{object}});}
\DoxyCodeLine{00622\ \ \ \ \ \ \ \ \ (self.\mbox{\hyperlink{class_native_parallel_for_task_abbcccdc83d6611c359a198ebeb8cb96f}{body}})(self.\mbox{\hyperlink{class_native_parallel_for_task_aac90e263b9359113ced52c9fe66ae6c4}{index}});}
\DoxyCodeLine{00623\ \textcolor{preprocessor}{\#if\ HARNESS\_TBBMALLOC\_THREAD\_SHUTDOWN\ \&\&\ \_\_TBB\_SOURCE\_DIRECTLY\_INCLUDED\ \&\&\ (\_WIN32||\_WIN64)}}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ in\ those\ cases\ can't\ release\ per-\/thread\ cache\ automatically,}}
\DoxyCodeLine{00625\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ so\ do\ it\ manually}}
\DoxyCodeLine{00626\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ investigate\ less-\/intrusive\ way\ to\ do\ it,\ for\ example\ via\ FLS\ keys}}
\DoxyCodeLine{00627\ \ \ \ \ \ \ \ \ \_\_TBB\_mallocThreadShutdownNotification();}
\DoxyCodeLine{00628\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00629\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00630\ \ \ \ \ \}}
\DoxyCodeLine{00631\ \};}
\DoxyCodeLine{00632\ }
\DoxyCodeLine{00634\ }
\DoxyCodeLine{00635\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Index,\ \textcolor{keyword}{typename}\ Body>}
\DoxyCodeLine{00636\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{harness_8h_ad5b2c9cf4e169014b7919debb3c91d45}{NativeParallelFor}}(\ Index\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_body}{Body}}\&\ body\ )\ \{}
\DoxyCodeLine{00637\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{class_native_parallel_for_task}{NativeParallelForTask<Index,Body>}}\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}};}
\DoxyCodeLine{00638\ }
\DoxyCodeLine{00639\ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}>0\ )\ \{}
\DoxyCodeLine{00640\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Allocate\ array\ to\ hold\ the\ tasks}}
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}*\ \mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}}\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}*\textcolor{keyword}{>}(\textcolor{keyword}{operator}\ \textcolor{keyword}{new}(\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}*\textcolor{keyword}{sizeof}(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}})\ ));}
\DoxyCodeLine{00642\ }
\DoxyCodeLine{00643\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Construct\ the\ tasks}}
\DoxyCodeLine{00644\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ Index\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}!=\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}};\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ )}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}(\ \&\mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]\ )\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},body);}
\DoxyCodeLine{00646\ }
\DoxyCodeLine{00647\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Start\ the\ tasks}}
\DoxyCodeLine{00648\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ Index\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}!=\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}};\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ )}
\DoxyCodeLine{00649\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}();}
\DoxyCodeLine{00650\ }
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Wait\ for\ the\ tasks\ to\ finish\ and\ destroy\ each\ one.}}
\DoxyCodeLine{00652\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ Index\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}};\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};\ -\/-\/\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ )\ \{}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}-\/1].wait\_to\_finish();}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}-\/1].\string~task();}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00656\ }
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Deallocate\ the\ task\ array}}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \textcolor{keyword}{operator}\ \textcolor{keyword}{delete}(\mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}});}
\DoxyCodeLine{00659\ \ \ \ \ \}}
\DoxyCodeLine{00660\ \}}
\DoxyCodeLine{00661\ }
\DoxyCodeLine{00663\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00664\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{harness_8h_aa0749d3c849e389ed534c5c980354adc}{zero\_fill}}(\textcolor{keywordtype}{void}*\ \mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}})\ \{}
\DoxyCodeLine{00665\ \ \ \ \ memset(\mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}},\ 0,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}})*\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{00666\ \}}
\DoxyCodeLine{00667\ }
\DoxyCodeLine{00668\ \textcolor{preprocessor}{\#if\ \_\_SUNPRO\_CC\ \&\&\ defined(min)}}
\DoxyCodeLine{00669\ \textcolor{preprocessor}{\#undef\ min}}
\DoxyCodeLine{00670\ \textcolor{preprocessor}{\#undef\ max}}
\DoxyCodeLine{00671\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00672\ }
\DoxyCodeLine{00673\ \textcolor{preprocessor}{\#ifndef\ min}}
\DoxyCodeLine{00675\ }
\DoxyCodeLine{00678\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T1,\ \textcolor{keyword}{typename}\ T2>}
\DoxyCodeLine{00679\ T1\ \mbox{\hyperlink{datatypes_8h_ac6afabdc09a49a433ee19d8a9486056d}{min}}\ (\ \textcolor{keyword}{const}\ T1\&\ val1,\ \textcolor{keyword}{const}\ T2\&\ val2\ )\ \{}
\DoxyCodeLine{00680\ \ \ \ \ \textcolor{keywordflow}{return}\ val1\ <\ val2\ ?\ val1\ :\ val2;}
\DoxyCodeLine{00681\ \}}
\DoxyCodeLine{00682\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ !min\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00683\ }
\DoxyCodeLine{00684\ \textcolor{preprocessor}{\#ifndef\ max}}
\DoxyCodeLine{00686\ }
\DoxyCodeLine{00689\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T1,\ \textcolor{keyword}{typename}\ T2>}
\DoxyCodeLine{00690\ T1\ \mbox{\hyperlink{datatypes_8h_affe776513b24d84b39af8ab0930fef7f}{max}}\ (\ \textcolor{keyword}{const}\ T1\&\ val1,\ \textcolor{keyword}{const}\ T2\&\ val2\ )\ \{}
\DoxyCodeLine{00691\ \ \ \ \ \textcolor{keywordflow}{return}\ val1\ <\ val2\ ?\ val2\ :\ val1;}
\DoxyCodeLine{00692\ \}}
\DoxyCodeLine{00693\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ !max\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00694\ }
\DoxyCodeLine{00695\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00696\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{harness_8h_a2cd6d606b7a354545b2cdecca67efa44}{is\_aligned}}(\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}},\ \textcolor{keywordtype}{size\_t}\ alignment)\ \{}
\DoxyCodeLine{00697\ \ \ \ \ \textcolor{keywordflow}{return}\ 0==((size\_t)\mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}}\ \&\ \ (alignment-\/1));}
\DoxyCodeLine{00698\ \}}
\DoxyCodeLine{00699\ }
\DoxyCodeLine{00700\ \textcolor{preprocessor}{\#if\ \_\_linux\_\_}}
\DoxyCodeLine{00701\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{unsigned}\ LinuxKernelVersion()}
\DoxyCodeLine{00702\ \{}
\DoxyCodeLine{00703\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ digit1,\ digit2,\ digit3;}
\DoxyCodeLine{00704\ \ \ \ \ \textcolor{keyword}{struct\ }utsname\ utsnameBuf;}
\DoxyCodeLine{00705\ }
\DoxyCodeLine{00706\ \ \ \ \ \textcolor{keywordflow}{if}\ (-\/1\ ==\ uname(\&utsnameBuf))\ \{}
\DoxyCodeLine{00707\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness_8h_acf150291060caf91f62704d33eedcdde}{REPORT\_FATAL\_ERROR}}(\textcolor{stringliteral}{"{}Can't\ call\ uname:\ errno\ \%d\(\backslash\)n"{}},\ errno);}
\DoxyCodeLine{00708\ \ \ \ \ \ \ \ \ exit(1);}
\DoxyCodeLine{00709\ \ \ \ \ \}}
\DoxyCodeLine{00710\ \ \ \ \ \textcolor{keywordflow}{if}\ (3\ !=\ sscanf(utsnameBuf.release,\ \textcolor{stringliteral}{"{}\%u.\%u.\%u"{}},\ \&digit1,\ \&digit2,\ \&digit3))\ \{}
\DoxyCodeLine{00711\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{harness_8h_acf150291060caf91f62704d33eedcdde}{REPORT\_FATAL\_ERROR}}(\textcolor{stringliteral}{"{}Unable\ to\ parse\ OS\ release\ '\%s'\(\backslash\)n"{}},\ utsnameBuf.release);}
\DoxyCodeLine{00712\ \ \ \ \ \ \ \ \ exit(1);}
\DoxyCodeLine{00713\ \ \ \ \ \}}
\DoxyCodeLine{00714\ \ \ \ \ \textcolor{keywordflow}{return}\ 1000000*digit1+1000*digit2+digit3;}
\DoxyCodeLine{00715\ \}}
\DoxyCodeLine{00716\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00717\ }
\DoxyCodeLine{00718\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_harness}{Harness}}\ \{}
\DoxyCodeLine{00719\ }
\DoxyCodeLine{00720\ \textcolor{preprocessor}{\#if\ !HARNESS\_NO\_ASSERT}}
\DoxyCodeLine{00722\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_harness_1_1_no_afterlife_a798d25e3763f1e6f65f934c8c2a7020f}{NoAfterlife}}\ \{}
\DoxyCodeLine{00723\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00724\ \ \ \ \ \textcolor{keyword}{enum}\ \mbox{\hyperlink{class_harness_1_1_no_afterlife_a05d7ce25b8fa1e71ee33c0dac39794ba}{state\_t}}\ \{}
\DoxyCodeLine{00725\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_harness_1_1_no_afterlife_a05d7ce25b8fa1e71ee33c0dac39794baaf85dffbfaddb72019ca39012a201d7a0}{LIVE}}=0x56781234,}
\DoxyCodeLine{00726\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_harness_1_1_no_afterlife_a05d7ce25b8fa1e71ee33c0dac39794baa3178734019551d1f74fb627db65c7424}{DEAD}}=0xDEADBEEF}
\DoxyCodeLine{00727\ \ \ \ \ \}\ \mbox{\hyperlink{class_harness_1_1_no_afterlife_a06c1a114acb5114e2ce52a402318c3de}{m\_state}};}
\DoxyCodeLine{00728\ }
\DoxyCodeLine{00729\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00730\ \ \ \ \ \mbox{\hyperlink{class_harness_1_1_no_afterlife_a798d25e3763f1e6f65f934c8c2a7020f}{NoAfterlife}}()\ :\ \mbox{\hyperlink{class_harness_1_1_no_afterlife_a06c1a114acb5114e2ce52a402318c3de}{m\_state}}(\mbox{\hyperlink{class_harness_1_1_no_afterlife_a05d7ce25b8fa1e71ee33c0dac39794baaf85dffbfaddb72019ca39012a201d7a0}{LIVE}})\ \{\}}
\DoxyCodeLine{00731\ \ \ \ \ \mbox{\hyperlink{class_harness_1_1_no_afterlife_acc8279e524e1c9900b2bb768d534b003}{NoAfterlife}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_harness_1_1_no_afterlife_a798d25e3763f1e6f65f934c8c2a7020f}{NoAfterlife}}\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}\ )\ :\ \mbox{\hyperlink{class_harness_1_1_no_afterlife_a06c1a114acb5114e2ce52a402318c3de}{m\_state}}(\mbox{\hyperlink{class_harness_1_1_no_afterlife_a05d7ce25b8fa1e71ee33c0dac39794baaf85dffbfaddb72019ca39012a201d7a0}{LIVE}})\ \{}
\DoxyCodeLine{00732\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.IsLive(),\ \textcolor{stringliteral}{"{}Constructing\ from\ the\ dead\ source"{}}\ );}
\DoxyCodeLine{00733\ \ \ \ \ \}}
\DoxyCodeLine{00734\ \ \ \ \ \mbox{\hyperlink{class_harness_1_1_no_afterlife_a33083e6e986942a5bf1da6adefb05fc2}{\string~NoAfterlife}}()\ \{}
\DoxyCodeLine{00735\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{class_harness_1_1_no_afterlife_abbd1668373bd0042fcb1f121b27542db}{IsLive}}(),\ \textcolor{stringliteral}{"{}Repeated\ destructor\ call"{}}\ );}
\DoxyCodeLine{00736\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_harness_1_1_no_afterlife_a06c1a114acb5114e2ce52a402318c3de}{m\_state}}\ =\ \mbox{\hyperlink{class_harness_1_1_no_afterlife_a05d7ce25b8fa1e71ee33c0dac39794baa3178734019551d1f74fb627db65c7424}{DEAD}};}
\DoxyCodeLine{00737\ \ \ \ \ \}}
\DoxyCodeLine{00738\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_harness_1_1_no_afterlife_a798d25e3763f1e6f65f934c8c2a7020f}{NoAfterlife}}\&\ \mbox{\hyperlink{class_harness_1_1_no_afterlife_a601ce5580ea44b16fcf2ba30d8567297}{operator=}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_harness_1_1_no_afterlife_a798d25e3763f1e6f65f934c8c2a7020f}{NoAfterlife}}\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}\ )\ \{}
\DoxyCodeLine{00739\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{class_harness_1_1_no_afterlife_abbd1668373bd0042fcb1f121b27542db}{IsLive}}(),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00740\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.IsLive(),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00741\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00742\ \ \ \ \ \}}
\DoxyCodeLine{00743\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_harness_1_1_no_afterlife_a19cd27bd7a811564fab7406295191fcd}{AssertLive}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00744\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{class_harness_1_1_no_afterlife_abbd1668373bd0042fcb1f121b27542db}{IsLive}}(),\ \textcolor{stringliteral}{"{}Already\ dead"{}}\ );}
\DoxyCodeLine{00745\ \ \ \ \ \}}
\DoxyCodeLine{00746\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_harness_1_1_no_afterlife_abbd1668373bd0042fcb1f121b27542db}{IsLive}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00747\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_harness_1_1_no_afterlife_a06c1a114acb5114e2ce52a402318c3de}{m\_state}}\ ==\ \mbox{\hyperlink{class_harness_1_1_no_afterlife_a05d7ce25b8fa1e71ee33c0dac39794baaf85dffbfaddb72019ca39012a201d7a0}{LIVE}};}
\DoxyCodeLine{00748\ \ \ \ \ \}}
\DoxyCodeLine{00749\ \};\ \textcolor{comment}{//\ NoAfterlife}}
\DoxyCodeLine{00750\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ !HARNESS\_NO\_ASSERT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00751\ }
\DoxyCodeLine{00752\ \textcolor{preprocessor}{\#if\ \_WIN32\ ||\ \_WIN64}}
\DoxyCodeLine{00753\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_harness_a6109bacdcb4cd184d842b933d7fb18a4}{Sleep}}\ (\ \textcolor{keywordtype}{int}\ ms\ )\ \{}
\DoxyCodeLine{00754\ \textcolor{preprocessor}{\#if\ !\_\_TBB\_WIN8UI\_SUPPORT}}
\DoxyCodeLine{00755\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_harness_a6109bacdcb4cd184d842b933d7fb18a4}{::Sleep}}(ms);}
\DoxyCodeLine{00756\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ \ std::chrono::milliseconds\ sleep\_time(\ ms\ );}
\DoxyCodeLine{00758\ \ \ \ \ \ \ \ \ \ std::this\_thread::sleep\_for(\ sleep\_time\ );}
\DoxyCodeLine{00759\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00760\ }
\DoxyCodeLine{00761\ \ \ \ \ \}}
\DoxyCodeLine{00762\ }
\DoxyCodeLine{00763\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{test__malloc__compliance_8cpp_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ \mbox{\hyperlink{namespace_harness_a8dcaafd107ad9fba52286ab3fabe68b6}{tid\_t}};}
\DoxyCodeLine{00764\ \ \ \ \ \mbox{\hyperlink{namespace_harness_a8dcaafd107ad9fba52286ab3fabe68b6}{tid\_t}}\ \mbox{\hyperlink{namespace_harness_a3592f6148257145315e054c1e36cea9e}{CurrentTid}}\ ()\ \{\ \textcolor{keywordflow}{return}\ GetCurrentThreadId();\ \}}
\DoxyCodeLine{00765\ }
\DoxyCodeLine{00766\ \textcolor{preprocessor}{\#else\ }\textcolor{comment}{/*\ !WIN\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00767\ }
\DoxyCodeLine{00768\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_harness_a6109bacdcb4cd184d842b933d7fb18a4}{Sleep}}\ (\ \textcolor{keywordtype}{int}\ ms\ )\ \{}
\DoxyCodeLine{00769\ \ \ \ \ \ \ \ \ timespec\ \ requested\ =\ \{\ ms\ /\ 1000,\ (ms\ \%\ 1000)*1000000\ \};}
\DoxyCodeLine{00770\ \ \ \ \ \ \ \ \ timespec\ \ remaining\ =\ \{\ 0,\ 0\ \};}
\DoxyCodeLine{00771\ \ \ \ \ \ \ \ \ nanosleep(\&requested,\ \&remaining);}
\DoxyCodeLine{00772\ \ \ \ \ \}}
\DoxyCodeLine{00773\ }
\DoxyCodeLine{00774\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{pthread__minport__windows_8h_ad665cf4bf4a61dd23aab712d9c5e9d81}{pthread\_t}}\ \mbox{\hyperlink{namespace_harness_a8dcaafd107ad9fba52286ab3fabe68b6}{tid\_t}};}
\DoxyCodeLine{00775\ \ \ \ \ \mbox{\hyperlink{namespace_harness_a8dcaafd107ad9fba52286ab3fabe68b6}{tid\_t}}\ \mbox{\hyperlink{namespace_harness_a3592f6148257145315e054c1e36cea9e}{CurrentTid}}\ ()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{pthread__minport__windows_8h_a31ffbf449d7404f9bb088564190c6bce}{pthread\_self}}();\ \}}
\DoxyCodeLine{00776\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ !WIN\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00777\ }
\DoxyCodeLine{00778\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespace_harness_a0a8a8cbd7efc5037b6dc773772a4b89a}{Primes}}[]\ =\ \{}
\DoxyCodeLine{00779\ \ \ \ \ \ \ \ \ 0x9e3779b1,\ 0xffe6cc59,\ 0x2109f6dd,\ 0x43977ab5,\ 0xba5703f5,\ 0xb495a877,\ 0xe1626741,\ 0x79695e6b,}
\DoxyCodeLine{00780\ \ \ \ \ \ \ \ \ 0xbc98c09f,\ 0xd5bee2b3,\ 0x287488f9,\ 0x3af18231,\ 0x9677cd4d,\ 0xbe3a6929,\ 0xadc6a877,\ 0xdcf0674b,}
\DoxyCodeLine{00781\ \ \ \ \ \ \ \ \ 0xbe4d6fe9,\ 0x5f15e201,\ 0x99afc3fd,\ 0xf3f16801,\ 0xe222cfff,\ 0x24ba5fdb,\ 0x0620452d,\ 0x79f149e3,}
\DoxyCodeLine{00782\ \ \ \ \ \ \ \ \ 0xc8b93f49,\ 0x972702cd,\ 0xb07dd827,\ 0x6c97d5ed,\ 0x085a3d61,\ 0x46eb5ea7,\ 0x3d9910ed,\ 0x2e687b5b,}
\DoxyCodeLine{00783\ \ \ \ \ \ \ \ \ 0x29609227,\ 0x6eb081f1,\ 0x0954c4e1,\ 0x9d114db9,\ 0x542acfa9,\ 0xb3e6bd7b,\ 0x0742d917,\ 0xe9f3ffa7,}
\DoxyCodeLine{00784\ \ \ \ \ \ \ \ \ 0x54581edb,\ 0xf2480f45,\ 0x0bb9288f,\ 0xef1affc7,\ 0x85fa0ca7,\ 0x3ccc14db,\ 0xe6baf34b,\ 0x343377f7,}
\DoxyCodeLine{00785\ \ \ \ \ \ \ \ \ 0x5ca19031,\ 0xe6d9293b,\ 0xf0a9f391,\ 0x5d2e980b,\ 0xfc411073,\ 0xc3749363,\ 0xb892d829,\ 0x3549366b,}
\DoxyCodeLine{00786\ \ \ \ \ \ \ \ \ 0x629750ad,\ 0xb98294e5,\ 0x892d9483,\ 0xc235baf3,\ 0x3d2402a3,\ 0x6bdef3c9,\ 0xbec333cd,\ 0x40c9520f}
\DoxyCodeLine{00787\ \ \ \ \ \};}
\DoxyCodeLine{00788\ }
\DoxyCodeLine{00789\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_harness_1_1_fast_random_a6656c1020c77c55a6aac6f42b5f0dc95}{FastRandom}}\ \{}
\DoxyCodeLine{00790\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{class_harness_1_1_fast_random_a05c5054db77c0cb0ccdf68d5cc54b00e}{x}},\ \mbox{\hyperlink{class_harness_1_1_fast_random_a78df17393954ea4e26f32eca43970efd}{a}};}
\DoxyCodeLine{00791\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00792\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \mbox{\hyperlink{class_harness_1_1_fast_random_a23ef27808783a96f286caf2f1af4d3dc}{get}}()\ \{}
\DoxyCodeLine{00793\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{sugar_8h_a98b46ebc5db8634abbe815de6beee009}{short}})(\mbox{\hyperlink{class_harness_1_1_fast_random_a05c5054db77c0cb0ccdf68d5cc54b00e}{x}}\ >>\ 16);}
\DoxyCodeLine{00794\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_harness_1_1_fast_random_a05c5054db77c0cb0ccdf68d5cc54b00e}{x}}\ =\ \mbox{\hyperlink{class_harness_1_1_fast_random_a05c5054db77c0cb0ccdf68d5cc54b00e}{x}}*\mbox{\hyperlink{class_harness_1_1_fast_random_a78df17393954ea4e26f32eca43970efd}{a}}\ +\ 1;}
\DoxyCodeLine{00795\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}};}
\DoxyCodeLine{00796\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00797\ \ \ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_harness_1_1_fast_random_a6656c1020c77c55a6aac6f42b5f0dc95}{FastRandom}}(\ \textcolor{keywordtype}{unsigned}\ seed\ )\ \{}
\DoxyCodeLine{00798\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_harness_1_1_fast_random_a05c5054db77c0cb0ccdf68d5cc54b00e}{x}}\ =\ seed;}
\DoxyCodeLine{00799\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_harness_1_1_fast_random_a78df17393954ea4e26f32eca43970efd}{a}}\ =\ \mbox{\hyperlink{namespace_harness_a0a8a8cbd7efc5037b6dc773772a4b89a}{Primes}}[seed\ \%\ (\textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespace_harness_a0a8a8cbd7efc5037b6dc773772a4b89a}{Primes}})\ /\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespace_harness_a0a8a8cbd7efc5037b6dc773772a4b89a}{Primes}}[0]))];}
\DoxyCodeLine{00800\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00801\ \ \ \ \ \};}
\DoxyCodeLine{00802\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00803\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_harness_1_1_fast_random_body_a5652e43f449fd97ea2d435a627f6601b}{FastRandomBody}}\ \{}
\DoxyCodeLine{00804\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_harness_1_1_fast_random}{FastRandom}}\ \mbox{\hyperlink{class_harness_1_1_fast_random_body_ac66dce9a8bc086f4dff481624bef0e1d}{r}};}
\DoxyCodeLine{00805\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_harness_1_1_fast_random_body_a5652e43f449fd97ea2d435a627f6601b}{FastRandomBody}}(\ \textcolor{keywordtype}{unsigned}\ seed\ )\ :\ \mbox{\hyperlink{class_harness_1_1_fast_random_body_ac66dce9a8bc086f4dff481624bef0e1d}{r}}(seed)\ \{\}}
\DoxyCodeLine{00807\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Depending\ on\ the\ input\ type\ T\ the\ result\ distribution\ formed\ from\ this\ operator()}}
\DoxyCodeLine{00808\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ might\ possess\ different\ characteristics\ than\ the\ original\ one\ used\ in\ FastRandom\ instance.}}
\DoxyCodeLine{00809\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{class_harness_1_1_fast_random_body_a2592e3bf95ea4069e89019c371e86ddf}{operator()}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(\mbox{\hyperlink{class_harness_1_1_fast_random_body_ac66dce9a8bc086f4dff481624bef0e1d}{r}}.get());\ \}}
\DoxyCodeLine{00810\ \ \ \ \ \};}
\DoxyCodeLine{00811\ }
\DoxyCodeLine{00812\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespace_harness_a02cbb1155b17196bacbbb2bd45df976e}{SetEnv}}(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *envname,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *envval\ )\ \{}
\DoxyCodeLine{00813\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ envname\ \&\&\ envval,\ \textcolor{stringliteral}{"{}Harness::SetEnv()\ requires\ two\ valid\ C\ strings"{}}\ );}
\DoxyCodeLine{00814\ \textcolor{preprocessor}{\#if\ \_\_TBB\_WIN8UI\_SUPPORT}}
\DoxyCodeLine{00815\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}Harness::SetEnv()\ should\ not\ be\ called\ in\ code\ built\ for\ win8ui"{}}\ );}
\DoxyCodeLine{00816\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00817\ \textcolor{preprocessor}{\#elif\ !(\_MSC\_VER\ ||\ \_\_MINGW32\_\_\ ||\ \_\_MINGW64\_\_)}}
\DoxyCodeLine{00818\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ On\ POSIX\ systems\ use\ setenv}}
\DoxyCodeLine{00819\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ setenv(envname,\ envval,\ \textcolor{comment}{/*overwrite=*/}1);}
\DoxyCodeLine{00820\ \textcolor{preprocessor}{\#elif\ \_\_STDC\_SECURE\_LIB\_\_>=200411}}
\DoxyCodeLine{00821\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ macro\ is\ set\ in\ VC\ \&\ MinGW\ if\ secure\ API\ functions\ are\ present}}
\DoxyCodeLine{00822\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_putenv\_s(envname,\ envval);}
\DoxyCodeLine{00823\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00824\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ no\ secure\ API\ on\ Windows,\ use\ \_putenv}}
\DoxyCodeLine{00825\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{ittnotify__static_8h_a5c07bf8d6fd034e65754468ed6e37d1b}{namelen}}\ =\ strlen(envname),\ valuelen\ =\ strlen(envval);}
\DoxyCodeLine{00826\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}*\ buf\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{char}[\mbox{\hyperlink{ittnotify__static_8h_a5c07bf8d6fd034e65754468ed6e37d1b}{namelen}}+valuelen+2];}
\DoxyCodeLine{00827\ \ \ \ \ \ \ \ \ strncpy(buf,\ envname,\ \mbox{\hyperlink{ittnotify__static_8h_a5c07bf8d6fd034e65754468ed6e37d1b}{namelen}});}
\DoxyCodeLine{00828\ \ \ \ \ \ \ \ \ buf[\mbox{\hyperlink{ittnotify__static_8h_a5c07bf8d6fd034e65754468ed6e37d1b}{namelen}}]\ =\ \textcolor{charliteral}{'='};}
\DoxyCodeLine{00829\ \ \ \ \ \ \ \ \ strncpy(buf+\mbox{\hyperlink{ittnotify__static_8h_a5c07bf8d6fd034e65754468ed6e37d1b}{namelen}}+1,\ envval,\ valuelen);}
\DoxyCodeLine{00830\ \ \ \ \ \ \ \ \ buf[\mbox{\hyperlink{ittnotify__static_8h_a5c07bf8d6fd034e65754468ed6e37d1b}{namelen}}+1+valuelen]\ =\ char(0);}
\DoxyCodeLine{00831\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ status\ =\ \_putenv(buf);}
\DoxyCodeLine{00832\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}[]\ buf;}
\DoxyCodeLine{00833\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ status;}
\DoxyCodeLine{00834\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00835\ \ \ \ \ \}}
\DoxyCodeLine{00836\ }
\DoxyCodeLine{00837\ \ \ \ \ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{namespace_harness_a088ad693af4f25a5b0d97dad282ae93e}{GetEnv}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *envname)\ \{}
\DoxyCodeLine{00838\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(envname,\ \textcolor{stringliteral}{"{}Harness::GetEnv()\ requires\ a\ valid\ C\ string"{}});}
\DoxyCodeLine{00839\ \textcolor{preprocessor}{\#if\ \_\_TBB\_WIN8UI\_SUPPORT}}
\DoxyCodeLine{00840\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00841\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00842\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::getenv(envname);}
\DoxyCodeLine{00843\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00844\ \ \ \ \ \}}
\DoxyCodeLine{00845\ }
\DoxyCodeLine{00846\ \ \ \ \ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{namespace_harness_aa36f98ebd2a6eaa6c73dae1c46a1d6b7}{GetIntEnv}}(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\ envname\ )\ \{}
\DoxyCodeLine{00847\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(envname,\ \textcolor{stringliteral}{"{}Harness::GetIntEnv()\ requires\ a\ valid\ C\ string"{}});}
\DoxyCodeLine{00848\ \textcolor{preprocessor}{\#if\ !\_\_TBB\_WIN8UI\_SUPPORT}}
\DoxyCodeLine{00849\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ std::getenv(envname)\ )\{}
\DoxyCodeLine{00850\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{namespace_harness_ab1be15de63e4c94f6f879c6ef290f4a5}{end}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00851\ \ \ \ \ \ \ \ \ \ \ \ \ errno\ =\ 0;}
\DoxyCodeLine{00852\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abe8e049f756b5ba547bda825af81b645}{value}}\ =\ std::strtol(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}},\ \&\mbox{\hyperlink{namespace_harness_ab1be15de63e4c94f6f879c6ef290f4a5}{end}},\ 10);}
\DoxyCodeLine{00853\ }
\DoxyCodeLine{00854\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ have\ exceeded\ the\ range,\ value\ is\ negative\ or\ string\ is\ incovertable}}
\DoxyCodeLine{00855\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ errno\ ==\ ERANGE\ ||\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abe8e049f756b5ba547bda825af81b645}{value}}\ <\ 0\ ||\ \mbox{\hyperlink{namespace_harness_ab1be15de63e4c94f6f879c6ef290f4a5}{end}}==\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ )}
\DoxyCodeLine{00856\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00857\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00858\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00859\ }
\DoxyCodeLine{00860\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ ;\ *\mbox{\hyperlink{namespace_harness_ab1be15de63e4c94f6f879c6ef290f4a5}{end}}\ !=\ \textcolor{charliteral}{'\(\backslash\)0'};\ \mbox{\hyperlink{namespace_harness_ab1be15de63e4c94f6f879c6ef290f4a5}{end}}++\ )}
\DoxyCodeLine{00861\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00862\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !std::isspace(*\mbox{\hyperlink{namespace_harness_ab1be15de63e4c94f6f879c6ef290f4a5}{end}})\ )}
\DoxyCodeLine{00863\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00864\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00865\ }
\DoxyCodeLine{00866\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abe8e049f756b5ba547bda825af81b645}{value}};}
\DoxyCodeLine{00867\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00868\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00869\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00870\ \ \ \ \ \}}
\DoxyCodeLine{00871\ }
\DoxyCodeLine{00872\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_harness_1_1_dummy_body_a4a8ca96b4506d4abbcf2829baab083ae}{DummyBody}}\ \{}
\DoxyCodeLine{00873\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_harness_1_1_dummy_body_afe4b67e1b7e41d448a3d7b84c07d325d}{m\_numIters}};}
\DoxyCodeLine{00874\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00875\ \ \ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_harness_1_1_dummy_body_a4a8ca96b4506d4abbcf2829baab083ae}{DummyBody}}(\ \textcolor{keywordtype}{int}\ iters\ )\ :\ \mbox{\hyperlink{class_harness_1_1_dummy_body_afe4b67e1b7e41d448a3d7b84c07d325d}{m\_numIters}}(\ iters\ )\ \{\}}
\DoxyCodeLine{00876\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_harness_1_1_dummy_body_a26143465e6299206f5d5225b12450627}{operator()}}(\ \textcolor{keywordtype}{int}\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00877\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ \mbox{\hyperlink{class_harness_1_1_dummy_body_afe4b67e1b7e41d448a3d7b84c07d325d}{m\_numIters}};\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ )\ \{\}}
\DoxyCodeLine{00878\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00879\ \ \ \ \ \};}
\DoxyCodeLine{00880\ \}\ \textcolor{comment}{//\ namespace\ Harness}}
\DoxyCodeLine{00881\ }
\DoxyCodeLine{00882\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ tbb\_tests\_harness\_H\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
