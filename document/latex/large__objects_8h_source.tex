\doxysection{large\+\_\+objects.\+h}
\hypertarget{large__objects_8h_source}{}\label{large__objects_8h_source}\index{external/taskflow/3rd-\/party/tbb/src/tbbmalloc/large\_objects.h@{external/taskflow/3rd-\/party/tbb/src/tbbmalloc/large\_objects.h}}
\mbox{\hyperlink{large__objects_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#ifndef\ \_\_TBB\_tbbmalloc\_internal\_H}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\ \ \ \ \#error\ tbbmalloc\_internal.h\ must\ be\ included\ at\ this\ point}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#ifndef\ \_\_TBB\_large\_objects\_H}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#define\ \_\_TBB\_large\_objects\_H}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00025\ \textcolor{comment}{/*\ \ Declared\ here\ to\ avoid\ Solaris\ Studio*\ 12.2\ "{}multiple\ definitions"{}\ error\ */}}
\DoxyCodeLine{00026\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{large__objects_8h_a727651077598cc74993e6893953acbef}{CacheBinOperationType}}\ \{}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{large__objects_8h_a727651077598cc74993e6893953acbefa26c5ae895f3ab94aa1c193748bde4c5a}{CBOP\_INVALID}}\ =\ 0,}
\DoxyCodeLine{00028\ \ \ \ \ \mbox{\hyperlink{large__objects_8h_a727651077598cc74993e6893953acbefa77b34e0f684d3bc4f7bd177bb82f1775}{CBOP\_GET}},}
\DoxyCodeLine{00029\ \ \ \ \ \mbox{\hyperlink{large__objects_8h_a727651077598cc74993e6893953acbefad6dd4172b5a21cfe71ae40d38edf219e}{CBOP\_PUT\_LIST}},}
\DoxyCodeLine{00030\ \ \ \ \ \mbox{\hyperlink{large__objects_8h_a727651077598cc74993e6893953acbefa74494b4faea516118e6f7a43728c75c7}{CBOP\_CLEAN\_TO\_THRESHOLD}},}
\DoxyCodeLine{00031\ \ \ \ \ \mbox{\hyperlink{large__objects_8h_a727651077598cc74993e6893953acbefa777f3f89f6a53e31e59864f21eb64497}{CBOP\_CLEAN\_ALL}},}
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{large__objects_8h_a727651077598cc74993e6893953acbefa0a9341ef629bac797fbeaeef7ed69775}{CBOP\_UPDATE\_USED\_SIZE}}}
\DoxyCodeLine{00033\ \};}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{comment}{//\ The\ Cache\ Bin\ Aggregator\ operation\ status\ list.}}
\DoxyCodeLine{00036\ \textcolor{comment}{//\ CBST\_NOWAIT\ can\ be\ specified\ for\ non-\/blocking\ operations.}}
\DoxyCodeLine{00037\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{large__objects_8h_a6b7134ed74f0cdf77945ded58dc98880}{CacheBinOperationStatus}}\ \{}
\DoxyCodeLine{00038\ \ \ \ \ \mbox{\hyperlink{large__objects_8h_a6b7134ed74f0cdf77945ded58dc98880a4cfc627ab04e138b85f0abb7ad52967b}{CBST\_WAIT}}\ =\ 0,}
\DoxyCodeLine{00039\ \ \ \ \ \mbox{\hyperlink{large__objects_8h_a6b7134ed74f0cdf77945ded58dc98880a925f0350c82396a008427d564782168e}{CBST\_NOWAIT}},}
\DoxyCodeLine{00040\ \ \ \ \ \mbox{\hyperlink{large__objects_8h_a6b7134ed74f0cdf77945ded58dc98880a0507f952408b624469d73720f9de6fca}{CBST\_DONE}}}
\DoxyCodeLine{00041\ \};}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{comment}{/*}}
\DoxyCodeLine{00044\ \textcolor{comment}{\ *\ Bins\ that\ grow\ with\ arithmetic\ step}}
\DoxyCodeLine{00045\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00046\ \textcolor{keyword}{template}<\textcolor{keywordtype}{size\_t}\ MIN\_SIZE,\ \textcolor{keywordtype}{size\_t}\ MAX\_SIZE>}
\DoxyCodeLine{00047\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_large_bin_structure_props}{LargeBinStructureProps}}\ \{}
\DoxyCodeLine{00048\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \ \ \mbox{\hyperlink{struct_large_bin_structure_props_a6a799b7f5c300679927d8c87c892da1b}{MinSize}}\ =\ MIN\_SIZE,\ \mbox{\hyperlink{struct_large_bin_structure_props_a84416482fb0b4701d8547380f689a5c5}{MaxSize}}\ =\ \mbox{\hyperlink{test__malloc__compliance_8cpp_a433c2184d2e5d5dd91f3871867a97d99}{MAX\_SIZE}};}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \ \ \mbox{\hyperlink{struct_large_bin_structure_props_ac6b15e5c28a2b3244ba099744a8aeb49}{CacheStep}}\ =\ 8\ *\ 1024;}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{struct_large_bin_structure_props_a0480515da67921809df8fe17fd7dd52b}{NumBins}}\ =\ (\mbox{\hyperlink{struct_large_bin_structure_props_a84416482fb0b4701d8547380f689a5c5}{MaxSize}}\ -\/\ \mbox{\hyperlink{struct_large_bin_structure_props_a6a799b7f5c300679927d8c87c892da1b}{MinSize}})\ /\ \mbox{\hyperlink{struct_large_bin_structure_props_ac6b15e5c28a2b3244ba099744a8aeb49}{CacheStep}};}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{struct_large_bin_structure_props_a4677ad0ec0ea931256c3260d0078ebaa}{alignToBin}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}})\ \{}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{shared__utils_8h_abf7a0e928f58ffeeefa291f674c30d69}{alignUp}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ \mbox{\hyperlink{struct_large_bin_structure_props_ac6b15e5c28a2b3244ba099744a8aeb49}{CacheStep}});}
\DoxyCodeLine{00055\ \ \ \ \ \}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_large_bin_structure_props_ac9dc67df429ae7ad076875b727d155eb}{sizeToIdx}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}})\ \{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_customize_8h_ab07698dd675204d120111c1300b4185c}{MALLOC\_ASSERT}}(\mbox{\hyperlink{struct_large_bin_structure_props_a6a799b7f5c300679927d8c87c892da1b}{MinSize}}\ <=\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ \&\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ <\ \mbox{\hyperlink{struct_large_bin_structure_props_a84416482fb0b4701d8547380f689a5c5}{MaxSize}},\ \mbox{\hyperlink{tbbmalloc__internal_8h_a3b823c1707df8bd6d7d8b7cdb8b6dc6d}{ASSERT\_TEXT}});}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_customize_8h_ab07698dd675204d120111c1300b4185c}{MALLOC\_ASSERT}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ \%\ \mbox{\hyperlink{struct_large_bin_structure_props_ac6b15e5c28a2b3244ba099744a8aeb49}{CacheStep}}\ ==\ 0,\ \mbox{\hyperlink{tbbmalloc__internal_8h_a3b823c1707df8bd6d7d8b7cdb8b6dc6d}{ASSERT\_TEXT}});}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ -\/\ \mbox{\hyperlink{struct_large_bin_structure_props_a6a799b7f5c300679927d8c87c892da1b}{MinSize}})\ /\ \mbox{\hyperlink{struct_large_bin_structure_props_ac6b15e5c28a2b3244ba099744a8aeb49}{CacheStep}};}
\DoxyCodeLine{00061\ \ \ \ \ \}}
\DoxyCodeLine{00062\ \};}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \textcolor{comment}{/*}}
\DoxyCodeLine{00065\ \textcolor{comment}{\ *\ Bins\ that\ grow\ with\ special\ geometric\ progression.}}
\DoxyCodeLine{00066\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00067\ \textcolor{keyword}{template}<\textcolor{keywordtype}{size\_t}\ MIN\_SIZE,\ \textcolor{keywordtype}{size\_t}\ MAX\_SIZE>}
\DoxyCodeLine{00068\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_huge_bin_structure_props}{HugeBinStructureProps}}\ \{}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{comment}{//\ Sizes\ grow\ with\ the\ following\ formula:\ Size\ =\ MinSize\ *\ (2\ \string^\ (Index\ /\ StepFactor))}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{comment}{//\ There\ are\ StepFactor\ bins\ (8\ be\ default)\ between\ each\ power\ of\ 2\ bin}}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_huge_bin_structure_props_a11942e86a2d73435b0274fcd177b1add}{MaxSizeExp}}\ \ \ \ =\ \mbox{\hyperlink{struct_log2_acd8affab1bfa8f823e9cca7131944f40}{Log2<MAX\_SIZE>::value}};}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_huge_bin_structure_props_afdedaf1f01ba1f9bc3c527098ff18983}{MinSizeExp}}\ \ \ \ =\ \mbox{\hyperlink{struct_log2_acd8affab1bfa8f823e9cca7131944f40}{Log2<MIN\_SIZE>::value}};}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_huge_bin_structure_props_ad6afd8ccac43ae7786461388745522e3}{StepFactor}}\ \ \ \ =\ 8;}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_huge_bin_structure_props_a2fa15465247f3dffecca083287f6a386}{StepFactorExp}}\ =\ \mbox{\hyperlink{struct_log2_acd8affab1bfa8f823e9cca7131944f40}{Log2<StepFactor>::value}};}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \ \ \mbox{\hyperlink{struct_huge_bin_structure_props_acc06eaca0fa347185a955474bf67f37e}{MinSize}}\ =\ MIN\_SIZE,\ \mbox{\hyperlink{struct_huge_bin_structure_props_acefbdbc6d9fc1ec34a1d81602543d98f}{MaxSize}}\ =\ \mbox{\hyperlink{test__malloc__compliance_8cpp_a433c2184d2e5d5dd91f3871867a97d99}{MAX\_SIZE}};}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{struct_huge_bin_structure_props_a2327abea3585ef7b86edf2f4fabf45e9}{NumBins}}\ =\ (\mbox{\hyperlink{struct_huge_bin_structure_props_a11942e86a2d73435b0274fcd177b1add}{MaxSizeExp}}\ -\/\ \mbox{\hyperlink{struct_huge_bin_structure_props_afdedaf1f01ba1f9bc3c527098ff18983}{MinSizeExp}})\ *\ \mbox{\hyperlink{struct_huge_bin_structure_props_ad6afd8ccac43ae7786461388745522e3}{StepFactor}};}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{struct_huge_bin_structure_props_a306f40e6caa58bd770b512407757d3f8}{alignToBin}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}})\ \{}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ minorStepExp\ =\ \mbox{\hyperlink{_customize_8h_a796241035a56fb632a5cb9686deaa00f}{BitScanRev}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}})\ -\/\ \mbox{\hyperlink{struct_huge_bin_structure_props_a2fa15465247f3dffecca083287f6a386}{StepFactorExp}};}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{shared__utils_8h_abf7a0e928f58ffeeefa291f674c30d69}{alignUp}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ 1ULL\ <<\ minorStepExp);}
\DoxyCodeLine{00085\ \ \ \ \ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{comment}{//\ Sizes\ between\ the\ power\ of\ 2\ values\ are\ aproximated\ to\ StepFactor.}}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_huge_bin_structure_props_a9d1294d484af2e37e90b13b05c817ddd}{sizeToIdx}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}})\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_customize_8h_ab07698dd675204d120111c1300b4185c}{MALLOC\_ASSERT}}(\mbox{\hyperlink{struct_huge_bin_structure_props_acc06eaca0fa347185a955474bf67f37e}{MinSize}}\ <=\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ \&\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ <=\ \mbox{\hyperlink{struct_huge_bin_structure_props_acefbdbc6d9fc1ec34a1d81602543d98f}{MaxSize}},\ \mbox{\hyperlink{tbbmalloc__internal_8h_a3b823c1707df8bd6d7d8b7cdb8b6dc6d}{ASSERT\_TEXT}});}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ sizeExp\ =\ (\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}})\mbox{\hyperlink{_customize_8h_a796241035a56fb632a5cb9686deaa00f}{BitScanRev}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});\ \textcolor{comment}{//\ same\ as\ \_\_TBB\_Log2}}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ majorStepSize\ =\ 1ULL\ <<\ sizeExp;}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ minorStepExp\ =\ sizeExp\ -\/\ \mbox{\hyperlink{struct_huge_bin_structure_props_a2fa15465247f3dffecca083287f6a386}{StepFactorExp}};}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ minorIdx\ =\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ -\/\ majorStepSize)\ >>\ minorStepExp;}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_customize_8h_ab07698dd675204d120111c1300b4185c}{MALLOC\_ASSERT}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ ==\ majorStepSize\ +\ ((\textcolor{keywordtype}{size\_t})minorIdx\ <<\ minorStepExp),}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Size\ is\ not\ aligned\ on\ the\ bin"{}});}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_huge_bin_structure_props_ad6afd8ccac43ae7786461388745522e3}{StepFactor}}\ *\ (sizeExp\ -\/\ \mbox{\hyperlink{struct_huge_bin_structure_props_afdedaf1f01ba1f9bc3c527098ff18983}{MinSizeExp}})\ +\ minorIdx;}
\DoxyCodeLine{00097\ \ \ \ \ \}}
\DoxyCodeLine{00098\ \};}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \textcolor{comment}{/*}}
\DoxyCodeLine{00101\ \textcolor{comment}{\ *\ Cache\ properties\ accessor}}
\DoxyCodeLine{00102\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00103\ \textcolor{comment}{\ *\ TooLargeFactor\ -\/-\/\ when\ cache\ size\ treated\ "{}too\ large"{}\ in\ comparison\ to\ user\ data\ size}}
\DoxyCodeLine{00104\ \textcolor{comment}{\ *\ OnMissFactor\ -\/-\/\ If\ cache\ miss\ occurred\ and\ cache\ was\ cleaned,}}
\DoxyCodeLine{00105\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\ ageThreshold\ to\ OnMissFactor\ *\ the\ difference}}
\DoxyCodeLine{00106\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ between\ current\ time\ and\ last\ time\ cache\ was\ cleaned.}}
\DoxyCodeLine{00107\ \textcolor{comment}{\ *\ LongWaitFactor\ -\/-\/\ to\ detect\ rarely-\/used\ bins\ and\ forget\ about\ their\ usage\ history}}
\DoxyCodeLine{00108\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00109\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ StructureProps,\ \textcolor{keywordtype}{int}\ TOO\_LARGE,\ \textcolor{keywordtype}{int}\ ON\_MISS,\ \textcolor{keywordtype}{int}\ LONG\_WAIT>}
\DoxyCodeLine{00110\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_large_object_cache_props}{LargeObjectCacheProps}}\ :\ \textcolor{keyword}{public}\ StructureProps\ \{}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_large_object_cache_props_a0d4618a20c3fbf8a57528ac8a021f56a}{TooLargeFactor}}\ =\ TOO\_LARGE,\ \mbox{\hyperlink{struct_large_object_cache_props_a3520becee7d2e8b06d72cd9de4ce95d2}{OnMissFactor}}\ =\ ON\_MISS,\ \mbox{\hyperlink{struct_large_object_cache_props_a0e5505ac6a9775bcdf968ae347213139}{LongWaitFactor}}\ =\ LONG\_WAIT;}
\DoxyCodeLine{00112\ \};}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Props>}
\DoxyCodeLine{00115\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_large_object_cache_impl}{LargeObjectCacheImpl}}\ \{}
\DoxyCodeLine{00116\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{comment}{//\ Current\ sizes\ of\ used\ and\ cached\ objects.\ It's\ calculated\ while\ we\ are}}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{comment}{//\ traversing\ bins,\ and\ used\ for\ isLOCTooLarge()\ check\ at\ the\ same\ time.}}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_large_object_cache_impl_1_1_bins_summary_adb8532a154105a6edecdb39c55d825e1}{BinsSummary}}\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_bins_summary_a7527506d9ceda2765a3a9e2c93cafde3}{usedSz}};}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_bins_summary_a47e81a487e1174867e45e0616650d940}{cachedSz}};}
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_1_1_bins_summary_adb8532a154105a6edecdb39c55d825e1}{BinsSummary}}()\ :\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_bins_summary_a7527506d9ceda2765a3a9e2c93cafde3}{usedSz}}(0),\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_bins_summary_a47e81a487e1174867e45e0616650d940}{cachedSz}}(0)\ \{\}}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ "{}too\ large"{}\ criteria}}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_bins_summary_a12bf801c713d88271db05a1e50483cf1}{isLOCTooLarge}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_bins_summary_a47e81a487e1174867e45e0616650d940}{cachedSz}}\ >\ Props::TooLargeFactor\ *\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_bins_summary_a7527506d9ceda2765a3a9e2c93cafde3}{usedSz}};\ \}}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_bins_summary_a58dd649bdf1cf18e1021a54837fa6618}{update}}(\textcolor{keywordtype}{size\_t}\ usedSize,\ \textcolor{keywordtype}{size\_t}\ cachedSize)\ \{}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_1_1_bins_summary_a7527506d9ceda2765a3a9e2c93cafde3}{usedSz}}\ +=\ usedSize;}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_1_1_bins_summary_a47e81a487e1174867e45e0616650d940}{cachedSz}}\ +=\ cachedSize;}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_bins_summary_ab1fe78c26bed701863d09c9a29b25646}{reset}}()\ \{\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_bins_summary_a7527506d9ceda2765a3a9e2c93cafde3}{usedSz}}\ =\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_bins_summary_a47e81a487e1174867e45e0616650d940}{cachedSz}}\ =\ 0;\ \}}
\DoxyCodeLine{00132\ \ \ \ \ \};}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{comment}{//\ The\ number\ of\ bins\ to\ cache\ large/huge\ objects.}}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \mbox{\hyperlink{class_large_object_cache_impl_a04cf777eb2149474d1a619d51504b659}{numBins}}\ =\ Props::NumBins;}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keyword}{typedef}\ BitMaskMax<numBins>\ \mbox{\hyperlink{class_large_object_cache_impl_a87f896ac165995d863986b5d4a8d0824}{BinBitMask}};}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{comment}{//\ 2-\/linked\ list\ of\ same-\/size\ cached\ blocks\ ordered\ by\ age\ (oldest\ on\ top)}}
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{comment}{//\ TODO:\ are\ we\ really\ want\ the\ list\ to\ be\ 2-\/linked?\ This\ allows\ us}}
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{comment}{//\ reduce\ memory\ consumption\ and\ do\ less\ operations\ under\ lock.}}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{comment}{//\ TODO:\ try\ to\ switch\ to\ 32-\/bit\ logical\ time\ to\ save\ space\ in\ CacheBin}}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{comment}{//\ and\ move\ bins\ to\ different\ cache\ lines.}}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a58036f7f1f2ce84d41aed172f4c813f2}{CacheBin}}\ \{}
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ LargeMemoryBlock\ *\mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_adb2c395f0933ffda3c1723e71e5fc9ec}{first}},}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_aade6449e1671a52896b1b408fb2d458e}{last}};}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ age\ of\ an\ oldest\ block\ in\ the\ list;\ equal\ to\ last-\/>age,\ if\ last\ defined,}}
\DoxyCodeLine{00150\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ used\ for\ quick\ checking\ it\ without\ acquiring\ the\ lock.\ */}}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ uintptr\_t\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_afef2f6565b0a7b4b2a62547801b61243}{oldest}};}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ currAge\ when\ something\ was\ excluded\ out\ of\ list\ because\ of\ the\ age,}}
\DoxyCodeLine{00153\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ not\ because\ of\ cache\ hit\ */}}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ uintptr\_t\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a90bc723f3bbf2c02ad9d81bed22d122d}{lastCleanedAge}};}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Current\ threshold\ value\ for\ the\ blocks\ of\ a\ particular\ size.}}
\DoxyCodeLine{00156\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Set\ on\ cache\ miss.\ */}}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ intptr\_t\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_aec0e7ed2e32aa479a8b8d5aee0c79f82}{ageThreshold}};}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ total\ size\ of\ all\ objects\ corresponding\ to\ the\ bin\ and\ allocated\ by\ user\ */}}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_acdb106b4593dd5ac05fe939a64628b77}{usedSize}},}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ total\ size\ of\ all\ objects\ cached\ in\ the\ bin\ */}}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a994a3042099cd55d899259b958985b99}{cachedSize}};}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ mean\ time\ of\ presence\ of\ block\ in\ the\ bin\ before\ successful\ reuse\ */}}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ intptr\_t\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_aaf05d4ddcaddda250a484070214f2489}{meanHitRange}};}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ time\ of\ last\ get\ called\ for\ the\ bin\ */}}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ uintptr\_t\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_aaf2264337961db61612efa85b57462d1}{lastGet}};}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{struct_malloc_aggregator_ae29b685ca5645b8492981753373da31a}{MallocAggregator<CacheBinOperation>::type}}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_aae2c1615f56197570df33ddd949b6eb4}{aggregator}};}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a6cce97dff8571c847de9520272c12343}{ExecuteOperation}}(CacheBinOperation\ *op,\ ExtMemoryPool\ *extMemPool,\ \mbox{\hyperlink{class_large_object_cache_impl_a87f896ac165995d863986b5d4a8d0824}{BinBitMask}}\ *\mbox{\hyperlink{class_large_object_cache_impl_a3674dc6d5bf5be4a18f605690275ed27}{bitMask}},\ \textcolor{keywordtype}{int}\ idx,\ \textcolor{keywordtype}{bool}\ longLifeTime\ =\ \textcolor{keyword}{true});}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ should\ be\ placed\ in\ zero-\/initialized\ memory,\ ctor\ not\ needed.\ */}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a58036f7f1f2ce84d41aed172f4c813f2}{CacheBin}}();}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a36736ed7769064a7f55b37e83f97750a}{init}}()\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ memset(\textcolor{keyword}{this},\ 0,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a58036f7f1f2ce84d41aed172f4c813f2}{CacheBin}}));}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Cache\ accessors\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a994b7ced227701d222003eef98c90e03}{putList}}(ExtMemoryPool\ *extMemPool,\ LargeMemoryBlock\ *\mbox{\hyperlink{ittnotify__static_8h_ad492e8facf9b4113e52f1918fceb8804}{head}},\ \mbox{\hyperlink{class_large_object_cache_impl_a87f896ac165995d863986b5d4a8d0824}{BinBitMask}}\ *\mbox{\hyperlink{class_large_object_cache_impl_a3674dc6d5bf5be4a18f605690275ed27}{bitMask}},\ \textcolor{keywordtype}{int}\ idx);}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ LargeMemoryBlock\ *\mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a82bcc61c3f2e29fb0cac7160671cf6a8}{get}}(ExtMemoryPool\ *extMemPool,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ \mbox{\hyperlink{class_large_object_cache_impl_a87f896ac165995d863986b5d4a8d0824}{BinBitMask}}\ *\mbox{\hyperlink{class_large_object_cache_impl_a3674dc6d5bf5be4a18f605690275ed27}{bitMask}},\ \textcolor{keywordtype}{int}\ idx);}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Cleanup\ functions\ -\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a1315a5f356bec9be31e930cd15797238}{cleanToThreshold}}(ExtMemoryPool\ *extMemPool,\ \mbox{\hyperlink{class_large_object_cache_impl_a87f896ac165995d863986b5d4a8d0824}{BinBitMask}}\ *\mbox{\hyperlink{class_large_object_cache_impl_a3674dc6d5bf5be4a18f605690275ed27}{bitMask}},\ uintptr\_t\ currTime,\ \textcolor{keywordtype}{int}\ idx);}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a0024e17fcc9acf5385716bdf81877748}{releaseAllToBackend}}(ExtMemoryPool\ *extMemPool,\ \mbox{\hyperlink{class_large_object_cache_impl_a87f896ac165995d863986b5d4a8d0824}{BinBitMask}}\ *\mbox{\hyperlink{class_large_object_cache_impl_a3674dc6d5bf5be4a18f605690275ed27}{bitMask}},\ \textcolor{keywordtype}{int}\ idx);}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a58206897484048df44d7005ce9d5fc81}{updateUsedSize}}(ExtMemoryPool\ *extMemPool,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ \mbox{\hyperlink{class_large_object_cache_impl_a87f896ac165995d863986b5d4a8d0824}{BinBitMask}}\ *\mbox{\hyperlink{class_large_object_cache_impl_a3674dc6d5bf5be4a18f605690275ed27}{bitMask}},\ \textcolor{keywordtype}{int}\ idx);}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a338318ea38a6e76855acdccaef983642}{decreaseThreshold}}()\ \{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_aec0e7ed2e32aa479a8b8d5aee0c79f82}{ageThreshold}})}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_aec0e7ed2e32aa479a8b8d5aee0c79f82}{ageThreshold}}\ =\ (\mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_aec0e7ed2e32aa479a8b8d5aee0c79f82}{ageThreshold}}\ +\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_aaf05d4ddcaddda250a484070214f2489}{meanHitRange}})\ /\ 2;}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a33e01eb15c6233d92a8ee95b48d9e4e6}{updateBinsSummary}}(\mbox{\hyperlink{class_large_object_cache_impl_1_1_bins_summary}{BinsSummary}}\ *binsSummary)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ binsSummary-\/>\mbox{\hyperlink{class_large_object_cache_impl_1_1_bins_summary_a58dd649bdf1cf18e1021a54837fa6618}{update}}(\mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_acdb106b4593dd5ac05fe939a64628b77}{usedSize}},\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a994a3042099cd55d899259b958985b99}{cachedSize}});}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_aea2892021f683b39c71dd6a3e8fd666b}{getSize}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a994a3042099cd55d899259b958985b99}{cachedSize}};\ \}}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a28743b81b28cc5fc78d573a59984dca1}{getUsedSize}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_acdb106b4593dd5ac05fe939a64628b77}{usedSize}};\ \}}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a4bca2c33aa10e7e1d5a0442715e20441}{reportStat}}(\textcolor{keywordtype}{int}\ num,\ FILE\ *\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/\ Unsafe\ methods\ used\ with\ the\ aggregator\ -\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a5a6ff56f86f68830349785ef6fa0f2c4}{forgetOutdatedState}}(uintptr\_t\ currTime);}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ LargeMemoryBlock\ *\mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a91ca0e8a386a66cd7ef2937a39d377d7}{putList}}(LargeMemoryBlock\ *\mbox{\hyperlink{ittnotify__static_8h_ad492e8facf9b4113e52f1918fceb8804}{head}},\ LargeMemoryBlock\ *\mbox{\hyperlink{ittnotify__static_8h_ae6f0aed6c2af4489760c7c13c49ae904}{tail}},\ \mbox{\hyperlink{class_large_object_cache_impl_a87f896ac165995d863986b5d4a8d0824}{BinBitMask}}\ *\mbox{\hyperlink{class_large_object_cache_impl_a3674dc6d5bf5be4a18f605690275ed27}{bitMask}},}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ idx,\ \textcolor{keywordtype}{int}\ num,\ \textcolor{keywordtype}{size\_t}\ hugeObjectThreshold);}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ LargeMemoryBlock\ *\mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a167f7e4a0fa05c1f5046bed10873672a}{get}}();}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ LargeMemoryBlock\ *\mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a6b44d9906377d5c61588078eadc2a9ad}{cleanToThreshold}}(uintptr\_t\ currTime,\ \mbox{\hyperlink{class_large_object_cache_impl_a87f896ac165995d863986b5d4a8d0824}{BinBitMask}}\ *\mbox{\hyperlink{class_large_object_cache_impl_a3674dc6d5bf5be4a18f605690275ed27}{bitMask}},\ \textcolor{keywordtype}{int}\ idx);}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ LargeMemoryBlock\ *\mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a09d508eff509784d41af103c21cc93df}{cleanAll}}(\mbox{\hyperlink{class_large_object_cache_impl_a87f896ac165995d863986b5d4a8d0824}{BinBitMask}}\ *\mbox{\hyperlink{class_large_object_cache_impl_a3674dc6d5bf5be4a18f605690275ed27}{bitMask}},\ \textcolor{keywordtype}{int}\ idx);}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a606d71a83ef144570752b02fdac6580b}{updateUsedSize}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ \mbox{\hyperlink{class_large_object_cache_impl_a87f896ac165995d863986b5d4a8d0824}{BinBitMask}}\ *\mbox{\hyperlink{class_large_object_cache_impl_a3674dc6d5bf5be4a18f605690275ed27}{bitMask}},\ \textcolor{keywordtype}{int}\ idx)\ \{}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_acdb106b4593dd5ac05fe939a64628b77}{usedSize}})\ \mbox{\hyperlink{class_large_object_cache_impl_a3674dc6d5bf5be4a18f605690275ed27}{bitMask}}-\/>set(idx,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_acdb106b4593dd5ac05fe939a64628b77}{usedSize}}\ +=\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}};}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_acdb106b4593dd5ac05fe939a64628b77}{usedSize}}\ \&\&\ !\mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_adb2c395f0933ffda3c1723e71e5fc9ec}{first}})\ \mbox{\hyperlink{class_large_object_cache_impl_a3674dc6d5bf5be4a18f605690275ed27}{bitMask}}-\/>set(idx,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a8ba106e0c46a55e7bd5544bf0f0e19c8}{updateMeanHitRange}}(\ intptr\_t\ hitRange\ )\ \{}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ hitRange\ =\ hitRange\ >=\ 0\ ?\ hitRange\ :\ 0;}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_aaf05d4ddcaddda250a484070214f2489}{meanHitRange}}\ =\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_aaf05d4ddcaddda250a484070214f2489}{meanHitRange}}\ ?\ (\mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_aaf05d4ddcaddda250a484070214f2489}{meanHitRange}}\ +\ hitRange)\ /\ 2\ :\ hitRange;}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_ae54d379c64e677d8b656faa0d07abd76}{updateAgeThreshold}}(\ uintptr\_t\ currTime\ )\ \{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a90bc723f3bbf2c02ad9d81bed22d122d}{lastCleanedAge}})}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_aec0e7ed2e32aa479a8b8d5aee0c79f82}{ageThreshold}}\ =\ Props::OnMissFactor*(currTime\ -\/\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a90bc723f3bbf2c02ad9d81bed22d122d}{lastCleanedAge}});}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_ab84fd3376c58316db0b2169819391cd6}{updateCachedSize}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}})\ \{}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_a994a3042099cd55d899259b958985b99}{cachedSize}}\ +=\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}};}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_ab7004a863be48143954d089896b17676}{setLastGet}}(\ uintptr\_t\ newLastGet\ )\ \{}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_1_1_cache_bin_aaf2264337961db61612efa85b57462d1}{lastGet}}\ =\ newLastGet;}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00228\ \ \ \ \ \};}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{comment}{//\ Huge\ bins\ index\ for\ fast\ regular\ cleanup\ searching\ in\ case\ of}}
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{comment}{//\ the\ "{}huge\ size\ threshold"{}\ setting\ defined}}
\DoxyCodeLine{00232\ \ \ \ \ intptr\_t\ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_a1bfe04bba4909148fad628c46cf4d3f2}{hugeSizeThresholdIdx}};}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00235\ \ \ \ \ \textcolor{comment}{//\ How\ many\ times\ LOC\ was\ "{}too\ large"{}}}
\DoxyCodeLine{00236\ \ \ \ \ intptr\_t\ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_ad3f122c05d578749293ca9070b63fb5f}{tooLargeLOC}};}
\DoxyCodeLine{00237\ \ \ \ \ \textcolor{comment}{//\ for\ fast\ finding\ of\ used\ bins\ and\ bins\ with\ non-\/zero\ usedSize;}}
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{comment}{//\ indexed\ from\ the\ end,\ as\ we\ need\ largest\ 1st}}
\DoxyCodeLine{00239\ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_impl_a87f896ac165995d863986b5d4a8d0824}{BinBitMask}}\ \ \ \mbox{\hyperlink{class_large_object_cache_impl_a3674dc6d5bf5be4a18f605690275ed27}{bitMask}};}
\DoxyCodeLine{00240\ \ \ \ \ \textcolor{comment}{//\ bins\ with\ lists\ of\ recently\ freed\ large\ blocks\ cached\ for\ re-\/use}}
\DoxyCodeLine{00241\ \ \ \ \ CacheBin\ \mbox{\hyperlink{class_large_object_cache_impl_afc25bbc4c8dc6dd20f99cfb273557e8b}{bin}}[\mbox{\hyperlink{class_large_object_cache_impl_a04cf777eb2149474d1a619d51504b659}{numBins}}];}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00244\ \ \ \ \ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ CacheBin\ structure\ dependent\ stuff\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_large_object_cache_impl_ae0a9531c89b6abefc05f27455a95b0ed}{alignToBin}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}})\ \{}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Props::alignToBin(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00247\ \ \ \ \ \}}
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_large_object_cache_impl_a63c7692bf2513a41fc4625fa0555029b}{sizeToIdx}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}})\ \{}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Props::sizeToIdx(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00250\ \ \ \ \ \}}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/\ Main\ cache\ functions\ (put,\ get\ object)\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00253\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_impl_a771ec22fdbf3385ee058c6ab44e81605}{putList}}(ExtMemoryPool\ *extMemPool,\ LargeMemoryBlock\ *largeBlock);}
\DoxyCodeLine{00254\ \ \ \ \ LargeMemoryBlock\ *\mbox{\hyperlink{class_large_object_cache_impl_a1f34dc716a45e5406898e5c235696594}{get}}(ExtMemoryPool\ *extMemPool,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Cleanup\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00257\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_large_object_cache_impl_a9ba25e56ce6eb3d47619c87aec732a77}{regularCleanup}}(ExtMemoryPool\ *extMemPool,\ uintptr\_t\ currAge,\ \textcolor{keywordtype}{bool}\ doThreshDecr);}
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_large_object_cache_impl_ad5ad2617ab75a4bb9084236d74badf26}{cleanAll}}(ExtMemoryPool\ *extMemPool);}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00260\ \ \ \ \ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Other\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00261\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_impl_a4bc2ce8b08cabb263f15cb534bb0609e}{updateCacheState}}(ExtMemoryPool\ *extMemPool,\ DecreaseOrIncrease\ op,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00262\ }
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_impl_a9bec3e1f4d9ca4c92364f19b3f9951d8}{reset}}();}
\DoxyCodeLine{00264\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_impl_ad4c0f3b839c699c4ce9f304419f2f90f}{reportStat}}(FILE\ *\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});}
\DoxyCodeLine{00265\ \textcolor{preprocessor}{\#if\ \_\_TBB\_MALLOC\_WHITEBOX\_TEST}}
\DoxyCodeLine{00266\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ getLOCSize()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00267\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ getUsedSize()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00268\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00269\ \};}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_large_object_cache}{LargeObjectCache}}\ \{}
\DoxyCodeLine{00272\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{comment}{//\ Large\ bins\ [minLargeSize,\ maxLargeSize)}}
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{comment}{//\ Huge\ bins\ [maxLargeSize,\ maxHugeSize)}}
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_large_object_cache_a99c7d93db63f09b1900c47e1bfc9501b}{minLargeSize}}\ =\ 8\ *\ 1024,}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_a0598e0929237f552becf6655eaaf7c4b}{maxLargeSize}}\ =\ 8\ *\ 1024\ *\ 1024,}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Cache\ memory\ up\ to\ 1TB\ (or\ 2GB\ for\ 32-\/bit\ arch),\ but\ sieve\ objects\ from\ the\ special\ threshold}}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_ad1e76cd5a11b03fe64177ca44afda964}{maxHugeSize}}\ =\ tbb::internal::select\_size\_t\_constant<2147483648U,\ 1099511627776ULL>::value;}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{comment}{//\ Upper\ bound\ threshold\ for\ caching\ size.\ After\ that\ size\ all\ objects\ sieve\ through\ cache}}
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{comment}{//\ By\ default\ -\/\ 64MB,\ previous\ value\ was\ 129MB\ (needed\ by\ some\ Intel(R)\ Math\ Kernel\ Library\ (Intel(R)\ MKL)\ benchmarks)}}
\DoxyCodeLine{00283\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_large_object_cache_ab99393a700baf4916e3987023381c98e}{defaultMaxHugeSize}}\ =\ 64UL\ *\ 1024UL\ *\ 1024UL;}
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{comment}{//\ After\ that\ size\ large\ object\ interpreted\ as\ huge\ and\ does\ not\ participate\ in\ regular\ cleanup.}}
\DoxyCodeLine{00285\ \ \ \ \ \textcolor{comment}{//\ Can\ be\ changed\ during\ the\ program\ execution.}}
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_large_object_cache_a629e36c7ccba64613fee3d279988eff3}{hugeSizeThreshold}};}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00289\ \ \ \ \ \textcolor{comment}{//\ Large\ objects\ cache\ properties}}
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_large_bin_structure_props}{LargeBinStructureProps<minLargeSize,\ maxLargeSize>}}\ \mbox{\hyperlink{class_large_object_cache_a0c21f9076b5ba13c4ebe40ec634b0e3d}{LargeBSProps}};}
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_large_object_cache_props}{LargeObjectCacheProps<LargeBSProps,\ 2,\ 2,\ 16>}}\ \mbox{\hyperlink{class_large_object_cache_a3161205f627c2b646e187aa08242f0da}{LargeCacheTypeProps}};}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{comment}{//\ Huge\ objects\ cache\ properties}}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_huge_bin_structure_props}{HugeBinStructureProps<maxLargeSize,\ maxHugeSize>}}\ \mbox{\hyperlink{class_large_object_cache_a9fbc7bfcdd326b9b3799a80828e3d0db}{HugeBSProps}};}
\DoxyCodeLine{00295\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_large_object_cache_props}{LargeObjectCacheProps<HugeBSProps,\ 1,\ 1,\ 4>}}\ \mbox{\hyperlink{class_large_object_cache_a7e82dad660a567dcc747bbb80d77284e}{HugeCacheTypeProps}};}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{comment}{//\ Cache\ implementation\ type\ with\ properties}}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{class_large_object_cache_impl}{LargeObjectCacheImpl<\ LargeCacheTypeProps\ >}}\ \mbox{\hyperlink{class_large_object_cache_a93d51c45e3f3db49e768038c0395cf17}{LargeCacheType}};}
\DoxyCodeLine{00299\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{class_large_object_cache_impl}{LargeObjectCacheImpl<\ HugeCacheTypeProps\ >}}\ \mbox{\hyperlink{class_large_object_cache_a70e6937dcd6533fadaf3d0fff6098c26}{HugeCacheType}};}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00301\ \ \ \ \ \textcolor{comment}{//\ Beginning\ of\ largeCache\ is\ more\ actively\ used\ and\ smaller\ than\ hugeCache,}}
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{comment}{//\ so\ put\ hugeCache\ first\ to\ prevent\ false\ sharing}}
\DoxyCodeLine{00303\ \ \ \ \ \textcolor{comment}{//\ with\ LargeObjectCache's\ predecessor}}
\DoxyCodeLine{00304\ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_a70e6937dcd6533fadaf3d0fff6098c26}{HugeCacheType}}\ \mbox{\hyperlink{class_large_object_cache_ad7a7c07a5dd90cfd9db810ad58b39987}{hugeCache}};}
\DoxyCodeLine{00305\ \ \ \ \ \mbox{\hyperlink{class_large_object_cache_a93d51c45e3f3db49e768038c0395cf17}{LargeCacheType}}\ \mbox{\hyperlink{class_large_object_cache_abace32b62143f82b291a55743d8e1c65}{largeCache}};}
\DoxyCodeLine{00306\ }
\DoxyCodeLine{00307\ \ \ \ \ \textcolor{comment}{/*\ logical\ time,\ incremented\ on\ each\ put/get\ operation}}
\DoxyCodeLine{00308\ \textcolor{comment}{\ \ \ \ \ \ \ To\ prevent\ starvation\ between\ pools,\ keep\ separately\ for\ each\ pool.}}
\DoxyCodeLine{00309\ \textcolor{comment}{\ \ \ \ \ \ \ Overflow\ is\ OK,\ as\ we\ only\ want\ difference\ between}}
\DoxyCodeLine{00310\ \textcolor{comment}{\ \ \ \ \ \ \ its\ current\ value\ and\ some\ recent.}}
\DoxyCodeLine{00311\ \textcolor{comment}{}}
\DoxyCodeLine{00312\ \textcolor{comment}{\ \ \ \ \ \ \ Both\ malloc\ and\ free\ should\ increment\ logical\ time,\ as\ in}}
\DoxyCodeLine{00313\ \textcolor{comment}{\ \ \ \ \ \ \ a\ different\ case\ multiple\ cached\ blocks\ would\ have\ same\ age,}}
\DoxyCodeLine{00314\ \textcolor{comment}{\ \ \ \ \ \ \ and\ accuracy\ of\ predictors\ suffers.}}
\DoxyCodeLine{00315\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{00316\ \ \ \ \ uintptr\_t\ \mbox{\hyperlink{class_large_object_cache_a239c68094934867c3345d8d8c5c05ac6}{cacheCurrTime}};}
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00318\ \ \ \ \ \textcolor{comment}{//\ Memory\ pool\ that\ owns\ this\ LargeObjectCache.}}
\DoxyCodeLine{00319\ \ \ \ \ \textcolor{comment}{//\ strict\ 1:1\ relation,\ never\ changed}}
\DoxyCodeLine{00320\ \ \ \ \ ExtMemoryPool\ *\mbox{\hyperlink{class_large_object_cache_ab740fbc8f6ff5615cb9bf7d83799b9ac}{extMemPool}};}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \ \ \ \ \textcolor{comment}{//\ Returns\ artificial\ bin\ index,}}
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{comment}{//\ it's\ used\ only\ during\ sorting\ and\ never\ saved}}
\DoxyCodeLine{00324\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_large_object_cache_a3438b348ca1422f74ec43c2d815ccff9}{sizeToIdx}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ \ \ \textcolor{comment}{//\ Our\ friends}}
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_large_object_cache_a44285c7c096641abe34473cd745ffd8a}{Backend}};}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00330\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_a81c2be94178d790e10c7a32d97e4a979}{init}}(ExtMemoryPool\ *memPool);}
\DoxyCodeLine{00331\ }
\DoxyCodeLine{00332\ \ \ \ \ \textcolor{comment}{//\ Item\ accessors}}
\DoxyCodeLine{00333\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_a97bc1264724a9919851857b23264c911}{put}}(LargeMemoryBlock\ *largeBlock);}
\DoxyCodeLine{00334\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_a46ca88a528765d3b1b5f048f7721fa2a}{putList}}(LargeMemoryBlock\ *\mbox{\hyperlink{ittnotify__static_8h_ad492e8facf9b4113e52f1918fceb8804}{head}});}
\DoxyCodeLine{00335\ \ \ \ \ LargeMemoryBlock\ *\mbox{\hyperlink{class_large_object_cache_a5c2b247f4ec5bbae44b52fcd30c8e1ba}{get}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00336\ }
\DoxyCodeLine{00337\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_a860273c02edb62060a9958cbb04be76e}{updateCacheState}}(DecreaseOrIncrease\ op,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00338\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_large_object_cache_ae4981a36c028cfa3a4eb59d4ceac0538}{isCleanupNeededOnRange}}(uintptr\_t\ range,\ uintptr\_t\ currTime);}
\DoxyCodeLine{00339\ }
\DoxyCodeLine{00340\ \ \ \ \ \textcolor{comment}{//\ Cleanup\ operations}}
\DoxyCodeLine{00341\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_large_object_cache_a67c5f245b2b8b4234de844d0b782d6cb}{doCleanup}}(uintptr\_t\ currTime,\ \textcolor{keywordtype}{bool}\ doThreshDecr);}
\DoxyCodeLine{00342\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_large_object_cache_a1b4d21e3da1e485df70f915fdd462970}{decreasingCleanup}}();}
\DoxyCodeLine{00343\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_large_object_cache_a0cecb4c66f09c18daa6fab06e7eb0834}{regularCleanup}}();}
\DoxyCodeLine{00344\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_large_object_cache_ab365662796f79cb89be19d09297fe90c}{cleanAll}}();}
\DoxyCodeLine{00345\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_a84eefe5dca0d74871b43e60021071e3c}{reset}}();}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00347\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_ad693133c4348acf9f1fd5ab28b060d3d}{reportStat}}(FILE\ *\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});}
\DoxyCodeLine{00348\ \textcolor{preprocessor}{\#if\ \_\_TBB\_MALLOC\_WHITEBOX\_TEST}}
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ getLOCSize()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00350\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ getUsedSize()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00351\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00352\ }
\DoxyCodeLine{00353\ \ \ \ \ \textcolor{comment}{//\ Cache\ deals\ with\ exact-\/fit\ sizes,\ so\ need\ to\ align\ each\ size}}
\DoxyCodeLine{00354\ \ \ \ \ \textcolor{comment}{//\ to\ the\ specific\ bin\ when\ put\ object\ to\ cache}}
\DoxyCodeLine{00355\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_large_object_cache_aa6a17e6f5bdf8e2dac811e43d1a3996e}{alignToBin}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00357\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_abae80bbf0e42a0a758ff7224c10a9013}{setHugeSizeThreshold}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abe8e049f756b5ba547bda825af81b645}{value}});}
\DoxyCodeLine{00358\ }
\DoxyCodeLine{00359\ \ \ \ \ \textcolor{comment}{//\ Check\ if\ we\ should\ cache\ or\ sieve\ this\ size}}
\DoxyCodeLine{00360\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_large_object_cache_a87779cd29e33583310ff57af869cf6cf}{sizeInCacheRange}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00361\ }
\DoxyCodeLine{00362\ \ \ \ \ uintptr\_t\ \mbox{\hyperlink{class_large_object_cache_afe680424a4ffac58bbd2e0914c15f1eb}{getCurrTime}}();}
\DoxyCodeLine{00363\ \ \ \ \ uintptr\_t\ \mbox{\hyperlink{class_large_object_cache_a5e4e4692932fbe72c1b4a693ab43e5ee}{getCurrTimeRange}}(uintptr\_t\ range);}
\DoxyCodeLine{00364\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_large_object_cache_adf2f363b882b05185fc70570b6a60468}{registerRealloc}}(\textcolor{keywordtype}{size\_t}\ oldSize,\ \textcolor{keywordtype}{size\_t}\ newSize);}
\DoxyCodeLine{00365\ \};}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_large\_objects\_H}}
\DoxyCodeLine{00368\ }

\end{DoxyCode}
