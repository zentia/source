\chapter{\texorpdfstring{$<$}{<}tt\texorpdfstring{$>$}{>}rfl\+::as\texorpdfstring{$<$}{<}/tt\texorpdfstring{$>$}{>}}
\hypertarget{md_external_2reflect-cpp_2docs_2as}{}\label{md_external_2reflect-cpp_2docs_2as}\index{$<$tt$>$rfl::as$<$/tt$>$@{$<$tt$>$rfl::as$<$/tt$>$}}
\label{md_external_2reflect-cpp_2docs_2as_autotoc_md522}%
\Hypertarget{md_external_2reflect-cpp_2docs_2as_autotoc_md522}%


{\ttfamily \doxylink{namespacerfl_a6ed469a6082d8180235db125c13fc410}{rfl\+::as}} allows you to cast structs as other structs. This is useful if the fields in {\ttfamily \doxylink{bench__gemm_8cpp_a37a83060ac796961b44991c836f083f7}{B}} are a subset of the fields in {\ttfamily \doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}} or we need the fields in {\ttfamily \doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}} and {\ttfamily \doxylink{bench__gemm_8cpp_a37a83060ac796961b44991c836f083f7}{B}} to produce {\ttfamily C}.

This only works for the {\ttfamily \doxylink{structrfl_1_1_field}{rfl\+::\+Field}}-\/syntax.

For example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct\ }\mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}}\ \{}
\DoxyCodeLine{\ \ \ \ std::string\ \mbox{\hyperlink{parallel__graph__pipeline_8cpp_a20ea9116f00e19915f910ca726f7518f}{f1}};}
\DoxyCodeLine{\ \ \ \ std::string\ \mbox{\hyperlink{parallel__graph__pipeline_8cpp_a894124d17350678007462a79ecc7eb36}{f2}};}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{struct\ }\mbox{\hyperlink{bench__gemm_8cpp_a37a83060ac796961b44991c836f083f7}{B}}\ \{}
\DoxyCodeLine{\ \ \ \ std::string\ \mbox{\hyperlink{parallel__graph__pipeline_8cpp_a4e249d464ae215ce0d4d53e0b369ab98}{f3}};}
\DoxyCodeLine{\ \ \ \ std::string\ f4;}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{struct\ }\mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\ \{}
\DoxyCodeLine{\ \ \ \ std::string\ \mbox{\hyperlink{parallel__graph__pipeline_8cpp_a20ea9116f00e19915f910ca726f7518f}{f1}};}
\DoxyCodeLine{\ \ \ \ std::string\ \mbox{\hyperlink{parallel__graph__pipeline_8cpp_a894124d17350678007462a79ecc7eb36}{f2}};}
\DoxyCodeLine{\ \ \ \ std::string\ f4;}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ =\ \mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}}\{.f1\ =\ \textcolor{stringliteral}{"{}Hello"{}},\ .f2\ =\ \textcolor{stringliteral}{"{}World"{}}\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}\ =\ \mbox{\hyperlink{bench__gemm_8cpp_a37a83060ac796961b44991c836f083f7}{B}}\{.f3\ =\ \textcolor{stringliteral}{"{}Hello"{}},\ .f4\ =\ \textcolor{stringliteral}{"{}World"{}}\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Creates\ c\ by\ retrieving\ f1\ and\ f2\ from\ a\ and\ f4\ from\ b.\ }}
\DoxyCodeLine{\textcolor{comment}{//\ Ignores\ f3.}}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}\ =\ \mbox{\hyperlink{namespacerfl_a6ed469a6082d8180235db125c13fc410}{rfl::as<C>}}(\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}},\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}});}

\end{DoxyCode}


In this case, {\ttfamily f1}, {\ttfamily f2} and {\ttfamily f4} are now copied into the newly created {\ttfamily c} of type {\ttfamily C}.

Much like {\ttfamily \doxylink{namespacerfl_ac4bd3c990469707252d797a9d81a3680}{rfl\+::replace}}, {\ttfamily \doxylink{namespacerfl_a6ed469a6082d8180235db125c13fc410}{rfl\+::as}} supports move semantics\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{auto}\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ =\ \mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}}\{.f1\ =\ \textcolor{stringliteral}{"{}Hello"{}},\ .f2\ =\ \textcolor{stringliteral}{"{}World"{}}\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{auto}\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}\ =\ \mbox{\hyperlink{bench__gemm_8cpp_a37a83060ac796961b44991c836f083f7}{B}}\{.f3\ =\ \textcolor{stringliteral}{"{}Hello"{}},\ .f4\ =\ \textcolor{stringliteral}{"{}World"{}}\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}\ =\ \mbox{\hyperlink{namespacerfl_a6ed469a6082d8180235db125c13fc410}{rfl::as<C>}}(std::move(\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}),\ std::move(\mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}));}

\end{DoxyCode}


In this case, {\ttfamily f1}, {\ttfamily f2} and {\ttfamily f4} are now moved into the newly created {\ttfamily c} of type {\ttfamily C}. This is a zero-\/copy operation. {\ttfamily f3} is discarded.

{\ttfamily \doxylink{namespacerfl_a6ed469a6082d8180235db125c13fc410}{rfl\+::as}} also supports {\ttfamily \doxylink{structrfl_1_1_flatten}{rfl\+::\+Flatten}}. For instance\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct\ }\mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}}\ \{}
\DoxyCodeLine{\ \ \ \ std::string\ \mbox{\hyperlink{parallel__graph__pipeline_8cpp_a20ea9116f00e19915f910ca726f7518f}{f1}};}
\DoxyCodeLine{\ \ \ \ std::string\ \mbox{\hyperlink{parallel__graph__pipeline_8cpp_a894124d17350678007462a79ecc7eb36}{f2}};}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{struct\ }\mbox{\hyperlink{bench__gemm_8cpp_a37a83060ac796961b44991c836f083f7}{B}}\ \{}
\DoxyCodeLine{\ \ \ \ std::string\ \mbox{\hyperlink{parallel__graph__pipeline_8cpp_a4e249d464ae215ce0d4d53e0b369ab98}{f3}};}
\DoxyCodeLine{\ \ \ \ std::string\ f4;}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{struct\ }\mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\ \{}
\DoxyCodeLine{\ \ \ \ rfl::Flatten<A>\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}};}
\DoxyCodeLine{\ \ \ \ rfl::Flatten<B>\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}};}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{int}\ f5;}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ =\ \mbox{\hyperlink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A}}\{.f1\ =\ \textcolor{stringliteral}{"{}Hello"{}},\ .f2\ =\ \textcolor{stringliteral}{"{}World"{}}\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}\ =\ \mbox{\hyperlink{bench__gemm_8cpp_a37a83060ac796961b44991c836f083f7}{B}}\{.f3\ =\ \textcolor{stringliteral}{"{}Hello"{}},\ .f4\ =\ \textcolor{stringliteral}{"{}World"{}}\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}\ =}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{namespacerfl_a6ed469a6082d8180235db125c13fc410}{rfl::as<C>}}(\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}},\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}},\ \mbox{\hyperlink{namespacerfl_afb5f68a22d5b6a42a5b4477c35559ce9}{rfl::make\_field<"{}f5"{}>}}(5));}

\end{DoxyCode}


In this particular instance, {\ttfamily \doxylink{namespacerfl_a6ed469a6082d8180235db125c13fc410}{rfl\+::as}\texorpdfstring{$<$}{<}C\texorpdfstring{$>$}{>}(...)} is basically equivalent to this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}\ =\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\{.a\ =\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}},\ .b\ =\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}},\ .f5\ =\ \mbox{\hyperlink{namespacerfl_afb5f68a22d5b6a42a5b4477c35559ce9}{rfl::make\_field}}<\textcolor{stringliteral}{"{}f5"{}}>(5)\};}

\end{DoxyCode}
 