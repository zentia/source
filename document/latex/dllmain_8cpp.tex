\doxysection{external/libcds/src/dllmain.cpp 文件参考}
\hypertarget{dllmain_8cpp}{}\label{dllmain_8cpp}\index{external/libcds/src/dllmain.cpp@{external/libcds/src/dllmain.cpp}}
{\ttfamily \#include $<$cds/details/defs.\+h$>$}\newline
{\ttfamily \#include $<$cds/os/thread.\+h$>$}\newline
{\ttfamily \#include $<$cds/os/topology.\+h$>$}\newline
{\ttfamily \#include $<$cds/algo/bitop.\+h$>$}\newline
{\ttfamily \#include $<$cds/os/win/topology.\+h$>$}\newline
dllmain.\+cpp 的引用(Include)关系图\+:
% FIG 0
\doxysubsubsection*{命名空间}
\begin{DoxyCompactItemize}
\item 
namespace \mbox{\hyperlink{namespacecds}{cds}}
\begin{DoxyCompactList}\small\item\em The main library namespace \end{DoxyCompactList}\item 
namespace \mbox{\hyperlink{namespacecds_1_1_o_s}{cds\+::\+OS}}
\begin{DoxyCompactList}\small\item\em \doxylink{namespacecds_1_1_o_s}{OS} specific wrappers \end{DoxyCompactList}\item 
namespace \mbox{\hyperlink{namespacecds_1_1_o_s_1_1_win32}{cds\+::\+OS\+::\+Win32}}
\begin{DoxyCompactList}\small\item\em Windows-\/specific functions \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{类型定义}
\begin{DoxyCompactItemize}
\item 
typedef \mbox{\hyperlink{test__malloc__compliance_8cpp_ad342ac907eb044443153a22f964bf0af}{DWORD}}(WINAPI \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{dllmain_8cpp_aa5d266f9b7246be13a79619f7fb2c92c}{fn\+Get\+Current\+Processor\+Number}}) ()
\end{DoxyCompactItemize}
\doxysubsubsection*{函数}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{dllmain_8cpp_a1a5c1a36f73a415fb69283a98c91f25a}{get\+\_\+proc\+\_\+addr}} (char const \texorpdfstring{$\ast$}{*}module, char const \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{structfunc}{func}})
\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{dllmain_8cpp_acc26d82f487ee6eec141f03fa10249e5}{discover\+\_\+topology}} ()
\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{dllmain_8cpp_a310b97a3ddeb3ac8f7ff506d0035e969}{prepare\+\_\+current\+\_\+processor\+\_\+call}} ()
\item 
\mbox{\hyperlink{dllmain_8cpp_a1be363781c83747604fc5b4b16550535}{\+\_\+\+\_\+declspec}} (dllexport) BOOL WINAPI Dll\+Main(HINSTANCE hinst\+DLL
\end{DoxyCompactItemize}
\doxysubsubsection*{变量}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{namespacecds_1_1_o_s_1_1posix_aa5d1cef6c4dd410d6d21c851201bfc40}{cds\+::\+OS\+::\+Thread\+Id}} \mbox{\hyperlink{dllmain_8cpp_ad964326986f8d506e5ccfdff2c9db533}{s\+\_\+\+Main\+Thread\+Id}} = 0
\item 
static HINSTANCE \mbox{\hyperlink{dllmain_8cpp_af4b7b873ed5d1e3fafd30995bbea4761}{s\+\_\+\+Dll\+Instance}} = nullptr
\item 
static unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{dllmain_8cpp_aa3f35f60ed340be15f5922ab20a3126a}{s\+\_\+n\+Processor\+Count}} = 1
\item 
static unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{dllmain_8cpp_a218270bc06feeeb2730726959b42ea42}{s\+\_\+n\+Processor\+Group\+Count}} = 1
\item 
static \mbox{\hyperlink{dllmain_8cpp_aa5d266f9b7246be13a79619f7fb2c92c}{fn\+Get\+Current\+Processor\+Number}} \mbox{\hyperlink{dllmain_8cpp_a0e2363064f75f7ed9da4c98d4eb18227}{s\+\_\+fn\+Get\+Current\+Processor\+Number}}
\item 
\mbox{\hyperlink{test__malloc__compliance_8cpp_ad342ac907eb044443153a22f964bf0af}{DWORD}} \mbox{\hyperlink{dllmain_8cpp_aeade4deff3d41655ad3c284487c9db45}{fdw\+Reason}}
\item 
\mbox{\hyperlink{test__malloc__compliance_8cpp_ad342ac907eb044443153a22f964bf0af}{DWORD}} \mbox{\hyperlink{dllmain_8cpp_acf9c20c2bdffd2b6a2870e833c78e71f}{LPVOID}}
\end{DoxyCompactItemize}


\doxysubsection{类型定义说明}
\Hypertarget{dllmain_8cpp_aa5d266f9b7246be13a79619f7fb2c92c}\index{dllmain.cpp@{dllmain.cpp}!fnGetCurrentProcessorNumber@{fnGetCurrentProcessorNumber}}
\index{fnGetCurrentProcessorNumber@{fnGetCurrentProcessorNumber}!dllmain.cpp@{dllmain.cpp}}
\doxysubsubsection{\texorpdfstring{fnGetCurrentProcessorNumber}{fnGetCurrentProcessorNumber}}
{\footnotesize\ttfamily \label{dllmain_8cpp_aa5d266f9b7246be13a79619f7fb2c92c} 
typedef \mbox{\hyperlink{test__malloc__compliance_8cpp_ad342ac907eb044443153a22f964bf0af}{DWORD}}(WINAPI \texorpdfstring{$\ast$}{*} fn\+Get\+Current\+Processor\+Number) ()}



\doxysubsection{函数说明}
\Hypertarget{dllmain_8cpp_a1be363781c83747604fc5b4b16550535}\index{dllmain.cpp@{dllmain.cpp}!\_\_declspec@{\_\_declspec}}
\index{\_\_declspec@{\_\_declspec}!dllmain.cpp@{dllmain.cpp}}
\doxysubsubsection{\texorpdfstring{\_\_declspec()}{\_\_declspec()}}
{\footnotesize\ttfamily \label{dllmain_8cpp_a1be363781c83747604fc5b4b16550535} 
\+\_\+\+\_\+declspec (\begin{DoxyParamCaption}\item[{dllexport}]{}{}\end{DoxyParamCaption})}

\Hypertarget{dllmain_8cpp_acc26d82f487ee6eec141f03fa10249e5}\index{dllmain.cpp@{dllmain.cpp}!discover\_topology@{discover\_topology}}
\index{discover\_topology@{discover\_topology}!dllmain.cpp@{dllmain.cpp}}
\doxysubsubsection{\texorpdfstring{discover\_topology()}{discover\_topology()}}
{\footnotesize\ttfamily \label{dllmain_8cpp_acc26d82f487ee6eec141f03fa10249e5} 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} discover\+\_\+topology (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

函数调用图\+:
% FIG 1
\Hypertarget{dllmain_8cpp_a1a5c1a36f73a415fb69283a98c91f25a}\index{dllmain.cpp@{dllmain.cpp}!get\_proc\_addr@{get\_proc\_addr}}
\index{get\_proc\_addr@{get\_proc\_addr}!dllmain.cpp@{dllmain.cpp}}
\doxysubsubsection{\texorpdfstring{get\_proc\_addr()}{get\_proc\_addr()}}
{\footnotesize\ttfamily \label{dllmain_8cpp_a1a5c1a36f73a415fb69283a98c91f25a} 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*} get\+\_\+proc\+\_\+addr (\begin{DoxyParamCaption}\item[{char const \texorpdfstring{$\ast$}{*}}]{module}{, }\item[{char const \texorpdfstring{$\ast$}{*}}]{func}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

\Hypertarget{dllmain_8cpp_a310b97a3ddeb3ac8f7ff506d0035e969}\index{dllmain.cpp@{dllmain.cpp}!prepare\_current\_processor\_call@{prepare\_current\_processor\_call}}
\index{prepare\_current\_processor\_call@{prepare\_current\_processor\_call}!dllmain.cpp@{dllmain.cpp}}
\doxysubsubsection{\texorpdfstring{prepare\_current\_processor\_call()}{prepare\_current\_processor\_call()}}
{\footnotesize\ttfamily \label{dllmain_8cpp_a310b97a3ddeb3ac8f7ff506d0035e969} 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} prepare\+\_\+current\+\_\+processor\+\_\+call (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

函数调用图\+:
% FIG 2


\doxysubsection{变量说明}
\Hypertarget{dllmain_8cpp_aeade4deff3d41655ad3c284487c9db45}\index{dllmain.cpp@{dllmain.cpp}!fdwReason@{fdwReason}}
\index{fdwReason@{fdwReason}!dllmain.cpp@{dllmain.cpp}}
\doxysubsubsection{\texorpdfstring{fdwReason}{fdwReason}}
{\footnotesize\ttfamily \label{dllmain_8cpp_aeade4deff3d41655ad3c284487c9db45} 
\mbox{\hyperlink{test__malloc__compliance_8cpp_ad342ac907eb044443153a22f964bf0af}{DWORD}} fdw\+Reason}

\Hypertarget{dllmain_8cpp_acf9c20c2bdffd2b6a2870e833c78e71f}\index{dllmain.cpp@{dllmain.cpp}!LPVOID@{LPVOID}}
\index{LPVOID@{LPVOID}!dllmain.cpp@{dllmain.cpp}}
\doxysubsubsection{\texorpdfstring{LPVOID}{LPVOID}}
{\footnotesize\ttfamily \label{dllmain_8cpp_acf9c20c2bdffd2b6a2870e833c78e71f} 
\mbox{\hyperlink{test__malloc__compliance_8cpp_ad342ac907eb044443153a22f964bf0af}{DWORD}} LPVOID}

{\bfseries 初始值\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{switch}\ (\ \mbox{\hyperlink{dllmain_8cpp_aeade4deff3d41655ad3c284487c9db45}{fdwReason}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DLL\_PROCESS\_ATTACH:}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dllmain_8cpp_af4b7b873ed5d1e3fafd30995bbea4761}{s\_DllInstance}}\ =\ hinstDLL;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dllmain_8cpp_ad964326986f8d506e5ccfdff2c9db533}{s\_MainThreadId}}\ =\ \mbox{\hyperlink{namespacecds_1_1_o_s_1_1posix_a083987470e15085707e4665d15d66307}{cds::OS::get\_current\_thread\_id}}();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dllmain_8cpp_acc26d82f487ee6eec141f03fa10249e5}{discover\_topology}}();}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dllmain_8cpp_a310b97a3ddeb3ac8f7ff506d0035e969}{prepare\_current\_processor\_call}}();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DLL\_PROCESS\_DETACH:}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{tinycthread_8c_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}}}

\end{DoxyCode}
\Hypertarget{dllmain_8cpp_af4b7b873ed5d1e3fafd30995bbea4761}\index{dllmain.cpp@{dllmain.cpp}!s\_DllInstance@{s\_DllInstance}}
\index{s\_DllInstance@{s\_DllInstance}!dllmain.cpp@{dllmain.cpp}}
\doxysubsubsection{\texorpdfstring{s\_DllInstance}{s\_DllInstance}}
{\footnotesize\ttfamily \label{dllmain_8cpp_af4b7b873ed5d1e3fafd30995bbea4761} 
HINSTANCE s\+\_\+\+Dll\+Instance = nullptr\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{dllmain_8cpp_a0e2363064f75f7ed9da4c98d4eb18227}\index{dllmain.cpp@{dllmain.cpp}!s\_fnGetCurrentProcessorNumber@{s\_fnGetCurrentProcessorNumber}}
\index{s\_fnGetCurrentProcessorNumber@{s\_fnGetCurrentProcessorNumber}!dllmain.cpp@{dllmain.cpp}}
\doxysubsubsection{\texorpdfstring{s\_fnGetCurrentProcessorNumber}{s\_fnGetCurrentProcessorNumber}}
{\footnotesize\ttfamily \label{dllmain_8cpp_a0e2363064f75f7ed9da4c98d4eb18227} 
\mbox{\hyperlink{dllmain_8cpp_aa5d266f9b7246be13a79619f7fb2c92c}{fn\+Get\+Current\+Processor\+Number}} s\+\_\+fn\+Get\+Current\+Processor\+Number\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{dllmain_8cpp_ad964326986f8d506e5ccfdff2c9db533}\index{dllmain.cpp@{dllmain.cpp}!s\_MainThreadId@{s\_MainThreadId}}
\index{s\_MainThreadId@{s\_MainThreadId}!dllmain.cpp@{dllmain.cpp}}
\doxysubsubsection{\texorpdfstring{s\_MainThreadId}{s\_MainThreadId}}
{\footnotesize\ttfamily \label{dllmain_8cpp_ad964326986f8d506e5ccfdff2c9db533} 
\mbox{\hyperlink{namespacecds_1_1_o_s_1_1posix_aa5d1cef6c4dd410d6d21c851201bfc40}{cds\+::\+OS\+::\+Thread\+Id}} s\+\_\+\+Main\+Thread\+Id = 0\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{dllmain_8cpp_aa3f35f60ed340be15f5922ab20a3126a}\index{dllmain.cpp@{dllmain.cpp}!s\_nProcessorCount@{s\_nProcessorCount}}
\index{s\_nProcessorCount@{s\_nProcessorCount}!dllmain.cpp@{dllmain.cpp}}
\doxysubsubsection{\texorpdfstring{s\_nProcessorCount}{s\_nProcessorCount}}
{\footnotesize\ttfamily \label{dllmain_8cpp_aa3f35f60ed340be15f5922ab20a3126a} 
unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} s\+\_\+n\+Processor\+Count = 1\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{dllmain_8cpp_a218270bc06feeeb2730726959b42ea42}\index{dllmain.cpp@{dllmain.cpp}!s\_nProcessorGroupCount@{s\_nProcessorGroupCount}}
\index{s\_nProcessorGroupCount@{s\_nProcessorGroupCount}!dllmain.cpp@{dllmain.cpp}}
\doxysubsubsection{\texorpdfstring{s\_nProcessorGroupCount}{s\_nProcessorGroupCount}}
{\footnotesize\ttfamily \label{dllmain_8cpp_a218270bc06feeeb2730726959b42ea42} 
unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} s\+\_\+n\+Processor\+Group\+Count = 1\hspace{0.3cm}{\ttfamily [static]}}

