\doxysection{async.\+hpp}
\hypertarget{async_8hpp_source}{}\label{async_8hpp_source}\index{external/taskflow/taskflow/core/async.hpp@{external/taskflow/taskflow/core/async.hpp}}
\mbox{\hyperlink{async_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{executor_8hpp}{executor.hpp}}"{}}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{comment}{//\ https://hackmd.io/@sysprog/concurrency-\/atomics}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetf}{tf}}\ \{}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00010\ \textcolor{comment}{//\ Async}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{comment}{//\ Function:\ async}}
\DoxyCodeLine{00014\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ P,\ \textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{00015\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classtf_1_1_executor_af960048056f7c6b5bc71f4f526f05df7}{Executor::async}}(\mbox{\hyperlink{namespace_p}{P}}\&\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a22557289048c77f6913601e8537ceeea}{params}},\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\ \{}
\DoxyCodeLine{00016\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab85dc42b3e9b18e4b975bd5e9a8c5e72}{\_increment\_topology}}();}
\DoxyCodeLine{00017\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_ac568bd686aba3bedabe63b42c43d94a8}{\_async}}(std::forward<P>(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a22557289048c77f6913601e8537ceeea}{params}}),\ std::forward<F>(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}),\ \textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00018\ \}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{comment}{//\ Function:\ async}}
\DoxyCodeLine{00021\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{00022\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classtf_1_1_executor_af960048056f7c6b5bc71f4f526f05df7}{Executor::async}}(\mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\ \{}
\DoxyCodeLine{00023\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_af960048056f7c6b5bc71f4f526f05df7}{async}}(\mbox{\hyperlink{structtf_1_1_default_task_params}{DefaultTaskParams}}\{\},\ std::forward<F>(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}));}
\DoxyCodeLine{00024\ \}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00027\ \textcolor{comment}{//\ Silent\ Async}}
\DoxyCodeLine{00028\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{comment}{//\ Function:\ silent\_async}}
\DoxyCodeLine{00031\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ P,\ \textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{00032\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a0461cb2c459c9f9473c72af06af9c701}{Executor::silent\_async}}(\mbox{\hyperlink{namespace_p}{P}}\&\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a22557289048c77f6913601e8537ceeea}{params}},\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\ \{}
\DoxyCodeLine{00033\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab85dc42b3e9b18e4b975bd5e9a8c5e72}{\_increment\_topology}}();}
\DoxyCodeLine{00034\ \ \ \mbox{\hyperlink{classtf_1_1_executor_aa3b32388be14b03249de29bae34b7b52}{\_silent\_async}}(}
\DoxyCodeLine{00035\ \ \ \ \ std::forward<P>(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a22557289048c77f6913601e8537ceeea}{params}}),\ std::forward<F>(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}),\ \textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr}}
\DoxyCodeLine{00036\ \ \ );}
\DoxyCodeLine{00037\ \}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{comment}{//\ Function:\ silent\_async}}
\DoxyCodeLine{00040\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{00041\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a0461cb2c459c9f9473c72af06af9c701}{Executor::silent\_async}}(\mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\ \{}
\DoxyCodeLine{00042\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a0461cb2c459c9f9473c72af06af9c701}{silent\_async}}(\mbox{\hyperlink{structtf_1_1_default_task_params}{DefaultTaskParams}}\{\},\ std::forward<F>(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}));}
\DoxyCodeLine{00043\ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00046\ \textcolor{comment}{//\ Async\ Helper\ Methods}}
\DoxyCodeLine{00047\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \textcolor{comment}{//\ Procedure:\ \_schedule\_async\_task}}
\DoxyCodeLine{00050\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_af5acda8c6e9a1564c9d665336ea091d0}{Executor::\_schedule\_async\_task}}(\mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node)\ \{\ \ }
\DoxyCodeLine{00051\ \ \ \textcolor{comment}{//\ Here\ we\ don't\ use\ \_this\_worker\ since\ \_schedule\ will\ check\ if\ the}}
\DoxyCodeLine{00052\ \ \ \textcolor{comment}{//\ given\ worker\ belongs\ to\ this\ executor.}}
\DoxyCodeLine{00053\ \ \ \textcolor{comment}{//(pt::this\_worker\ \&\&\ pt::this\_worker-\/>\_executor\ ==\ this)\ ?\ \_schedule(*pt::this\_worker,\ node)\ :\ }}
\DoxyCodeLine{00054\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_schedule(node);}}
\DoxyCodeLine{00055\ \ \ (\mbox{\hyperlink{namespacetf_1_1pt_a70a6dd7df97bb7da11a723d96fdef945}{pt::this\_worker}})\ ?\ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(*\mbox{\hyperlink{namespacetf_1_1pt_a70a6dd7df97bb7da11a723d96fdef945}{pt::this\_worker}},\ node)\ :\ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(node);}
\DoxyCodeLine{00056\ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{comment}{//\ Procedure:\ \_tear\_down\_async}}
\DoxyCodeLine{00059\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a42e7db3fc43e1c5479e30e8d83da9e74}{Executor::\_tear\_down\_async}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ worker,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\&\ cache)\ \{}
\DoxyCodeLine{00060\ \ \ }
\DoxyCodeLine{00061\ \ \ \textcolor{comment}{//\ from\ executor}}
\DoxyCodeLine{00062\ \ \ \textcolor{keywordflow}{if}(\textcolor{keyword}{auto}\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}\ =\ node-\/>\_parent;\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a8728f22f6d177fad84ce667e02a7a3b9}{\_decrement\_topology}}();}
\DoxyCodeLine{00064\ \ \ \}}
\DoxyCodeLine{00065\ \ \ \textcolor{comment}{//\ from\ runtime}}
\DoxyCodeLine{00066\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keyword}{auto}\ state\ =\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}-\/>\_nstate;}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}-\/>\_join\_counter.fetch\_sub(1,\ std::memory\_order\_acq\_rel)\ ==\ 1)\ \{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(state\ \&\ \mbox{\hyperlink{structtf_1_1_n_s_t_a_t_e_a8da6205c0944eb6ec6f0c453cc4f1d93}{NSTATE::PREEMPTED}})\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a86e70707f516b5b9dd85ed5be36ee694}{\_update\_cache}}(worker,\ cache,\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}});}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00072\ \ \ \ \ \}}
\DoxyCodeLine{00073\ \ \ \}}
\DoxyCodeLine{00074\ \ \ \mbox{\hyperlink{namespacetf_a445fe5f14e30fe86b18bf7c35df34ad5}{recycle}}(node);}
\DoxyCodeLine{00075\ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00078\ \textcolor{comment}{//\ Silent\ Dependent\ Async}}
\DoxyCodeLine{00079\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \textcolor{comment}{//\ Function:\ silent\_dependent\_async}}
\DoxyCodeLine{00082\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ \textcolor{keyword}{typename}...\ Tasks,}
\DoxyCodeLine{00083\ \ \ std::enable\_if\_t<all\_same\_v<AsyncTask,\ std::decay\_t<Tasks>...>,\ \textcolor{keywordtype}{void}>*}
\DoxyCodeLine{00084\ >}
\DoxyCodeLine{00085\ \mbox{\hyperlink{classtf_1_1_async_task}{tf::AsyncTask}}\ \mbox{\hyperlink{classtf_1_1_executor_a0e2d792f28136b8227b413d0c27d5c7f}{Executor::silent\_dependent\_async}}(\mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{structfunc}{func}},\ Tasks\&\&...\ tasks)\ \{}
\DoxyCodeLine{00086\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a0e2d792f28136b8227b413d0c27d5c7f}{silent\_dependent\_async}}(}
\DoxyCodeLine{00087\ \ \ \ \ \mbox{\hyperlink{structtf_1_1_default_task_params}{DefaultTaskParams}}\{\},\ std::forward<F>(\mbox{\hyperlink{structfunc}{func}}),\ std::forward<Tasks>(tasks)...}
\DoxyCodeLine{00088\ \ \ );}
\DoxyCodeLine{00089\ \}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \textcolor{comment}{//\ Function:\ silent\_dependent\_async}}
\DoxyCodeLine{00092\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{namespace_p}{P}},\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ \textcolor{keyword}{typename}...\ Tasks,}
\DoxyCodeLine{00093\ \ \ std::enable\_if\_t<is\_task\_params\_v<P>\ \&\&\ \mbox{\hyperlink{namespacetf_a71abaef8d494f3f7bb2a9a3d04f717ee}{all\_same\_v<AsyncTask,\ std::decay\_t<Tasks>}}...>,\ \textcolor{keywordtype}{void}>*}
\DoxyCodeLine{00094\ >}
\DoxyCodeLine{00095\ \mbox{\hyperlink{classtf_1_1_async_task}{tf::AsyncTask}}\ \mbox{\hyperlink{classtf_1_1_executor_a0e2d792f28136b8227b413d0c27d5c7f}{Executor::silent\_dependent\_async}}(}
\DoxyCodeLine{00096\ \ \ \mbox{\hyperlink{namespace_p}{P}}\&\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a22557289048c77f6913601e8537ceeea}{params}},\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{structfunc}{func}},\ Tasks\&\&...\ tasks\ }
\DoxyCodeLine{00097\ )\{}
\DoxyCodeLine{00098\ \ \ std::array<\mbox{\hyperlink{classtf_1_1_async_task}{AsyncTask}},\ \textcolor{keyword}{sizeof}...(Tasks)>\ \mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}}\ =\ \{\ std::forward<Tasks>(tasks)...\ \};}
\DoxyCodeLine{00099\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a0e2d792f28136b8227b413d0c27d5c7f}{silent\_dependent\_async}}(}
\DoxyCodeLine{00100\ \ \ \ \ std::forward<P>(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a22557289048c77f6913601e8537ceeea}{params}}),\ std::forward<F>(\mbox{\hyperlink{structfunc}{func}}),\ \mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}}.begin(),\ \mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}}.end()}
\DoxyCodeLine{00101\ \ \ );}
\DoxyCodeLine{00102\ \}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \textcolor{comment}{//\ Function:\ silent\_dependent\_async}}
\DoxyCodeLine{00105\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ \textcolor{keyword}{typename}\ I,}
\DoxyCodeLine{00106\ \ \ std::enable\_if\_t<!std::is\_same\_v<std::decay\_t<I>,\ \mbox{\hyperlink{classtf_1_1_async_task}{AsyncTask}}>,\ \textcolor{keywordtype}{void}>*}
\DoxyCodeLine{00107\ >}
\DoxyCodeLine{00108\ \mbox{\hyperlink{classtf_1_1_async_task}{tf::AsyncTask}}\ \mbox{\hyperlink{classtf_1_1_executor_a0e2d792f28136b8227b413d0c27d5c7f}{Executor::silent\_dependent\_async}}(\mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{structfunc}{func}},\ I\ first,\ I\ last)\ \{}
\DoxyCodeLine{00109\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a0e2d792f28136b8227b413d0c27d5c7f}{silent\_dependent\_async}}(\mbox{\hyperlink{structtf_1_1_default_task_params}{DefaultTaskParams}}\{\},\ std::forward<F>(\mbox{\hyperlink{structfunc}{func}}),\ first,\ last);}
\DoxyCodeLine{00110\ \}}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \textcolor{comment}{//\ Function:\ silent\_dependent\_async}}
\DoxyCodeLine{00113\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{namespace_p}{P}},\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ \textcolor{keyword}{typename}\ I,}
\DoxyCodeLine{00114\ \ \ std::enable\_if\_t<is\_task\_params\_v<P>\ \&\&\ !std::is\_same\_v<std::decay\_t<I>,\ \mbox{\hyperlink{classtf_1_1_async_task}{AsyncTask}}>,\ \textcolor{keywordtype}{void}>*}
\DoxyCodeLine{00115\ >}
\DoxyCodeLine{00116\ \mbox{\hyperlink{classtf_1_1_async_task}{tf::AsyncTask}}\ \mbox{\hyperlink{classtf_1_1_executor_a0e2d792f28136b8227b413d0c27d5c7f}{Executor::silent\_dependent\_async}}(}
\DoxyCodeLine{00117\ \ \ \mbox{\hyperlink{namespace_p}{P}}\&\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a22557289048c77f6913601e8537ceeea}{params}},\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{structfunc}{func}},\ I\ first,\ I\ last}
\DoxyCodeLine{00118\ )\ \{}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab85dc42b3e9b18e4b975bd5e9a8c5e72}{\_increment\_topology}}();}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \textcolor{keywordtype}{size\_t}\ num\_dependents\ =\ std::distance(first,\ last);}
\DoxyCodeLine{00123\ \ \ }
\DoxyCodeLine{00124\ \ \ \mbox{\hyperlink{classtf_1_1_async_task}{AsyncTask}}\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}(\mbox{\hyperlink{gears_8c_af7a75874690301f56bcd3fa511ba39a8}{animate}}(}
\DoxyCodeLine{00125\ \ \ \ \ \mbox{\hyperlink{structtf_1_1_n_s_t_a_t_e_a722ef9d612f6f3f8aa2ba65ce4f32ef5}{NSTATE::NONE}},\ \mbox{\hyperlink{structtf_1_1_e_s_t_a_t_e_a9a8cf630467f60943d7e9488e095619c}{ESTATE::NONE}},\ std::forward<P>(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a22557289048c77f6913601e8537ceeea}{params}}),\ \textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr},\ num\_dependents,}
\DoxyCodeLine{00126\ \ \ \ \ std::in\_place\_type\_t<Node::DependentAsync>\{\},\ std::forward<F>(\mbox{\hyperlink{structfunc}{func}})}
\DoxyCodeLine{00127\ \ \ ));}
\DoxyCodeLine{00128\ \ \ }
\DoxyCodeLine{00129\ \ \ \textcolor{keywordflow}{for}(;\ first\ !=\ last;\ first++)\ \{}
\DoxyCodeLine{00130\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a824fbb761eaece4549da2fe070f95dac}{\_process\_async\_dependent}}(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}.\_node,\ *first,\ num\_dependents);}
\DoxyCodeLine{00131\ \ \ \}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \textcolor{keywordflow}{if}(num\_dependents\ ==\ 0)\ \{}
\DoxyCodeLine{00134\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_af5acda8c6e9a1564c9d665336ea091d0}{\_schedule\_async\_task}}(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}.\_node);}
\DoxyCodeLine{00135\ \ \ \}}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}};}
\DoxyCodeLine{00138\ \}}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00141\ \textcolor{comment}{//\ Dependent\ Async}}
\DoxyCodeLine{00142\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \textcolor{comment}{//\ Function:\ dependent\_async}}
\DoxyCodeLine{00145\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ \textcolor{keyword}{typename}...\ Tasks,}
\DoxyCodeLine{00146\ \ \ std::enable\_if\_t<all\_same\_v<AsyncTask,\ std::decay\_t<Tasks>...>,\ \textcolor{keywordtype}{void}>*}
\DoxyCodeLine{00147\ >}
\DoxyCodeLine{00148\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classtf_1_1_executor_aee02b63d3a91ad5ca5a1c0e71f3e128f}{Executor::dependent\_async}}(\mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{structfunc}{func}},\ Tasks\&\&...\ tasks)\ \{}
\DoxyCodeLine{00149\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_aee02b63d3a91ad5ca5a1c0e71f3e128f}{dependent\_async}}(\mbox{\hyperlink{structtf_1_1_default_task_params}{DefaultTaskParams}}\{\},\ std::forward<F>(\mbox{\hyperlink{structfunc}{func}}),\ std::forward<Tasks>(tasks)...);}
\DoxyCodeLine{00150\ \}}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \textcolor{comment}{//\ Function:\ dependent\_async}}
\DoxyCodeLine{00153\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{namespace_p}{P}},\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ \textcolor{keyword}{typename}...\ Tasks,}
\DoxyCodeLine{00154\ \ \ std::enable\_if\_t<is\_task\_params\_v<P>\ \&\&\ \mbox{\hyperlink{namespacetf_a71abaef8d494f3f7bb2a9a3d04f717ee}{all\_same\_v<AsyncTask,\ std::decay\_t<Tasks>}}...>,\ \textcolor{keywordtype}{void}>*}
\DoxyCodeLine{00155\ >}
\DoxyCodeLine{00156\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classtf_1_1_executor_aee02b63d3a91ad5ca5a1c0e71f3e128f}{Executor::dependent\_async}}(\mbox{\hyperlink{namespace_p}{P}}\&\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a22557289048c77f6913601e8537ceeea}{params}},\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{structfunc}{func}},\ Tasks\&\&...\ tasks)\ \{}
\DoxyCodeLine{00157\ \ \ std::array<\mbox{\hyperlink{classtf_1_1_async_task}{AsyncTask}},\ \textcolor{keyword}{sizeof}...(Tasks)>\ \mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}}\ =\ \{\ std::forward<Tasks>(tasks)...\ \};}
\DoxyCodeLine{00158\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_aee02b63d3a91ad5ca5a1c0e71f3e128f}{dependent\_async}}(}
\DoxyCodeLine{00159\ \ \ \ \ std::forward<P>(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a22557289048c77f6913601e8537ceeea}{params}}),\ std::forward<F>(\mbox{\hyperlink{structfunc}{func}}),\ \mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}}.begin(),\ \mbox{\hyperlink{sugar_8h_af6228a2253f88b2affbe0c54d8b5b321}{array}}.end()}
\DoxyCodeLine{00160\ \ \ );}
\DoxyCodeLine{00161\ \}}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \textcolor{comment}{//\ Function:\ dependent\_async}}
\DoxyCodeLine{00164\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ \textcolor{keyword}{typename}\ I,}
\DoxyCodeLine{00165\ \ \ std::enable\_if\_t<!std::is\_same\_v<std::decay\_t<I>,\ \mbox{\hyperlink{classtf_1_1_async_task}{AsyncTask}}>,\ \textcolor{keywordtype}{void}>*}
\DoxyCodeLine{00166\ >}
\DoxyCodeLine{00167\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classtf_1_1_executor_aee02b63d3a91ad5ca5a1c0e71f3e128f}{Executor::dependent\_async}}(\mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{structfunc}{func}},\ I\ first,\ I\ last)\ \{}
\DoxyCodeLine{00168\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_aee02b63d3a91ad5ca5a1c0e71f3e128f}{dependent\_async}}(\mbox{\hyperlink{structtf_1_1_default_task_params}{DefaultTaskParams}}\{\},\ std::forward<F>(\mbox{\hyperlink{structfunc}{func}}),\ first,\ last);}
\DoxyCodeLine{00169\ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \textcolor{comment}{//\ Function:\ dependent\_async}}
\DoxyCodeLine{00172\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{namespace_p}{P}},\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ \textcolor{keyword}{typename}\ I,}
\DoxyCodeLine{00173\ \ \ std::enable\_if\_t<is\_task\_params\_v<P>\ \&\&\ !std::is\_same\_v<std::decay\_t<I>,\ \mbox{\hyperlink{classtf_1_1_async_task}{AsyncTask}}>,\ \textcolor{keywordtype}{void}>*}
\DoxyCodeLine{00174\ >}
\DoxyCodeLine{00175\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classtf_1_1_executor_aee02b63d3a91ad5ca5a1c0e71f3e128f}{Executor::dependent\_async}}(\mbox{\hyperlink{namespace_p}{P}}\&\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a22557289048c77f6913601e8537ceeea}{params}},\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{structfunc}{func}},\ I\ first,\ I\ last)\ \{}
\DoxyCodeLine{00176\ \ \ }
\DoxyCodeLine{00177\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab85dc42b3e9b18e4b975bd5e9a8c5e72}{\_increment\_topology}}();}
\DoxyCodeLine{00178\ \ \ \ \ }
\DoxyCodeLine{00179\ \ \ \textcolor{keywordtype}{size\_t}\ num\_dependents\ =\ std::distance(first,\ last);}
\DoxyCodeLine{00180\ \ \ }
\DoxyCodeLine{00181\ \ \ \textcolor{comment}{//\ async\ with\ runtime:\ []\ (tf::Runtime\&)\ \{\}}}
\DoxyCodeLine{00182\ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (\mbox{\hyperlink{namespacetf_af3d94f0be0f7b49e195c4e92737b1f85}{is\_runtime\_task\_v<F>}})\ \{}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ std::promise<void>\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keyword}{auto}\ fu\{\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.get\_future()\};}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_async_task}{AsyncTask}}\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}(\mbox{\hyperlink{gears_8c_af7a75874690301f56bcd3fa511ba39a8}{animate}}(}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \mbox{\hyperlink{structtf_1_1_n_s_t_a_t_e_a722ef9d612f6f3f8aa2ba65ce4f32ef5}{NSTATE::NONE}},\ \mbox{\hyperlink{structtf_1_1_e_s_t_a_t_e_acb87e40cf84e3a484c6c62ddbd4091ab}{ESTATE::ANCHORED}},\ std::forward<P>(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a22557289048c77f6913601e8537ceeea}{params}}),\ \textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr},\ num\_dependents,}
\DoxyCodeLine{00189\ \ \ \ \ \ \ std::in\_place\_type\_t<Node::DependentAsync>\{\},}
\DoxyCodeLine{00190\ \ \ \ \ \ \ [\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}=\mbox{\hyperlink{structtf_1_1_mo_c}{MoC}}\{std::move(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})\},\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}=std::forward<F>(\mbox{\hyperlink{structfunc}{func}})]\ (\mbox{\hyperlink{classtf_1_1_runtime}{tf::Runtime}}\&\ rt,\ \textcolor{keywordtype}{bool}\ reentered)\ \textcolor{keyword}{mutable}\ \{\ }
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!reentered)\ \{}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(rt);\ }
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ eptr\ =\ rt.\_parent-\/>\_exception\_ptr;}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ eptr\ ?\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.object.set\_exception(eptr)\ :\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.object.set\_value();}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00199\ \ \ \ \ ));}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keywordflow}{for}(;\ first\ !=\ last;\ first++)\ \{}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a824fbb761eaece4549da2fe070f95dac}{\_process\_async\_dependent}}(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}.\_node,\ *first,\ num\_dependents);}
\DoxyCodeLine{00203\ \ \ \ \ \}}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{keywordflow}{if}(num\_dependents\ ==\ 0)\ \{}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_af5acda8c6e9a1564c9d665336ea091d0}{\_schedule\_async\_task}}(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}.\_node);}
\DoxyCodeLine{00207\ \ \ \ \ \}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordflow}{return}\ std::make\_pair(std::move(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}),\ std::move(fu));}
\DoxyCodeLine{00210\ \ \ \}}
\DoxyCodeLine{00211\ \ \ \textcolor{comment}{//\ async\ without\ runtime:\ []\ ()\ \{\}}}
\DoxyCodeLine{00212\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(std::is\_invocable\_v<F>)\ \{}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{test__broadcast__node_8cpp_a554e63228b946db0d44c4f398b18e212}{R}}\ =\ std::invoke\_result\_t<F>;}
\DoxyCodeLine{00215\ \ \ \ \ std::packaged\_task<\mbox{\hyperlink{test__broadcast__node_8cpp_a554e63228b946db0d44c4f398b18e212}{R}}()>\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}(std::forward<F>(\mbox{\hyperlink{structfunc}{func}}));}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keyword}{auto}\ fu\{\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.get\_future()\};}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_async_task}{AsyncTask}}\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}(\mbox{\hyperlink{gears_8c_af7a75874690301f56bcd3fa511ba39a8}{animate}}(}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \mbox{\hyperlink{structtf_1_1_n_s_t_a_t_e_a722ef9d612f6f3f8aa2ba65ce4f32ef5}{NSTATE::NONE}},\ \mbox{\hyperlink{structtf_1_1_e_s_t_a_t_e_a9a8cf630467f60943d7e9488e095619c}{ESTATE::NONE}},\ std::forward<P>(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a22557289048c77f6913601e8537ceeea}{params}}),\ \textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr},\ num\_dependents,}
\DoxyCodeLine{00220\ \ \ \ \ \ \ std::in\_place\_type\_t<Node::DependentAsync>\{\},}
\DoxyCodeLine{00221\ \ \ \ \ \ \ [\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}=\mbox{\hyperlink{namespacetf_a7ddc987133ce85bd85c883b9e113c71b}{make\_moc}}(std::move(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}))]\ ()\ \textcolor{keyword}{mutable}\ \{\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.object();\ \}}
\DoxyCodeLine{00222\ \ \ \ \ ));}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \ \ \textcolor{keywordflow}{for}(;\ first\ !=\ last;\ first++)\ \{}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a824fbb761eaece4549da2fe070f95dac}{\_process\_async\_dependent}}(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}.\_node,\ *first,\ num\_dependents);}
\DoxyCodeLine{00226\ \ \ \ \ \}}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{keywordflow}{if}(num\_dependents\ ==\ 0)\ \{}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_af5acda8c6e9a1564c9d665336ea091d0}{\_schedule\_async\_task}}(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}.\_node);}
\DoxyCodeLine{00230\ \ \ \ \ \}}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{keywordflow}{return}\ std::make\_pair(std::move(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}),\ std::move(fu));}
\DoxyCodeLine{00233\ \ \ \}}
\DoxyCodeLine{00234\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00235\ \ \ \ \ \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{namespacetf_a036d82b3ab21beea2ed89611e2930db7}{dependent\_false\_v<F>}},\ \textcolor{stringliteral}{"{}invalid\ async\ callable"{}});}
\DoxyCodeLine{00236\ \ \ \}}
\DoxyCodeLine{00237\ \}}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00240\ \textcolor{comment}{//\ Dependent\ Async\ Helper\ Functions}}
\DoxyCodeLine{00241\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \textcolor{comment}{//\ Procedure:\ \_process\_async\_dependent}}
\DoxyCodeLine{00244\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a824fbb761eaece4549da2fe070f95dac}{Executor::\_process\_async\_dependent}}(}
\DoxyCodeLine{00245\ \ \ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node,\ \mbox{\hyperlink{classtf_1_1_async_task}{tf::AsyncTask}}\&\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}},\ \textcolor{keywordtype}{size\_t}\&\ num\_dependents}
\DoxyCodeLine{00246\ )\ \{}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \ \ \textcolor{keyword}{auto}\&\ state\ =\ std::get\_if<Node::DependentAsync>(\&(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}.\_node-\/>\_handle))-\/>state;}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00250\ \ \ \textcolor{comment}{//add\_successor:}}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \textcolor{comment}{//auto\ target\ =\ ASTATE::UNFINISHED;}}
\DoxyCodeLine{00253\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00255\ \ \ \textcolor{comment}{//if(state.compare\_exchange\_weak(target,\ ASTATE::LOCKED,}}
\DoxyCodeLine{00256\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::memory\_order\_acq\_rel,}}
\DoxyCodeLine{00257\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::memory\_order\_acquire))\ \{}}
\DoxyCodeLine{00258\ \ \ \textcolor{comment}{//\ \ task.\_node-\/>\_edges.push\_back(node);}}
\DoxyCodeLine{00259\ \ \ \textcolor{comment}{//\ \ state.store(ASTATE::UNFINISHED,\ std::memory\_order\_release);}}
\DoxyCodeLine{00260\ \ \ \textcolor{comment}{//\}}}
\DoxyCodeLine{00263\ \ \ \textcolor{comment}{//else\ if\ (target\ ==\ ASTATE::FINISHED)\ \{}}
\DoxyCodeLine{00264\ \ \ \textcolor{comment}{//\ \ num\_dependents\ =\ node-\/>\_join\_counter.fetch\_sub(1,\ std::memory\_order\_acq\_rel)\ -\/\ 1;}}
\DoxyCodeLine{00265\ \ \ \textcolor{comment}{//\}}}
\DoxyCodeLine{00267\ \ \ \textcolor{comment}{//else\ \{}}
\DoxyCodeLine{00268\ \ \ \textcolor{comment}{//\ \ goto\ add\_successor;}}
\DoxyCodeLine{00269\ \ \ \textcolor{comment}{//\}}}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \textcolor{keywordflow}{while}\ (\textcolor{keyword}{true})\ \{}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{keyword}{auto}\ target\ =\ \mbox{\hyperlink{structtf_1_1_a_s_t_a_t_e_ab51ddcdb1ca0d744926740b7a840b57f}{ASTATE::UNFINISHED}};}
\DoxyCodeLine{00274\ }
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{comment}{//\ Try\ to\ acquire\ the\ lock}}
\DoxyCodeLine{00276\ \ \ \ \ \textcolor{keywordflow}{if}\ (state.compare\_exchange\_strong(target,\ \mbox{\hyperlink{structtf_1_1_a_s_t_a_t_e_a22d8b993a6ec765385f0a1352cfc3aeb}{ASTATE::LOCKED}},\ }
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::memory\_order\_acq\_rel,}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::memory\_order\_acquire))\ \{}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}.\_node-\/>\_edges.push\_back(node);}
\DoxyCodeLine{00280\ \ \ \ \ \ \ state.store(\mbox{\hyperlink{structtf_1_1_a_s_t_a_t_e_ab51ddcdb1ca0d744926740b7a840b57f}{ASTATE::UNFINISHED}},\ std::memory\_order\_release);}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00282\ \ \ \ \ \}}
\DoxyCodeLine{00283\ }
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{comment}{//\ If\ already\ finished,\ decrement\ the\ join\ counter}}
\DoxyCodeLine{00285\ \ \ \ \ \textcolor{keywordflow}{if}\ (target\ ==\ \mbox{\hyperlink{structtf_1_1_a_s_t_a_t_e_a0478cfb3af58a42d5cf1181c7367aeba}{ASTATE::FINISHED}})\ \{}
\DoxyCodeLine{00286\ \ \ \ \ \ \ num\_dependents\ =\ node-\/>\_join\_counter.fetch\_sub(1,\ std::memory\_order\_acq\_rel)\ -\/\ 1;}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00288\ \ \ \ \ \}}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{comment}{//\ If\ locked\ by\ another\ worker,\ retry}}
\DoxyCodeLine{00291\ \ \ \}}
\DoxyCodeLine{00292\ \}}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00294\ \textcolor{comment}{//\ Procedure:\ \_tear\_down\_dependent\_async}}
\DoxyCodeLine{00295\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a5a745396246598bb55acb9dd3a4b6c25}{Executor::\_tear\_down\_dependent\_async}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ worker,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\&\ cache)\ \{}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \textcolor{keyword}{auto}\ handle\ =\ std::get\_if<Node::DependentAsync>(\&(node-\/>\_handle));}
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00299\ \ \ \textcolor{comment}{//\ this\ async\ task\ comes\ from\ Executor}}
\DoxyCodeLine{00300\ \ \ \textcolor{keyword}{auto}\ target\ =\ \mbox{\hyperlink{structtf_1_1_a_s_t_a_t_e_ab51ddcdb1ca0d744926740b7a840b57f}{ASTATE::UNFINISHED}};}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00302\ \ \ \textcolor{keywordflow}{while}(!handle-\/>state.compare\_exchange\_weak(target,\ \mbox{\hyperlink{structtf_1_1_a_s_t_a_t_e_a0478cfb3af58a42d5cf1181c7367aeba}{ASTATE::FINISHED}},}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::memory\_order\_acq\_rel,}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::memory\_order\_relaxed))\ \{}
\DoxyCodeLine{00305\ \ \ \ \ target\ =\ \mbox{\hyperlink{structtf_1_1_a_s_t_a_t_e_ab51ddcdb1ca0d744926740b7a840b57f}{ASTATE::UNFINISHED}};}
\DoxyCodeLine{00306\ \ \ \}}
\DoxyCodeLine{00307\ \ \ }
\DoxyCodeLine{00308\ \ \ \textcolor{comment}{//\ spawn\ successors\ whenever\ their\ dependencies\ are\ resolved}}
\DoxyCodeLine{00309\ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<node-\/>\_edges.size();\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00310\ \ \ \ \ \textcolor{keywordflow}{if}(\textcolor{keyword}{auto}\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ node-\/>\_edges[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}];\ }
\DoxyCodeLine{00311\ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>\_join\_counter.fetch\_sub(1,\ std::memory\_order\_acq\_rel)\ ==\ 1}
\DoxyCodeLine{00312\ \ \ \ \ )\ \{}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a86e70707f516b5b9dd85ed5be36ee694}{\_update\_cache}}(worker,\ cache,\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}});}
\DoxyCodeLine{00314\ \ \ \ \ \}}
\DoxyCodeLine{00315\ \ \ \}}
\DoxyCodeLine{00316\ \ \ }
\DoxyCodeLine{00317\ \ \ \textcolor{comment}{//\ now\ the\ executor\ no\ longer\ needs\ to\ retain\ ownership}}
\DoxyCodeLine{00318\ \ \ \textcolor{keywordflow}{if}(handle-\/>use\_count.fetch\_sub(1,\ std::memory\_order\_acq\_rel)\ ==\ 1)\ \{}
\DoxyCodeLine{00319\ \ \ \ \ \mbox{\hyperlink{namespacetf_a445fe5f14e30fe86b18bf7c35df34ad5}{recycle}}(node);}
\DoxyCodeLine{00320\ \ \ \}}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a8728f22f6d177fad84ce667e02a7a3b9}{\_decrement\_topology}}();}
\DoxyCodeLine{00323\ \}}
\DoxyCodeLine{00324\ }
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00327\ }
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \}\ \ \textcolor{comment}{//\ end\ of\ namespace\ tf\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00330\ }

\end{DoxyCode}
