\doxysection{cds\+::intrusive\+::striped\+\_\+set\+::striping\texorpdfstring{$<$}{<} Lock, Alloc \texorpdfstring{$>$}{>} 模板类 参考}
\hypertarget{classcds_1_1intrusive_1_1striped__set_1_1striping}{}\label{classcds_1_1intrusive_1_1striped__set_1_1striping}\index{cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$@{cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$}}


Lock striping concurrent access policy  




{\ttfamily \#include $<$striping\+\_\+policy.\+h$>$}

\doxysubsubsection*{Public 类型}
\begin{DoxyCompactItemize}
\item 
typedef Lock \mbox{\hyperlink{classcds_1_1intrusive_1_1striped__set_1_1striping_acc3d59822081138809699cc3280f2451}{lock\+\_\+type}}
\begin{DoxyCompactList}\small\item\em lock type \end{DoxyCompactList}\item 
typedef Alloc \mbox{\hyperlink{classcds_1_1intrusive_1_1striped__set_1_1striping_a7086b3c5d6c356c109b2c1a521d2b39b}{allocator\+\_\+type}}
\begin{DoxyCompactList}\small\item\em allocator type \end{DoxyCompactList}\item 
typedef \mbox{\hyperlink{classcds_1_1sync_1_1lock__array}{cds\+::sync\+::lock\+\_\+array}}$<$ \mbox{\hyperlink{classcds_1_1intrusive_1_1striped__set_1_1striping_acc3d59822081138809699cc3280f2451}{lock\+\_\+type}}, \mbox{\hyperlink{structcds_1_1sync_1_1pow2__select__policy}{cds\+::sync\+::pow2\+\_\+select\+\_\+policy}}, \mbox{\hyperlink{classcds_1_1intrusive_1_1striped__set_1_1striping_a7086b3c5d6c356c109b2c1a521d2b39b}{allocator\+\_\+type}} $>$ \mbox{\hyperlink{classcds_1_1intrusive_1_1striped__set_1_1striping_af55e0d323b694877d9c2cc3d69da805e}{lock\+\_\+array\+\_\+type}}
\begin{DoxyCompactList}\small\item\em lock array type \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classcds_1_1intrusive_1_1striped__set_1_1striping_a4c2d73e776a67957301073ef2c7c987c}{striping}} (size\+\_\+t n\+Lock\+Count)
\begin{DoxyCompactList}\small\item\em Constructor \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classcds_1_1intrusive_1_1striped__set_1_1striping_a300ade460cfa56ef997e69008818bfd7}{lock\+\_\+count}} () const
\begin{DoxyCompactList}\small\item\em Returns lock array size \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
\subsubsection*{template$<$class Lock = std\+::mutex, class Alloc = CDS\+\_\+\+DEFAULT\+\_\+\+ALLOCATOR$>$\newline
class cds\+::intrusive\+::striped\+\_\+set\+::striping$<$ Lock, Alloc $>$}
Lock striping concurrent access policy 

This is one of available \doxylink{structcds_1_1opt_1_1mutex__policy}{opt\+::mutex\+\_\+policy} option type for \doxylink{classcds_1_1intrusive_1_1_striped_set}{Striped\+Set}

Lock striping is very simple technique. The set consists of the bucket table and the array of locks. Initially, the capacity of lock array and bucket table is the same. When set is resized, bucket table capacity will be doubled but lock array will not. The lock {\ttfamily i} protects each bucket {\ttfamily j}, where {\ttfamily  j = i mod L }, where {\ttfamily L} -\/ the size of lock array.

The policy contains an internal array of {\ttfamily Lock} locks.

Template arguments\+:
\begin{DoxyItemize}
\item {\ttfamily Lock} -\/ the type of mutex. The default is {\ttfamily std\+::mutex}. The mutex type should be default-\/constructible. Note that a spin-\/lock is not so good suitable for lock striping for performance reason.
\item {\ttfamily Alloc} -\/ allocator type used for lock array memory allocation. Default is {\ttfamily CDS\+\_\+\+DEFAULT\+\_\+\+ALLOCATOR}. 
\end{DoxyItemize}

\doxysubsection{成员类型定义说明}
\Hypertarget{classcds_1_1intrusive_1_1striped__set_1_1striping_a7086b3c5d6c356c109b2c1a521d2b39b}\index{cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$@{cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$}!allocator\_type@{allocator\_type}}
\index{allocator\_type@{allocator\_type}!cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$@{cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$}}
\doxysubsubsection{\texorpdfstring{allocator\_type}{allocator\_type}}
{\footnotesize\ttfamily \label{classcds_1_1intrusive_1_1striped__set_1_1striping_a7086b3c5d6c356c109b2c1a521d2b39b} 
template$<$class Lock = std\+::mutex, class Alloc = CDS\+\_\+\+DEFAULT\+\_\+\+ALLOCATOR$>$ \\
typedef Alloc \mbox{\hyperlink{classcds_1_1intrusive_1_1striped__set_1_1striping}{cds\+::intrusive\+::striped\+\_\+set\+::striping}}$<$ Lock, Alloc $>$\+::allocator\+\_\+type}



allocator type 

\Hypertarget{classcds_1_1intrusive_1_1striped__set_1_1striping_af55e0d323b694877d9c2cc3d69da805e}\index{cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$@{cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$}!lock\_array\_type@{lock\_array\_type}}
\index{lock\_array\_type@{lock\_array\_type}!cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$@{cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$}}
\doxysubsubsection{\texorpdfstring{lock\_array\_type}{lock\_array\_type}}
{\footnotesize\ttfamily \label{classcds_1_1intrusive_1_1striped__set_1_1striping_af55e0d323b694877d9c2cc3d69da805e} 
template$<$class Lock = std\+::mutex, class Alloc = CDS\+\_\+\+DEFAULT\+\_\+\+ALLOCATOR$>$ \\
typedef \mbox{\hyperlink{classcds_1_1sync_1_1lock__array}{cds\+::sync\+::lock\+\_\+array}}$<$ \mbox{\hyperlink{classcds_1_1intrusive_1_1striped__set_1_1striping_acc3d59822081138809699cc3280f2451}{lock\+\_\+type}}, \mbox{\hyperlink{structcds_1_1sync_1_1pow2__select__policy}{cds\+::sync\+::pow2\+\_\+select\+\_\+policy}}, \mbox{\hyperlink{classcds_1_1intrusive_1_1striped__set_1_1striping_a7086b3c5d6c356c109b2c1a521d2b39b}{allocator\+\_\+type}} $>$ \mbox{\hyperlink{classcds_1_1intrusive_1_1striped__set_1_1striping}{cds\+::intrusive\+::striped\+\_\+set\+::striping}}$<$ Lock, Alloc $>$\+::lock\+\_\+array\+\_\+type}



lock array type 

\Hypertarget{classcds_1_1intrusive_1_1striped__set_1_1striping_acc3d59822081138809699cc3280f2451}\index{cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$@{cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$}!lock\_type@{lock\_type}}
\index{lock\_type@{lock\_type}!cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$@{cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$}}
\doxysubsubsection{\texorpdfstring{lock\_type}{lock\_type}}
{\footnotesize\ttfamily \label{classcds_1_1intrusive_1_1striped__set_1_1striping_acc3d59822081138809699cc3280f2451} 
template$<$class Lock = std\+::mutex, class Alloc = CDS\+\_\+\+DEFAULT\+\_\+\+ALLOCATOR$>$ \\
typedef Lock \mbox{\hyperlink{classcds_1_1intrusive_1_1striped__set_1_1striping}{cds\+::intrusive\+::striped\+\_\+set\+::striping}}$<$ Lock, Alloc $>$\+::lock\+\_\+type}



lock type 



\doxysubsection{构造及析构函数说明}
\Hypertarget{classcds_1_1intrusive_1_1striped__set_1_1striping_a4c2d73e776a67957301073ef2c7c987c}\index{cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$@{cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$}!striping@{striping}}
\index{striping@{striping}!cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$@{cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$}}
\doxysubsubsection{\texorpdfstring{striping()}{striping()}}
{\footnotesize\ttfamily \label{classcds_1_1intrusive_1_1striped__set_1_1striping_a4c2d73e776a67957301073ef2c7c987c} 
template$<$class Lock = std\+::mutex, class Alloc = CDS\+\_\+\+DEFAULT\+\_\+\+ALLOCATOR$>$ \\
\mbox{\hyperlink{classcds_1_1intrusive_1_1striped__set_1_1striping}{cds\+::intrusive\+::striped\+\_\+set\+::striping}}$<$ Lock, Alloc $>$\+::striping (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{n\+Lock\+Count}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Constructor 


\begin{DoxyParams}{参数}
{\em n\+Lock\+Count} & The size of lock array. Must be power of two. \\
\hline
\end{DoxyParams}


\doxysubsection{成员函数说明}
\Hypertarget{classcds_1_1intrusive_1_1striped__set_1_1striping_a300ade460cfa56ef997e69008818bfd7}\index{cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$@{cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$}!lock\_count@{lock\_count}}
\index{lock\_count@{lock\_count}!cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$@{cds::intrusive::striped\_set::striping$<$ Lock, Alloc $>$}}
\doxysubsubsection{\texorpdfstring{lock\_count()}{lock\_count()}}
{\footnotesize\ttfamily \label{classcds_1_1intrusive_1_1striped__set_1_1striping_a300ade460cfa56ef997e69008818bfd7} 
template$<$class Lock = std\+::mutex, class Alloc = CDS\+\_\+\+DEFAULT\+\_\+\+ALLOCATOR$>$ \\
size\+\_\+t \mbox{\hyperlink{classcds_1_1intrusive_1_1striped__set_1_1striping}{cds\+::intrusive\+::striped\+\_\+set\+::striping}}$<$ Lock, Alloc $>$\+::lock\+\_\+count (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Returns lock array size 

Lock array size is unchanged during {\ttfamily striped} object lifetime 

该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/libcds/cds/intrusive/striped\+\_\+set/\mbox{\hyperlink{striping__policy_8h}{striping\+\_\+policy.\+h}}\end{DoxyCompactItemize}
