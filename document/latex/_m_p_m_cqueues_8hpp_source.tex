\doxysection{MPMCqueues.\+hpp}
\hypertarget{_m_p_m_cqueues_8hpp_source}{}\label{_m_p_m_cqueues_8hpp_source}\index{external/taskflow/3rd-\/party/ff/mpmc/MPMCqueues.hpp@{external/taskflow/3rd-\/party/ff/mpmc/MPMCqueues.hpp}}
\mbox{\hyperlink{_m_p_m_cqueues_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ -\/*-\/\ Mode:\ C++;\ tab-\/width:\ 4;\ c-\/basic-\/offset:\ 4;\ indent-\/tabs-\/mode:\ nil\ -\/*-\/\ */}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00016\ \textcolor{comment}{/*\ ***************************************************************************}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ \ FastFlow\ is\ free\ software;\ you\ can\ redistribute\ it\ and/or\ modify\ it}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ \ under\ the\ terms\ of\ the\ GNU\ Lesser\ General\ Public\ License\ version\ 3\ as}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *\ \ published\ by\ the\ Free\ Software\ Foundation.}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ *\ \ Starting\ from\ version\ 3.0.1\ FastFlow\ is\ dual\ licensed\ under\ the\ GNU\ LGPLv3}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ *\ \ or\ MIT\ License\ (https://github.com/ParaGroup/WindFlow/blob/vers3.x/LICENSE.MIT)}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00024\ \textcolor{comment}{\ *\ \ This\ program\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,\ but\ WITHOUT}}
\DoxyCodeLine{00025\ \textcolor{comment}{\ *\ \ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of\ MERCHANTABILITY\ or}}
\DoxyCodeLine{00026\ \textcolor{comment}{\ *\ \ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the\ GNU\ Lesser\ General\ Public}}
\DoxyCodeLine{00027\ \textcolor{comment}{\ *\ \ License\ for\ more\ details.}}
\DoxyCodeLine{00028\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00029\ \textcolor{comment}{\ *\ \ You\ should\ have\ received\ a\ copy\ of\ the\ GNU\ Lesser\ General\ Public\ License}}
\DoxyCodeLine{00030\ \textcolor{comment}{\ *\ \ along\ with\ this\ program;\ if\ not,\ write\ to\ the\ Free\ Software\ Foundation,}}
\DoxyCodeLine{00031\ \textcolor{comment}{\ *\ \ Inc.,\ 59\ Temple\ Place\ -\/\ Suite\ 330,\ Boston,\ MA\ 02111-\/1307,\ USA.}}
\DoxyCodeLine{00032\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00033\ \textcolor{comment}{\ ****************************************************************************}}
\DoxyCodeLine{00034\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00035\ \ }
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#ifndef\ FF\_MPMCQUEUE\_HPP}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#define\ FF\_MPMCQUEUE\_HPP}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{comment}{/*\ }}
\DoxyCodeLine{00040\ \textcolor{comment}{\ *\ This\ file\ contains\ Multi-\/Producer/Multi-\/Consumer\ queue\ implementations.}}
\DoxyCodeLine{00041\ \textcolor{comment}{\ *\ }}
\DoxyCodeLine{00042\ \textcolor{comment}{\ *\ \ \ *\ MPMC\_Ptr\_Queue\ \ \ bounded\ MPMC\ queue\ by\ Dmitry\ Vyukov\ }}
\DoxyCodeLine{00043\ \textcolor{comment}{\ *\ \ \ *\ uMPMC\_Ptr\_Queue\ \ unbounded\ MPMC\ queue\ by\ Massimo\ Torquati\ }}
\DoxyCodeLine{00044\ \textcolor{comment}{\ *\ \ \ *\ MSqueue\ \ \ \ \ \ \ \ \ \ unbounded\ MPMC\ queue\ by\ Michael\ \&\ Scott}}
\DoxyCodeLine{00045\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00046\ \textcolor{comment}{\ *\ \ -\/\ Author:\ }}
\DoxyCodeLine{00047\ \textcolor{comment}{\ *\ \ \ \ \ Massimo\ Torquati\ <torquati@di.unipi.it>\ <massimotor@gmail.com>}}
\DoxyCodeLine{00048\ \textcolor{comment}{\ *\ \ }}
\DoxyCodeLine{00049\ \textcolor{comment}{\ *\ \ -\/\ History}}
\DoxyCodeLine{00050\ \textcolor{comment}{\ *\ \ \ \ 10\ Jul\ 2012:\ M.\ Aldinucci:\ Minor\ fixes\ }}
\DoxyCodeLine{00051\ \textcolor{comment}{\ *\ \ \ \ \ 4\ Oct\ 2015:\ M.\ Aldinucci:\ cleaning\ related\ to\ better\ c++11\ compliance}}
\DoxyCodeLine{00052\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \textcolor{preprocessor}{\#include\ <cstdlib>}}
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00057\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{buffer_8hpp}{ff/buffer.hpp}}>}}
\DoxyCodeLine{00058\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{sysdep_8h}{ff/sysdep.h}}>}}
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{allocator_8hpp}{ff/allocator.hpp}}>}}
\DoxyCodeLine{00060\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{external_2taskflow_23rd-party_2ff_2platforms_2_platform_8h}{ff/platforms/platform.h}}>}}
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{abstraction__dcas_8h}{ff/mpmc/asm/abstraction\_dcas.h}}>}}
\DoxyCodeLine{00062\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{spin-lock_8hpp}{ff/spin-\/lock.hpp}}>}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ }
\DoxyCodeLine{00065\ \textcolor{comment}{/*}}
\DoxyCodeLine{00066\ \textcolor{comment}{\ *\ NOTE:\ You\ should\ define\ NO\_STD\_C0X\ if\ you\ want\ to\ avoid\ c++0x\ and\ c++11}}
\DoxyCodeLine{00067\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00068\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00069\ \ }
\DoxyCodeLine{00070\ \textcolor{preprocessor}{\#if\ (\ (!defined(NO\_STD\_C0X))\ \ \&\&\ \ !(\_\_cplusplus\ >=\ 201103L))}}
\DoxyCodeLine{00071\ \textcolor{preprocessor}{\#pragma\ message\ ("{}Define\ -\/DNO\_STD\_C0X\ to\ use\ a\ non\ c++0x/c++11\ compiler"{})}}
\DoxyCodeLine{00072\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \textcolor{comment}{//\#define\ NO\_STD\_C0X}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \textcolor{comment}{//\ //\ Check\ for\ g++\ version\ >=\ 4.5}}
\DoxyCodeLine{00078\ \textcolor{comment}{//\ \#if\ \_\_GNUC\_\_\ >\ 4\ ||\ (\_\_GNUC\_\_\ ==\ 4\ \&\&\ \_\_GNUC\_MINOR\_\_\ >=\ 5)}}
\DoxyCodeLine{00079\ \textcolor{comment}{//\ \ \#include\ <atomic>}}
\DoxyCodeLine{00080\ \textcolor{comment}{//\ \#else}}
\DoxyCodeLine{00081\ \textcolor{comment}{//\ \ //\ Check\ for\ g++\ version\ >=\ 4.4}}
\DoxyCodeLine{00082\ \textcolor{comment}{//\ \ \#if\ \_\_GNUC\_\_\ >\ 4\ ||\ (\_\_GNUC\_\_\ ==\ 4\ \&\&\ \_\_GNUC\_MINOR\_\_\ >=\ 4)}}
\DoxyCodeLine{00083\ \textcolor{comment}{//\ \ \ \#include\ <cstdatomic>}}
\DoxyCodeLine{00084\ \textcolor{comment}{//\ \ \#else}}
\DoxyCodeLine{00085\ \textcolor{comment}{//\ \ \ \#define\ USE\_STD\_0X}}
\DoxyCodeLine{00086\ \textcolor{comment}{//\ \ \#endif}}
\DoxyCodeLine{00087\ \textcolor{comment}{//\ \#endif}}
\DoxyCodeLine{00088\ \textcolor{comment}{//\#endif\ //\ USE\_STD\_C0X}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \textcolor{preprocessor}{\#define\ CAS\ abstraction\_cas}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceff}{ff}}\ \{}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \textcolor{comment}{/*\ }}
\DoxyCodeLine{00096\ \textcolor{comment}{\ *\ \ In\ the\ following\ we\ implement\ two\ kinds\ of\ queues:\ }}
\DoxyCodeLine{00097\ \textcolor{comment}{\ *\ \ \ -\/\ the\ MPMC\_Ptr\_Queue\ is\ an\ implementation\ of\ the\ **\ bounded\ **\ }}
\DoxyCodeLine{00098\ \textcolor{comment}{\ *\ \ \ \ \ Multi-\/Producer/Multi-\/Consumer\ queue\ algorithm\ by\ Dmitry\ Vyukov\ }}
\DoxyCodeLine{00099\ \textcolor{comment}{\ *\ \ \ \ \ (www.1024cores.net).\ It\ stores\ pointers.}}
\DoxyCodeLine{00100\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00101\ \textcolor{comment}{\ *\ \ \ -\/\ the\ uMPMC\_Ptr\_Queue\ implements\ an\ **\ unbounded\ **\ }}
\DoxyCodeLine{00102\ \textcolor{comment}{\ *\ \ \ \ \ Multi-\/Producer/Multi-\/Consumer\ queue\ which\ does\ not\ require\ }}
\DoxyCodeLine{00103\ \textcolor{comment}{\ *\ \ \ \ \ any\ special\ memory\ allocator\ to\ avoid\ dangling\ pointers.\ }}
\DoxyCodeLine{00104\ \textcolor{comment}{\ *\ \ \ \ \ The\ implementation\ blends\ together\ the\ MPMC\_Ptr\_Queue\ and\ the\ }}
\DoxyCodeLine{00105\ \textcolor{comment}{\ *\ \ \ \ \ uSWSR\_Ptr\_Buffer.}}
\DoxyCodeLine{00106\ \textcolor{comment}{\ *\ \ }}
\DoxyCodeLine{00107\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00122\ \textcolor{preprocessor}{\#if\ !defined(NO\_STD\_C0X)}}
\DoxyCodeLine{00123\ \textcolor{preprocessor}{\#include\ <atomic>}}
\DoxyCodeLine{00124\ \ \ \ \ }
\DoxyCodeLine{00125\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a5b41cb231bed1df6b81598c2a8a3c04d}{MPMC\_Ptr\_Queue}}\ \{}
\DoxyCodeLine{00126\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structff_1_1_m_p_m_c___ptr___queue_1_1element__t}{element\_t}}\ \{}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ std::atomic<unsigned\ long>\ \mbox{\hyperlink{structff_1_1_m_p_m_c___ptr___queue_1_1element__t_a3387396d7fb73c0bcfced79fa5e38aa7}{seq}};}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1_m_p_m_c___ptr___queue_1_1element__t_ae4242e77741ad81c55d7bc8318f5980d}{data}};}
\DoxyCodeLine{00130\ \ \ \ \ \};}
\DoxyCodeLine{00131\ \ \ \ \ }
\DoxyCodeLine{00132\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00134\ \textcolor{comment}{\ \ \ \ \ *\ \(\backslash\)brief\ Constructor}}
\DoxyCodeLine{00135\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00136\ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a5b41cb231bed1df6b81598c2a8a3c04d}{MPMC\_Ptr\_Queue}}()\ \{\}}
\DoxyCodeLine{00137\ \ \ \ \ }
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00139\ \textcolor{comment}{\ \ \ \ \ *\ \(\backslash\)brief\ Destructor}}
\DoxyCodeLine{00140\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00141\ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_abab300a726b8af7561d2f2dd036ff437}{\string~MPMC\_Ptr\_Queue}}()\ \{}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}})\ \{}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ []\ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}};}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}}=\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00146\ \ \ \ \ \}}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{comment}{/*\ \ \ \ |\ \ data\ \ |\ seq\ |\ \ \ \ \ \ \ \ |\ \ data\ \ |\ seq\ |\ \ \ \ \ \ \ \ |\ \ data\ \ |\ seq\ |}}
\DoxyCodeLine{00149\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ |\ \ NULL\ \ |\ \ 0\ \ |\ -\/-\/-\/-\/-\/-\/\ |\ \ NULL\ \ |\ \ 1\ \ |\ -\/-\/-\/-\/-\/-\/\ |\ \ NULL\ \ |\ ...\ |}}
\DoxyCodeLine{00150\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ ||||||||||||||||\ \ \ \ \ \ \ \ ||||||||||||||||\ \ \ \ \ \ \ \ ||||||||||||||||}}
\DoxyCodeLine{00151\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}}
\DoxyCodeLine{00152\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}}
\DoxyCodeLine{00153\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ }}
\DoxyCodeLine{00154\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ pwrite\ pread}}
\DoxyCodeLine{00155\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00156\ \ \ \ \ \ }
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a5f50781542e7735ec7469c1e1bd4150e}{init}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}})\ \{}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}<2)\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}=2;}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ need\ a\ size\ that\ is\ a\ power\ 2\ in\ order\ to\ set\ the\ mask\ }}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{namespaceff_a34913688cd78fe736857184aca78d580}{isPowerOf2}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}))\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ =\ \mbox{\hyperlink{namespaceff_a83452ea25490a41016a08bb9c2efe1c0}{nextPowerOf2}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a3eeffe57cc81edbc9dab2c159bc30cec}{mask}}\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}-\/1;}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{structff_1_1_m_p_m_c___ptr___queue_1_1element__t}{element\_t}}[\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}];}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}};++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].data\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].seq.store(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},std::memory\_order\_relaxed);}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ store\ method}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Atomically\ stores\ the\ value\ 'i'.\ }}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Memory\ is\ affected\ according\ to\ the\ value\ of\ memory\_order:}}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ memory\_order\ must\ be\ one\ of\ }}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ std::memory\_order\_relaxed\ }}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ std::memory\_order\_release\ }}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ std::memory\_order\_seq\_cst.\ }}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Otherwise\ the\ behavior\ is\ undefined.\ \ }}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a6b2cdc10d9496b9650b8995eab535f6d}{pwrite}}.store(0,std::memory\_order\_relaxed);\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a351b72bc1f38fb404adcfcdec5c6117a}{pread}}.store(0,std::memory\_order\_relaxed);}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00185\ \ \ \ \ \}}
\DoxyCodeLine{00186\ \ \ \ \ }
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_adf254bea25840020a0f807f66100cdba}{push}}(\textcolor{keywordtype}{void}\ *\textcolor{keyword}{const}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}})\ \{}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ pw,\ seq;}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1_m_p_m_c___ptr___queue_1_1element__t}{element\_t}}\ *\ node;}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ bk\ =\ \mbox{\hyperlink{config_8hpp_a9bddd4414e8e1ba6f976e0bf0a73a735}{BACKOFF\_MIN}};}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ pw\ \ \ \ =\ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a6b2cdc10d9496b9650b8995eab535f6d}{pwrite}}.load(std::memory\_order\_relaxed);}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ node\ \ =\ \&\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}}[pw\ \&\ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a3eeffe57cc81edbc9dab2c159bc30cec}{mask}}];}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ seq\ \ \ =\ node-\/>seq.load(std::memory\_order\_acquire);}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ load\ method}}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Atomically\ loads\ and\ returns\ the\ current\ value\ of\ the\ atomic\ variable.\ }}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Memory\ is\ affected\ according\ to\ the\ value\ of\ memory\_order.\ }}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pw\ ==\ seq)\ \{\ \textcolor{comment}{//\ CAS\ }}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a6b2cdc10d9496b9650b8995eab535f6d}{pwrite}}.compare\_exchange\_weak(pw,\ pw+1,\ std::memory\_order\_relaxed))}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ exponential\ delay\ with\ max\ value}}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{volatile}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<bk;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ ;}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bk\ <<=\ 1;}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bk\ \&=\ \mbox{\hyperlink{config_8hpp_a4ca969a7becb2a5ede5e27866780b29d}{BACKOFF\_MAX}};}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ }
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pw\ >\ seq)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ queue\ full}}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}(1);}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ node-\/>data\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}};}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ node-\/>seq.store(seq+1,std::memory\_order\_release);}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00219\ \ \ \ \ \}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00227\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_aa75f7a9a0852eefb2840778f6a5fed7b}{pop}}(\textcolor{keywordtype}{void}**\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}})\ \{}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ pr,\ seq;}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1_m_p_m_c___ptr___queue_1_1element__t}{element\_t}}\ *\ node;}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ bk\ =\ \mbox{\hyperlink{config_8hpp_a9bddd4414e8e1ba6f976e0bf0a73a735}{BACKOFF\_MIN}};}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ pr\ \ \ \ =\ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a351b72bc1f38fb404adcfcdec5c6117a}{pread}}.load(std::memory\_order\_relaxed);}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ node\ \ =\ \&\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}}[pr\ \&\ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a3eeffe57cc81edbc9dab2c159bc30cec}{mask}}];}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ seq\ \ \ =\ node-\/>seq.load(std::memory\_order\_acquire);}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ diff\ =\ seq\ -\/\ (pr+1);}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (diff\ ==\ 0)\ \{\ \textcolor{comment}{//\ CAS}}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a351b72bc1f38fb404adcfcdec5c6117a}{pread}}.compare\_exchange\_weak(pr,\ (pr+1),\ std::memory\_order\_relaxed))}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ exponential\ delay\ with\ max\ value}}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{volatile}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<bk;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ ;}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bk\ <<=\ 1;}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bk\ \&=\ \mbox{\hyperlink{config_8hpp_a4ca969a7becb2a5ede5e27866780b29d}{BACKOFF\_MAX}};}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{\ }
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (diff\ <\ 0)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ queue\ empty}}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}(1);}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ *\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}\ =\ node-\/>data;}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ node-\/>seq.store((pr+\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a3eeffe57cc81edbc9dab2c159bc30cec}{mask}}+1),\ std::memory\_order\_release);}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00253\ \ \ \ \ \}}
\DoxyCodeLine{00254\ \ \ \ \ }
\DoxyCodeLine{00255\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ std::atomic<unsigned\ long>\ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a6b2cdc10d9496b9650b8995eab535f6d}{pwrite}};\ }
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_afd7f5dce28bc05ce44ff16f79b4f0ab0}{padding1}}[\mbox{\hyperlink{config_8hpp_af89f60b07247176687889ade776c8e10}{CACHE\_LINE\_SIZE}}];\ }
\DoxyCodeLine{00259\ \ \ \ \ \};}
\DoxyCodeLine{00260\ \ \ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ std::atomic<unsigned\ long>\ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a351b72bc1f38fb404adcfcdec5c6117a}{pread}};\ \ }
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_af35c4fc0c7228d272ed9032272fb752e}{padding2}}[\mbox{\hyperlink{config_8hpp_af89f60b07247176687889ade776c8e10}{CACHE\_LINE\_SIZE}}];\ }
\DoxyCodeLine{00263\ \ \ \ \ \};}
\DoxyCodeLine{00264\ \ \ \ \ \mbox{\hyperlink{structff_1_1_m_p_m_c___ptr___queue_1_1element__t}{element\_t}}\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}};}
\DoxyCodeLine{00265\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a3eeffe57cc81edbc9dab2c159bc30cec}{mask}};}
\DoxyCodeLine{00266\ \};}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00269\ \textcolor{preprocessor}{\#else\ \ }\textcolor{comment}{//\ using\ internal\ atomic\ operations}}
\DoxyCodeLine{00270\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{external_2taskflow_23rd-party_2ff_2mpmc_2asm_2atomic_8h}{ff/mpmc/asm/atomic.h}}>}}
\DoxyCodeLine{00271\ \ \ \ \ }
\DoxyCodeLine{00272\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue}{MPMC\_Ptr\_Queue}}\ \{}
\DoxyCodeLine{00273\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00274\ }
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keyword}{struct\ }element\_t\ \{}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ atomic\_long\_t\ \mbox{\hyperlink{structff_1_1_m_p_m_c___ptr___queue_1_1element__t_a3387396d7fb73c0bcfced79fa5e38aa7}{seq}};}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *\ \ \ \ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}};}
\DoxyCodeLine{00278\ \ \ \ \ \};}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00284\ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a5b41cb231bed1df6b81598c2a8a3c04d}{MPMC\_Ptr\_Queue}}()\ \{\}}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00290\ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_abab300a726b8af7561d2f2dd036ff437}{\string~MPMC\_Ptr\_Queue}}()\ \{\ }
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}})\ \{}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysdep_8h_a8d0b69a707e38b6ee06c8039cce3a9ae}{freeAlignedMemory}}(\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}});}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00295\ \ \ \ \ \}}
\DoxyCodeLine{00296\ \ \ \ \ }
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{comment}{/*\ \ \ \ |\ \ data\ \ |\ seq\ |\ \ \ \ \ \ \ \ |\ \ data\ \ |\ seq\ |\ \ \ \ \ \ \ \ |\ \ data\ \ |\ seq\ |}}
\DoxyCodeLine{00298\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ |\ \ NULL\ \ |\ \ 0\ \ |\ -\/-\/-\/-\/-\/-\/\ |\ \ NULL\ \ |\ \ 1\ \ |\ -\/-\/-\/-\/-\/-\/\ |\ \ NULL\ \ |\ ...\ |}}
\DoxyCodeLine{00299\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ ||||||||||||||||\ \ \ \ \ \ \ \ ||||||||||||||||\ \ \ \ \ \ \ \ ||||||||||||||||}}
\DoxyCodeLine{00300\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}}
\DoxyCodeLine{00301\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}}
\DoxyCodeLine{00302\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}}
\DoxyCodeLine{00303\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ \ pwrite\ pread}}
\DoxyCodeLine{00304\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00305\ \ \ \ \ }
\DoxyCodeLine{00309\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}})\ \{}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}<2)\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}=2;}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ need\ a\ size\ that\ is\ a\ power\ 2\ in\ order\ to\ set\ the\ mask\ }}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{namespaceff_a34913688cd78fe736857184aca78d580}{isPowerOf2}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}))\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ =\ \mbox{\hyperlink{namespaceff_a83452ea25490a41016a08bb9c2efe1c0}{nextPowerOf2}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a3eeffe57cc81edbc9dab2c159bc30cec}{mask}}\ =\ (\textcolor{keywordtype}{unsigned}\ long)\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}-\/1);}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}}=(\mbox{\hyperlink{structff_1_1_m_p_m_c___ptr___queue_1_1element__t}{element\_t}}*)\mbox{\hyperlink{sysdep_8h_ae77dd87ccd6c736ac3eb1aa624d05269}{getAlignedMemory}}(\mbox{\hyperlink{namespaceff_ad0bc32203f6c871e1a6d21be4437d272}{longxCacheLine}}*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{long}),\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}*\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structff_1_1_m_p_m_c___ptr___queue_1_1element__t}{element\_t}}));}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}};++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].data\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \ \ \ \ atomic\_long\_set(\&\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].seq,\textcolor{keywordtype}{long}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}));}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ atomic\_long\_set(\&\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a6b2cdc10d9496b9650b8995eab535f6d}{pwrite}},0);}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ atomic\_long\_set(\&\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a351b72bc1f38fb404adcfcdec5c6117a}{pread}},0);}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00325\ \ \ \ \ \}}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00333\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_adf254bea25840020a0f807f66100cdba}{push}}(\textcolor{keywordtype}{void}\ *\textcolor{keyword}{const}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}})\ \{}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ pw,\ seq;}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1_m_p_m_c___ptr___queue_1_1element__t}{element\_t}}\ *\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}};}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ bk\ =\ \mbox{\hyperlink{config_8hpp_a9bddd4414e8e1ba6f976e0bf0a73a735}{BACKOFF\_MIN}};}
\DoxyCodeLine{00337\ }
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \ \ \ \ pw\ \ \ \ =\ atomic\_long\_read(\&\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a6b2cdc10d9496b9650b8995eab535f6d}{pwrite}});}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}\ \ =\ \&\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}}[pw\ \&\ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a3eeffe57cc81edbc9dab2c159bc30cec}{mask}}];}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ seq\ \ \ =\ atomic\_long\_read(\&\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>seq);}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pw\ ==\ seq)\ \{}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (abstraction\_cas((\textcolor{keyword}{volatile}\ \mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}}*)\&\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a6b2cdc10d9496b9650b8995eab535f6d}{pwrite}},\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})(pw+1),\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})pw)==(\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})pw)\ }
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ exponential\ delay\ with\ max\ value}}
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{volatile}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<bk;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ ;}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bk\ <<=\ 1;}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bk\ \&=\ \mbox{\hyperlink{config_8hpp_a4ca969a7becb2a5ede5e27866780b29d}{BACKOFF\_MAX}};}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ }
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pw\ >\ seq)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00353\ }
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}(1);}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>data\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}};}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \textcolor{comment}{//atomic\_long\_inc(\&node-\/>seq);}}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ atomic\_long\_set(\&\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>seq,\ (seq+1));}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00359\ \ \ \ \ \}}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00367\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_aa75f7a9a0852eefb2840778f6a5fed7b}{pop}}(\textcolor{keywordtype}{void}**\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}})\ \{}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ pr\ ,\ seq;}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1_m_p_m_c___ptr___queue_1_1element__t}{element\_t}}\ *\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}};}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ bk\ =\ \mbox{\hyperlink{config_8hpp_a9bddd4414e8e1ba6f976e0bf0a73a735}{BACKOFF\_MIN}};}
\DoxyCodeLine{00371\ }
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ pr\ \ \ \ =\ atomic\_long\_read(\&\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a351b72bc1f38fb404adcfcdec5c6117a}{pread}});}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}\ \ =\ \&\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}}[pr\ \&\ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a3eeffe57cc81edbc9dab2c159bc30cec}{mask}}];}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ seq\ \ \ =\ atomic\_long\_read(\&\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>seq);}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ diff\ =\ seq\ -\/\ (pr+1);}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (diff\ ==\ 0)\ \{}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (abstraction\_cas((\textcolor{keyword}{volatile}\ \mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}}*)\&\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a351b72bc1f38fb404adcfcdec5c6117a}{pread}},\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})(pr+1),\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})pr)==(\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})pr)\ }
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00380\ }
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ exponential\ delay\ with\ max\ value}}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{volatile}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<bk;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ ;}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bk\ <<=\ 1;}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bk\ \&=\ \mbox{\hyperlink{config_8hpp_a4ca969a7becb2a5ede5e27866780b29d}{BACKOFF\_MAX}};}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{\ }
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (diff\ <\ 0)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00388\ }
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}(1);}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ *\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}\ =\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>data;}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ atomic\_long\_set(\&\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>seq,(pr+\mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a3eeffe57cc81edbc9dab2c159bc30cec}{mask}}+1));}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00393\ \ \ \ \ \}}
\DoxyCodeLine{00394\ \ \ \ \ }
\DoxyCodeLine{00395\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00396\ \ \ \ \ \textcolor{comment}{//\ WARNING:\ on\ 64bit\ Windows\ platform\ sizeof(unsigned\ long)\ =\ 32\ !!}}
\DoxyCodeLine{00397\ \ \ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ atomic\_long\_t\ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a6b2cdc10d9496b9650b8995eab535f6d}{pwrite}};}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_afd7f5dce28bc05ce44ff16f79b4f0ab0}{padding1}}[\mbox{\hyperlink{config_8hpp_af89f60b07247176687889ade776c8e10}{CACHE\_LINE\_SIZE}}];}
\DoxyCodeLine{00400\ \ \ \ \ \};}
\DoxyCodeLine{00401\ \ \ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ atomic\_long\_t\ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a351b72bc1f38fb404adcfcdec5c6117a}{pread}};}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_af35c4fc0c7228d272ed9032272fb752e}{padding2}}[\mbox{\hyperlink{config_8hpp_af89f60b07247176687889ade776c8e10}{CACHE\_LINE\_SIZE}}];}
\DoxyCodeLine{00404\ \ \ \ \ \};}
\DoxyCodeLine{00405\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00406\ \ \ \ \ \mbox{\hyperlink{structff_1_1_m_p_m_c___ptr___queue_1_1element__t}{element\_t}}\ *\ \ \ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a14b9107c41947958e63c001fd629e830}{buf}};}
\DoxyCodeLine{00407\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \ \mbox{\hyperlink{classff_1_1_m_p_m_c___ptr___queue_a3eeffe57cc81edbc9dab2c159bc30cec}{mask}};}
\DoxyCodeLine{00408\ \};}
\DoxyCodeLine{00409\ }
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00411\ \ }
\DoxyCodeLine{00427\ \textcolor{keyword}{class\ }uMPMC\_Ptr\_Queue\ \{}
\DoxyCodeLine{00428\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00429\ \ \ \ \ \textcolor{keyword}{enum}\ \{DEFAULT\_NUM\_QUEUES=4,\ DEFAULT\_uSPSC\_SIZE=2048\};}
\DoxyCodeLine{00430\ }
\DoxyCodeLine{00431\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{void}\ *\ \ \ \ \ \ \ \ data\_element\_t;}
\DoxyCodeLine{00432\ \ \ \ \ \textcolor{keyword}{typedef}\ atomic\_long\_t\ sequenceP\_t;}
\DoxyCodeLine{00433\ \ \ \ \ \textcolor{keyword}{typedef}\ atomic\_long\_t\ sequenceC\_t;}
\DoxyCodeLine{00434\ }
\DoxyCodeLine{00435\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00439\ \ \ \ \ uMPMC\_Ptr\_Queue()\ \{\}}
\DoxyCodeLine{00440\ \ \ \ \ }
\DoxyCodeLine{00444\ \ \ \ \ \string~uMPMC\_Ptr\_Queue()\ \{}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (buf)\ \{}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<(\mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}}+1);++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (buf[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}])\ \textcolor{keyword}{delete}\ (uSWSR\_Ptr\_Buffer*)(buf[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysdep_8h_a8d0b69a707e38b6ee06c8039cce3a9ae}{freeAlignedMemory}}(buf);}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \ \ \ \ buf\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (seqP)\ \mbox{\hyperlink{sysdep_8h_a8d0b69a707e38b6ee06c8039cce3a9ae}{freeAlignedMemory}}(seqP);\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (seqC)\ \mbox{\hyperlink{sysdep_8h_a8d0b69a707e38b6ee06c8039cce3a9ae}{freeAlignedMemory}}(seqC);}
\DoxyCodeLine{00454\ \ \ \ \ \}}
\DoxyCodeLine{00455\ }
\DoxyCodeLine{00459\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ nqueues=DEFAULT\_NUM\_QUEUES,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}=DEFAULT\_uSPSC\_SIZE)\ \{}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nqueues<2)\ nqueues=2;}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!isPowerOf2(nqueues))\ nqueues\ =\ nextPowerOf2(nqueues);}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}}\ =\ nqueues-\/1;}
\DoxyCodeLine{00463\ }
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ buf=(data\_element\_t*)\mbox{\hyperlink{sysdep_8h_ae77dd87ccd6c736ac3eb1aa624d05269}{getAlignedMemory}}(longxCacheLine*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{long}),nqueues*\textcolor{keyword}{sizeof}(data\_element\_t));}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ seqP=(sequenceP\_t*)\mbox{\hyperlink{sysdep_8h_ae77dd87ccd6c736ac3eb1aa624d05269}{getAlignedMemory}}(longxCacheLine*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{long}),nqueues*\textcolor{keyword}{sizeof}(sequenceP\_t));}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ seqC=(sequenceP\_t*)\mbox{\hyperlink{sysdep_8h_ae77dd87ccd6c736ac3eb1aa624d05269}{getAlignedMemory}}(longxCacheLine*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{long}),nqueues*\textcolor{keyword}{sizeof}(sequenceC\_t));}
\DoxyCodeLine{00467\ }
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<nqueues;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \ \ \ \ buf[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]=\ \textcolor{keyword}{new}\ uSWSR\_Ptr\_Buffer(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \ \ \ \ ((uSWSR\_Ptr\_Buffer*)(buf[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]))-\/>init();}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \ \ \ \ atomic\_long\_set(\&(seqP[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]),\textcolor{keywordtype}{long}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}));}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \ \ \ \ atomic\_long\_set(\&(seqC[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]),\textcolor{keywordtype}{long}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}));}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ atomic\_long\_set(\&preadP,0);}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ atomic\_long\_set(\&preadC,0);}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00477\ \ \ \ \ \}}
\DoxyCodeLine{00478\ }
\DoxyCodeLine{00484\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{test__concurrent__queue_8cpp_a262227aa72b9cc1db7b9a80d7f295211}{push}}(\textcolor{keywordtype}{void}\ *\textcolor{keyword}{const}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}})\ \{}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ pw,seq,idx;}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ bk\ =\ \mbox{\hyperlink{config_8hpp_a9bddd4414e8e1ba6f976e0bf0a73a735}{BACKOFF\_MIN}};}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \ \ \ \ pw\ \ \ \ =\ atomic\_long\_read(\&preadP);}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \ idx\ \ \ =\ pw\ \&\ \mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}};}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \ \ \ \ seq\ \ \ =\ atomic\_long\_read(\&seqP[idx]);}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pw\ ==\ seq)\ \{}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (abstraction\_cas((\textcolor{keyword}{volatile}\ \mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}}*)\&preadP,\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})(pw+1),\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})pw)==(\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})pw)\ }
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ exponential\ delay\ with\ max\ value}}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{volatile}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<bk;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ ;}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bk\ <<=\ 1;}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bk\ \&=\ \mbox{\hyperlink{config_8hpp_a4ca969a7becb2a5ede5e27866780b29d}{BACKOFF\_MAX}};}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ }
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}(1);}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ ((uSWSR\_Ptr\_Buffer*)(buf[idx]))-\/>push(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}});\ \textcolor{comment}{//\ cannot\ fail}}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ atomic\_long\_set(\&seqP[idx],(pw+\mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}}+1));}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00504\ \ \ \ \ \}}
\DoxyCodeLine{00505\ \ \ \ \ }
\DoxyCodeLine{00510\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesource__runtime_1_1vector_a9e32bbc347aee976ae2e2853e4ba98af}{pop}}(\textcolor{keywordtype}{void}\ **\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}})\ \{}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ pr,idx;}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ seq;}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ bk\ =\ \mbox{\hyperlink{config_8hpp_a9bddd4414e8e1ba6f976e0bf0a73a735}{BACKOFF\_MIN}};}
\DoxyCodeLine{00514\ }
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \ \ \ \ pr\ \ \ \ \ =\ atomic\_long\_read(\&preadC);}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ \ \ \ \ idx\ \ \ \ =\ pr\ \&\ \mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}};}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ \ \ \ \ seq\ \ \ \ =\ atomic\_long\_read(\&seqC[idx]);}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pr\ ==\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long})seq)\ \{\ }
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (atomic\_long\_read(\&seqP[idx])\ <=\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long})seq)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ queue\ }}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (abstraction\_cas((\textcolor{keyword}{volatile}\ \mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}}*)\&preadC,\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})(pr+1),\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})pr)==(\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})pr)\ }
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00523\ }
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ exponential\ delay\ with\ max\ value}}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{volatile}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<bk;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ ;}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bk\ <<=\ 1;}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bk\ \&=\ \mbox{\hyperlink{config_8hpp_a4ca969a7becb2a5ede5e27866780b29d}{BACKOFF\_MAX}};}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \ }
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}(1);}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ ((uSWSR\_Ptr\_Buffer*)(buf[idx]))-\/>pop(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}});}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ atomic\_long\_set(\&seqC[idx],(pr+\mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}}+1));}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00533\ \ \ \ \ \}}
\DoxyCodeLine{00534\ }
\DoxyCodeLine{00535\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00536\ \ \ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ atomic\_long\_t\ \ preadP;}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ \ \ \ \ \ \ \ \ \ \ padding1[\mbox{\hyperlink{config_8hpp_af89f60b07247176687889ade776c8e10}{CACHE\_LINE\_SIZE}}];}
\DoxyCodeLine{00539\ \ \ \ \ \};}
\DoxyCodeLine{00540\ \ \ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ atomic\_long\_t\ \ preadC;}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ \ \ \ \ \ \ \ \ \ \ padding2[\mbox{\hyperlink{config_8hpp_af89f60b07247176687889ade776c8e10}{CACHE\_LINE\_SIZE}}];}
\DoxyCodeLine{00543\ \ \ \ \ \};}
\DoxyCodeLine{00544\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00545\ \ \ \ \ data\_element\_t\ *\ \ buf;}
\DoxyCodeLine{00546\ \ \ \ \ sequenceP\_t\ \ \ \ *\ \ seqP;}
\DoxyCodeLine{00547\ \ \ \ \ sequenceC\_t\ \ \ \ *\ \ seqC;}
\DoxyCodeLine{00548\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}};}
\DoxyCodeLine{00549\ }
\DoxyCodeLine{00550\ \};}
\DoxyCodeLine{00551\ \ \ \ \ }
\DoxyCodeLine{00552\ }
\DoxyCodeLine{00553\ }
\DoxyCodeLine{00554\ }
\DoxyCodeLine{00576\ \textcolor{keyword}{class\ }MSqueue\ \{}
\DoxyCodeLine{00577\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00578\ \ \ \ \ \textcolor{keyword}{enum}\ \{MSQUEUE\_PTR=0\ \};}
\DoxyCodeLine{00579\ }
\DoxyCodeLine{00580\ \ \ \ \ \textcolor{comment}{//\ forward\ decl\ of\ Node\ type}}
\DoxyCodeLine{00581\ \ \ \ \ \textcolor{keyword}{struct\ }Node;}
\DoxyCodeLine{00582\ \ }
\DoxyCodeLine{00583\ \ \ \ \ \textcolor{keyword}{struct\ }Pointer\ \{}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ Pointer()\ \{\ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}[MSQUEUE\_PTR]=0;\}}
\DoxyCodeLine{00585\ }
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{_array_cwise_unary_ops_8h_aa198852a6b380257ea3e34c8f7e6e250}{operator\ !}}()\ \{}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}[MSQUEUE\_PTR]==0);}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ Pointer\&\ operator=(\textcolor{keyword}{const}\ Pointer\ \&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})\ \{}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}[MSQUEUE\_PTR]=\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.ptr[MSQUEUE\_PTR];}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00593\ }
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ Pointer\&\ operator=(Node\ \&\ node)\ \{}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}[MSQUEUE\_PTR]=\&\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}};}
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00598\ }
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ Pointer\ \&\ getNodeNext()\ \{}
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}[MSQUEUE\_PTR]-\/>next;}
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ Node\ *\ getNode()\ \{\ \textcolor{keywordflow}{return}\ \ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}[MSQUEUE\_PTR];\ \}}
\DoxyCodeLine{00603\ }
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{safe__ptr_8h_aa70685c379499032704de691f795148b}{operator==}}(\ \textcolor{keyword}{const}\ Pointer\&\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ((\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}[MSQUEUE\_PTR]==\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.ptr[MSQUEUE\_PTR]));}
\DoxyCodeLine{00606\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00607\ }
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{operator}\ \textcolor{keyword}{volatile}\ \mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}}\ *\ ()\ \textcolor{keyword}{const}\ \{\ }
\DoxyCodeLine{00609\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{union\ }\{\ Node*\ \textcolor{keyword}{const}\ \textcolor{keyword}{volatile}*\ \mbox{\hyperlink{_matrix_base__all_8cpp_acdff45bcf8497bafe04b93e4e704c57b}{p1}};\ \textcolor{keyword}{volatile}\ \mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}}\ *\ p2;\}\ pn;}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \ \ \ \ pn.p1\ =\ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}};}
\DoxyCodeLine{00611\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pn.p2;\ }
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{operator}\ \mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}}\ *\ ()\ \textcolor{keyword}{const}\ \{\ }
\DoxyCodeLine{00614\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{union\ }\{\ Node*\ \textcolor{keyword}{const}\ \textcolor{keyword}{volatile}*\ \mbox{\hyperlink{_matrix_base__all_8cpp_acdff45bcf8497bafe04b93e4e704c57b}{p1}};\ \mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}}\ *\ p2;\}\ pn;}
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ \ \ \ \ \ pn.p1\ =\ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}};}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pn.p2;\ }
\DoxyCodeLine{00617\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00618\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00619\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{operator}\ \mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}}\ ()\textcolor{keyword}{\ const\ }\{\ }
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{union\ }\{\ Node*\ \textcolor{keyword}{volatile}\ \mbox{\hyperlink{_matrix_base__all_8cpp_acdff45bcf8497bafe04b93e4e704c57b}{p1}};\ \mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}}\ p2;\}\ pn;}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ \ \ \ \ pn.p1\ =\ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}[MSQUEUE\_PTR];}
\DoxyCodeLine{00622\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pn.p2;\ }
\DoxyCodeLine{00623\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00624\ }
\DoxyCodeLine{00625\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceluisa_a5e9b11b642840f2cea7babc61d33bf4f}{set}}(Node\ \&\ node)\ \{}
\DoxyCodeLine{00626\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}[MSQUEUE\_PTR]=\&\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}};}
\DoxyCodeLine{00627\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00628\ }
\DoxyCodeLine{00629\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ *\ getData()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}[MSQUEUE\_PTR]-\/>getData();\ \}}
\DoxyCodeLine{00630\ }
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ Node\ *\ \textcolor{keyword}{volatile}\ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}[1];}
\DoxyCodeLine{00632\ \ \ \ \ \}\ ALIGN\_TO\_POST(\mbox{\hyperlink{liblfds_8h_ae8445900d5ff1faf0de7c1cab225e933}{ALIGN\_SINGLE\_POINTER}});}
\DoxyCodeLine{00633\ \ \ \ \ }
\DoxyCodeLine{00634\ \ \ \ \ \textcolor{keyword}{struct\ }Node\ \{}
\DoxyCodeLine{00635\ \ \ \ \ \ \ \ \ Node():\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}(0)\ \{\ \mbox{\hyperlink{namespaceeastl_a4e92bbac38652d0b6a6b9882c003fd43}{next}}.ptr[MSQUEUE\_PTR]=0;\}}
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ \ Node(\textcolor{keywordtype}{void}\ *\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}):\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}})\ \{}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceeastl_a4e92bbac38652d0b6a6b9882c003fd43}{next}}.ptr[MSQUEUE\_PTR]=0;}
\DoxyCodeLine{00638\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00639\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00640\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{operator}\ \mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}}\ *\ ()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}}\ *)\mbox{\hyperlink{namespaceeastl_a4e92bbac38652d0b6a6b9882c003fd43}{next}};\ \}}
\DoxyCodeLine{00641\ }
\DoxyCodeLine{00642\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ setData(\textcolor{keywordtype}{void}\ *\ \textcolor{keyword}{const}\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}})\ \{\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}=\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}};\}}
\DoxyCodeLine{00643\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ *\ getData()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}};\ \}}
\DoxyCodeLine{00644\ }
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ Pointer\ \ \ \mbox{\hyperlink{namespaceeastl_a4e92bbac38652d0b6a6b9882c003fd43}{next}};}
\DoxyCodeLine{00646\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ *\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}};}
\DoxyCodeLine{00647\ \ \ \ \ \}\ ALIGN\_TO\_POST(\mbox{\hyperlink{liblfds_8h_ab9890c3afcf94bd344854d87caddf039}{ALIGN\_DOUBLE\_POINTER}});}
\DoxyCodeLine{00648\ }
\DoxyCodeLine{00649\ \ \ \ \ Pointer\ \ \mbox{\hyperlink{ittnotify__static_8h_ad492e8facf9b4113e52f1918fceb8804}{head}};}
\DoxyCodeLine{00650\ \ \ \ \ \textcolor{keywordtype}{long}\ \ \ \ \ padding1[longxCacheLine-\/1];}
\DoxyCodeLine{00651\ \ \ \ \ Pointer\ \ \mbox{\hyperlink{ittnotify__static_8h_ae6f0aed6c2af4489760c7c13c49ae904}{tail}};}
\DoxyCodeLine{00652\ \ \ \ \ \textcolor{keywordtype}{long}\ \ \ \ \ padding2[longxCacheLine-\/1];;}
\DoxyCodeLine{00653\ \ \ \ \ FFAllocator\ *delayedAllocator;}
\DoxyCodeLine{00654\ }
\DoxyCodeLine{00655\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00656\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ allocnode(Pointer\ \&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \textcolor{keywordtype}{void}\ *\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}})\ \{}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \textcolor{keyword}{union\ }\{\ Node\ *\ \mbox{\hyperlink{_matrix_base__all_8cpp_acdff45bcf8497bafe04b93e4e704c57b}{p1}};\ \textcolor{keywordtype}{void}\ *\ p2;\}\ pn;}
\DoxyCodeLine{00658\ }
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (delayedAllocator-\/>posix\_memalign((\textcolor{keywordtype}{void}**)\&pn.p2,\mbox{\hyperlink{liblfds_8h_ab9890c3afcf94bd344854d87caddf039}{ALIGN\_DOUBLE\_POINTER}},\textcolor{keyword}{sizeof}(Node))!=0)\ \{}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedetail_a619f3502677571222147bfadcc64392ea5bb94a1c12413a2e5d14deabab29f2aa}{abort}}();}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ (pn.p2)\ Node(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}});}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.set(*pn.p1);}
\DoxyCodeLine{00664\ \ \ \ \ \}}
\DoxyCodeLine{00665\ }
\DoxyCodeLine{00666\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ deallocnode(\ Node\ *\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}})\ \{}
\DoxyCodeLine{00667\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>\string~Node();}
\DoxyCodeLine{00668\ \ \ \ \ \ \ \ \ delayedAllocator-\/>free(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{00669\ \ \ \ \ \}}
\DoxyCodeLine{00670\ }
\DoxyCodeLine{00671\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00672\ \ \ \ \ MSqueue():\ delayedAllocator(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{\ \}}
\DoxyCodeLine{00673\ \ \ \ \ }
\DoxyCodeLine{00674\ \ \ \ \ \string~MSqueue()\ \{}
\DoxyCodeLine{00675\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (delayedAllocator)\ \ \{}
\DoxyCodeLine{00676\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ delayedAllocator;}
\DoxyCodeLine{00677\ \ \ \ \ \ \ \ \ \ \ \ \ delayedAllocator\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00678\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00679\ \ \ \ \ \}}
\DoxyCodeLine{00680\ }
\DoxyCodeLine{00681\ \ \ \ \ MSqueue\&\ operator=(\textcolor{keyword}{const}\ MSqueue\&\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\ \{\ }
\DoxyCodeLine{00682\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_ad492e8facf9b4113e52f1918fceb8804}{head}}=\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}.head;}
\DoxyCodeLine{00683\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_ae6f0aed6c2af4489760c7c13c49ae904}{tail}}=\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}.tail;}
\DoxyCodeLine{00684\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00685\ \ \ \ \ \}}
\DoxyCodeLine{00686\ }
\DoxyCodeLine{00688\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init}}()\ \{}
\DoxyCodeLine{00689\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (delayedAllocator)\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00690\ \ \ \ \ \ \ \ \ delayedAllocator\ =\ \textcolor{keyword}{new}\ FFAllocator(2);\ }
\DoxyCodeLine{00691\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!delayedAllocator)\ \{}
\DoxyCodeLine{00692\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacespdlog_ae1d3e9e381047283ac67046df1b6e13c}{error}}(\textcolor{stringliteral}{"{}MSqueue::init,\ cannot\ allocate\ FFAllocator\(\backslash\)n"{}});}
\DoxyCodeLine{00693\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00694\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00695\ }
\DoxyCodeLine{00696\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ create\ the\ first\ NULL\ node\ }}
\DoxyCodeLine{00697\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ so\ the\ queue\ is\ never\ really\ empty}}
\DoxyCodeLine{00698\ \ \ \ \ \ \ \ \ Pointer\ \mbox{\hyperlink{namespace_c_l_i_1_1detail_a01c35a876e2917ffdc1ee618e0c06619}{dummy}};}
\DoxyCodeLine{00699\ \ \ \ \ \ \ \ \ allocnode(dummy,\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00700\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00701\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_ad492e8facf9b4113e52f1918fceb8804}{head}}\ =\ \mbox{\hyperlink{namespace_c_l_i_1_1detail_a01c35a876e2917ffdc1ee618e0c06619}{dummy}};}
\DoxyCodeLine{00702\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_ae6f0aed6c2af4489760c7c13c49ae904}{tail}}\ =\ \mbox{\hyperlink{namespace_c_l_i_1_1detail_a01c35a876e2917ffdc1ee618e0c06619}{dummy}};}
\DoxyCodeLine{00703\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00704\ \ \ \ \ \}}
\DoxyCodeLine{00705\ }
\DoxyCodeLine{00706\ \ \ \ \ \textcolor{comment}{//\ insert\ method,\ it\ never\ fails}}
\DoxyCodeLine{00707\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{test__concurrent__queue_8cpp_a262227aa72b9cc1db7b9a80d7f295211}{push}}(\textcolor{keywordtype}{void}\ *\ \textcolor{keyword}{const}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}})\ \{}
\DoxyCodeLine{00708\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{cpq__pdes_8cpp_a1d39aac66e12dae50a24cd7a9100ef33}{done}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00709\ }
\DoxyCodeLine{00710\ \ \ \ \ \ \ \ \ Pointer\ tailptr\ ALIGN\_TO\_POST(\mbox{\hyperlink{liblfds_8h_ae8445900d5ff1faf0de7c1cab225e933}{ALIGN\_SINGLE\_POINTER}});}
\DoxyCodeLine{00711\ \ \ \ \ \ \ \ \ Pointer\ \mbox{\hyperlink{namespaceeastl_a4e92bbac38652d0b6a6b9882c003fd43}{next}}\ \ \ \ ALIGN\_TO\_POST(\mbox{\hyperlink{liblfds_8h_ae8445900d5ff1faf0de7c1cab225e933}{ALIGN\_SINGLE\_POINTER}});}
\DoxyCodeLine{00712\ \ \ \ \ \ \ \ \ Pointer\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}\ \ \ \ ALIGN\_TO\_POST(\mbox{\hyperlink{liblfds_8h_ae8445900d5ff1faf0de7c1cab225e933}{ALIGN\_SINGLE\_POINTER}});}
\DoxyCodeLine{00713\ \ \ \ \ \ \ \ \ allocnode(node,\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}});}
\DoxyCodeLine{00714\ }
\DoxyCodeLine{00715\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00716\ \ \ \ \ \ \ \ \ \ \ \ \ tailptr\ =\ \mbox{\hyperlink{ittnotify__static_8h_ae6f0aed6c2af4489760c7c13c49ae904}{tail}};}
\DoxyCodeLine{00717\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceeastl_a4e92bbac38652d0b6a6b9882c003fd43}{next}}\ \ \ \ =\ tailptr.getNodeNext();}
\DoxyCodeLine{00718\ }
\DoxyCodeLine{00719\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tailptr\ ==\ \mbox{\hyperlink{ittnotify__static_8h_ae6f0aed6c2af4489760c7c13c49ae904}{tail}})\ \{}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!next)\ \{\ \textcolor{comment}{//\ tail\ was\ pointing\ to\ the\ last\ node}}
\DoxyCodeLine{00721\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cpq__pdes_8cpp_a1d39aac66e12dae50a24cd7a9100ef33}{done}}\ =\ (\mbox{\hyperlink{_m_p_m_cqueues_8hpp_ade570fdc92454d2e464c7ea8f085e0a4}{CAS}}((\textcolor{keyword}{volatile}\ \mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}}\ *)(tailptr.getNodeNext()),\ }
\DoxyCodeLine{00722\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})node,\ }
\DoxyCodeLine{00723\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})next)\ ==\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})next);}
\DoxyCodeLine{00724\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{\ \ \ \ \ \textcolor{comment}{//\ tail\ was\ not\ pointing\ to\ the\ last\ node}}
\DoxyCodeLine{00725\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_m_p_m_cqueues_8hpp_ade570fdc92454d2e464c7ea8f085e0a4}{CAS}}((\textcolor{keyword}{volatile}\ \mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}}\ *)\mbox{\hyperlink{ittnotify__static_8h_ae6f0aed6c2af4489760c7c13c49ae904}{tail}},\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})next,\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})tailptr);}
\DoxyCodeLine{00726\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00727\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00728\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}(!\mbox{\hyperlink{cpq__pdes_8cpp_a1d39aac66e12dae50a24cd7a9100ef33}{done}});}
\DoxyCodeLine{00729\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_m_p_m_cqueues_8hpp_ade570fdc92454d2e464c7ea8f085e0a4}{CAS}}((\textcolor{keyword}{volatile}\ \mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}}\ *)\mbox{\hyperlink{ittnotify__static_8h_ae6f0aed6c2af4489760c7c13c49ae904}{tail}},\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})node,\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})\ tailptr);}
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00731\ \ \ \ \ \}}
\DoxyCodeLine{00732\ \ \ \ \ }
\DoxyCodeLine{00733\ \ \ \ \ \textcolor{comment}{//\ extract\ method,\ it\ returns\ false\ if\ the\ queue\ is\ empty}}
\DoxyCodeLine{00734\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \ \mbox{\hyperlink{namespacesource__runtime_1_1vector_a9e32bbc347aee976ae2e2853e4ba98af}{pop}}(\textcolor{keywordtype}{void}\ **\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}})\ \{\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00735\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{cpq__pdes_8cpp_a1d39aac66e12dae50a24cd7a9100ef33}{done}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00736\ }
\DoxyCodeLine{00737\ \ \ \ \ \ \ \ \ ALIGN\_TO\_PRE(\mbox{\hyperlink{liblfds_8h_ae8445900d5ff1faf0de7c1cab225e933}{ALIGN\_SINGLE\_POINTER}})\ Pointer\ headptr;}
\DoxyCodeLine{00738\ \ \ \ \ \ \ \ \ ALIGN\_TO\_PRE(\mbox{\hyperlink{liblfds_8h_ae8445900d5ff1faf0de7c1cab225e933}{ALIGN\_SINGLE\_POINTER}})\ Pointer\ tailptr;}
\DoxyCodeLine{00739\ \ \ \ \ \ \ \ \ ALIGN\_TO\_PRE(\mbox{\hyperlink{liblfds_8h_ae8445900d5ff1faf0de7c1cab225e933}{ALIGN\_SINGLE\_POINTER}})\ Pointer\ \mbox{\hyperlink{namespaceeastl_a4e92bbac38652d0b6a6b9882c003fd43}{next}};}
\DoxyCodeLine{00740\ }
\DoxyCodeLine{00741\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00742\ \ \ \ \ \ \ \ \ \ \ \ \ headptr\ =\ \mbox{\hyperlink{ittnotify__static_8h_ad492e8facf9b4113e52f1918fceb8804}{head}};}
\DoxyCodeLine{00743\ \ \ \ \ \ \ \ \ \ \ \ \ tailptr\ =\ \mbox{\hyperlink{ittnotify__static_8h_ae6f0aed6c2af4489760c7c13c49ae904}{tail}};}
\DoxyCodeLine{00744\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceeastl_a4e92bbac38652d0b6a6b9882c003fd43}{next}}\ \ \ \ =\ headptr.getNodeNext();}
\DoxyCodeLine{00745\ }
\DoxyCodeLine{00746\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ittnotify__static_8h_ad492e8facf9b4113e52f1918fceb8804}{head}}\ ==\ headptr)\ \{}
\DoxyCodeLine{00747\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (headptr.getNode()\ ==\ tailptr.getNode())\ \{}
\DoxyCodeLine{00748\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!next)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ empty}}
\DoxyCodeLine{00749\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_m_p_m_cqueues_8hpp_ade570fdc92454d2e464c7ea8f085e0a4}{CAS}}((\textcolor{keyword}{volatile}\ \mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}}\ *)\mbox{\hyperlink{ittnotify__static_8h_ae6f0aed6c2af4489760c7c13c49ae904}{tail}},\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})next,\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})tailptr);}
\DoxyCodeLine{00750\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00751\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}\ =\ \mbox{\hyperlink{namespaceeastl_a4e92bbac38652d0b6a6b9882c003fd43}{next}}.getData();}
\DoxyCodeLine{00752\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cpq__pdes_8cpp_a1d39aac66e12dae50a24cd7a9100ef33}{done}}\ =\ (\mbox{\hyperlink{_m_p_m_cqueues_8hpp_ade570fdc92454d2e464c7ea8f085e0a4}{CAS}}((\textcolor{keyword}{volatile}\ \mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}}\ *)\mbox{\hyperlink{ittnotify__static_8h_ad492e8facf9b4113e52f1918fceb8804}{head}},\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})next,\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})headptr)\ ==\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})headptr);}
\DoxyCodeLine{00753\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00754\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00755\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}(!\mbox{\hyperlink{cpq__pdes_8cpp_a1d39aac66e12dae50a24cd7a9100ef33}{done}});}
\DoxyCodeLine{00756\ }
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ deallocnode(headptr.getNode());}
\DoxyCodeLine{00758\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00759\ \ \ \ \ \}\ }
\DoxyCodeLine{00760\ }
\DoxyCodeLine{00761\ \ \ \ \ \textcolor{comment}{//\ return\ true\ if\ the\ queue\ is\ empty\ }}
\DoxyCodeLine{00762\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacectll_afaf902ffaf3fd6dc870d0f2070795039}{empty}}()\ \{\ }
\DoxyCodeLine{00763\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{ittnotify__static_8h_ad492e8facf9b4113e52f1918fceb8804}{head}}.getNode()\ ==\ \mbox{\hyperlink{ittnotify__static_8h_ae6f0aed6c2af4489760c7c13c49ae904}{tail}}.getNode())\ \&\&\ !(\mbox{\hyperlink{ittnotify__static_8h_ad492e8facf9b4113e52f1918fceb8804}{head}}.getNodeNext()))}
\DoxyCodeLine{00764\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00765\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00766\ \ \ \ \ \}}
\DoxyCodeLine{00767\ \};}
\DoxyCodeLine{00768\ }
\DoxyCodeLine{00769\ }
\DoxyCodeLine{00770\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ experimental\ code\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00771\ }
\DoxyCodeLine{00772\ }
\DoxyCodeLine{00773\ }
\DoxyCodeLine{00774\ \textcolor{keyword}{class\ }multiSWSR\ \{}
\DoxyCodeLine{00775\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00776\ \ \ \ \ \textcolor{keyword}{enum}\ \{DEFAULT\_NUM\_QUEUES=4,\ DEFAULT\_uSPSC\_SIZE=2048\};}
\DoxyCodeLine{00777\ }
\DoxyCodeLine{00778\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00779\ \ \ \ \ multiSWSR()\ \{\}}
\DoxyCodeLine{00780\ \ \ \ \ }
\DoxyCodeLine{00781\ \ \ \ \ \string~multiSWSR()\ \{}
\DoxyCodeLine{00782\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (buf)\ \{}
\DoxyCodeLine{00783\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<(\mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}}+1);++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00784\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (buf[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}])\ \textcolor{keyword}{delete}\ buf[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}];}
\DoxyCodeLine{00785\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00786\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysdep_8h_a8d0b69a707e38b6ee06c8039cce3a9ae}{freeAlignedMemory}}(buf);}
\DoxyCodeLine{00787\ \ \ \ \ \ \ \ \ \ \ \ \ buf\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00788\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00789\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (PLock)\ \mbox{\hyperlink{sysdep_8h_a8d0b69a707e38b6ee06c8039cce3a9ae}{freeAlignedMemory}}(PLock);\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00790\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (CLock)\ \mbox{\hyperlink{sysdep_8h_a8d0b69a707e38b6ee06c8039cce3a9ae}{freeAlignedMemory}}(CLock);}
\DoxyCodeLine{00791\ \ \ \ \ \}}
\DoxyCodeLine{00792\ }
\DoxyCodeLine{00793\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ nqueues=DEFAULT\_NUM\_QUEUES,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}=DEFAULT\_uSPSC\_SIZE)\ \{}
\DoxyCodeLine{00794\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nqueues<2)\ nqueues=2;}
\DoxyCodeLine{00795\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!isPowerOf2(nqueues))\ nqueues\ =\ nextPowerOf2(nqueues);}
\DoxyCodeLine{00796\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}}\ =\ nqueues-\/1;}
\DoxyCodeLine{00797\ }
\DoxyCodeLine{00798\ \ \ \ \ \ \ \ \ buf=(uSWSR\_Ptr\_Buffer**)\mbox{\hyperlink{sysdep_8h_ae77dd87ccd6c736ac3eb1aa624d05269}{getAlignedMemory}}(\mbox{\hyperlink{config_8hpp_af89f60b07247176687889ade776c8e10}{CACHE\_LINE\_SIZE}},nqueues*\textcolor{keyword}{sizeof}(uSWSR\_Ptr\_Buffer*));}
\DoxyCodeLine{00799\ \ \ \ \ \ \ \ \ PLock=(CLHSpinLock*)\mbox{\hyperlink{sysdep_8h_ae77dd87ccd6c736ac3eb1aa624d05269}{getAlignedMemory}}(\mbox{\hyperlink{config_8hpp_af89f60b07247176687889ade776c8e10}{CACHE\_LINE\_SIZE}},nqueues*\textcolor{keyword}{sizeof}(CLHSpinLock));}
\DoxyCodeLine{00800\ \ \ \ \ \ \ \ \ CLock=(CLHSpinLock*)\mbox{\hyperlink{sysdep_8h_ae77dd87ccd6c736ac3eb1aa624d05269}{getAlignedMemory}}(\mbox{\hyperlink{config_8hpp_af89f60b07247176687889ade776c8e10}{CACHE\_LINE\_SIZE}},nqueues*\textcolor{keyword}{sizeof}(CLHSpinLock));}
\DoxyCodeLine{00801\ }
\DoxyCodeLine{00802\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<nqueues;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00803\ \ \ \ \ \ \ \ \ \ \ \ \ buf[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]=\ \textcolor{keyword}{new}\ uSWSR\_Ptr\_Buffer(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00804\ \ \ \ \ \ \ \ \ \ \ \ \ buf[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>init();}
\DoxyCodeLine{00805\ \ \ \ \ \ \ \ \ \ \ \ \ PLock[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].init();}
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ \ \ \ \ CLock[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].init();}
\DoxyCodeLine{00807\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00808\ \ \ \ \ \ \ \ \ atomic\_long\_set(\&\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a78e23769680a273f948d4bd3e946fcae}{count}},\ 0);}
\DoxyCodeLine{00809\ \ \ \ \ \ \ \ \ atomic\_long\_set(\&enqueue,0);}
\DoxyCodeLine{00810\ \ \ \ \ \ \ \ \ atomic\_long\_set(\&dequeue,0);}
\DoxyCodeLine{00811\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00812\ \ \ \ \ \}}
\DoxyCodeLine{00813\ }
\DoxyCodeLine{00814\ \ \ \ \ \textcolor{comment}{//\ it\ always\ returns\ true}}
\DoxyCodeLine{00815\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{test__concurrent__queue_8cpp_a262227aa72b9cc1db7b9a80d7f295211}{push}}(\textcolor{keywordtype}{void}\ *\textcolor{keyword}{const}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}},\ \textcolor{keywordtype}{int}\ tid)\ \{}
\DoxyCodeLine{00816\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}\ =\ atomic\_long\_inc\_return(\&enqueue)\ \&\ \mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}};}
\DoxyCodeLine{00817\ \ \ \ \ \ \ \ \ PLock[\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}].spin\_lock(tid);}
\DoxyCodeLine{00818\ \ \ \ \ \ \ \ \ buf[\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}]-\/>push(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}});}
\DoxyCodeLine{00819\ \ \ \ \ \ \ \ \ PLock[\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}].spin\_unlock(tid);}
\DoxyCodeLine{00820\ \ \ \ \ \ \ \ \ atomic\_long\_inc(\&\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a78e23769680a273f948d4bd3e946fcae}{count}});}
\DoxyCodeLine{00821\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00822\ \ \ \ \ \}}
\DoxyCodeLine{00823\ \ \ \ \ }
\DoxyCodeLine{00824\ \ \ \ \ \textcolor{comment}{//\ non-\/blocking\ pop}}
\DoxyCodeLine{00825\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesource__runtime_1_1vector_a9e32bbc347aee976ae2e2853e4ba98af}{pop}}(\textcolor{keywordtype}{void}\ **\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}},\ \textcolor{keywordtype}{int}\ tid)\ \{}
\DoxyCodeLine{00826\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!atomic\_long\_read(\&\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a78e23769680a273f948d4bd3e946fcae}{count}}))\ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ empty}}
\DoxyCodeLine{00827\ }
\DoxyCodeLine{00828\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}\ =\ atomic\_long\_inc\_return(\&dequeue)\ \&\ \mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}};}
\DoxyCodeLine{00829\ \ \ \ \ \ \ \ \ CLock[\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}].spin\_lock(tid);}
\DoxyCodeLine{00830\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ buf[\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}]-\/>pop(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}});}
\DoxyCodeLine{00831\ \ \ \ \ \ \ \ \ CLock[\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}].spin\_unlock(tid);}
\DoxyCodeLine{00832\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}})\ \{\ atomic\_long\_dec(\&\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a78e23769680a273f948d4bd3e946fcae}{count}});\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\}}
\DoxyCodeLine{00833\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00834\ \ \ \ \ \}}
\DoxyCodeLine{00835\ }
\DoxyCodeLine{00836\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00837\ \ \ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00838\ \ \ \ \ \ \ \ \ atomic\_long\_t\ \ enqueue;}
\DoxyCodeLine{00839\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ \ \ \ \ \ \ \ \ \ \ padding1[\mbox{\hyperlink{config_8hpp_af89f60b07247176687889ade776c8e10}{CACHE\_LINE\_SIZE}}];}
\DoxyCodeLine{00840\ \ \ \ \ \};}
\DoxyCodeLine{00841\ \ \ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00842\ \ \ \ \ \ \ \ \ atomic\_long\_t\ \ dequeue;}
\DoxyCodeLine{00843\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ \ \ \ \ \ \ \ \ \ \ padding2[\mbox{\hyperlink{config_8hpp_af89f60b07247176687889ade776c8e10}{CACHE\_LINE\_SIZE}}];}
\DoxyCodeLine{00844\ \ \ \ \ \};}
\DoxyCodeLine{00845\ \ \ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00846\ \ \ \ \ \ \ \ \ atomic\_long\_t\ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a78e23769680a273f948d4bd3e946fcae}{count}};}
\DoxyCodeLine{00847\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ \ \ \ \ \ \ \ \ \ \ padding3[\mbox{\hyperlink{config_8hpp_af89f60b07247176687889ade776c8e10}{CACHE\_LINE\_SIZE}}];}
\DoxyCodeLine{00848\ \ \ \ \ \};}
\DoxyCodeLine{00849\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00850\ \ \ \ \ uSWSR\_Ptr\_Buffer\ **buf;}
\DoxyCodeLine{00851\ \ \ \ \ CLHSpinLock\ *PLock;\ \ \ \ }
\DoxyCodeLine{00852\ \ \ \ \ CLHSpinLock\ *CLock;\ \ \ \ }
\DoxyCodeLine{00853\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \ \ \mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}};}
\DoxyCodeLine{00854\ \};}
\DoxyCodeLine{00855\ }
\DoxyCodeLine{00856\ }
\DoxyCodeLine{00857\ \textcolor{comment}{/*}}
\DoxyCodeLine{00858\ \textcolor{comment}{\ *\ Simple\ and\ scalable\ Multi-\/Producer/Multi-\/Consumer\ queue.}}
\DoxyCodeLine{00859\ \textcolor{comment}{\ *\ By\ defining\ at\ compile\ time\ MULTI\_MPMC\_RELAX\_FIFO\_ORDERING\ it\ is\ possible\ }}
\DoxyCodeLine{00860\ \textcolor{comment}{\ *\ to\ improve\ performance\ relaxing\ FIFO\ ordering\ in\ the\ pop\ method.}}
\DoxyCodeLine{00861\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00862\ \textcolor{comment}{\ *\ The\ underling\ MPMC\ queue\ (the\ Q\ template\ parameter)\ should\ export\ at\ least\ }}
\DoxyCodeLine{00863\ \textcolor{comment}{\ *\ the\ following\ methods:}}
\DoxyCodeLine{00864\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00865\ \textcolor{comment}{\ *\ \ \ bool\ push(T)}}
\DoxyCodeLine{00866\ \textcolor{comment}{\ *\ \ \ bool\ pop(T\&)}}
\DoxyCodeLine{00867\ \textcolor{comment}{\ *\ \ \ bool\ empty()\ }}
\DoxyCodeLine{00868\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00869\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00870\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00871\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Q>}
\DoxyCodeLine{00872\ \textcolor{keyword}{class\ }scalableMPMCqueue\ \{}
\DoxyCodeLine{00873\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00874\ \ \ \ \ \textcolor{keyword}{enum}\ \{DEFAULT\_POOL\_SIZE=4\};}
\DoxyCodeLine{00875\ }
\DoxyCodeLine{00876\ \ \ \ \ scalableMPMCqueue()\ \{}
\DoxyCodeLine{00877\ \ \ \ \ \ \ \ \ \textcolor{comment}{//enqueue.store(0);}}
\DoxyCodeLine{00878\ \ \ \ \ \ \ \ \ \textcolor{comment}{//count.store(0);}}
\DoxyCodeLine{00879\ \ \ \ \ \ \ \ \ atomic\_long\_set(\&enqueue,0);}
\DoxyCodeLine{00880\ \ \ \ \ \ \ \ \ atomic\_long\_set(\&\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a78e23769680a273f948d4bd3e946fcae}{count}},0);}
\DoxyCodeLine{00881\ }
\DoxyCodeLine{00882\ \textcolor{preprocessor}{\#if\ !defined(MULTI\_MPMC\_RELAX\_FIFO\_ORDERING)}}
\DoxyCodeLine{00883\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ NOTE:\ dequeue\ must\ start\ from\ 1\ because\ enqueue\ is\ incremented}}
\DoxyCodeLine{00884\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ using\ atomic\_long\_inc\_return\ which\ first\ increments\ and\ than}}
\DoxyCodeLine{00885\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ return\ the\ value.}}
\DoxyCodeLine{00886\ \ \ \ \ \ \ \ \ \textcolor{comment}{//dequeue.store(1);}}
\DoxyCodeLine{00887\ \ \ \ \ \ \ \ \ atomic\_long\_set(\&dequeue,1);}
\DoxyCodeLine{00888\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00889\ \ \ \ \ \ \ \ \ \textcolor{comment}{//dequeue.store(0);}}
\DoxyCodeLine{00890\ \ \ \ \ \ \ \ \  atomic\_long\_set(\&dequeue,0);}
\DoxyCodeLine{00891\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00892\ \ \ \ \ \}}
\DoxyCodeLine{00893\ \ \ \ \ }
\DoxyCodeLine{00894\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init}}(\textcolor{keywordtype}{size\_t}\ poolsize\ =\ DEFAULT\_POOL\_SIZE)\ \{}
\DoxyCodeLine{00895\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (poolsize\ >\ pool.size())\ \{}
\DoxyCodeLine{00896\ \ \ \ \ \ \ \ \ \ \ \ \ pool.resize(poolsize);}
\DoxyCodeLine{00897\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00898\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00899\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ WARNING:\ depending\ on\ Q,\ pool\ elements\ may\ need\ to\ be\ initialized\ \ }}
\DoxyCodeLine{00900\ }
\DoxyCodeLine{00901\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00902\ \ \ \ \ \}}
\DoxyCodeLine{00903\ }
\DoxyCodeLine{00904\ \ \ \ \ \textcolor{comment}{//\ insert\ method,\ it\ never\ fails\ if\ data\ is\ not\ NULL}}
\DoxyCodeLine{00905\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{test__concurrent__queue_8cpp_a262227aa72b9cc1db7b9a80d7f295211}{push}}(\textcolor{keywordtype}{void}\ *\ \textcolor{keyword}{const}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}})\ \{}
\DoxyCodeLine{00906\ \ \ \ \ \ \ \ \ \textcolor{comment}{//long\ q\ =\ (1\ +\ enqueue.fetch\_add(1))\ \%\ pool.size();}}
\DoxyCodeLine{00907\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}\ =\ atomic\_long\_inc\_return(\&enqueue)\ \%\ pool.size();}
\DoxyCodeLine{00908\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ pool[\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}].push(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}});}
\DoxyCodeLine{00909\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}})\ atomic\_long\_inc(\&\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a78e23769680a273f948d4bd3e946fcae}{count}});}
\DoxyCodeLine{00910\ \ \ \ \ \ \ \ \ \textcolor{comment}{//if\ (r)\ count.fetch\_add(1);}}
\DoxyCodeLine{00911\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}};}
\DoxyCodeLine{00912\ \ \ \ \ \}}
\DoxyCodeLine{00913\ }
\DoxyCodeLine{00914\ \ \ \ \ \textcolor{comment}{//\ extract\ method,\ it\ returns\ false\ if\ the\ queue\ is\ empty}}
\DoxyCodeLine{00915\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \ \mbox{\hyperlink{namespacesource__runtime_1_1vector_a9e32bbc347aee976ae2e2853e4ba98af}{pop}}(\textcolor{keywordtype}{void}\ **\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}})\ \{\ \ \ \ \ \ }
\DoxyCodeLine{00916\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!atomic\_long\_read(\&\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a78e23769680a273f948d4bd3e946fcae}{count}}))\ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ empty}}
\DoxyCodeLine{00917\ \ \ \ \ \ \ \ \ \textcolor{comment}{//if\ (!count.load())\ return\ false;}}
\DoxyCodeLine{00918\ \textcolor{preprocessor}{\#if\ !defined(MULTI\_MPMC\_RELAX\_FIFO\_ORDERING)}}
\DoxyCodeLine{00919\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ bk\ =\ \mbox{\hyperlink{config_8hpp_a9bddd4414e8e1ba6f976e0bf0a73a735}{BACKOFF\_MIN}};}
\DoxyCodeLine{00920\ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00921\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ enforce\ FIFO\ ordering\ for\ the\ consumers}}
\DoxyCodeLine{00922\ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00923\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}},\ q1;}
\DoxyCodeLine{00924\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00925\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}\ \ =\ atomic\_long\_read(\&dequeue),\ q1\ =\ atomic\_long\_read(\&enqueue);}
\DoxyCodeLine{00926\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//q\ =\ dequeue.load();\ q1\ =\ enqueue.load();}}
\DoxyCodeLine{00927\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}\ >\ q1)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00928\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_m_p_m_cqueues_8hpp_ade570fdc92454d2e464c7ea8f085e0a4}{CAS}}((\textcolor{keyword}{volatile}\ \mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}}\ *)\&dequeue,\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})(\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}+1),\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}})\ ==\ (\mbox{\hyperlink{liblfds_8h_af875ae6320e02dae433b6164b294d70a}{atom\_t}})\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}})\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00929\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//if(dequeue.compare\_exchange\_strong(<\#long\ \&\_\_e\#>,\ <\#long\ \_\_d\#>)}}
\DoxyCodeLine{00930\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ exponential\ delay\ with\ max\ value}}
\DoxyCodeLine{00931\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{volatile}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<bk;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ ;}
\DoxyCodeLine{00932\ \ \ \ \ \ \ \ \ \ \ \ \ bk\ <<=\ 1;}
\DoxyCodeLine{00933\ \ \ \ \ \ \ \ \ \ \ \ \ bk\ \&=\ \mbox{\hyperlink{config_8hpp_a4ca969a7becb2a5ede5e27866780b29d}{BACKOFF\_MAX}};}
\DoxyCodeLine{00934\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}(1);}
\DoxyCodeLine{00935\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00936\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}\ \%=\ pool.size();\ }
\DoxyCodeLine{00937\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pool[\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}].\mbox{\hyperlink{namespacesource__runtime_1_1vector_a9e32bbc347aee976ae2e2853e4ba98af}{pop}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}))\ \{}
\DoxyCodeLine{00938\ \ \ \ \ \ \ \ \ \ \ \ \ atomic\_long\_dec(\&\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a78e23769680a273f948d4bd3e946fcae}{count}});}
\DoxyCodeLine{00939\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//count.fetch\_sub(1);}}
\DoxyCodeLine{00940\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00941\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00942\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00943\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00944\ \textcolor{preprocessor}{\#else\ \ }\textcolor{comment}{//\ MULTI\_MPMC\_RELAX\_FIFO\_ORDERING}}
\DoxyCodeLine{00945\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}\ =\ atomic\_long\_inc\_return(\&dequeue)\ \%\ pool.size();}
\DoxyCodeLine{00946\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ pool[\mbox{\hyperlink{som__graph_8cpp_ae900b2add8deca663438fb20de69acce}{q}}].pop(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}});}
\DoxyCodeLine{00947\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}})\ \{\ atomic\_long\_dec(\&\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a78e23769680a273f948d4bd3e946fcae}{count}});\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\}}
\DoxyCodeLine{00948\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00949\ \textcolor{preprocessor}{\#endif\ \ \ \ \ \ \ \ }}
\DoxyCodeLine{00950\ \ \ \ \ \}}
\DoxyCodeLine{00951\ \ \ \ \ }
\DoxyCodeLine{00952\ \ \ \ \ \textcolor{comment}{//\ check\ if\ the\ queue\ is\ empty}}
\DoxyCodeLine{00953\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacectll_afaf902ffaf3fd6dc870d0f2070795039}{empty}}()\ \{}
\DoxyCodeLine{00954\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<pool.size();++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})}
\DoxyCodeLine{00955\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!pool[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].\mbox{\hyperlink{namespacectll_afaf902ffaf3fd6dc870d0f2070795039}{empty}}())\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00956\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00957\ \ \ \ \ \}}
\DoxyCodeLine{00958\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00959\ \ \ \ \ \textcolor{comment}{//\ std::atomic<long>\ enqueue;}}
\DoxyCodeLine{00960\ \ \ \ \ atomic\_long\_t\ enqueue;}
\DoxyCodeLine{00961\ \ \ \ \ \textcolor{keywordtype}{long}\ padding1[longxCacheLine-\/\textcolor{keyword}{sizeof}(atomic\_long\_t)];}
\DoxyCodeLine{00962\ \ \ \ \ \textcolor{comment}{//std::atomic<long>\ dequeue;}}
\DoxyCodeLine{00963\ \ \ \ \ atomic\_long\_t\ dequeue;}
\DoxyCodeLine{00964\ \ \ \ \ \textcolor{keywordtype}{long}\ padding2[longxCacheLine-\/\textcolor{keyword}{sizeof}(atomic\_long\_t)];}
\DoxyCodeLine{00965\ \ \ \ \ \textcolor{comment}{//std::atomic<long>\ count;}}
\DoxyCodeLine{00966\ \ \ \ \ atomic\_long\_t\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a78e23769680a273f948d4bd3e946fcae}{count}};}
\DoxyCodeLine{00967\ \ \ \ \ \textcolor{keywordtype}{long}\ padding3[longxCacheLine-\/\textcolor{keyword}{sizeof}(atomic\_long\_t)];}
\DoxyCodeLine{00968\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00969\ \ \ \ \ std::vector<Q>\ pool;}
\DoxyCodeLine{00970\ \};}
\DoxyCodeLine{00971\ }
\DoxyCodeLine{00972\ \textcolor{comment}{/*\ }}
\DoxyCodeLine{00973\ \textcolor{comment}{\ *\ multiMSqueue\ is\ a\ specialization\ of\ the\ scalableMPMCqueue\ which\ uses\ the\ MSqueue\ }}
\DoxyCodeLine{00974\ \textcolor{comment}{*/}}
\DoxyCodeLine{00975\ \ \ \ \ \textcolor{keyword}{class\ }multiMSqueue:\ \textcolor{keyword}{public}\ scalableMPMCqueue<MSqueue>\ \{}
\DoxyCodeLine{00976\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00977\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00978\ \ \ \ \ \ \ \ \ multiMSqueue(\textcolor{keywordtype}{size\_t}\ poolsize\ =\ scalableMPMCqueue<MSqueue>::DEFAULT\_POOL\_SIZE)\ \{}
\DoxyCodeLine{00979\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\ scalableMPMCqueue<MSqueue>::init(poolsize))\ \{}
\DoxyCodeLine{00980\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacespdlog_ae1d3e9e381047283ac67046df1b6e13c}{error}}(\textcolor{stringliteral}{"{}multiMSqueue\ init\ ERROR\(\backslash\)n"{}});}
\DoxyCodeLine{00981\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedetail_a619f3502677571222147bfadcc64392ea5bb94a1c12413a2e5d14deabab29f2aa}{abort}}();}
\DoxyCodeLine{00982\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00983\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00984\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<poolsize;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})}
\DoxyCodeLine{00985\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pool[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].\mbox{\hyperlink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init}}()<0)\ \{}
\DoxyCodeLine{00986\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacespdlog_ae1d3e9e381047283ac67046df1b6e13c}{error}}(\textcolor{stringliteral}{"{}multiMSqueue\ init\ ERROR\(\backslash\)n"{}});}
\DoxyCodeLine{00987\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedetail_a619f3502677571222147bfadcc64392ea5bb94a1c12413a2e5d14deabab29f2aa}{abort}}();}
\DoxyCodeLine{00988\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00989\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00990\ \ \ \ \ \};}
\DoxyCodeLine{00991\ }
\DoxyCodeLine{00992\ }
\DoxyCodeLine{00993\ }
\DoxyCodeLine{00994\ }
\DoxyCodeLine{00995\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ USE\_STD\_C0X}}
\DoxyCodeLine{00996\ }
\DoxyCodeLine{00997\ }
\DoxyCodeLine{00998\ }
\DoxyCodeLine{00999\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ MaX\ experimental\ code\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{01000\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{01001\ \textcolor{comment}{/*}}
\DoxyCodeLine{01002\ \textcolor{comment}{\ *}}
\DoxyCodeLine{01003\ \textcolor{comment}{\ *\ \ \ bool\ push(T)}}
\DoxyCodeLine{01004\ \textcolor{comment}{\ *\ \ \ bool\ pop(T\&)}}
\DoxyCodeLine{01005\ \textcolor{comment}{\ *\ \ \ bool\ empty()\ }}
\DoxyCodeLine{01006\ \textcolor{comment}{\ *}}
\DoxyCodeLine{01007\ \textcolor{comment}{\ *}}
\DoxyCodeLine{01008\ \textcolor{comment}{\ */}}
\DoxyCodeLine{01009\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}\{}
\DoxyCodeLine{01010\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}};}
\DoxyCodeLine{01011\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{namespaceeastl_a4e92bbac38652d0b6a6b9882c003fd43}{next}};\ \ \ \ \ \ \ \ }
\DoxyCodeLine{01012\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ padding1[64-\/2*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned}\ long)];}
\DoxyCodeLine{01013\ \ \ \ \ \}utMPMC\_list\_node\_t;}
\DoxyCodeLine{01014\ }
\DoxyCodeLine{01015\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}\{}
\DoxyCodeLine{01016\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*HEAD*/}}
\DoxyCodeLine{01017\ \ \ \ \ \ \ \ \ utMPMC\_list\_node\_t*\ \mbox{\hyperlink{ittnotify__static_8h_ad492e8facf9b4113e52f1918fceb8804}{head}};}
\DoxyCodeLine{01018\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ padding0[64-\/\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned}\ long)];}
\DoxyCodeLine{01019\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*TAIL*/}}
\DoxyCodeLine{01020\ \ \ \ \ \ \ \ \ utMPMC\_list\_node\_t*\ \mbox{\hyperlink{ittnotify__static_8h_ae6f0aed6c2af4489760c7c13c49ae904}{tail}};\ \ \ \ \ \ \ \ }
\DoxyCodeLine{01021\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ padding1[64-\/\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned}\ long)];}
\DoxyCodeLine{01022\ \ \ \ \ \}utMPMC\_list\_info\_t;}
\DoxyCodeLine{01023\ }
\DoxyCodeLine{01024\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}\{}
\DoxyCodeLine{01025\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*address*/}}
\DoxyCodeLine{01026\ \ \ \ \ \ \ \ \ utMPMC\_list\_info\_t\ l;\ }
\DoxyCodeLine{01027\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*status*/}}
\DoxyCodeLine{01028\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}};\ \ \ \ \ \ \ }
\DoxyCodeLine{01029\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ padding0[64-\/\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned}\ long)];\ }
\DoxyCodeLine{01030\ \ \ \ \ \}utMPMC\_VB\_note\_t;}
\DoxyCodeLine{01031\ }
\DoxyCodeLine{01032\ \textcolor{preprocessor}{\#if\ !defined(NEXT\_SMALLEST\_2\_POW)}}
\DoxyCodeLine{01033\ \textcolor{preprocessor}{\#define\ NEXT\_SMALLEST\_2\_POW(A)\ (1\ <<\ (32\ -\/\ \_\_builtin\_clz((A)-\/1)))}}
\DoxyCodeLine{01034\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01035\ }
\DoxyCodeLine{01036\ \textcolor{preprocessor}{\#if\ !defined(VOLATILE\_READ)}}
\DoxyCodeLine{01037\ \textcolor{preprocessor}{\#define\ VOLATILE\_READ(X)\ \ (*(volatile\ typeof(X)*)\&X)}}
\DoxyCodeLine{01038\ }
\DoxyCodeLine{01039\ \textcolor{preprocessor}{\#if\ !defined(OPTIMIZED\_MOD\_ON\_2\_POW)}}
\DoxyCodeLine{01040\ \textcolor{preprocessor}{\#define\ OPTIMIZED\_MOD\_ON\_2\_POW(X,Y)\ ((X)\ \&\ (Y))}}
\DoxyCodeLine{01041\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01042\ }
\DoxyCodeLine{01043\ \textcolor{preprocessor}{\#define\ IS\_WRITABLE(STATUS,MYEQC)\ (STATUS==MYEQC)}}
\DoxyCodeLine{01044\ \textcolor{preprocessor}{\#define\ WRITABLE\_STATUS(STATUS,MYEQC)\ (MYEQC)}}
\DoxyCodeLine{01045\ \textcolor{preprocessor}{\#define\ UPDATE\_AFTER\_WRITE(STATUS)\ (STATUS+1)}}
\DoxyCodeLine{01046\ }
\DoxyCodeLine{01047\ \textcolor{preprocessor}{\#define\ IS\_READABLE(STATUS,MYDQC)\ (STATUS==MYDQC+1)}}
\DoxyCodeLine{01048\ \textcolor{preprocessor}{\#define\ READABLE\_STATUS(STATUS,MYDQC)\ (MYDQC+1)}}
\DoxyCodeLine{01049\ \textcolor{preprocessor}{\#define\ UPDATE\_AFTER\_READ(STATUS,LEN)\ (STATUS+LEN-\/1)}}
\DoxyCodeLine{01050\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01051\ }
\DoxyCodeLine{01052\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Q>}
\DoxyCodeLine{01053\ \ \ \ \ \textcolor{keyword}{class\ }utMPMC\_VB\ \{}
\DoxyCodeLine{01054\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01055\ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum}\ \{DEFAULT\_POOL\_SIZE=4\};}
\DoxyCodeLine{01056\ }
\DoxyCodeLine{01057\ \ \ \ \ \ \ \ \ utMPMC\_VB()\ \{}
\DoxyCodeLine{01058\ \ \ \ \ \ \ \ \ \ \ \ \ dqc\ =0;}
\DoxyCodeLine{01059\ \ \ \ \ \ \ \ \ \ \ \ \ eqc\ =\ 0;}
\DoxyCodeLine{01060\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{01061\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ Both\ push\ and\ pop\ start\ from\ index\ 0}}
\DoxyCodeLine{01062\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{01063\ \ \ \ \ \ \ \ \ \ \ \ \ dqc\ =\ 0;}
\DoxyCodeLine{01064\ \ \ \ \ \ \ \ \ \ \ \ \ eqc\ =\ 0;}
\DoxyCodeLine{01065\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01066\ \ \ \ \ }
\DoxyCodeLine{01067\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init}}(\textcolor{keywordtype}{size\_t}\ vector\_len)\ \{}
\DoxyCodeLine{01068\ \ \ \ }
\DoxyCodeLine{01069\ \ \ \ \ \ \ \ \ \ \ \ \ len\_v\ =\ NEXT\_SMALLEST\_2\_POW(vector\_len);}
\DoxyCodeLine{01070\ \ \ \ \ \ \ \ \ \ \ \ \ len\_v\_minus\_one\ =\ len\_v-\/1;}
\DoxyCodeLine{01071\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{01072\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ Allocation\ and\ Init\ of\ the\ Vector}}
\DoxyCodeLine{01073\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{01074\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{cpq__pdes_8cpp_a1d39aac66e12dae50a24cd7a9100ef33}{done}}\ =\ \mbox{\hyperlink{mimalloc-override_8h_a6f0607529685a15c0a189aafc7d4a496}{posix\_memalign}}((\textcolor{keywordtype}{void}\ **)\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}},\ longxCacheLine,}
\DoxyCodeLine{01075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(utMPMC\_VB\_note\_t)\ *\ len\_v);}
\DoxyCodeLine{01076\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{cpq__pdes_8cpp_a1d39aac66e12dae50a24cd7a9100ef33}{done}}\ !=\ 0)\ \{}
\DoxyCodeLine{01077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{01078\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01079\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;}
\DoxyCodeLine{01080\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ len\_v;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++)\ \{}
\DoxyCodeLine{01081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].s\ =\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};}
\DoxyCodeLine{01082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ utMPMC\_list\_node\_t\ *\ new\_node;}
\DoxyCodeLine{01083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\{new\_node\ =\ (utMPMC\_list\_node\_t\ *)}
\DoxyCodeLine{01084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mimalloc-override_8h_a99aa8fd9f4831e1b0fa9e1cdcde3e249}{malloc}}\ (\textcolor{keyword}{sizeof}(utMPMC\_list\_node\_t));\}\textcolor{keywordflow}{while}(new\_node);}
\DoxyCodeLine{01085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ new\_node-\/>data=\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{01086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ new\_node-\/>next=\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{01087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].l.tail=new\_node;}
\DoxyCodeLine{01088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].l.head=new\_node;}
\DoxyCodeLine{01089\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01090\ }
\DoxyCodeLine{01091\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{01092\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01093\ }
\DoxyCodeLine{01094\ \ \ \ \ \textcolor{comment}{//\ insert\ method,\ it\ never\ fails!!}}
\DoxyCodeLine{01095\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{test__concurrent__queue_8cpp_a262227aa72b9cc1db7b9a80d7f295211}{push}}(\textcolor{keywordtype}{void}\ *\ \textcolor{keyword}{const}\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})\ \{}
\DoxyCodeLine{01096\ \ \ \ \ \ \ \ \ utMPMC\_list\_node\_t\ *\ new\_node;}
\DoxyCodeLine{01097\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\{new\_node\ =\ (utMPMC\_list\_node\_t\ *)\ }
\DoxyCodeLine{01098\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mimalloc-override_8h_a99aa8fd9f4831e1b0fa9e1cdcde3e249}{malloc}}\ (\textcolor{keyword}{sizeof}(utMPMC\_list\_node\_t));\}\textcolor{keywordflow}{while}(new\_node);}
\DoxyCodeLine{01099\ \ \ \ \ \ \ \ \ new\_node-\/>data=\ (\textcolor{keywordtype}{unsigned}\ long)\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{01100\ \ \ \ \ \ \ \ \ new\_node-\/>next=\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{01101\ }
\DoxyCodeLine{01102\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ myEQC\ =\ \_\_sync\_fetch\_and\_add\ (\&eqc,\ 1UL);;}
\DoxyCodeLine{01103\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ myI\ =\ OPTIMIZED\_MOD\_ON\_2\_POW(myEQC,\ len\_v\_minus\_one);}
\DoxyCodeLine{01104\ }
\DoxyCodeLine{01105\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ target\_status\ =\ WRITABLE\_STATUS(target\_status,\ myEQC);}
\DoxyCodeLine{01106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\{\}\textcolor{keywordflow}{while}(VOLATILE\_READ(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}[myI].\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}})\ !=\ target\_status);}
\DoxyCodeLine{01107\ }
\DoxyCodeLine{01108\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ List\ Stuff\ TODO*/}}
\DoxyCodeLine{01109\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}[myI].l.tail-\/>next\ =\ new\_node;}
\DoxyCodeLine{01110\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}[myI].l.tail\ =\ new\_node;}
\DoxyCodeLine{01111\ \ \ \ \ \ \ \ \ target\_status\ =\ UPDATE\_AFTER\_WRITE(target\_status);}
\DoxyCodeLine{01112\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*barrier*/}}
\DoxyCodeLine{01113\ \ \ \ \ \ \ \ \ \_\_sync\_synchronize();}
\DoxyCodeLine{01114\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}[myI].s\ =\ target\_status;}
\DoxyCodeLine{01115\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01116\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01117\ \ \ \ \ \}}
\DoxyCodeLine{01118\ }
\DoxyCodeLine{01119\ \ \ \ \ \textcolor{comment}{//\ extract\ method,\ it\ returns\ false\ if\ the\ queue\ is\ empty}}
\DoxyCodeLine{01120\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \ \mbox{\hyperlink{namespacesource__runtime_1_1vector_a9e32bbc347aee976ae2e2853e4ba98af}{pop}}(\textcolor{keywordtype}{void}\ **\ ret\_val)\ \{\ \ \ \ \ \ }
\DoxyCodeLine{01121\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{01122\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ myDQC\ =\ VOLATILE\_READ(dqc);}
\DoxyCodeLine{01123\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ myI\ =\ OPTIMIZED\_MOD\_ON\_2\_POW(myDQC,\ len\_v\_minus\_one);}
\DoxyCodeLine{01124\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ target\_status\ =\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}[myI].s;}
\DoxyCodeLine{01125\ }
\DoxyCodeLine{01126\ }
\DoxyCodeLine{01127\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (IS\_READABLE(target\_status,myDQC)\ \&\&\ (\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}[myI].l.tail!=\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}[myI].l.head))\ \{}
\DoxyCodeLine{01128\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ atomic\_result\ =\ \_\_sync\_bool\_compare\_and\_swap(\&dqc,\ myDQC,}
\DoxyCodeLine{01129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ myDQC\ +\ 1);}
\DoxyCodeLine{01130\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (atomic\_result)\ \{}
\DoxyCodeLine{01131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{01132\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ that\ is\ my\ lucky\ day!!\ I've\ fished\ something...}}
\DoxyCodeLine{01133\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{01134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ utMPMC\_list\_node\_t*\ to\_be\_remoed\ =\ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}[myI].l.head;}
\DoxyCodeLine{01135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ First\ Advance\ */}}
\DoxyCodeLine{01136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}[myI].l.head\ =\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}[myI].l.head-\/>next;}
\DoxyCodeLine{01137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Secondly\ Extract\ elem\ */}}
\DoxyCodeLine{01138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *ret\_val\ =\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}[myI].l.head-\/>data;}
\DoxyCodeLine{01139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ update\ the\ rest\ */}}
\DoxyCodeLine{01140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ target\_status\ =\ UPDATE\_AFTER\_READ(target\_status,len\_v);}
\DoxyCodeLine{01141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_sync\_synchronize();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}[myI].s\ =\ target\_status;}
\DoxyCodeLine{01143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mimalloc-override_8h_a9d4b5df3530d1bc733070a4669ba6ebc}{free}}(to\_be\_remoed);}
\DoxyCodeLine{01144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01145\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01147\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01148\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01149\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{01150\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ Check\ if\ someone\ changed\ the\ card\ while\ I\ was\ playing}}
\DoxyCodeLine{01151\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{01152\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (myDQC\ !=\ VOLATILE\_READ(dqc))\ \{}
\DoxyCodeLine{01153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01154\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01155\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (VOLATILE\_READ(eqc)\ !=\ VOLATILE\_READ(dqc))\ \{}
\DoxyCodeLine{01156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01157\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01158\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{01159\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ Sorry..\ no\ space\ for\ you...}}
\DoxyCodeLine{01160\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{01161\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01162\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01163\ \ \ \ \ \}}
\DoxyCodeLine{01164\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{01165\ \textcolor{comment}{\ \ \ \ \ *\ Impossible\ to\ reach\ this\ point!!!}}
\DoxyCodeLine{01166\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{01167\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01168\ \ \ \ \ \}}
\DoxyCodeLine{01169\ \ \ \ \ }
\DoxyCodeLine{01170\ \textcolor{comment}{//\ \ \ \ \ inline\ bool\ empty()\ \{}}
\DoxyCodeLine{01171\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ for(size\_t\ i=0;i<pool.size();++i)}}
\DoxyCodeLine{01172\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ if\ (!pool[i].empty())\ return\ false;}}
\DoxyCodeLine{01173\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ return\ true;}}
\DoxyCodeLine{01174\ \textcolor{comment}{//\ \ \ \ \ \}}}
\DoxyCodeLine{01175\ \textcolor{keyword}{private}:}
\DoxyCodeLine{01176\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ padding0[64\ -\/\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned}\ long)];}
\DoxyCodeLine{01177\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ eqc;}
\DoxyCodeLine{01178\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ padding1[64\ -\/\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned}\ long)];}
\DoxyCodeLine{01179\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ dqc;}
\DoxyCodeLine{01180\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ padding2[64\ -\/\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned}\ long)];}
\DoxyCodeLine{01181\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ len\_v;}
\DoxyCodeLine{01182\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ len\_v\_minus\_one;}
\DoxyCodeLine{01183\ \ \ \ \ \ \ \ \ utMPMC\_VB\_note\_t\ *\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}};\ \ \ \ }
\DoxyCodeLine{01184\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ padding3[64\ -\/\ 3*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned}\ long)];}
\DoxyCodeLine{01185\ \ \ \ \ \};}
\DoxyCodeLine{01186\ }
\DoxyCodeLine{01187\ \textcolor{comment}{//\ /*\ }}
\DoxyCodeLine{01188\ \textcolor{comment}{//\ \ *\ multiMSqueue\ is\ a\ specialization\ of\ the\ scalableMPMCqueue\ which\ uses\ the\ MSqueue\ }}
\DoxyCodeLine{01189\ \textcolor{comment}{//\ */}}
\DoxyCodeLine{01190\ \textcolor{comment}{//\ class\ multiMSqueue:\ public\ scalableMPMCqueue<MSqueue>\ \{}}
\DoxyCodeLine{01191\ \textcolor{comment}{//\ public:}}
\DoxyCodeLine{01192\ }
\DoxyCodeLine{01193\ \textcolor{comment}{//\ \ \ \ \ multiMSqueue(size\_t\ poolsize\ =\ scalableMPMCqueue<MSqueue>::DEFAULT\_POOL\_SIZE)\ \{}}
\DoxyCodeLine{01194\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ if\ (!\ scalableMPMCqueue<MSqueue>::init(poolsize))\ \{}}
\DoxyCodeLine{01195\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ "{}multiMSqueue\ init\ ERROR,\ abort....\(\backslash\)n"{};}}
\DoxyCodeLine{01196\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ abort();}}
\DoxyCodeLine{01197\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{01198\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01199\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ for(size\_t\ i=0;i<poolsize;++i)}}
\DoxyCodeLine{01200\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ if\ (pool[i].init()<0)\ \{}}
\DoxyCodeLine{01201\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ "{}ERROR\ initializing\ MSqueue,\ abort....\(\backslash\)n"{};}}
\DoxyCodeLine{01202\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ abort();}}
\DoxyCodeLine{01203\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{01204\ \textcolor{comment}{//\ \ \ \ \ \}}}
\DoxyCodeLine{01205\ \textcolor{comment}{//\ \};}}
\DoxyCodeLine{01206\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01207\ }
\DoxyCodeLine{01208\ \}\ \textcolor{comment}{//\ namespace}}
\DoxyCodeLine{01209\ }
\DoxyCodeLine{01210\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ FF\_MPMCQUEUE\_HPP\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
