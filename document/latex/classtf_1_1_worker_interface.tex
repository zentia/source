\doxysection{tf\+::Worker\+Interface类 参考}
\hypertarget{classtf_1_1_worker_interface}{}\label{classtf_1_1_worker_interface}\index{tf::WorkerInterface@{tf::WorkerInterface}}


class to configure worker behavior in an executor  




{\ttfamily \#include $<$worker.\+hpp$>$}



类 tf\+::Worker\+Interface 继承关系图\+:
% FIG 0
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
virtual \mbox{\hyperlink{classtf_1_1_worker_interface_a4f086cadaabff4094cf07fd387b2e185}{\texorpdfstring{$\sim$}{\string~}\+Worker\+Interface}} ()=\mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}}
\begin{DoxyCompactList}\small\item\em default destructor \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1_worker_interface_a41c3b931a36bde8eff4aa8d375e8888a}{scheduler\+\_\+prologue}} (\mbox{\hyperlink{classtf_1_1_worker}{Worker}} \&worker)=0
\begin{DoxyCompactList}\small\item\em method to call before a worker enters the scheduling loop \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1_worker_interface_a3e6d68fd4041f433d1b7ca9e5786b57c}{scheduler\+\_\+epilogue}} (\mbox{\hyperlink{classtf_1_1_worker}{Worker}} \&worker, std\+::exception\+\_\+ptr \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}})=0
\begin{DoxyCompactList}\small\item\em method to call after a worker leaves the scheduling loop \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
class to configure worker behavior in an executor 

The \doxylink{classtf_1_1_worker_interface}{tf\+::\+Worker\+Interface} class allows users to customize worker properties when creating an executor. Examples include binding workers to specific CPU cores or invoking custom methods before and after a worker enters or leaves the work-\/stealing loop. When you create an executor, it spawns a set of workers to execute tasks with the following logic\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}<num\_workers;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}++)\ \{}
\DoxyCodeLine{\ \ create\_thread([](Worker\&\ worker)}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ pre-\/processing\ executor-\/specific\ worker\ information}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ ...}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ enter\ the\ scheduling\ loop}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Here,\ WorkerInterface::scheduler\_prologue\ is\ invoked,\ if\ any}}
\DoxyCodeLine{\ \ \ \ worker\_interface-\/>scheduler\_prologue(worker);}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{\ \ \ \ \ \ while(1)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ perform\_work\_stealing\_algorithm();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ if(stop)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ break;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \}\ \textcolor{keywordflow}{catch}(...)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ exception\_ptr\ =\ std::current\_exception();}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ leaves\ the\ scheduling\ loop\ and\ joins\ this\ worker\ thread}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Here,\ WorkerInterface::scheduler\_epilogue\ is\ invoked,\ if\ any}}
\DoxyCodeLine{\ \ \ \ worker\_interface-\/>scheduler\_epilogue(worker,\ exception\_ptr);}
\DoxyCodeLine{\ \ );}
\DoxyCodeLine{\}}

\end{DoxyCode}


\begin{DoxyAttention}{注意}
\doxylink{classtf_1_1_worker_interface_a41c3b931a36bde8eff4aa8d375e8888a}{tf\+::\+Worker\+Interface\+::scheduler\+\_\+prologue} and tf\+::\+Worker\+Interface\+::scheduler\+\_\+eiplogue are invoked by each worker simultaneously. 
\end{DoxyAttention}


\doxysubsection{构造及析构函数说明}
\Hypertarget{classtf_1_1_worker_interface_a4f086cadaabff4094cf07fd387b2e185}\index{tf::WorkerInterface@{tf::WorkerInterface}!````~WorkerInterface@{\texorpdfstring{$\sim$}{\string~}WorkerInterface}}
\index{````~WorkerInterface@{\texorpdfstring{$\sim$}{\string~}WorkerInterface}!tf::WorkerInterface@{tf::WorkerInterface}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}WorkerInterface()}{\string~WorkerInterface()}}
{\footnotesize\ttfamily \label{classtf_1_1_worker_interface_a4f086cadaabff4094cf07fd387b2e185} 
virtual tf\+::\+Worker\+Interface\+::\texorpdfstring{$\sim$}{\string~}\+Worker\+Interface (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}, {\ttfamily [default]}}



default destructor 



\doxysubsection{成员函数说明}
\Hypertarget{classtf_1_1_worker_interface_a3e6d68fd4041f433d1b7ca9e5786b57c}\index{tf::WorkerInterface@{tf::WorkerInterface}!scheduler\_epilogue@{scheduler\_epilogue}}
\index{scheduler\_epilogue@{scheduler\_epilogue}!tf::WorkerInterface@{tf::WorkerInterface}}
\doxysubsubsection{\texorpdfstring{scheduler\_epilogue()}{scheduler\_epilogue()}}
{\footnotesize\ttfamily \label{classtf_1_1_worker_interface_a3e6d68fd4041f433d1b7ca9e5786b57c} 
virtual \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tf\+::\+Worker\+Interface\+::scheduler\+\_\+epilogue (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtf_1_1_worker}{Worker}} \&}]{worker}{, }\item[{std\+::exception\+\_\+ptr}]{ptr}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



method to call after a worker leaves the scheduling loop 


\begin{DoxyParams}{参数}
{\em worker} & a reference to the worker \\
\hline
{\em ptr} & an pointer to the exception thrown by the scheduling loop\\
\hline
\end{DoxyParams}
The method is called by the constructor of an executor. 

在 \mbox{\hyperlink{class_custom_worker_behavior_ac2489526a34d4ff26c15bcb286deff69}{Custom\+Worker\+Behavior}} , 以及 \mbox{\hyperlink{class_custom_worker_behavior_af4b00b6cb407a16a45ed29a342ff22c9}{Custom\+Worker\+Behavior}} 内被实现.

\Hypertarget{classtf_1_1_worker_interface_a41c3b931a36bde8eff4aa8d375e8888a}\index{tf::WorkerInterface@{tf::WorkerInterface}!scheduler\_prologue@{scheduler\_prologue}}
\index{scheduler\_prologue@{scheduler\_prologue}!tf::WorkerInterface@{tf::WorkerInterface}}
\doxysubsubsection{\texorpdfstring{scheduler\_prologue()}{scheduler\_prologue()}}
{\footnotesize\ttfamily \label{classtf_1_1_worker_interface_a41c3b931a36bde8eff4aa8d375e8888a} 
virtual \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tf\+::\+Worker\+Interface\+::scheduler\+\_\+prologue (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtf_1_1_worker}{Worker}} \&}]{worker}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



method to call before a worker enters the scheduling loop 


\begin{DoxyParams}{参数}
{\em worker} & a reference to the worker\\
\hline
\end{DoxyParams}
The method is called by the constructor of an executor. 

在 \mbox{\hyperlink{class_custom_worker_behavior_a85f2d2940bc65948f59f33c95c671b53}{Custom\+Worker\+Behavior}} , 以及 \mbox{\hyperlink{class_custom_worker_behavior_ae9d78231260b996df64893776352f3ca}{Custom\+Worker\+Behavior}} 内被实现.



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/taskflow/taskflow/core/\mbox{\hyperlink{worker_8hpp}{worker.\+hpp}}\end{DoxyCompactItemize}
