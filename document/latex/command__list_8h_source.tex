\doxysection{command\+\_\+list.\+h}
\hypertarget{command__list_8h_source}{}\label{command__list_8h_source}\index{runtime/runtime/command\_list.h@{runtime/runtime/command\_list.h}}
\mbox{\hyperlink{command__list_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{concepts_8h}{runtime/core/concepts.h}}>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{core_2stl_2optional_8h}{runtime/core/stl/optional.h}}>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{core_2stl_2functional_8h}{runtime/core/stl/functional.h}}>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{command_8h}{runtime/runtime/rhi/command.h}}>}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#ifdef\ LUISA\_ENABLE\_API}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <luisa/api/common.h>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacelc_1_1validation}{lc::validation}}\ \{}
\DoxyCodeLine{00013\ \textcolor{keyword}{class\ }Device;}
\DoxyCodeLine{00014\ \}\textcolor{comment}{//\ namespace\ lc::validation}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceluisa_1_1compute}{luisa::compute}}\ \{}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{keyword}{class\ }\mbox{\hyperlink{dll__export_8h_ad06d699c99cabff41979e596b53ac25a}{LC\_RUNTIME\_API}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_aefbcde16d00b5b6e14a4a859ff0300fb}{CommandList}}\ :\ \mbox{\hyperlink{structluisa_1_1concepts_1_1_noncopyable}{concepts::Noncopyable}}\ \{}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }lc::validation::Device;}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_1_1_commit}{Commit}};}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_aa61dccc4b0edfa24ec9012c9244ab226}{CommandContainer}}\ =\ luisa::vector<luisa::unique\_ptr<Command>>;}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_a04afcca3506c74b39c6ea11a7a6d0cea}{CallbackContainer}}\ =\ \mbox{\hyperlink{namespaceluisa_a2c3aa26df5a5ab8ed3d5cc6f00cd0718}{luisa::vector}}<luisa::move\_only\_function<\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}}()>>;}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_aa61dccc4b0edfa24ec9012c9244ab226}{CommandContainer}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_ae651553fe68cee48e5db60e5181a0001}{\_commands}};}
\DoxyCodeLine{00028\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_a04afcca3506c74b39c6ea11a7a6d0cea}{CallbackContainer}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_a5564257ab78a3984d0929397d61965b3}{\_callbacks}};}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_a622797db65f75a9388543158ec5ac7ac}{\_committed}}\{\textcolor{keyword}{false}\};}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_aefbcde16d00b5b6e14a4a859ff0300fb}{CommandList}}()\ noexcept\ =\ \mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}};}
\DoxyCodeLine{00033\ \ \ \ \ \string~\mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_aefbcde16d00b5b6e14a4a859ff0300fb}{CommandList}}()\ noexcept;}
\DoxyCodeLine{00034\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_aefbcde16d00b5b6e14a4a859ff0300fb}{CommandList}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_aefbcde16d00b5b6e14a4a859ff0300fb}{CommandList}}\ \&\&another)\ noexcept;}
\DoxyCodeLine{00035\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_aefbcde16d00b5b6e14a4a859ff0300fb}{CommandList}}\ \&operator=(\mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_aefbcde16d00b5b6e14a4a859ff0300fb}{CommandList}}\ \&\&rhs)\ noexcept\ =\ delete;}
\DoxyCodeLine{00036\ \ \ \ \ [[nodiscard]]\ static\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_aefbcde16d00b5b6e14a4a859ff0300fb}{CommandList}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_a3e5d5c4b7348dd4d212031df1e61ac4e}{create}}(\textcolor{keywordtype}{size\_t}\ reserved\_command\_size\ =\ 0u,}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ reserved\_callback\_size\ =\ 0u)\ noexcept;}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_a958a305feb46eeebcef3c4749b981b9b}{reserve}}(\textcolor{keywordtype}{size\_t}\ command\_size,\ \textcolor{keywordtype}{size\_t}\ callback\_size)\ noexcept;}
\DoxyCodeLine{00040\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_aefbcde16d00b5b6e14a4a859ff0300fb}{CommandList}}\ \&operator<<(\mbox{\hyperlink{namespaceluisa}{luisa}}::\mbox{\hyperlink{classeastl_1_1unique__ptr}{unique\_ptr}}<\mbox{\hyperlink{classluisa_1_1compute_1_1_command}{Command}}>\ \&\&cmd)\ noexcept;}
\DoxyCodeLine{00041\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_aefbcde16d00b5b6e14a4a859ff0300fb}{CommandList}}\ \&\mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_aeeccc2456872be8ae00baf989537d380}{append}}(\mbox{\hyperlink{namespaceluisa}{luisa}}::\mbox{\hyperlink{classeastl_1_1unique__ptr}{unique\_ptr}}<\mbox{\hyperlink{classluisa_1_1compute_1_1_command}{Command}}>\ \&\&cmd)\ noexcept;}
\DoxyCodeLine{00042\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_aefbcde16d00b5b6e14a4a859ff0300fb}{CommandList}}\ \&\mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_a6a2b8b7c7c6681b9c8be7b7caab3b95c}{add\_callback}}(\mbox{\hyperlink{namespaceluisa}{luisa}}::\mbox{\hyperlink{classeastl_1_1move__only__function}{move\_only\_function}}<\textcolor{keywordtype}{void}()>\ \&\&callback)\ noexcept;}
\DoxyCodeLine{00043\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_aefbcde16d00b5b6e14a4a859ff0300fb}{CommandList}}\ \&\mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_a677e422daab119c350d8264a2f702fd2}{add\_range}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_aefbcde16d00b5b6e14a4a859ff0300fb}{CommandList}}\ \&\&cmdlist)\ noexcept;}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_a4bf5d665be43e8d8530a8e4abe72270d}{clear}}()\ noexcept;}
\DoxyCodeLine{00045\ \ \ \ \ [[nodiscard]]\ auto\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_aa6f2d9557c4d614a46c587d1af91c3bb}{commands}}()\ const\ noexcept\ \{\ \textcolor{keywordflow}{return}\ luisa::span\{\mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_ae651553fe68cee48e5db60e5181a0001}{\_commands}}\};\ \}}
\DoxyCodeLine{00046\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_ad6e0dfec3ed08c21752745d786b1a39d}{callbacks}}()\ const\ noexcept\ \{\ \textcolor{keywordflow}{return}\ luisa::span\{\mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_a5564257ab78a3984d0929397d61965b3}{\_callbacks}}\};\ \}}
\DoxyCodeLine{00047\ \ \ \ \ [[nodiscard]]\ CommandContainer\ steal\_commands()\ noexcept;}
\DoxyCodeLine{00048\ \ \ \ \ [[nodiscard]]\ CallbackContainer\ steal\_callbacks()\ noexcept;}
\DoxyCodeLine{00049\ \ \ \ \ [[nodiscard]]\ auto\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_a62bc2a49e5ab43b4aef4344730f48794}{empty}}()\ const\ noexcept\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_ae651553fe68cee48e5db60e5181a0001}{\_commands}}.empty()\ \&\&\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_a5564257ab78a3984d0929397d61965b3}{\_callbacks}}.empty();\ \}}
\DoxyCodeLine{00050\ \ \ \ \ [[nodiscard]]\ Commit\ \mbox{\hyperlink{namespaceluisa_1_1compute_acc76090eea346a8113c9db08f08880c7}{commit}}()\ noexcept;}
\DoxyCodeLine{00051\ \};}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ class\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_1_1_commit_a7a4ba63b8c8ef563c010b950ed024f33}{CommandList}}::\mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_1_1_commit_af222d5306af21f688f636b602cac3f21}{Commit}}\ \{}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00056\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_1_1_commit_a7a4ba63b8c8ef563c010b950ed024f33}{CommandList}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_1_1_commit_abfb215a9e2e55b8c1ed98d0f3f6cd558}{\_list}};}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_1_1_commit_a7a4ba63b8c8ef563c010b950ed024f33}{CommandList}};}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_1_1_commit_af222d5306af21f688f636b602cac3f21}{Commit}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_1_1_commit_a7a4ba63b8c8ef563c010b950ed024f33}{CommandList}}\ \&\&\mbox{\hyperlink{namespaceluisa_afbdbb20de8bb3730f578eaba0e3803b6}{list}})\ noexcept}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_1_1_commit_abfb215a9e2e55b8c1ed98d0f3f6cd558}{\_list}}\{std::move(\mbox{\hyperlink{namespaceluisa_afbdbb20de8bb3730f578eaba0e3803b6}{list}})\}\ \{\}}
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_1_1_commit_a3b524e73bd1f9bc9a5f379b0d67f0539}{Commit}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_1_1_commit_af222d5306af21f688f636b602cac3f21}{Commit}}\ \&\&)\ noexcept\ =\ \mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}};}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ public:}
\DoxyCodeLine{00065\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_1_1_commit_af222d5306af21f688f636b602cac3f21}{Commit}}\ \&operator=(\mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_1_1_commit_af222d5306af21f688f636b602cac3f21}{Commit}}\ \&\&)\ noexcept\ =\ delete;}
\DoxyCodeLine{00066\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_1_1_commit_af222d5306af21f688f636b602cac3f21}{Commit}}\ \&operator=(const\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_1_1_commit_af222d5306af21f688f636b602cac3f21}{Commit}}\ \&)\ noexcept\ =\ delete;}
\DoxyCodeLine{00067\ \ \ \ \ [[nodiscard]]\ auto\ \mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_1_1_commit_a88bb121d4d605a286b9ac4cbb7a2b24c}{command\_list}}()\ \&\&\ noexcept\ \{\ \textcolor{keywordflow}{return}\ std::move(\mbox{\hyperlink{classluisa_1_1compute_1_1_command_list_1_1_commit_abfb215a9e2e55b8c1ed98d0f3f6cd558}{\_list}});\ \}}
\DoxyCodeLine{00068\ \};}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \}\textcolor{comment}{//\ namespace\ luisa::compute}}

\end{DoxyCode}
