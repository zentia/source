\doxysection{backend.\+h}
\hypertarget{backend_8h_source}{}\label{backend_8h_source}\index{external/taskflow/3rd-\/party/tbb/src/tbbmalloc/backend.h@{external/taskflow/3rd-\/party/tbb/src/tbbmalloc/backend.h}}
\mbox{\hyperlink{backend_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#ifndef\ \_\_TBB\_tbbmalloc\_internal\_H}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\ \ \ \ \#error\ tbbmalloc\_internal.h\ must\ be\ included\ at\ this\ point}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#ifndef\ \_\_TBB\_backend\_H}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#define\ \_\_TBB\_backend\_H}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{comment}{//\ Included\ from\ namespace\ rml::internal}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{comment}{//\ global\ state\ of\ blocks\ currently\ in\ processing}}
\DoxyCodeLine{00027\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_backend_sync}{BackendSync}}\ \{}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{comment}{//\ Class\ instances\ should\ reside\ in\ zero-\/initialized\ memory!}}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{comment}{//\ The\ number\ of\ blocks\ currently\ removed\ from\ a\ bin\ and\ not\ returned\ back}}
\DoxyCodeLine{00030\ \ \ \ \ intptr\_t\ \mbox{\hyperlink{class_backend_sync_a76d8816364941c506735ec62b46424ee}{inFlyBlocks}};\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ to\ another}}
\DoxyCodeLine{00031\ \ \ \ \ intptr\_t\ \mbox{\hyperlink{class_backend_sync_aed49455d188e8d573c43fb1d37659b0c}{binsModifications}};\ \ \ \textcolor{comment}{//\ incremented\ on\ every\ bin\ modification}}
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{class_backend}{Backend}}\ *\mbox{\hyperlink{class_backend_sync_afb1d6373d22db21b5be4ac9cd0d258b4}{backend}};}
\DoxyCodeLine{00033\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_sync_afd4d277db221a5c47b73cf95dbc2df66}{init}}(\mbox{\hyperlink{class_backend}{Backend}}\ *\mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}})\ \{\ \mbox{\hyperlink{class_backend_sync_afb1d6373d22db21b5be4ac9cd0d258b4}{backend}}\ =\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}};\ \}}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_sync_a160f1cf5656a37aaa4aacbb6312669e6}{blockConsumed}}()\ \{\ \mbox{\hyperlink{_synchronize_8h_a248bc2de542e20022d01360546768c50}{AtomicIncrement}}(\mbox{\hyperlink{class_backend_sync_a76d8816364941c506735ec62b46424ee}{inFlyBlocks}});\ \}}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_sync_a1428741ccec2959d46b6eac0065f00bc}{binsModified}}()\ \{\ \mbox{\hyperlink{_synchronize_8h_a248bc2de542e20022d01360546768c50}{AtomicIncrement}}(\mbox{\hyperlink{class_backend_sync_aed49455d188e8d573c43fb1d37659b0c}{binsModifications}});\ \}}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_sync_a9e25124c3c26d3e06c6c2a60db19efca}{blockReleased}}()\ \{}
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#if\ \_\_TBB\_MALLOC\_BACKEND\_STAT}}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_customize_8h_af8fcb50fd416dc4f6d1165ae21c58eb3}{MALLOC\_ITT\_SYNC\_RELEASING}}(\&\mbox{\hyperlink{class_backend_sync_a76d8816364941c506735ec62b46424ee}{inFlyBlocks}});}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_synchronize_8h_a248bc2de542e20022d01360546768c50}{AtomicIncrement}}(\mbox{\hyperlink{class_backend_sync_aed49455d188e8d573c43fb1d37659b0c}{binsModifications}});}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ intptr\_t\ prev\ =\ \mbox{\hyperlink{_synchronize_8h_ae9382ede99cb71105906a4be5337e684}{AtomicAdd}}(\mbox{\hyperlink{class_backend_sync_a76d8816364941c506735ec62b46424ee}{inFlyBlocks}},\ -\/1);}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_customize_8h_ab07698dd675204d120111c1300b4185c}{MALLOC\_ASSERT}}(prev\ >\ 0,\ \mbox{\hyperlink{tbbmalloc__internal_8h_a3b823c1707df8bd6d7d8b7cdb8b6dc6d}{ASSERT\_TEXT}});}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ suppress\_unused\_warning(prev);}
\DoxyCodeLine{00045\ \ \ \ \ \}}
\DoxyCodeLine{00046\ \ \ \ \ intptr\_t\ \mbox{\hyperlink{class_backend_sync_ac58802f56709f8e36edb4289e4858cf3}{getNumOfMods}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_synchronize_8h_a0792980ea26344eaf2fc0a4112b5d848}{FencedLoad}}(\mbox{\hyperlink{class_backend_sync_aed49455d188e8d573c43fb1d37659b0c}{binsModifications}});\ \}}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{comment}{//\ return\ true\ if\ need\ re-\/do\ the\ blocks\ search}}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_backend_sync_ab8e2b1fe2c29bf46b64a040e021fd9ff}{waitTillBlockReleased}}(intptr\_t\ startModifiedCnt);}
\DoxyCodeLine{00049\ \};}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_coal_request_q}{CoalRequestQ}}\ \{\ \textcolor{comment}{//\ queue\ of\ free\ blocks\ that\ coalescing\ was\ delayed}}
\DoxyCodeLine{00052\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00053\ \ \ \ \ FreeBlock\ \ \ *\mbox{\hyperlink{class_coal_request_q_aa8e98471373ffdf41d27791bb2fe8999}{blocksToFree}};}
\DoxyCodeLine{00054\ \ \ \ \ \mbox{\hyperlink{class_backend_sync}{BackendSync}}\ *\mbox{\hyperlink{class_coal_request_q_ab317f35b84369a22081ef10e23e33ac9}{bkndSync}};}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{comment}{//\ counted\ blocks\ in\ blocksToFree\ and\ that\ are\ leaved\ blocksToFree}}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{comment}{//\ and\ still\ in\ active\ coalescing}}
\DoxyCodeLine{00057\ \ \ \ \ intptr\_t\ \ \ \ \ \mbox{\hyperlink{class_coal_request_q_a7b7049c198e1758022b402efd58e61bd}{inFlyBlocks}};}
\DoxyCodeLine{00058\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_coal_request_q_ad3f0e0e7d758fe744ca2f27ab5be654c}{init}}(\mbox{\hyperlink{class_backend_sync}{BackendSync}}\ *bSync)\ \{\ \mbox{\hyperlink{class_coal_request_q_ab317f35b84369a22081ef10e23e33ac9}{bkndSync}}\ =\ bSync;\ \}}
\DoxyCodeLine{00060\ \ \ \ \ FreeBlock\ *\mbox{\hyperlink{class_coal_request_q_ab8c4590d69c816bed1492a8336a196ff}{getAll}}();\ \textcolor{comment}{//\ return\ current\ list\ of\ blocks\ and\ make\ queue\ empty}}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_coal_request_q_a1eb7f37204d2d04476d359520660a5fa}{putBlock}}(FreeBlock\ *fBlock);}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_coal_request_q_a154200da8a5e6e4312bb1e64651ef96e}{blockWasProcessed}}();}
\DoxyCodeLine{00063\ \ \ \ \ intptr\_t\ \mbox{\hyperlink{class_coal_request_q_a561df1f88c6a05be20660b99189ff03d}{blocksInFly}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_synchronize_8h_a0792980ea26344eaf2fc0a4112b5d848}{FencedLoad}}(\mbox{\hyperlink{class_coal_request_q_a7b7049c198e1758022b402efd58e61bd}{inFlyBlocks}});\ \}}
\DoxyCodeLine{00064\ \};}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_mem_extending_sema}{MemExtendingSema}}\ \{}
\DoxyCodeLine{00067\ \ \ \ \ intptr\_t\ \ \ \ \ \mbox{\hyperlink{class_mem_extending_sema_a34e96d83383a0af103a408a027e94474}{active}};}
\DoxyCodeLine{00068\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_mem_extending_sema_a5aadbba933c4049facec1cdef5734b3a}{wait}}()\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ rescanBins\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ up\ to\ 3\ threads\ can\ add\ more\ memory\ from\ OS\ simultaneously,}}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ rest\ of\ threads\ have\ to\ wait}}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ intptr\_t\ prevCnt\ =\ \mbox{\hyperlink{_synchronize_8h_a0792980ea26344eaf2fc0a4112b5d848}{FencedLoad}}(\mbox{\hyperlink{class_mem_extending_sema_a34e96d83383a0af103a408a027e94474}{active}});}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (prevCnt\ <\ 3)\ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ intptr\_t\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ =\ \mbox{\hyperlink{_synchronize_8h_a204e8f99046d12f598e460aa19ac9516}{AtomicCompareExchange}}(\mbox{\hyperlink{class_mem_extending_sema_a34e96d83383a0af103a408a027e94474}{active}},\ prevCnt+1,\ prevCnt);}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ ==\ prevCnt)}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_synchronize_8h_a424c4c0e5c7455e2794bbcad19240aaf}{SpinWaitWhileEq}}(\mbox{\hyperlink{class_mem_extending_sema_a34e96d83383a0af103a408a027e94474}{active}},\ prevCnt);}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rescanBins\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rescanBins;}
\DoxyCodeLine{00086\ \ \ \ \ \}}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_mem_extending_sema_ad992fd6a56639ea3cb200314fac59b30}{signal}}()\ \{\ \mbox{\hyperlink{_synchronize_8h_ae9382ede99cb71105906a4be5337e684}{AtomicAdd}}(\mbox{\hyperlink{class_mem_extending_sema_a34e96d83383a0af103a408a027e94474}{active}},\ -\/1);\ \}}
\DoxyCodeLine{00088\ \};}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{backend_8h_a932213c1021a91448e224e181c2d28a5}{MemRegionType}}\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{comment}{//\ The\ region\ holds\ only\ slabs}}
\DoxyCodeLine{00092\ \ \ \ \ \mbox{\hyperlink{backend_8h_a932213c1021a91448e224e181c2d28a5ab8906213eeac3151282f0fa5bc745042}{MEMREG\_SLAB\_BLOCKS}}\ =\ 0,}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{comment}{//\ The\ region\ can\ hold\ several\ large\ object\ blocks}}
\DoxyCodeLine{00094\ \ \ \ \ \mbox{\hyperlink{backend_8h_a932213c1021a91448e224e181c2d28a5aad01ecb3e67ae166d914abbf377c97f1}{MEMREG\_LARGE\_BLOCKS}},}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{comment}{//\ The\ region\ holds\ only\ one\ block\ with\ a\ requested\ size}}
\DoxyCodeLine{00096\ \ \ \ \ \mbox{\hyperlink{backend_8h_a932213c1021a91448e224e181c2d28a5a46b84ac5eab813531de63dbe7cab55b9}{MEMREG\_ONE\_BLOCK}}}
\DoxyCodeLine{00097\ \};}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_mem_region_list}{MemRegionList}}\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \mbox{\hyperlink{class_malloc_mutex}{MallocMutex}}\ \mbox{\hyperlink{class_mem_region_list_ac636b9c1a52994a4ddbfba4bf032e017}{regionListLock}};}
\DoxyCodeLine{00101\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00102\ \ \ \ \ MemRegion\ \ *\mbox{\hyperlink{class_mem_region_list_a498cb2d13537a5be5acb9cc9c5b575d7}{head}};}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_mem_region_list_a3dec4065b984ff0a7e0eb441f2ca2428}{add}}(MemRegion\ *\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}});}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_mem_region_list_a0d4b94e31d1c6d61add3a8d0716c4000}{remove}}(MemRegion\ *\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}});}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_mem_region_list_a9a5ecc34d5b5b803da75964740c77fdc}{reportStat}}(FILE\ *\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});}
\DoxyCodeLine{00106\ \};}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_backend}{Backend}}\ \{}
\DoxyCodeLine{00109\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00110\ \textcolor{comment}{/*\ Blocks\ in\ range\ [minBinnedSize;\ getMaxBinnedSize()]\ are\ kept\ in\ bins,}}
\DoxyCodeLine{00111\ \textcolor{comment}{\ \ \ one\ region\ can\ contains\ several\ blocks.\ Larger\ blocks\ are\ allocated\ directly}}
\DoxyCodeLine{00112\ \textcolor{comment}{\ \ \ and\ one\ region\ always\ contains\ one\ block.}}
\DoxyCodeLine{00113\ \textcolor{comment}{*/}}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_aeeb5d25637dc75cab125b451b0e1aad4a6b460aa14f1375afdf81d5475175898d}{minBinnedSize}}\ =\ 8*1024UL,}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ \ If\ huge\ pages\ are\ available,\ maxBinned\_HugePage\ used.}}
\DoxyCodeLine{00117\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ If\ not,\ maxBinned\_SmallPage\ is\ the\ threshold.}}
\DoxyCodeLine{00118\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ TODO:\ use\ pool's\ granularity\ for\ upper\ bound\ setting.*/}}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_aeeb5d25637dc75cab125b451b0e1aad4a530001ee1962ac08c3aa387b4c6819d7}{maxBinned\_SmallPage}}\ =\ 1024*1024UL,}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ support\ other\ page\ sizes}}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_aeeb5d25637dc75cab125b451b0e1aad4a7cce8bccf7b75d0f2ddd760ed83bc908}{maxBinned\_HugePage}}\ =\ 4*1024*1024UL}
\DoxyCodeLine{00122\ \ \ \ \ \};}
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_a041e23c024caefffb85223ce42fff5e7a5b90fe2692c38167465c0d982ad42505}{VALID\_BLOCK\_IN\_BIN}}\ =\ 1\ \textcolor{comment}{//\ valid\ block\ added\ to\ bin,\ not\ returned\ as\ result}}
\DoxyCodeLine{00125\ \ \ \ \ \};}
\DoxyCodeLine{00126\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{comment}{//\ Backend\ bins\ step\ is\ the\ same\ as\ CacheStep\ for\ large\ object\ cache}}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \ \ \mbox{\hyperlink{class_backend_aca4bc8d3fa54589aa77863469faf70c7}{freeBinsStep}}\ =\ \mbox{\hyperlink{struct_large_bin_structure_props_ac6b15e5c28a2b3244ba099744a8aeb49}{LargeObjectCache::LargeBSProps::CacheStep}};}
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{class_backend_a759c288a027519657026584a582eed99}{freeBinsNum}}\ =\ (\mbox{\hyperlink{class_backend_aeeb5d25637dc75cab125b451b0e1aad4a7cce8bccf7b75d0f2ddd760ed83bc908}{maxBinned\_HugePage}}-\/\mbox{\hyperlink{class_backend_aeeb5d25637dc75cab125b451b0e1aad4a6b460aa14f1375afdf81d5475175898d}{minBinnedSize}})/\mbox{\hyperlink{class_backend_aca4bc8d3fa54589aa77863469faf70c7}{freeBinsStep}}\ +\ 1;}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{comment}{//\ if\ previous\ access\ missed\ per-\/thread\ slabs\ pool,}}
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{comment}{//\ allocate\ numOfSlabAllocOnMiss\ blocks\ in\ advance}}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_backend_ad67cad2b7ffe8749cca3f36087da1dc8}{numOfSlabAllocOnMiss}}\ =\ 2;}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_a96a0e287fc544a79af09b829ce52c2cfa5ff8dfd1db63c0c5901d7fef1490f3ef}{NO\_BIN}}\ =\ -\/1,}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ special\ bin\ for\ blocks\ >=\ maxBinned\_HugePage,\ blocks\ go\ to\ this\ bin}}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ when\ pool\ is\ created\ with\ keepAllMemory\ policy}}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ currently\ this\ bin\ is\ scanned\ using\ "{}1st\ fit"{},\ as\ it\ accumulates}}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ blocks\ of\ different\ sizes,\ "{}best\ fit"{}\ is\ preferred\ in\ terms\ of\ fragmentation}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_a96a0e287fc544a79af09b829ce52c2cfaeb9832e9268265781bb8a859d4996326}{HUGE\_BIN}}\ =\ \mbox{\hyperlink{class_backend_a759c288a027519657026584a582eed99}{freeBinsNum}}-\/1}
\DoxyCodeLine{00142\ \ \ \ \ \};}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{comment}{//\ Bin\ keeps\ 2-\/linked\ list\ of\ free\ blocks.\ It\ must\ be\ 2-\/linked}}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{comment}{//\ because\ during\ coalescing\ a\ block\ it's\ removed\ from\ a\ middle\ of\ the\ list.}}
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_backend_1_1_bin}{Bin}}\ \{}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ FreeBlock\ \ \ *\mbox{\hyperlink{struct_backend_1_1_bin_a559c0e5a19c7d05bf3066b5d435d9d48}{head}},}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\mbox{\hyperlink{struct_backend_1_1_bin_a0c772410a30607134669af9c3e020b1c}{tail}};}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_malloc_mutex}{MallocMutex}}\ \ \mbox{\hyperlink{struct_backend_1_1_bin_ad1ad874e48645da06eb2dd078d19b5c3}{tLock}};}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_backend_1_1_bin_afed1bcf6989a748729d7a0678d5bd101}{removeBlock}}(FreeBlock\ *fBlock);}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_backend_1_1_bin_ac677ffd6042c966b26abfa067b088e46}{reset}}()\ \{\ \mbox{\hyperlink{struct_backend_1_1_bin_a559c0e5a19c7d05bf3066b5d435d9d48}{head}}\ =\ \mbox{\hyperlink{struct_backend_1_1_bin_a0c772410a30607134669af9c3e020b1c}{tail}}\ =\ 0;\ \}}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_backend_1_1_bin_a7b90d28022ab5631378bc6042e3841da}{empty}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ !\mbox{\hyperlink{struct_backend_1_1_bin_a559c0e5a19c7d05bf3066b5d435d9d48}{head}};\ \}}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{struct_backend_1_1_bin_abf0b71dc2ad7c3b281439efca814529a}{countFreeBlocks}}();}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{struct_backend_1_1_bin_a60aa3c293980f79146e257c7d6d6edc0}{reportFreeBlocks}}(FILE\ *\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_backend_1_1_bin_a52cc5a23858e0dfbeb980159c0cdd213}{reportStat}}(FILE\ *\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});}
\DoxyCodeLine{00158\ \ \ \ \ \};}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keyword}{typedef}\ BitMaskMin<Backend::freeBinsNum>\ \mbox{\hyperlink{class_backend_a743e1695ec25da74ca21cd091809bf24}{BitMaskBins}};}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \ \ \textcolor{comment}{//\ array\ of\ bins\ supplemented\ with\ bitmask\ for\ fast\ finding\ of\ non-\/empty\ bins}}
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_backend_1_1_indexed_bins}{IndexedBins}}\ \{}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_a743e1695ec25da74ca21cd091809bf24}{BitMaskBins}}\ \mbox{\hyperlink{class_backend_1_1_indexed_bins_a1c32668f465dad227d01a61f4d7cba64}{bitMask}};}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_backend_1_1_bin}{Bin}}\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_1_1_indexed_bins_ad17778dda76784f904a52999362d385e}{freeBins}}[\mbox{\hyperlink{class_backend_a759c288a027519657026584a582eed99}{Backend::freeBinsNum}}];}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ FreeBlock\ *\mbox{\hyperlink{class_backend_1_1_indexed_bins_a8789b50e5b5533f5ac17b13851f0fcde}{getFromBin}}(\textcolor{keywordtype}{int}\ binIdx,\ \mbox{\hyperlink{class_backend_acc0dfde307ffa6db58e7e9471cca8295}{BackendSync}}\ *sync,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ needAlignedBlock,\ \textcolor{keywordtype}{bool}\ alignedBin,\ \textcolor{keywordtype}{bool}\ wait,\ \textcolor{keywordtype}{int}\ *resLocked);}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ FreeBlock\ *\mbox{\hyperlink{class_backend_1_1_indexed_bins_a2b7d17d0edba186ca4f0589ac52a2d54}{findBlock}}(\textcolor{keywordtype}{int}\ nativeBin,\ \mbox{\hyperlink{class_backend_acc0dfde307ffa6db58e7e9471cca8295}{BackendSync}}\ *sync,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ needAlignedBlock,\ \textcolor{keywordtype}{bool}\ alignedBin,\textcolor{keywordtype}{int}\ *numOfLockedBins);}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_backend_1_1_indexed_bins_a77e9763de3c948a069570cebd381ba77}{tryReleaseRegions}}(\textcolor{keywordtype}{int}\ binIdx,\ \mbox{\hyperlink{class_backend}{Backend}}\ *backend);}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_1_1_indexed_bins_ae6ffd328f5d0c730011bcfe67410f709}{lockRemoveBlock}}(\textcolor{keywordtype}{int}\ binIdx,\ FreeBlock\ *fBlock);}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_1_1_indexed_bins_acb8b3b2c17574e6a77c9135c6f3e027d}{addBlock}}(\textcolor{keywordtype}{int}\ binIdx,\ FreeBlock\ *fBlock,\ \textcolor{keywordtype}{size\_t}\ blockSz,\ \textcolor{keywordtype}{bool}\ addToTail);}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_backend_1_1_indexed_bins_a462c443a37dea32f4c5cfdec77067233}{tryAddBlock}}(\textcolor{keywordtype}{int}\ binIdx,\ FreeBlock\ *fBlock,\ \textcolor{keywordtype}{bool}\ addToTail);}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \ \mbox{\hyperlink{class_backend_1_1_indexed_bins_a8d4f3134779a1f981817b7fc7c944b60}{getMinNonemptyBin}}(\textcolor{keywordtype}{unsigned}\ startBin)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_1_1_indexed_bins_a7935e2fff3927f460ee3c432a6e62dee}{verify}}();}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_1_1_indexed_bins_a5e2645387636174105411777ecbba5b2}{reset}}();}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_1_1_indexed_bins_abc965b00b3260cf5b0e204a4baa8a4b4}{reportStat}}(FILE\ *\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});}
\DoxyCodeLine{00179\ \ \ \ \ \};}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_backend_1_1_adv_regions_bins}{AdvRegionsBins}}\ \{}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_a743e1695ec25da74ca21cd091809bf24}{BitMaskBins}}\ \mbox{\hyperlink{class_backend_1_1_adv_regions_bins_abb149e575d1f601af759038cfef113bc}{bins}};}
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_1_1_adv_regions_bins_a7821e21758aab36f66e30c6941044063}{registerBin}}(\textcolor{keywordtype}{int}\ regBin)\ \{\ \mbox{\hyperlink{class_backend_1_1_adv_regions_bins_abb149e575d1f601af759038cfef113bc}{bins}}.set(regBin,\ 1);\ \}}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_backend_1_1_adv_regions_bins_a82c07f0bb60ebdbcf8ce4f07e4308bc3}{getMinUsedBin}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}})\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_backend_1_1_adv_regions_bins_abb149e575d1f601af759038cfef113bc}{bins}}.getMinTrue(\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}});\ \}}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_1_1_adv_regions_bins_a028fa3495e747c912cd937ccffcc9525}{reset}}()\ \{\ \mbox{\hyperlink{class_backend_1_1_adv_regions_bins_abb149e575d1f601af759038cfef113bc}{bins}}.reset();\ \}}
\DoxyCodeLine{00188\ \ \ \ \ \};}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{comment}{//\ auxiliary\ class\ to\ atomic\ maximum\ request\ finding}}
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_backend_1_1_max_request_comparator_a00c42bdafc588e1d670e24bec2aa0a17}{MaxRequestComparator}}\ \{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_backend}{Backend}}\ *\mbox{\hyperlink{class_backend_1_1_max_request_comparator_a758990b1fa8c7e744d479a7f53286322}{backend}};}
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_1_1_max_request_comparator_a00c42bdafc588e1d670e24bec2aa0a17}{MaxRequestComparator}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_backend}{Backend}}\ *be)\ :\ \mbox{\hyperlink{class_backend_1_1_max_request_comparator_a758990b1fa8c7e744d479a7f53286322}{backend}}(be)\ \{\}}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_backend_1_1_max_request_comparator_abf48f4f2293313ff6f5eed9d9863b7e0}{operator()}}(\textcolor{keywordtype}{size\_t}\ oldMaxReq,\ \textcolor{keywordtype}{size\_t}\ requestSize)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00195\ \ \ \ \ \};}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \textcolor{preprocessor}{\#if\ CHECK\_ALLOCATION\_RANGE}}
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{comment}{//\ Keep\ min\ and\ max\ of\ all\ addresses\ requested\ from\ OS,}}
\DoxyCodeLine{00199\ \ \ \ \ \textcolor{comment}{//\ use\ it\ for\ checking\ memory\ possibly\ allocated\ by\ replaced\ allocators}}
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{comment}{//\ and\ for\ debugging\ purposes.\ Valid\ only\ for\ default\ memory\ pool.}}
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_backend_1_1_used_address_range}{UsedAddressRange}}\ \{}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uintptr\_t\ ADDRESS\_UPPER\_BOUND\ =\ \mbox{\hyperlink{eabase_8h_ab2355300ea19395357e62d780f4dd073}{UINTPTR\_MAX}};}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ uintptr\_t\ \ \ leftBound,}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rightBound;}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_malloc_mutex}{MallocMutex}}\ \mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}};}
\DoxyCodeLine{00207\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ rightBound\ is\ zero-\/initialized}}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_1_1_used_address_range_aee69786ce3d0af1860838b799b716032}{init}}()\ \{\ leftBound\ =\ ADDRESS\_UPPER\_BOUND;\ \}}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_1_1_used_address_range_aad0959acc4db01a3a3409c9b31ddb8c3}{registerAlloc}}(uintptr\_t\ \mbox{\hyperlink{blas__interface_8hh_af32074257ed1b575dfd1ab2f6e6ba59f}{left}},\ uintptr\_t\ \mbox{\hyperlink{blas__interface_8hh_ae258f4b5364eaaabd106893a19064f76}{right}});}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_1_1_used_address_range_af7f068454e927b65a735f8ab5d6e44ab}{registerFree}}(uintptr\_t\ \mbox{\hyperlink{blas__interface_8hh_af32074257ed1b575dfd1ab2f6e6ba59f}{left}},\ uintptr\_t\ \mbox{\hyperlink{blas__interface_8hh_ae258f4b5364eaaabd106893a19064f76}{right}});}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ as\ only\ left\ and\ right\ bounds\ are\ kept,\ we\ can\ return\ true}}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ for\ pointer\ not\ allocated\ by\ us,\ if\ more\ than\ single\ region}}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ was\ requested\ from\ OS}}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_backend_1_1_used_address_range_aa06c02f28529594c3f215b15b3388fc5}{inRange}}(\textcolor{keywordtype}{void}\ *\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ uintptr\_t\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ (uintptr\_t)\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}};}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ leftBound<=\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ \&\&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}<=rightBound;}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00219\ \ \ \ \ \};}
\DoxyCodeLine{00220\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00221\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_backend_1_1_used_address_range}{UsedAddressRange}}\ \{}
\DoxyCodeLine{00222\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_1_1_used_address_range_aee69786ce3d0af1860838b799b716032}{init}}()\ \{\ \}}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_1_1_used_address_range_aad0959acc4db01a3a3409c9b31ddb8c3}{registerAlloc}}(uintptr\_t,\ uintptr\_t)\ \{\}}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_1_1_used_address_range_af7f068454e927b65a735f8ab5d6e44ab}{registerFree}}(uintptr\_t,\ uintptr\_t)\ \{\}}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_backend_1_1_used_address_range_aa06c02f28529594c3f215b15b3388fc5}{inRange}}(\textcolor{keywordtype}{void}\ *)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{00227\ \ \ \ \ \};}
\DoxyCodeLine{00228\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \ \ \ \ ExtMemoryPool\ \ \ *\mbox{\hyperlink{class_backend_a245a6e66300ae1fbe58f4cf3ea8c8b47}{extMemPool}};}
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{comment}{//\ used\ for\ release\ every\ region\ on\ pool\ destroying}}
\DoxyCodeLine{00232\ \ \ \ \ \mbox{\hyperlink{class_mem_region_list}{MemRegionList}}\ \ \ \ \mbox{\hyperlink{class_backend_a479bd068ec08487234107db5270861af}{regionList}};}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \ \ \ \ \mbox{\hyperlink{class_coal_request_q}{CoalRequestQ}}\ \ \ \ \ \mbox{\hyperlink{class_backend_a04f07e5f75024dafa5bc8eafa7e35e79}{coalescQ}};\ \textcolor{comment}{//\ queue\ of\ coalescing\ requests}}
\DoxyCodeLine{00235\ \ \ \ \ \mbox{\hyperlink{class_backend_acc0dfde307ffa6db58e7e9471cca8295}{BackendSync}}\ \ \ \ \ \ \mbox{\hyperlink{class_backend_a79cbe290791c7b884a258804358bcb35}{bkndSync}};}
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{comment}{//\ semaphore\ protecting\ adding\ more\ more\ memory\ from\ OS}}
\DoxyCodeLine{00237\ \ \ \ \ \mbox{\hyperlink{class_mem_extending_sema}{MemExtendingSema}}\ \mbox{\hyperlink{class_backend_a9c503fd78e7214a300a54b0ab91ed0b7}{memExtendingSema}};}
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_adebacdc22d427f270d9544344e82411c}{totalMemSize}},}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_adfc4fbecf32c389197244af553947b1a}{memSoftLimit}};}
\DoxyCodeLine{00240\ \ \ \ \ \mbox{\hyperlink{class_backend_1_1_used_address_range}{UsedAddressRange}}\ \mbox{\hyperlink{class_backend_a7b88ed86368972762a6e558ca5dbb83f}{usedAddrRange}};}
\DoxyCodeLine{00241\ \ \ \ \ \textcolor{comment}{//\ to\ keep\ 1st\ allocation\ large\ than\ requested,\ keep\ bootstrapping\ status}}
\DoxyCodeLine{00242\ \ \ \ \ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_a37912abc5107f3c20979bc7bf4e48b5ba5bb1e5759db545433d2b805d0a4c8a90}{bootsrapMemNotDone}}\ =\ 0,}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_a37912abc5107f3c20979bc7bf4e48b5ba18b9f6f262cb6e27b836ee9947cbde5a}{bootsrapMemInitializing}},}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_a37912abc5107f3c20979bc7bf4e48b5bacd354665e591b8b9e46f30b8c10fc9fd}{bootsrapMemDone}}}
\DoxyCodeLine{00246\ \ \ \ \ \};}
\DoxyCodeLine{00247\ \ \ \ \ intptr\_t\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_a883b6e23a4eb4ea4eec3359eab345b47}{bootsrapMemStatus}};}
\DoxyCodeLine{00248\ \ \ \ \ \mbox{\hyperlink{class_malloc_mutex}{MallocMutex}}\ \ \ \ \ \ \mbox{\hyperlink{class_backend_a678452014304b0a1291b14d847caf410}{bootsrapMemStatusMutex}};}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00250\ \ \ \ \ \textcolor{comment}{//\ Using\ of\ maximal\ observed\ requested\ size\ allows\ decrease}}
\DoxyCodeLine{00251\ \ \ \ \ \textcolor{comment}{//\ memory\ consumption\ for\ small\ requests\ and\ decrease\ fragmentation}}
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{comment}{//\ for\ workloads\ when\ small\ and\ large\ allocation\ requests\ are\ mixed.}}
\DoxyCodeLine{00253\ \ \ \ \ \textcolor{comment}{//\ TODO:\ decrease,\ not\ only\ increase\ it}}
\DoxyCodeLine{00254\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_a38e560fbbf01ccdeebd87829f668b7ed}{maxRequestedSize}};}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{comment}{//\ register\ bins\ related\ to\ advance\ regions}}
\DoxyCodeLine{00257\ \ \ \ \ \mbox{\hyperlink{class_backend_1_1_adv_regions_bins}{AdvRegionsBins}}\ \mbox{\hyperlink{class_backend_a5223052198576ea3a4bf94c66deed992}{advRegBins}};}
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{comment}{//\ Storage\ for\ split\ FreeBlocks}}
\DoxyCodeLine{00259\ \ \ \ \ \mbox{\hyperlink{class_backend_1_1_indexed_bins}{IndexedBins}}\ \mbox{\hyperlink{class_backend_a7724aa604434abd7fdad8bf2a84b77b3}{freeLargeBlockBins}},}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_a1f3dd1439d82a4e8a968cf50c6e24f77}{freeSlabAlignedBins}};}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{comment}{//\ Our\ friends}}
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_backend_acc0dfde307ffa6db58e7e9471cca8295}{BackendSync}};}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00265\ \textcolor{comment}{\ \ \ \ /********************************\ Backend\ methods\ ******************************/}}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \ \ \ \ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Coalescing\ functions\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00268\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_a73a1ed638532f524b5d79d243547dcc8}{coalescAndPut}}(FreeBlock\ *fBlock,\ \textcolor{keywordtype}{size\_t}\ blockSz,\ \textcolor{keywordtype}{bool}\ slabAligned);}
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_backend_ab7187ff304d09cf6f069821b4ab8e2fb}{coalescAndPutList}}(FreeBlock\ *\mbox{\hyperlink{ittnotify__static_8h_ad492e8facf9b4113e52f1918fceb8804}{head}},\ \textcolor{keywordtype}{bool}\ forceCoalescQDrop,\ \textcolor{keywordtype}{bool}\ reportBlocksProcessed);}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \ \ \textcolor{comment}{//\ Main\ coalescing\ operation}}
\DoxyCodeLine{00272\ \ \ \ \ FreeBlock\ *\mbox{\hyperlink{class_backend_a7632dfe63a52e77e13875b7e44d4ab76}{doCoalesc}}(FreeBlock\ *fBlock,\ MemRegion\ **memRegion);}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{comment}{//\ Queue\ for\ conflicted\ blocks\ during\ coalescing}}
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_backend_ade18da717ae37ea63f0a8cabc3a29536}{scanCoalescQ}}(\textcolor{keywordtype}{bool}\ forceCoalescQDrop);}
\DoxyCodeLine{00276\ \ \ \ \ intptr\_t\ \mbox{\hyperlink{class_backend_a644093589890c5faeaf1fa9fbf5a7e33}{blocksInCoalescing}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_backend_a04f07e5f75024dafa5bc8eafa7e35e79}{coalescQ}}.blocksInFly();\ \}}
\DoxyCodeLine{00277\ }
\DoxyCodeLine{00278\ \ \ \ \ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ FreeBlock\ backend\ accessors\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00279\ \ \ \ \ FreeBlock\ *\mbox{\hyperlink{class_backend_a17c603dbded6b99ac85e338515ae0d40}{genericGetBlock}}(\textcolor{keywordtype}{int}\ num,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ \textcolor{keywordtype}{bool}\ slabAligned);}
\DoxyCodeLine{00280\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_a6f4caa0614d12b51e9099d8d670aaf5a}{genericPutBlock}}(FreeBlock\ *fBlock,\ \textcolor{keywordtype}{size\_t}\ blockSz,\ \textcolor{keywordtype}{bool}\ slabAligned);}
\DoxyCodeLine{00281\ }
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{comment}{//\ Split\ the\ block\ and\ return\ remaining\ parts\ to\ backend\ if\ possible}}
\DoxyCodeLine{00283\ \ \ \ \ FreeBlock\ *\mbox{\hyperlink{class_backend_a31193cf3a8e8c5f2f4a3004bca4cadf2}{splitBlock}}(FreeBlock\ *fBlock,\ \textcolor{keywordtype}{int}\ num,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{_customize_8h_a717f2c2c0501922cd654a5ebf49b287e}{isAligned}},\ \textcolor{keywordtype}{bool}\ needAlignedBlock);}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_a9e707331f648a72caf2822fa488b6273}{removeBlockFromBin}}(FreeBlock\ *fBlock);}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \ \ \ \ \textcolor{comment}{//\ TODO:\ combine\ with\ returnLargeObject}}
\DoxyCodeLine{00288\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_a971588a51eccf071646aa9f61f5a1a08}{putLargeBlock}}(LargeMemoryBlock\ *lmb);}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Starting\ point\ for\ OS\ allocation\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_aff7afe8ff25d96689368544633aebd5b}{requestBootstrapMem}}();}
\DoxyCodeLine{00292\ \ \ \ \ FreeBlock\ *\mbox{\hyperlink{class_backend_a4c781fee21ce3ac75da9945ecb711df0}{askMemFromOS}}(\textcolor{keywordtype}{size\_t}\ totalReqSize,\ intptr\_t\ startModifiedCnt,}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ *lockedBinsThreshold,\ \textcolor{keywordtype}{int}\ numOfLockedBins,}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ *splittable,\ \textcolor{keywordtype}{bool}\ needSlabRegion);}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Memory\ regions\ allocation\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00297\ \ \ \ \ FreeBlock\ *\mbox{\hyperlink{class_backend_a1ce796da1be182b3d41e823abcb3dc75}{addNewRegion}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ \mbox{\hyperlink{backend_8h_a932213c1021a91448e224e181c2d28a5}{MemRegionType}}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{type}},\ \textcolor{keywordtype}{bool}\ addToBin);}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_abc1e069ce438bb93d53e6a9333253d47}{releaseRegion}}(MemRegion\ *region);}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{comment}{//\ TODO:\ combine\ in\ one\ initMemoryRegion\ function}}
\DoxyCodeLine{00301\ \ \ \ \ FreeBlock\ *\mbox{\hyperlink{class_backend_a1e73aa6cfd79f88ec08170e253dbfbf9}{findBlockInRegion}}(MemRegion\ *region,\ \textcolor{keywordtype}{size\_t}\ exactBlockSize);}
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_aa94dd2bec0167dbe34899fe4f6b26f1b}{startUseBlock}}(MemRegion\ *region,\ FreeBlock\ *fBlock,\ \textcolor{keywordtype}{bool}\ addToBin);}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00304\ \ \ \ \ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Raw\ memory\ accessors\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00305\ \ \ \ \ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{class_backend_ad064094fd6e2918eb5593a4b64ceba35}{allocRawMem}}(\textcolor{keywordtype}{size\_t}\ \&\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00306\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_backend_a7789b9e7e8feeb284af94e32f0fbd969}{freeRawMem}}(\textcolor{keywordtype}{void}\ *\textcolor{keywordtype}{object},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \ \ \ \ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Cleanup\ functions\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00309\ \ \ \ \ \textcolor{comment}{//\ Clean\ all\ memory\ from\ all\ caches\ (extMemPool\ hard\ cleanup)}}
\DoxyCodeLine{00310\ \ \ \ \ FreeBlock\ *\mbox{\hyperlink{class_backend_a9408e9ba0543412f2fac3089b0c9e46e}{releaseMemInCaches}}(intptr\_t\ startModifiedCnt,\ \textcolor{keywordtype}{int}\ *lockedBinsThreshold,\ \textcolor{keywordtype}{int}\ numOfLockedBins);}
\DoxyCodeLine{00311\ \ \ \ \ \textcolor{comment}{//\ Soft\ heap\ limit\ (regular\ cleanup,\ then\ maybe\ hard\ cleanup)}}
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_aae091f8b82917d89257a77c7366e3621}{releaseCachesToLimit}}();}
\DoxyCodeLine{00313\ }
\DoxyCodeLine{00314\ \ \ \ \ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Utility\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00315\ \ \ \ \ \textcolor{comment}{//\ TODO:\ move\ inside\ IndexedBins\ class}}
\DoxyCodeLine{00316\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_backend_ad56c1b510916f0874b8b9b67c44c0c5a}{sizeToBin}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}})\ \{}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ >=\ \mbox{\hyperlink{class_backend_aeeb5d25637dc75cab125b451b0e1aad4a7cce8bccf7b75d0f2ddd760ed83bc908}{maxBinned\_HugePage}})}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_backend_a96a0e287fc544a79af09b829ce52c2cfaeb9832e9268265781bb8a859d4996326}{HUGE\_BIN}};}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ <\ \mbox{\hyperlink{class_backend_aeeb5d25637dc75cab125b451b0e1aad4a6b460aa14f1375afdf81d5475175898d}{minBinnedSize}})}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_backend_a96a0e287fc544a79af09b829ce52c2cfa5ff8dfd1db63c0c5901d7fef1490f3ef}{NO\_BIN}};}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}}\ =\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ -\/\ \mbox{\hyperlink{class_backend_aeeb5d25637dc75cab125b451b0e1aad4a6b460aa14f1375afdf81d5475175898d}{minBinnedSize}})/\mbox{\hyperlink{class_backend_aca4bc8d3fa54589aa77863469faf70c7}{freeBinsStep}};}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_customize_8h_ab07698dd675204d120111c1300b4185c}{MALLOC\_ASSERT}}(\mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}}\ <\ \mbox{\hyperlink{class_backend_a96a0e287fc544a79af09b829ce52c2cfaeb9832e9268265781bb8a859d4996326}{HUGE\_BIN}},\ \textcolor{stringliteral}{"{}Invalid\ size."{}});}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}};}
\DoxyCodeLine{00326\ \ \ \ \ \}}
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_backend_a5d212ad1a0fa6eba8687952a85bf1f7e}{toAlignedBin}}(FreeBlock\ *\mbox{\hyperlink{mimalloc_8h_af7f922b73e3acdb4a430b72f1a1334a5}{block}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}})\ \{}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_customize_8h_a717f2c2c0501922cd654a5ebf49b287e}{isAligned}}((\textcolor{keywordtype}{char}*)\mbox{\hyperlink{mimalloc_8h_af7f922b73e3acdb4a430b72f1a1334a5}{block}}\ +\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ slabSize)\ \&\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ >=\ slabSize;}
\DoxyCodeLine{00329\ \ \ \ \ \}}
\DoxyCodeLine{00330\ }
\DoxyCodeLine{00331\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00332\ \ \ \ \ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Init,\ reset,\ destroy,\ verify\ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00333\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_a96d4530cfcad4c2cdd7d95b1e83fcace}{init}}(ExtMemoryPool\ *extMemoryPool);}
\DoxyCodeLine{00334\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_backend_abbd69238658c3ee4d94ad6aae45c6fc6}{destroy}}();}
\DoxyCodeLine{00335\ }
\DoxyCodeLine{00336\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_a0cbbed6276cadaaf90641097d9618579}{verify}}();}
\DoxyCodeLine{00337\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_a97ac37dab33b77c1b3f9c436cfed0e57}{reset}}();}
\DoxyCodeLine{00338\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_backend_a77ac28f54183f8f88936aeb7af9b3862}{clean}}();\ \textcolor{comment}{//\ clean\ on\ caches\ cleanup}}
\DoxyCodeLine{00339\ }
\DoxyCodeLine{00340\ \ \ \ \ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Slab\ block\ request\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00341\ \ \ \ \ BlockI\ *\mbox{\hyperlink{class_backend_a0b22428a530755a65736c143d89d5838}{getSlabBlock}}(\textcolor{keywordtype}{int}\ num);}
\DoxyCodeLine{00342\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_aff80d2f96611eb02d64e81c6311dcb16}{putSlabBlock}}(BlockI\ *\mbox{\hyperlink{mimalloc_8h_af7f922b73e3acdb4a430b72f1a1334a5}{block}});}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00344\ \ \ \ \ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Large\ object\ request\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00345\ \ \ \ \ LargeMemoryBlock\ *\mbox{\hyperlink{class_backend_adf7524d914e64252157420ef03b13033}{getLargeBlock}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00346\ \ \ \ \ \textcolor{comment}{//\ TODO:\ make\ consistent\ with\ getLargeBlock}}
\DoxyCodeLine{00347\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_a1fcb1bab9ea664ed7202eb5398a12e0b}{returnLargeObject}}(LargeMemoryBlock\ *lmb);}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Backreference\ memory\ request\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00350\ \ \ \ \ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{class_backend_af43a5f0fc5038a3e60d58602b696af87}{getBackRefSpace}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ \textcolor{keywordtype}{bool}\ *rawMemUsed);}
\DoxyCodeLine{00351\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_a8ba8f8b651bc7235e57afe20369e1f76}{putBackRefSpace}}(\textcolor{keywordtype}{void}\ *\mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ \textcolor{keywordtype}{bool}\ rawMemUsed);}
\DoxyCodeLine{00352\ }
\DoxyCodeLine{00353\ \ \ \ \ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Remap\ object\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00354\ \ \ \ \ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{class_backend_a8e28995520bd7327dae0c359422b684b}{remap}}(\textcolor{keywordtype}{void}\ *\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}},\ \textcolor{keywordtype}{size\_t}\ oldSize,\ \textcolor{keywordtype}{size\_t}\ newSize,\ \textcolor{keywordtype}{size\_t}\ alignment);}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00356\ \ \ \ \ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Validation\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00357\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_backend_a0d970b8baf9c882ee49d4467b88fcd3b}{inUserPool}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00358\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_backend_a83f98ad9320f65ba5a3ab1c1703540db}{ptrCanBeValid}}(\textcolor{keywordtype}{void}\ *\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}})\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_backend_a7b88ed86368972762a6e558ca5dbb83f}{usedAddrRange}}.inRange(\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}});\ \}}
\DoxyCodeLine{00359\ }
\DoxyCodeLine{00360\ \ \ \ \ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Configuration\ API\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00361\ \ \ \ \ \textcolor{comment}{//\ Soft\ heap\ limit}}
\DoxyCodeLine{00362\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_backend_a422bc66b74189acb00cd4c837cc64789}{setRecommendedMaxSize}}(\textcolor{keywordtype}{size\_t}\ softLimit)\ \{}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_adfc4fbecf32c389197244af553947b1a}{memSoftLimit}}\ =\ softLimit;}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_backend_aae091f8b82917d89257a77c7366e3621}{releaseCachesToLimit}}();}
\DoxyCodeLine{00365\ \ \ \ \ \}}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \ \ \ \ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Info\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00368\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_backend_af7f29ce80d57a9417ba3abaa156a5959}{getMaxBinnedSize}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00369\ }
\DoxyCodeLine{00370\ \ \ \ \ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Testing,\ statistics\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00371\ \textcolor{preprocessor}{\#if\ \_\_TBB\_MALLOC\_WHITEBOX\_TEST}}
\DoxyCodeLine{00372\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ getTotalMemSize()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_backend_adebacdc22d427f270d9544344e82411c}{totalMemSize}};\ \}}
\DoxyCodeLine{00373\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00374\ \textcolor{preprocessor}{\#if\ \_\_TBB\_MALLOC\_BACKEND\_STAT}}
\DoxyCodeLine{00375\ \ \ \ \ \textcolor{keywordtype}{void}\ reportStat(FILE\ *\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});}
\DoxyCodeLine{00376\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00377\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ binToSize(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}})\ \{}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_customize_8h_ab07698dd675204d120111c1300b4185c}{MALLOC\_ASSERT}}(\mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}}\ <=\ \mbox{\hyperlink{class_backend_a96a0e287fc544a79af09b829ce52c2cfaeb9832e9268265781bb8a859d4996326}{HUGE\_BIN}},\ \textcolor{stringliteral}{"{}Invalid\ bin."{}});}
\DoxyCodeLine{00379\ }
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}}*\mbox{\hyperlink{class_backend_aca4bc8d3fa54589aa77863469faf70c7}{freeBinsStep}}\ +\ \mbox{\hyperlink{class_backend_aeeb5d25637dc75cab125b451b0e1aad4a6b460aa14f1375afdf81d5475175898d}{minBinnedSize}};}
\DoxyCodeLine{00381\ \ \ \ \ \}}
\DoxyCodeLine{00382\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00383\ \};}
\DoxyCodeLine{00384\ }
\DoxyCodeLine{00385\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_backend\_H}}

\end{DoxyCode}
