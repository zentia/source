\doxysection{Schema\+Impl.\+cpp}
\hypertarget{avro_2_schema_impl_8cpp_source}{}\label{avro_2_schema_impl_8cpp_source}\index{external/reflect-\/cpp/src/rfl/avro/SchemaImpl.cpp@{external/reflect-\/cpp/src/rfl/avro/SchemaImpl.cpp}}
\mbox{\hyperlink{avro_2_schema_impl_8cpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{avro_2_schema_impl_8hpp}{rfl/avro/SchemaImpl.hpp}}"{}}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacerfl_1_1avro}{rfl::avro}}\ \{}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_af40b67077f4d24fdface612b430b8f7c}{SchemaImpl::SchemaImpl}}(\textcolor{keyword}{const}\ std::string\&\ \_json\_str)}
\DoxyCodeLine{00006\ \ \ \ \ :\ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_a700a0b77ac8e61af1bbc1afc62c70c28}{json\_str\_}}(\_json\_str),}
\DoxyCodeLine{00007\ \ \ \ \ \ \ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_a44f3340627307852becef679b484eb55}{schema\_}}(\mbox{\hyperlink{classrfl_1_1_box}{Box}}<avro\_schema\_t>::make()),}
\DoxyCodeLine{00008\ \ \ \ \ \ \ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_aa05dc8595e66ad106c655dc94ae1dcbf}{iface\_}}(nullptr)\ \{}
\DoxyCodeLine{00009\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ err\ =\ avro\_schema\_from\_json\_length(}
\DoxyCodeLine{00010\ \ \ \ \ \ \ \_json\_str.c\_str(),\ \_json\_str.size(),\ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_a44f3340627307852becef679b484eb55}{schema\_}}.get());}
\DoxyCodeLine{00011\ \ \ \textcolor{keywordflow}{if}\ (err)\ \{}
\DoxyCodeLine{00012\ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(}
\DoxyCodeLine{00013\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Cannot\ create\ schema\ from\ the\ following\ JSON:\ \(\backslash\)"{}"{}}\ +\ \_json\_str\ +}
\DoxyCodeLine{00014\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)"{}:\ "{}}\ +\ avro\_strerror());}
\DoxyCodeLine{00015\ \ \ \}}
\DoxyCodeLine{00016\ \ \ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_aa05dc8595e66ad106c655dc94ae1dcbf}{iface\_}}\ =\ avro\_generic\_class\_from\_schema(*\mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_a44f3340627307852becef679b484eb55}{schema\_}});}
\DoxyCodeLine{00017\ \}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_a1605098e00ffe49abf6379d14d4d4024}{SchemaImpl::\string~SchemaImpl}}()\ \{}
\DoxyCodeLine{00020\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_aa05dc8595e66ad106c655dc94ae1dcbf}{iface\_}})\ \{}
\DoxyCodeLine{00021\ \ \ \ \ avro\_value\_iface\_decref(\mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_aa05dc8595e66ad106c655dc94ae1dcbf}{iface\_}});}
\DoxyCodeLine{00022\ \ \ \ \ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_aa05dc8595e66ad106c655dc94ae1dcbf}{iface\_}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00023\ \ \ \ \ avro\_schema\_decref(*\mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_a44f3340627307852becef679b484eb55}{schema\_}});}
\DoxyCodeLine{00024\ \ \ \}}
\DoxyCodeLine{00025\ \}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_af40b67077f4d24fdface612b430b8f7c}{SchemaImpl::SchemaImpl}}(\mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_af40b67077f4d24fdface612b430b8f7c}{SchemaImpl}}\&\&\ \_other)\ noexcept}
\DoxyCodeLine{00028\ \ \ \ \ :\ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_a700a0b77ac8e61af1bbc1afc62c70c28}{json\_str\_}}(std::move(\_other.json\_str\_)),}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_a44f3340627307852becef679b484eb55}{schema\_}}(std::move(\_other.schema\_)),}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_aa05dc8595e66ad106c655dc94ae1dcbf}{iface\_}}(\_other.iface\_)\ \{}
\DoxyCodeLine{00031\ \ \ \_other.iface\_\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00032\ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_af40b67077f4d24fdface612b430b8f7c}{SchemaImpl}}\&\ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_abd958c3a59904d8288e1193e46e1adb8}{SchemaImpl::operator=}}(\mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_af40b67077f4d24fdface612b430b8f7c}{SchemaImpl}}\&\&\ \_other)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00035\ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{this}\ ==\ \&\_other)\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00037\ \ \ \}}
\DoxyCodeLine{00038\ \ \ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_a700a0b77ac8e61af1bbc1afc62c70c28}{json\_str\_}}\ =\ std::move(\_other.json\_str\_);}
\DoxyCodeLine{00039\ \ \ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_a44f3340627307852becef679b484eb55}{schema\_}}\ =\ std::move(\_other.schema\_);}
\DoxyCodeLine{00040\ \ \ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema_impl_aa05dc8595e66ad106c655dc94ae1dcbf}{iface\_}}\ =\ \_other.iface\_;}
\DoxyCodeLine{00041\ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00042\ \}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \}\ \ \textcolor{comment}{//\ namespace\ rfl::avro}}

\end{DoxyCode}
