\doxysection{msvc\+\_\+ia32\+\_\+common.\+h}
\hypertarget{msvc__ia32__common_8h_source}{}\label{msvc__ia32__common_8h_source}\index{external/taskflow/3rd-\/party/tbb/include/tbb/machine/msvc\_ia32\_common.h@{external/taskflow/3rd-\/party/tbb/include/tbb/machine/msvc\_ia32\_common.h}}
\mbox{\hyperlink{msvc__ia32__common_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#if\ !defined(\_\_TBB\_machine\_H)\ ||\ defined(\_\_TBB\_machine\_msvc\_ia32\_common\_H)}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#error\ Do\ not\ \#include\ this\ internal\ file\ directly;\ use\ public\ TBB\ headers\ instead.}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#define\ \_\_TBB\_machine\_msvc\_ia32\_common\_H}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{intrin_8h}{intrin.h}}>}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{comment}{//TODO:\ consider\ moving\ this\ macro\ to\ tbb\_config.h\ and\ using\ where\ MSVC\ asm\ is\ used}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#if\ \ !\_M\_X64\ ||\ \_\_INTEL\_COMPILER}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_X86\_MSVC\_INLINE\_ASM\_AVAILABLE\ 1}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{comment}{//MSVC\ in\ x64\ mode\ does\ not\ accept\ inline\ assembler}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_X86\_MSVC\_INLINE\_ASM\_AVAILABLE\ 0}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_NO\_X86\_MSVC\_INLINE\_ASM\_MSG\ "{}The\ compiler\ being\ used\ is\ not\ supported\ (outdated?)"{}}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#if\ \_M\_X64}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_r(reg\_name)\ r\#\#reg\_name}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_W(name)\ name\#\#64}}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinternal}{internal}}\ \{\ \textcolor{keyword}{namespace\ }msvc\_intrinsics\ \{}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \_\_int64\ \mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__for_2tachyon_2src_2types_8h_ab612b427d9926b2f9ec00265293fa5b8}{word}};}
\DoxyCodeLine{00039\ \ \ \ \ \}\}\}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_r(reg\_name)\ e\#\#reg\_name}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_W(name)\ name}}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinternal}{internal}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb_1_1internal_1_1msvc__intrinsics}{msvc\_intrinsics}}\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{namespacetbb_1_1internal_1_1msvc__intrinsics_a76f1e5e7407cbc21e22c587895340742}{word}};}
\DoxyCodeLine{00045\ \ \ \ \ \}\}\}}
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#if\ \_\_TBB\_MSVC\_PART\_WORD\_INTERLOCKED\_INTRINSICS\_PRESENT}}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{comment}{//\ S\ is\ the\ operand\ size\ in\ bytes,\ B\ is\ the\ suffix\ for\ intrinsics\ for\ that\ size}}
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_MACHINE\_DEFINE\_ATOMICS(S,B,T,U)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00051\ \textcolor{preprocessor}{\ \ \ \ \_\_pragma(intrinsic(\ \_InterlockedCompareExchange\#\#B\ ))\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00052\ \textcolor{preprocessor}{\ \ \ \ static\ inline\ T\ \_\_TBB\_machine\_cmpswp\#\#S\ (\ volatile\ void\ *\ ptr,\ U\ value,\ U\ comparand\ )\ \{\ \(\backslash\)}}
\DoxyCodeLine{00053\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ return\ \_InterlockedCompareExchange\#\#B\ (\ (T*)ptr,\ value,\ comparand\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00054\ \textcolor{preprocessor}{\ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00055\ \textcolor{preprocessor}{\ \ \ \ \_\_pragma(intrinsic(\ \_InterlockedExchangeAdd\#\#B\ ))\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\ \ \ \ static\ inline\ T\ \_\_TBB\_machine\_fetchadd\#\#S\ (\ volatile\ void\ *\ ptr,\ U\ addend\ )\ \{\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00057\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ return\ \_InterlockedExchangeAdd\#\#B\ (\ (T*)ptr,\ addend\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00058\ \textcolor{preprocessor}{\ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\ \ \ \ \_\_pragma(intrinsic(\ \_InterlockedExchange\#\#B\ ))\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00060\ \textcolor{preprocessor}{\ \ \ \ static\ inline\ T\ \_\_TBB\_machine\_fetchstore\#\#S\ (\ volatile\ void\ *\ ptr,\ U\ value\ )\ \{\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ return\ \_InterlockedExchange\#\#B\ (\ (T*)ptr,\ value\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00062\ \textcolor{preprocessor}{\ \ \ \ \}}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{comment}{//\ Atomic\ intrinsics\ for\ 1,\ 2,\ and\ 4\ bytes\ are\ available\ for\ x86\ \&\ x64}}
\DoxyCodeLine{00065\ \ \ \ \ \mbox{\hyperlink{gcc__generic_8h_a38892374d5d89a0d8d4abbe7a779d84f}{\_\_TBB\_MACHINE\_DEFINE\_ATOMICS}}(1,8,\textcolor{keywordtype}{char},\_\_int8)}
\DoxyCodeLine{00066\ \ \ \ \ \mbox{\hyperlink{gcc__generic_8h_a38892374d5d89a0d8d4abbe7a779d84f}{\_\_TBB\_MACHINE\_DEFINE\_ATOMICS}}(2,16,\textcolor{keywordtype}{short},\_\_int16)}
\DoxyCodeLine{00067\ \ \ \ \ \mbox{\hyperlink{gcc__generic_8h_a38892374d5d89a0d8d4abbe7a779d84f}{\_\_TBB\_MACHINE\_DEFINE\_ATOMICS}}(4,,\textcolor{keywordtype}{long},\_\_int32)}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{preprocessor}{\#if\ \_\_TBB\_WORDSIZE==8}}
\DoxyCodeLine{00070\ \ \ \ \ \mbox{\hyperlink{gcc__generic_8h_a38892374d5d89a0d8d4abbe7a779d84f}{\_\_TBB\_MACHINE\_DEFINE\_ATOMICS}}(8,64,\_\_int64,\_\_int64)}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \textcolor{preprocessor}{\ \ \ \ \#undef\ \_\_TBB\_MACHINE\_DEFINE\_ATOMICS}}
\DoxyCodeLine{00074\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_MSVC\_PART\_WORD\_INTERLOCKED\_INTRINSICS\_PRESENT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \textcolor{preprocessor}{\#if\ \_MSC\_VER>=1300\ ||\ \_\_INTEL\_COMPILER>=1100}}
\DoxyCodeLine{00077\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ intrinsic(\_ReadWriteBarrier)}}
\DoxyCodeLine{00078\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ intrinsic(\_mm\_mfence)}}
\DoxyCodeLine{00079\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_compiler\_fence()\ \ \ \ \_ReadWriteBarrier()}}
\DoxyCodeLine{00080\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_full\_memory\_fence()\ \_mm\_mfence()}}
\DoxyCodeLine{00081\ \textcolor{preprocessor}{\#elif\ \_\_TBB\_X86\_MSVC\_INLINE\_ASM\_AVAILABLE}}
\DoxyCodeLine{00082\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_compiler\_fence()\ \ \ \ \_\_asm\ \{\ \_\_asm\ nop\ \}}}
\DoxyCodeLine{00083\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_full\_memory\_fence()\ \_\_asm\ \{\ \_\_asm\ mfence\ \}}}
\DoxyCodeLine{00084\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00085\ \textcolor{preprocessor}{\ \ \ \ \#error\ Unsupported\ compiler;\ define\ \_\_TBB\_\{control,acquire,release\}\_consistency\_helper\ to\ support\ it}}
\DoxyCodeLine{00086\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \textcolor{preprocessor}{\#define\ \_\_TBB\_control\_consistency\_helper()\ \_\_TBB\_compiler\_fence()}}
\DoxyCodeLine{00089\ \textcolor{preprocessor}{\#define\ \_\_TBB\_acquire\_consistency\_helper()\ \_\_TBB\_compiler\_fence()}}
\DoxyCodeLine{00090\ \textcolor{preprocessor}{\#define\ \_\_TBB\_release\_consistency\_helper()\ \_\_TBB\_compiler\_fence()}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \textcolor{preprocessor}{\#if\ (\_MSC\_VER>=1300)\ ||\ (\_\_INTEL\_COMPILER)}}
\DoxyCodeLine{00093\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ intrinsic(\_mm\_pause)}}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinternal}{internal}}\ \{\ \textcolor{keyword}{namespace\ }msvc\_intrinsics\ \{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacetbb_1_1internal_a0e6673e04bbc548147249def8327420b}{pause}}\ (uintptr\_t\ delay\ )\ \{}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;delay>0;\ -\/-\/delay\ )}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_pause();}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00099\ \ \ \ \ \}\}\}}
\DoxyCodeLine{00100\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_Pause(V)\ tbb::internal::msvc\_intrinsics::pause(V)}}
\DoxyCodeLine{00101\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_SINGLE\_PAUSE\ \_mm\_pause()}}
\DoxyCodeLine{00102\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00103\ \textcolor{preprocessor}{\ \ \ \ \#if\ !\_\_TBB\_X86\_MSVC\_INLINE\_ASM\_AVAILABLE}}
\DoxyCodeLine{00104\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#error\ \_\_TBB\_NO\_X86\_MSVC\_INLINE\_ASM\_MSG}}
\DoxyCodeLine{00105\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb_1_1internal}{internal}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb_1_1internal_1_1msvc__inline__asm}{msvc\_inline\_asm}}}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ static\ inline\ \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}\ \mbox{\hyperlink{namespacetbb_1_1internal_a0e6673e04bbc548147249def8327420b}{pause}}\ (uintptr\_t\ delay\ )\ \{}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \_asm}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mov\ \mbox{\hyperlink{msvc__ia32__common_8h_a56f79286cee674b64beb834397a4b0b5}{\_\_TBB\_r}}(\mbox{\hyperlink{wave_8c_a5f62e300af876f32e1ceef29663b6ec5}{ax}}),\ delay}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_TBB\_L1:}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a0e6673e04bbc548147249def8327420b}{pause}}}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{benchmarks_2hetero__traversal_2graph_8hpp_a9836634ebb2ae079fb18b97205218838}{add}}\ \mbox{\hyperlink{msvc__ia32__common_8h_a56f79286cee674b64beb834397a4b0b5}{\_\_TBB\_r}}(\mbox{\hyperlink{wave_8c_a5f62e300af876f32e1ceef29663b6ec5}{ax}}),\ -\/1}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ jne\ \_\_TBB\_L1}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00118\ \ \ \ \ \}\}\}}
\DoxyCodeLine{00119\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_Pause(V)\ tbb::internal::msvc\_inline\_asm::pause(V)}}
\DoxyCodeLine{00120\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_SINGLE\_PAUSE\ \_\_asm\ pause}}
\DoxyCodeLine{00121\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \textcolor{preprocessor}{\#if\ (\_MSC\_VER>=1400\ \&\&\ !\_\_INTEL\_COMPILER)\ ||\ (\_\_INTEL\_COMPILER>=1200)}}
\DoxyCodeLine{00124\ \textcolor{comment}{//\ MSVC\ did\ not\ have\ this\ intrinsic\ prior\ to\ VC8.}}
\DoxyCodeLine{00125\ \textcolor{comment}{//\ ICL\ 11.1\ fails\ to\ compile\ a\ TBB\ example\ if\ \_\_TBB\_Log2\ uses\ the\ intrinsic.}}
\DoxyCodeLine{00126\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ intrinsic(\_\_TBB\_W(\_BitScanReverse))}}
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinternal}{internal}}\ \{\ \textcolor{keyword}{namespace\ }msvc\_intrinsics\ \{}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ uintptr\_t\ lg\_bsr(\ uintptr\_t\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ )\{}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}};}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{msvc__ia32__common_8h_a3a886817ba18f9b5103314cab8dd7ab5}{\_\_TBB\_W}}(\_BitScanReverse)(\ \&\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}},\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ );}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}};}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00133\ \ \ \ \ \}\}\}}
\DoxyCodeLine{00134\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_Log2(V)\ tbb::internal::msvc\_intrinsics::lg\_bsr(V)}}
\DoxyCodeLine{00135\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00136\ \textcolor{preprocessor}{\ \ \ \ \#if\ !\_\_TBB\_X86\_MSVC\_INLINE\_ASM\_AVAILABLE}}
\DoxyCodeLine{00137\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#error\ \_\_TBB\_NO\_X86\_MSVC\_INLINE\_ASM\_MSG}}
\DoxyCodeLine{00138\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinternal}{internal}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb_1_1internal_1_1msvc__inline__asm}{msvc\_inline\_asm}}\ \{}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ uintptr\_t\ \mbox{\hyperlink{namespacetbb_1_1internal_1_1msvc__inline__asm_abcf367de7ac4cafeb667037668ecab6e}{lg\_bsr}}(\ uintptr\_t\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ )\{}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ uintptr\_t\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}};}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_asm}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bsr\ \mbox{\hyperlink{msvc__ia32__common_8h_a56f79286cee674b64beb834397a4b0b5}{\_\_TBB\_r}}(\mbox{\hyperlink{wave_8c_a5f62e300af876f32e1ceef29663b6ec5}{ax}}),\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mov\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}},\ \mbox{\hyperlink{msvc__ia32__common_8h_a56f79286cee674b64beb834397a4b0b5}{\_\_TBB\_r}}(\mbox{\hyperlink{wave_8c_a5f62e300af876f32e1ceef29663b6ec5}{ax}})}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}};}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00149\ \ \ \ \ \}\}\}}
\DoxyCodeLine{00150\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_Log2(V)\ tbb::internal::msvc\_inline\_asm::lg\_bsr(V)}}
\DoxyCodeLine{00151\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ \textcolor{preprocessor}{\#if\ \_MSC\_VER>=1400}}
\DoxyCodeLine{00154\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ intrinsic(\_\_TBB\_W(\_InterlockedOr))}}
\DoxyCodeLine{00155\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ intrinsic(\_\_TBB\_W(\_InterlockedAnd))}}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinternal}{internal}}\ \{\ \textcolor{keyword}{namespace\ }msvc\_intrinsics\ \{}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ lock\_or(\ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{void}\ *operand,\ intptr\_t\ addend\ )\{}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{msvc__ia32__common_8h_a3a886817ba18f9b5103314cab8dd7ab5}{\_\_TBB\_W}}(\_InterlockedOr)((\textcolor{keyword}{volatile}\ \mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__for_2tachyon_2src_2types_8h_ab612b427d9926b2f9ec00265293fa5b8}{word}}*)operand,\ addend);}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ lock\_and(\ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{void}\ *operand,\ intptr\_t\ addend\ )\{}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{msvc__ia32__common_8h_a3a886817ba18f9b5103314cab8dd7ab5}{\_\_TBB\_W}}(\_InterlockedAnd)((\textcolor{keyword}{volatile}\ \mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__for_2tachyon_2src_2types_8h_ab612b427d9926b2f9ec00265293fa5b8}{word}}*)operand,\ addend);}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00163\ \ \ \ \ \}\}\}}
\DoxyCodeLine{00164\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_AtomicOR(P,V)\ \ tbb::internal::msvc\_intrinsics::lock\_or(P,V)}}
\DoxyCodeLine{00165\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_AtomicAND(P,V)\ tbb::internal::msvc\_intrinsics::lock\_and(P,V)}}
\DoxyCodeLine{00166\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00167\ \textcolor{preprocessor}{\ \ \ \ \#if\ !\_\_TBB\_X86\_MSVC\_INLINE\_ASM\_AVAILABLE}}
\DoxyCodeLine{00168\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#error\ \_\_TBB\_NO\_X86\_MSVC\_INLINE\_ASM\_MSG}}
\DoxyCodeLine{00169\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb_1_1internal}{internal}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb_1_1internal_1_1msvc__inline__asm}{msvc\_inline\_asm}}\ \{}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacetbb_1_1internal_1_1msvc__inline__asm_ae1a4212e7398c40822ab35c29b4ff2de}{lock\_or}}(\ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{void}\ *operand,\ \_\_int32\ addend\ )\ \{}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_asm}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mov\ eax,\ addend}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mov\ edx,\ [operand]}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}\ or\ [edx],\ eax}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacetbb_1_1internal_1_1msvc__inline__asm_a27fa28d2703ca82ca5ff6f52ef8102f9}{lock\_and}}(\ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{void}\ *operand,\ \_\_int32\ addend\ )\ \{}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_asm}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mov\ eax,\ addend}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mov\ edx,\ [operand]}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}\ and\ [edx],\ eax}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00187\ \ \ \ \ \}\}\}}
\DoxyCodeLine{00188\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_AtomicOR(P,V)\ \ tbb::internal::msvc\_inline\_asm::lock\_or(P,V)}}
\DoxyCodeLine{00189\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_AtomicAND(P,V)\ tbb::internal::msvc\_inline\_asm::lock\_and(P,V)}}
\DoxyCodeLine{00190\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \textcolor{preprocessor}{\#pragma\ intrinsic(\_\_rdtsc)}}
\DoxyCodeLine{00193\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinternal}{internal}}\ \{\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{eabase_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\_t}}\ \mbox{\hyperlink{namespacetbb_1_1internal_ae337512716848c8145c750713519a3c8}{machine\_tsc\_t}};\ \}\ \}}
\DoxyCodeLine{00194\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespacetbb_1_1internal_ae337512716848c8145c750713519a3c8}{tbb::internal::machine\_tsc\_t}}\ \mbox{\hyperlink{msvc__ia32__common_8h_a9b1629c8ee357509917aa684fe561947}{\_\_TBB\_machine\_time\_stamp}}()\ \{}
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keywordflow}{return}\ \_\_rdtsc();}
\DoxyCodeLine{00196\ \}}
\DoxyCodeLine{00197\ \textcolor{preprocessor}{\#define\ \_\_TBB\_time\_stamp()\ \_\_TBB\_machine\_time\_stamp()}}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \textcolor{comment}{//\ API\ to\ retrieve/update\ FPU\ control\ setting}}
\DoxyCodeLine{00200\ \textcolor{preprocessor}{\#define\ \_\_TBB\_CPU\_CTL\_ENV\_PRESENT\ 1}}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinternal}{internal}}\ \{\ \textcolor{keyword}{class\ }cpu\_ctl\_env;\ \}\ \}}
\DoxyCodeLine{00203\ \textcolor{preprocessor}{\#if\ \_\_TBB\_X86\_MSVC\_INLINE\_ASM\_AVAILABLE}}
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{msvc__ia32__common_8h_ad69582186c5f297c2b45cab78953af93}{\_\_TBB\_get\_cpu\_ctl\_env}}\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env}{tbb::internal::cpu\_ctl\_env}}*\ ctl\ )\ \{}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \_\_asm\ \{}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_asm\ mov\ \ \ \ \ \mbox{\hyperlink{msvc__ia32__common_8h_a56f79286cee674b64beb834397a4b0b5}{\_\_TBB\_r}}(\mbox{\hyperlink{wave_8c_a5f62e300af876f32e1ceef29663b6ec5}{ax}}),\ ctl}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_asm\ stmxcsr\ [\mbox{\hyperlink{msvc__ia32__common_8h_a56f79286cee674b64beb834397a4b0b5}{\_\_TBB\_r}}(\mbox{\hyperlink{wave_8c_a5f62e300af876f32e1ceef29663b6ec5}{ax}})]}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_asm\ fstcw\ \ \ [\mbox{\hyperlink{msvc__ia32__common_8h_a56f79286cee674b64beb834397a4b0b5}{\_\_TBB\_r}}(\mbox{\hyperlink{wave_8c_a5f62e300af876f32e1ceef29663b6ec5}{ax}})+4]}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00210\ \ \ \ \ \}}
\DoxyCodeLine{00211\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{msvc__ia32__common_8h_ac4182b7725fe52cf40a5539844d36bd1}{\_\_TBB\_set\_cpu\_ctl\_env}}\ (\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env}{tbb::internal::cpu\_ctl\_env}}*\ ctl\ )\ \{}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \_\_asm\ \{}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_asm\ mov\ \ \ \ \ \mbox{\hyperlink{msvc__ia32__common_8h_a56f79286cee674b64beb834397a4b0b5}{\_\_TBB\_r}}(\mbox{\hyperlink{wave_8c_a5f62e300af876f32e1ceef29663b6ec5}{ax}}),\ ctl}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_asm\ ldmxcsr\ [\mbox{\hyperlink{msvc__ia32__common_8h_a56f79286cee674b64beb834397a4b0b5}{\_\_TBB\_r}}(\mbox{\hyperlink{wave_8c_a5f62e300af876f32e1ceef29663b6ec5}{ax}})]}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_asm\ fldcw\ \ \ [\mbox{\hyperlink{msvc__ia32__common_8h_a56f79286cee674b64beb834397a4b0b5}{\_\_TBB\_r}}(\mbox{\hyperlink{wave_8c_a5f62e300af876f32e1ceef29663b6ec5}{ax}})+4]}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00217\ \ \ \ \ \}}
\DoxyCodeLine{00218\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keyword}{extern}\ \textcolor{stringliteral}{"{}C"{}}\ \{}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{scalable__allocator_8h_ab6dd3eee12dcbf8bc4c41513c4c4c9fb}{\_\_TBB\_EXPORTED\_FUNC}}\ \mbox{\hyperlink{msvc__ia32__common_8h_ad69582186c5f297c2b45cab78953af93}{\_\_TBB\_get\_cpu\_ctl\_env}}\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env}{tbb::internal::cpu\_ctl\_env}}*\ );}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{scalable__allocator_8h_ab6dd3eee12dcbf8bc4c41513c4c4c9fb}{\_\_TBB\_EXPORTED\_FUNC}}\ \mbox{\hyperlink{msvc__ia32__common_8h_ac4182b7725fe52cf40a5539844d36bd1}{\_\_TBB\_set\_cpu\_ctl\_env}}\ (\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env}{tbb::internal::cpu\_ctl\_env}}*\ );}
\DoxyCodeLine{00222\ \ \ \ \ \}}
\DoxyCodeLine{00223\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\ \{}
\DoxyCodeLine{00226\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb_1_1internal}{internal}}\ \{}
\DoxyCodeLine{00227\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env}{cpu\_ctl\_env}}\ \{}
\DoxyCodeLine{00228\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env_a48ca737907803058091b6c147954e2ab}{mxcsr}};}
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{keywordtype}{short}\ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env_a713d27adbc89232f955282bfd16d8535}{x87cw}};}
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env_a67c792746625e916a82e42c5a05c92e4}{MXCSR\_CONTROL\_MASK}}\ =\ \string~0x3f;\ \textcolor{comment}{/*\ all\ except\ last\ six\ status\ bits\ */}}
\DoxyCodeLine{00232\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00233\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env_af50bf6d6c3e61363598d42ce31a62fe0}{operator!=}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env_a452a6e875eee2da7d30520a1816104ad}{cpu\_ctl\_env}}\&\ ctl\ )\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env_a48ca737907803058091b6c147954e2ab}{mxcsr}}\ !=\ ctl.mxcsr\ ||\ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env_a713d27adbc89232f955282bfd16d8535}{x87cw}}\ !=\ ctl.x87cw;\ \}}
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env_aaa8736f85328446abb0d9b75a031a12d}{get\_env}}()\ \{}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{msvc__ia32__common_8h_ad69582186c5f297c2b45cab78953af93}{\_\_TBB\_get\_cpu\_ctl\_env}}(\ \textcolor{keyword}{this}\ );}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env_a48ca737907803058091b6c147954e2ab}{mxcsr}}\ \&=\ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env_a67c792746625e916a82e42c5a05c92e4}{MXCSR\_CONTROL\_MASK}};}
\DoxyCodeLine{00237\ \ \ \ \ \}}
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1cpu__ctl__env_a2bef00abf4938dd9ba05d6d7b29551cb}{set\_env}}()\textcolor{keyword}{\ const\ }\{\ \mbox{\hyperlink{msvc__ia32__common_8h_ac4182b7725fe52cf40a5539844d36bd1}{\_\_TBB\_set\_cpu\_ctl\_env}}(\ \textcolor{keyword}{this}\ );\ \}}
\DoxyCodeLine{00239\ \};}
\DoxyCodeLine{00240\ \}\ \textcolor{comment}{//\ namespace\ internal}}
\DoxyCodeLine{00241\ \}\ \textcolor{comment}{//\ namespace\ tbb}}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \textcolor{preprocessor}{\#if\ !\_\_TBB\_WIN8UI\_SUPPORT}}
\DoxyCodeLine{00244\ \textcolor{keyword}{extern}\ \textcolor{stringliteral}{"{}C"{}}\ \mbox{\hyperlink{msvc__ia32__common_8h_ae84bb69ae331f1ba8ab0ff52d8e5ffc8}{\_\_declspec}}(dllimport)\ \textcolor{keywordtype}{int}\ \_\_stdcall\ SwitchToThread(\ \textcolor{keywordtype}{void}\ );}
\DoxyCodeLine{00245\ \textcolor{preprocessor}{\#define\ \_\_TBB\_Yield()\ \ SwitchToThread()}}
\DoxyCodeLine{00246\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00247\ \textcolor{preprocessor}{\#include<thread>}}
\DoxyCodeLine{00248\ \textcolor{preprocessor}{\#define\ \_\_TBB\_Yield()\ \ std::this\_thread::yield()}}
\DoxyCodeLine{00249\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \textcolor{preprocessor}{\#undef\ \_\_TBB\_r}}
\DoxyCodeLine{00252\ \textcolor{preprocessor}{\#undef\ \_\_TBB\_W}}
\DoxyCodeLine{00253\ \textcolor{preprocessor}{\#undef\ \_\_TBB\_word}}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \textcolor{keyword}{extern}\ \textcolor{stringliteral}{"{}C"{}}\ \{}
\DoxyCodeLine{00256\ \ \ \ \ \_\_int8\ \mbox{\hyperlink{scalable__allocator_8h_ab6dd3eee12dcbf8bc4c41513c4c4c9fb}{\_\_TBB\_EXPORTED\_FUNC}}\ \mbox{\hyperlink{msvc__ia32__common_8h_a68283f7a4779d73798a401f1f117ca7a}{\_\_TBB\_machine\_try\_lock\_elided}}\ (\textcolor{keyword}{volatile}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}});}
\DoxyCodeLine{00257\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \mbox{\hyperlink{scalable__allocator_8h_ab6dd3eee12dcbf8bc4c41513c4c4c9fb}{\_\_TBB\_EXPORTED\_FUNC}}\ \mbox{\hyperlink{msvc__ia32__common_8h_ad870f4945d29c9c5b0f3db5abec2dd53}{\_\_TBB\_machine\_unlock\_elided}}\ (\textcolor{keyword}{volatile}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}});}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{comment}{//\ 'pause'\ instruction\ aborts\ HLE/RTM\ transactions}}
\DoxyCodeLine{00260\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{msvc__ia32__common_8h_a0737c9bdf1a04557d066fe023a2bdd93}{\_\_TBB\_machine\_try\_lock\_elided\_cancel}}()\ \{\ \mbox{\hyperlink{msvc__ia32__common_8h_a28a45e433f380de23c39d4e088449f36}{\_\_TBB\_SINGLE\_PAUSE}};\ \}}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TSX\_INTRINSICS\_PRESENT}}
\DoxyCodeLine{00263\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_machine\_is\_in\_transaction\ \_xtest}}
\DoxyCodeLine{00264\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_machine\_begin\_transaction\ \_xbegin}}
\DoxyCodeLine{00265\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_machine\_end\_transaction\ \ \ \_xend}}
\DoxyCodeLine{00266\ \ \ \ \ \textcolor{comment}{//\ The\ value\ (0xFF)\ below\ comes\ from\ the}}
\DoxyCodeLine{00267\ \ \ \ \ \textcolor{comment}{//\ Intel(R)\ 64\ and\ IA-\/32\ Architectures\ Optimization\ Reference\ Manual\ 12.4.5\ lock\ not\ free}}
\DoxyCodeLine{00268\ \textcolor{preprocessor}{\ \ \ \ \#define\ \_\_TBB\_machine\_transaction\_conflict\_abort()\ \_xabort(0xFF)}}
\DoxyCodeLine{00269\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00270\ \ \ \ \ \_\_int8\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{scalable__allocator_8h_ab6dd3eee12dcbf8bc4c41513c4c4c9fb}{\_\_TBB\_EXPORTED\_FUNC}}\ \mbox{\hyperlink{msvc__ia32__common_8h_a0b08d01e4215d1979926cd0722dc53af}{\_\_TBB\_machine\_is\_in\_transaction}}();}
\DoxyCodeLine{00271\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \_\_int32\ \mbox{\hyperlink{scalable__allocator_8h_ab6dd3eee12dcbf8bc4c41513c4c4c9fb}{\_\_TBB\_EXPORTED\_FUNC}}\ \mbox{\hyperlink{msvc__ia32__common_8h_a2f340405cebd7402cc496499a26a92f1}{\_\_TBB\_machine\_begin\_transaction}}();}
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{scalable__allocator_8h_ab6dd3eee12dcbf8bc4c41513c4c4c9fb}{\_\_TBB\_EXPORTED\_FUNC}}\ \mbox{\hyperlink{msvc__ia32__common_8h_a04dc5a4535e9115f5b95bcd449f5c08a}{\_\_TBB\_machine\_end\_transaction}}();}
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{scalable__allocator_8h_ab6dd3eee12dcbf8bc4c41513c4c4c9fb}{\_\_TBB\_EXPORTED\_FUNC}}\ \mbox{\hyperlink{msvc__ia32__common_8h_adb060dbee393950023f1fe45fc37f0f1}{\_\_TBB\_machine\_transaction\_conflict\_abort}}();}
\DoxyCodeLine{00274\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_TSX\_INTRINSICS\_PRESENT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00275\ \}}

\end{DoxyCode}
