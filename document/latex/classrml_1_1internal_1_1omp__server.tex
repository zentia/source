\doxysection{rml\+::internal\+::omp\+\_\+server类 参考}
\hypertarget{classrml_1_1internal_1_1omp__server}{}\label{classrml_1_1internal_1_1omp__server}\index{rml::internal::omp\_server@{rml::internal::omp\_server}}


Represents a set of omp worker threads provided by the server.  




{\ttfamily \#include $<$rml\+\_\+omp.\+h$>$}



类 rml\+::internal\+::omp\+\_\+server 继承关系图\+:
% FIG 0


rml\+::internal\+::omp\+\_\+server 的协作图\+:
% FIG 1
\doxysubsubsection*{Public 类型}
\begin{DoxyCompactItemize}
\item 
typedef unsigned \mbox{\hyperlink{classrml_1_1internal_1_1omp__server_a57f7e7cc71ec562fcb379da256cdffb0}{size\+\_\+type}}
\begin{DoxyCompactList}\small\item\em \doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} number of coins (i.\+e., threads) \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public 类型 继承自 \mbox{\hyperlink{classrml_1_1server}{rml\+::server}}}
\begin{DoxyCompactItemize}
\item 
typedef \mbox{\hyperlink{classrml_1_1job}{\+::rml\+::job}} \mbox{\hyperlink{classrml_1_1server_ac812e52a5bb3de275e624c36997eac0e}{job}}
\begin{DoxyCompactList}\small\item\em Typedef for convenience of derived classes. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public 类型 继承自 \mbox{\hyperlink{classrml_1_1versioned__object}{rml\+::versioned\+\_\+object}}}
\begin{DoxyCompactItemize}
\item 
typedef unsigned \mbox{\hyperlink{classrml_1_1versioned__object_a759650010b271238ef9433442730c423}{version\+\_\+type}}
\begin{DoxyCompactList}\small\item\em \doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} version number \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
virtual \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{classrml_1_1internal_1_1omp__server_ae8f562bcfe58701da8fcb7de0f072e7c}{current\+\_\+balance}} () const=0
\begin{DoxyCompactList}\small\item\em Return the number of coins in the bank. (negative if machine is oversubscribed). \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{classrml_1_1internal_1_1omp__server_acc039131c85db996a1e83fb43e061da1}{try\+\_\+increase\+\_\+load}} (\mbox{\hyperlink{classrml_1_1internal_1_1omp__server_a57f7e7cc71ec562fcb379da256cdffb0}{size\+\_\+type}}, \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}})=0
\begin{DoxyCompactList}\small\item\em Request n coins. Returns number of coins granted. Oversubscription amount if negative. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classrml_1_1internal_1_1omp__server_a193f20e658a19979377af2bfcb544a2b}{decrease\+\_\+load}} (\mbox{\hyperlink{classrml_1_1internal_1_1omp__server_a57f7e7cc71ec562fcb379da256cdffb0}{size\+\_\+type}})=0
\begin{DoxyCompactList}\small\item\em Return n coins into the bank. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classrml_1_1internal_1_1omp__server_a7ab8dbd3c94a50c907b2aba731c438a8}{get\+\_\+threads}} (\mbox{\hyperlink{classrml_1_1internal_1_1omp__server_a57f7e7cc71ec562fcb379da256cdffb0}{size\+\_\+type}}, \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}, \mbox{\hyperlink{classrml_1_1server_ac812e52a5bb3de275e624c36997eac0e}{job}} \texorpdfstring{$\ast$}{*}\mbox{[}$\,$\mbox{]})=0
\begin{DoxyCompactList}\small\item\em Convert n coins into n threads. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public 成员函数 继承自 \mbox{\hyperlink{classrml_1_1server}{rml\+::server}}}
\begin{DoxyCompactItemize}
\item 
virtual \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classrml_1_1server_a3119d8d6c2d17932610653f6fda4f87a}{request\+\_\+close\+\_\+connection}} (\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} exiting=\mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}})=0
\begin{DoxyCompactList}\small\item\em Request that connection to server be closed. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classrml_1_1server_a53e1efc4cb441f962e14af14e49b9fba}{yield}} ()=0
\begin{DoxyCompactList}\small\item\em Called by client thread when it reaches a point where it cannot make progress until other threads do. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classrml_1_1server_a45154e61e7c6b60b51d53dacd1d03c2f}{independent\+\_\+thread\+\_\+number\+\_\+changed}} (\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} delta)=0
\begin{DoxyCompactList}\small\item\em Called by client to indicate a change in the number of non-\/\+RML threads that are running. \end{DoxyCompactList}\item 
virtual unsigned \mbox{\hyperlink{classrml_1_1server_ab724107e297226ef26538315091a50b1}{default\+\_\+concurrency}} () const =0
\begin{DoxyCompactList}\small\item\em Default level of concurrency for which RML strives when there are no non-\/\+RML threads running. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{额外继承的成员函数}
\doxysubsection*{静态 Protected 成员函数 继承自 \mbox{\hyperlink{classrml_1_1server}{rml\+::server}}}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}\& \mbox{\hyperlink{classrml_1_1server_a47652c7b5e9f14341264bdf5b5fa7aca}{scratch\+\_\+ptr}} (\mbox{\hyperlink{classrml_1_1server_ac812e52a5bb3de275e624c36997eac0e}{job}} \&\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
Represents a set of omp worker threads provided by the server. 

\doxysubsection{成员类型定义说明}
\Hypertarget{classrml_1_1internal_1_1omp__server_a57f7e7cc71ec562fcb379da256cdffb0}\index{rml::internal::omp\_server@{rml::internal::omp\_server}!size\_type@{size\_type}}
\index{size\_type@{size\_type}!rml::internal::omp\_server@{rml::internal::omp\_server}}
\doxysubsubsection{\texorpdfstring{size\_type}{size\_type}}
{\footnotesize\ttfamily \label{classrml_1_1internal_1_1omp__server_a57f7e7cc71ec562fcb379da256cdffb0} 
typedef unsigned \mbox{\hyperlink{class____kmp_1_1rml_1_1omp__server_a57f7e7cc71ec562fcb379da256cdffb0}{\+\_\+\+\_\+kmp\+::rml\+::omp\+\_\+server\+::size\+\_\+type}}}



\doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} number of coins (i.\+e., threads) 



\doxysubsection{成员函数说明}
\Hypertarget{classrml_1_1internal_1_1omp__server_ae8f562bcfe58701da8fcb7de0f072e7c}\index{rml::internal::omp\_server@{rml::internal::omp\_server}!current\_balance@{current\_balance}}
\index{current\_balance@{current\_balance}!rml::internal::omp\_server@{rml::internal::omp\_server}}
\doxysubsubsection{\texorpdfstring{current\_balance()}{current\_balance()}}
{\footnotesize\ttfamily \label{classrml_1_1internal_1_1omp__server_ae8f562bcfe58701da8fcb7de0f072e7c} 
virtual \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \+\_\+\+\_\+kmp\+::rml\+::omp\+\_\+server\+::current\+\_\+balance (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}



Return the number of coins in the bank. (negative if machine is oversubscribed). 

\Hypertarget{classrml_1_1internal_1_1omp__server_a193f20e658a19979377af2bfcb544a2b}\index{rml::internal::omp\_server@{rml::internal::omp\_server}!decrease\_load@{decrease\_load}}
\index{decrease\_load@{decrease\_load}!rml::internal::omp\_server@{rml::internal::omp\_server}}
\doxysubsubsection{\texorpdfstring{decrease\_load()}{decrease\_load()}}
{\footnotesize\ttfamily \label{classrml_1_1internal_1_1omp__server_a193f20e658a19979377af2bfcb544a2b} 
virtual \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \+\_\+\+\_\+kmp\+::rml\+::omp\+\_\+server\+::decrease\+\_\+load (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classrml_1_1internal_1_1omp__server_a57f7e7cc71ec562fcb379da256cdffb0}{size\+\_\+type}}}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



Return n coins into the bank. 

\Hypertarget{classrml_1_1internal_1_1omp__server_a7ab8dbd3c94a50c907b2aba731c438a8}\index{rml::internal::omp\_server@{rml::internal::omp\_server}!get\_threads@{get\_threads}}
\index{get\_threads@{get\_threads}!rml::internal::omp\_server@{rml::internal::omp\_server}}
\doxysubsubsection{\texorpdfstring{get\_threads()}{get\_threads()}}
{\footnotesize\ttfamily \label{classrml_1_1internal_1_1omp__server_a7ab8dbd3c94a50c907b2aba731c438a8} 
virtual \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \+\_\+\+\_\+kmp\+::rml\+::omp\+\_\+server\+::get\+\_\+threads (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classrml_1_1internal_1_1omp__server_a57f7e7cc71ec562fcb379da256cdffb0}{size\+\_\+type}}}]{}{, }\item[{\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}}]{}{, }\item[{\mbox{\hyperlink{classrml_1_1server_ac812e52a5bb3de275e624c36997eac0e}{job}} \texorpdfstring{$\ast$}{*}}]{}{\mbox{[}$\,$\mbox{]}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



Convert n coins into n threads. 

When a thread returns, it is converted back into a coin and the coin is returned to the bank. \Hypertarget{classrml_1_1internal_1_1omp__server_acc039131c85db996a1e83fb43e061da1}\index{rml::internal::omp\_server@{rml::internal::omp\_server}!try\_increase\_load@{try\_increase\_load}}
\index{try\_increase\_load@{try\_increase\_load}!rml::internal::omp\_server@{rml::internal::omp\_server}}
\doxysubsubsection{\texorpdfstring{try\_increase\_load()}{try\_increase\_load()}}
{\footnotesize\ttfamily \label{classrml_1_1internal_1_1omp__server_acc039131c85db996a1e83fb43e061da1} 
virtual \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \+\_\+\+\_\+kmp\+::rml\+::omp\+\_\+server\+::try\+\_\+increase\+\_\+load (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classrml_1_1internal_1_1omp__server_a57f7e7cc71ec562fcb379da256cdffb0}{size\+\_\+type}}}]{}{, }\item[{\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



Request n coins. Returns number of coins granted. Oversubscription amount if negative. 

Always granted if is\+\_\+strict is true.
\begin{DoxyItemize}
\item Positive or zero result indicates that the number of coins was taken from the bank.
\item Negative result indicates that no coins were taken, and that the bank has deficit by that amount and the caller (if being a good citizen) should return that many coins. 
\end{DoxyItemize}

该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/taskflow/3rd-\/party/tbb/src/rml/include/\mbox{\hyperlink{rml__omp_8h}{rml\+\_\+omp.\+h}}\end{DoxyCompactItemize}
