\doxysection{topology.\+hpp}
\hypertarget{topology_8hpp_source}{}\label{topology_8hpp_source}\index{external/taskflow/taskflow/core/topology.hpp@{external/taskflow/taskflow/core/topology.hpp}}
\mbox{\hyperlink{topology_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetf}{tf}}\ \{}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtf_1_1_topology_base}{TopologyBase}}\ \{}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \};}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{comment}{//\ class:\ Topology}}
\DoxyCodeLine{00012\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtf_1_1_topology_a44d77602d75ba4a006cd7f0149d0dad6}{Topology}}\ \{}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtf_1_1_topology_a763b2f90bc53f92d680a635fe28e858e}{Executor}};}
\DoxyCodeLine{00015\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtf_1_1_topology_aa48945297ede77a161defc88033ce8a6}{Subflow}};}
\DoxyCodeLine{00016\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtf_1_1_topology_af3d14e26ba8af9e6cc5a32aad8446de7}{Runtime}};}
\DoxyCodeLine{00017\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtf_1_1_topology_a6db9d28bd448a131448276ee03de1e6d}{Node}};}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00020\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtf_1_1_topology_ab033f7626ddfc7f1d62cb3d3952d166e}{Future}};}
\DoxyCodeLine{00021\ \ \ }
\DoxyCodeLine{00022\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ P,\ \textcolor{keyword}{typename}\ C>}
\DoxyCodeLine{00025\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_topology_a44d77602d75ba4a006cd7f0149d0dad6}{Topology}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&,\ \mbox{\hyperlink{namespace_p}{P}}\&\&,\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\&\&);}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classtf_1_1_topology_a5f3f05242bb1c9f2a168fc124fccec6f}{cancelled}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\ \mbox{\hyperlink{classtf_1_1_topology_a897e6f0d054ce61dc4f09a7e4e6823a0}{\_taskflow}};}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \ \ std::promise<void>\ \mbox{\hyperlink{classtf_1_1_topology_a1f59434af79271347f0bf5626f24c0f4}{\_promise}};}
\DoxyCodeLine{00034\ \ \ \ \ }
\DoxyCodeLine{00035\ \ \ \ \ std::function<\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}()>\ \mbox{\hyperlink{classtf_1_1_topology_aee767b9e6976364be61dbd2bfb694aeb}{\_pred}};}
\DoxyCodeLine{00036\ \ \ \ \ std::function<\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}()>\ \mbox{\hyperlink{classtf_1_1_topology_a664b7112a78b646e501f54e04c83b81c}{\_call}};}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ std::atomic<size\_t>\ \mbox{\hyperlink{classtf_1_1_topology_aac4bb4712d3e86c529d2580b270a3bb9}{\_join\_counter}}\ \{0\};}
\DoxyCodeLine{00039\ \ \ \ \ std::atomic<ESTATE::underlying\_type>\ \mbox{\hyperlink{classtf_1_1_topology_aa5c99e9e50217bae675e9c9b1c59b266}{\_estate}}\ \{\mbox{\hyperlink{structtf_1_1_e_s_t_a_t_e_a9a8cf630467f60943d7e9488e095619c}{ESTATE::NONE}}\};}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ std::exception\_ptr\ \mbox{\hyperlink{classtf_1_1_topology_afb35e17e5936fcc95d11e1e0a264b655}{\_exception\_ptr}}\ \{\textcolor{keyword}{nullptr}\};}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_topology_a74b929600de8118c93fb7c4b02ea8197}{\_carry\_out\_promise}}();}
\DoxyCodeLine{00044\ \};}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \textcolor{comment}{//\ Constructor}}
\DoxyCodeLine{00047\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ P,\ \textcolor{keyword}{typename}\ C>}
\DoxyCodeLine{00048\ \mbox{\hyperlink{classtf_1_1_topology_a44d77602d75ba4a006cd7f0149d0dad6}{Topology::Topology}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\ \mbox{\hyperlink{namespacetf}{tf}},\ \mbox{\hyperlink{namespace_p}{P}}\&\&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\&\&\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}):}
\DoxyCodeLine{00049\ \ \ \mbox{\hyperlink{classtf_1_1_topology_a897e6f0d054ce61dc4f09a7e4e6823a0}{\_taskflow}}(\mbox{\hyperlink{namespacetf}{tf}}),}
\DoxyCodeLine{00050\ \ \ \mbox{\hyperlink{classtf_1_1_topology_aee767b9e6976364be61dbd2bfb694aeb}{\_pred}}\ \{\mbox{\hyperlink{namespacestd}{std}}::forward<\mbox{\hyperlink{namespace_p}{P}}>(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})\},}
\DoxyCodeLine{00051\ \ \ \mbox{\hyperlink{classtf_1_1_topology_a664b7112a78b646e501f54e04c83b81c}{\_call}}\ \{\mbox{\hyperlink{namespacestd}{std}}::forward<\mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}>(\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}})\}\ \{}
\DoxyCodeLine{00052\ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \textcolor{comment}{//\ Procedure}}
\DoxyCodeLine{00055\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_topology_a74b929600de8118c93fb7c4b02ea8197}{Topology::\_carry\_out\_promise}}()\ \{}
\DoxyCodeLine{00056\ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classtf_1_1_topology_afb35e17e5936fcc95d11e1e0a264b655}{\_exception\_ptr}})\ \{}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}}\ =\ \mbox{\hyperlink{classtf_1_1_topology_afb35e17e5936fcc95d11e1e0a264b655}{\_exception\_ptr}};}
\DoxyCodeLine{00058\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_topology_afb35e17e5936fcc95d11e1e0a264b655}{\_exception\_ptr}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00059\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_topology_a1f59434af79271347f0bf5626f24c0f4}{\_promise}}.set\_exception(\mbox{\hyperlink{_cwise__array__power__array_8cpp_a9cb86ff854760bf91a154f2724a9101d}{e}});}
\DoxyCodeLine{00060\ \ \ \}}
\DoxyCodeLine{00061\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_topology_a1f59434af79271347f0bf5626f24c0f4}{\_promise}}.set\_value();}
\DoxyCodeLine{00063\ \ \ \}}
\DoxyCodeLine{00064\ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \textcolor{comment}{//\ Function:\ cancelled}}
\DoxyCodeLine{00067\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classtf_1_1_topology_a5f3f05242bb1c9f2a168fc124fccec6f}{Topology::cancelled}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00068\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_topology_aa5c99e9e50217bae675e9c9b1c59b266}{\_estate}}.load(std::memory\_order\_relaxed)\ \&\ \mbox{\hyperlink{structtf_1_1_e_s_t_a_t_e_ae92195b40bc77230a48ffa90b89f4539}{ESTATE::CANCELLED}};}
\DoxyCodeLine{00069\ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \}\ \ \textcolor{comment}{//\ end\ of\ namespace\ tf.\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}

\end{DoxyCode}
