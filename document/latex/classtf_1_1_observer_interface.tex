\doxysection{tf\+::Observer\+Interface类 参考}
\hypertarget{classtf_1_1_observer_interface}{}\label{classtf_1_1_observer_interface}\index{tf::ObserverInterface@{tf::ObserverInterface}}


class to derive an executor observer  




{\ttfamily \#include $<$observer.\+hpp$>$}



类 tf\+::Observer\+Interface 继承关系图\+:
% FIG 0
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
virtual \mbox{\hyperlink{classtf_1_1_observer_interface_adfd71c3af3ae2ea4f41eed26c1b6f604}{\texorpdfstring{$\sim$}{\string~}\+Observer\+Interface}} ()=\mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}}
\begin{DoxyCompactList}\small\item\em virtual destructor \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1_observer_interface_a41e6e62f12bf9d9dc4fa74632f6825d9}{set\+\_\+up}} (size\+\_\+t num\+\_\+workers)=0
\begin{DoxyCompactList}\small\item\em constructor-\/like method to call when the executor observer is fully created \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1_observer_interface_a8225fcacb03089677a1efc4b16b734cc}{on\+\_\+entry}} (\mbox{\hyperlink{classtf_1_1_worker_view}{Worker\+View}} wv, \mbox{\hyperlink{classtf_1_1_task_view}{Task\+View}} task\+\_\+view)=0
\begin{DoxyCompactList}\small\item\em method to call before a worker thread executes a closure \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1_observer_interface_aa22f5378154653f08d9a58326bda4754}{on\+\_\+exit}} (\mbox{\hyperlink{classtf_1_1_worker_view}{Worker\+View}} wv, \mbox{\hyperlink{classtf_1_1_task_view}{Task\+View}} task\+\_\+view)=0
\begin{DoxyCompactList}\small\item\em method to call after a worker thread executed a closure \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
class to derive an executor observer 

The \doxylink{classtf_1_1_observer_interface}{tf\+::\+Observer\+Interface} class allows users to define custom methods to monitor the behaviors of an executor. This is particularly useful when you want to inspect the performance of an executor and visualize when each thread participates in the execution of a task. To prevent users from direct access to the internal threads and tasks, \doxylink{classtf_1_1_observer_interface}{tf\+::\+Observer\+Interface} provides immutable wrappers, \doxylink{classtf_1_1_worker_view}{tf\+::\+Worker\+View} and \doxylink{classtf_1_1_task_view}{tf\+::\+Task\+View}, over workers and tasks.

Please refer to \doxylink{classtf_1_1_worker_view}{tf\+::\+Worker\+View} and \doxylink{classtf_1_1_task_view}{tf\+::\+Task\+View} for details.

Example usage\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct\ }MyObserver\ :\ \textcolor{keyword}{public}\ tf::ObserverInterface\ \{}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ MyObserver(\textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}})\ \{}
\DoxyCodeLine{\ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}constructing\ observer\ "{}}\ <<\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}}\ <<\ \textcolor{charliteral}{'\(\backslash\)n'};}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keywordtype}{void}\ set\_up(\textcolor{keywordtype}{size\_t}\ num\_workers)\ \textcolor{keyword}{override}\ \textcolor{keyword}{final}\ \{}
\DoxyCodeLine{\ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}setting\ up\ observer\ with\ "{}}\ <<\ num\_workers\ <<\ \textcolor{stringliteral}{"{}\ workers\(\backslash\)n"{}};}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keywordtype}{void}\ on\_entry(WorkerView\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ tf::TaskView\ tv)\ \textcolor{keyword}{override}\ \textcolor{keyword}{final}\ \{}
\DoxyCodeLine{\ \ \ \ std::ostringstream\ oss;}
\DoxyCodeLine{\ \ \ \ oss\ <<\ \textcolor{stringliteral}{"{}worker\ "{}}\ <<\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.id()\ <<\ \textcolor{stringliteral}{"{}\ ready\ to\ run\ "{}}\ <<\ tv.name()\ <<\ \textcolor{charliteral}{'\(\backslash\)n'};}
\DoxyCodeLine{\ \ \ \ std::cout\ <<\ oss.str();}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keywordtype}{void}\ on\_exit(WorkerView\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ tf::TaskView\ tv)\ \textcolor{keyword}{override}\ \textcolor{keyword}{final}\ \{}
\DoxyCodeLine{\ \ \ \ std::ostringstream\ oss;}
\DoxyCodeLine{\ \ \ \ oss\ <<\ \textcolor{stringliteral}{"{}worker\ "{}}\ <<\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.id()\ <<\ \textcolor{stringliteral}{"{}\ finished\ running\ "{}}\ <<\ tv.name()\ <<\ \textcolor{charliteral}{'\(\backslash\)n'};}
\DoxyCodeLine{\ \ \ \ std::cout\ <<\ oss.str();}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{\ \ }
\DoxyCodeLine{tf::Taskflow\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}};}
\DoxyCodeLine{tf::Executor\ \mbox{\hyperlink{thread__pool_8cpp_a543e564a8407bbeac15cb2d929fec755}{executor}};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ insert\ tasks\ into\ taskflow}}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}
\DoxyCodeLine{\ \ }
\DoxyCodeLine{\textcolor{comment}{//\ create\ a\ custom\ observer}}
\DoxyCodeLine{std::shared\_ptr<MyObserver>\ \mbox{\hyperlink{test__basics_8cpp_ae362ef40752341c76d5edd1d99e46918}{observer}}\ =\ \mbox{\hyperlink{thread__pool_8cpp_a543e564a8407bbeac15cb2d929fec755}{executor}}.\mbox{\hyperlink{classtf_1_1_executor_aff77def96ae740d648dd84e571237c83}{make\_observer}}<MyObserver>(\textcolor{stringliteral}{"{}MyObserver"{}});}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ run\ the\ taskflow}}
\DoxyCodeLine{\mbox{\hyperlink{thread__pool_8cpp_a543e564a8407bbeac15cb2d929fec755}{executor}}.\mbox{\hyperlink{classtf_1_1_executor_a519777f5783981d534e9e53b99712069}{run}}(\mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}}).wait();}

\end{DoxyCode}
 

\doxysubsection{构造及析构函数说明}
\Hypertarget{classtf_1_1_observer_interface_adfd71c3af3ae2ea4f41eed26c1b6f604}\index{tf::ObserverInterface@{tf::ObserverInterface}!````~ObserverInterface@{\texorpdfstring{$\sim$}{\string~}ObserverInterface}}
\index{````~ObserverInterface@{\texorpdfstring{$\sim$}{\string~}ObserverInterface}!tf::ObserverInterface@{tf::ObserverInterface}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}ObserverInterface()}{\string~ObserverInterface()}}
{\footnotesize\ttfamily \label{classtf_1_1_observer_interface_adfd71c3af3ae2ea4f41eed26c1b6f604} 
virtual tf\+::\+Observer\+Interface\+::\texorpdfstring{$\sim$}{\string~}\+Observer\+Interface (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}, {\ttfamily [default]}}



virtual destructor 



\doxysubsection{成员函数说明}
\Hypertarget{classtf_1_1_observer_interface_a8225fcacb03089677a1efc4b16b734cc}\index{tf::ObserverInterface@{tf::ObserverInterface}!on\_entry@{on\_entry}}
\index{on\_entry@{on\_entry}!tf::ObserverInterface@{tf::ObserverInterface}}
\doxysubsubsection{\texorpdfstring{on\_entry()}{on\_entry()}}
{\footnotesize\ttfamily \label{classtf_1_1_observer_interface_a8225fcacb03089677a1efc4b16b734cc} 
virtual \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tf\+::\+Observer\+Interface\+::on\+\_\+entry (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtf_1_1_worker_view}{Worker\+View}}}]{wv}{, }\item[{\mbox{\hyperlink{classtf_1_1_task_view}{Task\+View}}}]{task\+\_\+view}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



method to call before a worker thread executes a closure 


\begin{DoxyParams}{参数}
{\em wv} & an immutable view of this worker thread \\
\hline
{\em task\+\_\+view} & a constant wrapper object to the task \\
\hline
\end{DoxyParams}


在 \mbox{\hyperlink{class_my_observer_a70ea26423c0444f0beb937913008f53a}{My\+Observer}}, \mbox{\hyperlink{classtf_1_1_chrome_observer_a6fa502ca5ef6bfb9d2168db190125855}{tf\+::\+Chrome\+Observer}} , 以及 \mbox{\hyperlink{classtf_1_1_t_f_prof_observer_a5debfce27f7e012d22872c134b261c63}{tf\+::\+TFProf\+Observer}} 内被实现.

\Hypertarget{classtf_1_1_observer_interface_aa22f5378154653f08d9a58326bda4754}\index{tf::ObserverInterface@{tf::ObserverInterface}!on\_exit@{on\_exit}}
\index{on\_exit@{on\_exit}!tf::ObserverInterface@{tf::ObserverInterface}}
\doxysubsubsection{\texorpdfstring{on\_exit()}{on\_exit()}}
{\footnotesize\ttfamily \label{classtf_1_1_observer_interface_aa22f5378154653f08d9a58326bda4754} 
virtual \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tf\+::\+Observer\+Interface\+::on\+\_\+exit (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtf_1_1_worker_view}{Worker\+View}}}]{wv}{, }\item[{\mbox{\hyperlink{classtf_1_1_task_view}{Task\+View}}}]{task\+\_\+view}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



method to call after a worker thread executed a closure 


\begin{DoxyParams}{参数}
{\em wv} & an immutable view of this worker thread \\
\hline
{\em task\+\_\+view} & a constant wrapper object to the task \\
\hline
\end{DoxyParams}


在 \mbox{\hyperlink{class_my_observer_a071aacfb114f54c35e7d3f8f993b452b}{My\+Observer}}, \mbox{\hyperlink{classtf_1_1_chrome_observer_a62ae8c50814d285d29e50a322461a803}{tf\+::\+Chrome\+Observer}} , 以及 \mbox{\hyperlink{classtf_1_1_t_f_prof_observer_af3a1630b5b1db5341a239a5d4c12c891}{tf\+::\+TFProf\+Observer}} 内被实现.

\Hypertarget{classtf_1_1_observer_interface_a41e6e62f12bf9d9dc4fa74632f6825d9}\index{tf::ObserverInterface@{tf::ObserverInterface}!set\_up@{set\_up}}
\index{set\_up@{set\_up}!tf::ObserverInterface@{tf::ObserverInterface}}
\doxysubsubsection{\texorpdfstring{set\_up()}{set\_up()}}
{\footnotesize\ttfamily \label{classtf_1_1_observer_interface_a41e6e62f12bf9d9dc4fa74632f6825d9} 
virtual \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tf\+::\+Observer\+Interface\+::set\+\_\+up (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{num\+\_\+workers}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



constructor-\/like method to call when the executor observer is fully created 


\begin{DoxyParams}{参数}
{\em num\+\_\+workers} & the number of the worker threads in the executor \\
\hline
\end{DoxyParams}


在 \mbox{\hyperlink{class_my_observer_a5fa49c70a8e0e66f87922445a14b110a}{My\+Observer}}, \mbox{\hyperlink{classtf_1_1_chrome_observer_aa8d5d9c3d0de7e7006d27079d8eb3888}{tf\+::\+Chrome\+Observer}} , 以及 \mbox{\hyperlink{classtf_1_1_t_f_prof_observer_aa030d8154dd03aea3b8fa8ce42e1151b}{tf\+::\+TFProf\+Observer}} 内被实现.



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/taskflow/taskflow/core/\mbox{\hyperlink{observer_8hpp}{observer.\+hpp}}\end{DoxyCompactItemize}
