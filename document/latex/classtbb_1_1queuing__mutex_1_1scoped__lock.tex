\doxysection{tbb\+::queuing\+\_\+mutex\+::scoped\+\_\+lock类 参考}
\hypertarget{classtbb_1_1queuing__mutex_1_1scoped__lock}{}\label{classtbb_1_1queuing__mutex_1_1scoped__lock}\index{tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}}


The scoped locking pattern  




{\ttfamily \#include $<$queuing\+\_\+mutex.\+h$>$}



类 tbb\+::queuing\+\_\+mutex\+::scoped\+\_\+lock 继承关系图\+:
% FIG 0


tbb\+::queuing\+\_\+mutex\+::scoped\+\_\+lock 的协作图\+:
% FIG 1
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtbb_1_1queuing__mutex_1_1scoped__lock_a0afe0107eb0aae613e726f67624d2fca}{scoped\+\_\+lock}} ()
\begin{DoxyCompactList}\small\item\em Construct lock that has not acquired a mutex. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtbb_1_1queuing__mutex_1_1scoped__lock_aa82d9da0dcfe5b21f1c08473f8223105}{scoped\+\_\+lock}} (\mbox{\hyperlink{classtbb_1_1queuing__mutex}{queuing\+\_\+mutex}} \&\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}})
\begin{DoxyCompactList}\small\item\em Acquire lock on given mutex. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtbb_1_1queuing__mutex_1_1scoped__lock_a469ec43836a8dd250ce0a22b02945630}{\texorpdfstring{$\sim$}{\string~}scoped\+\_\+lock}} ()
\begin{DoxyCompactList}\small\item\em Release lock (if lock is held). \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{tbb__stddef_8h_a7a1df7e6f83415a1624716541dc4b741}{\+\_\+\+\_\+\+TBB\+\_\+\+EXPORTED\+\_\+\+METHOD}} \mbox{\hyperlink{classtbb_1_1queuing__mutex_1_1scoped__lock_ac6b9289521c6b7568eedc8e0ff4e96d8}{acquire}} (\mbox{\hyperlink{classtbb_1_1queuing__mutex}{queuing\+\_\+mutex}} \&\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}})
\begin{DoxyCompactList}\small\item\em Acquire lock on given mutex. \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{tbb__stddef_8h_a7a1df7e6f83415a1624716541dc4b741}{\+\_\+\+\_\+\+TBB\+\_\+\+EXPORTED\+\_\+\+METHOD}} \mbox{\hyperlink{classtbb_1_1queuing__mutex_1_1scoped__lock_aa35c2a7b36eb58201a804be7a36b4ccd}{try\+\_\+acquire}} (\mbox{\hyperlink{classtbb_1_1queuing__mutex}{queuing\+\_\+mutex}} \&\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}})
\begin{DoxyCompactList}\small\item\em Acquire lock on given mutex if free (i.\+e. non-\/blocking) \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{tbb__stddef_8h_a7a1df7e6f83415a1624716541dc4b741}{\+\_\+\+\_\+\+TBB\+\_\+\+EXPORTED\+\_\+\+METHOD}} \mbox{\hyperlink{classtbb_1_1queuing__mutex_1_1scoped__lock_a75112bddb38e011e9cfa69695050c771}{release}} ()
\begin{DoxyCompactList}\small\item\em Release lock. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1queuing__mutex_1_1scoped__lock_a59f276bc4fe30ca24998fc8b1693b0b9}{initialize}} ()
\begin{DoxyCompactList}\small\item\em Initialize fields to mean "{}no lock held"{}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private 属性}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtbb_1_1queuing__mutex}{queuing\+\_\+mutex}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classtbb_1_1queuing__mutex_1_1scoped__lock_a9219187a11dc1db2f06e6f8a974ecdc4}{mutex}}
\begin{DoxyCompactList}\small\item\em The pointer to the mutex owned, or NULL if not holding a mutex. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtbb_1_1queuing__mutex_1_1scoped__lock}{scoped\+\_\+lock}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classtbb_1_1queuing__mutex_1_1scoped__lock_ab4879d19847f1f52b832e54cb179a4c1}{next}}
\begin{DoxyCompactList}\small\item\em The pointer to the next competitor for a mutex \end{DoxyCompactList}\item 
uintptr\+\_\+t \mbox{\hyperlink{classtbb_1_1queuing__mutex_1_1scoped__lock_a48b37b0b590a9286b5a64493edbfa6bf}{going}}
\begin{DoxyCompactList}\small\item\em The local spin-\/wait variable \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
The scoped locking pattern 

It helps to avoid the common problem of forgetting to release lock. It also nicely provides the "{}node"{} for queuing locks. 

\doxysubsection{构造及析构函数说明}
\Hypertarget{classtbb_1_1queuing__mutex_1_1scoped__lock_a0afe0107eb0aae613e726f67624d2fca}\index{tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}!scoped\_lock@{scoped\_lock}}
\index{scoped\_lock@{scoped\_lock}!tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{scoped\_lock()}{scoped\_lock()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__mutex_1_1scoped__lock_a0afe0107eb0aae613e726f67624d2fca} 
tbb\+::queuing\+\_\+mutex\+::scoped\+\_\+lock\+::scoped\+\_\+lock (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Construct lock that has not acquired a mutex. 

Equivalent to zero-\/initialization of \texorpdfstring{$\ast$}{*}this. 函数调用图\+:
% FIG 2
\Hypertarget{classtbb_1_1queuing__mutex_1_1scoped__lock_aa82d9da0dcfe5b21f1c08473f8223105}\index{tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}!scoped\_lock@{scoped\_lock}}
\index{scoped\_lock@{scoped\_lock}!tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{scoped\_lock()}{scoped\_lock()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__mutex_1_1scoped__lock_aa82d9da0dcfe5b21f1c08473f8223105} 
tbb\+::queuing\+\_\+mutex\+::scoped\+\_\+lock\+::scoped\+\_\+lock (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtbb_1_1queuing__mutex}{queuing\+\_\+mutex}} \&}]{m}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Acquire lock on given mutex. 

函数调用图\+:
% FIG 3
\Hypertarget{classtbb_1_1queuing__mutex_1_1scoped__lock_a469ec43836a8dd250ce0a22b02945630}\index{tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}!````~scoped\_lock@{\texorpdfstring{$\sim$}{\string~}scoped\_lock}}
\index{````~scoped\_lock@{\texorpdfstring{$\sim$}{\string~}scoped\_lock}!tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}scoped\_lock()}{\string~scoped\_lock()}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__mutex_1_1scoped__lock_a469ec43836a8dd250ce0a22b02945630} 
tbb\+::queuing\+\_\+mutex\+::scoped\+\_\+lock\+::\texorpdfstring{$\sim$}{\string~}scoped\+\_\+lock (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Release lock (if lock is held). 

函数调用图\+:
% FIG 4


\doxysubsection{成员函数说明}
\Hypertarget{classtbb_1_1queuing__mutex_1_1scoped__lock_ac6b9289521c6b7568eedc8e0ff4e96d8}\index{tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}!acquire@{acquire}}
\index{acquire@{acquire}!tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{acquire()}{acquire()}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__mutex_1_1scoped__lock_ac6b9289521c6b7568eedc8e0ff4e96d8} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::queuing\+\_\+mutex\+::scoped\+\_\+lock\+::acquire (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtbb_1_1queuing__mutex}{queuing\+\_\+mutex}} \&}]{m}{}\end{DoxyParamCaption})}



Acquire lock on given mutex. 

\doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} method to acquire \doxylink{classtbb_1_1queuing__mutex}{queuing\+\_\+mutex} lock 函数调用图\+:
% FIG 5
\Hypertarget{classtbb_1_1queuing__mutex_1_1scoped__lock_a59f276bc4fe30ca24998fc8b1693b0b9}\index{tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}!initialize@{initialize}}
\index{initialize@{initialize}!tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{initialize()}{initialize()}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__mutex_1_1scoped__lock_a59f276bc4fe30ca24998fc8b1693b0b9} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::queuing\+\_\+mutex\+::scoped\+\_\+lock\+::initialize (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Initialize fields to mean "{}no lock held"{}. 

\Hypertarget{classtbb_1_1queuing__mutex_1_1scoped__lock_a75112bddb38e011e9cfa69695050c771}\index{tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}!release@{release}}
\index{release@{release}!tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{release()}{release()}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__mutex_1_1scoped__lock_a75112bddb38e011e9cfa69695050c771} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::queuing\+\_\+mutex\+::scoped\+\_\+lock\+::release (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Release lock. 

\doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} method to release \doxylink{classtbb_1_1queuing__mutex}{queuing\+\_\+mutex} lock 函数调用图\+:
% FIG 6
\Hypertarget{classtbb_1_1queuing__mutex_1_1scoped__lock_aa35c2a7b36eb58201a804be7a36b4ccd}\index{tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}!try\_acquire@{try\_acquire}}
\index{try\_acquire@{try\_acquire}!tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{try\_acquire()}{try\_acquire()}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__mutex_1_1scoped__lock_aa35c2a7b36eb58201a804be7a36b4ccd} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} tbb\+::queuing\+\_\+mutex\+::scoped\+\_\+lock\+::try\+\_\+acquire (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtbb_1_1queuing__mutex}{queuing\+\_\+mutex}} \&}]{m}{}\end{DoxyParamCaption})}



Acquire lock on given mutex if free (i.\+e. non-\/blocking) 

\doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} method to acquire \doxylink{classtbb_1_1queuing__mutex}{queuing\+\_\+mutex} if it is free 函数调用图\+:
% FIG 7


\doxysubsection{类成员变量说明}
\Hypertarget{classtbb_1_1queuing__mutex_1_1scoped__lock_a48b37b0b590a9286b5a64493edbfa6bf}\index{tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}!going@{going}}
\index{going@{going}!tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{going}{going}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__mutex_1_1scoped__lock_a48b37b0b590a9286b5a64493edbfa6bf} 
uintptr\+\_\+t tbb\+::queuing\+\_\+mutex\+::scoped\+\_\+lock\+::going\hspace{0.3cm}{\ttfamily [private]}}



The local spin-\/wait variable 

Inverted (0 -\/ blocked, 1 -\/ acquired the mutex) for the sake of zero-\/initialization. Defining it as an entire word instead of a byte seems to help performance slightly. \Hypertarget{classtbb_1_1queuing__mutex_1_1scoped__lock_a9219187a11dc1db2f06e6f8a974ecdc4}\index{tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}!mutex@{mutex}}
\index{mutex@{mutex}!tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{mutex}{mutex}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__mutex_1_1scoped__lock_a9219187a11dc1db2f06e6f8a974ecdc4} 
\mbox{\hyperlink{classtbb_1_1queuing__mutex}{queuing\+\_\+mutex}}\texorpdfstring{$\ast$}{*} tbb\+::queuing\+\_\+mutex\+::scoped\+\_\+lock\+::mutex\hspace{0.3cm}{\ttfamily [private]}}



The pointer to the mutex owned, or NULL if not holding a mutex. 

\Hypertarget{classtbb_1_1queuing__mutex_1_1scoped__lock_ab4879d19847f1f52b832e54cb179a4c1}\index{tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}!next@{next}}
\index{next@{next}!tbb::queuing\_mutex::scoped\_lock@{tbb::queuing\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{next}{next}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__mutex_1_1scoped__lock_ab4879d19847f1f52b832e54cb179a4c1} 
\mbox{\hyperlink{classtbb_1_1queuing__mutex_1_1scoped__lock}{scoped\+\_\+lock}}\texorpdfstring{$\ast$}{*} tbb\+::queuing\+\_\+mutex\+::scoped\+\_\+lock\+::next\hspace{0.3cm}{\ttfamily [private]}}



The pointer to the next competitor for a mutex 



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/taskflow/3rd-\/party/tbb/include/tbb/\mbox{\hyperlink{queuing__mutex_8h}{queuing\+\_\+mutex.\+h}}\item 
external/taskflow/3rd-\/party/tbb/src/tbb/\mbox{\hyperlink{queuing__mutex_8cpp}{queuing\+\_\+mutex.\+cpp}}\end{DoxyCompactItemize}
