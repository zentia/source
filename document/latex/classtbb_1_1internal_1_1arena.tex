\doxysection{tbb\+::internal\+::arena类 参考}
\hypertarget{classtbb_1_1internal_1_1arena}{}\label{classtbb_1_1internal_1_1arena}\index{tbb::internal::arena@{tbb::internal::arena}}


{\ttfamily \#include $<$arena.\+h$>$}



类 tbb\+::internal\+::arena 继承关系图\+:
% FIG 0


tbb\+::internal\+::arena 的协作图\+:
% FIG 1
\doxysubsubsection*{Public 类型}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a2380e7751924d1199ffab7b2ee29ddee}{new\+\_\+work\+\_\+type}} \{ \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a2380e7751924d1199ffab7b2ee29ddeea2109ea81736367212fa797959b4b4381}{work\+\_\+spawned}}
, \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a2380e7751924d1199ffab7b2ee29ddeeac92fe41bfa3a02ea67d83232c9f88b90}{wakeup}}
, \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a2380e7751924d1199ffab7b2ee29ddeea49e498ff35aa2bbce4de87dfd7faab04}{work\+\_\+enqueued}}
 \}
\begin{DoxyCompactList}\small\item\em Types of work advertised by \doxylink{classtbb_1_1internal_1_1arena_a7153d90d34c57f57a5a44495a0c6c30d}{advertise\+\_\+new\+\_\+work()} \end{DoxyCompactList}\item 
typedef padded$<$ \mbox{\hyperlink{structtbb_1_1internal_1_1arena__base}{arena\+\_\+base}} $>$ \mbox{\hyperlink{classtbb_1_1internal_1_1arena_acd0c8a22c63cd214ec4e713f4254ce8e}{base\+\_\+type}}
\item 
typedef uintptr\+\_\+t \mbox{\hyperlink{classtbb_1_1internal_1_1arena_ab857c6609471eb555d295529945bc738}{pool\+\_\+state\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtbb_1_1internal_1_1arena_ad3b28deb1fcb30cb533ea7b655819d6b}{arena}} (\mbox{\hyperlink{classtbb_1_1internal_1_1market}{market}} \&, unsigned max\+\_\+num\+\_\+workers, unsigned num\+\_\+reserved\+\_\+slots)
\begin{DoxyCompactList}\small\item\em Constructor \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtbb_1_1internal_1_1mail__outbox}{mail\+\_\+outbox}} \& \mbox{\hyperlink{classtbb_1_1internal_1_1arena_aa0c057046899d3ab934c8aaf66b92673}{mailbox}} (\mbox{\hyperlink{namespacetbb_1_1internal_a3e3837fb3ca7bbf4cf4752c58cbed886}{affinity\+\_\+id}} \mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}})
\begin{DoxyCompactList}\small\item\em Get reference to mailbox corresponding to given \doxylink{namespacetbb_1_1internal_a3e3837fb3ca7bbf4cf4752c58cbed886}{affinity\+\_\+id}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a3de7953b535cd3180e421ddb49eb5a50}{free\+\_\+arena}} ()
\begin{DoxyCompactList}\small\item\em Completes arena shutdown, destructs and deallocates it. \end{DoxyCompactList}\item 
unsigned \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a1aa6d247ff51a1ee9ada4197fdf3abdb}{num\+\_\+workers\+\_\+active}} () const
\begin{DoxyCompactList}\small\item\em The number of workers active in the arena. \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a62798c142914ef1e42d6a2b2c7eed643}{is\+\_\+recall\+\_\+requested}} () const
\begin{DoxyCompactList}\small\item\em \doxylink{struct_check}{Check} if the recall is requested by the market. \end{DoxyCompactList}\item 
{\footnotesize template$<$\mbox{\hyperlink{classtbb_1_1internal_1_1arena_a2380e7751924d1199ffab7b2ee29ddee}{arena\+::new\+\_\+work\+\_\+type}} work\+\_\+type$>$ }\\\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a7153d90d34c57f57a5a44495a0c6c30d}{advertise\+\_\+new\+\_\+work}} ()
\begin{DoxyCompactList}\small\item\em If necessary, raise a flag that there is new job in arena. \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a9f25e058648c12ff7a0093b30fd79351}{is\+\_\+out\+\_\+of\+\_\+work}} ()
\begin{DoxyCompactList}\small\item\em \doxylink{struct_check}{Check} if there is job anywhere in arena. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a8b6f5b56aed218f491d9c4f9b4a0bcf6}{enqueue\+\_\+task}} (task \&, intptr\+\_\+t, \mbox{\hyperlink{classtbb_1_1internal_1_1_fast_random}{Fast\+Random}} \&)
\begin{DoxyCompactList}\small\item\em enqueue a task into starvation-\/resistance queue \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena_aa5f5c1e842ab59a4e4f127f013578882}{process}} (\mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\+\_\+scheduler}} \&)
\begin{DoxyCompactList}\small\item\em Registers the worker with the arena and enters \doxylink{struct_t_b_b}{TBB} scheduler dispatch loop \end{DoxyCompactList}\item 
{\footnotesize template$<$unsigned ref\+\_\+param$>$ }\\\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a6bc30944090909d219ac8b95cadc0439}{on\+\_\+thread\+\_\+leaving}} ()
\begin{DoxyCompactList}\small\item\em Notification that worker or master leaves its arena \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena_af08a4622c323ad8863e0008af620b28c}{has\+\_\+enqueued\+\_\+tasks}} ()
\begin{DoxyCompactList}\small\item\em \doxylink{struct_check}{Check} for the presence of enqueued tasks at all priority levels \end{DoxyCompactList}\item 
{\footnotesize template$<$\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} as\+\_\+worker$>$ }\\size\+\_\+t \mbox{\hyperlink{classtbb_1_1internal_1_1arena_af5ba2478b86e7618cdd0cedfb473121a}{occupy\+\_\+free\+\_\+slot}} (\mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\+\_\+scheduler}} \&\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}})
\begin{DoxyCompactList}\small\item\em Tries to occupy a slot in the arena. On success, returns the slot index; if no slot is available, returns out\+\_\+of\+\_\+arena. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a74271175755dfa2e746c23a34e0e42ac}{occupy\+\_\+free\+\_\+slot\+\_\+in\+\_\+range}} (\mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\+\_\+scheduler}} \&\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}, size\+\_\+t \mbox{\hyperlink{blas__interface_8hh_a17ae1b83727db4230c8df98b4ee953fc}{lower}}, size\+\_\+t upper)
\begin{DoxyCompactList}\small\item\em Tries to occupy a slot in the specified range. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{静态 Public 成员函数}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}} \& \mbox{\hyperlink{classtbb_1_1internal_1_1arena_ad42305a844f6c9dc93b6d1c8c0302238}{allocate\+\_\+arena}} (\mbox{\hyperlink{classtbb_1_1internal_1_1market}{market}} \&, unsigned num\+\_\+slots, unsigned num\+\_\+reserved\+\_\+slots)
\begin{DoxyCompactList}\small\item\em Allocate an instance of arena. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} unsigned \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a315d666efe28ecd0fb6aa70f2da0eb37}{num\+\_\+arena\+\_\+slots}} (unsigned num\+\_\+slots)
\item 
static \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a88bd4bed45e6ca7bcba05e568717be3b}{allocation\+\_\+size}} (unsigned num\+\_\+slots)
\item 
static \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a3402230064cf16a79b9b2e9874df4d6f}{is\+\_\+busy\+\_\+or\+\_\+empty}} (\mbox{\hyperlink{classtbb_1_1internal_1_1arena_ab857c6609471eb555d295529945bc738}{pool\+\_\+state\+\_\+t}} \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}})
\begin{DoxyCompactList}\small\item\em No tasks to steal or snapshot is being taken. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public 属性}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structtbb_1_1internal_1_1arena__slot}{arena\+\_\+slot}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a388cbceb772b63b69ee84d775b210504}{my\+\_\+slots}} \mbox{[}1\mbox{]}
\end{DoxyCompactItemize}
\doxysubsubsection*{静态 Public 属性}
\begin{DoxyCompactItemize}
\item 
static const \mbox{\hyperlink{classtbb_1_1internal_1_1arena_ab857c6609471eb555d295529945bc738}{pool\+\_\+state\+\_\+t}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a06d6b9eb47d6cf8a95f468f410e6769c}{SNAPSHOT\+\_\+\+EMPTY}} = 0
\begin{DoxyCompactList}\small\item\em No tasks to steal since last snapshot was taken \end{DoxyCompactList}\item 
static const \mbox{\hyperlink{classtbb_1_1internal_1_1arena_ab857c6609471eb555d295529945bc738}{pool\+\_\+state\+\_\+t}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a5388bc046062943dcca75cdfeedc1cad}{SNAPSHOT\+\_\+\+FULL}} = \mbox{\hyperlink{classtbb_1_1internal_1_1arena_ab857c6609471eb555d295529945bc738}{pool\+\_\+state\+\_\+t}}(-\/1)
\begin{DoxyCompactList}\small\item\em At least one task has been offered for stealing since the last snapshot started \end{DoxyCompactList}\item 
static const unsigned \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a3cfbb5823b437dabaaaf99f1bba615be}{ref\+\_\+external\+\_\+bits}} = 12
\begin{DoxyCompactList}\small\item\em The number of least significant bits for external references \end{DoxyCompactList}\item 
static const unsigned \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a0b9c64f0781f7c6337bc109d9867829a}{ref\+\_\+external}} = 1
\begin{DoxyCompactList}\small\item\em Reference increment values for externals and workers \end{DoxyCompactList}\item 
static const unsigned \mbox{\hyperlink{classtbb_1_1internal_1_1arena_af7e9255877d3efd5966031efe1fe3edf}{ref\+\_\+worker}} = 1$<$$<$\mbox{\hyperlink{classtbb_1_1internal_1_1arena_a3cfbb5823b437dabaaaf99f1bba615be}{ref\+\_\+external\+\_\+bits}}
\item 
static const size\+\_\+t \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a9ece68a6099229bd2c152b7421851671}{out\+\_\+of\+\_\+arena}} = \texorpdfstring{$\sim$}{\string~}size\+\_\+t(0)
\end{DoxyCompactItemize}
\doxysubsubsection*{Private 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a33644ebee7b2f7b472fc6fdca10eff2b}{restore\+\_\+priority\+\_\+if\+\_\+need}} ()
\begin{DoxyCompactList}\small\item\em If enqueued tasks found, restore arena priority and task presence status \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{成员类型定义说明}
\Hypertarget{classtbb_1_1internal_1_1arena_acd0c8a22c63cd214ec4e713f4254ce8e}\index{tbb::internal::arena@{tbb::internal::arena}!base\_type@{base\_type}}
\index{base\_type@{base\_type}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{base\_type}{base\_type}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_acd0c8a22c63cd214ec4e713f4254ce8e} 
typedef padded$<$\mbox{\hyperlink{structtbb_1_1internal_1_1arena__base}{arena\+\_\+base}}$>$ \mbox{\hyperlink{classtbb_1_1internal_1_1arena_acd0c8a22c63cd214ec4e713f4254ce8e}{tbb\+::internal\+::arena\+::base\+\_\+type}}}

\Hypertarget{classtbb_1_1internal_1_1arena_ab857c6609471eb555d295529945bc738}\index{tbb::internal::arena@{tbb::internal::arena}!pool\_state\_t@{pool\_state\_t}}
\index{pool\_state\_t@{pool\_state\_t}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{pool\_state\_t}{pool\_state\_t}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_ab857c6609471eb555d295529945bc738} 
typedef uintptr\+\_\+t \mbox{\hyperlink{classtbb_1_1internal_1_1arena_ab857c6609471eb555d295529945bc738}{tbb\+::internal\+::arena\+::pool\+\_\+state\+\_\+t}}}



\doxysubsection{成员枚举类型说明}
\Hypertarget{classtbb_1_1internal_1_1arena_a2380e7751924d1199ffab7b2ee29ddee}\index{tbb::internal::arena@{tbb::internal::arena}!new\_work\_type@{new\_work\_type}}
\index{new\_work\_type@{new\_work\_type}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{new\_work\_type}{new\_work\_type}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a2380e7751924d1199ffab7b2ee29ddee} 
enum \mbox{\hyperlink{classtbb_1_1internal_1_1arena_a2380e7751924d1199ffab7b2ee29ddee}{tbb\+::internal\+::arena\+::new\+\_\+work\+\_\+type}}}



Types of work advertised by \doxylink{classtbb_1_1internal_1_1arena_a7153d90d34c57f57a5a44495a0c6c30d}{advertise\+\_\+new\+\_\+work()} 

\begin{DoxyEnumFields}[2]{枚举值}
\raisebox{\heightof{T}}[0pt][0pt]{\index{work\_spawned@{work\_spawned}!tbb::internal::arena@{tbb::internal::arena}}\index{tbb::internal::arena@{tbb::internal::arena}!work\_spawned@{work\_spawned}}}\Hypertarget{classtbb_1_1internal_1_1arena_a2380e7751924d1199ffab7b2ee29ddeea2109ea81736367212fa797959b4b4381}\label{classtbb_1_1internal_1_1arena_a2380e7751924d1199ffab7b2ee29ddeea2109ea81736367212fa797959b4b4381} 
work\+\_\+spawned&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{wakeup@{wakeup}!tbb::internal::arena@{tbb::internal::arena}}\index{tbb::internal::arena@{tbb::internal::arena}!wakeup@{wakeup}}}\Hypertarget{classtbb_1_1internal_1_1arena_a2380e7751924d1199ffab7b2ee29ddeeac92fe41bfa3a02ea67d83232c9f88b90}\label{classtbb_1_1internal_1_1arena_a2380e7751924d1199ffab7b2ee29ddeeac92fe41bfa3a02ea67d83232c9f88b90} 
wakeup&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{work\_enqueued@{work\_enqueued}!tbb::internal::arena@{tbb::internal::arena}}\index{tbb::internal::arena@{tbb::internal::arena}!work\_enqueued@{work\_enqueued}}}\Hypertarget{classtbb_1_1internal_1_1arena_a2380e7751924d1199ffab7b2ee29ddeea49e498ff35aa2bbce4de87dfd7faab04}\label{classtbb_1_1internal_1_1arena_a2380e7751924d1199ffab7b2ee29ddeea49e498ff35aa2bbce4de87dfd7faab04} 
work\+\_\+enqueued&\\
\hline

\end{DoxyEnumFields}


\doxysubsection{构造及析构函数说明}
\Hypertarget{classtbb_1_1internal_1_1arena_ad3b28deb1fcb30cb533ea7b655819d6b}\index{tbb::internal::arena@{tbb::internal::arena}!arena@{arena}}
\index{arena@{arena}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{arena()}{arena()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_ad3b28deb1fcb30cb533ea7b655819d6b} 
\mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, pocma, \mbox{\hyperlink{tbbmalloc_2statistics_8h_a88d7e7c1f1ccad444adb066d12334d4a}{counter\+\_\+type}} $>$\mbox{\hyperlink{structarena}{\+::arena}} (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtbb_1_1internal_1_1market}{market}} \&}]{m}{, }\item[{unsigned}]{max\+\_\+num\+\_\+workers}{, }\item[{unsigned}]{num\+\_\+reserved\+\_\+slots}{}\end{DoxyParamCaption})}



Constructor 

函数调用图\+:
% FIG 2


\doxysubsection{成员函数说明}
\Hypertarget{classtbb_1_1internal_1_1arena_a7153d90d34c57f57a5a44495a0c6c30d}\index{tbb::internal::arena@{tbb::internal::arena}!advertise\_new\_work@{advertise\_new\_work}}
\index{advertise\_new\_work@{advertise\_new\_work}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{advertise\_new\_work()}{advertise\_new\_work()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a7153d90d34c57f57a5a44495a0c6c30d} 
template$<$\mbox{\hyperlink{classtbb_1_1internal_1_1arena_a2380e7751924d1199ffab7b2ee29ddee}{arena\+::new\+\_\+work\+\_\+type}} work\+\_\+type$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}$<$ work\+\_\+type $>$\+::advertise\+\_\+new\+\_\+work (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



If necessary, raise a flag that there is new job in arena. 

函数调用图\+:
% FIG 3
\Hypertarget{classtbb_1_1internal_1_1arena_ad42305a844f6c9dc93b6d1c8c0302238}\index{tbb::internal::arena@{tbb::internal::arena}!allocate\_arena@{allocate\_arena}}
\index{allocate\_arena@{allocate\_arena}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{allocate\_arena()}{allocate\_arena()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_ad42305a844f6c9dc93b6d1c8c0302238} 
\mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}} \& \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, pocma, \mbox{\hyperlink{tbbmalloc_2statistics_8h_a88d7e7c1f1ccad444adb066d12334d4a}{counter\+\_\+type}} $>$\+::allocate\+\_\+arena (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtbb_1_1internal_1_1market}{market}} \&}]{m}{, }\item[{unsigned}]{num\+\_\+slots}{, }\item[{unsigned}]{num\+\_\+reserved\+\_\+slots}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Allocate an instance of arena. 

函数调用图\+:
% FIG 4
\Hypertarget{classtbb_1_1internal_1_1arena_a88bd4bed45e6ca7bcba05e568717be3b}\index{tbb::internal::arena@{tbb::internal::arena}!allocation\_size@{allocation\_size}}
\index{allocation\_size@{allocation\_size}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{allocation\_size()}{allocation\_size()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a88bd4bed45e6ca7bcba05e568717be3b} 
static \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} tbb\+::internal\+::arena\+::allocation\+\_\+size (\begin{DoxyParamCaption}\item[{unsigned}]{num\+\_\+slots}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

\Hypertarget{classtbb_1_1internal_1_1arena_a8b6f5b56aed218f491d9c4f9b4a0bcf6}\index{tbb::internal::arena@{tbb::internal::arena}!enqueue\_task@{enqueue\_task}}
\index{enqueue\_task@{enqueue\_task}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{enqueue\_task()}{enqueue\_task()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a8b6f5b56aed218f491d9c4f9b4a0bcf6} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, pocma, \mbox{\hyperlink{tbbmalloc_2statistics_8h_a88d7e7c1f1ccad444adb066d12334d4a}{counter\+\_\+type}} $>$\+::enqueue\+\_\+task (\begin{DoxyParamCaption}\item[{task \&}]{t}{, }\item[{intptr\+\_\+t}]{prio}{, }\item[{\mbox{\hyperlink{classtbb_1_1internal_1_1_fast_random}{Fast\+Random}} \&}]{random}{}\end{DoxyParamCaption})}



enqueue a task into starvation-\/resistance queue 

函数调用图\+:
% FIG 5
\Hypertarget{classtbb_1_1internal_1_1arena_a3de7953b535cd3180e421ddb49eb5a50}\index{tbb::internal::arena@{tbb::internal::arena}!free\_arena@{free\_arena}}
\index{free\_arena@{free\_arena}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{free\_arena()}{free\_arena()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a3de7953b535cd3180e421ddb49eb5a50} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, pocma, \mbox{\hyperlink{tbbmalloc_2statistics_8h_a88d7e7c1f1ccad444adb066d12334d4a}{counter\+\_\+type}} $>$\+::free\+\_\+arena (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Completes arena shutdown, destructs and deallocates it. 

函数调用图\+:
% FIG 6
\Hypertarget{classtbb_1_1internal_1_1arena_af08a4622c323ad8863e0008af620b28c}\index{tbb::internal::arena@{tbb::internal::arena}!has\_enqueued\_tasks@{has\_enqueued\_tasks}}
\index{has\_enqueued\_tasks@{has\_enqueued\_tasks}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{has\_enqueued\_tasks()}{has\_enqueued\_tasks()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_af08a4622c323ad8863e0008af620b28c} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, pocma, \mbox{\hyperlink{tbbmalloc_2statistics_8h_a88d7e7c1f1ccad444adb066d12334d4a}{counter\+\_\+type}} $>$\+::has\+\_\+enqueued\+\_\+tasks (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



\doxylink{struct_check}{Check} for the presence of enqueued tasks at all priority levels 

\Hypertarget{classtbb_1_1internal_1_1arena_a3402230064cf16a79b9b2e9874df4d6f}\index{tbb::internal::arena@{tbb::internal::arena}!is\_busy\_or\_empty@{is\_busy\_or\_empty}}
\index{is\_busy\_or\_empty@{is\_busy\_or\_empty}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{is\_busy\_or\_empty()}{is\_busy\_or\_empty()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a3402230064cf16a79b9b2e9874df4d6f} 
static \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} tbb\+::internal\+::arena\+::is\+\_\+busy\+\_\+or\+\_\+empty (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtbb_1_1internal_1_1arena_ab857c6609471eb555d295529945bc738}{pool\+\_\+state\+\_\+t}}}]{s}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



No tasks to steal or snapshot is being taken. 

\Hypertarget{classtbb_1_1internal_1_1arena_a9f25e058648c12ff7a0093b30fd79351}\index{tbb::internal::arena@{tbb::internal::arena}!is\_out\_of\_work@{is\_out\_of\_work}}
\index{is\_out\_of\_work@{is\_out\_of\_work}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{is\_out\_of\_work()}{is\_out\_of\_work()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a9f25e058648c12ff7a0093b30fd79351} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, pocma, \mbox{\hyperlink{tbbmalloc_2statistics_8h_a88d7e7c1f1ccad444adb066d12334d4a}{counter\+\_\+type}} $>$\+::is\+\_\+out\+\_\+of\+\_\+work (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



\doxylink{struct_check}{Check} if there is job anywhere in arena. 

Return true if no job or if arena is being cleaned up. 函数调用图\+:
% FIG 7
\Hypertarget{classtbb_1_1internal_1_1arena_a62798c142914ef1e42d6a2b2c7eed643}\index{tbb::internal::arena@{tbb::internal::arena}!is\_recall\_requested@{is\_recall\_requested}}
\index{is\_recall\_requested@{is\_recall\_requested}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{is\_recall\_requested()}{is\_recall\_requested()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a62798c142914ef1e42d6a2b2c7eed643} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} tbb\+::internal\+::arena\+::is\+\_\+recall\+\_\+requested (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



\doxylink{struct_check}{Check} if the recall is requested by the market. 

函数调用图\+:
% FIG 8
\Hypertarget{classtbb_1_1internal_1_1arena_aa0c057046899d3ab934c8aaf66b92673}\index{tbb::internal::arena@{tbb::internal::arena}!mailbox@{mailbox}}
\index{mailbox@{mailbox}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{mailbox()}{mailbox()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_aa0c057046899d3ab934c8aaf66b92673} 
\mbox{\hyperlink{classtbb_1_1internal_1_1mail__outbox}{mail\+\_\+outbox}} \& tbb\+::internal\+::arena\+::mailbox (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacetbb_1_1internal_a3e3837fb3ca7bbf4cf4752c58cbed886}{affinity\+\_\+id}}}]{id}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Get reference to mailbox corresponding to given \doxylink{namespacetbb_1_1internal_a3e3837fb3ca7bbf4cf4752c58cbed886}{affinity\+\_\+id}. 

\Hypertarget{classtbb_1_1internal_1_1arena_a315d666efe28ecd0fb6aa70f2da0eb37}\index{tbb::internal::arena@{tbb::internal::arena}!num\_arena\_slots@{num\_arena\_slots}}
\index{num\_arena\_slots@{num\_arena\_slots}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{num\_arena\_slots()}{num\_arena\_slots()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a315d666efe28ecd0fb6aa70f2da0eb37} 
static \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} unsigned tbb\+::internal\+::arena\+::num\+\_\+arena\+\_\+slots (\begin{DoxyParamCaption}\item[{unsigned}]{num\+\_\+slots}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

\Hypertarget{classtbb_1_1internal_1_1arena_a1aa6d247ff51a1ee9ada4197fdf3abdb}\index{tbb::internal::arena@{tbb::internal::arena}!num\_workers\_active@{num\_workers\_active}}
\index{num\_workers\_active@{num\_workers\_active}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{num\_workers\_active()}{num\_workers\_active()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a1aa6d247ff51a1ee9ada4197fdf3abdb} 
unsigned tbb\+::internal\+::arena\+::num\+\_\+workers\+\_\+active (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



The number of workers active in the arena. 

\Hypertarget{classtbb_1_1internal_1_1arena_af5ba2478b86e7618cdd0cedfb473121a}\index{tbb::internal::arena@{tbb::internal::arena}!occupy\_free\_slot@{occupy\_free\_slot}}
\index{occupy\_free\_slot@{occupy\_free\_slot}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{occupy\_free\_slot()}{occupy\_free\_slot()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_af5ba2478b86e7618cdd0cedfb473121a} 
template$<$\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} as\+\_\+worker$>$ \\
size\+\_\+t \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}$<$ as\+\_\+worker $>$\+::occupy\+\_\+free\+\_\+slot (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\+\_\+scheduler}} \&}]{s}{}\end{DoxyParamCaption})}



Tries to occupy a slot in the arena. On success, returns the slot index; if no slot is available, returns out\+\_\+of\+\_\+arena. 

函数调用图\+:
% FIG 9
\Hypertarget{classtbb_1_1internal_1_1arena_a74271175755dfa2e746c23a34e0e42ac}\index{tbb::internal::arena@{tbb::internal::arena}!occupy\_free\_slot\_in\_range@{occupy\_free\_slot\_in\_range}}
\index{occupy\_free\_slot\_in\_range@{occupy\_free\_slot\_in\_range}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{occupy\_free\_slot\_in\_range()}{occupy\_free\_slot\_in\_range()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a74271175755dfa2e746c23a34e0e42ac} 
size\+\_\+t \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, pocma, \mbox{\hyperlink{tbbmalloc_2statistics_8h_a88d7e7c1f1ccad444adb066d12334d4a}{counter\+\_\+type}} $>$\+::occupy\+\_\+free\+\_\+slot\+\_\+in\+\_\+range (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\+\_\+scheduler}} \&}]{s}{, }\item[{size\+\_\+t}]{lower}{, }\item[{size\+\_\+t}]{upper}{}\end{DoxyParamCaption})}



Tries to occupy a slot in the specified range. 

函数调用图\+:
% FIG 10
\Hypertarget{classtbb_1_1internal_1_1arena_a6bc30944090909d219ac8b95cadc0439}\index{tbb::internal::arena@{tbb::internal::arena}!on\_thread\_leaving@{on\_thread\_leaving}}
\index{on\_thread\_leaving@{on\_thread\_leaving}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{on\_thread\_leaving()}{on\_thread\_leaving()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a6bc30944090909d219ac8b95cadc0439} 
template$<$unsigned ref\+\_\+param$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}$<$ ref\+\_\+param $>$\+::on\+\_\+thread\+\_\+leaving (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Notification that worker or master leaves its arena 

函数调用图\+:
% FIG 11
\Hypertarget{classtbb_1_1internal_1_1arena_aa5f5c1e842ab59a4e4f127f013578882}\index{tbb::internal::arena@{tbb::internal::arena}!process@{process}}
\index{process@{process}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{process()}{process()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_aa5f5c1e842ab59a4e4f127f013578882} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, pocma, \mbox{\hyperlink{tbbmalloc_2statistics_8h_a88d7e7c1f1ccad444adb066d12334d4a}{counter\+\_\+type}} $>$\+::process (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\+\_\+scheduler}} \&}]{s}{}\end{DoxyParamCaption})}



Registers the worker with the arena and enters \doxylink{struct_t_b_b}{TBB} scheduler dispatch loop 

函数调用图\+:
% FIG 12
\Hypertarget{classtbb_1_1internal_1_1arena_a33644ebee7b2f7b472fc6fdca10eff2b}\index{tbb::internal::arena@{tbb::internal::arena}!restore\_priority\_if\_need@{restore\_priority\_if\_need}}
\index{restore\_priority\_if\_need@{restore\_priority\_if\_need}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{restore\_priority\_if\_need()}{restore\_priority\_if\_need()}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a33644ebee7b2f7b472fc6fdca10eff2b} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, pocma, \mbox{\hyperlink{tbbmalloc_2statistics_8h_a88d7e7c1f1ccad444adb066d12334d4a}{counter\+\_\+type}} $>$\+::restore\+\_\+priority\+\_\+if\+\_\+need (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



If enqueued tasks found, restore arena priority and task presence status 

函数调用图\+:
% FIG 13


\doxysubsection{类成员变量说明}
\Hypertarget{classtbb_1_1internal_1_1arena_a388cbceb772b63b69ee84d775b210504}\index{tbb::internal::arena@{tbb::internal::arena}!my\_slots@{my\_slots}}
\index{my\_slots@{my\_slots}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{my\_slots}{my\_slots}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a388cbceb772b63b69ee84d775b210504} 
\mbox{\hyperlink{structtbb_1_1internal_1_1arena__slot}{arena\+\_\+slot}} tbb\+::internal\+::arena\+::my\+\_\+slots\mbox{[}1\mbox{]}}

Must be the last data field \Hypertarget{classtbb_1_1internal_1_1arena_a9ece68a6099229bd2c152b7421851671}\index{tbb::internal::arena@{tbb::internal::arena}!out\_of\_arena@{out\_of\_arena}}
\index{out\_of\_arena@{out\_of\_arena}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{out\_of\_arena}{out\_of\_arena}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a9ece68a6099229bd2c152b7421851671} 
const size\+\_\+t tbb\+::internal\+::arena\+::out\+\_\+of\+\_\+arena = \texorpdfstring{$\sim$}{\string~}size\+\_\+t(0)\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{classtbb_1_1internal_1_1arena_a0b9c64f0781f7c6337bc109d9867829a}\index{tbb::internal::arena@{tbb::internal::arena}!ref\_external@{ref\_external}}
\index{ref\_external@{ref\_external}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{ref\_external}{ref\_external}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a0b9c64f0781f7c6337bc109d9867829a} 
const unsigned tbb\+::internal\+::arena\+::ref\+\_\+external = 1\hspace{0.3cm}{\ttfamily [static]}}



Reference increment values for externals and workers 

\Hypertarget{classtbb_1_1internal_1_1arena_a3cfbb5823b437dabaaaf99f1bba615be}\index{tbb::internal::arena@{tbb::internal::arena}!ref\_external\_bits@{ref\_external\_bits}}
\index{ref\_external\_bits@{ref\_external\_bits}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{ref\_external\_bits}{ref\_external\_bits}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a3cfbb5823b437dabaaaf99f1bba615be} 
const unsigned tbb\+::internal\+::arena\+::ref\+\_\+external\+\_\+bits = 12\hspace{0.3cm}{\ttfamily [static]}}



The number of least significant bits for external references 

\Hypertarget{classtbb_1_1internal_1_1arena_af7e9255877d3efd5966031efe1fe3edf}\index{tbb::internal::arena@{tbb::internal::arena}!ref\_worker@{ref\_worker}}
\index{ref\_worker@{ref\_worker}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{ref\_worker}{ref\_worker}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_af7e9255877d3efd5966031efe1fe3edf} 
const unsigned tbb\+::internal\+::arena\+::ref\+\_\+worker = 1$<$$<$\mbox{\hyperlink{classtbb_1_1internal_1_1arena_a3cfbb5823b437dabaaaf99f1bba615be}{ref\+\_\+external\+\_\+bits}}\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{classtbb_1_1internal_1_1arena_a06d6b9eb47d6cf8a95f468f410e6769c}\index{tbb::internal::arena@{tbb::internal::arena}!SNAPSHOT\_EMPTY@{SNAPSHOT\_EMPTY}}
\index{SNAPSHOT\_EMPTY@{SNAPSHOT\_EMPTY}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{SNAPSHOT\_EMPTY}{SNAPSHOT\_EMPTY}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a06d6b9eb47d6cf8a95f468f410e6769c} 
const \mbox{\hyperlink{classtbb_1_1internal_1_1arena_ab857c6609471eb555d295529945bc738}{pool\+\_\+state\+\_\+t}} tbb\+::internal\+::arena\+::\+SNAPSHOT\+\_\+\+EMPTY = 0\hspace{0.3cm}{\ttfamily [static]}}



No tasks to steal since last snapshot was taken 

\Hypertarget{classtbb_1_1internal_1_1arena_a5388bc046062943dcca75cdfeedc1cad}\index{tbb::internal::arena@{tbb::internal::arena}!SNAPSHOT\_FULL@{SNAPSHOT\_FULL}}
\index{SNAPSHOT\_FULL@{SNAPSHOT\_FULL}!tbb::internal::arena@{tbb::internal::arena}}
\doxysubsubsection{\texorpdfstring{SNAPSHOT\_FULL}{SNAPSHOT\_FULL}}
{\footnotesize\ttfamily \label{classtbb_1_1internal_1_1arena_a5388bc046062943dcca75cdfeedc1cad} 
const \mbox{\hyperlink{classtbb_1_1internal_1_1arena_ab857c6609471eb555d295529945bc738}{pool\+\_\+state\+\_\+t}} tbb\+::internal\+::arena\+::\+SNAPSHOT\+\_\+\+FULL = \mbox{\hyperlink{classtbb_1_1internal_1_1arena_ab857c6609471eb555d295529945bc738}{pool\+\_\+state\+\_\+t}}(-\/1)\hspace{0.3cm}{\ttfamily [static]}}



At least one task has been offered for stealing since the last snapshot started 



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/taskflow/3rd-\/party/tbb/src/tbb/\mbox{\hyperlink{arena_8h}{arena.\+h}}\item 
external/taskflow/3rd-\/party/tbb/src/tbb/\mbox{\hyperlink{arena_8cpp}{arena.\+cpp}}\end{DoxyCompactItemize}
