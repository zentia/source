\doxysection{cds\+::gc\+::details\+::generic\+\_\+\+HP\texorpdfstring{$<$}{<} TLSManager \texorpdfstring{$>$}{>}\+::Guard类 参考}
\hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard}{}\label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}


Hazard Pointer guard  




{\ttfamily \#include $<$hp.\+h$>$}

\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a8000a815b41557b4ab2cba79169ee3e3}{Guard}} ()
\begin{DoxyCompactList}\small\item\em Default ctor allocates a guard (hazard pointer) from thread-\/private storage \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_af04662d8067444d3f649aefa735c7a88}{Guard}} (std\+::nullptr\+\_\+t) noexcept
\begin{DoxyCompactList}\small\item\em Initilalizes an unlinked guard i.\+e. the guard contains no hazard pointer. Used for move semantics support \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_ab9b2c2a9aa3789fe2062a56757a47b36}{Guard}} (\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard}{Guard}} \&\&\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}) noexcept
\begin{DoxyCompactList}\small\item\em Move ctor -\/ {\ttfamily src} guard becomes unlinked (transfer internal guard ownership) \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard}{Guard}} \& \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a87bbd70d82164fccc228b128c2a4382c}{operator=}} (\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard}{Guard}} \&\&\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}) noexcept
\begin{DoxyCompactList}\small\item\em Move assignment\+: the internal guards are swapped between {\ttfamily src} and {\ttfamily this} \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_aef5d71d84061ba23c14b524655982053}{Guard}} (\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard}{Guard}} const \&)=delete
\begin{DoxyCompactList}\small\item\em Copy ctor is prohibited -\/ the guard is not copyable \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard}{Guard}} \& \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a60a0ce7149e11618bfc3120e4415c4f5}{operator=}} (\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard}{Guard}} const \&)=delete
\begin{DoxyCompactList}\small\item\em Copy assignment is prohibited \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a9c9a7f370fae69c52ce0abd0ab626319}{\texorpdfstring{$\sim$}{\string~}\+Guard}} ()
\begin{DoxyCompactList}\small\item\em Frees the internal hazard pointer if the guard is in linked state \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a5a486477a778f54307fcf63fa1a16584}{is\+\_\+linked}} () const
\begin{DoxyCompactList}\small\item\em Checks if the guard object linked with any internal hazard pointer \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a9841405cb8882cf470780057bc64cd65}{link}} ()
\begin{DoxyCompactList}\small\item\em Links the guard with internal hazard pointer if the guard is in unlinked state \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_aa846fc1eb54bcd221e91be8111c0cf9e}{unlink}} ()
\begin{DoxyCompactList}\small\item\em Unlinks the guard from internal hazard pointer; the guard becomes in unlinked state \end{DoxyCompactList}\item 
{\footnotesize template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ }\\\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_ae6c5a281bb784c2372b8f85b33e46096}{protect}} (atomics\+::atomic$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} $>$ const \&to\+Guard)
\begin{DoxyCompactList}\small\item\em Protects a pointer of type {\ttfamily atomic$<$\+T\texorpdfstring{$\ast$}{*}$>$} \end{DoxyCompactList}\item 
{\footnotesize template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, class Func$>$ }\\\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_acfad23a4158428864e06485abfd5d808}{protect}} (atomics\+::atomic$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} $>$ const \&to\+Guard, Func \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})
\begin{DoxyCompactList}\small\item\em Protects a converted pointer of type {\ttfamily atomic$<$\+T\texorpdfstring{$\ast$}{*}$>$} \end{DoxyCompactList}\item 
{\footnotesize template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ }\\\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a6f8468ee7ad22af90c48d1408043d35d}{assign}} (\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})
\begin{DoxyCompactList}\small\item\em Store {\ttfamily p} to the guard \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a214f148bc9dbd65174b14d8f0ee30c0a}{copy}} (\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard}{Guard}} const \&\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}})
\begin{DoxyCompactList}\small\item\em Copy a value guarded from {\ttfamily src} guard to {\ttfamily this} guard (valid only in linked state) \end{DoxyCompactList}\item 
{\footnotesize template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} BITMASK$>$ }\\\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_aab25cd1ae7f62b56f79d8cbca52a8ea4}{assign}} (\mbox{\hyperlink{classcds_1_1details_1_1marked__ptr}{cds\+::details\+::marked\+\_\+ptr}}$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, BITMASK $>$ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})
\begin{DoxyCompactList}\small\item\em Store marked pointer {\ttfamily p} to the guard \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a659237ad7a68ced7c413f5358324dad3}{clear}} ()
\begin{DoxyCompactList}\small\item\em Clear value of the guard (valid only in linked state) \end{DoxyCompactList}\item 
{\footnotesize template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ }\\\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a280846f82c1d20eb15e1492e6a6e8cc0}{get}} () const
\begin{DoxyCompactList}\small\item\em Get the value currently protected (valid only in linked state) \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_ad6a8c7d734afa6d388436fb94c9c348d}{guarded\+\_\+pointer}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a7fd3280ed82dde703408b042ae8d5bc4}{get\+\_\+native}} () const
\begin{DoxyCompactList}\small\item\em Get native hazard pointer stored (valid only in linked state) \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
\subsubsection*{template$<$typename TLSManager$>$\newline
class cds\+::gc\+::details\+::generic\+\_\+\+HP$<$ TLSManager $>$\+::\+Guard}
Hazard Pointer guard 

\doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} guard is a hazard pointer. Additionally, the {\ttfamily Guard} class manages allocation and deallocation of the hazard pointer.

{\ttfamily Guard} object is movable but not copyable.

The guard object can be in two states\+:
\begin{DoxyItemize}
\item unlinked -\/ the guard is not linked with any internal hazard pointer. In this state no operation except {\ttfamily \doxylink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a9841405cb8882cf470780057bc64cd65}{link()}} and move assignment is supported.
\item linked (default) -\/ the guard allocates an internal hazard pointer and completely operable.
\end{DoxyItemize}

Due to performance reason the implementation does not check state of the guard at runtime.

\begin{DoxyWarning}{警告}
Move assignment transfers the guard in unlinked state, use with care. 
\end{DoxyWarning}


\doxysubsection{构造及析构函数说明}
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a8000a815b41557b4ab2cba79169ee3e3}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}!Guard@{Guard}}
\index{Guard@{Guard}!cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}
\doxysubsubsection{\texorpdfstring{Guard()}{Guard()}\hspace{0.1cm}{\footnotesize\ttfamily [1/4]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a8000a815b41557b4ab2cba79169ee3e3} 
template$<$typename TLSManager$>$ \\
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\+Guard\+::\+Guard (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Default ctor allocates a guard (hazard pointer) from thread-\/private storage 

\begin{DoxyWarning}{警告}
Can throw {\ttfamily not\+\_\+enough\+\_\+hazard\+\_\+ptr} if internal hazard pointer objects are exhausted. 
\end{DoxyWarning}
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_af04662d8067444d3f649aefa735c7a88}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}!Guard@{Guard}}
\index{Guard@{Guard}!cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}
\doxysubsubsection{\texorpdfstring{Guard()}{Guard()}\hspace{0.1cm}{\footnotesize\ttfamily [2/4]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_af04662d8067444d3f649aefa735c7a88} 
template$<$typename TLSManager$>$ \\
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\+Guard\+::\+Guard (\begin{DoxyParamCaption}\item[{std\+::nullptr\+\_\+t}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}, {\ttfamily [noexcept]}}



Initilalizes an unlinked guard i.\+e. the guard contains no hazard pointer. Used for move semantics support 

\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_ab9b2c2a9aa3789fe2062a56757a47b36}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}!Guard@{Guard}}
\index{Guard@{Guard}!cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}
\doxysubsubsection{\texorpdfstring{Guard()}{Guard()}\hspace{0.1cm}{\footnotesize\ttfamily [3/4]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_ab9b2c2a9aa3789fe2062a56757a47b36} 
template$<$typename TLSManager$>$ \\
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\+Guard\+::\+Guard (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard}{Guard}} \&\&}]{src}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}



Move ctor -\/ {\ttfamily src} guard becomes unlinked (transfer internal guard ownership) 

函数调用图\+:
% FIG 0
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_aef5d71d84061ba23c14b524655982053}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}!Guard@{Guard}}
\index{Guard@{Guard}!cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}
\doxysubsubsection{\texorpdfstring{Guard()}{Guard()}\hspace{0.1cm}{\footnotesize\ttfamily [4/4]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_aef5d71d84061ba23c14b524655982053} 
template$<$typename TLSManager$>$ \\
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\+Guard\+::\+Guard (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard}{Guard}} const \&}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



Copy ctor is prohibited -\/ the guard is not copyable 

函数调用图\+:
% FIG 1
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a9c9a7f370fae69c52ce0abd0ab626319}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}!````~Guard@{\texorpdfstring{$\sim$}{\string~}Guard}}
\index{````~Guard@{\texorpdfstring{$\sim$}{\string~}Guard}!cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}Guard()}{\string~Guard()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a9c9a7f370fae69c52ce0abd0ab626319} 
template$<$typename TLSManager$>$ \\
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\+Guard\+::\texorpdfstring{$\sim$}{\string~}\+Guard (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Frees the internal hazard pointer if the guard is in linked state 

函数调用图\+:
% FIG 2


\doxysubsection{成员函数说明}
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_aab25cd1ae7f62b56f79d8cbca52a8ea4}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}!assign@{assign}}
\index{assign@{assign}!cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}
\doxysubsubsection{\texorpdfstring{assign()}{assign()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_aab25cd1ae7f62b56f79d8cbca52a8ea4} 
template$<$typename TLSManager$>$ \\
template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} BITMASK$>$ \\
\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\+Guard\+::assign (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcds_1_1details_1_1marked__ptr}{cds\+::details\+::marked\+\_\+ptr}}$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, BITMASK $>$}]{p}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Store marked pointer {\ttfamily p} to the guard 

The function equals to a simple assignment of {\ttfamily p.\+ptr()}, no loop is performed. Can be used for a marked pointer that cannot be changed concurrently or if the marked pointer is already guarded by another guard.

\begin{DoxyWarning}{警告}
The guard object should be in linked state, otherwise the result is undefined 
\end{DoxyWarning}
函数调用图\+:
% FIG 3
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a6f8468ee7ad22af90c48d1408043d35d}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}!assign@{assign}}
\index{assign@{assign}!cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}
\doxysubsubsection{\texorpdfstring{assign()}{assign()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a6f8468ee7ad22af90c48d1408043d35d} 
template$<$typename TLSManager$>$ \\
template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ \\
\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\+Guard\+::assign (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*}}]{p}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Store {\ttfamily p} to the guard 

The function equals to a simple assignment the value {\ttfamily p} to guard, no loop is performed. Can be used for a pointer that cannot be changed concurrently or if the pointer is already guarded by another guard.

\begin{DoxyWarning}{警告}
The guard object should be in linked state, otherwise the result is undefined 
\end{DoxyWarning}
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a659237ad7a68ced7c413f5358324dad3}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}!clear@{clear}}
\index{clear@{clear}!cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}
\doxysubsubsection{\texorpdfstring{clear()}{clear()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a659237ad7a68ced7c413f5358324dad3} 
template$<$typename TLSManager$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\+Guard\+::clear (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Clear value of the guard (valid only in linked state) 

函数调用图\+:
% FIG 4
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a214f148bc9dbd65174b14d8f0ee30c0a}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}!copy@{copy}}
\index{copy@{copy}!cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}
\doxysubsubsection{\texorpdfstring{copy()}{copy()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a214f148bc9dbd65174b14d8f0ee30c0a} 
template$<$typename TLSManager$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\+Guard\+::copy (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard}{Guard}} const \&}]{src}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Copy a value guarded from {\ttfamily src} guard to {\ttfamily this} guard (valid only in linked state) 

函数调用图\+:
% FIG 5
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a280846f82c1d20eb15e1492e6a6e8cc0}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}!get@{get}}
\index{get@{get}!cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}
\doxysubsubsection{\texorpdfstring{get()}{get()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a280846f82c1d20eb15e1492e6a6e8cc0} 
template$<$typename TLSManager$>$ \\
template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ \\
\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\+Guard\+::get (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Get the value currently protected (valid only in linked state) 

\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a7fd3280ed82dde703408b042ae8d5bc4}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}!get\_native@{get\_native}}
\index{get\_native@{get\_native}!cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}
\doxysubsubsection{\texorpdfstring{get\_native()}{get\_native()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a7fd3280ed82dde703408b042ae8d5bc4} 
template$<$typename TLSManager$>$ \\
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_ad6a8c7d734afa6d388436fb94c9c348d}{guarded\+\_\+pointer}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\+Guard\+::get\+\_\+native (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Get native hazard pointer stored (valid only in linked state) 

\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a5a486477a778f54307fcf63fa1a16584}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}!is\_linked@{is\_linked}}
\index{is\_linked@{is\_linked}!cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}
\doxysubsubsection{\texorpdfstring{is\_linked()}{is\_linked()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a5a486477a778f54307fcf63fa1a16584} 
template$<$typename TLSManager$>$ \\
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\+Guard\+::is\+\_\+linked (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Checks if the guard object linked with any internal hazard pointer 

\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a9841405cb8882cf470780057bc64cd65}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}!link@{link}}
\index{link@{link}!cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}
\doxysubsubsection{\texorpdfstring{link()}{link()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a9841405cb8882cf470780057bc64cd65} 
template$<$typename TLSManager$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\+Guard\+::link (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Links the guard with internal hazard pointer if the guard is in unlinked state 

\begin{DoxyWarning}{警告}
Can throw {\ttfamily \doxylink{classcds_1_1gc_1_1details_1_1generic___h_p_aab46f6b24e3fe68cdf14c5191f906f91}{not\+\_\+enough\+\_\+hazard\+\_\+ptr\+\_\+exception}} if internal hazard pointer array is exhausted. 
\end{DoxyWarning}
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a87bbd70d82164fccc228b128c2a4382c}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}!operator=@{operator=}}
\index{operator=@{operator=}!cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a87bbd70d82164fccc228b128c2a4382c} 
template$<$typename TLSManager$>$ \\
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard}{Guard}} \& \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\+Guard\+::operator= (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard}{Guard}} \&\&}]{src}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}



Move assignment\+: the internal guards are swapped between {\ttfamily src} and {\ttfamily this} 

\begin{DoxyWarning}{警告}
{\ttfamily src} will become in unlinked state if {\ttfamily this} was unlinked on entry. 
\end{DoxyWarning}
函数调用图\+:
% FIG 6
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a60a0ce7149e11618bfc3120e4415c4f5}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}!operator=@{operator=}}
\index{operator=@{operator=}!cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_a60a0ce7149e11618bfc3120e4415c4f5} 
template$<$typename TLSManager$>$ \\
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard}{Guard}} \& \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\+Guard\+::operator= (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard}{Guard}} const \&}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



Copy assignment is prohibited 

函数调用图\+:
% FIG 7
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_ae6c5a281bb784c2372b8f85b33e46096}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}!protect@{protect}}
\index{protect@{protect}!cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}
\doxysubsubsection{\texorpdfstring{protect()}{protect()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_ae6c5a281bb784c2372b8f85b33e46096} 
template$<$typename TLSManager$>$ \\
template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ \\
\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\+Guard\+::protect (\begin{DoxyParamCaption}\item[{atomics\+::atomic$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} $>$ const \&}]{to\+Guard}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Protects a pointer of type {\ttfamily atomic$<$\+T\texorpdfstring{$\ast$}{*}$>$} 

Return the value of {\ttfamily to\+Guard} 

The function tries to load {\ttfamily to\+Guard} and to store it to the \doxylink{namespacecds_1_1gc_af0523881f089593a7559d194ee2b5dd9}{HP} slot repeatedly until the guard\textquotesingle{}s value equals {\ttfamily to\+Guard} 

\begin{DoxyWarning}{警告}
The guard object should be in linked state, otherwise the result is undefined 
\end{DoxyWarning}
函数调用图\+:
% FIG 8
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_acfad23a4158428864e06485abfd5d808}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}!protect@{protect}}
\index{protect@{protect}!cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}
\doxysubsubsection{\texorpdfstring{protect()}{protect()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_acfad23a4158428864e06485abfd5d808} 
template$<$typename TLSManager$>$ \\
template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}, class Func$>$ \\
\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\+Guard\+::protect (\begin{DoxyParamCaption}\item[{atomics\+::atomic$<$ \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} $>$ const \&}]{to\+Guard}{, }\item[{Func}]{f}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Protects a converted pointer of type {\ttfamily atomic$<$\+T\texorpdfstring{$\ast$}{*}$>$} 

Return the value of {\ttfamily to\+Guard} 

The function tries to load {\ttfamily to\+Guard} and to store result of {\ttfamily f} functor to the \doxylink{namespacecds_1_1gc_af0523881f089593a7559d194ee2b5dd9}{HP} slot repeatedly until the guard\textquotesingle{}s value equals {\ttfamily to\+Guard}.

The function is useful for intrusive containers when {\ttfamily to\+Guard} is a node pointer that should be converted to a pointer to the value before protecting. The parameter {\ttfamily f} of type Func is a functor that makes this conversion\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct\ }functor\ \{}
\DoxyCodeLine{\ \ \ \ value\_type\ *\ operator()(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ );}
\DoxyCodeLine{\};}

\end{DoxyCode}
 Actually, the result of {\ttfamily  f( to\+Guard.\+load()) } is assigned to the hazard pointer.

\begin{DoxyWarning}{警告}
The guard object should be in linked state, otherwise the result is undefined 
\end{DoxyWarning}
函数调用图\+:
% FIG 9
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_aa846fc1eb54bcd221e91be8111c0cf9e}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}!unlink@{unlink}}
\index{unlink@{unlink}!cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard@{cds::gc::details::generic\_HP$<$ TLSManager $>$::Guard}}
\doxysubsubsection{\texorpdfstring{unlink()}{unlink()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_aa846fc1eb54bcd221e91be8111c0cf9e} 
template$<$typename TLSManager$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\+Guard\+::unlink (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Unlinks the guard from internal hazard pointer; the guard becomes in unlinked state 



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/libcds/cds/gc/\mbox{\hyperlink{hp_8h}{hp.\+h}}\end{DoxyCompactItemize}
