\doxysection{Spine\+Event\+Monitor.\+h}
\hypertarget{_spine_event_monitor_8h_source}{}\label{_spine_event_monitor_8h_source}\index{external/spine-\/runtimes/spine-\/c/spine-\/c-\/unit-\/tests/tests/SpineEventMonitor.h@{external/spine-\/runtimes/spine-\/c/spine-\/c-\/unit-\/tests/tests/SpineEventMonitor.h}}
\mbox{\hyperlink{_spine_event_monitor_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00002\ \textcolor{comment}{//\ \ filename:\ \ \ SpineEventMonitor.h}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ \ }}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ \ purpose:\ \ \ \ Monitor\ spAnimationState\ Events}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{comment}{//\ forward\ declarations}}
\DoxyCodeLine{00013\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structsp_animation_state}{spAnimationState}}\ \mbox{\hyperlink{structsp_animation_state}{spAnimationState}};}
\DoxyCodeLine{00014\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structsp_track_entry}{spTrackEntry}}\ \mbox{\hyperlink{structsp_track_entry}{spTrackEntry}};}
\DoxyCodeLine{00015\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structsp_event}{spEvent}}\ \mbox{\hyperlink{structsp_event}{spEvent}};}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00018\ \textcolor{comment}{//\ \ class:\ \ SpineEventMonitor}}
\DoxyCodeLine{00019\ \textcolor{comment}{//\ \ }}
\DoxyCodeLine{00020\ \textcolor{comment}{//\ \ purpose:\ \ \ \ Monitor\ spAnimationState\ Events\ and\ report\ when\ there}}
\DoxyCodeLine{00021\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ are\ no\ more\ spTrackEntry(s)\ waiting\ to\ play\ on\ track\ 0;}}
\DoxyCodeLine{00022\ \textcolor{comment}{//}}
\DoxyCodeLine{00023\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ Also\ allows\ for\ debug\ printing\ of\ Events\ to\ console.}}
\DoxyCodeLine{00025\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_spine_event_monitor_af78e560f1b733985b62249d395519a6d}{SpineEventMonitor}}\ \{}
\DoxyCodeLine{00026\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{class_spine_event_monitor_af78e560f1b733985b62249d395519a6d}{SpineEventMonitor}}(\mbox{\hyperlink{_spine_event_monitor_8h_ad6c4434133f22e63b8177ea92e161855}{spAnimationState}}\ *\_pAnimationState\ =\ 0);}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{class_spine_event_monitor_aff82ef02435c1699526b657bb22206b5}{\string~SpineEventMonitor}}();}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_spine_event_monitor_aae5aea6cb45160a9efedb2bb4ce9e570}{RegisterListener}}(\mbox{\hyperlink{_spine_event_monitor_8h_ad6c4434133f22e63b8177ea92e161855}{spAnimationState}}\ *\_pAnimationState);}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_spine_event_monitor_a84ddcbb418d7bacc9228fcd8eb323b06}{SetDebugLogging}}(\textcolor{keywordtype}{bool}\ val)\ \{\ \mbox{\hyperlink{class_spine_event_monitor_ad3ac35c2f4a3bf431d5c8fe3da98ac1f}{bLogging}}\ =\ val;\ \}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_spine_event_monitor_af8a5ab44f68a199548cbde30ce6ad760}{GetDebugLogging}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_spine_event_monitor_ad3ac35c2f4a3bf431d5c8fe3da98ac1f}{bLogging}};\ \}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_spine_event_monitor_ac21ac18f4c051ccfd1074dbd2fb6222e}{isAnimationPlaying}}();}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_spine_event_monitor_af764a05c641d0efc7e7451c14cc09934}{spineAnimStateHandler}}(\mbox{\hyperlink{structsp_animation_state}{spAnimationState}}\ *state,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{type}},\ \mbox{\hyperlink{structsp_track_entry}{spTrackEntry}}\ *entry,\ \mbox{\hyperlink{structsp_event}{spEvent}}\ *\mbox{\hyperlink{classevent}{event}});}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00043\ \ \ \ \ \mbox{\hyperlink{class_spine_event_monitor_a6c13f9fc05ee837e40b6e49f2b8b9c39}{OnSpineAnimationStateEvent}}(\mbox{\hyperlink{structsp_animation_state}{spAnimationState}}\ *state,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{type}},\ \mbox{\hyperlink{structsp_track_entry}{spTrackEntry}}\ *trackEntry,\ \mbox{\hyperlink{structsp_event}{spEvent}}\ *\mbox{\hyperlink{classevent}{event}});}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00046\ \ \ \ \ \mbox{\hyperlink{_spine_event_monitor_8h_ad6c4434133f22e63b8177ea92e161855}{spAnimationState}}\ *\mbox{\hyperlink{class_spine_event_monitor_ab4250aa12c1872b590006557b81039db}{pAnimState}};}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_spine_event_monitor_ad3ac35c2f4a3bf431d5c8fe3da98ac1f}{bLogging}};}
\DoxyCodeLine{00048\ \};}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00051\ \textcolor{comment}{//\ \ class:\ \ InterruptMonitor}}
\DoxyCodeLine{00052\ \textcolor{comment}{//\ \ }}
\DoxyCodeLine{00053\ \textcolor{comment}{//\ \ purpose:\ \ \ \ Allows\ a\ programmer\ to\ interrupt/stop\ the\ updating}}
\DoxyCodeLine{00054\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ of\ an\ animation\ based\ on\ a\ specific\ sequence\ of}}
\DoxyCodeLine{00055\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ events\ generated\ by\ the\ animation.}}
\DoxyCodeLine{00057\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_interrupt_monitor_ad03da06dabce50581a5a418337d17d57}{InterruptMonitor}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_spine_event_monitor_af78e560f1b733985b62249d395519a6d}{SpineEventMonitor}}\ \{}
\DoxyCodeLine{00058\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_interrupt_monitor_1_1_interrupt_event_a3776cc4a4e70f9cf8ed7741a2ab867be}{InterruptEvent}}\ \{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_interrupt_monitor_1_1_interrupt_event_a3776cc4a4e70f9cf8ed7741a2ab867be}{InterruptEvent}}()\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_interrupt_monitor_1_1_interrupt_event_a6f53df1fc358c954701862c8f6af3e36}{mEventType}}\ =\ -\/1;\ \textcolor{comment}{//\ invalid}}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_interrupt_monitor_1_1_interrupt_event_a7233a9e7a97ad06a9b06c047966e861d}{mTrackEntry}}\ =\ 0;}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_interrupt_monitor_1_1_interrupt_event_a915c86ef58401f18f9757b5e2e9e2f8e}{matches}}(\mbox{\hyperlink{_spine_event_monitor_8h_ad6c4434133f22e63b8177ea92e161855}{spAnimationState}}\ *state,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{type}},\ \mbox{\hyperlink{_spine_event_monitor_8h_aff22900cf9efe928bef14bf376379e75}{spTrackEntry}}\ *trackEntry,\ \mbox{\hyperlink{_spine_event_monitor_8h_aa9fc2bc476d230eea03df38d7842ecf9}{spEvent}}\ *\mbox{\hyperlink{classevent}{event}});}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ std::string\ \mbox{\hyperlink{struct_interrupt_monitor_1_1_interrupt_event_a17e888989286c85d35a5c39d1c550756}{mAnimName}};}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_interrupt_monitor_1_1_interrupt_event_a6f53df1fc358c954701862c8f6af3e36}{mEventType}};}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_spine_event_monitor_8h_aff22900cf9efe928bef14bf376379e75}{spTrackEntry}}\ *\mbox{\hyperlink{struct_interrupt_monitor_1_1_interrupt_event_a7233a9e7a97ad06a9b06c047966e861d}{mTrackEntry}};}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ std::string\ \mbox{\hyperlink{struct_interrupt_monitor_1_1_interrupt_event_aa69a227ba4281087743cc4c919cba651}{mEventName}};}
\DoxyCodeLine{00071\ \ \ \ \ \};}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keyword}{typedef}\ std::vector<InterruptEvent>\ \mbox{\hyperlink{class_interrupt_monitor_a5a3f243ba81db37cd69ded36e7d4dfe6}{InterruptEventStack}};}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00077\ \ \ \ \ \mbox{\hyperlink{class_interrupt_monitor_ad03da06dabce50581a5a418337d17d57}{InterruptMonitor}}(\mbox{\hyperlink{_spine_event_monitor_8h_ad6c4434133f22e63b8177ea92e161855}{spAnimationState}}\ *\_pAnimationState\ =\ 0);}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \mbox{\hyperlink{class_interrupt_monitor_a7fffd1a4a40f61ab8c0b90ad2fb4a090}{\string~InterruptMonitor}}()\ \{\}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_interrupt_monitor_a1c22a7675d7239ed409074e6e21bac7e}{isAnimationPlaying}}()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00084\ \ \ \ \ \mbox{\hyperlink{class_interrupt_monitor}{InterruptMonitor}}\ \&\mbox{\hyperlink{class_interrupt_monitor_af424b8d3a371678749fef7622ad75154}{AddInterruptEvent}}(\textcolor{keywordtype}{int}\ theEventType);}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ \mbox{\hyperlink{class_interrupt_monitor}{InterruptMonitor}}\ \&\mbox{\hyperlink{class_interrupt_monitor_af424b8d3a371678749fef7622ad75154}{AddInterruptEvent}}(\textcolor{keywordtype}{int}\ theEventType,\ \textcolor{keyword}{const}\ std::string\ \&theAnimationName);}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \mbox{\hyperlink{class_interrupt_monitor}{InterruptMonitor}}\ \&\mbox{\hyperlink{class_interrupt_monitor_af424b8d3a371678749fef7622ad75154}{AddInterruptEvent}}(\textcolor{keywordtype}{int}\ theEventType,\ \mbox{\hyperlink{structsp_track_entry}{spTrackEntry}}\ *theTrackEntry);}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \mbox{\hyperlink{class_interrupt_monitor}{InterruptMonitor}}\ \&\mbox{\hyperlink{class_interrupt_monitor_a101a2ddffa8d82e65cda0fe434279a09}{AddInterruptEventTrigger}}(\textcolor{keyword}{const}\ std::string\ \&theEventTriggerName);}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00094\ \ \ \ \ \mbox{\hyperlink{class_interrupt_monitor_a6d38d83fad653e4b1047fee75d5b7b4e}{OnSpineAnimationStateEvent}}(\mbox{\hyperlink{structsp_animation_state}{spAnimationState}}\ *state,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{type}},\ \mbox{\hyperlink{structsp_track_entry}{spTrackEntry}}\ *trackEntry,\ \mbox{\hyperlink{structsp_event}{spEvent}}\ *\mbox{\hyperlink{classevent}{event}})\ \textcolor{keyword}{override};}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_interrupt_monitor_a8b63e46c989cbf6f642562b2bb7dff98}{OnMatchingComplete}}()\ \{\}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_interrupt_monitor_a017cbf017032e2f5027a935967ab763c}{bForceInterrupt}};}
\DoxyCodeLine{00100\ \ \ \ \ \mbox{\hyperlink{class_interrupt_monitor_a5a3f243ba81db37cd69ded36e7d4dfe6}{InterruptEventStack}}\ \mbox{\hyperlink{class_interrupt_monitor_a311e4b6b64b091496d387a439591c0fe}{mEventStack}};\ \textcolor{comment}{//\ must\ match\ these\ events\ in\ this\ order}}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_interrupt_monitor_ae1ac19e66d366a4cbc209023c21e9a85}{mEventStackCursor}};}
\DoxyCodeLine{00102\ \};}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \textcolor{comment}{/*}}
\DoxyCodeLine{00105\ \textcolor{comment}{}}
\DoxyCodeLine{00106\ \textcolor{comment}{EXAMPLE}}
\DoxyCodeLine{00107\ \textcolor{comment}{=======}}
\DoxyCodeLine{00108\ \textcolor{comment}{}}
\DoxyCodeLine{00109\ \textcolor{comment}{SpineEventMonitor\ eventMonitor(state);}}
\DoxyCodeLine{00110\ \textcolor{comment}{eventMonitor.SetDebugLogging(true);}}
\DoxyCodeLine{00111\ \textcolor{comment}{}}
\DoxyCodeLine{00112\ \textcolor{comment}{while(eventMonitor.isAnimationPlaying())\{}}
\DoxyCodeLine{00113\ \textcolor{comment}{\ \ \ \ //\ update...}}
\DoxyCodeLine{00114\ \textcolor{comment}{\}}}
\DoxyCodeLine{00115\ \textcolor{comment}{}}
\DoxyCodeLine{00116\ \textcolor{comment}{}}
\DoxyCodeLine{00117\ \textcolor{comment}{}}
\DoxyCodeLine{00118\ \textcolor{comment}{EXAMPLE}}
\DoxyCodeLine{00119\ \textcolor{comment}{=======}}
\DoxyCodeLine{00120\ \textcolor{comment}{}}
\DoxyCodeLine{00121\ \textcolor{comment}{InterruptMonitor\ eventMonitor(state);}}
\DoxyCodeLine{00122\ \textcolor{comment}{eventMonitor.SetDebugLogging(true);}}
\DoxyCodeLine{00123\ \textcolor{comment}{}}
\DoxyCodeLine{00124\ \textcolor{comment}{//\ Interrupt\ the\ animation\ on\ this\ specific\ sequence\ of\ spEventType(s)}}
\DoxyCodeLine{00125\ \textcolor{comment}{eventMonitor}}
\DoxyCodeLine{00126\ \textcolor{comment}{\ \ \ \ .AddInterruptEvent(SP\_ANIMATION\_INTERRUPT,\ "{}jump"{})\ \ //\ First,\ wait\ for\ INTERRUPT\ signal\ on\ the\ 'jump'\ animation\ spTrackEntry}}
\DoxyCodeLine{00127\ \textcolor{comment}{\ \ \ \ .AddInterruptEvent(SP\_ANIMATION\_START);\ \ \ \ \ \ \ \ \ \ \ \ \ //\ Then,\ stop\ on\ any\ following\ START\ signal}}
\DoxyCodeLine{00128\ \textcolor{comment}{}}
\DoxyCodeLine{00129\ \textcolor{comment}{}}
\DoxyCodeLine{00130\ \textcolor{comment}{*/}}

\end{DoxyCode}
