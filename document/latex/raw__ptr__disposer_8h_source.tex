\doxysection{raw\+\_\+ptr\+\_\+disposer.\+h}
\hypertarget{raw__ptr__disposer_8h_source}{}\label{raw__ptr__disposer_8h_source}\index{external/libcds/cds/intrusive/details/raw\_ptr\_disposer.h@{external/libcds/cds/intrusive/details/raw\_ptr\_disposer.h}}
\mbox{\hyperlink{raw__ptr__disposer_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ (c)\ 2006-\/2018\ Maxim\ Khizhinsky}}
\DoxyCodeLine{00002\ \textcolor{comment}{//}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ Distributed\ under\ the\ Boost\ Software\ License,\ Version\ 1.0.\ (See\ accompanying}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ file\ LICENSE\ or\ copy\ at\ http://www.boost.org/LICENSE\_1\_0.txt)}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#ifndef\ CDSLIB\_INTRUSIVE\_DETAILS\_RAW\_PTR\_DISPOSER\_H}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#define\ CDSLIB\_INTRUSIVE\_DETAILS\_RAW\_PTR\_DISPOSER\_H}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{details_2defs_8h}{cds/details/defs.h}}>}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00012\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds}{cds}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds_1_1intrusive}{intrusive}}\ \{\ \textcolor{keyword}{namespace\ }details\ \{}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ RCU,\ \textcolor{keyword}{typename}\ NodeType,\ \textcolor{keyword}{typename}\ Disposer>}
\DoxyCodeLine{00015\ \ \ \ \ \textcolor{keyword}{struct\ }raw\_ptr\_disposer}
\DoxyCodeLine{00016\ \ \ \ \ \{}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ RCU\ \mbox{\hyperlink{3rd-party_2tbb_2examples_2common_2gui_2xvideo_8cpp_a5da9d24666f1955a9b5ce3d2583b823a}{gc}};}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ NodeType\ node\_type;}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ Disposer\ disposer;}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ node\_type\ *\ \ \ \ \ pReclaimedChain;}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ raw\_ptr\_disposer()}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \ \ \ \ :\ pReclaimedChain(\ nullptr\ )}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Position>}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ raw\_ptr\_disposer(\ Position\&\ pos\ )}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \ \ \ \ :\ pReclaimedChain(\ pos.pDelChain\ )}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ \ \ pos.pDelChain\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ raw\_ptr\_disposer(\ raw\_ptr\_disposer\&\&\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ )}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \ \ \ \ :\ pReclaimedChain(\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.pReclaimedChain\ )}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.pReclaimedChain\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ raw\_ptr\_disposer(\ raw\_ptr\_disposer\ \textcolor{keyword}{const}\&\ )\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \string~raw\_ptr\_disposer()}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerfl_aaa94742afd7fde0d6d6cc59ae6d92989}{apply}}();}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ raw\_ptr\_disposer\&\ \mbox{\hyperlink{namespacenlohmann_1_1detail_a66eb4d912b6f872d6983f7d0826f32c6}{combine}}(raw\_ptr\_disposer\&\&\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}})}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pReclaimedChain\ ==\ \textcolor{keyword}{nullptr}\ )}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pReclaimedChain\ =\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.pReclaimedChain;}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.pReclaimedChain\ )\ \{}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ union\ reclaimed\ chains}}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ node\_type\ *\ pEnd\ =\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.pReclaimedChain;}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ ;\ pEnd-\/>m\_pDelChain;\ pEnd\ =\ pEnd-\/>m\_pDelChain\ );}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pEnd-\/>m\_pDelChain\ =\ pReclaimedChain;}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pReclaimedChain\ =\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.pReclaimedChain;}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.pReclaimedChain\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ raw\_ptr\_disposer\&\ operator=(raw\_ptr\_disposer\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}})\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ raw\_ptr\_disposer\&\ operator=(\ raw\_ptr\_disposer\&\&\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ )\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacerfl_aaa94742afd7fde0d6d6cc59ae6d92989}{apply}}()}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pReclaimedChain\ )\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ !gc::is\_locked());}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ disposer()(\ pReclaimedChain\ );}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pReclaimedChain\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00073\ \ \ \ \ \};}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \}\}\}\ \textcolor{comment}{//\ namespace\ cds::intrusive::details}}
\DoxyCodeLine{00076\ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \#ifndef\ CDSLIB\_INTRUSIVE\_DETAILS\_RAW\_PTR\_DISPOSER\_H}}

\end{DoxyCode}
