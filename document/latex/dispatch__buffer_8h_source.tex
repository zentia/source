\doxysection{dispatch\+\_\+buffer.\+h}
\hypertarget{dispatch__buffer_8h_source}{}\label{dispatch__buffer_8h_source}\index{runtime/runtime/dispatch\_buffer.h@{runtime/runtime/dispatch\_buffer.h}}
\mbox{\hyperlink{dispatch__buffer_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{runtime_2rhi_2resource_8h}{runtime/runtime/rhi/resource.h}}>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{device__interface_8h}{runtime/runtime/rhi/device\_interface.h}}>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{type__registry_8h}{runtime/ast/type\_registry.h}}>}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceluisa_1_1compute}{luisa::compute}}\ \{}
\DoxyCodeLine{00008\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1_indirect_kernel_dispatch}{IndirectKernelDispatch}}\ \{\};}
\DoxyCodeLine{00009\ \textcolor{keyword}{class\ }IndirectDispatchBuffer;}
\DoxyCodeLine{00010\ \}\textcolor{comment}{//\ namespace\ luisa::compute}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \mbox{\hyperlink{type__registry_8h_a7d0adb20499072a3ce1ad8114cf1927d}{LUISA\_CUSTOM\_STRUCT\_REFLECT}}(luisa::compute::IndirectKernelDispatch,}
\DoxyCodeLine{00013\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}LC\_IndirectKernelDispatch"{}})}
\DoxyCodeLine{00014\ \mbox{\hyperlink{type__registry_8h_a7d0adb20499072a3ce1ad8114cf1927d}{LUISA\_CUSTOM\_STRUCT\_REFLECT}}(\mbox{\hyperlink{namespaceluisa}{luisa}}::\mbox{\hyperlink{namespaceluisa_1_1compute}{compute}}::IndirectDispatchBuffer,}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}LC\_IndirectDispatchBuffer"{}})}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ namespace\ \mbox{\hyperlink{namespaceluisa}{luisa}}::\mbox{\hyperlink{namespaceluisa_1_1compute}{compute}}\ \{}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedetail}{detail}}\ \{}
\DoxyCodeLine{00020\ \textcolor{keyword}{class\ }IndirectDispatchBufferExprProxy;}
\DoxyCodeLine{00021\ \}\textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{class\ }\mbox{\hyperlink{dll__export_8h_ad06d699c99cabff41979e596b53ac25a}{LC\_RUNTIME\_API}}\ IndirectDispatchBuffer\ final\ :\ \textcolor{keyword}{public}\ Resource\ \{}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \_capacity\{\};}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \_byte\_size\{\};}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }Device;}
\DoxyCodeLine{00031\ \ \ \ \ IndirectDispatchBuffer(DeviceInterface\ *device,\ \textcolor{keywordtype}{size\_t}\ capacity,\ BufferCreationInfo\ info)\ noexcept}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ :\ Resource\{device,\ Tag::BUFFER,\ \mbox{\hyperlink{namespacespdlog_1_1level_a335eabf5eff13482903eb26be08f3861a7f09db55ad64d87e4124f10582cb016f}{info}}\},}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \_capacity\{capacity\},}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \_byte\_size\{\mbox{\hyperlink{namespacespdlog_1_1level_a335eabf5eff13482903eb26be08f3861a7f09db55ad64d87e4124f10582cb016f}{info}}.total\_size\_bytes\}\ \{\}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00037\ \ \ \ \ IndirectDispatchBuffer(DeviceInterface\ *device,\ \textcolor{keywordtype}{size\_t}\ capacity)\ noexcept}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ :\ IndirectDispatchBuffer\{device,\ capacity,}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device-\/>create\_buffer(Type::of<IndirectKernelDispatch>(),\ capacity,\ \textcolor{keyword}{nullptr})\}\ \{}
\DoxyCodeLine{00040\ \ \ \ \ \}}
\DoxyCodeLine{00041\ \ \ \ \ IndirectDispatchBuffer()\ noexcept\ =\ \mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}};}
\DoxyCodeLine{00042\ \ \ \ \ \string~IndirectDispatchBuffer()\ noexcept\ override;}
\DoxyCodeLine{00043\ \ \ \ \ IndirectDispatchBuffer(IndirectDispatchBuffer\ \&\&)\ noexcept\ =\ \mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}};}
\DoxyCodeLine{00044\ \ \ \ \ IndirectDispatchBuffer(IndirectDispatchBuffer\ const\ \&)\ noexcept\ =\ delete;}
\DoxyCodeLine{00045\ \ \ \ \ IndirectDispatchBuffer\ \&operator=(IndirectDispatchBuffer\ \&\&rhs)\ noexcept\ \{}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \_move\_from(std::move(rhs));}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00048\ \ \ \ \ \}}
\DoxyCodeLine{00049\ \ \ \ \ IndirectDispatchBuffer\ \&operator=(IndirectDispatchBuffer\ \textcolor{keyword}{const}\ \&)\ \textcolor{keyword}{noexcept}\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keyword}{using\ }Resource::operator\ \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}};}
\DoxyCodeLine{00051\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ capacity()\ const\ noexcept\ \{}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \_check\_is\_valid();}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_capacity;}
\DoxyCodeLine{00054\ \ \ \ \ \}}
\DoxyCodeLine{00055\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespaceluisa_a373bd6971e24eab4395bf0aaaac01ddb}{size\_bytes}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \_check\_is\_valid();}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_byte\_size;}
\DoxyCodeLine{00058\ \ \ \ \ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{comment}{//\ DSL\ interface}}
\DoxyCodeLine{00061\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ operator-\/>()\ const\ noexcept\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \_check\_is\_valid();}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }detail::IndirectDispatchBufferExprProxy\ *\textcolor{keyword}{>}(\textcolor{keyword}{this});}
\DoxyCodeLine{00064\ \ \ \ \ \}}
\DoxyCodeLine{00065\ \};}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \}\textcolor{comment}{//\ namespace\ luisa::compute}}

\end{DoxyCode}
