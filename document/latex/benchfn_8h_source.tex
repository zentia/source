\doxysection{benchfn.\+h}
\hypertarget{benchfn_8h_source}{}\label{benchfn_8h_source}\index{runtime/xxHash/tests/bench/benchfn.h@{runtime/xxHash/tests/bench/benchfn.h}}
\mbox{\hyperlink{benchfn_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *\ Copyright\ (C)\ 2016-\/2021\ Yann\ Collet,\ Facebook,\ Inc.}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ All\ rights\ reserved.}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ This\ source\ code\ is\ licensed\ under\ both\ the\ BSD-\/style\ license\ (found\ in\ the}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *\ LICENSE\ file\ in\ the\ root\ directory\ of\ this\ source\ tree)\ and\ the\ GPLv2\ (found}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ in\ the\ COPYING\ file\ in\ the\ root\ directory\ of\ this\ source\ tree).}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ You\ may\ select,\ at\ your\ option,\ one\ of\ the\ above-\/listed\ licenses.}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{comment}{/*\ benchfn\ :}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ benchmark\ any\ function\ on\ a\ set\ of\ input}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ providing\ result\ in\ nanoSecPerRun}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ or\ detecting\ and\ returning\ an\ error}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#if\ defined\ (\_\_cplusplus)}}
\DoxyCodeLine{00019\ \textcolor{keyword}{extern}\ \textcolor{stringliteral}{"{}C"{}}\ \{}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#ifndef\ BENCH\_FN\_H\_23876}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#define\ BENCH\_FN\_H\_23876}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{comment}{/*\ ===\ \ Dependencies\ \ ===\ */}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <stddef.h>}\ \ \ \textcolor{comment}{/*\ size\_t\ */}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{comment}{/*\ ====\ \ Benchmark\ any\ function,\ iterated\ on\ a\ set\ of\ blocks\ \ ====\ */}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{comment}{/*\ BMK\_runTime\_t:\ valid\ result\ return\ type\ */}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{struct_b_m_k__run_time__t_aea563abde2145dd7d20b78a55bbc09a9}{nanoSecPerRun}};\ \ \textcolor{comment}{/*\ time\ per\ iteration\ (over\ all\ blocks)\ */}}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{struct_b_m_k__run_time__t_a87c4c098a610caedbf2fa02e3880d405}{sumOfReturn}};\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ sum\ of\ return\ values\ */}}
\DoxyCodeLine{00036\ \}\ \mbox{\hyperlink{struct_b_m_k__run_time__t}{BMK\_runTime\_t}};}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{comment}{/*\ BMK\_runOutcome\_t:}}
\DoxyCodeLine{00040\ \textcolor{comment}{\ *\ type\ expressing\ the\ outcome\ of\ a\ benchmark\ run\ by\ BMK\_benchFunction(),}}
\DoxyCodeLine{00041\ \textcolor{comment}{\ *\ which\ can\ be\ either\ valid\ or\ invalid.}}
\DoxyCodeLine{00042\ \textcolor{comment}{\ *\ benchmark\ outcome\ can\ be\ invalid\ if\ errorFn\ is\ provided.}}
\DoxyCodeLine{00043\ \textcolor{comment}{\ *\ BMK\_runOutcome\_t\ must\ be\ considered\ "{}opaque"{}\ :\ never\ access\ its\ members\ directly.}}
\DoxyCodeLine{00044\ \textcolor{comment}{\ *\ Instead,\ use\ its\ assigned\ methods\ :}}
\DoxyCodeLine{00045\ \textcolor{comment}{\ *\ BMK\_isSuccessful\_runOutcome,\ BMK\_extract\_runTime,\ BMK\_extract\_errorResult.}}
\DoxyCodeLine{00046\ \textcolor{comment}{\ *\ The\ structure\ is\ only\ described\ here\ to\ allow\ its\ allocation\ on\ stack.\ */}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{struct_b_m_k__run_time__t}{BMK\_runTime\_t}}\ \mbox{\hyperlink{struct_b_m_k__run_outcome__t_a707af8557357d4aa805a6f61401e555c}{internal\_never\_ever\_use\_directly}};}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{struct_b_m_k__run_outcome__t_a7a33645a560852e61bc95ef7741730d4}{error\_result\_never\_ever\_use\_directly}};}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_b_m_k__run_outcome__t_af121a2f1853684a2babd0b64cd5e1e26}{error\_tag\_never\_ever\_use\_directly}};}
\DoxyCodeLine{00052\ \}\ \mbox{\hyperlink{struct_b_m_k__run_outcome__t}{BMK\_runOutcome\_t}};}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \textcolor{comment}{/*\ prototypes\ for\ benchmarked\ functions\ */}}
\DoxyCodeLine{00056\ \textcolor{keyword}{typedef}\ size\_t\ (*\mbox{\hyperlink{benchfn_8h_a20785e0d02a5ead62d4edeb6fe3c0279}{BMK\_benchFn\_t}})(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ src,\ \textcolor{keywordtype}{size\_t}\ srcSize,\ \textcolor{keywordtype}{void}*\ dst,\ \textcolor{keywordtype}{size\_t}\ dstCapacity,\ \textcolor{keywordtype}{void}*\ customPayload);}
\DoxyCodeLine{00057\ \textcolor{keyword}{typedef}\ size\_t\ (*\mbox{\hyperlink{benchfn_8h_abbebef08f754115bd32ef53f07edbe59}{BMK\_initFn\_t}})(\textcolor{keywordtype}{void}*\ initPayload);}
\DoxyCodeLine{00058\ \textcolor{keyword}{typedef}\ unsigned\ (*\mbox{\hyperlink{benchfn_8h_a248fa121d2fbd638854d0260dd81475e}{BMK\_errorFn\_t}})(size\_t);}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \textcolor{comment}{/*\ BMK\_benchFunction()\ parameters\ are\ provided\ via\ the\ following\ structure.}}
\DoxyCodeLine{00062\ \textcolor{comment}{\ *\ A\ structure\ is\ preferable\ for\ readability,}}
\DoxyCodeLine{00063\ \textcolor{comment}{\ *\ as\ the\ number\ of\ parameters\ required\ is\ fairly\ large.}}
\DoxyCodeLine{00064\ \textcolor{comment}{\ *\ No\ initializer\ is\ provided,\ because\ it\ doesn't\ make\ sense\ to\ provide\ some\ "{}default"{}\ :}}
\DoxyCodeLine{00065\ \textcolor{comment}{\ *\ all\ parameters\ must\ be\ specified\ by\ the\ caller.}}
\DoxyCodeLine{00066\ \textcolor{comment}{\ *\ optional\ parameters\ are\ labelled\ explicitly,\ and\ accept\ value\ NULL\ when\ not\ used\ */}}
\DoxyCodeLine{00067\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{00068\ \ \ \ \ \mbox{\hyperlink{benchfn_8h_a20785e0d02a5ead62d4edeb6fe3c0279}{BMK\_benchFn\_t}}\ \mbox{\hyperlink{struct_b_m_k__bench_params__t_ad808884e83957c9ab90219061af9515e}{benchFn}};\ \ \ \ \textcolor{comment}{/*\ the\ function\ to\ benchmark,\ over\ the\ set\ of\ blocks\ */}}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{struct_b_m_k__bench_params__t_a9cefb347bb3035f82ce551b57e2a9d4e}{benchPayload}};\ \ \ \ \ \ \ \textcolor{comment}{/*\ pass\ custom\ parameters\ to\ benchFn\ \ :}}
\DoxyCodeLine{00070\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ (*benchFn)(srcBuffers[i],\ srcSizes[i],\ dstBuffers[i],\ dstCapacities[i],\ benchPayload)\ */}}
\DoxyCodeLine{00071\ \ \ \ \ \mbox{\hyperlink{benchfn_8h_abbebef08f754115bd32ef53f07edbe59}{BMK\_initFn\_t}}\ \mbox{\hyperlink{struct_b_m_k__bench_params__t_a5cc92c1dbdc2c0e6f818f7a31c4301dc}{initFn}};\ \ \ \ \ \ \textcolor{comment}{/*\ (*initFn)(initPayload)\ is\ run\ once\ per\ run,\ at\ the\ beginning.\ */}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{struct_b_m_k__bench_params__t_ad0a1dabc2f076d7c4e9c093d9ab34c5a}{initPayload}};\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Both\ arguments\ can\ be\ NULL,\ in\ which\ case\ nothing\ is\ run.\ */}}
\DoxyCodeLine{00073\ \ \ \ \ \mbox{\hyperlink{benchfn_8h_a248fa121d2fbd638854d0260dd81475e}{BMK\_errorFn\_t}}\ \mbox{\hyperlink{struct_b_m_k__bench_params__t_ae7f0ab0d3e6f12495f9c3c56e0005078}{errorFn}};\ \ \ \ \textcolor{comment}{/*\ errorFn\ will\ check\ each\ return\ value\ of\ benchFn\ over\ each\ block,\ to\ determine\ if\ it\ failed\ or\ not.}}
\DoxyCodeLine{00074\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ errorFn\ can\ be\ NULL,\ in\ which\ case\ no\ check\ is\ performed.}}
\DoxyCodeLine{00075\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ errorFn\ must\ return\ 0\ when\ benchFn\ was\ successful,\ and\ >=\ 1\ if\ it\ detects\ an\ error.}}
\DoxyCodeLine{00076\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Execution\ is\ stopped\ as\ soon\ as\ an\ error\ is\ detected.}}
\DoxyCodeLine{00077\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ the\ triggering\ return\ value\ can\ be\ retrieved\ using\ BMK\_extract\_errorResult().\ */}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{struct_b_m_k__bench_params__t_aa54f00f45335a770b8149b44dc1a6e9c}{blockCount}};\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ number\ of\ blocks\ to\ operate\ benchFn\ on.}}
\DoxyCodeLine{00079\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ It's\ also\ the\ size\ of\ all\ array\ parameters\ :}}
\DoxyCodeLine{00080\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ srcBuffers,\ srcSizes,\ dstBuffers,\ dstCapacities,\ blockResults\ */}}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *\textcolor{keyword}{const}\ *\ \mbox{\hyperlink{struct_b_m_k__bench_params__t_ac024d7311b55a13a8cd06ae192bd7f19}{srcBuffers}};\ \textcolor{comment}{/*\ read-\/only\ array\ of\ buffers\ to\ be\ operated\ on\ by\ benchFn\ */}}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}*\ \mbox{\hyperlink{struct_b_m_k__bench_params__t_a4d3f87a9de556fd259124c08777a2709}{srcSizes}};\ \ \ \textcolor{comment}{/*\ read-\/only\ array\ containing\ sizes\ of\ srcBuffers\ */}}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordtype}{void}\ *\textcolor{keyword}{const}\ *\ \mbox{\hyperlink{struct_b_m_k__bench_params__t_ad7ed37b3b3808e0549254bb6ea630aec}{dstBuffers}};\ \textcolor{comment}{/*\ array\ of\ buffers\ to\ be\ written\ into\ by\ benchFn.\ This\ array\ is\ not\ optional,\ it\ must\ be\ provided\ even\ if\ unused\ by\ benchfn.\ */}}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}*\ \mbox{\hyperlink{struct_b_m_k__bench_params__t_afe93ed7d6d5f39f0b7549fc6f048055b}{dstCapacities}};\ \textcolor{comment}{/*\ read-\/only\ array\ containing\ capacities\ of\ dstBuffers.\ This\ array\ must\ be\ present.\ */}}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{size\_t}*\ \mbox{\hyperlink{struct_b_m_k__bench_params__t_ab9d67e7137da13ce4b3b37f933301534}{blockResults}};\ \ \ \ \ \textcolor{comment}{/*\ Optional:\ store\ the\ return\ value\ of\ benchFn\ for\ each\ block.\ Use\ NULL\ if\ this\ result\ is\ not\ requested.\ */}}
\DoxyCodeLine{00086\ \}\ \mbox{\hyperlink{struct_b_m_k__bench_params__t}{BMK\_benchParams\_t}};}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \textcolor{comment}{/*\ BMK\_benchFunction()\ :}}
\DoxyCodeLine{00090\ \textcolor{comment}{\ *\ This\ function\ benchmarks\ benchFn\ and\ initFn,\ providing\ a\ result.}}
\DoxyCodeLine{00091\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00092\ \textcolor{comment}{\ *\ params\ :\ see\ description\ of\ BMK\_benchParams\_t\ above.}}
\DoxyCodeLine{00093\ \textcolor{comment}{\ *\ nbLoops:\ defines\ number\ of\ times\ benchFn\ is\ run\ over\ the\ full\ set\ of\ blocks.}}
\DoxyCodeLine{00094\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ Minimum\ value\ is\ 1.\ A\ 0\ is\ interpreted\ as\ a\ 1.}}
\DoxyCodeLine{00095\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00096\ \textcolor{comment}{\ *\ @return:\ can\ express\ either\ an\ error\ or\ a\ successful\ result.}}
\DoxyCodeLine{00097\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ Use\ BMK\_isSuccessful\_runOutcome()\ to\ check\ if\ benchmark\ was\ successful.}}
\DoxyCodeLine{00098\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ If\ yes,\ extract\ the\ result\ with\ BMK\_extract\_runTime(),}}
\DoxyCodeLine{00099\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ it\ will\ contain\ :}}
\DoxyCodeLine{00100\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ .sumOfReturn\ :\ the\ sum\ of\ all\ return\ values\ of\ benchFn\ through\ all\ of\ blocks}}
\DoxyCodeLine{00101\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ .nanoSecPerRun\ :\ time\ per\ run\ of\ benchFn\ +\ (time\ for\ initFn\ /\ nbLoops)}}
\DoxyCodeLine{00102\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ .sumOfReturn\ is\ generally\ intended\ for\ functions\ which\ return\ a\ \#\ of\ bytes\ written\ into\ dstBuffer,}}
\DoxyCodeLine{00103\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ in\ which\ case,\ this\ value\ will\ be\ the\ total\ amount\ of\ bytes\ written\ into\ dstBuffer.}}
\DoxyCodeLine{00104\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00105\ \textcolor{comment}{\ *\ blockResults\ :\ when\ provided\ (!=\ NULL),\ and\ when\ benchmark\ is\ successful,}}
\DoxyCodeLine{00106\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ params.blockResults\ contains\ all\ return\ values\ of\ \`{}benchFn`\ over\ all\ blocks.}}
\DoxyCodeLine{00107\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ when\ provided\ (!=\ NULL),\ and\ when\ benchmark\ failed,}}
\DoxyCodeLine{00108\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ params.blockResults\ contains\ return\ values\ of\ \`{}benchFn`\ over\ all\ blocks\ preceding\ and\ including\ the\ failed\ block.}}
\DoxyCodeLine{00109\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00110\ \mbox{\hyperlink{struct_b_m_k__run_outcome__t}{BMK\_runOutcome\_t}}\ \mbox{\hyperlink{benchfn_8h_a64e93ca6690023adfa13bea1f9b24b36}{BMK\_benchFunction}}(\mbox{\hyperlink{struct_b_m_k__bench_params__t}{BMK\_benchParams\_t}}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a22557289048c77f6913601e8537ceeea}{params}},\ \textcolor{keywordtype}{unsigned}\ nbLoops);}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \textcolor{comment}{/*\ check\ first\ if\ the\ benchmark\ was\ successful\ or\ not\ */}}
\DoxyCodeLine{00115\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{benchfn_8h_a66760bb869c5fa57e9046e69f8e79576}{BMK\_isSuccessful\_runOutcome}}(\mbox{\hyperlink{struct_b_m_k__run_outcome__t}{BMK\_runOutcome\_t}}\ outcome);}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \textcolor{comment}{/*\ If\ the\ benchmark\ was\ successful,\ extract\ the\ result.}}
\DoxyCodeLine{00118\ \textcolor{comment}{\ *\ note\ :\ this\ function\ will\ abort()\ program\ execution\ if\ benchmark\ failed\ !}}
\DoxyCodeLine{00119\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ always\ check\ if\ benchmark\ was\ successful\ first\ !}}
\DoxyCodeLine{00120\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00121\ \mbox{\hyperlink{struct_b_m_k__run_time__t}{BMK\_runTime\_t}}\ \mbox{\hyperlink{benchfn_8h_a9d1c34a115ae666e6efb53db86ba7970}{BMK\_extract\_runTime}}(\mbox{\hyperlink{struct_b_m_k__run_outcome__t}{BMK\_runOutcome\_t}}\ outcome);}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \textcolor{comment}{/*\ when\ benchmark\ failed,\ it\ means\ one\ invocation\ of\ \`{}benchFn`\ failed.}}
\DoxyCodeLine{00124\ \textcolor{comment}{\ *\ The\ failure\ was\ detected\ by\ \`{}errorFn`,\ operating\ on\ return\ values\ of\ \`{}benchFn`.}}
\DoxyCodeLine{00125\ \textcolor{comment}{\ *\ Returns\ the\ faulty\ return\ value.}}
\DoxyCodeLine{00126\ \textcolor{comment}{\ *\ note\ :\ this\ function\ will\ abort()\ program\ execution\ if\ benchmark\ did\ not\ failed.}}
\DoxyCodeLine{00127\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ always\ check\ if\ benchmark\ failed\ first\ !}}
\DoxyCodeLine{00128\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00129\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{benchfn_8h_af5e2d48604c5020050d067076ee15b0d}{BMK\_extract\_errorResult}}(\mbox{\hyperlink{struct_b_m_k__run_outcome__t}{BMK\_runOutcome\_t}}\ outcome);}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \textcolor{comment}{/*\ ====\ \ Benchmark\ any\ function,\ returning\ intermediate\ results\ \ ====\ */}}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \textcolor{comment}{/*\ state\ information\ tracking\ benchmark\ session\ */}}
\DoxyCodeLine{00136\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_b_m_k__timed_fn_state__s}{BMK\_timedFnState\_s}}\ \mbox{\hyperlink{benchfn_8h_ad1dcec1bfa3f6897554c0d916452b8d0}{BMK\_timedFnState\_t}};}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \textcolor{comment}{/*\ BMK\_benchTimedFn()\ :}}
\DoxyCodeLine{00139\ \textcolor{comment}{\ *\ Similar\ to\ BMK\_benchFunction(),\ most\ arguments\ being\ identical.}}
\DoxyCodeLine{00140\ \textcolor{comment}{\ *\ Automatically\ determines\ \`{}nbLoops`\ so\ that\ each\ result\ is\ regularly\ produced\ at\ interval\ of\ about\ run\_ms.}}
\DoxyCodeLine{00141\ \textcolor{comment}{\ *\ Note\ :\ minimum\ \`{}nbLoops`\ is\ 1,\ therefore\ a\ run\ may\ last\ more\ than\ run\_ms,\ and\ possibly\ even\ more\ than\ total\_ms.}}
\DoxyCodeLine{00142\ \textcolor{comment}{\ *\ Usage\ -\/\ initialize\ timedFnState,\ select\ benchmark\ duration\ (total\_ms)\ and\ each\ measurement\ duration\ (run\_ms)}}
\DoxyCodeLine{00143\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ call\ BMK\_benchTimedFn()\ repetitively,\ each\ measurement\ is\ supposed\ to\ last\ about\ run\_ms}}
\DoxyCodeLine{00144\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ Check\ if\ total\ time\ budget\ is\ spent\ or\ exceeded,\ using\ BMK\_isCompleted\_TimedFn()}}
\DoxyCodeLine{00145\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00146\ \mbox{\hyperlink{struct_b_m_k__run_outcome__t}{BMK\_runOutcome\_t}}\ \mbox{\hyperlink{benchfn_8h_acaf5424bad0c5b77c5ba089576774216}{BMK\_benchTimedFn}}(\mbox{\hyperlink{benchfn_8h_ad1dcec1bfa3f6897554c0d916452b8d0}{BMK\_timedFnState\_t}}*\ timedFnState,}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_b_m_k__bench_params__t}{BMK\_benchParams\_t}}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a22557289048c77f6913601e8537ceeea}{params}});}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \textcolor{comment}{/*\ Tells\ if\ duration\ of\ all\ benchmark\ runs\ has\ exceeded\ total\_ms}}
\DoxyCodeLine{00150\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00151\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{benchfn_8h_a80d8ce922db19139b6fc1ed12353020f}{BMK\_isCompleted\_TimedFn}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{benchfn_8h_ad1dcec1bfa3f6897554c0d916452b8d0}{BMK\_timedFnState\_t}}*\ timedFnState);}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ \textcolor{comment}{/*\ BMK\_createTimedFnState()\ and\ BMK\_resetTimedFnState()\ :}}
\DoxyCodeLine{00154\ \textcolor{comment}{\ *\ Create/Set\ BMK\_timedFnState\_t\ for\ next\ benchmark\ session,}}
\DoxyCodeLine{00155\ \textcolor{comment}{\ *\ which\ shall\ last\ a\ minimum\ of\ total\_ms\ milliseconds,}}
\DoxyCodeLine{00156\ \textcolor{comment}{\ *\ producing\ intermediate\ results,\ paced\ at\ interval\ of\ (approximately)\ run\_ms.}}
\DoxyCodeLine{00157\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00158\ \mbox{\hyperlink{benchfn_8h_ad1dcec1bfa3f6897554c0d916452b8d0}{BMK\_timedFnState\_t}}*\ \mbox{\hyperlink{benchfn_8h_a10663ebc052f9b7780cf8dcb10facef8}{BMK\_createTimedFnState}}(\textcolor{keywordtype}{unsigned}\ total\_ms,\ \textcolor{keywordtype}{unsigned}\ run\_ms);}
\DoxyCodeLine{00159\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{benchfn_8h_aa4d1ed533155dcf33a598b4d7af1589d}{BMK\_resetTimedFnState}}(\mbox{\hyperlink{benchfn_8h_ad1dcec1bfa3f6897554c0d916452b8d0}{BMK\_timedFnState\_t}}*\ timedFnState,\ \textcolor{keywordtype}{unsigned}\ total\_ms,\ \textcolor{keywordtype}{unsigned}\ run\_ms);}
\DoxyCodeLine{00160\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{benchfn_8h_ac3e14a7a188597d5594263fb0f06bc33}{BMK\_freeTimedFnState}}(\mbox{\hyperlink{benchfn_8h_ad1dcec1bfa3f6897554c0d916452b8d0}{BMK\_timedFnState\_t}}*\ state);}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \textcolor{comment}{/*\ BMK\_timedFnState\_shell\ and\ BMK\_initStatic\_timedFnState()\ :}}
\DoxyCodeLine{00164\ \textcolor{comment}{\ *\ Makes\ it\ possible\ to\ statically\ allocate\ a\ BMK\_timedFnState\_t\ on\ stack.}}
\DoxyCodeLine{00165\ \textcolor{comment}{\ *\ BMK\_timedFnState\_shell\ is\ only\ there\ to\ allocate\ space,}}
\DoxyCodeLine{00166\ \textcolor{comment}{\ *\ never\ ever\ access\ its\ members.}}
\DoxyCodeLine{00167\ \textcolor{comment}{\ *\ BMK\_timedFnState\_t()\ actually\ accepts\ any\ buffer.}}
\DoxyCodeLine{00168\ \textcolor{comment}{\ *\ It\ will\ check\ if\ provided\ buffer\ is\ large\ enough\ and\ is\ correctly\ aligned,}}
\DoxyCodeLine{00169\ \textcolor{comment}{\ *\ and\ will\ return\ NULL\ if\ conditions\ are\ not\ respected.}}
\DoxyCodeLine{00170\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00171\ \textcolor{preprocessor}{\#define\ BMK\_TIMEDFNSTATE\_SIZE\ 64}}
\DoxyCodeLine{00172\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{union_b_m_k__timed_fn_state__shell_a8c08573c3150ae757b0ea71eca28a45f}{never\_access\_space}}[\mbox{\hyperlink{benchfn_8h_a2347cdf9ecd106a6d732dbb8c50de0e8}{BMK\_TIMEDFNSTATE\_SIZE}}];}
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{union_b_m_k__timed_fn_state__shell_a4b6065b5532dd446a16c33ab6f899177}{alignment\_enforcer}};\ \ \textcolor{comment}{/*\ must\ be\ aligned\ on\ 8-\/bytes\ boundaries\ */}}
\DoxyCodeLine{00175\ \}\ \mbox{\hyperlink{union_b_m_k__timed_fn_state__shell}{BMK\_timedFnState\_shell}};}
\DoxyCodeLine{00176\ \mbox{\hyperlink{benchfn_8h_ad1dcec1bfa3f6897554c0d916452b8d0}{BMK\_timedFnState\_t}}*\ \mbox{\hyperlink{benchfn_8h_a506be07f4abe99c18067e85f0105f5d9}{BMK\_initStatic\_timedFnState}}(\textcolor{keywordtype}{void}*\ \mbox{\hyperlink{sugar_8h_aaadc06b5dac8070de2c8677210967bdb}{buffer}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{unsigned}\ total\_ms,\ \textcolor{keywordtype}{unsigned}\ run\_ms);}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \textcolor{preprocessor}{\#endif\ \ \ }\textcolor{comment}{/*\ BENCH\_FN\_H\_23876\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \textcolor{preprocessor}{\#if\ defined\ (\_\_cplusplus)}}
\DoxyCodeLine{00182\ \}}
\DoxyCodeLine{00183\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
