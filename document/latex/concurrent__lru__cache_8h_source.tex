\doxysection{concurrent\+\_\+lru\+\_\+cache.\+h}
\hypertarget{concurrent__lru__cache_8h_source}{}\label{concurrent__lru__cache_8h_source}\index{external/taskflow/3rd-\/party/tbb/include/tbb/concurrent\_lru\_cache.h@{external/taskflow/3rd-\/party/tbb/include/tbb/concurrent\_lru\_cache.h}}
\mbox{\hyperlink{concurrent__lru__cache_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#ifndef\ \_\_TBB\_concurrent\_lru\_cache\_H}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#define\ \_\_TBB\_concurrent\_lru\_cache\_H}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#define\ \_\_TBB\_concurrent\_lru\_cache\_H\_include\_area}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{__warning__suppress__enable__notice_8h}{internal/\_warning\_suppress\_enable\_notice.h}}"{}}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#if\ !\ TBB\_PREVIEW\_CONCURRENT\_LRU\_CACHE}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\ \ \ \ \#error\ Set\ TBB\_PREVIEW\_CONCURRENT\_LRU\_CACHE\ to\ include\ concurrent\_lru\_cache.h}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{tbb__stddef_8h}{tbb\_stddef.h}}"{}}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ <map>}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ <list>}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ <algorithm>}\ \textcolor{comment}{//\ std::find}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#if\ \_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#include\ <utility>}\ \textcolor{comment}{//\ std::move}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2include_2tbb_2atomic_8h}{atomic.h}}"{}}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{__aggregator__impl_8h}{internal/\_aggregator\_impl.h}}"{}}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\{}
\DoxyCodeLine{00040\ \textcolor{keyword}{namespace\ }interface6\ \{}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ key\_type,\ \textcolor{keyword}{typename}\ value\_type,\ \textcolor{keyword}{typename}\ value\_functor\_type\ =\ value\_type\ (*)(key\_type)\ >}
\DoxyCodeLine{00044\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1concurrent__lru__cache_ad4c0b512bb4ad5109eaae1519ba06d98}{concurrent\_lru\_cache}}\ :\ internal::no\_assign\{}
\DoxyCodeLine{00045\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_ad4c0b512bb4ad5109eaae1519ba06d98}{concurrent\_lru\_cache}}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a073efad549bb14adff9f3dfb3b514b8e}{self\_type}};}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keyword}{typedef}\ value\_functor\_type\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a991c6b19d06e57bc2e6af477c89b60cc}{value\_function\_type}};}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{typedef}\ std::size\_t\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a242347b572774be539a8c689a0abe40c}{ref\_counter\_type}};}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1map__value__type}{map\_value\_type}};}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keyword}{typedef}\ std::map<key\_type,\ map\_value\_type>\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a902397815a15868cddacc432f9835a8a}{map\_storage\_type}};}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keyword}{typedef}\ std::list<typename\ map\_storage\_type::iterator>\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a4a0b59b32d62f10a7b2fdab9519c608f}{lru\_list\_type}};}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtbb_1_1concurrent__lru__cache_1_1map__value__type_a1db93cecad82950e2bcd8c122316005d}{map\_value\_type}}\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ value\_type\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1map__value__type_ac18fccdecf4c8df57bad98eabdac2762}{my\_value}};}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a242347b572774be539a8c689a0abe40c}{ref\_counter\_type}}\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1map__value__type_ac689cea5a92d04d58f3d58f32b59ac25}{my\_ref\_counter}};}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ lru\_list\_type::iterator\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1map__value__type_a84c3e246148b917462a060502c3e6af4}{my\_lru\_list\_iterator}};}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1map__value__type_a1795e62f19430a4c9412eaedbfccfb96}{my\_is\_ready}};}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1map__value__type_a1db93cecad82950e2bcd8c122316005d}{map\_value\_type}}\ (value\_type\ \textcolor{keyword}{const}\&\ a\_value,\ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a242347b572774be539a8c689a0abe40c}{ref\_counter\_type}}\ a\_ref\_counter,\ \ \ \ \textcolor{keyword}{typename}\ lru\_list\_type::iterator\ a\_lru\_list\_iterator,\ \textcolor{keywordtype}{bool}\ a\_is\_ready)}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1map__value__type_ac18fccdecf4c8df57bad98eabdac2762}{my\_value}}(a\_value),\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1map__value__type_ac689cea5a92d04d58f3d58f32b59ac25}{my\_ref\_counter}}(a\_ref\_counter),\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1map__value__type_a84c3e246148b917462a060502c3e6af4}{my\_lru\_list\_iterator}}\ (a\_lru\_list\_iterator),\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1map__value__type_a1795e62f19430a4c9412eaedbfccfb96}{my\_is\_ready}}(a\_is\_ready)}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00061\ \ \ \ \ \};}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keyword}{class\ }handle\_object;}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{classtbb_1_1interface6_1_1aggregator__operation}{aggregator\_operation}};}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation}{aggregator\_operation}}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a55aa4cf686905744068e63a573bdd624}{aggregated\_operation\_type}};}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1internal_1_1aggregating__functor}{tbb::internal::aggregating\_functor<self\_type,aggregated\_operation\_type>}}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_ab7868328db7a9cb1d8d3c3c1bdf82a5a}{aggregator\_function\_type}};}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1interface6_1_1internal_1_1aggregating__functor}{tbb::internal::aggregating\_functor}}<\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a073efad549bb14adff9f3dfb3b514b8e}{self\_type}},\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a55aa4cf686905744068e63a573bdd624}{aggregated\_operation\_type}}>;}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1internal_1_1aggregator}{tbb::internal::aggregator<aggregator\_function\_type,\ aggregated\_operation\_type>}}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_ae3c7b477c8dc04affbbdd347388cc010}{aggregator\_type}};}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00072\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a991c6b19d06e57bc2e6af477c89b60cc}{value\_function\_type}}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_aa783531397fc47482cd97241814d5146}{my\_value\_function}};}
\DoxyCodeLine{00073\ \ \ \ \ std::size\_t\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a54085b1a133c89d0d2e2a84875133c4d}{my\_number\_of\_lru\_history\_items}};}
\DoxyCodeLine{00074\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a902397815a15868cddacc432f9835a8a}{map\_storage\_type}}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a8feb75bc29417307784a4ad21e7ad12f}{my\_map\_storage}};}
\DoxyCodeLine{00075\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a4a0b59b32d62f10a7b2fdab9519c608f}{lru\_list\_type}}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a72f2f0a3c0de3325b23736b68aa97e8d}{my\_lru\_list}};}
\DoxyCodeLine{00076\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_ae3c7b477c8dc04affbbdd347388cc010}{aggregator\_type}}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_aa7f288c37cbe4be53b87225b26b1e5fb}{my\_aggregator}};}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object}{handle\_object}}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_ac498dc4d73a75cbc0d50a15622f06e13}{handle}};}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00082\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_ad4c0b512bb4ad5109eaae1519ba06d98}{concurrent\_lru\_cache}}(\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a991c6b19d06e57bc2e6af477c89b60cc}{value\_function\_type}}\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ std::size\_t\ number\_of\_lru\_history\_items)}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_aa783531397fc47482cd97241814d5146}{my\_value\_function}}(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}),\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a54085b1a133c89d0d2e2a84875133c4d}{my\_number\_of\_lru\_history\_items}}(number\_of\_lru\_history\_items)}
\DoxyCodeLine{00084\ \ \ \ \ \{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_aa7f288c37cbe4be53b87225b26b1e5fb}{my\_aggregator}}.initialize\_handler(\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_ab7868328db7a9cb1d8d3c3c1bdf82a5a}{aggregator\_function\_type}}(\textcolor{keyword}{this}));}
\DoxyCodeLine{00086\ \ \ \ \ \}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object}{handle\_object}}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a632c3911a55cfda997acce279c471ec3}{operator[]}}(\mbox{\hyperlink{structis__key__matching__join}{key\_type}}\ k)\{}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation}{retrieve\_aggregator\_operation}}\ op(k);}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_aa7f288c37cbe4be53b87225b26b1e5fb}{my\_aggregator}}.execute(\&op);}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (op.\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_abe700e1cfbbda8f2910fc722b6e58ce5}{is\_new\_value\_needed}}())\{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ op.\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_a3b632087272a60ffd3aae819bb38bd02}{result}}().second.my\_value\ =\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_aa783531397fc47482cd97241814d5146}{my\_value\_function}}(k);}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_TBB\_store\_with\_release(op.\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_a3b632087272a60ffd3aae819bb38bd02}{result}}().second.my\_is\_ready,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ tbb::internal::spin\_wait\_while\_eq(op.\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_a3b632087272a60ffd3aae819bb38bd02}{result}}().second.my\_is\_ready,\textcolor{keyword}{false});}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object}{handle\_object}}(*\textcolor{keyword}{this},op.\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_a3b632087272a60ffd3aae819bb38bd02}{result}}());}
\DoxyCodeLine{00098\ \ \ \ \ \}}
\DoxyCodeLine{00099\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a68ee268d99937f156215e55a6bb669c7}{signal\_end\_of\_usage}}(\textcolor{keyword}{typename}\ map\_storage\_type::reference\ value\_ref)\{}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1signal__end__of__usage__aggregator__operation}{signal\_end\_of\_usage\_aggregator\_operation}}\ op(value\_ref);}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_aa7f288c37cbe4be53b87225b26b1e5fb}{my\_aggregator}}.execute(\&op);}
\DoxyCodeLine{00103\ \ \ \ \ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00106\ \textcolor{preprocessor}{\#if\ !\_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT}}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtbb_1_1concurrent__lru__cache_1_1handle__move__t_a74579aa0282a63edcf705fb1e68e4a95}{handle\_move\_t}}:no\_assign\{}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_ad4c0b512bb4ad5109eaae1519ba06d98}{concurrent\_lru\_cache}}\ \&\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__move__t_afb5b1ff52c7cb7b1d647bcdeb0de84e4}{my\_cache\_ref}};}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ map\_storage\_type::reference\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__move__t_a8977bcc06029d92ee14148f2c19c479a}{my\_map\_record\_ref}};}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__move__t_a74579aa0282a63edcf705fb1e68e4a95}{handle\_move\_t}}(\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_ad4c0b512bb4ad5109eaae1519ba06d98}{concurrent\_lru\_cache}}\ \&\ cache\_ref,\ \textcolor{keyword}{typename}\ map\_storage\_type::reference\ value\_ref):\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__move__t_afb5b1ff52c7cb7b1d647bcdeb0de84e4}{my\_cache\_ref}}(cache\_ref),\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__move__t_a8977bcc06029d92ee14148f2c19c479a}{my\_map\_record\_ref}}(value\_ref)\ \{\};}
\DoxyCodeLine{00111\ \ \ \ \ \};}
\DoxyCodeLine{00112\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtbb_1_1concurrent__lru__cache_1_1handle__object_abf180b9bc721bc91fe2362e17f7eadeb}{handle\_object}}\ \{}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_ad4c0b512bb4ad5109eaae1519ba06d98}{concurrent\_lru\_cache}}\ *\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0ff6b3f0d4c3dc22b86f681c4ede1689}{my\_cache\_pointer}};}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ map\_storage\_type::pointer\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a46e8cc486e4f33140ea05ba6315b08b0}{my\_map\_record\_ptr}};}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_abf180b9bc721bc91fe2362e17f7eadeb}{handle\_object}}()\ :\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0ff6b3f0d4c3dc22b86f681c4ede1689}{my\_cache\_pointer}}(),\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a46e8cc486e4f33140ea05ba6315b08b0}{my\_map\_record\_ptr}}()\ \{\}}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a79e7c83f542edd87a969179c33e9ea61}{handle\_object}}(\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_ad4c0b512bb4ad5109eaae1519ba06d98}{concurrent\_lru\_cache}}\&\ cache\_ref,\ \textcolor{keyword}{typename}\ map\_storage\_type::reference\ value\_ref)\ :\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0ff6b3f0d4c3dc22b86f681c4ede1689}{my\_cache\_pointer}}(\&cache\_ref),\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a46e8cc486e4f33140ea05ba6315b08b0}{my\_map\_record\_ptr}}(\&value\_ref)\ \{\}}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \textcolor{keyword}{operator}\ \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0ff6b3f0d4c3dc22b86f681c4ede1689}{my\_cache\_pointer}}\ \&\&\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a46e8cc486e4f33140ea05ba6315b08b0}{my\_map\_record\_ptr}});}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00122\ \textcolor{preprocessor}{\#if\ \_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ add\ check\ for\ double\ moved\ objects\ by\ special\ dedicated\ field}}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_abf180b9bc721bc91fe2362e17f7eadeb}{handle\_object}}(\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object}{handle\_object}}\&\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}})\ :\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0ff6b3f0d4c3dc22b86f681c4ede1689}{my\_cache\_pointer}}(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0ff6b3f0d4c3dc22b86f681c4ede1689}{my\_cache\_pointer}}),\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a46e8cc486e4f33140ea05ba6315b08b0}{my\_map\_record\_ptr}}(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a46e8cc486e4f33140ea05ba6315b08b0}{my\_map\_record\_ptr}})\ \{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}((\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_cache\_pointer\ \&\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_map\_record\_ptr)\ ||\ (!\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_cache\_pointer\ \&\&\ !\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_map\_record\_ptr),\ \textcolor{stringliteral}{"{}invalid\ state\ of\ moving\ object?"{}});}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_cache\_pointer\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_map\_record\_ptr\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_abf180b9bc721bc91fe2362e17f7eadeb}{handle\_object}}\&\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a80781168b9da35fa07d67c3180ea70c3}{operator=}}(\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_abf180b9bc721bc91fe2362e17f7eadeb}{handle\_object}}\&\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}})\ \{}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}((\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_cache\_pointer\ \&\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_map\_record\_ptr)\ ||\ (!\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_cache\_pointer\ \&\&\ !\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_map\_record\_ptr),\ \textcolor{stringliteral}{"{}invalid\ state\ of\ moving\ object?"{}});}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0ff6b3f0d4c3dc22b86f681c4ede1689}{my\_cache\_pointer}})\ \{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0ff6b3f0d4c3dc22b86f681c4ede1689}{my\_cache\_pointer}}-\/>\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a68ee268d99937f156215e55a6bb669c7}{signal\_end\_of\_usage}}(*\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a46e8cc486e4f33140ea05ba6315b08b0}{my\_map\_record\_ptr}});}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0ff6b3f0d4c3dc22b86f681c4ede1689}{my\_cache\_pointer}}\ =\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_cache\_pointer;}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a46e8cc486e4f33140ea05ba6315b08b0}{my\_map\_record\_ptr}}\ =\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_map\_record\_ptr;}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_cache\_pointer\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.my\_map\_record\_ptr\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00140\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a6f17dfa5f00d0fabe9bc2244e66cdea0}{handle\_object}}(\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__move__t}{handle\_move\_t}}\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}})\ :\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0ff6b3f0d4c3dc22b86f681c4ede1689}{my\_cache\_pointer}}(\&\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}.my\_cache\_ref),\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a46e8cc486e4f33140ea05ba6315b08b0}{my\_map\_record\_ptr}}(\&\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}.my\_map\_record\_ref)\ \{\}}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_abf180b9bc721bc91fe2362e17f7eadeb}{handle\_object}}\&\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a80781168b9da35fa07d67c3180ea70c3}{operator=}}(\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__move__t}{handle\_move\_t}}\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}})\ \{}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0ff6b3f0d4c3dc22b86f681c4ede1689}{my\_cache\_pointer}})\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0ff6b3f0d4c3dc22b86f681c4ede1689}{my\_cache\_pointer}}-\/>signal\_end\_of\_usage(*\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a46e8cc486e4f33140ea05ba6315b08b0}{my\_map\_record\_ptr}});}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0ff6b3f0d4c3dc22b86f681c4ede1689}{my\_cache\_pointer}}\ =\ \&\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}.my\_cache\_ref;}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a46e8cc486e4f33140ea05ba6315b08b0}{my\_map\_record\_ptr}}\ =\ \&\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}.my\_map\_record\_ref;}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{keyword}{operator}\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__move__t}{handle\_move\_t}}()\{}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0898f07fcc3b27a8a6418efddbc6b09d}{move}}(*\textcolor{keyword}{this});}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00153\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT}}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ value\_type\&\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_adb596af4eaebb19a5e14bdac495d8c8f}{value}}()\{}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0ff6b3f0d4c3dc22b86f681c4ede1689}{my\_cache\_pointer}},\textcolor{stringliteral}{"{}get\ value\ from\ already\ moved\ object?"{}});}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a46e8cc486e4f33140ea05ba6315b08b0}{my\_map\_record\_ptr}},\textcolor{stringliteral}{"{}get\ value\ from\ an\ invalid\ or\ already\ moved\ object?"{}});}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a46e8cc486e4f33140ea05ba6315b08b0}{my\_map\_record\_ptr}}-\/>second.my\_value;}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_af8141f3fcd2db933c5257fd14b1c8bf3}{\string~handle\_object}}()\{}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0ff6b3f0d4c3dc22b86f681c4ede1689}{my\_cache\_pointer}})\{}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0ff6b3f0d4c3dc22b86f681c4ede1689}{my\_cache\_pointer}}-\/>signal\_end\_of\_usage(*\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a46e8cc486e4f33140ea05ba6315b08b0}{my\_map\_record\_ptr}});}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00165\ \textcolor{preprocessor}{\#if\ \_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT}}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ For\ source\ compatibility\ with\ C++03}}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \textcolor{keyword}{friend}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object}{handle\_object}}\&\&\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0898f07fcc3b27a8a6418efddbc6b09d}{move}}(\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object}{handle\_object}}\&\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}})\{}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::move(\mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}});}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00170\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \textcolor{keyword}{friend}\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__move__t}{handle\_move\_t}}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0898f07fcc3b27a8a6418efddbc6b09d}{move}}(\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_abf180b9bc721bc91fe2362e17f7eadeb}{handle\_object}}\&\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}})\{}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a0898f07fcc3b27a8a6418efddbc6b09d}{handle\_object::move}}(\mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}});}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ add\ check\ for\ double\ moved\ objects\ by\ special\ dedicated\ field}}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__move__t}{handle\_move\_t}}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_ab131307d64150048408bba9001542638}{move}}(\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_abf180b9bc721bc91fe2362e17f7eadeb}{handle\_object}}\&\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}})\{}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}((\mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}.my\_cache\_pointer\ \&\&\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}.my\_map\_record\_ptr)\ ||\ (!\mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}.my\_cache\_pointer\ \&\&\ !\mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}.my\_map\_record\_ptr),\ \textcolor{stringliteral}{"{}invalid\ state\ of\ moving\ object?"{}});}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_ad4c0b512bb4ad5109eaae1519ba06d98}{concurrent\_lru\_cache}}\ *\ cache\_pointer\ =\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}.my\_cache\_pointer;}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ map\_storage\_type::pointer\ map\_record\_ptr\ =\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}.my\_map\_record\_ptr;}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}.my\_cache\_pointer\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}.my\_map\_record\_ptr\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__move__t}{handle\_move\_t}}(*cache\_pointer,\ *map\_record\_ptr);}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00183\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT}}
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_afd74cc09591a63ef9d85b9813e0cf861}{operator=}}(\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_abf180b9bc721bc91fe2362e17f7eadeb}{handle\_object}}\&);}
\DoxyCodeLine{00186\ \textcolor{preprocessor}{\#if\ \_\_SUNPRO\_CC}}
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{comment}{//\ Presumably\ due\ to\ a\ compiler\ error,\ private\ copy\ constructor}}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{comment}{//\ breaks\ expressions\ like\ handle\ h\ =\ cache[key];}}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00190\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_a4d9200ee9872557c702688cb44fde0a0}{handle\_object}}(\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_1_1handle__object_abf180b9bc721bc91fe2362e17f7eadeb}{handle\_object}}\ \&);}
\DoxyCodeLine{00192\ \ \ \ \ \};}
\DoxyCodeLine{00193\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{comment}{//TODO:\ looks\ like\ aggregator\_operation\ is\ a\ perfect\ match\ for\ statically\ typed\ variant\ type}}
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtbb_1_1concurrent__lru__cache_1_1aggregator__operation_a437c30a6682f86a445b06211585afe15}{aggregator\_operation}}\ :\ \mbox{\hyperlink{classtbb_1_1interface6_1_1internal_1_1aggregated__operation}{tbb::internal::aggregated\_operation}}<aggregator\_operation>\{}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum}\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a9b0b05d941f555d5dda02d4c47a7e635}{e\_op\_type}}\ \{\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a9b0b05d941f555d5dda02d4c47a7e635adadeecf0e5ceafa2ea2a81cde320d532}{op\_retive}},\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a9b0b05d941f555d5dda02d4c47a7e635aecf8ec1f13415352838da16c45bf552e}{op\_signal\_end\_of\_usage}}\};}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \textcolor{comment}{//TODO:\ try\ to\ use\ pointer\ to\ function\ apply\_visitor\ here}}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \textcolor{comment}{//TODO:\ try\ virtual\ functions\ and\ measure\ the\ difference}}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a9b0b05d941f555d5dda02d4c47a7e635}{e\_op\_type}}\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a19739f5e7928aebade4f3c9eda5c9e48}{my\_operation\_type}};}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a437c30a6682f86a445b06211585afe15}{aggregator\_operation}}(\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a9b0b05d941f555d5dda02d4c47a7e635}{e\_op\_type}}\ operation\_type):\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a19739f5e7928aebade4f3c9eda5c9e48}{my\_operation\_type}}(operation\_type)\ \{\}}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a3eab19ca1ced6c8e77daff017886864e}{cast\_and\_handle}}(\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a073efad549bb14adff9f3dfb3b514b8e}{self\_type}}\&\ container\ )\{}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a19739f5e7928aebade4f3c9eda5c9e48}{my\_operation\_type}}==\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a9b0b05d941f555d5dda02d4c47a7e635adadeecf0e5ceafa2ea2a81cde320d532}{op\_retive}})\{}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation}{retrieve\_aggregator\_operation}}*\textcolor{keyword}{>}(\textcolor{keyword}{this})-\/>\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_ac498dc4d73a75cbc0d50a15622f06e13}{handle}}(container);}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1signal__end__of__usage__aggregator__operation}{signal\_end\_of\_usage\_aggregator\_operation}}*\textcolor{keyword}{>}(\textcolor{keyword}{this})-\/>\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_ac498dc4d73a75cbc0d50a15622f06e13}{handle}}(container);}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00208\ \ \ \ \ \};}
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtbb_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_a47bf7d4508209fb6594307d68187356f}{retrieve\_aggregator\_operation}}\ :\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a437c30a6682f86a445b06211585afe15}{aggregator\_operation}},\ \textcolor{keyword}{private}\ internal::no\_assign\ \{}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structis__key__matching__join}{key\_type}}\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_acb8379ccc9cf6c610d845d6d7fb8b5ac}{my\_key}};}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ map\_storage\_type::pointer\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_a748ad6dd21b1ebd34d07f27fcf764ec1}{my\_result\_map\_record\_pointer}};}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_a42af8b3ecf0c292506363a27c47c8b3c}{my\_is\_new\_value\_needed}};}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_a47bf7d4508209fb6594307d68187356f}{retrieve\_aggregator\_operation}}(\mbox{\hyperlink{structis__key__matching__join}{key\_type}}\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}}):\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a437c30a6682f86a445b06211585afe15}{aggregator\_operation}}(\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a437c30a6682f86a445b06211585afe15}{aggregator\_operation}}::\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a9b0b05d941f555d5dda02d4c47a7e635adadeecf0e5ceafa2ea2a81cde320d532}{op\_retive}}),\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_acb8379ccc9cf6c610d845d6d7fb8b5ac}{my\_key}}(\mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}}),\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_a42af8b3ecf0c292506363a27c47c8b3c}{my\_is\_new\_value\_needed}}(\mbox{\hyperlink{yyjson_8h_a65e9886d74aaee76545e83dd09011727}{false}})\{\}}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_a518664c69f53a65ff14e8915c839aebb}{handle}}(\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a073efad549bb14adff9f3dfb3b514b8e}{self\_type}}\&\ container\ )\{}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_a748ad6dd21b1ebd34d07f27fcf764ec1}{my\_result\_map\_record\_pointer}}\ =\ \&\ container.\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a1d399cba8beb4717b11b8e3cca437323}{retrieve\_serial}}(\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_acb8379ccc9cf6c610d845d6d7fb8b5ac}{my\_key}},\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_a42af8b3ecf0c292506363a27c47c8b3c}{my\_is\_new\_value\_needed}});}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ map\_storage\_type::reference\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_a3b632087272a60ffd3aae819bb38bd02}{result}}()\{\ \textcolor{keywordflow}{return}\ *\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_a748ad6dd21b1ebd34d07f27fcf764ec1}{my\_result\_map\_record\_pointer}};\ \}}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_abe700e1cfbbda8f2910fc722b6e58ce5}{is\_new\_value\_needed}}()\{\textcolor{keywordflow}{return}\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1retrieve__aggregator__operation_a42af8b3ecf0c292506363a27c47c8b3c}{my\_is\_new\_value\_needed}};\}}
\DoxyCodeLine{00219\ \ \ \ \ \};}
\DoxyCodeLine{00220\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtbb_1_1concurrent__lru__cache_1_1signal__end__of__usage__aggregator__operation_a5ce2c8d1a82744f4c4c28ff39d7ba0f6}{signal\_end\_of\_usage\_aggregator\_operation}}\ :\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a437c30a6682f86a445b06211585afe15}{aggregator\_operation}},\ \textcolor{keyword}{private}\ internal::no\_assign\ \{}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ map\_storage\_type::reference\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1signal__end__of__usage__aggregator__operation_ad4c2fd308ca105c22e5f19d6ff3a1e59}{my\_map\_record\_ref}};}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1signal__end__of__usage__aggregator__operation_a5ce2c8d1a82744f4c4c28ff39d7ba0f6}{signal\_end\_of\_usage\_aggregator\_operation}}(\textcolor{keyword}{typename}\ map\_storage\_type::reference\ map\_record\_ref):\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a437c30a6682f86a445b06211585afe15}{aggregator\_operation}}(\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a437c30a6682f86a445b06211585afe15}{aggregator\_operation}}::\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a9b0b05d941f555d5dda02d4c47a7e635aecf8ec1f13415352838da16c45bf552e}{op\_signal\_end\_of\_usage}}),\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1signal__end__of__usage__aggregator__operation_ad4c2fd308ca105c22e5f19d6ff3a1e59}{my\_map\_record\_ref}}(map\_record\_ref)\{\}}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1signal__end__of__usage__aggregator__operation_a9d6a2fcbff7718aca379832af7d8edf4}{handle}}(\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a073efad549bb14adff9f3dfb3b514b8e}{self\_type}}\&\ container\ )\{}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ container.\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_ab9e594b9038ba94a11a3a8765e34a77e}{signal\_end\_of\_usage\_serial}}(\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1signal__end__of__usage__aggregator__operation_ad4c2fd308ca105c22e5f19d6ff3a1e59}{my\_map\_record\_ref}});}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00226\ \ \ \ \ \};}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00229\ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a9fc5a549b5602849b24e56f9cf1d2be3}{handle\_operations}}(\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation}{aggregator\_operation}}*\ op\_list)\{}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(op\_list)\{}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ op\_list-\/>\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation_a3eab19ca1ced6c8e77daff017886864e}{cast\_and\_handle}}(*\textcolor{keyword}{this});}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1aggregator__operation}{aggregator\_operation}}*\ tmp\ =\ op\_list;}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ op\_list=op\_list-\/>\mbox{\hyperlink{classtbb_1_1interface6_1_1internal_1_1aggregated__operation_a9878d94254cb1a6ec4dc0b3df6b9131c}{next}};}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_ac4715a28e1dc69356c2dae5c2e84b5f4}{tbb::internal::itt\_store\_word\_with\_release}}(tmp-\/>status,\ uintptr\_t(1));}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00236\ \ \ \ \}}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00239\ \ \ \ \textcolor{keyword}{typename}\ map\_storage\_type::reference\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a1d399cba8beb4717b11b8e3cca437323}{retrieve\_serial}}(\mbox{\hyperlink{structis__key__matching__join}{key\_type}}\ k,\ \textcolor{keywordtype}{bool}\&\ is\_new\_value\_needed)\{}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ map\_storage\_type::iterator\ it\ =\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a8feb75bc29417307784a4ad21e7ad12f}{my\_map\_storage}}.find(k);}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ ==\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a8feb75bc29417307784a4ad21e7ad12f}{my\_map\_storage}}.end())\{}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ it\ =\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a8feb75bc29417307784a4ad21e7ad12f}{my\_map\_storage}}.insert(it,std::make\_pair(k,\mbox{\hyperlink{structtbb_1_1interface6_1_1concurrent__lru__cache_1_1map__value__type}{map\_value\_type}}(value\_type(),0,\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a72f2f0a3c0de3325b23736b68aa97e8d}{my\_lru\_list}}.end(),\textcolor{keyword}{false})));}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ is\_new\_value\_needed\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ lru\_list\_type::iterator\ list\_it\ =\ it-\/>second.my\_lru\_list\_iterator;}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (list\_it!=\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a72f2f0a3c0de3325b23736b68aa97e8d}{my\_lru\_list}}.end())\ \{}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(!it-\/>second.my\_ref\_counter,\textcolor{stringliteral}{"{}item\ to\ be\ evicted\ should\ not\ have\ a\ live\ references"{}});}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//item\ is\ going\ to\ be\ used.\ Therefore\ it\ is\ not\ a\ subject\ for\ eviction}}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//so\ -\/\ remove\ it\ from\ LRU\ history.}}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a72f2f0a3c0de3325b23736b68aa97e8d}{my\_lru\_list}}.erase(list\_it);}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ it-\/>second.my\_lru\_list\_iterator=\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a72f2f0a3c0de3325b23736b68aa97e8d}{my\_lru\_list}}.end();}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ ++(it-\/>second.my\_ref\_counter);}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *it;}
\DoxyCodeLine{00256\ \ \ \ \ \}}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_ab9e594b9038ba94a11a3a8765e34a77e}{signal\_end\_of\_usage\_serial}}(\textcolor{keyword}{typename}\ map\_storage\_type::reference\ map\_record\_ref)\{}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ map\_storage\_type::iterator\ it\ =\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a8feb75bc29417307784a4ad21e7ad12f}{my\_map\_storage}}.find(map\_record\_ref.first);}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(it!=\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a8feb75bc29417307784a4ad21e7ad12f}{my\_map\_storage}}.end(),\textcolor{stringliteral}{"{}cache\ should\ not\ return\ past-\/end\ iterators\ to\ outer\ world"{}});}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\&(*it)\ ==\ \&map\_record\_ref,\textcolor{stringliteral}{"{}dangling\ reference\ has\ been\ returned\ to\ outside\ world?\ data\ race\ ?"{}});}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a72f2f0a3c0de3325b23736b68aa97e8d}{my\_lru\_list}}.end()==\ std::find(\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a72f2f0a3c0de3325b23736b68aa97e8d}{my\_lru\_list}}.begin(),\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a72f2f0a3c0de3325b23736b68aa97e8d}{my\_lru\_list}}.end(),it),}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}object\ in\ use\ should\ not\ be\ in\ list\ of\ unused\ objects\ "{}});}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\ -\/-\/(it-\/>second.my\_ref\_counter))\{}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//it\ was\ the\ last\ reference\ so\ put\ it\ to\ the\ LRU\ history}}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a72f2f0a3c0de3325b23736b68aa97e8d}{my\_lru\_list}}.size()>=\mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a54085b1a133c89d0d2e2a84875133c4d}{my\_number\_of\_lru\_history\_items}})\{}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//evict\ items\ in\ order\ to\ get\ a\ space}}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ number\_of\_elements\_to\_evict\ =\ 1\ +\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a72f2f0a3c0de3325b23736b68aa97e8d}{my\_lru\_list}}.size()\ -\/\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a54085b1a133c89d0d2e2a84875133c4d}{my\_number\_of\_lru\_history\_items}};}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<number\_of\_elements\_to\_evict;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\{}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ map\_storage\_type::iterator\ it\_to\_evict\ =\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a72f2f0a3c0de3325b23736b68aa97e8d}{my\_lru\_list}}.back();}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(!it\_to\_evict-\/>second.my\_ref\_counter,\textcolor{stringliteral}{"{}item\ to\ be\ evicted\ should\ not\ have\ a\ live\ references"{}});}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a72f2f0a3c0de3325b23736b68aa97e8d}{my\_lru\_list}}.pop\_back();}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a8feb75bc29417307784a4ad21e7ad12f}{my\_map\_storage}}.erase(it\_to\_evict);}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a72f2f0a3c0de3325b23736b68aa97e8d}{my\_lru\_list}}.push\_front(it);}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ it-\/>second.my\_lru\_list\_iterator\ =\ \mbox{\hyperlink{classtbb_1_1interface6_1_1concurrent__lru__cache_a72f2f0a3c0de3325b23736b68aa97e8d}{my\_lru\_list}}.begin();}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00279\ \ \ \ \ \}}
\DoxyCodeLine{00280\ \};}
\DoxyCodeLine{00281\ \}\ \textcolor{comment}{//\ namespace\ interface6}}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \textcolor{keyword}{using\ }interface6::concurrent\_lru\_cache;}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \}\ \textcolor{comment}{//\ namespace\ tbb}}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{__warning__suppress__disable__notice_8h}{internal/\_warning\_suppress\_disable\_notice.h}}"{}}}
\DoxyCodeLine{00288\ \textcolor{preprocessor}{\#undef\ \_\_TBB\_concurrent\_lru\_cache\_H\_include\_area}}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\_\_TBB\_concurrent\_lru\_cache\_H}}

\end{DoxyCode}
