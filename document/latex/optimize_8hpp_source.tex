\doxysection{optimize.\+hpp}
\hypertarget{optimize_8hpp_source}{}\label{optimize_8hpp_source}\index{external/taskflow/3rd-\/party/ff/optimize.hpp@{external/taskflow/3rd-\/party/ff/optimize.hpp}}
\mbox{\hyperlink{optimize_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ -\/*-\/\ Mode:\ C++;\ tab-\/width:\ 4;\ c-\/basic-\/offset:\ 4;\ indent-\/tabs-\/mode:\ nil\ -\/*-\/\ */}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#ifndef\ FF\_OPTIMIZE\_HPP}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ FF\_OPTIMIZE\_HPP}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{comment}{/*\ ***************************************************************************}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ \ FastFlow\ is\ free\ software;\ you\ can\ redistribute\ it\ and/or\ modify\ it}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *\ \ under\ the\ terms\ of\ the\ GNU\ Lesser\ General\ Public\ License\ version\ 3\ as}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ *\ \ published\ by\ the\ Free\ Software\ Foundation.}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ *\ \ Starting\ from\ version\ 3.0.1\ FastFlow\ is\ dual\ licensed\ under\ the\ GNU\ LGPLv3}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ *\ \ or\ MIT\ License\ (https://github.com/ParaGroup/WindFlow/blob/vers3.x/LICENSE.MIT)}}
\DoxyCodeLine{00024\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00025\ \textcolor{comment}{\ *\ \ This\ program\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,\ but\ WITHOUT}}
\DoxyCodeLine{00026\ \textcolor{comment}{\ *\ \ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of\ MERCHANTABILITY\ or}}
\DoxyCodeLine{00027\ \textcolor{comment}{\ *\ \ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the\ GNU\ Lesser\ General\ Public}}
\DoxyCodeLine{00028\ \textcolor{comment}{\ *\ \ License\ for\ more\ details.}}
\DoxyCodeLine{00029\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00030\ \textcolor{comment}{\ *\ \ You\ should\ have\ received\ a\ copy\ of\ the\ GNU\ Lesser\ General\ Public\ License}}
\DoxyCodeLine{00031\ \textcolor{comment}{\ *\ \ along\ with\ this\ program;\ if\ not,\ write\ to\ the\ Free\ Software\ Foundation,}}
\DoxyCodeLine{00032\ \textcolor{comment}{\ *\ \ Inc.,\ 59\ Temple\ Place\ -\/\ Suite\ 330,\ Boston,\ MA\ 02111-\/1307,\ USA.}}
\DoxyCodeLine{00033\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00034\ \textcolor{comment}{\ ****************************************************************************}}
\DoxyCodeLine{00035\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{comment}{/*}}
\DoxyCodeLine{00038\ \textcolor{comment}{\ *\ \ \ Author:\ Massimo\ Torquati}}
\DoxyCodeLine{00039\ \textcolor{comment}{\ *\ \ \ \ \ \ }}
\DoxyCodeLine{00040\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#include\ <cstdio>}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#include\ <cstdlib>}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#include\ <cstdarg>}}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{node_8hpp}{ff/node.hpp}}>}}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{3rd-party_2ff_2pipeline_8hpp}{ff/pipeline.hpp}}>}}
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{farm_8hpp}{ff/farm.hpp}}>}}
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{all2all_8hpp}{ff/all2all.hpp}}>}}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{combine_8hpp}{ff/combine.hpp}}>}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceff}{ff}}\ \{}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \{\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}}\ =\ 1,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5af324547bb83526929948ef92a83313b6}{OPT\_INFO}}\ =\ 2\ \}\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5}{reportkind\_t}};}
\DoxyCodeLine{00053\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(\textcolor{keywordtype}{int}\ verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5}{reportkind\_t}}\ kind,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *str,\ ...)\ \{}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordflow}{if}\ (verbose\_level\ <\ kind)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00055\ \ \ \ \ va\_list\ argp;}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordtype}{char}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}=(\textcolor{keywordtype}{char}\ *)\mbox{\hyperlink{mimalloc-override_8h_a99aa8fd9f4831e1b0fa9e1cdcde3e249}{malloc}}(strlen(str)+512);\ \textcolor{comment}{//\ this\ is\ dangerous.....}}
\DoxyCodeLine{00057\ \ \ \ \ assert(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}});}
\DoxyCodeLine{00058\ \ \ \ \ strcpy(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ str);}
\DoxyCodeLine{00059\ \ \ \ \ va\_start(argp,\ str);}
\DoxyCodeLine{00060\ \ \ \ \ \mbox{\hyperlink{printf_8h_abb30aad964fc771fb52cf3ad88649df2}{vfprintf}}(stdout,\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ argp);}
\DoxyCodeLine{00061\ \ \ \ \ va\_end(argp);}
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{mimalloc-override_8h_a9d4b5df3530d1bc733070a4669ba6ebc}{free}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}});}
\DoxyCodeLine{00063\ \}}
\DoxyCodeLine{00064\ \ \ \ \ }
\DoxyCodeLine{00069\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceff_a744aa240bd641352c9074911bab85298}{remove\_internal\_collectors}}(\mbox{\hyperlink{classff_1_1ff__farm}{ff\_farm}}\&\ farm)\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\&\ \mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}\ =\ farm.\mbox{\hyperlink{classff_1_1ff__farm_a67596a94ae016f648b2793a90b96a5de}{getWorkers}}();}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}.size();++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>isFarm()\ \&\&\ !\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>isOFarm())\ \{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm}{ff\_farm}}*\ ifarm\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__farm}{ff\_farm}}*\textcolor{keyword}{>}(\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a744aa240bd641352c9074911bab85298}{remove\_internal\_collectors}}(*ifarm)<0)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ifarm-\/>\mbox{\hyperlink{classff_1_1ff__farm_af88d021b0d4df352b5f025f531f07da8}{getCollector}}()\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ifarm-\/>\mbox{\hyperlink{classff_1_1ff__farm_a5fde02281e79ca2a135688e261a7225f}{remove\_collector}}();}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>isPipe())\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ff\_pipeline*\ ipipe\ =\ \textcolor{keyword}{reinterpret\_cast<}ff\_pipeline*\textcolor{keyword}{>}(\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ OptLevel\ iopt;}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ iopt.remove\_collector=\textcolor{keyword}{true};}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a7f7589d2b1d91f35218bad0cd1370fc4}{optimize\_static}}(*ipipe,\ iopt)<0)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>isAll2All())\ \{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__a2a}{ff\_a2a}}\ *a2a\ \ \ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__a2a}{ff\_a2a}}*\textcolor{keyword}{>}(\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\&\ W1\ =\ a2a-\/>getFirstSet();}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\&\ W2\ =\ a2a-\/>getSecondSet();}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}=0;\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}<W1.size();++\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (W1[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]-\/>isPipe())\ \{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__pipeline}{ff\_pipeline}}*\ ipipe=\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__pipeline}{ff\_pipeline}}*\textcolor{keyword}{>}(W1[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]);}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1_opt_level}{OptLevel}}\ iopt;}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ iopt.\mbox{\hyperlink{structff_1_1_opt_level_af3023d9505cc15e480409d0b3419ac6d}{remove\_collector}}=\textcolor{keyword}{true};}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a7f7589d2b1d91f35218bad0cd1370fc4}{optimize\_static}}(*ipipe,\ iopt)<0)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}=0;\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}<W2.size();++\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})\ \{}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (W2[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]-\/>isPipe())\ \{}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__pipeline}{ff\_pipeline}}*\ ipipe=\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__pipeline}{ff\_pipeline}}*\textcolor{keyword}{>}(W2[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]);}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1_opt_level}{OptLevel}}\ iopt;}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ iopt.\mbox{\hyperlink{structff_1_1_opt_level_af3023d9505cc15e480409d0b3419ac6d}{remove\_collector}}=\textcolor{keyword}{true};}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a7f7589d2b1d91f35218bad0cd1370fc4}{optimize\_static}}(*ipipe,\ iopt)<0)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00106\ \ \ \ \ \}}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00108\ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00115\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceff_a492e7f02e67f9a291006b04b03ed138a}{combine\_with\_emitter}}(\mbox{\hyperlink{classff_1_1ff__farm}{ff\_farm}}\&\ farm,\ \mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*node,\ \textcolor{keywordtype}{bool}\ cleanup\_node=\textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keywordflow}{if}\ (node-\/>isFarm()\ ||\ node-\/>isPipe()\ ||\ node-\/>isAll2All())\ \{}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}combine\_with\_emitter:\ the\ node\ to\ combine\ cannot\ be\ a\ parallel\ building\ block\(\backslash\)n"{}});}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00119\ \ \ \ \ \}}
\DoxyCodeLine{00120\ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ emitter\ =\ farm.\mbox{\hyperlink{classff_1_1ff__farm_ad05568d154a61549f346beb386bde880}{getEmitter}}();}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keywordflow}{if}\ (!emitter)\ \{\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ farm.\mbox{\hyperlink{classff_1_1ff__farm_a6ac3d4cd02f14fcc1e0f0474eea1fa44}{add\_emitter}}(node);}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ farm.\mbox{\hyperlink{classff_1_1ff__farm_a37c235b1b117b126f381e10960c34123}{cleanup\_emitter}}(cleanup\_node);}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00125\ \ \ \ \ \}}
\DoxyCodeLine{00126\ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__comb}{ff\_comb}}*\ comb;}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keywordflow}{if}\ (!emitter-\/>\mbox{\hyperlink{classff_1_1ff__node_adfb7746174f6744ae019cf494ca2b8a5}{isMultiOutput}}())\ \{}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1internal__mo__transformer}{internal\_mo\_transformer}}\ *mo\_emitter\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{structff_1_1internal__mo__transformer}{internal\_mo\_transformer}}(emitter,}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ farm.\mbox{\hyperlink{classff_1_1ff__farm_ac8803613f5de1180171cd62e03ec801e}{isset\_cleanup\_emitter}}());}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ comb\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__comb}{ff\_comb}}(node,\ mo\_emitter,\ cleanup\_node,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00132\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{\ \ \ \ }
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ comb\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__comb}{ff\_comb}}(node,emitter,}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cleanup\_node,\ farm.\mbox{\hyperlink{classff_1_1ff__farm_ac8803613f5de1180171cd62e03ec801e}{isset\_cleanup\_emitter}}());}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ \}}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keywordflow}{if}\ (farm.\mbox{\hyperlink{classff_1_1ff__farm_ac8803613f5de1180171cd62e03ec801e}{isset\_cleanup\_emitter}}())}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ farm.\mbox{\hyperlink{classff_1_1ff__farm_a37c235b1b117b126f381e10960c34123}{cleanup\_emitter}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00139\ \ \ \ \ }
\DoxyCodeLine{00140\ \ \ \ \ farm.\mbox{\hyperlink{classff_1_1ff__farm_a17f418832c94e59af06ae80909d422b9}{change\_emitter}}(comb,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00142\ \}}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \textcolor{comment}{/*}}
\DoxyCodeLine{00145\ \textcolor{comment}{\ *\ It\ combines\ the\ node\ passed\ as\ parameter\ with\ the\ farm's\ collector.\ }}
\DoxyCodeLine{00146\ \textcolor{comment}{\ *\ The\ node\ is\ added\ at\ the\ right-\/hand\ side\ of\ the\ collector.}}
\DoxyCodeLine{00147\ \textcolor{comment}{\ *\ This\ transformation\ is\ logically\ equivalent\ to\ the\ following\ pipeline:\ ff\_Pipe<>\ pipe(farm,\ node);}}
\DoxyCodeLine{00148\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00149\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceff_ac0bbe02f204df7b9fab24e28301b5968}{combine\_with\_collector}}(\mbox{\hyperlink{classff_1_1ff__farm}{ff\_farm}}\&\ farm,\ \mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*node,\ \textcolor{keywordtype}{bool}\ cleanup\_node=\textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keywordflow}{if}\ (!farm.\mbox{\hyperlink{classff_1_1ff__farm_af88d021b0d4df352b5f025f531f07da8}{getCollector}}())\ \{}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}combine\_with\_collector:\ the\ farm\ passed\ as\ parameter\ does\ not\ have\ a\ collector\(\backslash\)n"{}});}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00153\ \ \ \ \ \}}
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{keywordflow}{if}\ (node-\/>isFarm()\ ||\ node-\/>isPipe()\ ||\ node-\/>isAll2All())\ \{}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}combine\_with\_emitter:\ the\ node\ to\ combine\ cannot\ be\ a\ parallel\ building\ block\(\backslash\)n"{}});}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00157\ \ \ \ \ \}}
\DoxyCodeLine{00158\ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ collector\ =\ farm.\mbox{\hyperlink{classff_1_1ff__farm_af88d021b0d4df352b5f025f531f07da8}{getCollector}}();}
\DoxyCodeLine{00159\ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__comb}{ff\_comb}}*\ comb\ \ \ \ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__comb}{ff\_comb}}(collector,\ node,}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ farm.\mbox{\hyperlink{classff_1_1ff__farm_a591b4bdeb3375d475330e6945c52484c}{isset\_cleanup\_collector}}(),\ cleanup\_node);}
\DoxyCodeLine{00161\ \ \ \ \ \textcolor{keywordflow}{if}\ (farm.\mbox{\hyperlink{classff_1_1ff__farm_a591b4bdeb3375d475330e6945c52484c}{isset\_cleanup\_collector}}())}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ farm.\mbox{\hyperlink{classff_1_1ff__farm_a55375ed56d7f6d989a3f4276e39ed796}{cleanup\_collector}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00163\ \ \ \ \ farm.\mbox{\hyperlink{classff_1_1ff__farm_a5fde02281e79ca2a135688e261a7225f}{remove\_collector}}();}
\DoxyCodeLine{00164\ \ \ \ \ farm.\mbox{\hyperlink{classff_1_1ff__farm_ad8117ca2bc937e6be844af50ca6d2b87}{add\_collector}}(comb,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00166\ \}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \textcolor{comment}{/*}}
\DoxyCodeLine{00169\ \textcolor{comment}{\ *\ It\ combines\ the\ node\ passed\ as\ parameter\ with\ the\ first\ stage\ of\ the\ pipeline.\ }}
\DoxyCodeLine{00170\ \textcolor{comment}{\ *\ The\ node\ is\ added\ at\ the\ left-\/hand\ side\ of\ the\ first\ pipeline\ node.}}
\DoxyCodeLine{00171\ \textcolor{comment}{\ *\ This\ transformation\ is\ logically\ equivalent\ to\ the\ following\ pipeline:\ ff\_Pipe<>\ pipe2(node,\ pipe);}}
\DoxyCodeLine{00172\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00173\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00174\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceff_ab8e8da086d0a6a576b49c261820857f9}{combine\_with\_firststage}}(\mbox{\hyperlink{classff_1_1ff__pipeline_a05e2c125dd1007c027b0713281b2d07f}{ff\_pipeline}}\&\ pipe,\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ node,\ \textcolor{keywordtype}{bool}\ cleanup\_node)\ \{}
\DoxyCodeLine{00175\ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a8a9c02fe71dc0d72a7f2184b97fff3ee}{flatten}}();}
\DoxyCodeLine{00176\ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a53ab8b2244539766bdea3eb65cb04f9b}{ff\_node}}*\ node0\ =\ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_aeb7333c888ddf66d2db7eafa116a078e}{get\_node}}(0);\ \textcolor{comment}{//\ it\ cannot\ be\ a\ pipeline}}
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{keywordflow}{if}\ (!node0)\ \{}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}combine\_with\_firststage:\ empty\ pipeline\(\backslash\)n"{}});}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00180\ \ \ \ \ \}}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keywordflow}{if}\ (node0-\/>\mbox{\hyperlink{classff_1_1ff__node_ac8e132cbcab68af6a4ca13bbcccd62f3}{isAll2All}}())\ \{\ \ }
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceff_ac8437979d91348021e0bd69fe83b6bbd}{combine\_left\_with\_a2a}}(*\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a7542a58b0efa58291c12d2926c2a78d4}{ff\_a2a}}*\textcolor{keyword}{>}(node0),\ node,\ cleanup\_node);}
\DoxyCodeLine{00183\ \ \ \ \ \}}
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{keywordflow}{if}\ (node0-\/>\mbox{\hyperlink{classff_1_1ff__node_a2af2bb6ee5bffb4bb5074b4c46ededed}{isFarm}}())\ \{}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}\ \&farm=*(\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*)node0;}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a492e7f02e67f9a291006b04b03ed138a}{combine\_with\_emitter}}(farm,\ node,\ cleanup\_node)<0)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a0efc47f547c9879b6bd57d138ba6c102}{remove\_stage}}(0);\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a564a573fca0c01a7889a60f207a9e348}{insert\_stage}}(0,\ node0);\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00189\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_abe64ffac2201bfaef32ab7a7c16ab511}{ff\_comb}}*\ comb\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__node_abe64ffac2201bfaef32ab7a7c16ab511}{ff\_comb}}(node,\ node0,\ cleanup\_node);}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a0efc47f547c9879b6bd57d138ba6c102}{remove\_stage}}(0);}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a564a573fca0c01a7889a60f207a9e348}{insert\_stage}}(0,\ comb,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00193\ \ \ \ \ \}}
\DoxyCodeLine{00194\ \ \ \ \ }
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00196\ \}}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>\ }
\DoxyCodeLine{00200\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceff_aa3746fc0b8650a97640a194573b06dea}{combine\_right\_with\_farm}}(\mbox{\hyperlink{classff_1_1ff__farm}{ff\_farm}}\&\ farm,\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ node,\ \textcolor{keywordtype}{bool}\ cleanup\_node)\ \{}
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keywordflow}{if}\ (farm.\mbox{\hyperlink{classff_1_1ff__farm_a5c5dc54cb6a91caacf2d316f5c3a19ad}{hasCollector}}())}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceff_ac0bbe02f204df7b9fab24e28301b5968}{combine\_with\_collector}}(farm,\ node,\ cleanup\_node);}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{comment}{//\ farm\ with\ no\ collector}}
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\&\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}=\ farm.\mbox{\hyperlink{classff_1_1ff__farm_a67596a94ae016f648b2793a90b96a5de}{getWorkers}}();}
\DoxyCodeLine{00206\ \ \ \ \ assert(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.size()>0);}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[0]-\/>isPipe())\ \{\ \textcolor{comment}{//\ NOTE:\ we\ suppose\ that\ all\ workers\ are\ homogeneous}}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a9bea9a93826205dd2dd32ca839393179}{combine\_with\_laststage}}(*\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__pipeline}{ff\_pipeline}}*\textcolor{keyword}{>}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[0]),\ node,\ cleanup\_node)<0)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}=0;}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=1;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.size();++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__pipeline}{ff\_pipeline}}*\ pipe\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__pipeline}{ff\_pipeline}}*\textcolor{keyword}{>}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}+=\mbox{\hyperlink{namespaceff_a9bea9a93826205dd2dd32ca839393179}{combine\_with\_laststage}}(*pipe,\ \textcolor{keyword}{new}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(*node),\ \textcolor{keyword}{true});}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}>0?-\/1:0);}
\DoxyCodeLine{00216\ \ \ \ \ \}}
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[0]-\/>isFarm())\ \{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_aa3746fc0b8650a97640a194573b06dea}{combine\_right\_with\_farm}}(*\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__farm}{ff\_farm}}*\textcolor{keyword}{>}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[0]),\ node,\ cleanup\_node)<0)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}=0;}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=1;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.size();++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm}{ff\_farm}}*\ farm\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__farm}{ff\_farm}}*\textcolor{keyword}{>}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}+=\mbox{\hyperlink{namespaceff_aa3746fc0b8650a97640a194573b06dea}{combine\_right\_with\_farm}}(*farm,\ \textcolor{keyword}{new}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(*node),\ \textcolor{keyword}{true});}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}>0?-\/1:0);}
\DoxyCodeLine{00225\ \ \ \ \ \}}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[0]-\/>isAll2All())\ \{}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a4e23df8155868a2b041038f99b2f3899}{combine\_right\_with\_a2a}}(*\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__a2a}{ff\_a2a}}*\textcolor{keyword}{>}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[0]),\ node,\ cleanup\_node)<0)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}=0;}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=1;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.size();++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__a2a}{ff\_a2a}}*\ a2a\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__a2a}{ff\_a2a}}*\textcolor{keyword}{>}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}+=\mbox{\hyperlink{namespaceff_a4e23df8155868a2b041038f99b2f3899}{combine\_right\_with\_a2a}}(*a2a,\ \textcolor{keyword}{new}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(*node),\ \textcolor{keyword}{true});}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}>0?-\/1:0);}
\DoxyCodeLine{00234\ \ \ \ \ \}}
\DoxyCodeLine{00235\ \ \ \ \ \textcolor{keywordtype}{bool}\ workers\_cleanup\ =\ farm.\mbox{\hyperlink{classff_1_1ff__farm_a14081c9431839c4c209e15f089bd01c9}{isset\_cleanup\_workers}}();}
\DoxyCodeLine{00236\ \ \ \ \ std::vector<ff\_node*>\ new\_workers;}
\DoxyCodeLine{00237\ \ \ \ \ }
\DoxyCodeLine{00238\ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__comb}{ff\_comb}}*\ comb\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__comb}{ff\_comb}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[0],\ node,\ workers\_cleanup,\ cleanup\_node);}
\DoxyCodeLine{00239\ \ \ \ \ assert(comb);}
\DoxyCodeLine{00240\ \ \ \ \ new\_workers.push\_back(comb);}
\DoxyCodeLine{00241\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=1;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.size();++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__comb}{ff\_comb}}*\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__comb}{ff\_comb}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}],\ \textcolor{keyword}{new}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(*node),\ workers\_cleanup,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ assert(\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}});}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ new\_workers.push\_back(\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}});}
\DoxyCodeLine{00245\ \ \ \ \ \}}
\DoxyCodeLine{00246\ \ \ \ \ farm.\mbox{\hyperlink{classff_1_1ff__farm_a1b349c3a7c414083ae1f7a63337c34d4}{change\_workers}}(new\_workers);\ \ \ \ }
\DoxyCodeLine{00247\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00248\ \}}
\DoxyCodeLine{00249\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>\ }
\DoxyCodeLine{00250\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceff_a4e23df8155868a2b041038f99b2f3899}{combine\_right\_with\_a2a}}(\mbox{\hyperlink{classff_1_1ff__a2a}{ff\_a2a}}\&\ a2a,\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ node,\ \textcolor{keywordtype}{bool}\ cleanup\_node)\ \{}
\DoxyCodeLine{00251\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\&\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}=\ a2a.\mbox{\hyperlink{classff_1_1ff__a2a_a15e634b23e08ae53f1d5296cae30fb9d}{getSecondSet}}();}
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[0]-\/>isPipe())\ \{\ \textcolor{comment}{//\ NOTE:\ we\ suppose\ that\ all\ workers\ are\ homogeneous}}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a9bea9a93826205dd2dd32ca839393179}{combine\_with\_laststage}}(*\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__pipeline}{ff\_pipeline}}*\textcolor{keyword}{>}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[0]),\ node,\ cleanup\_node)<0)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}=0;}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=1;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.size();++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>isPipe());}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__pipeline}{ff\_pipeline}}*\ pipe\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__pipeline}{ff\_pipeline}}*\textcolor{keyword}{>}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}+=\mbox{\hyperlink{namespaceff_a9bea9a93826205dd2dd32ca839393179}{combine\_with\_laststage}}(*pipe,\ \textcolor{keyword}{new}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(*node),\ \textcolor{keyword}{true});}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}>0?-\/1:0);\ }
\DoxyCodeLine{00261\ \ \ \ \ \}}
\DoxyCodeLine{00262\ \ \ \ \ std::vector<ff\_node*>\ new\_secondset;}
\DoxyCodeLine{00263\ \ \ \ \ }
\DoxyCodeLine{00264\ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__comb}{ff\_comb}}*\ comb\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__comb}{ff\_comb}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[0],\ node,\ \textcolor{keyword}{false},\ cleanup\_node);}
\DoxyCodeLine{00265\ \ \ \ \ assert(comb);}
\DoxyCodeLine{00266\ \ \ \ \ new\_secondset.push\_back(comb);}
\DoxyCodeLine{00267\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=1;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.size();++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__comb}{ff\_comb}}*\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__comb}{ff\_comb}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}],\ \textcolor{keyword}{new}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(*node),\ \textcolor{keyword}{false},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ assert(\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}});}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ new\_secondset.push\_back(\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}});}
\DoxyCodeLine{00271\ \ \ \ \ \}}
\DoxyCodeLine{00272\ \ \ \ \ a2a.\mbox{\hyperlink{classff_1_1ff__a2a_ae67d7092657e3a10fda925d8ead4b253}{change\_secondset}}(new\_secondset,\ \textcolor{keyword}{true});\ }
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00274\ \}}
\DoxyCodeLine{00275\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>\ }
\DoxyCodeLine{00276\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceff_ac8437979d91348021e0bd69fe83b6bbd}{combine\_left\_with\_a2a}}(\mbox{\hyperlink{classff_1_1ff__a2a}{ff\_a2a}}\&\ a2a,\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ node,\ \textcolor{keywordtype}{bool}\ cleanup\_node)\ \{}
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\&\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}=\ a2a.\mbox{\hyperlink{classff_1_1ff__a2a_aab5b0ed53d04a6ae56fcc801f7f7ce7c}{getFirstSet}}();}
\DoxyCodeLine{00278\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[0]-\/>isPipe())\ \{\ \textcolor{comment}{//\ NOTE:\ we\ suppose\ that\ all\ workers\ are\ homogeneous}}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_ab8e8da086d0a6a576b49c261820857f9}{combine\_with\_firststage}}(*\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__pipeline}{ff\_pipeline}}*\textcolor{keyword}{>}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[0]),\ node,\ cleanup\_node)<0)}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}=0;}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=1;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.size();++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ assert(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>isPipe());}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__pipeline}{ff\_pipeline}}*\ pipe\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__pipeline}{ff\_pipeline}}*\textcolor{keyword}{>}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}+=\mbox{\hyperlink{namespaceff_ab8e8da086d0a6a576b49c261820857f9}{combine\_with\_firststage}}(*pipe,\ \textcolor{keyword}{new}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(*node),\ \textcolor{keyword}{true});}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}>0?-\/1:0);\ }
\DoxyCodeLine{00289\ \ \ \ \ \}}
\DoxyCodeLine{00290\ \ \ \ \ std::vector<ff\_node*>\ new\_firstset;\ \ \ \ }
\DoxyCodeLine{00291\ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__comb}{ff\_comb}}*\ comb\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__comb}{ff\_comb}}(node,\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[0],\ cleanup\_node,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00292\ \ \ \ \ assert(comb);}
\DoxyCodeLine{00293\ \ \ \ \ new\_firstset.push\_back(comb);}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=1;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.size();++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__comb}{ff\_comb}}*\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__comb}{ff\_comb}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}(*node),\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}],\ \textcolor{keyword}{true},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ assert(\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}});}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ new\_firstset.push\_back(\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}});}
\DoxyCodeLine{00298\ \ \ \ \ \}}
\DoxyCodeLine{00299\ \ \ \ \ a2a.\mbox{\hyperlink{classff_1_1ff__a2a_afebc0d89567ef008a7e2473590f2c32b}{change\_firstset}}(new\_firstset,\ a2a.\mbox{\hyperlink{classff_1_1ff__a2a_a0e4f8c9472db17a1dd0c746cb4d342a9}{ondemand\_buffer}}(),\ \textcolor{keyword}{true});\ }
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00301\ \}}
\DoxyCodeLine{00302\ \ \ \ \ }
\DoxyCodeLine{00303\ \textcolor{comment}{/*}}
\DoxyCodeLine{00304\ \textcolor{comment}{\ *\ It\ combines\ the\ node\ passed\ as\ second\ parameter\ with\ the\ last\ stage\ of\ the\ pipeline.\ }}
\DoxyCodeLine{00305\ \textcolor{comment}{\ *\ The\ node\ is\ added\ at\ the\ right-\/hand\ side\ of\ the\ last\ pipeline\ stage.}}
\DoxyCodeLine{00306\ \textcolor{comment}{\ *\ This\ transformation\ is\ logically\ equivalent\ to\ the\ following\ pipeline:\ ff\_Pipe<>\ pipe2(pipe,\ node);}}
\DoxyCodeLine{00307\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00308\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00309\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceff_a9bea9a93826205dd2dd32ca839393179}{combine\_with\_laststage}}(\mbox{\hyperlink{classff_1_1ff__pipeline_a05e2c125dd1007c027b0713281b2d07f}{ff\_pipeline}}\&\ pipe,\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ node,\ \textcolor{keywordtype}{bool}\ cleanup\_node)\ \{\ \ \ \ }
\DoxyCodeLine{00310\ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a8a9c02fe71dc0d72a7f2184b97fff3ee}{flatten}}();}
\DoxyCodeLine{00311\ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a53ab8b2244539766bdea3eb65cb04f9b}{ff\_node}}*\ last\ =\ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a31b7be04692e62622384586cb48f777a}{get\_lastnode}}();\ \textcolor{comment}{//\ it\ cannot\ be\ a\ pipeline}}
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{keywordflow}{if}\ (!last)\ \{}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}combine\_with\_laststage:\ empty\ pipeline\(\backslash\)n"{}});}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00315\ \ \ \ \ \}}
\DoxyCodeLine{00316\ \ \ \ \ \textcolor{keywordflow}{if}\ (last-\/>isAll2All())\ \{}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceff_a4e23df8155868a2b041038f99b2f3899}{combine\_right\_with\_a2a}}(*\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a7542a58b0efa58291c12d2926c2a78d4}{ff\_a2a}}*\textcolor{keyword}{>}(last),\ node,\ cleanup\_node);}
\DoxyCodeLine{00318\ \ \ \ \ \}}
\DoxyCodeLine{00319\ \ \ \ \ \textcolor{keywordflow}{if}\ (last-\/>isFarm())\ \{}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceff_aa3746fc0b8650a97640a194573b06dea}{combine\_right\_with\_farm}}(*\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(last),\ node,\ cleanup\_node);}
\DoxyCodeLine{00321\ \ \ \ \ \}}
\DoxyCodeLine{00322\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classff_1_1ff__pipeline_ac102b214d7afda6c03823d09e1ddf5a4}{node\_cleanup}}\ =\ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a1d3606c621474d26ad18dd0bf432fd58}{isset\_cleanup\_nodes}}();}
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{keywordtype}{int}\ nstages=\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}.size());\ \ \ \ }
\DoxyCodeLine{00324\ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_abe64ffac2201bfaef32ab7a7c16ab511}{ff\_comb}}*\ comb\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__node_abe64ffac2201bfaef32ab7a7c16ab511}{ff\_comb}}(last,\ node,\ \mbox{\hyperlink{classff_1_1ff__pipeline_ac102b214d7afda6c03823d09e1ddf5a4}{node\_cleanup}}\ ,\ cleanup\_node);}
\DoxyCodeLine{00325\ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a0efc47f547c9879b6bd57d138ba6c102}{remove\_stage}}(nstages-\/1);}
\DoxyCodeLine{00326\ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a564a573fca0c01a7889a60f207a9e348}{insert\_stage}}((nstages-\/1)>0?(nstages-\/1):0,\ comb,\ \textcolor{keyword}{true});\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00328\ \}}
\DoxyCodeLine{00329\ \ \ \ \ }
\DoxyCodeLine{00330\ \ \ \ \ }
\DoxyCodeLine{00331\ \textcolor{comment}{/*\ This\ is\ farm\ specific.\ }}
\DoxyCodeLine{00332\ \textcolor{comment}{\ *\ \ -\/\ It\ basically\ sets\ the\ threshold\ for\ enabling\ blocking\ mode.}}
\DoxyCodeLine{00333\ \textcolor{comment}{\ *\ \ -\/\ It\ can\ remove\ the\ collector\ of\ internal\ farms\ in\ a\ farm\ of\ farms\ composition.}}
\DoxyCodeLine{00334\ \textcolor{comment}{\ *\ \ -\/\ TODO:\ Farm\ of\ farms\ -\/-\/-\/>\ single\ farm\ with\ two\ emitters\ combined\ (external+internal)}}
\DoxyCodeLine{00335\ \textcolor{comment}{\ */}\ \ \ \ }
\DoxyCodeLine{00336\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceff_a7f7589d2b1d91f35218bad0cd1370fc4}{optimize\_static}}(\mbox{\hyperlink{classff_1_1ff__farm_a9b16234269f61fb52814e520773fba3e}{ff\_farm}}\&\ farm,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structff_1_1_opt_level}{OptLevel}}\&\ opt=\mbox{\hyperlink{structff_1_1_opt_level1}{OptLevel1}}())\ \{}
\DoxyCodeLine{00337\ \ \ \ \ \textcolor{keywordflow}{if}\ (farm.\mbox{\hyperlink{classff_1_1ff__node_ad7d194fec0ea3d7a79f3b8392b4549a5}{prepared}})\ \{}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}optimize\_static\ (farm)\ called\ after\ prepare\(\backslash\)n"{}});}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00340\ \ \ \ \ \}}
\DoxyCodeLine{00341\ \ \ \ \ \textcolor{comment}{//\ optimizing\ internal\ pipelines,\ if\ any}}
\DoxyCodeLine{00342\ \ \ \ \ \mbox{\hyperlink{structff_1_1_opt_level}{OptLevel}}\ iopt(opt);}
\DoxyCodeLine{00343\ \ \ \ \ iopt.\mbox{\hyperlink{structff_1_1_opt_level_afc0febc2bdac20ff5ca00675baba4957}{blocking\_mode}}\ \ \ \ \ \ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00344\ \ \ \ \ iopt.\mbox{\hyperlink{structff_1_1_opt_level_ae8749cd48daad9d6f43d4540959f4cca}{no\_initial\_barrier}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00345\ \ \ \ \ iopt.\mbox{\hyperlink{structff_1_1_opt_level_ae1b9a53f0a66682352aff52d28cb89a5}{no\_default\_mapping}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00346\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\ \&Workers\ =\ farm.\mbox{\hyperlink{classff_1_1ff__farm_a67596a94ae016f648b2793a90b96a5de}{getWorkers}}();}
\DoxyCodeLine{00347\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<Workers.\mbox{\hyperlink{classff_1_1svector_a29125256281f793b0808ecfae6ea68ec}{size}}();++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (Workers[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>\mbox{\hyperlink{classff_1_1ff__node_af6f2c022154421e2908065194b3cc75e}{isPipe}}())\ \{}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}OPT\ (farm):\ Looking\ for\ optimizations\ in\ the\ internal\ pipeline\ \%ld\(\backslash\)n"{}},\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a3f36c1cb1d96150c90c517c1cae31d7e}{ff\_pipeline}}\ *ipipe\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a3f36c1cb1d96150c90c517c1cae31d7e}{ff\_pipeline}}*\textcolor{keyword}{>}(Workers[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a7f7589d2b1d91f35218bad0cd1370fc4}{optimize\_static}}(*ipipe,\ iopt))\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00355\ \ \ \ \ \}}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00357\ \ \ \ \ \textcolor{comment}{//\ here\ it\ looks\ for\ internal\ farms\ with\ null\ collectors}}
\DoxyCodeLine{00358\ \ \ \ \ \textcolor{keywordflow}{if}\ (opt.remove\_collector)\ \{}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ optimize\_internal\_farm\ =\ [opt](\mbox{\hyperlink{classff_1_1ff__farm_a9b16234269f61fb52814e520773fba3e}{ff\_farm}}\&\ ifarm)\ \{}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1_opt_level}{OptLevel}}\ iopt;}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \ \ iopt.\mbox{\hyperlink{structff_1_1_opt_level_af3023d9505cc15e480409d0b3419ac6d}{remove\_collector}}=\textcolor{keyword}{true};}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \ \ \ \ iopt.\mbox{\hyperlink{structff_1_1_opt_level_afa60b909920f9d9ee3fd7c113008df3d}{verbose\_level}}\ =\ opt.verbose\_level;}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a7f7589d2b1d91f35218bad0cd1370fc4}{optimize\_static}}(ifarm,\ iopt)<0)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ifarm.\mbox{\hyperlink{classff_1_1ff__farm_af88d021b0d4df352b5f025f531f07da8}{getCollector}}()\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},\ \textcolor{stringliteral}{"{}OPT\ (farm):\ REMOVE\_COLLECTOR:\ Removed\ farm\ collector\(\backslash\)n"{}});}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ifarm.\mbox{\hyperlink{classff_1_1ff__farm_a5fde02281e79ca2a135688e261a7225f}{remove\_collector}}();}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\&\ \mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}\ =\ farm.\mbox{\hyperlink{classff_1_1ff__farm_a67596a94ae016f648b2793a90b96a5de}{getWorkers}}();}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}.size();++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>\mbox{\hyperlink{classff_1_1ff__farm_a431edc561638fb362e3c462b0e9ab500}{isFarm}}()\ \&\&\ !\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>\mbox{\hyperlink{classff_1_1ff__farm_aa10cc13201ed73a959db23e93d5a6398}{isOFarm}}())\ \{}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_a9b16234269f61fb52814e520773fba3e}{ff\_farm}}*\ ifarm\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__farm_a9b16234269f61fb52814e520773fba3e}{ff\_farm}}*\textcolor{keyword}{>}(\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}OPT\ (farm):\ Looking\ for\ optimizations\ in\ the\ internal\ farm\ \%ld\(\backslash\)n"{}},\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (optimize\_internal\_farm(*ifarm)<0)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>\mbox{\hyperlink{classff_1_1ff__node_af6f2c022154421e2908065194b3cc75e}{isPipe}}())\ \{}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a3f36c1cb1d96150c90c517c1cae31d7e}{ff\_pipeline}}*\ ipipe\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a3f36c1cb1d96150c90c517c1cae31d7e}{ff\_pipeline}}*\textcolor{keyword}{>}(\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1_opt_level}{OptLevel}}\ iopt;}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ iopt.\mbox{\hyperlink{structff_1_1_opt_level_af3023d9505cc15e480409d0b3419ac6d}{remove\_collector}}=\textcolor{keyword}{true};}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ iopt.\mbox{\hyperlink{structff_1_1_opt_level_afa60b909920f9d9ee3fd7c113008df3d}{verbose\_level}}\ =\ opt.verbose\_level;}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a7f7589d2b1d91f35218bad0cd1370fc4}{optimize\_static}}(*ipipe,\ iopt)<0)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00386\ }
\DoxyCodeLine{00387\ }
\DoxyCodeLine{00388\ \textcolor{preprocessor}{\#if\ 0\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a53ab8b2244539766bdea3eb65cb04f9b}{ff\_node}}*\ last\ \ =\ ipipe-\/>\mbox{\hyperlink{classff_1_1ff__pipeline_a31b7be04692e62622384586cb48f777a}{get\_lastnode}}();}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (last-\/>isFarm()\ \&\&\ !last-\/>isOFarm())\ \{}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_a9b16234269f61fb52814e520773fba3e}{ff\_farm}}*\ ifarm\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__farm_a9b16234269f61fb52814e520773fba3e}{ff\_farm}}*\textcolor{keyword}{>}(last);}
\DoxyCodeLine{00392\ }
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}OPT\ (farm):\ Looking\ for\ optimizations\ in\ the\ internal\ last\ farm\ of\ a\ pipeline\ \%ld\(\backslash\)n"{}},\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{00395\ }
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (optimize\_internal\_farm(*ifarm)<0)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00398\ \textcolor{preprocessor}{\#endif\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>\mbox{\hyperlink{classff_1_1ff__node_ac8e132cbcab68af6a4ca13bbcccd62f3}{isAll2All}}())\ \{}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a7542a58b0efa58291c12d2926c2a78d4}{ff\_a2a}}\ *a2a\ \ \ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a7542a58b0efa58291c12d2926c2a78d4}{ff\_a2a}}*\textcolor{keyword}{>}(\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\&\ W1\ =\ a2a-\/>\mbox{\hyperlink{classff_1_1ff__a2a_aab5b0ed53d04a6ae56fcc801f7f7ce7c}{getFirstSet}}();}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\&\ W2\ =\ a2a-\/>\mbox{\hyperlink{classff_1_1ff__a2a_a15e634b23e08ae53f1d5296cae30fb9d}{getSecondSet}}();}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}=0;\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}<W1.\mbox{\hyperlink{classff_1_1svector_a29125256281f793b0808ecfae6ea68ec}{size}}();++\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})\ \{}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (W1[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]-\/>\mbox{\hyperlink{classff_1_1ff__node_af6f2c022154421e2908065194b3cc75e}{isPipe}}())\ \{}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a3f36c1cb1d96150c90c517c1cae31d7e}{ff\_pipeline}}*\ ipipe=\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a3f36c1cb1d96150c90c517c1cae31d7e}{ff\_pipeline}}*\textcolor{keyword}{>}(W1[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]);}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1_opt_level}{OptLevel}}\ iopt;}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ iopt.\mbox{\hyperlink{structff_1_1_opt_level_af3023d9505cc15e480409d0b3419ac6d}{remove\_collector}}=\textcolor{keyword}{true};}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ iopt.\mbox{\hyperlink{structff_1_1_opt_level_afa60b909920f9d9ee3fd7c113008df3d}{verbose\_level}}\ =\ opt.verbose\_level;}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a7f7589d2b1d91f35218bad0cd1370fc4}{optimize\_static}}(*ipipe,\ iopt)<0)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}=0;\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}<W2.\mbox{\hyperlink{classff_1_1svector_a29125256281f793b0808ecfae6ea68ec}{size}}();++\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})\ \{}
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (W2[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]-\/>\mbox{\hyperlink{classff_1_1ff__node_af6f2c022154421e2908065194b3cc75e}{isPipe}}())\ \{}
\DoxyCodeLine{00415\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a3f36c1cb1d96150c90c517c1cae31d7e}{ff\_pipeline}}*\ ipipe=\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a3f36c1cb1d96150c90c517c1cae31d7e}{ff\_pipeline}}*\textcolor{keyword}{>}(W2[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]);}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1_opt_level}{OptLevel}}\ iopt;}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ iopt.\mbox{\hyperlink{structff_1_1_opt_level_af3023d9505cc15e480409d0b3419ac6d}{remove\_collector}}=\textcolor{keyword}{true};}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ iopt.\mbox{\hyperlink{structff_1_1_opt_level_afa60b909920f9d9ee3fd7c113008df3d}{verbose\_level}}\ =\ opt.verbose\_level;}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a7f7589d2b1d91f35218bad0cd1370fc4}{optimize\_static}}(*ipipe,\ iopt)<0)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00425\ \ \ \ \ \}}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00427\ \ \ \ \ \textcolor{comment}{//\ swithing\ to\ blocking\ mode\ if\ the\ n.\ of\ threads\ is\ greater\ than\ the\ threshold}}
\DoxyCodeLine{00428\ \ \ \ \ \textcolor{keywordflow}{if}\ (opt.blocking\_mode)\ \{}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ card\ =\ farm.\mbox{\hyperlink{classff_1_1ff__farm_a02802ccb0a092021e4e0ed109b89ab43}{cardinality}}();}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (opt.max\_nb\_threads\ <\ card)\ \{}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}OPT\ (farm):\ BLOCKING\_MODE:\ Activating\ blocking\ mode,\ threshold=\%ld,\ number\ of\ threads=\%ld\(\backslash\)n"{}},opt.max\_nb\_threads,\ card);}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \ \ \ \ farm.\mbox{\hyperlink{classff_1_1ff__farm_a90fb224eff4a132ae6a3e924ac158467}{blocking\_mode}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00436\ \ \ \ \ \}}
\DoxyCodeLine{00437\ }
\DoxyCodeLine{00438\ \ \ \ \ \textcolor{comment}{//\ turning\ off\ initial/default\ mapping\ if\ the\ n.\ of\ threads\ is\ greater\ than\ the\ threshold}}
\DoxyCodeLine{00439\ \ \ \ \ \textcolor{keywordflow}{if}\ (opt.no\_default\_mapping)\ \{}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ card\ =\ farm.\mbox{\hyperlink{classff_1_1ff__farm_a02802ccb0a092021e4e0ed109b89ab43}{cardinality}}();}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (opt.max\_mapped\_threads\ <\ card)\ \{}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}OPT\ (farm):\ MAPPING:\ Disabling\ mapping,\ threshold=\%ld,\ number\ of\ threads=\%ld\(\backslash\)n"{}},opt.max\_mapped\_threads,\ card);}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \ \ \ \ farm.\mbox{\hyperlink{classff_1_1ff__farm_a15b475d3663b9a8a9a0f1b1a12a873f4}{no\_mapping}}();}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00447\ \ \ \ \ \}}
\DoxyCodeLine{00448\ \ \ \ \ \textcolor{comment}{//\ no\ initial\ barrier}}
\DoxyCodeLine{00449\ \ \ \ \ \textcolor{keywordflow}{if}\ (opt.no\_initial\_barrier)\ \{}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}OPT\ (farm):\ NO\_INITIAL\_BARRIER:\ Initial\ barrier\ disabled\(\backslash\)n"{}});}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ farm.\mbox{\hyperlink{classff_1_1ff__farm_af50793a4faee530b0000fe51954a16c9}{no\_barrier}}();}
\DoxyCodeLine{00453\ \ \ \ \}}
\DoxyCodeLine{00454\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00455\ \}}
\DoxyCodeLine{00456\ \ \ \ \ }
\DoxyCodeLine{00457\ \textcolor{comment}{/*\ }}
\DoxyCodeLine{00458\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00459\ \textcolor{comment}{\ */}\ \ \ \ }
\DoxyCodeLine{00460\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceff_a7f7589d2b1d91f35218bad0cd1370fc4}{optimize\_static}}(\mbox{\hyperlink{classff_1_1ff__pipeline_a05e2c125dd1007c027b0713281b2d07f}{ff\_pipeline}}\&\ pipe,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structff_1_1_opt_level}{OptLevel}}\&\ opt=\mbox{\hyperlink{structff_1_1_opt_level1}{OptLevel1}}())\ \{}
\DoxyCodeLine{00461\ \ \ \ \ \textcolor{keywordflow}{if}\ (pipe.\mbox{\hyperlink{classff_1_1ff__node_ad7d194fec0ea3d7a79f3b8392b4549a5}{prepared}})\ \{}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}optimize\_static\ (pipeline)\ called\ after\ prepare\(\backslash\)n"{}});}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00464\ \ \ \ \ \}}
\DoxyCodeLine{00465\ }
\DoxyCodeLine{00466\ \ \ \ \textcolor{comment}{//\ flattening\ the\ pipeline\ }}
\DoxyCodeLine{00467\ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a8a9c02fe71dc0d72a7f2184b97fff3ee}{flatten}}();}
\DoxyCodeLine{00468\ \ \ \ \ \textcolor{keywordtype}{int}\ nstages=\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}.size());\ \ \ \ }
\DoxyCodeLine{00469\ }
\DoxyCodeLine{00470\ \ \ \ \textcolor{comment}{//\ looking\ for\ farm\ and\ all-\/to-\/all\ because\ they\ might\ have\ pipeline\ inside}}
\DoxyCodeLine{00471\ \ \ \ \textcolor{comment}{//\ for\ each\ nested\ pipeline\ the\ optimize\_pipeline\ function\ is\ recursively}}
\DoxyCodeLine{00472\ \ \ \ \textcolor{comment}{//\ called\ following\ a\ depth-\/first\ search}}
\DoxyCodeLine{00473\ }
\DoxyCodeLine{00474\ \ \ \ \mbox{\hyperlink{structff_1_1_opt_level}{OptLevel}}\ iopt(opt);}
\DoxyCodeLine{00475\ \ \ \ iopt.\mbox{\hyperlink{structff_1_1_opt_level_afc0febc2bdac20ff5ca00675baba4957}{blocking\_mode}}\ \ \ \ \ \ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00476\ \ \ \ iopt.\mbox{\hyperlink{structff_1_1_opt_level_ae8749cd48daad9d6f43d4540959f4cca}{no\_initial\_barrier}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00477\ \ \ \ iopt.\mbox{\hyperlink{structff_1_1_opt_level_ae1b9a53f0a66682352aff52d28cb89a5}{no\_default\_mapping}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00478\ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<nstages;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>isFarm())\ \{}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}\ *farm\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\&\ \mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}\ =\ farm-\/>\mbox{\hyperlink{classff_1_1ff__farm_a67596a94ae016f648b2793a90b96a5de}{getWorkers}}();}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}=0;\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}<\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}.size();++\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})\ \{}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]-\/>\mbox{\hyperlink{classff_1_1ff__pipeline_ab2d6f1a4b4a772be29fbab36bb185b8a}{isPipe}}())\ \{}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__pipeline_a05e2c125dd1007c027b0713281b2d07f}{ff\_pipeline}}*\ ipipe=\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__pipeline_a05e2c125dd1007c027b0713281b2d07f}{ff\_pipeline}}*\textcolor{keyword}{>}(\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]);}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a7f7589d2b1d91f35218bad0cd1370fc4}{optimize\_static}}(*ipipe,\ iopt))\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>isAll2All())\ \{}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a7542a58b0efa58291c12d2926c2a78d4}{ff\_a2a}}\ *a2a\ \ \ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a7542a58b0efa58291c12d2926c2a78d4}{ff\_a2a}}*\textcolor{keyword}{>}(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\&\ W1\ =\ a2a-\/>\mbox{\hyperlink{classff_1_1ff__a2a_aab5b0ed53d04a6ae56fcc801f7f7ce7c}{getFirstSet}}();}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\&\ W2\ =\ a2a-\/>\mbox{\hyperlink{classff_1_1ff__a2a_a15e634b23e08ae53f1d5296cae30fb9d}{getSecondSet}}();}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}=0;\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}<W1.\mbox{\hyperlink{classff_1_1svector_a29125256281f793b0808ecfae6ea68ec}{size}}();++\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})\ \{}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (W1[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]-\/>\mbox{\hyperlink{classff_1_1ff__pipeline_ab2d6f1a4b4a772be29fbab36bb185b8a}{isPipe}}())\ \{}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__pipeline_a05e2c125dd1007c027b0713281b2d07f}{ff\_pipeline}}*\ ipipe=\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__pipeline_a05e2c125dd1007c027b0713281b2d07f}{ff\_pipeline}}*\textcolor{keyword}{>}(W1[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]);}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a7f7589d2b1d91f35218bad0cd1370fc4}{optimize\_static}}(*ipipe,\ iopt))\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}=0;\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}<W2.\mbox{\hyperlink{classff_1_1svector_a29125256281f793b0808ecfae6ea68ec}{size}}();++\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})\ \{}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (W2[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]-\/>\mbox{\hyperlink{classff_1_1ff__pipeline_ab2d6f1a4b4a772be29fbab36bb185b8a}{isPipe}}())\ \{}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__pipeline_a05e2c125dd1007c027b0713281b2d07f}{ff\_pipeline}}*\ ipipe=\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__pipeline_a05e2c125dd1007c027b0713281b2d07f}{ff\_pipeline}}*\textcolor{keyword}{>}(W2[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]);}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a7f7589d2b1d91f35218bad0cd1370fc4}{optimize\_static}}(*ipipe,\ iopt))\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00505\ \ \ \ \}}
\DoxyCodeLine{00506\ \ \ \ }
\DoxyCodeLine{00507\ \ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ helping\ function\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00508\ \ \ \ \textcolor{keyword}{auto}\ find\_farm\_with\_null\_collector\ =}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ [](\textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\&\ nodeslist,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}=0)-\/>\textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}};\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<(\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}})(nodeslist.\mbox{\hyperlink{classff_1_1svector_a29125256281f793b0808ecfae6ea68ec}{size}}());++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nodeslist[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>\mbox{\hyperlink{classff_1_1ff__node_a2af2bb6ee5bffb4bb5074b4c46ededed}{isFarm}}())\ \{}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}\ *farm\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(nodeslist[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (farm-\/>\mbox{\hyperlink{classff_1_1ff__farm_af88d021b0d4df352b5f025f531f07da8}{getCollector}}()\ ==\ \textcolor{keyword}{nullptr})\ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};}
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00517\ \ \ \ \};}
\DoxyCodeLine{00518\ \ \ \ \textcolor{keyword}{auto}\ find\_farm\_with\_null\_emitter\ =}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ [](\textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\&\ nodeslist,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}}=0)-\/>\textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=\mbox{\hyperlink{cpq__pdes_8cpp_a455a4d1d80a69762a133ad026f1cba43}{start}};\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<(\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}})(nodeslist.\mbox{\hyperlink{classff_1_1svector_a29125256281f793b0808ecfae6ea68ec}{size}}());++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nodeslist[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>\mbox{\hyperlink{classff_1_1ff__node_a2af2bb6ee5bffb4bb5074b4c46ededed}{isFarm}}()\ \&\&}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keyword}{nullptr}\ \ ==\ (\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(nodeslist[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]))-\/>getEmitter())\ }
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )\ }
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00527\ \ \ \ \};}
\DoxyCodeLine{00528\ \ \ \ \textcolor{comment}{//\ looking\ for\ the\ longest\ sequence\ of\ farms\ (or\ ofarms)\ with\ the\ same\ number\ of\ workers}}
\DoxyCodeLine{00529\ \ \ \ \textcolor{keyword}{auto}\ farm\_sequence\ =}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ [\&](\textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\&\ nodeslist,\ \textcolor{keywordtype}{int}\&\ first\_farm,\ \textcolor{keywordtype}{int}\&\ last\_farm)\ \{}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ ofarm\ =\ nodeslist[first\_farm]-\/>isOFarm();}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ nworkers\ =\ (\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(nodeslist[first\_farm]))-\/>getNWorkers();}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ starting\_point=first\_farm+1;}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ first\ =\ first\_farm,\ last\ =\ last\_farm;}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (starting\_point<\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(nodeslist.\mbox{\hyperlink{classff_1_1svector_a29125256281f793b0808ecfae6ea68ec}{size}}()))\ \ \{}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{testhelper_8h_a047ea0d874e6802b9b6d08f6b50248e5}{ok}}=\textcolor{keyword}{true};}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ next\ =\ find\_farm\_with\_null\_emitter(nodeslist,\ starting\_point);}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (next\ ==\ -\/1)\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=starting\_point;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<=next;)\ \{}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((ofarm?nodeslist[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>\mbox{\hyperlink{classff_1_1ff__node_a0e0ec9da95b11c7d9a5ce874870cf9df}{isOFarm}}():!nodeslist[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>\mbox{\hyperlink{classff_1_1ff__node_a0e0ec9da95b11c7d9a5ce874870cf9df}{isOFarm}}())\ \&\&}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (nworkers\ ==\ (\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(nodeslist[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]))-\/>getNWorkers())\ \ \&\&}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keyword}{nullptr}\ \ ==\ (\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(nodeslist[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]))-\/>getCollector())\ \&\&}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keyword}{nullptr}\ \ ==\ (\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(nodeslist[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]))-\/>getEmitter())}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{\ \mbox{\hyperlink{testhelper_8h_a047ea0d874e6802b9b6d08f6b50248e5}{ok}}\ =\ \textcolor{keyword}{false};\ \textcolor{keywordflow}{break};\ \}}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{testhelper_8h_a047ea0d874e6802b9b6d08f6b50248e5}{ok}})\ }
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(nodeslist[next]))-\/>getEmitter()\ !=\ \textcolor{keyword}{nullptr})\ \mbox{\hyperlink{testhelper_8h_a047ea0d874e6802b9b6d08f6b50248e5}{ok}}=\textcolor{keyword}{false};}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{testhelper_8h_a047ea0d874e6802b9b6d08f6b50248e5}{ok}})\ \{}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ last\ =\ next;}
\DoxyCodeLine{00554\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ starting\_point\ =\ next+1;}
\DoxyCodeLine{00555\ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (last==-\/1)\ \{}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ first\ =\ find\_farm\_with\_null\_collector(nodeslist,\ first+1);}
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (first==-\/1)\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ starting\_point\ =\ first\_farm+1;}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00562\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (first\ !=\ -\/1\ \&\&\ last\ !=\ -\/1)\ \{}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ \ \ \ first\_farm\ =\ first;}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ \ \ \ last\_farm\ \ =\ last;}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00567\ \ \ \ \};}
\DoxyCodeLine{00568\ \ \ \ \textcolor{comment}{//\ introduces\ the\ normal-\/form\ of\ a\ sequence\ of\ farms\ (or\ ofarms)}}
\DoxyCodeLine{00569\ \ \ \ \textcolor{keyword}{auto}\ combine\_farm\_sequence\ =}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \ [](\textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1svector}{svector<ff\_node*>}}\&\ nodeslist,\ \textcolor{keywordtype}{int}\ first\_farm,\ \textcolor{keywordtype}{int}\ last\_farm)\ \{}
\DoxyCodeLine{00571\ }
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1svector}{svector<svector<ff\_node*>}}\ >\ \mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}(16);}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}.resize(last\_farm-\/first\_farm+1);}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=first\_farm,\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<=last\_farm;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},++\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})\ \{}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]=\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(nodeslist[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}])-\/>getWorkers();}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ nfarms\ \ \ =\ \mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}.size();}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ nworkers\ =\ \mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[0].size();}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ std::vector<ff\_node*>\ Workers(nworkers);}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}=0;\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}<nworkers;\ ++\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})\ \{}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nfarms==2)\ \ \{}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_abe64ffac2201bfaef32ab7a7c16ab511}{ff\_comb}}\ *\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__node_abe64ffac2201bfaef32ab7a7c16ab511}{ff\_comb}}(\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[0][\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}],\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[1][\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]);}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}});}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Workers[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1ff__node_abe64ffac2201bfaef32ab7a7c16ab511}{ff\_comb}}\ *\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__node_abe64ffac2201bfaef32ab7a7c16ab511}{ff\_comb}}(\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[0][\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}],\mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[1][\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]);}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=2;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<nfarms;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1ff__node_abe64ffac2201bfaef32ab7a7c16ab511}{ff\_comb}}*\ combtmp\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__node_abe64ffac2201bfaef32ab7a7c16ab511}{ff\_comb}}(*\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{test__flow__graph_8cpp_ab21b528bc38899d04d3a7053e52fb797}{W}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}][\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]);}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(combtmp);}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ combtmp;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00593\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Workers[\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}]\ =\ \textcolor{keyword}{const\_cast<}\mbox{\hyperlink{classff_1_1ff__node_abe64ffac2201bfaef32ab7a7c16ab511}{ff\_comb}}*\textcolor{keyword}{>}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}});}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\ firstfarm=\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(nodeslist[first\_farm]);}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\ lastfarm\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(nodeslist[last\_farm]);}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\ newfarm\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}};}
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (firstfarm-\/>\mbox{\hyperlink{classff_1_1ff__farm_aa10cc13201ed73a959db23e93d5a6398}{isOFarm}}())\ \{}
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \ \ \ assert(lastfarm-\/>\mbox{\hyperlink{classff_1_1ff__farm_aa10cc13201ed73a959db23e93d5a6398}{isOFarm}}());}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \ \ \ newfarm-\/>\mbox{\hyperlink{classff_1_1ff__farm_aab29a7a312aafea479fa34f9dfc9ec24}{set\_ordered}}();}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (firstfarm-\/>\mbox{\hyperlink{classff_1_1ff__farm_ad05568d154a61549f346beb386bde880}{getEmitter}}())\ newfarm-\/>\mbox{\hyperlink{classff_1_1ff__farm_a6ac3d4cd02f14fcc1e0f0474eea1fa44}{add\_emitter}}(firstfarm-\/>\mbox{\hyperlink{classff_1_1ff__farm_ad05568d154a61549f346beb386bde880}{getEmitter}}());\ \ \ \ \ \ \ }
\DoxyCodeLine{00606\ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (lastfarm-\/>\mbox{\hyperlink{classff_1_1ff__farm_a5c5dc54cb6a91caacf2d316f5c3a19ad}{hasCollector}}())\ }
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \ \ \ newfarm-\/>\mbox{\hyperlink{classff_1_1ff__farm_ad8117ca2bc937e6be844af50ca6d2b87}{add\_collector}}(lastfarm-\/>\mbox{\hyperlink{classff_1_1ff__farm_af88d021b0d4df352b5f025f531f07da8}{getCollector}}());}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ newfarm-\/>\mbox{\hyperlink{classff_1_1ff__farm_abcc6e24c3d7ca03c67e4206f829d1c0b}{add\_workers}}(Workers);}
\DoxyCodeLine{00609\ \ \ \ \ \ \ \ newfarm-\/>\mbox{\hyperlink{classff_1_1ff__farm_ac2c4fef13d5554d25d60cb12a701a153}{cleanup\_workers}}();}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ newfarm-\/>\mbox{\hyperlink{classff_1_1ff__farm_a259e203b6eaf044985781f0a8668b9ae}{set\_scheduling\_ondemand}}(firstfarm-\/>\mbox{\hyperlink{classff_1_1ff__farm_a9f977a79be588062b5065282e343b7bf}{ondemand\_buffer}}());}
\DoxyCodeLine{00611\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ newfarm;}
\DoxyCodeLine{00613\ \ \ \ \};}
\DoxyCodeLine{00614\ \ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ end\ helping\ function\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00616\ \ \ \ \textcolor{keywordflow}{if}\ (opt.merge\_farms)\ \{}
\DoxyCodeLine{00617\ \ \ \ \ \ \ \ \textcolor{comment}{//\ find\ the\ first\ farm\ with\ default\ collector\ or\ with\ no\ collector}}
\DoxyCodeLine{00618\ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ first\_farm\ =\ find\_farm\_with\_null\_collector(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}});}
\DoxyCodeLine{00619\ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (first\_farm!=-\/1)\ \{}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ last\_farm\ \ =\ -\/1;}
\DoxyCodeLine{00622\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ farm\_sequence(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}},first\_farm,last\_farm);}
\DoxyCodeLine{00623\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (first\_farm<last\_farm)\ \{\ \ \textcolor{comment}{//\ normal\ form}}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}\ *newfarm\ =\ combine\_farm\_sequence(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}},first\_farm,last\_farm);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00625\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=first\_farm;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<=last\_farm;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a0efc47f547c9879b6bd57d138ba6c102}{remove\_stage}}(first\_farm);}
\DoxyCodeLine{00626\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a564a573fca0c01a7889a60f207a9e348}{insert\_stage}}(first\_farm,\ newfarm,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00627\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},}
\DoxyCodeLine{00628\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}OPT\ (pipe):\ MERGE\_FARMS:\ Merged\ farms\ staged\ [\%d-\/\%d]\(\backslash\)n"{}},\ first\_farm,\ last\_farm);}
\DoxyCodeLine{00629\ }
\DoxyCodeLine{00630\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ }
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ first\_farm\ =\ find\_farm\_with\_null\_collector(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}},\ first\_farm+1);}
\DoxyCodeLine{00632\ \ \ \ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{while}(first\_farm!=-\/1\ \&\&\ first\_farm\ <\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}.size()));}
\DoxyCodeLine{00633\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00634\ \ \ \ \}}
\DoxyCodeLine{00635\ \ \ \ \textcolor{keywordflow}{if}\ (opt.introduce\_a2a)\ \{}
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ first\_farm\ =\ find\_farm\_with\_null\_collector(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}});}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(first\_farm\ !=\ -\/1\ \&\&\ (first\_farm\ <\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}.size()-\/1)))\ \{}
\DoxyCodeLine{00638\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm]-\/>isOFarm())\ \{}
\DoxyCodeLine{00639\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm+1]-\/>isFarm()\ \&\&\ !pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm+1]-\/>isOFarm())\ \{}
\DoxyCodeLine{00640\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}\ *farm1\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm]);}
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}\ *farm2\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm+1]);}
\DoxyCodeLine{00642\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (farm2-\/>\mbox{\hyperlink{classff_1_1ff__farm_ad05568d154a61549f346beb386bde880}{getEmitter}}()\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00643\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},}
\DoxyCodeLine{00644\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}OPT\ (pipe):\ INTRODUCE\_A2A:\ Introducing\ all-\/to-\/all\ between\ \%d\ and\ \%d\ stages\(\backslash\)n"{}},\ first\_farm,\ first\_farm+1);}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ =\ \mbox{\hyperlink{namespaceff_a0287483c11dd1cf9db892ff019145117}{combine\_farms\_a2a}}(*farm1,\ *farm2);}
\DoxyCodeLine{00646\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\ newfarm\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});}
\DoxyCodeLine{00647\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(newfarm);}
\DoxyCodeLine{00648\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a0efc47f547c9879b6bd57d138ba6c102}{remove\_stage}}(first\_farm);}
\DoxyCodeLine{00649\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a0efc47f547c9879b6bd57d138ba6c102}{remove\_stage}}(first\_farm);}
\DoxyCodeLine{00650\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a564a573fca0c01a7889a60f207a9e348}{insert\_stage}}(first\_farm,\ newfarm,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ first\_farm\ =\ find\_farm\_with\_null\_collector(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}},\ first\_farm+1);}
\DoxyCodeLine{00652\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm+1]-\/>isOFarm())}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5af324547bb83526929948ef92a83313b6}{OPT\_INFO}},}
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}OPT\ (pipe):\ INTRODUCE\_A2A:\ cannot\ introduce\ A2A\ because\ node\ \%d\ is\ an\ ordered\ farm\(\backslash\)n"{}},\ first\_farm+1);}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ first\_farm\ =\ find\_farm\_with\_null\_collector(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}},\ first\_farm+2);}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5af324547bb83526929948ef92a83313b6}{OPT\_INFO}},}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}OPT\ (pipe):\ INTRODUCE\_A2A:\ cannot\ introduce\ A2A\ because\ node\ \%d\ is\ an\ ordered\ farm\(\backslash\)n"{}},\ first\_farm);}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ first\_farm\ =\ find\_farm\_with\_null\_collector(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}},\ first\_farm+1);}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00665\ \ \ \ \}}
\DoxyCodeLine{00666\ }
\DoxyCodeLine{00667\ \ \ \ \textcolor{keywordflow}{if}\ (opt.remove\_collector)\ \{}
\DoxyCodeLine{00668\ \ \ \ \ \ \ \ \textcolor{comment}{//\ first,\ for\ all\ farms\ in\ the\ pipeline\ we\ try\ to\ optimize\ farms'\ workers}}
\DoxyCodeLine{00669\ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1_opt_level}{OptLevel}}\ farmopt;}
\DoxyCodeLine{00670\ \ \ \ \ \ \ \ farmopt.\mbox{\hyperlink{structff_1_1_opt_level_af3023d9505cc15e480409d0b3419ac6d}{remove\_collector}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00671\ \ \ \ \ \ \ \ farmopt.\mbox{\hyperlink{structff_1_1_opt_level_afa60b909920f9d9ee3fd7c113008df3d}{verbose\_level}}\ =\ opt.verbose\_level;}
\DoxyCodeLine{00672\ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}.size();++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00673\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>isFarm())\ \{}
\DoxyCodeLine{00674\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}\ *farmnode\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00675\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a7f7589d2b1d91f35218bad0cd1370fc4}{optimize\_static}}(*farmnode,\ farmopt)<0)\ \{}
\DoxyCodeLine{00676\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}optimize\_static,\ trying\ to\ optimize\ the\ farm\ at\ stage\ \%ld\(\backslash\)n"{}},\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{00677\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00678\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00679\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00680\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00681\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00682\ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ first\_farm,\ next=0;\ }
\DoxyCodeLine{00683\ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}((first\_farm=find\_farm\_with\_null\_collector(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}},\ next))\ !=\ -\/1)\ \{}
\DoxyCodeLine{00684\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (first\_farm\ <\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}.size()-\/1))\ \{}
\DoxyCodeLine{00685\ }
\DoxyCodeLine{00686\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ if\ the\ next\ stage\ is\ A2A\ would\ be\ nice\ to\ have\ a\ rule}}
\DoxyCodeLine{00687\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ that\ attaches\ the\ farm\ workers\ with\ the\ first\ set\ of\ nodes}}
\DoxyCodeLine{00688\ }
\DoxyCodeLine{00689\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}\ *farm\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm]);}
\DoxyCodeLine{00690\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (farm-\/>\mbox{\hyperlink{classff_1_1ff__farm_a5c5dc54cb6a91caacf2d316f5c3a19ad}{hasCollector}}())\ \{}
\DoxyCodeLine{00691\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (farm-\/>\mbox{\hyperlink{classff_1_1ff__farm_aa10cc13201ed73a959db23e93d5a6398}{isOFarm}}())\ \{}
\DoxyCodeLine{00692\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((!pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm+1]-\/>isAll2All())\ \&\&}
\DoxyCodeLine{00693\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (!pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm+1]-\/>isFarm()))\ \{}
\DoxyCodeLine{00694\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ farm-\/>\mbox{\hyperlink{classff_1_1ff__farm_ad8117ca2bc937e6be844af50ca6d2b87}{add\_collector}}(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm+1]);}
\DoxyCodeLine{00695\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a0efc47f547c9879b6bd57d138ba6c102}{remove\_stage}}(first\_farm+1);}
\DoxyCodeLine{00696\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},\ \textcolor{stringliteral}{"{}OPT\ (pipe):\ REMOVE\_COLLECTOR:\ Merged\ next\ stage\ with\ ordered-\/farm\ collector\(\backslash\)n"{}});}
\DoxyCodeLine{00697\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00698\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00699\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm+1]-\/>isAll2All())\ \{}
\DoxyCodeLine{00700\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ farm-\/>\mbox{\hyperlink{classff_1_1ff__farm_a5fde02281e79ca2a135688e261a7225f}{remove\_collector}}();}
\DoxyCodeLine{00701\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},\ \textcolor{stringliteral}{"{}OPT\ (pipe):\ REMOVE\_COLLECTOR:\ Removed\ farm\ collector\(\backslash\)n"{}});}
\DoxyCodeLine{00702\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00703\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm+1]-\/>isMultiInput())\ \{}
\DoxyCodeLine{00704\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ next\ stage\ is\ a\ standard\ node}}
\DoxyCodeLine{00705\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a53ab8b2244539766bdea3eb65cb04f9b}{ff\_node}}\ *next\ =\ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm+1];}
\DoxyCodeLine{00706\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a0efc47f547c9879b6bd57d138ba6c102}{remove\_stage}}(first\_farm+1);}
\DoxyCodeLine{00707\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a5c2a2267cef9b123fb010235262f1201}{ff\_minode}}\ *\mbox{\hyperlink{test-wrong_8c_af4097c5984eaa15ae4efe4460d4bb920}{mi}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__node_aaabca995c8e468c3324993dd8ba73e4c}{internal\_mi\_transformer}}(next);}
\DoxyCodeLine{00708\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\mbox{\hyperlink{test-wrong_8c_af4097c5984eaa15ae4efe4460d4bb920}{mi}});}
\DoxyCodeLine{00709\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a564a573fca0c01a7889a60f207a9e348}{insert\_stage}}(first\_farm+1,\ \mbox{\hyperlink{test-wrong_8c_af4097c5984eaa15ae4efe4460d4bb920}{mi}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00710\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},\ \textcolor{stringliteral}{"{}OPT\ (pipe):\ REMOVE\_COLLECTOR:\ Transformed\ next\ stage\ to\ multi-\/input\ node\(\backslash\)n"{}});}
\DoxyCodeLine{00711\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ }
\DoxyCodeLine{00712\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00713\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00714\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00715\ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{\ \textcolor{comment}{//\ this\ is\ the\ last\ stage\ (or\ the\ only\ stage)}}
\DoxyCodeLine{00716\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}\ *farm\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm]);}
\DoxyCodeLine{00717\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!farm-\/>\mbox{\hyperlink{classff_1_1ff__farm_aa10cc13201ed73a959db23e93d5a6398}{isOFarm}}())\ \{}
\DoxyCodeLine{00718\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (farm-\/>\mbox{\hyperlink{classff_1_1ff__farm_a5c5dc54cb6a91caacf2d316f5c3a19ad}{hasCollector}}())\ \{}
\DoxyCodeLine{00719\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ farm-\/>\mbox{\hyperlink{classff_1_1ff__farm_a5fde02281e79ca2a135688e261a7225f}{remove\_collector}}();}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},\ \textcolor{stringliteral}{"{}OPT\ (pipe):\ REMOVE\_COLLECTOR:\ Removed\ farm\ collector\(\backslash\)n"{}});}
\DoxyCodeLine{00721\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00722\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00723\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00724\ \ \ \ \ \ \ \ \ \ \ \ next=first\_farm+1;}
\DoxyCodeLine{00725\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00726\ \ \ \ \}}
\DoxyCodeLine{00727\ \ \ \ \textcolor{keywordflow}{if}\ (opt.merge\_with\_emitter)\ \{}
\DoxyCodeLine{00728\ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ first\_farm\ =\ find\_farm\_with\_null\_emitter(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}});}
\DoxyCodeLine{00729\ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (first\_farm!=-\/1)\ \{}
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (first\_farm>0)\ \{\ \textcolor{comment}{//\ it\ is\ not\ the\ first\ one}}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ prev\_single\_standard\ \ =\ (!pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm-\/1]-\/>isMultiOutput());}
\DoxyCodeLine{00732\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (prev\_single\_standard)\ \{}
\DoxyCodeLine{00733\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ could\ be\ a\ farm\ with\ a\ collector}}
\DoxyCodeLine{00734\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm-\/1]-\/>isFarm())\ \{}
\DoxyCodeLine{00735\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}\ *farm\_prev\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm-\/1]);}
\DoxyCodeLine{00736\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (farm\_prev-\/>\mbox{\hyperlink{classff_1_1ff__farm_a5c5dc54cb6a91caacf2d316f5c3a19ad}{hasCollector}}())\ \{}
\DoxyCodeLine{00737\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a53ab8b2244539766bdea3eb65cb04f9b}{ff\_node}}*\ collector=farm\_prev-\/>\mbox{\hyperlink{classff_1_1ff__farm_af88d021b0d4df352b5f025f531f07da8}{getCollector}}();}
\DoxyCodeLine{00738\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (collector-\/>\mbox{\hyperlink{classff_1_1ff__node_ae19d751c9e02406928e3b1dcef6dbc15}{isMultiInput}}()\ \&\&\ !collector-\/>\mbox{\hyperlink{classff_1_1ff__node_a96dcc6dd5c2dd5d783959aa45c44b087}{isComp}}())\ \{}
\DoxyCodeLine{00739\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}MERGING\ MULTI-\/INPUT\ COLLECTOR\ TO\ THE\ FARM\ EMITTER\ NOT\ YET\ SUPPORTED\(\backslash\)n"{}});}
\DoxyCodeLine{00740\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ abort();}
\DoxyCodeLine{00741\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO\ we\ have\ to\ create\ a\ multi-\/input\ comp\ to\ add\ to\ the\ emitter}}
\DoxyCodeLine{00742\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00743\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},\ \textcolor{stringliteral}{"{}OPT\ (pipe):\ MERGE\_WITH\_EMITTER:\ Merged\ previous\ stage\ with\ farm\ emitter\(\backslash\)n"{}});}
\DoxyCodeLine{00744\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}\ *farm\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm]);}
\DoxyCodeLine{00745\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ farm-\/>\mbox{\hyperlink{classff_1_1ff__farm_a6ac3d4cd02f14fcc1e0f0474eea1fa44}{add\_emitter}}(collector);}
\DoxyCodeLine{00746\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ farm\_prev-\/>\mbox{\hyperlink{classff_1_1ff__farm_a5fde02281e79ca2a135688e261a7225f}{remove\_collector}}();}
\DoxyCodeLine{00747\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00748\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00749\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a53ab8b2244539766bdea3eb65cb04f9b}{ff\_node}}\ *node\ =\ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm-\/1];}
\DoxyCodeLine{00750\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (node-\/>isMultiInput()\ \&\&\ !node-\/>isComp())\ \{}
\DoxyCodeLine{00751\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_a27d926d29b55e019eba5b70672301d82}{error}}(\textcolor{stringliteral}{"{}MERGING\ MULTI-\/INPUT\ NODE\ TO\ THE\ FARM\ EMITTER\ NOT\ YET\ SUPPORTED\(\backslash\)n"{}});}
\DoxyCodeLine{00752\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//TODO:\ we\ have\ to\ create\ a\ multi-\/input\ comp\ to\ add\ to\ the\ emitter}}
\DoxyCodeLine{00753\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ abort();}
\DoxyCodeLine{00754\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00755\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}\ *farm\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__node_a49105d0bd6775d145575fd6dfa2d8471}{ff\_farm}}*\textcolor{keyword}{>}(pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm]);}
\DoxyCodeLine{00756\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a3c205dbbc9e51cf98d6c57a0fbc3984e}{nodes\_list}}[first\_farm]-\/>isOFarm())\ \{}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},\ \textcolor{stringliteral}{"{}OPT\ (pipe):\ MERGE\_WITH\_EMITTER:\ Merged\ previous\ stage\ with\ ordered-\/farm\ emitter\(\backslash\)n"{}});}
\DoxyCodeLine{00758\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00759\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},\ \textcolor{stringliteral}{"{}OPT\ (pipe):\ MERGE\_WITH\_EMITTER:\ Merged\ previous\ stage\ with\ farm\ emitter\(\backslash\)n"{}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00760\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00761\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ farm-\/>\mbox{\hyperlink{classff_1_1ff__farm_a6ac3d4cd02f14fcc1e0f0474eea1fa44}{add\_emitter}}(node);}
\DoxyCodeLine{00762\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a0efc47f547c9879b6bd57d138ba6c102}{remove\_stage}}(first\_farm-\/1);}
\DoxyCodeLine{00763\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00764\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00765\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00766\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00767\ \ \ \ \}}
\DoxyCodeLine{00768\ \ \ \ }
\DoxyCodeLine{00769\ \ \ \ \textcolor{comment}{//\ activate\ blocking\ mode\ if\ the\ n.\ of\ threads\ is\ greater\ than\ the\ threshold}}
\DoxyCodeLine{00770\ \ \ \ \textcolor{keywordflow}{if}\ (opt.blocking\_mode)\ \{}
\DoxyCodeLine{00771\ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ card\ =\ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_ae3977b5e06db9452789e5c06e39ad755}{cardinality}}();}
\DoxyCodeLine{00772\ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (opt.max\_nb\_threads\ <\ card)\ \{}
\DoxyCodeLine{00773\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},\ }
\DoxyCodeLine{00774\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}OPT\ (pipe):\ BLOCKING\_MODE:\ Activating\ blocking\ mode,\ threshold=\%ld,\ number\ of\ threads=\%ld\(\backslash\)n"{}},opt.max\_nb\_threads,\ card);}
\DoxyCodeLine{00775\ \ \ \ \ \ \ \ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_ab89319750b9c58222444fd0655e6430b}{blocking\_mode}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00776\ \ \ \ \ \ \ \ \}\ }
\DoxyCodeLine{00777\ \ \ \ \}}
\DoxyCodeLine{00778\ \ \ \ \ \textcolor{comment}{//\ turning\ off\ initial/default\ mapping\ if\ the\ n.\ of\ threads\ is\ greater\ than\ the\ threshold}}
\DoxyCodeLine{00779\ \ \ \ \textcolor{keywordflow}{if}\ (opt.no\_default\_mapping)\ \{}
\DoxyCodeLine{00780\ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ card\ =\ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_ae3977b5e06db9452789e5c06e39ad755}{cardinality}}();}
\DoxyCodeLine{00781\ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (opt.max\_mapped\_threads\ <\ card)\ \{}
\DoxyCodeLine{00782\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},}
\DoxyCodeLine{00783\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}OPT\ (pipe):\ MAPPING:\ Disabling\ mapping,\ threshold=\%ld,\ number\ of\ threads=\%ld\(\backslash\)n"{}},opt.max\_mapped\_threads,\ card);}
\DoxyCodeLine{00784\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00785\ \ \ \ \ \ \ \ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a4809b7ee2f60284f864ff8f049611351}{no\_mapping}}();}
\DoxyCodeLine{00786\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00787\ \ \ \ \}}
\DoxyCodeLine{00788\ \ \ \ \textcolor{comment}{//\ no\ initial\ barrier}}
\DoxyCodeLine{00789\ \ \ \ \textcolor{keywordflow}{if}\ (opt.no\_initial\_barrier)\ \{}
\DoxyCodeLine{00790\ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceff_acc7ab382650120ec3f39570d34d4351f}{opt\_report}}(opt.verbose\_level,\ \mbox{\hyperlink{namespaceff_ade3509d538ab9b0e27e29b9a5ff0bac5a4a73d76a79478db8a5901c3526628a34}{OPT\_NORMAL}},}
\DoxyCodeLine{00791\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}OPT\ (pipe):\ NO\_INITIAL\_BARRIER:\ Initial\ barrier\ disabled\(\backslash\)n"{}});}
\DoxyCodeLine{00792\ \ \ \ \ \ \ \ pipe.\mbox{\hyperlink{classff_1_1ff__pipeline_a94b5eb3e9f06c8f6f70d9cbf87a6735a}{no\_barrier}}();}
\DoxyCodeLine{00793\ \ \ \ \}}
\DoxyCodeLine{00794\ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00795\ \}}
\DoxyCodeLine{00796\ }
\DoxyCodeLine{00797\ }
\DoxyCodeLine{00798\ \}\ \textcolor{comment}{//\ namespace\ ff}}
\DoxyCodeLine{00799\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ FF\_OPTIMIZE\_HPP\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
