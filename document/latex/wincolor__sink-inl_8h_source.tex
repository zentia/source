\doxysection{wincolor\+\_\+sink-\/inl.h}
\hypertarget{wincolor__sink-inl_8h_source}{}\label{wincolor__sink-inl_8h_source}\index{runtime/spdlog/include/spdlog/sinks/wincolor\_sink-\/inl.h@{runtime/spdlog/include/spdlog/sinks/wincolor\_sink-\/inl.h}}
\mbox{\hyperlink{wincolor__sink-inl_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright(c)\ 2015-\/present,\ Gabi\ Melman\ \&\ spdlog\ contributors.}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ Distributed\ under\ the\ MIT\ License\ (http://opensource.org/licenses/MIT)}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#ifndef\ SPDLOG\_HEADER\_ONLY}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\ \ \ \ \#include\ <\mbox{\hyperlink{wincolor__sink_8h}{spdlog/sinks/wincolor\_sink.h}}>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{windows__include_8h}{spdlog/details/windows\_include.h}}>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <wincon.h>}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{common_8h}{spdlog/common.h}}>}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{pattern__formatter_8h}{spdlog/pattern\_formatter.h}}>}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacespdlog}{spdlog}}\ \{}
\DoxyCodeLine{00017\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacespdlog_1_1sinks}{sinks}}\ \{}
\DoxyCodeLine{00018\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ConsoleMutex>}
\DoxyCodeLine{00019\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_ad400c046bf018fef46af88109472bf7b}{wincolor\_sink<ConsoleMutex>::wincolor\_sink}}(\textcolor{keywordtype}{void}\ *out\_handle,\ \mbox{\hyperlink{namespacespdlog_ab7d59ff9d834b3a3f0e553bfc302edc0}{color\_mode}}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a1e71d9c196e4683cc06c4b54d53f7ef5}{mode}})}
\DoxyCodeLine{00020\ \ \ \ \ :\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a446c7437b6012d1fc77b25e0c129a116}{out\_handle\_}}(out\_handle),}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a629a4ad9f5d05d23b6b560634891eeee}{mutex\_}}(ConsoleMutex::mutex()),}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a758767c5ca0aaf9b7de3b29aceabfd89}{formatter\_}}(\mbox{\hyperlink{namespacespdlog_1_1details}{details}}::make\_unique<\mbox{\hyperlink{namespacespdlog}{spdlog}}::\mbox{\hyperlink{classspdlog_1_1pattern__formatter}{pattern\_formatter}}>())\ \{}
\DoxyCodeLine{00023\ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a677567a40e732b832cfbe123df0cf560}{set\_color\_mode\_impl}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a1e71d9c196e4683cc06c4b54d53f7ef5}{mode}});}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{comment}{//\ set\ level\ colors}}
\DoxyCodeLine{00025\ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a1820334cd1c99839f909a7bb607ba380}{colors\_}}[level::trace]\ =\ FOREGROUND\_RED\ |\ FOREGROUND\_GREEN\ |\ FOREGROUND\_BLUE;\ \ \textcolor{comment}{//\ white}}
\DoxyCodeLine{00026\ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a1820334cd1c99839f909a7bb607ba380}{colors\_}}[level::debug]\ =\ FOREGROUND\_GREEN\ |\ FOREGROUND\_BLUE;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ cyan}}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a1820334cd1c99839f909a7bb607ba380}{colors\_}}[level::info]\ =\ FOREGROUND\_GREEN;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ green}}
\DoxyCodeLine{00028\ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a1820334cd1c99839f909a7bb607ba380}{colors\_}}[level::warn]\ =}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ FOREGROUND\_RED\ |\ FOREGROUND\_GREEN\ |\ FOREGROUND\_INTENSITY;\ \ \textcolor{comment}{//\ intense\ yellow}}
\DoxyCodeLine{00030\ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a1820334cd1c99839f909a7bb607ba380}{colors\_}}[level::err]\ =\ FOREGROUND\_RED\ |\ FOREGROUND\_INTENSITY;\ \ \ \textcolor{comment}{//\ intense\ red}}
\DoxyCodeLine{00031\ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a1820334cd1c99839f909a7bb607ba380}{colors\_}}[level::critical]\ =\ BACKGROUND\_RED\ |\ FOREGROUND\_RED\ |\ FOREGROUND\_GREEN\ |}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FOREGROUND\_BLUE\ |}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FOREGROUND\_INTENSITY;\ \ \textcolor{comment}{//\ intense\ white\ on\ red\ background}}
\DoxyCodeLine{00034\ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a1820334cd1c99839f909a7bb607ba380}{colors\_}}[level::off]\ =\ 0;}
\DoxyCodeLine{00035\ \}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ConsoleMutex>}
\DoxyCodeLine{00038\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_aa9a0326259c5c8dd5d302e935ed43751}{wincolor\_sink<ConsoleMutex>::\string~wincolor\_sink}}()\ \{}
\DoxyCodeLine{00039\ \ \ \ \ this-\/>\mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a16f1678905d7ae423b7f49d99de06dfa}{flush}}();}
\DoxyCodeLine{00040\ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{comment}{//\ change\ the\ color\ for\ the\ given\ level}}
\DoxyCodeLine{00043\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ConsoleMutex>}
\DoxyCodeLine{00044\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_ae60504680bd2e37a9d08ac670c7b21ed}{wincolor\_sink<ConsoleMutex>::set\_color}}(level::level\_enum\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1sink_a8b9693e7ea883ce02234bed0e3b3348d}{level}},}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::uint16\_t\ \mbox{\hyperlink{spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203c}{color}})\ \{}
\DoxyCodeLine{00046\ \ \ \ \ std::lock\_guard<mutex\_t>\ lock(\mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a629a4ad9f5d05d23b6b560634891eeee}{mutex\_}});}
\DoxyCodeLine{00047\ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a1820334cd1c99839f909a7bb607ba380}{colors\_}}[\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(\mbox{\hyperlink{classspdlog_1_1sinks_1_1sink_a8b9693e7ea883ce02234bed0e3b3348d}{level}})]\ =\ \mbox{\hyperlink{spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203c}{color}};}
\DoxyCodeLine{00048\ \}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ConsoleMutex>}
\DoxyCodeLine{00051\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a3f19ee0cb993cf531d7c4edb12ef6e4c}{wincolor\_sink<ConsoleMutex>::log}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structspdlog_1_1details_1_1log__msg}{details::log\_msg}}\ \&msg)\ \{}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a446c7437b6012d1fc77b25e0c129a116}{out\_handle\_}}\ ==\ \textcolor{keyword}{nullptr}\ ||\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a446c7437b6012d1fc77b25e0c129a116}{out\_handle\_}}\ ==\ INVALID\_HANDLE\_VALUE)\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00054\ \ \ \ \ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ std::lock\_guard<mutex\_t>\ lock(\mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a629a4ad9f5d05d23b6b560634891eeee}{mutex\_}});}
\DoxyCodeLine{00057\ \ \ \ \ msg.\mbox{\hyperlink{structspdlog_1_1details_1_1log__msg_a87cb1c5f1ecd7415412722123e35d491}{color\_range\_start}}\ =\ 0;}
\DoxyCodeLine{00058\ \ \ \ \ msg.\mbox{\hyperlink{structspdlog_1_1details_1_1log__msg_a0dfc2763f8e6b73ca34e4cb7c5a9950a}{color\_range\_end}}\ =\ 0;}
\DoxyCodeLine{00059\ \ \ \ \ \mbox{\hyperlink{namespacespdlog_a9ae6875ab28ec95e33921c45ae451633}{memory\_buf\_t}}\ formatted;}
\DoxyCodeLine{00060\ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a758767c5ca0aaf9b7de3b29aceabfd89}{formatter\_}}-\/>format(msg,\ formatted);}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a0cc52ce74e7c4d84867252697fe8ecf1}{should\_do\_colors\_}}\ \&\&\ msg.\mbox{\hyperlink{structspdlog_1_1details_1_1log__msg_a0dfc2763f8e6b73ca34e4cb7c5a9950a}{color\_range\_end}}\ >\ msg.\mbox{\hyperlink{structspdlog_1_1details_1_1log__msg_a87cb1c5f1ecd7415412722123e35d491}{color\_range\_start}})\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ before\ color\ range}}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a83f157973bbc72592e58d7cc02485944}{print\_range\_}}(formatted,\ 0,\ msg.\mbox{\hyperlink{structspdlog_1_1details_1_1log__msg_a87cb1c5f1ecd7415412722123e35d491}{color\_range\_start}});}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ in\ color\ range}}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ orig\_attribs\ =}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}WORD\textcolor{keyword}{>}(\mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_abafb58a232230b81f7b68cae6d530b4d}{set\_foreground\_color\_}}(\mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a1820334cd1c99839f909a7bb607ba380}{colors\_}}[\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(msg.\mbox{\hyperlink{structspdlog_1_1details_1_1log__msg_a4142f4d66140a1ea24053311ebea5706}{level}})]));}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a83f157973bbc72592e58d7cc02485944}{print\_range\_}}(formatted,\ msg.\mbox{\hyperlink{structspdlog_1_1details_1_1log__msg_a87cb1c5f1ecd7415412722123e35d491}{color\_range\_start}},\ msg.\mbox{\hyperlink{structspdlog_1_1details_1_1log__msg_a0dfc2763f8e6b73ca34e4cb7c5a9950a}{color\_range\_end}});}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ reset\ to\ orig\ colors}}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ ::SetConsoleTextAttribute(\textcolor{keyword}{static\_cast<}HANDLE\textcolor{keyword}{>}(\mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a446c7437b6012d1fc77b25e0c129a116}{out\_handle\_}}),\ orig\_attribs);}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a83f157973bbc72592e58d7cc02485944}{print\_range\_}}(formatted,\ msg.\mbox{\hyperlink{structspdlog_1_1details_1_1log__msg_a0dfc2763f8e6b73ca34e4cb7c5a9950a}{color\_range\_end}},\ formatted.size());}
\DoxyCodeLine{00071\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \ \textcolor{comment}{//\ print\ without\ colors\ if\ color\ range\ is\ invalid\ (or\ color\ is\ disabled)}}
\DoxyCodeLine{00072\ \ \ \ \ \{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ write\_to\_file\_(formatted);}
\DoxyCodeLine{00074\ \ \ \ \ \}}
\DoxyCodeLine{00075\ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ConsoleMutex>}
\DoxyCodeLine{00078\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a16f1678905d7ae423b7f49d99de06dfa}{wincolor\_sink<ConsoleMutex>::flush}}()\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{comment}{//\ windows\ console\ always\ flushed?}}
\DoxyCodeLine{00080\ \}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ConsoleMutex>}
\DoxyCodeLine{00083\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_abc09d98503b36214276e88dd70677a10}{wincolor\_sink<ConsoleMutex>::set\_pattern}}(\textcolor{keyword}{const}\ std::string\ \&pattern)\ \{}
\DoxyCodeLine{00084\ \ \ \ \ std::lock\_guard<mutex\_t>\ lock(\mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a629a4ad9f5d05d23b6b560634891eeee}{mutex\_}});}
\DoxyCodeLine{00085\ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a758767c5ca0aaf9b7de3b29aceabfd89}{formatter\_}}\ =\ std::unique\_ptr<spdlog::formatter>(\textcolor{keyword}{new}\ \mbox{\hyperlink{classspdlog_1_1pattern__formatter}{pattern\_formatter}}(pattern));}
\DoxyCodeLine{00086\ \}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ConsoleMutex>}
\DoxyCodeLine{00089\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}}
\DoxyCodeLine{00090\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a8f4c177e11a5a4f8d18432b75737c79e}{wincolor\_sink<ConsoleMutex>::set\_formatter}}(std::unique\_ptr<spdlog::formatter>\ sink\_formatter)\ \{}
\DoxyCodeLine{00091\ \ \ \ \ std::lock\_guard<mutex\_t>\ lock(\mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a629a4ad9f5d05d23b6b560634891eeee}{mutex\_}});}
\DoxyCodeLine{00092\ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a758767c5ca0aaf9b7de3b29aceabfd89}{formatter\_}}\ =\ std::move(sink\_formatter);}
\DoxyCodeLine{00093\ \}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ConsoleMutex>}
\DoxyCodeLine{00096\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_aca6e9e0251b747eabe4ee859cb7306b0}{wincolor\_sink<ConsoleMutex>::set\_color\_mode}}(\mbox{\hyperlink{namespacespdlog_ab7d59ff9d834b3a3f0e553bfc302edc0}{color\_mode}}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a1e71d9c196e4683cc06c4b54d53f7ef5}{mode}})\ \{}
\DoxyCodeLine{00097\ \ \ \ \ std::lock\_guard<mutex\_t>\ lock(\mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a629a4ad9f5d05d23b6b560634891eeee}{mutex\_}});}
\DoxyCodeLine{00098\ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a677567a40e732b832cfbe123df0cf560}{set\_color\_mode\_impl}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a1e71d9c196e4683cc06c4b54d53f7ef5}{mode}});}
\DoxyCodeLine{00099\ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ConsoleMutex>}
\DoxyCodeLine{00102\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a677567a40e732b832cfbe123df0cf560}{wincolor\_sink<ConsoleMutex>::set\_color\_mode\_impl}}(\mbox{\hyperlink{namespacespdlog_ab7d59ff9d834b3a3f0e553bfc302edc0}{color\_mode}}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a1e71d9c196e4683cc06c4b54d53f7ef5}{mode}})\ \{}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a1e71d9c196e4683cc06c4b54d53f7ef5}{mode}}\ ==\ \mbox{\hyperlink{namespacespdlog_ab7d59ff9d834b3a3f0e553bfc302edc0a2bd9c0ed00116be1258e0cc66617d7c8}{color\_mode::automatic}})\ \{}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ should\ do\ colors\ only\ if\ out\_handle\_\ \ points\ to\ actual\ console.}}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ DWORD\ console\_mode;}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ in\_console\ =\ ::GetConsoleMode(\textcolor{keyword}{static\_cast<}HANDLE\textcolor{keyword}{>}(\mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a446c7437b6012d1fc77b25e0c129a116}{out\_handle\_}}),\ \&console\_mode)\ !=\ 0;}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a0cc52ce74e7c4d84867252697fe8ecf1}{should\_do\_colors\_}}\ =\ in\_console;}
\DoxyCodeLine{00108\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a0cc52ce74e7c4d84867252697fe8ecf1}{should\_do\_colors\_}}\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a1e71d9c196e4683cc06c4b54d53f7ef5}{mode}}\ ==\ \mbox{\hyperlink{namespacespdlog_ab7d59ff9d834b3a3f0e553bfc302edc0af9f90eeaf400d228facde6bc48da5cfb}{color\_mode::always}}\ ?\ true\ :\ \textcolor{keyword}{false};}
\DoxyCodeLine{00110\ \ \ \ \ \}}
\DoxyCodeLine{00111\ \}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \textcolor{comment}{//\ set\ foreground\ color\ and\ return\ the\ orig\ console\ attributes\ (for\ resetting\ later)}}
\DoxyCodeLine{00114\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ConsoleMutex>}
\DoxyCodeLine{00115\ std::uint16\_t\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}}
\DoxyCodeLine{00116\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_abafb58a232230b81f7b68cae6d530b4d}{wincolor\_sink<ConsoleMutex>::set\_foreground\_color\_}}(std::uint16\_t\ attribs)\ \{}
\DoxyCodeLine{00117\ \ \ \ \ CONSOLE\_SCREEN\_BUFFER\_INFO\ orig\_buffer\_info;}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordflow}{if}\ (!::GetConsoleScreenBufferInfo(\textcolor{keyword}{static\_cast<}HANDLE\textcolor{keyword}{>}(\mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a446c7437b6012d1fc77b25e0c129a116}{out\_handle\_}}),\ \&orig\_buffer\_info))\ \{}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ just\ return\ white\ if\ failed\ getting\ console\ info}}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ FOREGROUND\_RED\ |\ FOREGROUND\_GREEN\ |\ FOREGROUND\_BLUE;}
\DoxyCodeLine{00121\ \ \ \ \ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{comment}{//\ change\ only\ the\ foreground\ bits\ (lowest\ 4\ bits)}}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keyword}{auto}\ new\_attribs\ =\ \textcolor{keyword}{static\_cast<}WORD\textcolor{keyword}{>}(attribs)\ |\ (orig\_buffer\_info.wAttributes\ \&\ 0xfff0);}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keyword}{auto}\ ignored\ =}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ ::SetConsoleTextAttribute(\textcolor{keyword}{static\_cast<}HANDLE\textcolor{keyword}{>}(\mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a446c7437b6012d1fc77b25e0c129a116}{out\_handle\_}}),\ \textcolor{keyword}{static\_cast<}WORD\textcolor{keyword}{>}(new\_attribs));}
\DoxyCodeLine{00127\ \ \ \ \ (\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}})(ignored);}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}std::uint16\_t\textcolor{keyword}{>}(orig\_buffer\_info.wAttributes);\ \ \textcolor{comment}{//\ return\ orig\ attribs}}
\DoxyCodeLine{00129\ \}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \textcolor{comment}{//\ print\ a\ range\ of\ formatted\ message\ to\ console}}
\DoxyCodeLine{00132\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ConsoleMutex>}
\DoxyCodeLine{00133\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a83f157973bbc72592e58d7cc02485944}{wincolor\_sink<ConsoleMutex>::print\_range\_}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{namespacespdlog_a9ae6875ab28ec95e33921c45ae451633}{memory\_buf\_t}}\ \&formatted,}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ start,}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ end)\ \{}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordflow}{if}\ (end\ >\ start)\ \{}
\DoxyCodeLine{00137\ \textcolor{preprocessor}{\#if\ defined(SPDLOG\_UTF8\_TO\_WCHAR\_CONSOLE)}}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ wmemory\_buf\_t\ wformatted;}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ details::os::utf8\_to\_wstrbuf(\mbox{\hyperlink{namespacespdlog_a26388f91e439f69a068bc6774caed2b1}{string\_view\_t}}(formatted.data()\ +\ start,\ end\ -\/\ start),}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ wformatted);}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ =\ \textcolor{keyword}{static\_cast<}DWORD\textcolor{keyword}{>}(wformatted.size());}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ ignored\ =\ ::WriteConsoleW(\textcolor{keyword}{static\_cast<}HANDLE\textcolor{keyword}{>}(\mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a446c7437b6012d1fc77b25e0c129a116}{out\_handle\_}}),\ wformatted.data(),\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00144\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ =\ \textcolor{keyword}{static\_cast<}DWORD\textcolor{keyword}{>}(end\ -\/\ start);}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ ignored\ =\ ::WriteConsoleA(\textcolor{keyword}{static\_cast<}HANDLE\textcolor{keyword}{>}(\mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a446c7437b6012d1fc77b25e0c129a116}{out\_handle\_}}),\ formatted.data()\ +\ start,}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00148\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}})(ignored);}
\DoxyCodeLine{00150\ \ \ \ \ \}}
\DoxyCodeLine{00151\ \}}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ConsoleMutex>}
\DoxyCodeLine{00154\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a5cf97fd57b3863ba2a288d357ec0e579}{wincolor\_sink<ConsoleMutex>::write\_to\_file\_}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{namespacespdlog_a9ae6875ab28ec95e33921c45ae451633}{memory\_buf\_t}}\ \&formatted)\ \{}
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ =\ \textcolor{keyword}{static\_cast<}DWORD\textcolor{keyword}{>}(formatted.size());}
\DoxyCodeLine{00156\ \ \ \ \ DWORD\ bytes\_written\ =\ 0;}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keyword}{auto}\ ignored\ =\ ::WriteFile(\textcolor{keyword}{static\_cast<}HANDLE\textcolor{keyword}{>}(\mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_a446c7437b6012d1fc77b25e0c129a116}{out\_handle\_}}),\ formatted.data(),\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&bytes\_written,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00159\ \ \ \ \ (\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}})(ignored);}
\DoxyCodeLine{00160\ \}}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \textcolor{comment}{//\ wincolor\_stdout\_sink}}
\DoxyCodeLine{00163\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ConsoleMutex>}
\DoxyCodeLine{00164\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__stdout__sink_a76ef0089437f3073f37ce95e3c9ff044}{wincolor\_stdout\_sink<ConsoleMutex>::wincolor\_stdout\_sink}}(\mbox{\hyperlink{namespacespdlog_ab7d59ff9d834b3a3f0e553bfc302edc0}{color\_mode}}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a1e71d9c196e4683cc06c4b54d53f7ef5}{mode}})}
\DoxyCodeLine{00165\ \ \ \ \ :\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_ad400c046bf018fef46af88109472bf7b}{wincolor\_sink}}<ConsoleMutex>(::GetStdHandle(STD\_OUTPUT\_HANDLE),\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a1e71d9c196e4683cc06c4b54d53f7ef5}{mode}})\ \{\}}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \textcolor{comment}{//\ wincolor\_stderr\_sink}}
\DoxyCodeLine{00168\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ConsoleMutex>}
\DoxyCodeLine{00169\ \mbox{\hyperlink{common_8h_a81ecc4703fe6ce0f7820fc3652ee2b21}{SPDLOG\_INLINE}}\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__stderr__sink_a38e38fa6194a04a82843ec5132adb026}{wincolor\_stderr\_sink<ConsoleMutex>::wincolor\_stderr\_sink}}(\mbox{\hyperlink{namespacespdlog_ab7d59ff9d834b3a3f0e553bfc302edc0}{color\_mode}}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a1e71d9c196e4683cc06c4b54d53f7ef5}{mode}})}
\DoxyCodeLine{00170\ \ \ \ \ :\ \mbox{\hyperlink{classspdlog_1_1sinks_1_1wincolor__sink_ad400c046bf018fef46af88109472bf7b}{wincolor\_sink}}<ConsoleMutex>(::GetStdHandle(STD\_ERROR\_HANDLE),\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a1e71d9c196e4683cc06c4b54d53f7ef5}{mode}})\ \{\}}
\DoxyCodeLine{00171\ \}\ \ \textcolor{comment}{//\ namespace\ sinks}}
\DoxyCodeLine{00172\ \}\ \ \textcolor{comment}{//\ namespace\ spdlog}}

\end{DoxyCode}
