\doxysection{ff\+::FFAllocator类 参考}
\hypertarget{classff_1_1_f_f_allocator}{}\label{classff_1_1_f_f_allocator}\index{ff::FFAllocator@{ff::FFAllocator}}


\doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} user-\/space parallel allocator (process-\/wide)  




{\ttfamily \#include $<$allocator.\+hpp$>$}

\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classff_1_1_f_f_allocator_a14063768984177b43e47950e1e67be32}{FFAllocator}} (\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{classff_1_1_f_f_allocator_a95cfdf153883ae42a8f318c60f0abb9f}{delayed\+Reclaim}}=0)
\begin{DoxyCompactList}\small\item\em Constructor \end{DoxyCompactList}\item 
\mbox{\hyperlink{classff_1_1_f_f_allocator_ab05d8dc09da9cde929a60137ff869207}{\texorpdfstring{$\sim$}{\string~}\+FFAllocator}} ()
\begin{DoxyCompactList}\small\item\em Destructor \end{DoxyCompactList}\item 
\mbox{\hyperlink{classff_1_1ffa__wrapper}{ffa\+\_\+wrapper}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classff_1_1_f_f_allocator_a93138a8a73364e7e9f7a37a4895c1690}{new\+Allocator}} (size\+\_\+t max\+\_\+size=0, \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \+\_\+nslabs\mbox{[}\mbox{\hyperlink{namespaceff_ac70617c84eb066a57e5d904bf5c3e62da9b057b825c2a8d1ab94ef55519344dd1}{N\+\_\+\+SLABBUFFER}}\mbox{]}=0, \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} prealloc=\mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}})
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classff_1_1_f_f_allocator_a084d6b571f1efda50fec501844104f5f}{delete\+Allocator}} (\mbox{\hyperlink{classff_1_1ffa__wrapper}{ffa\+\_\+wrapper}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}, \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} reclaim\+Memory=\mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}})
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classff_1_1_f_f_allocator_afc84ba77a7deeb78c970589dd8c065bc}{delete\+Allocator}} ()
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classff_1_1_f_f_allocator_a31d2c6453ebb112ae523eb8da155707f}{malloc}} (size\+\_\+t \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}})
\begin{DoxyCompactList}\small\item\em malloc \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{classff_1_1_f_f_allocator_ac9f4185b78a1516480aa89de8847a640}{posix\+\_\+memalign}} (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}memptr, size\+\_\+t alignment, size\+\_\+t \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}})
\begin{DoxyCompactList}\small\item\em ff posix\+\_\+memalign \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classff_1_1_f_f_allocator_af8a3d0229a337ec1eb1300a6d188f9cf}{free}} (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}})
\begin{DoxyCompactList}\small\item\em free \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classff_1_1_f_f_allocator_a65f9c023e525f7b529c4250adf3b1feb}{realloc}} (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}, size\+\_\+t newsize)
\begin{DoxyCompactList}\small\item\em realloc. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classff_1_1_f_f_allocator_a81f85ed9c4f8cec1d6d00a9dcc2177c7}{growsup}} (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}, size\+\_\+t newsize)
\end{DoxyCompactItemize}
\doxysubsubsection*{静态 Public 成员函数}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{classff_1_1_f_f_allocator}{FFAllocator}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classff_1_1_f_f_allocator_adeb8f18b5ea955ec7c3941d8e38c2fcc}{instance}} ()
\begin{DoxyCompactList}\small\item\em Returns an instance of the \doxylink{classff_1_1_f_f_allocator}{FFAllocator} object \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public 属性}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{allocator_8hpp_a2fbd97af3a198200b674b6658fb90a50}{ALLSTATS}}(\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} printstats(std\+::ostream \&out) \{ all\+\_\+stats\+::instance() -\/$>$\mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h_a59025bfaf390e425b4e274c966a77557}{print}}(out);\}) \mbox{\hyperlink{rml__server_8cpp_a6a1d6e1a12975a4e9a0b5b952e79eaad}{private}} size\+\_\+ \mbox{\hyperlink{classff_1_1_f_f_allocator_af3352177bcdbfca3186186c76618d88c}{A\+\_\+capacity}} )
\item 
size\+\_\+t \mbox{\hyperlink{classff_1_1_f_f_allocator_a322c667c6bb7330dbc3d0ba16b2599e2}{A\+\_\+size}}
\item 
lock\+\_\+t \mbox{\hyperlink{classff_1_1_f_f_allocator_a120393744e98f0ed5fe086a25521ca00}{lock}}
\item 
\mbox{\hyperlink{pthread__minport__windows_8h_abd9df76622c288b7b7a8a80365b6ddd7}{pthread\+\_\+key\+\_\+t}} \mbox{\hyperlink{classff_1_1_f_f_allocator_a2aa4953ca4f4e4eb53acd60ce8e57303}{A\+\_\+key}}
\item 
const \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{classff_1_1_f_f_allocator_a95cfdf153883ae42a8f318c60f0abb9f}{delayed\+Reclaim}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structff_1_1_seg__ctl}{Seg\+\_\+ctl}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classff_1_1_f_f_allocator_a5c331370c04418cec3e151782994ac2b}{getsegctl}} (\mbox{\hyperlink{structff_1_1_buf__ctl}{Buf\+\_\+ctl}} \texorpdfstring{$\ast$}{*}buf)
\item 
\mbox{\hyperlink{structff_1_1_f_f_ax_thread_data}{FFAx\+Thread\+Data}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classff_1_1_f_f_allocator_aafb4c080d57ae46f3dd48b3179199e6d}{new\+Allocator}} (\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} prealloc, \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \+\_\+nslabs\mbox{[}\mbox{\hyperlink{namespaceff_ac70617c84eb066a57e5d904bf5c3e62da9b057b825c2a8d1ab94ef55519344dd1}{N\+\_\+\+SLABBUFFER}}\mbox{]}, size\+\_\+t max\+\_\+size)
\end{DoxyCompactItemize}
\doxysubsubsection*{Private 类型}
\begin{DoxyCompactItemize}
\item 
enum \{ \mbox{\hyperlink{classff_1_1_f_f_allocator_a0e3ffbd131af74ab8a3224f544d4d3a9a0993f5e33c11436242969578b2852631}{MIN\+\_\+\+A\+\_\+\+CAPACITY}} =32
 \}
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
\doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} user-\/space parallel allocator (process-\/wide) 

Based on the {\ttfamily \doxylink{classff_1_1ff__allocator}{ff\+\_\+allocator}}, the \doxylink{classff_1_1_f_f_allocator}{FFAllocator} might be used by any number of ff\+:ff\+\_\+node (i.\+e. threads) to dynamically allocate/deallocate memory. It consists on a network of {\ttfamily \doxylink{classff_1_1ff__allocator}{ff\+\_\+allocator}} per \doxylink{classff_1_1ff__node}{ff\+\_\+node}. It uses \doxylink{classff_1_1u_s_w_s_r___ptr___buffer}{ff\+::u\+SWSR\+\_\+\+Ptr\+\_\+\+Buffer} to avoid deadlocks.

\doxylink{classff_1_1_f_f_allocator}{FFAllocator} will be created as a static object on the first call to \doxylink{classff_1_1_f_f_allocator_adeb8f18b5ea955ec7c3941d8e38c2fcc}{FFAllocator\+::instance()}

Usage example\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ INIT()\ }\textcolor{comment}{//\ no\ init\ needed}}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ MALLOC(size)\ \ \ (FFAllocator::instance()-\/>malloc(size))}}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ FREE(ptr,unused)\ (FFAllocator::instance()-\/>free(ptr))}}

\end{DoxyCode}
 

\doxysubsection{成员枚举类型说明}
\Hypertarget{classff_1_1_f_f_allocator_a0e3ffbd131af74ab8a3224f544d4d3a9}\doxysubsubsection{\texorpdfstring{anonymous enum}{anonymous enum}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_a0e3ffbd131af74ab8a3224f544d4d3a9} 
anonymous enum\hspace{0.3cm}{\ttfamily [private]}}

\begin{DoxyEnumFields}[2]{枚举值}
\raisebox{\heightof{T}}[0pt][0pt]{\index{MIN\_A\_CAPACITY@{MIN\_A\_CAPACITY}!ff::FFAllocator@{ff::FFAllocator}}\index{ff::FFAllocator@{ff::FFAllocator}!MIN\_A\_CAPACITY@{MIN\_A\_CAPACITY}}}\Hypertarget{classff_1_1_f_f_allocator_a0e3ffbd131af74ab8a3224f544d4d3a9a0993f5e33c11436242969578b2852631}\label{classff_1_1_f_f_allocator_a0e3ffbd131af74ab8a3224f544d4d3a9a0993f5e33c11436242969578b2852631} 
MIN\+\_\+\+A\+\_\+\+CAPACITY&\\
\hline

\end{DoxyEnumFields}


\doxysubsection{构造及析构函数说明}
\Hypertarget{classff_1_1_f_f_allocator_a14063768984177b43e47950e1e67be32}\index{ff::FFAllocator@{ff::FFAllocator}!FFAllocator@{FFAllocator}}
\index{FFAllocator@{FFAllocator}!ff::FFAllocator@{ff::FFAllocator}}
\doxysubsubsection{\texorpdfstring{FFAllocator()}{FFAllocator()}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_a14063768984177b43e47950e1e67be32} 
ff\+::\+FFAllocator\+::\+FFAllocator (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{delayed\+Reclaim}{ = {\ttfamily 0}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Constructor 


\begin{DoxyParams}{参数}
{\em delayed\+Reclaim} & Deferred reclamation configuration \\
\hline
\end{DoxyParams}
函数调用图\+:
% FIG 0
\Hypertarget{classff_1_1_f_f_allocator_ab05d8dc09da9cde929a60137ff869207}\index{ff::FFAllocator@{ff::FFAllocator}!````~FFAllocator@{\texorpdfstring{$\sim$}{\string~}FFAllocator}}
\index{````~FFAllocator@{\texorpdfstring{$\sim$}{\string~}FFAllocator}!ff::FFAllocator@{ff::FFAllocator}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}FFAllocator()}{\string~FFAllocator()}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_ab05d8dc09da9cde929a60137ff869207} 
ff\+::\+FFAllocator\+::\texorpdfstring{$\sim$}{\string~}\+FFAllocator (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Destructor 

Delete the allocator and return pre-\/allocated memory to the OS 函数调用图\+:
% FIG 1


\doxysubsection{成员函数说明}
\Hypertarget{classff_1_1_f_f_allocator_afc84ba77a7deeb78c970589dd8c065bc}\index{ff::FFAllocator@{ff::FFAllocator}!deleteAllocator@{deleteAllocator}}
\index{deleteAllocator@{deleteAllocator}!ff::FFAllocator@{ff::FFAllocator}}
\doxysubsubsection{\texorpdfstring{deleteAllocator()}{deleteAllocator()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_afc84ba77a7deeb78c970589dd8c065bc} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} ff\+::\+FFAllocator\+::delete\+Allocator (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

函数调用图\+:
% FIG 2
\Hypertarget{classff_1_1_f_f_allocator_a084d6b571f1efda50fec501844104f5f}\index{ff::FFAllocator@{ff::FFAllocator}!deleteAllocator@{deleteAllocator}}
\index{deleteAllocator@{deleteAllocator}!ff::FFAllocator@{ff::FFAllocator}}
\doxysubsubsection{\texorpdfstring{deleteAllocator()}{deleteAllocator()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_a084d6b571f1efda50fec501844104f5f} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} ff\+::\+FFAllocator\+::delete\+Allocator (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classff_1_1ffa__wrapper}{ffa\+\_\+wrapper}} \texorpdfstring{$\ast$}{*}}]{f}{, }\item[{\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}}]{reclaim\+Memory}{ = {\ttfamily \mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}}}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

函数调用图\+:
% FIG 3
\Hypertarget{classff_1_1_f_f_allocator_af8a3d0229a337ec1eb1300a6d188f9cf}\index{ff::FFAllocator@{ff::FFAllocator}!free@{free}}
\index{free@{free}!ff::FFAllocator@{ff::FFAllocator}}
\doxysubsubsection{\texorpdfstring{free()}{free()}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_af8a3d0229a337ec1eb1300a6d188f9cf} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} ff\+::\+FFAllocator\+::free (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}}]{ptr}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



free 

free the requested memory chunk


\begin{DoxyParams}{参数}
{\em ptr} & a pointer to the buffer. \\
\hline
\end{DoxyParams}
函数调用图\+:
% FIG 4
\Hypertarget{classff_1_1_f_f_allocator_a5c331370c04418cec3e151782994ac2b}\index{ff::FFAllocator@{ff::FFAllocator}!getsegctl@{getsegctl}}
\index{getsegctl@{getsegctl}!ff::FFAllocator@{ff::FFAllocator}}
\doxysubsubsection{\texorpdfstring{getsegctl()}{getsegctl()}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_a5c331370c04418cec3e151782994ac2b} 
\mbox{\hyperlink{structff_1_1_seg__ctl}{Seg\+\_\+ctl}} \texorpdfstring{$\ast$}{*} ff\+::\+FFAllocator\+::getsegctl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structff_1_1_buf__ctl}{Buf\+\_\+ctl}} \texorpdfstring{$\ast$}{*}}]{buf}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}

\Hypertarget{classff_1_1_f_f_allocator_a81f85ed9c4f8cec1d6d00a9dcc2177c7}\index{ff::FFAllocator@{ff::FFAllocator}!growsup@{growsup}}
\index{growsup@{growsup}!ff::FFAllocator@{ff::FFAllocator}}
\doxysubsubsection{\texorpdfstring{growsup()}{growsup()}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_a81f85ed9c4f8cec1d6d00a9dcc2177c7} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*} ff\+::\+FFAllocator\+::growsup (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}}]{ptr}{, }\item[{size\+\_\+t}]{newsize}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

函数调用图\+:
% FIG 5
\Hypertarget{classff_1_1_f_f_allocator_adeb8f18b5ea955ec7c3941d8e38c2fcc}\index{ff::FFAllocator@{ff::FFAllocator}!instance@{instance}}
\index{instance@{instance}!ff::FFAllocator@{ff::FFAllocator}}
\doxysubsubsection{\texorpdfstring{instance()}{instance()}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_adeb8f18b5ea955ec7c3941d8e38c2fcc} 
static \mbox{\hyperlink{classff_1_1_f_f_allocator}{FFAllocator}} \texorpdfstring{$\ast$}{*} ff\+::\+FFAllocator\+::instance (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Returns an instance of the \doxylink{classff_1_1_f_f_allocator}{FFAllocator} object 

函数调用图\+:
% FIG 6
\Hypertarget{classff_1_1_f_f_allocator_a31d2c6453ebb112ae523eb8da155707f}\index{ff::FFAllocator@{ff::FFAllocator}!malloc@{malloc}}
\index{malloc@{malloc}!ff::FFAllocator@{ff::FFAllocator}}
\doxysubsubsection{\texorpdfstring{malloc()}{malloc()}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_a31d2c6453ebb112ae523eb8da155707f} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*} ff\+::\+FFAllocator\+::malloc (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{size}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



malloc 

Request to allocate {\ttfamily size} bytes. If the size is too large, use OS malloc to get a new chunk of memory. Otherwise use the \doxylink{classff_1_1ff__allocator}{ff\+\_\+allocator} on the calling \doxylink{classff_1_1ff__node}{ff\+\_\+node}


\begin{DoxyParams}{参数}
{\em size} & the size of memory requested \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
pointer to allocated memory chunk 
\end{DoxyReturn}
函数调用图\+:
% FIG 7
\Hypertarget{classff_1_1_f_f_allocator_aafb4c080d57ae46f3dd48b3179199e6d}\index{ff::FFAllocator@{ff::FFAllocator}!newAllocator@{newAllocator}}
\index{newAllocator@{newAllocator}!ff::FFAllocator@{ff::FFAllocator}}
\doxysubsubsection{\texorpdfstring{newAllocator()}{newAllocator()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_aafb4c080d57ae46f3dd48b3179199e6d} 
\mbox{\hyperlink{structff_1_1_f_f_ax_thread_data}{FFAx\+Thread\+Data}} \texorpdfstring{$\ast$}{*} ff\+::\+FFAllocator\+::new\+Allocator (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}}]{prealloc}{, }\item[{\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{\+\_\+nslabs}{\mbox{[}\+N\+\_\+\+SLABBUFFER\mbox{]}, }\item[{size\+\_\+t}]{max\+\_\+size}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}

函数调用图\+:
% FIG 8
\Hypertarget{classff_1_1_f_f_allocator_a93138a8a73364e7e9f7a37a4895c1690}\index{ff::FFAllocator@{ff::FFAllocator}!newAllocator@{newAllocator}}
\index{newAllocator@{newAllocator}!ff::FFAllocator@{ff::FFAllocator}}
\doxysubsubsection{\texorpdfstring{newAllocator()}{newAllocator()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_a93138a8a73364e7e9f7a37a4895c1690} 
\mbox{\hyperlink{classff_1_1ffa__wrapper}{ffa\+\_\+wrapper}} \texorpdfstring{$\ast$}{*} ff\+::\+FFAllocator\+::new\+Allocator (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{max\+\_\+size}{ = {\ttfamily 0}, }\item[{\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{\+\_\+nslabs}{\mbox{[}\+N\+\_\+\+SLABBUFFER\mbox{]} = {\ttfamily 0}, }\item[{\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}}]{prealloc}{ = {\ttfamily \mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}}}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

函数调用图\+:
% FIG 9
\Hypertarget{classff_1_1_f_f_allocator_ac9f4185b78a1516480aa89de8847a640}\index{ff::FFAllocator@{ff::FFAllocator}!posix\_memalign@{posix\_memalign}}
\index{posix\_memalign@{posix\_memalign}!ff::FFAllocator@{ff::FFAllocator}}
\doxysubsubsection{\texorpdfstring{posix\_memalign()}{posix\_memalign()}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_ac9f4185b78a1516480aa89de8847a640} 
\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} ff\+::\+FFAllocator\+::posix\+\_\+memalign (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{memptr}{, }\item[{size\+\_\+t}]{alignment}{, }\item[{size\+\_\+t}]{size}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



ff posix\+\_\+memalign 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ out}}  & {\em \texorpdfstring{$\ast$}{*}memptr} & pointer to a chunk of memory where the aligned memory will be returned \\
\hline
 & {\em alignment} & allocation\textquotesingle{}s base address is an exact multiple of {\ttfamily alignment}, which must be a power of 2 at least as large as sizeof(void \texorpdfstring{$\ast$}{*}) \\
\hline
 & {\em size} & the size of memory requested. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
0 if successful; otherwise it returns an error value. 
\end{DoxyReturn}
函数调用图\+:
% FIG 10
\Hypertarget{classff_1_1_f_f_allocator_a65f9c023e525f7b529c4250adf3b1feb}\index{ff::FFAllocator@{ff::FFAllocator}!realloc@{realloc}}
\index{realloc@{realloc}!ff::FFAllocator@{ff::FFAllocator}}
\doxysubsubsection{\texorpdfstring{realloc()}{realloc()}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_a65f9c023e525f7b529c4250adf3b1feb} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*} ff\+::\+FFAllocator\+::realloc (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}}]{ptr}{, }\item[{size\+\_\+t}]{newsize}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



realloc. 

It changes the size of the memory block pointed to by {\ttfamily ptr} to {\ttfamily newsize} bytes.


\begin{DoxyParams}{参数}
{\em ptr} & pointer to the buffer \\
\hline
{\em newsize} & the new size. \\
\hline
\end{DoxyParams}
函数调用图\+:
% FIG 11


\doxysubsection{类成员变量说明}
\Hypertarget{classff_1_1_f_f_allocator_af3352177bcdbfca3186186c76618d88c}\index{ff::FFAllocator@{ff::FFAllocator}!A\_capacity@{A\_capacity}}
\index{A\_capacity@{A\_capacity}!ff::FFAllocator@{ff::FFAllocator}}
\doxysubsubsection{\texorpdfstring{A\_capacity}{A\_capacity}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_af3352177bcdbfca3186186c76618d88c} 
\mbox{\hyperlink{allocator_8hpp_a2fbd97af3a198200b674b6658fb90a50}{ALLSTATS}} (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} printstats(std\+::ostream \& out) \{ all\+\_\+stats\+::instance()-\/$>$\mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2base_8h_a59025bfaf390e425b4e274c966a77557}{print}}(out); \}) \mbox{\hyperlink{rml__server_8cpp_a6a1d6e1a12975a4e9a0b5b952e79eaad}{private}} size\+\_\+ ff\+::\+FFAllocator\+::\+A\+\_\+capacity) }

\Hypertarget{classff_1_1_f_f_allocator_a2aa4953ca4f4e4eb53acd60ce8e57303}\index{ff::FFAllocator@{ff::FFAllocator}!A\_key@{A\_key}}
\index{A\_key@{A\_key}!ff::FFAllocator@{ff::FFAllocator}}
\doxysubsubsection{\texorpdfstring{A\_key}{A\_key}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_a2aa4953ca4f4e4eb53acd60ce8e57303} 
\mbox{\hyperlink{pthread__minport__windows_8h_abd9df76622c288b7b7a8a80365b6ddd7}{pthread\+\_\+key\+\_\+t}} ff\+::\+FFAllocator\+::\+A\+\_\+key}

\Hypertarget{classff_1_1_f_f_allocator_a322c667c6bb7330dbc3d0ba16b2599e2}\index{ff::FFAllocator@{ff::FFAllocator}!A\_size@{A\_size}}
\index{A\_size@{A\_size}!ff::FFAllocator@{ff::FFAllocator}}
\doxysubsubsection{\texorpdfstring{A\_size}{A\_size}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_a322c667c6bb7330dbc3d0ba16b2599e2} 
size\+\_\+t ff\+::\+FFAllocator\+::\+A\+\_\+size}

\Hypertarget{classff_1_1_f_f_allocator_a95cfdf153883ae42a8f318c60f0abb9f}\index{ff::FFAllocator@{ff::FFAllocator}!delayedReclaim@{delayedReclaim}}
\index{delayedReclaim@{delayedReclaim}!ff::FFAllocator@{ff::FFAllocator}}
\doxysubsubsection{\texorpdfstring{delayedReclaim}{delayedReclaim}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_a95cfdf153883ae42a8f318c60f0abb9f} 
const \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} ff\+::\+FFAllocator\+::delayed\+Reclaim}

\Hypertarget{classff_1_1_f_f_allocator_a120393744e98f0ed5fe086a25521ca00}\index{ff::FFAllocator@{ff::FFAllocator}!lock@{lock}}
\index{lock@{lock}!ff::FFAllocator@{ff::FFAllocator}}
\doxysubsubsection{\texorpdfstring{lock}{lock}}
{\footnotesize\ttfamily \label{classff_1_1_f_f_allocator_a120393744e98f0ed5fe086a25521ca00} 
lock\+\_\+t ff\+::\+FFAllocator\+::lock}



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/taskflow/3rd-\/party/ff/\mbox{\hyperlink{allocator_8hpp}{allocator.\+hpp}}\end{DoxyCompactItemize}
