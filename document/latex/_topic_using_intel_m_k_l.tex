\doxysubsection{Using Intel® MKL from Eigen}
\hypertarget{_topic_using_intel_m_k_l}{}\label{_topic_using_intel_m_k_l}\index{Using Intel® MKL from \%Eigen@{Using Intel® MKL from \%Eigen}}
Since Eigen version 3.\+1 and later, users can benefit from built-\/in Intel® Math Kernel Library (MKL) optimizations with an installed copy of Intel MKL 10.\+3 (or later).

\href{http://eigen.tuxfamily.org/Counter/redirect_to_mkl.php}{\texttt{ Intel MKL }} provides highly optimized multi-\/threaded mathematical routines for x86-\/compatible architectures. Intel MKL is available on Linux, Mac and Windows for both Intel64 and IA32 architectures.

\begin{DoxyNote}{注解}
Intel® MKL is a proprietary software and it is the responsibility of users to buy or register for community (free) Intel MKL licenses for their products. Moreover, the license of the user product has to allow linking to proprietary software that excludes any unmodified versions of the GPL.
\end{DoxyNote}
Using Intel MKL through Eigen is easy\+:
\begin{DoxyEnumerate}
\item define the {\ttfamily EIGEN\+\_\+\+USE\+\_\+\+MKL\+\_\+\+ALL} macro before including any Eigen\textquotesingle{}s header
\item link your program to MKL libraries (see the \href{http://software.intel.com/en-us/articles/intel-mkl-link-line-advisor/}{\texttt{ MKL linking advisor}})
\item on a 64bits system, you must use the LP64 interface (not the ILP64 one)
\end{DoxyEnumerate}

When doing so, a number of Eigen\textquotesingle{}s algorithms are silently substituted with calls to Intel MKL routines. These substitutions apply only for {\bfseries{Dynamic}} {\bfseries{or}} {\bfseries{large}} enough objects with one of the following four standard scalar types\+: {\ttfamily float}, {\ttfamily double}, {\ttfamily \doxylink{structcomplex}{complex$<$float$>$}}, and {\ttfamily \doxylink{structcomplex}{complex$<$double$>$}}. Operations on other scalar types or mixing reals and complexes will continue to use the built-\/in algorithms.

In addition you can choose which parts will be substituted by defining one or multiple of the following macros\+:

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{2}{|X[-1]}|}
\hline
{\ttfamily EIGEN\+\_\+\+USE\+\_\+\+BLAS} &Enables the use of external BLAS level 2 and 3 routines \\\cline{1-2}
{\ttfamily EIGEN\+\_\+\+USE\+\_\+\+LAPACKE} &Enables the use of external Lapack routines via the \href{http://www.netlib.org/lapack/lapacke.html}{\texttt{ Lapacke}} C interface to Lapack \\\cline{1-2}
{\ttfamily EIGEN\+\_\+\+USE\+\_\+\+LAPACKE\+\_\+\+STRICT} &Same as {\ttfamily EIGEN\+\_\+\+USE\+\_\+\+LAPACKE} but algorithm of lower robustness are disabled. ~\newline
 This currently concerns only \doxylink{class_eigen_1_1_jacobi_s_v_d}{Jacobi\+SVD} which otherwise would be replaced by {\ttfamily gesvd} that is less robust than Jacobi rotations. \\\cline{1-2}
{\ttfamily EIGEN\+\_\+\+USE\+\_\+\+MKL\+\_\+\+VML} &Enables the use of Intel VML (vector operations) \\\cline{1-2}
{\ttfamily EIGEN\+\_\+\+USE\+\_\+\+MKL\+\_\+\+ALL} &Defines {\ttfamily EIGEN\+\_\+\+USE\+\_\+\+BLAS}, {\ttfamily EIGEN\+\_\+\+USE\+\_\+\+LAPACKE}, and {\ttfamily EIGEN\+\_\+\+USE\+\_\+\+MKL\+\_\+\+VML}  \\\cline{1-2}
\end{longtabu}


The options can be combined with {\bfseries{MKL\+\_\+\+DIRECT\+\_\+\+CALL}} to enable MKL direct call feature. This may help to increase performance of some MKL BLAS (?GEMM, ?GEMV, ?TRSM, ?AXPY and ?DOT) and LAPACK (LU, Cholesky and QR) routines for very small matrices. To make it work properly, the macro {\ttfamily EIGEN\+\_\+\+USE\+\_\+\+MKL} must also be defined in the case none of the other {\ttfamily EIGEN\+\_\+\+USE\+\_\+\+MKL\+\_\+\texorpdfstring{$\ast$}{*}} macros has been defined.

Note that the BLAS and LAPACKE backends can be enabled for any F77 compatible BLAS and LAPACK libraries. See this \doxylink{_topic_using_blas_lapack}{page } for the details.

Finally, the PARDISO sparse solver shipped with Intel MKL can be used through the \doxylink{class_eigen_1_1_pardiso_l_u}{Pardiso\+LU}, \doxylink{class_eigen_1_1_pardiso_l_l_t}{Pardiso\+LLT} and \doxylink{class_eigen_1_1_pardiso_l_d_l_t}{Pardiso\+LDLT} classes of the Pardiso\+Support\+\_\+\+Module.

The following table summarizes the list of functions covered by {\ttfamily EIGEN\+\_\+\+USE\+\_\+\+MKL\+\_\+\+VML\+:} \tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Code example}&\cellcolor{\tableheadbgcolor}\textbf{ MKL routines }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Code example}&\cellcolor{\tableheadbgcolor}\textbf{ MKL routines }\\\cline{1-2}
\endhead

\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a3eb30a79de469336df46f4f5f0bfb84f}{v2}}=\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a10bd710692c91bc238f2e1da77730678}{v1}}.array().sin();}
\DoxyCodeLine{\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a3eb30a79de469336df46f4f5f0bfb84f}{v2}}=\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a10bd710692c91bc238f2e1da77730678}{v1}}.array().asin();}
\DoxyCodeLine{\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a3eb30a79de469336df46f4f5f0bfb84f}{v2}}=\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a10bd710692c91bc238f2e1da77730678}{v1}}.array().cos();}
\DoxyCodeLine{\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a3eb30a79de469336df46f4f5f0bfb84f}{v2}}=\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a10bd710692c91bc238f2e1da77730678}{v1}}.array().acos();}
\DoxyCodeLine{\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a3eb30a79de469336df46f4f5f0bfb84f}{v2}}=\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a10bd710692c91bc238f2e1da77730678}{v1}}.array().tan();}
\DoxyCodeLine{\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a3eb30a79de469336df46f4f5f0bfb84f}{v2}}=\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a10bd710692c91bc238f2e1da77730678}{v1}}.array().exp();}
\DoxyCodeLine{\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a3eb30a79de469336df46f4f5f0bfb84f}{v2}}=\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a10bd710692c91bc238f2e1da77730678}{v1}}.array().log();}
\DoxyCodeLine{\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a3eb30a79de469336df46f4f5f0bfb84f}{v2}}=\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a10bd710692c91bc238f2e1da77730678}{v1}}.array().sqrt();}
\DoxyCodeLine{\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a3eb30a79de469336df46f4f5f0bfb84f}{v2}}=\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a10bd710692c91bc238f2e1da77730678}{v1}}.array().square();}
\DoxyCodeLine{\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a3eb30a79de469336df46f4f5f0bfb84f}{v2}}=\mbox{\hyperlink{_tutorial___reshape_mat2_vec_8cpp_a10bd710692c91bc238f2e1da77730678}{v1}}.array().pow(1.5);}

\end{DoxyCode}
&
\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}?Sin}
\DoxyCodeLine{\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}?Asin}
\DoxyCodeLine{\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}?Cos}
\DoxyCodeLine{\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}?Acos}
\DoxyCodeLine{\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}?Tan}
\DoxyCodeLine{\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}?Exp}
\DoxyCodeLine{\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}?Ln}
\DoxyCodeLine{\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}?Sqrt}
\DoxyCodeLine{\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}?Sqr}
\DoxyCodeLine{\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}?Powx}

\end{DoxyCode}
 \\\cline{1-2}
\end{longtabu}
In the examples, v1 and v2 are dense vectors.\hypertarget{_topic_using_intel_m_k_l_TopicUsingIntelMKL_Links}{}\doxysubsubsection{\texorpdfstring{Links}{Links}}\label{_topic_using_intel_m_k_l_TopicUsingIntelMKL_Links}

\begin{DoxyItemize}
\item Intel MKL can be purchased and downloaded \href{http://eigen.tuxfamily.org/Counter/redirect_to_mkl.php}{\texttt{ here}}.
\item Intel MKL is also bundled with \href{http://software.intel.com/en-us/articles/intel-composer-xe/}{\texttt{ Intel Composer XE}}. 
\end{DoxyItemize}