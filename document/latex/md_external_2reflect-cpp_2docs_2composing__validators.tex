\chapter{Composing validators}
\hypertarget{md_external_2reflect-cpp_2docs_2composing__validators}{}\label{md_external_2reflect-cpp_2docs_2composing__validators}\index{Composing validators@{Composing validators}}
\label{md_external_2reflect-cpp_2docs_2composing__validators_autotoc_md531}%
\Hypertarget{md_external_2reflect-cpp_2docs_2composing__validators_autotoc_md531}%


Sometimes the conditions you want to impose are more complex than a simple minimum or a simple regex pattern. That is why reflect-\/cpp allows you to compose them using the operators {\ttfamily \doxylink{structrfl_1_1_any_of}{rfl\+::\+Any\+Of}}, {\ttfamily \doxylink{structrfl_1_1_all_of}{rfl\+::\+All\+Of}} and {\ttfamily \doxylink{structrfl_1_1_one_of}{rfl\+::\+One\+Of}}.


\begin{DoxyItemize}
\item {\ttfamily \doxylink{structrfl_1_1_any_of}{rfl\+::\+Any\+Of}} requires that {\itshape at least one} of the conditions contained therein be true. It thus works like an OR operator.
\item {\ttfamily \doxylink{structrfl_1_1_all_of}{rfl\+::\+All\+Of}} requires that {\itshape all} of the conditions contained therein be true. It thus works like an AND operator.
\item {\ttfamily \doxylink{structrfl_1_1_one_of}{rfl\+::\+One\+Of}} requires that {\itshape exactly one} of the conditions contained therein be true. It thus works like a XOR operator.
\end{DoxyItemize}

For instance, if you want to ensure that a person\textquotesingle{}s age is a reasonable number, you can impose two conditions as follows\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{using\ }\mbox{\hyperlink{namespacetest__add__struct__name_adf083b09022b62d12ed8b8453317e043}{Age}}\ =\ \mbox{\hyperlink{structrfl_1_1_validator}{rfl::Validator}}<\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structrfl_1_1_all_of}{rfl::AllOf<rfl::Minimum<0>}},\ \mbox{\hyperlink{structrfl_1_1_maximum}{rfl::Maximum<130>}}>>;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{struct\ }Person\ \{}
\DoxyCodeLine{\ \ rfl::Rename<\textcolor{stringliteral}{"{}firstName"{}},\ std::string>\ first\_name;}
\DoxyCodeLine{\ \ rfl::Rename<\textcolor{stringliteral}{"{}lastName"{}},\ std::string>\ last\_name;}
\DoxyCodeLine{\ \ \mbox{\hyperlink{namespacetest__add__struct__name_adf083b09022b62d12ed8b8453317e043}{Age}}\ \mbox{\hyperlink{namespacectre_af1ab492eac22f0bfaebe58d37347ce28a7d637d275668ed6d41a9b97e6ad3a556}{age}};}
\DoxyCodeLine{\};}

\end{DoxyCode}


However, if you pass more than one constraint to {\ttfamily \doxylink{structrfl_1_1_validator}{rfl\+::\+Validator}}, they will be automatically connected using {\ttfamily \doxylink{structrfl_1_1_all_of}{rfl\+::\+All\+Of}}, so you might as well write\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{using\ }\mbox{\hyperlink{namespacetest__add__struct__name_adf083b09022b62d12ed8b8453317e043}{Age}}\ =\ \mbox{\hyperlink{structrfl_1_1_validator}{rfl::Validator<int,\ rfl::Minimum<0>}},\ \mbox{\hyperlink{structrfl_1_1_maximum}{rfl::Maximum<130>}}>;}
\DoxyCodeLine{}
\DoxyCodeLine{...}

\end{DoxyCode}


You can also nest composed validators. For instance, in this case the age must either be 0-\/10 or 40-\/130.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{using\ }\mbox{\hyperlink{namespacetest__add__struct__name_adf083b09022b62d12ed8b8453317e043}{Age}}\ =\ \mbox{\hyperlink{structrfl_1_1_validator}{rfl::Validator}}<}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}},}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{structrfl_1_1_any_of}{rfl::AnyOf<rfl::AllOf<rfl::Minimum<0>}},\ \mbox{\hyperlink{structrfl_1_1_maximum}{rfl::Maximum<10>}}>,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structrfl_1_1_all_of}{rfl::AllOf<rfl::Minimum<40>}},\ \mbox{\hyperlink{structrfl_1_1_maximum}{rfl::Maximum<130>}}>>>;}

\end{DoxyCode}


You can also compose regex patterns\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{using\ }TableOrColumnName\ =\ \mbox{\hyperlink{structrfl_1_1_validator}{rfl::Validator}}<}
\DoxyCodeLine{\ \ \ \ std::string,}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{structrfl_1_1_any_of}{rfl::AnyOf}}<\mbox{\hyperlink{structrfl_1_1_pattern_validator}{rfl::PatternValidator}}<R\textcolor{stringliteral}{"{}(\string^[A-\/Z]+(?:\_[A-\/Z]+)*\$)"{},\ }\textcolor{stringliteral}{"{}TableName"{}}>,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structrfl_1_1_pattern_validator}{rfl::PatternValidator}}<R\textcolor{stringliteral}{"{}(\string^[a-\/z]+(?:\_[a-\/z]+)*\$)"{},\ }\textcolor{stringliteral}{"{}ColumnName"{}}>>>;}

\end{DoxyCode}
 