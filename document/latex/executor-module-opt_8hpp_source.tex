\doxysection{executor-\/module-\/opt.hpp}
\hypertarget{executor-module-opt_8hpp_source}{}\label{executor-module-opt_8hpp_source}\index{external/taskflow/sandbox/executor/executor-\/module-\/opt.hpp@{external/taskflow/sandbox/executor/executor-\/module-\/opt.hpp}}
\mbox{\hyperlink{executor-module-opt_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{observer_8hpp}{observer.hpp}}"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}taskflow.hpp"{}}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetf}{tf}}\ \{}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ Executor\ Definition}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00050\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtf_1_1_executor}{Executor}}\ \{}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtf_1_1_executor_a2df628bb391742ad80f2bb9469add922}{FlowBuilder}};}
\DoxyCodeLine{00053\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtf_1_1_executor_a16f3b433d11b0607ff9824676c178027}{Subflow}};}
\DoxyCodeLine{00054\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtf_1_1_executor_a5b17fd70021887be0e396dd96f9dd5e3}{Runtime}};}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classtf_1_1_executor_a4910e89d89146b6d563d598b795eb4a9}{Executor}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ =\ std::thread::hardware\_concurrency());}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00076\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a5a511b0cc23b264826373d3dabcef670}{\string~Executor}}();}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00100\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_future}{tf::Future<void>}}\ \mbox{\hyperlink{classtf_1_1_executor_a519777f5783981d534e9e53b99712069}{run}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}});}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00121\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_future}{tf::Future<void>}}\ \mbox{\hyperlink{classtf_1_1_executor_a4bbef53618db1852003a0cd1e1e40c50}{run}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\&\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}});}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ C>}
\DoxyCodeLine{00149\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_future}{tf::Future<void>}}\ \mbox{\hyperlink{classtf_1_1_executor_ac01c2f31dd3ed3b4dfa1a6c933a58b2f}{run}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}},\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\&\&\ callable);}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ C>}
\DoxyCodeLine{00176\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_future}{tf::Future<void>}}\ \mbox{\hyperlink{classtf_1_1_executor_a52c27df2fb7372277f4926f4ab0a0937}{run}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\&\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}},\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\&\&\ callable);}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00201\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_future}{tf::Future<void>}}\ \mbox{\hyperlink{classtf_1_1_executor_a6d0617eebc9421f1ba1f82ce6dd02c00}{run\_n}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}});}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00225\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_future}{tf::Future<void>}}\ \mbox{\hyperlink{classtf_1_1_executor_ad10a12c9e14c8132e414c9a48443d938}{run\_n}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\&\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}});}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ C>}
\DoxyCodeLine{00257\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_future}{tf::Future<void>}}\ \mbox{\hyperlink{classtf_1_1_executor_abd99b189457d1a00a33cd22339694fcd}{run\_n}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\&\&\ callable);}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ C>}
\DoxyCodeLine{00285\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_future}{tf::Future<void>}}\ \mbox{\hyperlink{classtf_1_1_executor_ad14430ac62f0e64e9e21712ba35c22ea}{run\_n}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\&\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}},\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\&\&\ callable);}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00314\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ P>}
\DoxyCodeLine{00315\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_future}{tf::Future<void>}}\ \mbox{\hyperlink{classtf_1_1_executor_a0f52e9dd64b65aba32ca0e13c1ed300a}{run\_until}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}},\ \mbox{\hyperlink{namespace_p}{P}}\&\&\ pred);}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00342\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ P>}
\DoxyCodeLine{00343\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_future}{tf::Future<void>}}\ \mbox{\hyperlink{classtf_1_1_executor_ab10fac2869d80049e5a75d2084a78eda}{run\_until}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\&\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}},\ \mbox{\hyperlink{namespace_p}{P}}\&\&\ pred);}
\DoxyCodeLine{00344\ }
\DoxyCodeLine{00375\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ P,\ \textcolor{keyword}{typename}\ C>}
\DoxyCodeLine{00376\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_future}{tf::Future<void>}}\ \mbox{\hyperlink{classtf_1_1_executor_af84856e5c4c605fcb3cbfbcad069a6a8}{run\_until}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}},\ \mbox{\hyperlink{namespace_p}{P}}\&\&\ pred,\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\&\&\ callable);}
\DoxyCodeLine{00377\ }
\DoxyCodeLine{00406\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ P,\ \textcolor{keyword}{typename}\ C>}
\DoxyCodeLine{00407\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_future}{tf::Future<void>}}\ \mbox{\hyperlink{classtf_1_1_executor_af30c6947f060e4bdf344e90b6b44fc70}{run\_until}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\&\ \mbox{\hyperlink{poisson_8hpp_aa56fe360bb0ae38e0082f49e394ff825}{taskflow}},\ \mbox{\hyperlink{namespace_p}{P}}\&\&\ pred,\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\&\&\ callable);}
\DoxyCodeLine{00408\ }
\DoxyCodeLine{00422\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ab9aa252f70e9a40020a1e5a89d485b85}{wait\_for\_all}}();}
\DoxyCodeLine{00423\ }
\DoxyCodeLine{00435\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtf_1_1_executor_a9d2d464ab2a84ecb3b3ea7747e8e276b}{num\_workers}}()\ const\ noexcept;}
\DoxyCodeLine{00436\ }
\DoxyCodeLine{00450\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtf_1_1_executor_a6d6c28ed58211e4c27a99571e5bf0b6c}{num\_topologies}}()\ const;}
\DoxyCodeLine{00451\ }
\DoxyCodeLine{00460\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtf_1_1_executor_a5fb438dc0f7b9e1ae2fe3f240c82f174}{num\_taskflows}}()\ const;}
\DoxyCodeLine{00461\ }
\DoxyCodeLine{00479\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classtf_1_1_executor_a6487d589cb1f6b078b69fd3bb1082345}{this\_worker\_id}}()\ const;}
\DoxyCodeLine{00480\ }
\DoxyCodeLine{00508\ \ \ \ \ template\ <typename\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ typename...\ ArgsT>}
\DoxyCodeLine{00509\ \ \ \ \ auto\ \mbox{\hyperlink{classtf_1_1_executor_af960048056f7c6b5bc71f4f526f05df7}{async}}(\mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ ArgsT\&\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}});}
\DoxyCodeLine{00510\ }
\DoxyCodeLine{00541\ \ \ \ \ template\ <typename\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ typename...\ ArgsT>}
\DoxyCodeLine{00542\ \ \ \ \ auto\ \mbox{\hyperlink{classtf_1_1_executor_a51acee1670e9f246c7ccd7f6a63f1524}{named\_async}}(const\ \mbox{\hyperlink{namespacestd}{std}}::\textcolor{keywordtype}{string}\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}},\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ ArgsT\&\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}});}
\DoxyCodeLine{00543\ }
\DoxyCodeLine{00558\ \ \ \ \ template\ <typename\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ typename...\ ArgsT>}
\DoxyCodeLine{00559\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a0461cb2c459c9f9473c72af06af9c701}{silent\_async}}(\mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ ArgsT\&\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}});}
\DoxyCodeLine{00560\ }
\DoxyCodeLine{00575\ \ \ \ \ template\ <typename\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ typename...\ ArgsT>}
\DoxyCodeLine{00576\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a1febfaa7a99cac8466263c58fd2a7c06}{named\_silent\_async}}(const\ \mbox{\hyperlink{namespacestd}{std}}::\textcolor{keywordtype}{string}\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}},\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ ArgsT\&\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}});}
\DoxyCodeLine{00577\ }
\DoxyCodeLine{00595\ \ \ \ \ template\ <typename\ Observer,\ typename...\ ArgsT>}
\DoxyCodeLine{00596\ \ \ \ \ \mbox{\hyperlink{namespacestd}{std}}::shared\_ptr<Observer>\ \mbox{\hyperlink{classtf_1_1_executor_aff77def96ae740d648dd84e571237c83}{make\_observer}}(ArgsT\&\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}});}
\DoxyCodeLine{00597\ }
\DoxyCodeLine{00603\ \ \ \ \ template\ <typename\ Observer>}
\DoxyCodeLine{00604\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a31081f492c376f7b798de0e430534531}{remove\_observer}}(\mbox{\hyperlink{namespacestd}{std}}::shared\_ptr<Observer>\ \mbox{\hyperlink{test__basics_8cpp_ae362ef40752341c76d5edd1d99e46918}{observer}});}
\DoxyCodeLine{00605\ }
\DoxyCodeLine{00609\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtf_1_1_executor_affec621aae59d73fc188ef454008fda2}{num\_observers}}()\ const\ noexcept;}
\DoxyCodeLine{00610\ }
\DoxyCodeLine{00611\ \ \ \mbox{\hyperlink{rml__server_8cpp_a6a1d6e1a12975a4e9a0b5b952e79eaad}{private}}:}
\DoxyCodeLine{00612\ }
\DoxyCodeLine{00613\ \ \ \ \ \mbox{\hyperlink{namespacestd}{std}}::condition\_variable\ \mbox{\hyperlink{classtf_1_1_executor_a94357ea08db1859178f855b0b926b3de}{\_topology\_cv}};}
\DoxyCodeLine{00614\ \ \ \ \ \mbox{\hyperlink{namespacestd}{std}}::\mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}}\ \mbox{\hyperlink{classtf_1_1_executor_a9707dbbe643016ac2e515aada9ebfcf3}{\_taskflow\_mutex}};}
\DoxyCodeLine{00615\ \ \ \ \ \mbox{\hyperlink{namespacestd}{std}}::\mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}}\ \mbox{\hyperlink{classtf_1_1_executor_a8be5571fa0df99784aacb26b01d0f4b4}{\_topology\_mutex}};}
\DoxyCodeLine{00616\ \ \ \ \ \mbox{\hyperlink{namespacestd}{std}}::\mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}}\ \mbox{\hyperlink{classtf_1_1_executor_ad031630f03103157f807d85a174d08cb}{\_wsq\_mutex}};}
\DoxyCodeLine{00617\ }
\DoxyCodeLine{00618\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtf_1_1_executor_a9e38edfbc967dd3f5ca6f7a115f95ed7}{\_num\_topologies}}\ \{0\};}
\DoxyCodeLine{00619\ }
\DoxyCodeLine{00620\ \ \ \ \ std::unordered\_map<std::thread::id,\ size\_t>\ \mbox{\hyperlink{classtf_1_1_executor_af71638d9b1c9446b86fa28bde9eb0b64}{\_wids}};}
\DoxyCodeLine{00621\ \ \ \ \ std::vector<Worker>\ \mbox{\hyperlink{classtf_1_1_executor_a274fb0e5281f987d5df40950126c2a83}{\_workers}};}
\DoxyCodeLine{00622\ \ \ \ \ std::vector<std::thread>\ \mbox{\hyperlink{classtf_1_1_executor_a82388e638ae6304817bb5e1adc5ecdea}{\_threads}};}
\DoxyCodeLine{00623\ \ \ \ \ std::list<Taskflow>\ \mbox{\hyperlink{classtf_1_1_executor_a02aabc31d357937b4aaf46539c5ad129}{\_taskflows}};}
\DoxyCodeLine{00624\ }
\DoxyCodeLine{00625\ \ \ \ \ Notifier\ \mbox{\hyperlink{classtf_1_1_executor_ab92c39c4b59577cf4163c21ef2edb2f3}{\_notifier}};}
\DoxyCodeLine{00626\ }
\DoxyCodeLine{00627\ \ \ \ \ TaskQueue<Node*>\ \mbox{\hyperlink{classtf_1_1_executor_a477ca0d015675c7cfc544818f8758662}{\_wsq}};}
\DoxyCodeLine{00628\ }
\DoxyCodeLine{00629\ \ \ \ \ std::atomic<size\_t>\ \mbox{\hyperlink{classtf_1_1_executor_aa987e2bddb791a78ece4e5693f018afb}{\_num\_actives}}\ \{0\};}
\DoxyCodeLine{00630\ \ \ \ \ std::atomic<size\_t>\ \mbox{\hyperlink{classtf_1_1_executor_a904e5d4f22bf5a72bc0af2a4c5f32a3e}{\_num\_thieves}}\ \{0\};}
\DoxyCodeLine{00631\ \ \ \ \ std::atomic<bool>\ \ \ \mbox{\hyperlink{classtf_1_1_executor_af2832d44d52fade918cb25a6b2de9bdf}{\_done}}\ \{0\};}
\DoxyCodeLine{00632\ }
\DoxyCodeLine{00633\ \ \ \ \ std::unordered\_set<std::shared\_ptr<ObserverInterface>>\ \mbox{\hyperlink{classtf_1_1_executor_a2065a53dc5cf19e0d12ff73ef8dd6a6a}{\_observers}};}
\DoxyCodeLine{00634\ }
\DoxyCodeLine{00635\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_worker}{Worker}}*\ \mbox{\hyperlink{classtf_1_1_executor_a941f6e5e9e6141a81c750648c4802b63}{\_this\_worker}}();}
\DoxyCodeLine{00636\ }
\DoxyCodeLine{00637\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classtf_1_1_executor_a57f5105dc812d83f259ec8cab7c96228}{\_wait\_for\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\&);}
\DoxyCodeLine{00638\ }
\DoxyCodeLine{00639\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ae023614977a19def9e04cf7212eab65b}{\_observer\_prologue}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*);}
\DoxyCodeLine{00640\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a9cd8c1a72af4477bc0f9575b68ffb16a}{\_observer\_epilogue}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*);}
\DoxyCodeLine{00641\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a8aee6c0ec55b4bfb3909601203e98514}{\_spawn}}(\textcolor{keywordtype}{size\_t});}
\DoxyCodeLine{00642\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a8615d8b666bc94e2007f2a1561767895}{\_worker\_loop}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&);}
\DoxyCodeLine{00643\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a0b4f231e11016194980b14e76262c8a7}{\_exploit\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\&);}
\DoxyCodeLine{00644\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_aab7cc2e53d75fcc87fcc919f29bf9ca9}{\_explore\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\&);}
\DoxyCodeLine{00645\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a2e81517a3d0a9d0c7fc706e181e03bc2}{\_consume\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*);}
\DoxyCodeLine{00646\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*);}
\DoxyCodeLine{00647\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a685c08b62a494359e34c6de2a700fdab}{\_schedule}}(\mbox{\hyperlink{classtf_1_1_node}{Node}}*);}
\DoxyCodeLine{00648\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a93428e4393889d4f944cd2ead5ae9a44}{\_schedule}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classtf_1_1_small_vector}{SmallVector<Node*>}}\&);}
\DoxyCodeLine{00649\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_aeb7284d779569a8297bca3c5f126cd9b}{\_schedule}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classtf_1_1_small_vector}{SmallVector<Node*>}}\&);}
\DoxyCodeLine{00650\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a723daf897c5d3d3517583cb4c62654ee}{\_set\_up\_topology}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}*,\ \mbox{\hyperlink{classtf_1_1_topology}{Topology}}*);}
\DoxyCodeLine{00651\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a76be884d38d1bb8f9b8bba488c901b4b}{\_tear\_down\_topology}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_topology}{Topology}}*);}
\DoxyCodeLine{00652\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a42e7db3fc43e1c5479e30e8d83da9e74}{\_tear\_down\_async}}(\mbox{\hyperlink{classtf_1_1_node}{Node}}*);}
\DoxyCodeLine{00653\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a17fe8e0f32892cf2848611bca7566378}{\_tear\_down\_invoke}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*);}
\DoxyCodeLine{00654\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a3a7524f412f7c7c328774135077f0498}{\_cancel\_invoke}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*);}
\DoxyCodeLine{00655\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ab85dc42b3e9b18e4b975bd5e9a8c5e72}{\_increment\_topology}}();}
\DoxyCodeLine{00656\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a8728f22f6d177fad84ce667e02a7a3b9}{\_decrement\_topology}}();}
\DoxyCodeLine{00657\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a08945917285cd57d33efc99530fbd384}{\_decrement\_topology\_and\_notify}}();}
\DoxyCodeLine{00658\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ad16165142908aca9444ea88e65040219}{\_invoke}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*);}
\DoxyCodeLine{00659\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ac243d2a08b5a4a75dd440dc063b886ce}{\_invoke\_static\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*);}
\DoxyCodeLine{00660\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a4a000baf70b108201e3787787309c272}{\_invoke\_dynamic\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*);}
\DoxyCodeLine{00661\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_afdd10d937c907e5a2801724b7a7acda7}{\_invoke\_dynamic\_task\_external}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*,\ \mbox{\hyperlink{classtf_1_1_graph}{Graph}}\&,\ \textcolor{keywordtype}{bool});}
\DoxyCodeLine{00662\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a5a5888a261a5cead22913beddfa7fa82}{\_invoke\_dynamic\_task\_internal}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*,\ \mbox{\hyperlink{classtf_1_1_graph}{Graph}}\&);}
\DoxyCodeLine{00663\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_afa6be6aab23ff4b2a293a2245818916d}{\_invoke\_condition\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*,\ \mbox{\hyperlink{classtf_1_1_small_vector}{SmallVector<int>}}\&);}
\DoxyCodeLine{00664\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a19b3f10d4eab40143d3f76b946ded252}{\_invoke\_multi\_condition\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*,\ \mbox{\hyperlink{classtf_1_1_small_vector}{SmallVector<int>}}\&);}
\DoxyCodeLine{00665\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a429fed7f063b23a633e1657a43f1fd0e}{\_invoke\_module\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*,\ \textcolor{keywordtype}{bool}\&);}
\DoxyCodeLine{00666\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a7338106d893b2b7cc223376878a48d64}{\_invoke\_module\_task\_internal}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*,\ \mbox{\hyperlink{classtf_1_1_graph}{Graph}}\&,\ \textcolor{keywordtype}{bool}\&);}
\DoxyCodeLine{00667\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a505ccafa7ab1855c200d5590499adf5a}{\_invoke\_async\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*);}
\DoxyCodeLine{00668\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ae2bb8ef1456ec6414e46d7ed77628bd9}{\_invoke\_silent\_async\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*);}
\DoxyCodeLine{00669\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ae4be3b787a3c6eaaf18589a25e9c844f}{\_invoke\_cudaflow\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*);}
\DoxyCodeLine{00670\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ae7254966d36c26cdf59a11bc7bd4d43f}{\_invoke\_syclflow\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*);}
\DoxyCodeLine{00671\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a324dfe88e4b227fce0fdc76b667c40ce}{\_invoke\_runtime\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*);}
\DoxyCodeLine{00672\ }
\DoxyCodeLine{00673\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}},}
\DoxyCodeLine{00674\ \ \ \ \ \ \ std::enable\_if\_t<is\_cudaflow\_task\_v<C>,\ \textcolor{keywordtype}{void}>*\ =\ \textcolor{keyword}{nullptr}}
\DoxyCodeLine{00675\ \ \ \ \ >}
\DoxyCodeLine{00676\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_aeeecfcac09ba22db0aeaf2f5b534b802}{\_invoke\_cudaflow\_task\_entry}}(\mbox{\hyperlink{classtf_1_1_node}{Node}}*,\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\&\&);}
\DoxyCodeLine{00677\ }
\DoxyCodeLine{00678\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}},\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{_householder_q_r__householder_q_8cpp_a7e56035a736d269ad670f312496a0846}{Q}},}
\DoxyCodeLine{00679\ \ \ \ \ \ \ std::enable\_if\_t<is\_syclflow\_task\_v<C>,\ \textcolor{keywordtype}{void}>*\ =\ \textcolor{keyword}{nullptr}}
\DoxyCodeLine{00680\ \ \ \ \ >}
\DoxyCodeLine{00681\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a42a995c2a5299761cf3c2e2d17cfca34}{\_invoke\_syclflow\_task\_entry}}(\mbox{\hyperlink{classtf_1_1_node}{Node}}*,\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\&\&,\ \mbox{\hyperlink{_householder_q_r__householder_q_8cpp_a7e56035a736d269ad670f312496a0846}{Q}}\&);}
\DoxyCodeLine{00682\ \};}
\DoxyCodeLine{00683\ }
\DoxyCodeLine{00684\ \textcolor{comment}{//\ Constructor}}
\DoxyCodeLine{00685\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classtf_1_1_executor_a4910e89d89146b6d563d598b795eb4a9}{Executor::Executor}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}})\ :}
\DoxyCodeLine{00686\ \ \ \_workers\ \ \ \ \{\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\},}
\DoxyCodeLine{00687\ \ \ \_notifier\ \ \ \{\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\}\ \{}
\DoxyCodeLine{00688\ }
\DoxyCodeLine{00689\ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ ==\ 0)\ \{}
\DoxyCodeLine{00690\ \ \ \ \ \mbox{\hyperlink{error_8hpp_aecd66f17d01de60aeb9cae992c9dd4bf}{TF\_THROW}}(\textcolor{stringliteral}{"{}no\ cpu\ workers\ to\ execute\ taskflows"{}});}
\DoxyCodeLine{00691\ \ \ \}}
\DoxyCodeLine{00692\ }
\DoxyCodeLine{00693\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a8aee6c0ec55b4bfb3909601203e98514}{\_spawn}}(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}});}
\DoxyCodeLine{00694\ }
\DoxyCodeLine{00695\ \ \ \textcolor{comment}{//\ instantite\ the\ default\ observer\ if\ requested}}
\DoxyCodeLine{00696\ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{namespacetf_adc9815b9f96b796675ba939078d25413}{has\_env}}(\mbox{\hyperlink{environment_8hpp_ae89273a224aed50f8e9b446fdd871b12}{TF\_ENABLE\_PROFILER}}))\ \{}
\DoxyCodeLine{00697\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_t_f_prof_manager_a395d9e6f56a4cdada848d889c7de8a86}{TFProfManager::get}}().\mbox{\hyperlink{classtf_1_1_t_f_prof_manager_a5cea0d2082714658a13b9b506d946253}{\_manage}}(\mbox{\hyperlink{classtf_1_1_executor_aff77def96ae740d648dd84e571237c83}{make\_observer<TFProfObserver>}}());}
\DoxyCodeLine{00698\ \ \ \}}
\DoxyCodeLine{00699\ \}}
\DoxyCodeLine{00700\ }
\DoxyCodeLine{00701\ \textcolor{comment}{//\ Destructor}}
\DoxyCodeLine{00702\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classtf_1_1_executor_a5a511b0cc23b264826373d3dabcef670}{Executor::\string~Executor}}()\ \{}
\DoxyCodeLine{00703\ }
\DoxyCodeLine{00704\ \ \ \textcolor{comment}{//\ wait\ for\ all\ topologies\ to\ complete}}
\DoxyCodeLine{00705\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab9aa252f70e9a40020a1e5a89d485b85}{wait\_for\_all}}();}
\DoxyCodeLine{00706\ }
\DoxyCodeLine{00707\ \ \ \textcolor{comment}{//\ shut\ down\ the\ scheduler}}
\DoxyCodeLine{00708\ \ \ \mbox{\hyperlink{classtf_1_1_executor_af2832d44d52fade918cb25a6b2de9bdf}{\_done}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00709\ }
\DoxyCodeLine{00710\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab92c39c4b59577cf4163c21ef2edb2f3}{\_notifier}}.notify(\textcolor{keyword}{true});}
\DoxyCodeLine{00711\ }
\DoxyCodeLine{00712\ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\&\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ :\ \mbox{\hyperlink{classtf_1_1_executor_a82388e638ae6304817bb5e1adc5ecdea}{\_threads}})\{}
\DoxyCodeLine{00713\ \ \ \ \ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.join();}
\DoxyCodeLine{00714\ \ \ \}}
\DoxyCodeLine{00715\ \}}
\DoxyCodeLine{00716\ }
\DoxyCodeLine{00717\ \textcolor{comment}{//\ Function:\ num\_workers}}
\DoxyCodeLine{00718\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtf_1_1_executor_a9d2d464ab2a84ecb3b3ea7747e8e276b}{Executor::num\_workers}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00719\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a274fb0e5281f987d5df40950126c2a83}{\_workers}}.size();}
\DoxyCodeLine{00720\ \}}
\DoxyCodeLine{00721\ }
\DoxyCodeLine{00722\ \textcolor{comment}{//\ Function:\ num\_topologies}}
\DoxyCodeLine{00723\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtf_1_1_executor_a6d6c28ed58211e4c27a99571e5bf0b6c}{Executor::num\_topologies}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00724\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a9e38edfbc967dd3f5ca6f7a115f95ed7}{\_num\_topologies}};}
\DoxyCodeLine{00725\ \}}
\DoxyCodeLine{00726\ }
\DoxyCodeLine{00727\ \textcolor{comment}{//\ Function:\ num\_taskflows}}
\DoxyCodeLine{00728\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtf_1_1_executor_a5fb438dc0f7b9e1ae2fe3f240c82f174}{Executor::num\_taskflows}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00729\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a02aabc31d357937b4aaf46539c5ad129}{\_taskflows}}.size();}
\DoxyCodeLine{00730\ \}}
\DoxyCodeLine{00731\ }
\DoxyCodeLine{00732\ \textcolor{comment}{//\ Function:\ \_this\_worker}}
\DoxyCodeLine{00733\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classtf_1_1_worker}{Worker}}*\ \mbox{\hyperlink{classtf_1_1_executor_a941f6e5e9e6141a81c750648c4802b63}{Executor::\_this\_worker}}()\ \{}
\DoxyCodeLine{00734\ \ \ \textcolor{keyword}{auto}\ itr\ =\ \mbox{\hyperlink{classtf_1_1_executor_af71638d9b1c9446b86fa28bde9eb0b64}{\_wids}}.find(std::this\_thread::get\_id());}
\DoxyCodeLine{00735\ \ \ \textcolor{keywordflow}{return}\ itr\ ==\ \mbox{\hyperlink{classtf_1_1_executor_af71638d9b1c9446b86fa28bde9eb0b64}{\_wids}}.end()\ ?\ nullptr\ :\ \&\mbox{\hyperlink{classtf_1_1_executor_a274fb0e5281f987d5df40950126c2a83}{\_workers}}[itr-\/>second];}
\DoxyCodeLine{00736\ \}}
\DoxyCodeLine{00737\ }
\DoxyCodeLine{00738\ \textcolor{comment}{//\ Function:\ named\_async}}
\DoxyCodeLine{00739\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ \textcolor{keyword}{typename}...\ ArgsT>}
\DoxyCodeLine{00740\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classtf_1_1_executor_a51acee1670e9f246c7ccd7f6a63f1524}{Executor::named\_async}}(\textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}},\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ ArgsT\&\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}})\ \{}
\DoxyCodeLine{00741\ }
\DoxyCodeLine{00742\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab85dc42b3e9b18e4b975bd5e9a8c5e72}{\_increment\_topology}}();}
\DoxyCodeLine{00743\ }
\DoxyCodeLine{00744\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ =\ std::invoke\_result\_t<\mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ ArgsT...>;}
\DoxyCodeLine{00745\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{test__broadcast__node_8cpp_a554e63228b946db0d44c4f398b18e212}{R}}\ =\ std::conditional\_t<std::is\_same\_v<T,\ void>,\ \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}},\ std::optional<T>>;}
\DoxyCodeLine{00746\ }
\DoxyCodeLine{00747\ \ \ std::promise<R>\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00748\ }
\DoxyCodeLine{00749\ \ \ \textcolor{keyword}{auto}\ tpg\ =\ std::make\_shared<AsyncTopology>();}
\DoxyCodeLine{00750\ }
\DoxyCodeLine{00751\ \ \ \mbox{\hyperlink{classtf_1_1_future}{Future<R>}}\ fu(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.get\_future(),\ tpg);}
\DoxyCodeLine{00752\ }
\DoxyCodeLine{00753\ \ \ \textcolor{keyword}{auto}\ node\ =\ node\_pool.animate(}
\DoxyCodeLine{00754\ \ \ \ \ std::in\_place\_type\_t<Node::Async>\{\},}
\DoxyCodeLine{00755\ \ \ \ \ [\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}=\mbox{\hyperlink{namespacetf_a7ddc987133ce85bd85c883b9e113c71b}{make\_moc}}(std::move(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})),\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}=std::forward<F>(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}),\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}...]}
\DoxyCodeLine{00756\ \ \ \ \ (\textcolor{keywordtype}{bool}\ cancel)\ \textcolor{keyword}{mutable}\ \{}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(std::is\_same\_v<R,\ void>)\ \{}
\DoxyCodeLine{00758\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!cancel)\ \{}
\DoxyCodeLine{00759\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(\mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}...);}
\DoxyCodeLine{00760\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00761\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.object.set\_value();}
\DoxyCodeLine{00762\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00763\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00764\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.object.set\_value(cancel\ ?\ std::nullopt\ :\ std::make\_optional(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(\mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}...)));}
\DoxyCodeLine{00765\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00766\ \ \ \ \ \},}
\DoxyCodeLine{00767\ \ \ \ \ std::move(tpg)}
\DoxyCodeLine{00768\ \ \ );}
\DoxyCodeLine{00769\ }
\DoxyCodeLine{00770\ \ \ node-\/>\_name\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}};}
\DoxyCodeLine{00771\ }
\DoxyCodeLine{00772\ \ \ \textcolor{keywordflow}{if}(\textcolor{keyword}{auto}\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}\ =\ \mbox{\hyperlink{classtf_1_1_executor_a941f6e5e9e6141a81c750648c4802b63}{\_this\_worker}}();\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}})\ \{}
\DoxyCodeLine{00773\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(*\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ node);}
\DoxyCodeLine{00774\ \ \ \}}
\DoxyCodeLine{00775\ \ \ \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{00776\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(node);}
\DoxyCodeLine{00777\ \ \ \}}
\DoxyCodeLine{00778\ }
\DoxyCodeLine{00779\ \ \ \textcolor{keywordflow}{return}\ fu;}
\DoxyCodeLine{00780\ \}}
\DoxyCodeLine{00781\ }
\DoxyCodeLine{00782\ \textcolor{comment}{//\ Function:\ async}}
\DoxyCodeLine{00783\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ \textcolor{keyword}{typename}...\ ArgsT>}
\DoxyCodeLine{00784\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classtf_1_1_executor_af960048056f7c6b5bc71f4f526f05df7}{Executor::async}}(\mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ ArgsT\&\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}})\ \{}
\DoxyCodeLine{00785\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a51acee1670e9f246c7ccd7f6a63f1524}{named\_async}}(\textcolor{stringliteral}{"{}"{}},\ std::forward<F>(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}),\ std::forward<ArgsT>(\mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}})...);}
\DoxyCodeLine{00786\ \}}
\DoxyCodeLine{00787\ }
\DoxyCodeLine{00788\ \textcolor{comment}{//\ Function:\ named\_silent\_async}}
\DoxyCodeLine{00789\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ \textcolor{keyword}{typename}...\ ArgsT>}
\DoxyCodeLine{00790\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a1febfaa7a99cac8466263c58fd2a7c06}{Executor::named\_silent\_async}}(}
\DoxyCodeLine{00791\ \ \ \textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}},\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ ArgsT\&\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}}
\DoxyCodeLine{00792\ )\ \{}
\DoxyCodeLine{00793\ }
\DoxyCodeLine{00794\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab85dc42b3e9b18e4b975bd5e9a8c5e72}{\_increment\_topology}}();}
\DoxyCodeLine{00795\ }
\DoxyCodeLine{00796\ \ \ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node\ =\ node\_pool.animate(}
\DoxyCodeLine{00797\ \ \ \ \ std::in\_place\_type\_t<Node::SilentAsync>\{\},}
\DoxyCodeLine{00798\ \ \ \ \ [\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}=std::forward<F>(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}),\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}...]\ ()\ \textcolor{keyword}{mutable}\ \{}
\DoxyCodeLine{00799\ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(\mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}...);}
\DoxyCodeLine{00800\ \ \ \ \ \}}
\DoxyCodeLine{00801\ \ \ );}
\DoxyCodeLine{00802\ }
\DoxyCodeLine{00803\ \ \ node-\/>\_name\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}};}
\DoxyCodeLine{00804\ }
\DoxyCodeLine{00805\ \ \ \textcolor{keywordflow}{if}(\textcolor{keyword}{auto}\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}\ =\ \mbox{\hyperlink{classtf_1_1_executor_a941f6e5e9e6141a81c750648c4802b63}{\_this\_worker}}();\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}})\ \{}
\DoxyCodeLine{00806\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(*\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ node);}
\DoxyCodeLine{00807\ \ \ \}}
\DoxyCodeLine{00808\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00809\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(node);}
\DoxyCodeLine{00810\ \ \ \}}
\DoxyCodeLine{00811\ \}}
\DoxyCodeLine{00812\ }
\DoxyCodeLine{00813\ \textcolor{comment}{//\ Function:\ silent\_async}}
\DoxyCodeLine{00814\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ \textcolor{keyword}{typename}...\ ArgsT>}
\DoxyCodeLine{00815\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a0461cb2c459c9f9473c72af06af9c701}{Executor::silent\_async}}(\mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ ArgsT\&\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}})\ \{}
\DoxyCodeLine{00816\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a1febfaa7a99cac8466263c58fd2a7c06}{named\_silent\_async}}(\textcolor{stringliteral}{"{}"{}},\ std::forward<F>(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}),\ std::forward<ArgsT>(\mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}})...);}
\DoxyCodeLine{00817\ \}}
\DoxyCodeLine{00818\ }
\DoxyCodeLine{00819\ \textcolor{comment}{//\ Function:\ this\_worker\_id}}
\DoxyCodeLine{00820\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classtf_1_1_executor_a6487d589cb1f6b078b69fd3bb1082345}{Executor::this\_worker\_id}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00821\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ \mbox{\hyperlink{classtf_1_1_executor_af71638d9b1c9446b86fa28bde9eb0b64}{\_wids}}.find(std::this\_thread::get\_id());}
\DoxyCodeLine{00822\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ ==\ \mbox{\hyperlink{classtf_1_1_executor_af71638d9b1c9446b86fa28bde9eb0b64}{\_wids}}.end()\ ?\ -\/1\ :\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{classtf_1_1_executor_a274fb0e5281f987d5df40950126c2a83}{\_workers}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}-\/>second].\_id);}
\DoxyCodeLine{00823\ \}}
\DoxyCodeLine{00824\ }
\DoxyCodeLine{00825\ \textcolor{comment}{//\ Procedure:\ \_spawn}}
\DoxyCodeLine{00826\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a8aee6c0ec55b4bfb3909601203e98514}{Executor::\_spawn}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}})\ \{}
\DoxyCodeLine{00827\ }
\DoxyCodeLine{00828\ \ \ std::mutex\ \mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}};}
\DoxyCodeLine{00829\ \ \ std::condition\_variable\ cond;}
\DoxyCodeLine{00830\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}=0;}
\DoxyCodeLine{00831\ }
\DoxyCodeLine{00832\ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \textcolor{keywordtype}{id}=0;\ \textcolor{keywordtype}{id}<\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}};\ ++\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}})\ \{}
\DoxyCodeLine{00833\ }
\DoxyCodeLine{00834\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a274fb0e5281f987d5df40950126c2a83}{\_workers}}[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}].\_id\ =\ \mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}};}
\DoxyCodeLine{00835\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a274fb0e5281f987d5df40950126c2a83}{\_workers}}[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}].\_vtm\ =\ \mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}};}
\DoxyCodeLine{00836\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a274fb0e5281f987d5df40950126c2a83}{\_workers}}[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}].\_executor\ =\ \textcolor{keyword}{this};}
\DoxyCodeLine{00837\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a274fb0e5281f987d5df40950126c2a83}{\_workers}}[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}].\_waiter\ =\ \&\mbox{\hyperlink{classtf_1_1_executor_ab92c39c4b59577cf4163c21ef2edb2f3}{\_notifier}}.\_waiters[\mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}}];}
\DoxyCodeLine{00838\ }
\DoxyCodeLine{00839\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a82388e638ae6304817bb5e1adc5ecdea}{\_threads}}.emplace\_back([\textcolor{keyword}{this}]\ (}
\DoxyCodeLine{00840\ \ \ \ \ \ \ Worker\&\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ std::mutex\&\ \mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}},\ std::condition\_variable\&\ cond,\ \textcolor{keywordtype}{size\_t}\&\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}}
\DoxyCodeLine{00841\ \ \ \ \ )\ -\/>\ \textcolor{keywordtype}{void}\ \{}
\DoxyCodeLine{00842\ }
\DoxyCodeLine{00843\ \ \ \ \ \ \ \textcolor{comment}{//\ enables\ the\ mapping}}
\DoxyCodeLine{00844\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00845\ \ \ \ \ \ \ \ \ std::scoped\_lock\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}});}
\DoxyCodeLine{00846\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_af71638d9b1c9446b86fa28bde9eb0b64}{\_wids}}[std::this\_thread::get\_id()]\ =\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.\_id;}
\DoxyCodeLine{00847\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}++;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ ==\ \mbox{\hyperlink{classtf_1_1_executor_a9d2d464ab2a84ecb3b3ea7747e8e276b}{num\_workers}}())\ \{}
\DoxyCodeLine{00848\ \ \ \ \ \ \ \ \ \ \ cond.notify\_one();}
\DoxyCodeLine{00849\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00850\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00851\ }
\DoxyCodeLine{00852\ \ \ \ \ \ \ \textcolor{comment}{//this\_worker().worker\ =\ \&w;}}
\DoxyCodeLine{00853\ }
\DoxyCodeLine{00854\ \ \ \ \ \ \ Node*\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00855\ }
\DoxyCodeLine{00856\ \ \ \ \ \ \ \textcolor{comment}{//\ must\ use\ 1\ as\ condition\ instead\ of\ !done}}
\DoxyCodeLine{00857\ \ \ \ \ \ \ \textcolor{keywordflow}{while}(1)\ \{}
\DoxyCodeLine{00858\ }
\DoxyCodeLine{00859\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ execute\ the\ tasks.}}
\DoxyCodeLine{00860\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a0b4f231e11016194980b14e76262c8a7}{\_exploit\_task}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}});}
\DoxyCodeLine{00861\ }
\DoxyCodeLine{00862\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ wait\ for\ tasks}}
\DoxyCodeLine{00863\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classtf_1_1_executor_a57f5105dc812d83f259ec8cab7c96228}{\_wait\_for\_task}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ ==\ \textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00864\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00865\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00866\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00867\ }
\DoxyCodeLine{00868\ \ \ \ \ \},\ std::ref(\mbox{\hyperlink{classtf_1_1_executor_a274fb0e5281f987d5df40950126c2a83}{\_workers}}[\textcolor{keywordtype}{id}]),\ std::ref(\mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}}),\ std::ref(cond),\ std::ref(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}));}
\DoxyCodeLine{00869\ \ \ \}}
\DoxyCodeLine{00870\ }
\DoxyCodeLine{00871\ \ \ std::unique\_lock<std::mutex>\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}});}
\DoxyCodeLine{00872\ \ \ cond.wait(\mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}},\ [\&]()\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}==\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}};\ \});}
\DoxyCodeLine{00873\ \}}
\DoxyCodeLine{00874\ }
\DoxyCodeLine{00875\ \textcolor{comment}{//\ Function:\ \_consume\_task}}
\DoxyCodeLine{00876\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a2e81517a3d0a9d0c7fc706e181e03bc2}{Executor::\_consume\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})\ \{}
\DoxyCodeLine{00877\ }
\DoxyCodeLine{00878\ \ \ std::uniform\_int\_distribution<size\_t>\ rdvtm(0,\ \mbox{\hyperlink{classtf_1_1_executor_a274fb0e5281f987d5df40950126c2a83}{\_workers}}.size()-\/1);}
\DoxyCodeLine{00879\ }
\DoxyCodeLine{00880\ \ \ \textcolor{keywordflow}{while}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>\_join\_counter\ !=\ 0)\ \{}
\DoxyCodeLine{00881\ \ \ \ \ exploit:}
\DoxyCodeLine{00882\ \ \ \ \ \textcolor{keywordflow}{if}(\textcolor{keyword}{auto}\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.\_wsq.pop();\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00883\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ad16165142908aca9444ea88e65040219}{\_invoke}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}});}
\DoxyCodeLine{00884\ \ \ \ \ \}}
\DoxyCodeLine{00885\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00886\ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ num\_steals\ =\ 0;}
\DoxyCodeLine{00887\ \ \ \ \ \ \ \textcolor{comment}{//size\_t\ num\_pauses\ =\ 0;}}
\DoxyCodeLine{00888\ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ max\_steals\ =\ ((\mbox{\hyperlink{classtf_1_1_executor_a274fb0e5281f987d5df40950126c2a83}{\_workers}}.size()\ +\ 1)\ <<\ 1);}
\DoxyCodeLine{00889\ }
\DoxyCodeLine{00890\ \ \ \ \ \ \ explore:}
\DoxyCodeLine{00891\ }
\DoxyCodeLine{00892\ \ \ \ \ \ \ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ (\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.\_id\ ==\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.\_vtm)\ ?\ \mbox{\hyperlink{classtf_1_1_executor_a477ca0d015675c7cfc544818f8758662}{\_wsq}}.steal()\ :\ \mbox{\hyperlink{classtf_1_1_executor_a274fb0e5281f987d5df40950126c2a83}{\_workers}}[\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.\_vtm].\_wsq.steal();}
\DoxyCodeLine{00893\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00894\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ad16165142908aca9444ea88e65040219}{\_invoke}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}});}
\DoxyCodeLine{00895\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ exploit;}
\DoxyCodeLine{00896\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00897\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>\_join\_counter\ !=\ 0)\{}
\DoxyCodeLine{00898\ }
\DoxyCodeLine{00899\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(num\_steals++\ >\ max\_steals)\ \{}
\DoxyCodeLine{00900\ \ \ \ \ \ \ \ \ \ \ std::this\_thread::yield();}
\DoxyCodeLine{00901\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00902\ }
\DoxyCodeLine{00903\ \ \ \ \ \ \ \ \ \textcolor{comment}{//std::this\_thread::yield();}}
\DoxyCodeLine{00904\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.\_vtm\ =\ rdvtm(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.\_rdgen);}
\DoxyCodeLine{00905\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ explore;}
\DoxyCodeLine{00906\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00907\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00908\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00909\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00910\ \ \ \ \ \}}
\DoxyCodeLine{00911\ \ \ \}}
\DoxyCodeLine{00912\ \}}
\DoxyCodeLine{00913\ }
\DoxyCodeLine{00914\ \textcolor{comment}{//\ Function:\ \_explore\_task}}
\DoxyCodeLine{00915\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ac5827e67b2b60c16259b45e14c6e97e0}{Executor::\_explore\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\&\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00916\ }
\DoxyCodeLine{00917\ \ \ \textcolor{comment}{//assert(\_workers[w].wsq.empty());}}
\DoxyCodeLine{00918\ \ \ \textcolor{comment}{//assert(!t);}}
\DoxyCodeLine{00919\ }
\DoxyCodeLine{00920\ \ \ \textcolor{keywordtype}{size\_t}\ num\_steals\ =\ 0;}
\DoxyCodeLine{00921\ \ \ \textcolor{keywordtype}{size\_t}\ num\_yields\ =\ 0;}
\DoxyCodeLine{00922\ \ \ \textcolor{keywordtype}{size\_t}\ max\_steals\ =\ ((\mbox{\hyperlink{classtf_1_1_executor_a274fb0e5281f987d5df40950126c2a83}{\_workers}}.size()\ +\ 1)\ <<\ 1);}
\DoxyCodeLine{00923\ }
\DoxyCodeLine{00924\ \ \ std::uniform\_int\_distribution<size\_t>\ rdvtm(0,\ \mbox{\hyperlink{classtf_1_1_executor_a274fb0e5281f987d5df40950126c2a83}{\_workers}}.size()-\/1);}
\DoxyCodeLine{00925\ }
\DoxyCodeLine{00926\ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00927\ \ \ \ \ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ (\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.\_id\ ==\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.\_vtm)\ ?\ \mbox{\hyperlink{classtf_1_1_executor_a477ca0d015675c7cfc544818f8758662}{\_wsq}}.steal()\ :\ \mbox{\hyperlink{classtf_1_1_executor_a274fb0e5281f987d5df40950126c2a83}{\_workers}}[\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.\_vtm].\_wsq.steal();}
\DoxyCodeLine{00928\ }
\DoxyCodeLine{00929\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00930\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00931\ \ \ \ \ \}}
\DoxyCodeLine{00932\ }
\DoxyCodeLine{00933\ \ \ \ \ \textcolor{keywordflow}{if}(num\_steals++\ >\ max\_steals)\ \{}
\DoxyCodeLine{00934\ \ \ \ \ \ \ std::this\_thread::yield();}
\DoxyCodeLine{00935\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(num\_yields++\ >\ 100)\ \{}
\DoxyCodeLine{00936\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00937\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00938\ \ \ \ \ \}}
\DoxyCodeLine{00939\ }
\DoxyCodeLine{00940\ \ \ \ \ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.\_vtm\ =\ rdvtm(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.\_rdgen);}
\DoxyCodeLine{00941\ \ \ \}\ \textcolor{keywordflow}{while}(!\mbox{\hyperlink{classtf_1_1_executor_af2832d44d52fade918cb25a6b2de9bdf}{\_done}});}
\DoxyCodeLine{00942\ }
\DoxyCodeLine{00943\ \}}
\DoxyCodeLine{00944\ }
\DoxyCodeLine{00945\ \textcolor{comment}{//\ Procedure:\ \_exploit\_task}}
\DoxyCodeLine{00946\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a0b4f231e11016194980b14e76262c8a7}{Executor::\_exploit\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\&\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00947\ }
\DoxyCodeLine{00948\ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00949\ }
\DoxyCodeLine{00950\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classtf_1_1_executor_aa987e2bddb791a78ece4e5693f018afb}{\_num\_actives}}.fetch\_add(1)\ ==\ 0\ \&\&\ \mbox{\hyperlink{classtf_1_1_executor_a904e5d4f22bf5a72bc0af2a4c5f32a3e}{\_num\_thieves}}\ ==\ 0)\ \{}
\DoxyCodeLine{00951\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab92c39c4b59577cf4163c21ef2edb2f3}{\_notifier}}.notify(\textcolor{keyword}{false});}
\DoxyCodeLine{00952\ \ \ \ \ \}}
\DoxyCodeLine{00953\ }
\DoxyCodeLine{00954\ \ \ \ \ \textcolor{keywordflow}{while}(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00955\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ad16165142908aca9444ea88e65040219}{\_invoke}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}});}
\DoxyCodeLine{00956\ \ \ \ \ \ \ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.\_wsq.pop();}
\DoxyCodeLine{00957\ \ \ \ \ \}}
\DoxyCodeLine{00958\ }
\DoxyCodeLine{00959\ \ \ \ \ -\/-\/\mbox{\hyperlink{classtf_1_1_executor_aa987e2bddb791a78ece4e5693f018afb}{\_num\_actives}};}
\DoxyCodeLine{00960\ \ \ \}}
\DoxyCodeLine{00961\ \}}
\DoxyCodeLine{00962\ }
\DoxyCodeLine{00963\ \textcolor{comment}{//\ Function:\ \_wait\_for\_task}}
\DoxyCodeLine{00964\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classtf_1_1_executor_a57f5105dc812d83f259ec8cab7c96228}{Executor::\_wait\_for\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ worker,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\&\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00965\ }
\DoxyCodeLine{00966\ \ \ wait\_for\_task:}
\DoxyCodeLine{00967\ }
\DoxyCodeLine{00968\ \ \ \textcolor{comment}{//assert(!t);}}
\DoxyCodeLine{00969\ }
\DoxyCodeLine{00970\ \ \ ++\mbox{\hyperlink{classtf_1_1_executor_a904e5d4f22bf5a72bc0af2a4c5f32a3e}{\_num\_thieves}};}
\DoxyCodeLine{00971\ }
\DoxyCodeLine{00972\ \ \ explore\_task:}
\DoxyCodeLine{00973\ }
\DoxyCodeLine{00974\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ac5827e67b2b60c16259b45e14c6e97e0}{\_explore\_task}}(worker,\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}});}
\DoxyCodeLine{00975\ }
\DoxyCodeLine{00976\ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00977\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classtf_1_1_executor_a904e5d4f22bf5a72bc0af2a4c5f32a3e}{\_num\_thieves}}.fetch\_sub(1)\ ==\ 1)\ \{}
\DoxyCodeLine{00978\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab92c39c4b59577cf4163c21ef2edb2f3}{\_notifier}}.notify(\textcolor{keyword}{false});}
\DoxyCodeLine{00979\ \ \ \ \ \}}
\DoxyCodeLine{00980\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00981\ \ \ \}}
\DoxyCodeLine{00982\ }
\DoxyCodeLine{00983\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab92c39c4b59577cf4163c21ef2edb2f3}{\_notifier}}.prepare\_wait(worker.\_waiter);}
\DoxyCodeLine{00984\ }
\DoxyCodeLine{00985\ \ \ \textcolor{comment}{//if(auto\ vtm\ =\ \_find\_vtm(me);\ vtm\ !=\ \_workers.size())\ \{}}
\DoxyCodeLine{00986\ \ \ \textcolor{keywordflow}{if}(!\mbox{\hyperlink{classtf_1_1_executor_a477ca0d015675c7cfc544818f8758662}{\_wsq}}.empty())\ \{}
\DoxyCodeLine{00987\ }
\DoxyCodeLine{00988\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab92c39c4b59577cf4163c21ef2edb2f3}{\_notifier}}.cancel\_wait(worker.\_waiter);}
\DoxyCodeLine{00989\ \ \ \ \ \textcolor{comment}{//t\ =\ (vtm\ ==\ me)\ ?\ \_wsq.steal()\ :\ \_workers[vtm].wsq.steal();}}
\DoxyCodeLine{00990\ }
\DoxyCodeLine{00991\ \ \ \ \ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ \mbox{\hyperlink{classtf_1_1_executor_a477ca0d015675c7cfc544818f8758662}{\_wsq}}.steal();\ \ \textcolor{comment}{//\ must\ steal\ here}}
\DoxyCodeLine{00992\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})\ \{}
\DoxyCodeLine{00993\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classtf_1_1_executor_a904e5d4f22bf5a72bc0af2a4c5f32a3e}{\_num\_thieves}}.fetch\_sub(1)\ ==\ 1)\ \{}
\DoxyCodeLine{00994\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab92c39c4b59577cf4163c21ef2edb2f3}{\_notifier}}.notify(\textcolor{keyword}{false});}
\DoxyCodeLine{00995\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00996\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00997\ \ \ \ \ \}}
\DoxyCodeLine{00998\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00999\ \ \ \ \ \ \ worker.\_vtm\ =\ worker.\_id;}
\DoxyCodeLine{01000\ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ explore\_task;}
\DoxyCodeLine{01001\ \ \ \ \ \}}
\DoxyCodeLine{01002\ \ \ \}}
\DoxyCodeLine{01003\ }
\DoxyCodeLine{01004\ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classtf_1_1_executor_af2832d44d52fade918cb25a6b2de9bdf}{\_done}})\ \{}
\DoxyCodeLine{01005\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab92c39c4b59577cf4163c21ef2edb2f3}{\_notifier}}.cancel\_wait(worker.\_waiter);}
\DoxyCodeLine{01006\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab92c39c4b59577cf4163c21ef2edb2f3}{\_notifier}}.notify(\textcolor{keyword}{true});}
\DoxyCodeLine{01007\ \ \ \ \ -\/-\/\mbox{\hyperlink{classtf_1_1_executor_a904e5d4f22bf5a72bc0af2a4c5f32a3e}{\_num\_thieves}};}
\DoxyCodeLine{01008\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01009\ \ \ \}}
\DoxyCodeLine{01010\ }
\DoxyCodeLine{01011\ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classtf_1_1_executor_a904e5d4f22bf5a72bc0af2a4c5f32a3e}{\_num\_thieves}}.fetch\_sub(1)\ ==\ 1)\ \{}
\DoxyCodeLine{01012\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classtf_1_1_executor_aa987e2bddb791a78ece4e5693f018afb}{\_num\_actives}})\ \{}
\DoxyCodeLine{01013\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab92c39c4b59577cf4163c21ef2edb2f3}{\_notifier}}.cancel\_wait(worker.\_waiter);}
\DoxyCodeLine{01014\ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ wait\_for\_task;}
\DoxyCodeLine{01015\ \ \ \ \ \}}
\DoxyCodeLine{01016\ \ \ \ \ \textcolor{comment}{//\ check\ all\ queues\ again}}
\DoxyCodeLine{01017\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\&\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}\ :\ \mbox{\hyperlink{classtf_1_1_executor_a274fb0e5281f987d5df40950126c2a83}{\_workers}})\ \{}
\DoxyCodeLine{01018\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.\_wsq.empty())\ \{}
\DoxyCodeLine{01019\ \ \ \ \ \ \ \ \ worker.\_vtm\ =\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}}.\_id;}
\DoxyCodeLine{01020\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab92c39c4b59577cf4163c21ef2edb2f3}{\_notifier}}.cancel\_wait(worker.\_waiter);}
\DoxyCodeLine{01021\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ wait\_for\_task;}
\DoxyCodeLine{01022\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01023\ \ \ \ \ \}}
\DoxyCodeLine{01024\ \ \ \}}
\DoxyCodeLine{01025\ }
\DoxyCodeLine{01026\ \ \ \textcolor{comment}{//\ Now\ I\ really\ need\ to\ relinquish\ my\ self\ to\ others}}
\DoxyCodeLine{01027\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab92c39c4b59577cf4163c21ef2edb2f3}{\_notifier}}.commit\_wait(worker.\_waiter);}
\DoxyCodeLine{01028\ }
\DoxyCodeLine{01029\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01030\ \}}
\DoxyCodeLine{01031\ }
\DoxyCodeLine{01032\ \textcolor{comment}{//\ Function:\ make\_observer}}
\DoxyCodeLine{01033\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Observer,\ \textcolor{keyword}{typename}...\ ArgsT>}
\DoxyCodeLine{01034\ std::shared\_ptr<Observer>\ \mbox{\hyperlink{classtf_1_1_executor_aff77def96ae740d648dd84e571237c83}{Executor::make\_observer}}(ArgsT\&\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}})\ \{}
\DoxyCodeLine{01035\ }
\DoxyCodeLine{01036\ \ \ \textcolor{keyword}{static\_assert}(}
\DoxyCodeLine{01037\ \ \ \ \ std::is\_base\_of\_v<ObserverInterface,\ Observer>,}
\DoxyCodeLine{01038\ \ \ \ \ \textcolor{stringliteral}{"{}Observer\ must\ be\ derived\ from\ ObserverInterface"{}}}
\DoxyCodeLine{01039\ \ \ );}
\DoxyCodeLine{01040\ }
\DoxyCodeLine{01041\ \ \ \textcolor{comment}{//\ use\ a\ local\ variable\ to\ mimic\ the\ constructor}}
\DoxyCodeLine{01042\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}\ =\ std::make\_shared<Observer>(std::forward<ArgsT>(\mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}})...);}
\DoxyCodeLine{01043\ }
\DoxyCodeLine{01044\ \ \ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}-\/>set\_up(\mbox{\hyperlink{classtf_1_1_executor_a274fb0e5281f987d5df40950126c2a83}{\_workers}}.size());}
\DoxyCodeLine{01045\ }
\DoxyCodeLine{01046\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a2065a53dc5cf19e0d12ff73ef8dd6a6a}{\_observers}}.emplace(std::static\_pointer\_cast<ObserverInterface>(\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}));}
\DoxyCodeLine{01047\ }
\DoxyCodeLine{01048\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}};}
\DoxyCodeLine{01049\ \}}
\DoxyCodeLine{01050\ }
\DoxyCodeLine{01051\ \textcolor{comment}{//\ Procedure:\ remove\_observer}}
\DoxyCodeLine{01052\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Observer>}
\DoxyCodeLine{01053\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a31081f492c376f7b798de0e430534531}{Executor::remove\_observer}}(std::shared\_ptr<Observer>\ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}})\ \{}
\DoxyCodeLine{01054\ }
\DoxyCodeLine{01055\ \ \ \textcolor{keyword}{static\_assert}(}
\DoxyCodeLine{01056\ \ \ \ \ std::is\_base\_of\_v<ObserverInterface,\ Observer>,}
\DoxyCodeLine{01057\ \ \ \ \ \textcolor{stringliteral}{"{}Observer\ must\ be\ derived\ from\ ObserverInterface"{}}}
\DoxyCodeLine{01058\ \ \ );}
\DoxyCodeLine{01059\ }
\DoxyCodeLine{01060\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a2065a53dc5cf19e0d12ff73ef8dd6a6a}{\_observers}}.erase(std::static\_pointer\_cast<ObserverInterface>(\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}));}
\DoxyCodeLine{01061\ \}}
\DoxyCodeLine{01062\ }
\DoxyCodeLine{01063\ \textcolor{comment}{//\ Function:\ num\_observers}}
\DoxyCodeLine{01064\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtf_1_1_executor_affec621aae59d73fc188ef454008fda2}{Executor::num\_observers}}()\ const\ noexcept\ \{}
\DoxyCodeLine{01065\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a2065a53dc5cf19e0d12ff73ef8dd6a6a}{\_observers}}.size();}
\DoxyCodeLine{01066\ \}}
\DoxyCodeLine{01067\ }
\DoxyCodeLine{01068\ \textcolor{comment}{//\ Procedure:\ \_schedule}}
\DoxyCodeLine{01069\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{Executor::\_schedule}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ worker,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node)\ \{}
\DoxyCodeLine{01070\ }
\DoxyCodeLine{01071\ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_state.fetch\_or(Node::READY,\ std::memory\_order\_release);}
\DoxyCodeLine{01072\ }
\DoxyCodeLine{01073\ \ \ \textcolor{comment}{//\ caller\ is\ a\ worker\ to\ this\ pool}}
\DoxyCodeLine{01074\ \ \ \textcolor{keywordflow}{if}(worker.\_executor\ ==\ \textcolor{keyword}{this})\ \{}
\DoxyCodeLine{01075\ \ \ \ \ worker.\_wsq.push(node);}
\DoxyCodeLine{01076\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01077\ \ \ \}}
\DoxyCodeLine{01078\ }
\DoxyCodeLine{01079\ \ \ \{}
\DoxyCodeLine{01080\ \ \ \ \ std::lock\_guard<std::mutex>\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{classtf_1_1_executor_ad031630f03103157f807d85a174d08cb}{\_wsq\_mutex}});}
\DoxyCodeLine{01081\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a477ca0d015675c7cfc544818f8758662}{\_wsq}}.push(node);}
\DoxyCodeLine{01082\ \ \ \}}
\DoxyCodeLine{01083\ }
\DoxyCodeLine{01084\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab92c39c4b59577cf4163c21ef2edb2f3}{\_notifier}}.notify(\textcolor{keyword}{false});}
\DoxyCodeLine{01085\ \}}
\DoxyCodeLine{01086\ }
\DoxyCodeLine{01087\ \textcolor{comment}{//\ Procedure:\ \_schedule}}
\DoxyCodeLine{01088\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{Executor::\_schedule}}(\mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node)\ \{}
\DoxyCodeLine{01089\ }
\DoxyCodeLine{01090\ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_state.fetch\_or(Node::READY,\ std::memory\_order\_release);}
\DoxyCodeLine{01091\ }
\DoxyCodeLine{01092\ \ \ \{}
\DoxyCodeLine{01093\ \ \ \ \ std::lock\_guard<std::mutex>\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{classtf_1_1_executor_ad031630f03103157f807d85a174d08cb}{\_wsq\_mutex}});}
\DoxyCodeLine{01094\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a477ca0d015675c7cfc544818f8758662}{\_wsq}}.push(node);}
\DoxyCodeLine{01095\ \ \ \}}
\DoxyCodeLine{01096\ }
\DoxyCodeLine{01097\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab92c39c4b59577cf4163c21ef2edb2f3}{\_notifier}}.notify(\textcolor{keyword}{false});}
\DoxyCodeLine{01098\ \}}
\DoxyCodeLine{01099\ }
\DoxyCodeLine{01100\ \textcolor{comment}{//\ Procedure:\ \_schedule}}
\DoxyCodeLine{01101\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{Executor::\_schedule}}(}
\DoxyCodeLine{01102\ \ \ \mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ worker,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classtf_1_1_small_vector}{SmallVector<Node*>}}\&\ \mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}}
\DoxyCodeLine{01103\ )\ \{}
\DoxyCodeLine{01104\ }
\DoxyCodeLine{01105\ \ \ \textcolor{comment}{//\ We\ need\ to\ cacth\ the\ node\ count\ to\ avoid\ accessing\ the\ nodes}}
\DoxyCodeLine{01106\ \ \ \textcolor{comment}{//\ vector\ while\ the\ parent\ topology\ is\ removed!}}
\DoxyCodeLine{01107\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ num\_nodes\ =\ \mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}.size();}
\DoxyCodeLine{01108\ }
\DoxyCodeLine{01109\ \ \ \textcolor{keywordflow}{if}(num\_nodes\ ==\ 0)\ \{}
\DoxyCodeLine{01110\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01111\ \ \ \}}
\DoxyCodeLine{01112\ }
\DoxyCodeLine{01113\ \ \ \textcolor{comment}{//\ make\ the\ node\ ready}}
\DoxyCodeLine{01114\ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<num\_nodes;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{01115\ \ \ \ \ \mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>\_state.fetch\_or(Node::READY,\ std::memory\_order\_release);}
\DoxyCodeLine{01116\ \ \ \}}
\DoxyCodeLine{01117\ }
\DoxyCodeLine{01118\ \ \ \textcolor{keywordflow}{if}(worker.\_executor\ ==\ \textcolor{keyword}{this})\ \{}
\DoxyCodeLine{01119\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<num\_nodes;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{01120\ \ \ \ \ \ \ worker.\_wsq.push(\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{01121\ \ \ \ \ \}}
\DoxyCodeLine{01122\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01123\ \ \ \}}
\DoxyCodeLine{01124\ }
\DoxyCodeLine{01125\ \ \ \{}
\DoxyCodeLine{01126\ \ \ \ \ std::lock\_guard<std::mutex>\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{classtf_1_1_executor_ad031630f03103157f807d85a174d08cb}{\_wsq\_mutex}});}
\DoxyCodeLine{01127\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ k=0;\ k<num\_nodes;\ ++k)\ \{}
\DoxyCodeLine{01128\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a477ca0d015675c7cfc544818f8758662}{\_wsq}}.push(\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}[k]);}
\DoxyCodeLine{01129\ \ \ \ \ \}}
\DoxyCodeLine{01130\ \ \ \}}
\DoxyCodeLine{01131\ }
\DoxyCodeLine{01132\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab92c39c4b59577cf4163c21ef2edb2f3}{\_notifier}}.notify\_n(num\_nodes);}
\DoxyCodeLine{01133\ \}}
\DoxyCodeLine{01134\ }
\DoxyCodeLine{01135\ \textcolor{comment}{//\ Procedure:\ \_schedule}}
\DoxyCodeLine{01136\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{Executor::\_schedule}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classtf_1_1_small_vector}{SmallVector<Node*>}}\&\ \mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}})\ \{}
\DoxyCodeLine{01137\ }
\DoxyCodeLine{01138\ \ \ \textcolor{comment}{//\ parent\ topology\ may\ be\ removed!}}
\DoxyCodeLine{01139\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ num\_nodes\ =\ \mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}.size();}
\DoxyCodeLine{01140\ }
\DoxyCodeLine{01141\ \ \ \textcolor{keywordflow}{if}(num\_nodes\ ==\ 0)\ \{}
\DoxyCodeLine{01142\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01143\ \ \ \}}
\DoxyCodeLine{01144\ }
\DoxyCodeLine{01145\ \ \ \textcolor{comment}{//\ make\ the\ node\ ready}}
\DoxyCodeLine{01146\ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<num\_nodes;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{01147\ \ \ \ \ \mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>\_state.fetch\_or(Node::READY,\ std::memory\_order\_release);}
\DoxyCodeLine{01148\ \ \ \}}
\DoxyCodeLine{01149\ }
\DoxyCodeLine{01150\ \ \ \{}
\DoxyCodeLine{01151\ \ \ \ \ std::lock\_guard<std::mutex>\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{classtf_1_1_executor_ad031630f03103157f807d85a174d08cb}{\_wsq\_mutex}});}
\DoxyCodeLine{01152\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ k=0;\ k<num\_nodes;\ ++k)\ \{}
\DoxyCodeLine{01153\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a477ca0d015675c7cfc544818f8758662}{\_wsq}}.push(\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}[k]);}
\DoxyCodeLine{01154\ \ \ \ \ \}}
\DoxyCodeLine{01155\ \ \ \}}
\DoxyCodeLine{01156\ }
\DoxyCodeLine{01157\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab92c39c4b59577cf4163c21ef2edb2f3}{\_notifier}}.notify\_n(num\_nodes);}
\DoxyCodeLine{01158\ \}}
\DoxyCodeLine{01159\ }
\DoxyCodeLine{01160\ \textcolor{comment}{//\ Procedure:\ \_invoke}}
\DoxyCodeLine{01161\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ad16165142908aca9444ea88e65040219}{Executor::\_invoke}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ worker,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node)\ \{}
\DoxyCodeLine{01162\ }
\DoxyCodeLine{01163\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacedetail_ac742e301ae0a908dc31e49ac3a31fcc5}{state}};}
\DoxyCodeLine{01164\ \ \ SmallVector<int>\ conds;}
\DoxyCodeLine{01165\ }
\DoxyCodeLine{01166\ \ \ \textcolor{comment}{//\ synchronize\ all\ outstanding\ memory\ operations\ caused\ by\ reordering}}
\DoxyCodeLine{01167\ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{01168\ \ \ \ \ \mbox{\hyperlink{namespacedetail_ac742e301ae0a908dc31e49ac3a31fcc5}{state}}\ =\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_state.load(std::memory\_order\_acquire);}
\DoxyCodeLine{01169\ \ \ \}\ \textcolor{keywordflow}{while}(!\ (state\ \&\ Node::READY));}
\DoxyCodeLine{01170\ }
\DoxyCodeLine{01171\ \ \ \textcolor{comment}{//\ unwind\ stack\ for\ deferred\ node}}
\DoxyCodeLine{01172\ \ \ \textcolor{keywordflow}{if}(state\ \&\ Node::DEFERRED)\ \{}
\DoxyCodeLine{01173\ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_state.fetch\_and(\string~Node::DEFERRED,\ std::memory\_order\_relaxed);}
\DoxyCodeLine{01174\ \ \ \ \ \textcolor{keywordflow}{goto}\ invoke\_epilogue;}
\DoxyCodeLine{01175\ \ \ \}}
\DoxyCodeLine{01176\ }
\DoxyCodeLine{01177\ \ \ \textcolor{comment}{//while(!(node-\/>\_state.load(std::memory\_order\_acquire)\ \&\ Node::READY));}}
\DoxyCodeLine{01178\ }
\DoxyCodeLine{01179\ \ \ invoke\_prologue:}
\DoxyCodeLine{01180\ }
\DoxyCodeLine{01181\ \ \ \textcolor{comment}{//\ no\ need\ to\ do\ other\ things\ if\ the\ topology\ is\ cancelled}}
\DoxyCodeLine{01182\ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_is\_cancelled())\ \{}
\DoxyCodeLine{01183\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a3a7524f412f7c7c328774135077f0498}{\_cancel\_invoke}}(worker,\ node);}
\DoxyCodeLine{01184\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01185\ \ \ \}}
\DoxyCodeLine{01186\ }
\DoxyCodeLine{01187\ \ \ \textcolor{comment}{//\ if\ acquiring\ semaphore(s)\ exists,\ acquire\ them\ first}}
\DoxyCodeLine{01188\ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_semaphores\ \&\&\ !\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_semaphores-\/>to\_acquire.empty())\ \{}
\DoxyCodeLine{01189\ \ \ \ \ SmallVector<Node*>\ \mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}};}
\DoxyCodeLine{01190\ \ \ \ \ \textcolor{keywordflow}{if}(!\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_acquire\_all(\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}}))\ \{}
\DoxyCodeLine{01191\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(worker,\ \mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__do_2parallel__preorder_2main_8cpp_a6a5c3f7e9d33dd3ab656f0191f83aa79}{nodes}});}
\DoxyCodeLine{01192\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01193\ \ \ \ \ \}}
\DoxyCodeLine{01194\ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_state.fetch\_or(Node::ACQUIRED,\ std::memory\_order\_release);}
\DoxyCodeLine{01195\ \ \ \}}
\DoxyCodeLine{01196\ }
\DoxyCodeLine{01197\ \ \ \textcolor{comment}{//\ condition\ task}}
\DoxyCodeLine{01198\ \ \ \textcolor{comment}{//int\ cond\ =\ -\/1;}}
\DoxyCodeLine{01199\ \ \ \textcolor{comment}{//SmallVector<int>\ conds\ =\ \{\ -\/1\ \};}}
\DoxyCodeLine{01200\ }
\DoxyCodeLine{01201\ \ \ \textcolor{comment}{//\ switch\ is\ faster\ than\ nested\ if-\/else\ due\ to\ jump\ table}}
\DoxyCodeLine{01202\ \ \ \textcolor{keywordflow}{switch}(\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_handle.index())\ \{}
\DoxyCodeLine{01203\ \ \ \ \ \textcolor{comment}{//\ static\ task}}
\DoxyCodeLine{01204\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{classtf_1_1_node_a2ac09057e2116247343ab716dd7788b0}{Node::STATIC}}:\{}
\DoxyCodeLine{01205\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ac243d2a08b5a4a75dd440dc063b886ce}{\_invoke\_static\_task}}(worker,\ node);}
\DoxyCodeLine{01206\ \ \ \ \ \}}
\DoxyCodeLine{01207\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01208\ }
\DoxyCodeLine{01209\ \ \ \ \ \textcolor{comment}{//\ dynamic\ task}}
\DoxyCodeLine{01210\ \ \ \ \ \textcolor{keywordflow}{case}\ Node::DYNAMIC:\ \{}
\DoxyCodeLine{01211\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a4a000baf70b108201e3787787309c272}{\_invoke\_dynamic\_task}}(worker,\ node);}
\DoxyCodeLine{01212\ \ \ \ \ \}}
\DoxyCodeLine{01213\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01214\ }
\DoxyCodeLine{01215\ \ \ \ \ \textcolor{comment}{//\ condition\ task}}
\DoxyCodeLine{01216\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{classtf_1_1_node_a4b49adbdfc96dddb4e3053f171254a2a}{Node::CONDITION}}:\ \{}
\DoxyCodeLine{01217\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_afa6be6aab23ff4b2a293a2245818916d}{\_invoke\_condition\_task}}(worker,\ node,\ conds);}
\DoxyCodeLine{01218\ \ \ \ \ \}}
\DoxyCodeLine{01219\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01220\ }
\DoxyCodeLine{01221\ \ \ \ \ \textcolor{comment}{//\ multi-\/condition\ task}}
\DoxyCodeLine{01222\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{classtf_1_1_node_aaf76a24c53ace59d03fd01b496112e05}{Node::MULTI\_CONDITION}}:\ \{}
\DoxyCodeLine{01223\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a19b3f10d4eab40143d3f76b946ded252}{\_invoke\_multi\_condition\_task}}(worker,\ node,\ conds);}
\DoxyCodeLine{01224\ \ \ \ \ \}}
\DoxyCodeLine{01225\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01226\ }
\DoxyCodeLine{01227\ \ \ \ \ \textcolor{comment}{//\ module\ task}}
\DoxyCodeLine{01228\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{classtf_1_1_node_a2d7a32811951bc382d473d36d34ae66c}{Node::MODULE}}:\ \{}
\DoxyCodeLine{01229\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesource__module_1_1render_a3931afb09a030d18e73ddd6f9098cbc6a43fff3df3fc0b3417c86dc3040fb2d86}{deferred}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01230\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a429fed7f063b23a633e1657a43f1fd0e}{\_invoke\_module\_task}}(worker,\ node,\ deferred);}
\DoxyCodeLine{01231\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(deferred)\ \{}
\DoxyCodeLine{01232\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01233\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01234\ \ \ \ \ \}}
\DoxyCodeLine{01235\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01236\ }
\DoxyCodeLine{01237\ \ \ \ \ \textcolor{comment}{//\ async\ task}}
\DoxyCodeLine{01238\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{classtf_1_1_node_a94a2a7c35bacc662a45912d0dfedff09}{Node::ASYNC}}:\ \{}
\DoxyCodeLine{01239\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a1d1b9bf8ed24dffff65d860ef1627ef3}{\_invoke\_async\_task}}(worker,\ node);}
\DoxyCodeLine{01240\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a42e7db3fc43e1c5479e30e8d83da9e74}{\_tear\_down\_async}}(node);}
\DoxyCodeLine{01241\ \ \ \ \ \ \ \mbox{\hyperlink{sugar_8h_a6b8c693f1c0454a1128432b746966c17}{return}}\ ;}
\DoxyCodeLine{01242\ \ \ \ \ \}}
\DoxyCodeLine{01243\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01244\ }
\DoxyCodeLine{01245\ \ \ \ \ \textcolor{comment}{//\ silent\ async\ task}}
\DoxyCodeLine{01246\ \ \ \ \ \textcolor{keywordflow}{case}\ Node::SILENT\_ASYNC:\ \{}
\DoxyCodeLine{01247\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ae2bb8ef1456ec6414e46d7ed77628bd9}{\_invoke\_silent\_async\_task}}(worker,\ node);}
\DoxyCodeLine{01248\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a42e7db3fc43e1c5479e30e8d83da9e74}{\_tear\_down\_async}}(node);}
\DoxyCodeLine{01249\ \ \ \ \ \ \ \mbox{\hyperlink{sugar_8h_a6b8c693f1c0454a1128432b746966c17}{return}}\ ;}
\DoxyCodeLine{01250\ \ \ \ \ \}}
\DoxyCodeLine{01251\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01252\ }
\DoxyCodeLine{01253\ \ \ \ \ \textcolor{comment}{//\ cudaflow\ task}}
\DoxyCodeLine{01254\ \ \ \ \ \textcolor{keywordflow}{case}\ Node::CUDAFLOW:\ \{}
\DoxyCodeLine{01255\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ae4be3b787a3c6eaaf18589a25e9c844f}{\_invoke\_cudaflow\_task}}(worker,\ node);}
\DoxyCodeLine{01256\ \ \ \ \ \}}
\DoxyCodeLine{01257\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01258\ }
\DoxyCodeLine{01259\ \ \ \ \ \textcolor{comment}{//\ syclflow\ task}}
\DoxyCodeLine{01260\ \ \ \ \ \textcolor{keywordflow}{case}\ Node::SYCLFLOW:\ \{}
\DoxyCodeLine{01261\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ae7254966d36c26cdf59a11bc7bd4d43f}{\_invoke\_syclflow\_task}}(worker,\ node);}
\DoxyCodeLine{01262\ \ \ \ \ \}}
\DoxyCodeLine{01263\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01264\ }
\DoxyCodeLine{01265\ \ \ \ \ \textcolor{comment}{//\ runtime\ task}}
\DoxyCodeLine{01266\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{classtf_1_1_node_af250f1aeb4b4cb261f2f8f1eebd8d846}{Node::RUNTIME}}:\ \{}
\DoxyCodeLine{01267\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a324dfe88e4b227fce0fdc76b667c40ce}{\_invoke\_runtime\_task}}(worker,\ node);}
\DoxyCodeLine{01268\ \ \ \ \ \}}
\DoxyCodeLine{01269\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01270\ }
\DoxyCodeLine{01271\ \ \ \ \ \textcolor{comment}{//\ monostate\ (placeholder)}}
\DoxyCodeLine{01272\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01273\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01274\ \ \ \}}
\DoxyCodeLine{01275\ }
\DoxyCodeLine{01276\ \ \ invoke\_epilogue:}
\DoxyCodeLine{01277\ }
\DoxyCodeLine{01278\ \ \ \textcolor{comment}{//\ if\ releasing\ semaphores\ exist,\ release\ them}}
\DoxyCodeLine{01279\ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_semaphores\ \&\&\ !\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_semaphores-\/>to\_release.empty())\ \{}
\DoxyCodeLine{01280\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(worker,\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_release\_all());}
\DoxyCodeLine{01281\ \ \ \}}
\DoxyCodeLine{01282\ }
\DoxyCodeLine{01283\ \ \ \textcolor{comment}{//\ We\ MUST\ recover\ the\ dependency\ since\ the\ graph\ may\ have\ cycles.}}
\DoxyCodeLine{01284\ \ \ \textcolor{comment}{//\ This\ must\ be\ done\ before\ scheduling\ the\ successors,\ otherwise\ this\ might\ cause}}
\DoxyCodeLine{01285\ \ \ \textcolor{comment}{//\ race\ condition\ on\ the\ \_dependents}}
\DoxyCodeLine{01286\ \ \ \textcolor{keywordflow}{if}((\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_state.load(std::memory\_order\_relaxed)\ \&\ Node::CONDITIONED))\ \{}
\DoxyCodeLine{01287\ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_join\_counter\ =\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>num\_strong\_dependents();}
\DoxyCodeLine{01288\ \ \ \}}
\DoxyCodeLine{01289\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01290\ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_join\_counter\ =\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>num\_dependents();}
\DoxyCodeLine{01291\ \ \ \}}
\DoxyCodeLine{01292\ }
\DoxyCodeLine{01293\ \ \ \textcolor{comment}{//\ acquire\ the\ parent\ flow\ counter}}
\DoxyCodeLine{01294\ \ \ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}\ =\ (\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_parent)\ ?\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_parent-\/>\_join\_counter\ :}
\DoxyCodeLine{01295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_topology-\/>\_join\_counter;}
\DoxyCodeLine{01296\ }
\DoxyCodeLine{01297\ \ \ Node*\ cache\ \{\textcolor{keyword}{nullptr}\};}
\DoxyCodeLine{01298\ }
\DoxyCodeLine{01299\ \ \ \textcolor{comment}{//\ At\ this\ point,\ the\ node\ storage\ might\ be\ destructed\ (to\ be\ verified)}}
\DoxyCodeLine{01300\ \ \ \textcolor{comment}{//\ case\ 1:\ non-\/condition\ task}}
\DoxyCodeLine{01301\ \ \ \textcolor{keywordflow}{switch}(\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_handle.index())\ \{}
\DoxyCodeLine{01302\ }
\DoxyCodeLine{01303\ \ \ \ \ \textcolor{comment}{//\ condition\ and\ multi-\/condition\ tasks}}
\DoxyCodeLine{01304\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{classtf_1_1_node_a4b49adbdfc96dddb4e3053f171254a2a}{Node::CONDITION}}:}
\DoxyCodeLine{01305\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{classtf_1_1_node_aaf76a24c53ace59d03fd01b496112e05}{Node::MULTI\_CONDITION}}:\ \{}
\DoxyCodeLine{01306\ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\ cond\ :\ conds)\ \{}
\DoxyCodeLine{01307\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(cond\ >=\ 0\ \&\&\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(cond)\ <\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_successors.size())\ \{}
\DoxyCodeLine{01308\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_successors[cond];}
\DoxyCodeLine{01309\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ zeroing\ the\ join\ counter\ for\ invariant}}
\DoxyCodeLine{01310\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>\_join\_counter.store(0,\ std::memory\_order\_relaxed);}
\DoxyCodeLine{01311\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}.fetch\_add(1);}
\DoxyCodeLine{01312\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(cache)\ \{}
\DoxyCodeLine{01313\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(worker,\ cache);}
\DoxyCodeLine{01314\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01315\ \ \ \ \ \ \ \ \ \ \ cache\ =\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}};}
\DoxyCodeLine{01316\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01317\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01318\ \ \ \ \ \}}
\DoxyCodeLine{01319\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01320\ }
\DoxyCodeLine{01321\ \ \ \ \ \textcolor{comment}{//\ non-\/condition\ task}}
\DoxyCodeLine{01322\ \ \ \ \ \textcolor{keywordflow}{default}:\ \{}
\DoxyCodeLine{01323\ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_successors.size();\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{01324\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(-\/-\/(\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_successors[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]-\/>\_join\_counter)\ ==\ 0)\ \{}
\DoxyCodeLine{01325\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}.fetch\_add(1);}
\DoxyCodeLine{01326\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(cache)\ \{}
\DoxyCodeLine{01327\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(worker,\ cache);}
\DoxyCodeLine{01328\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01329\ \ \ \ \ \ \ \ \ \ \ cache\ =\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_successors[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}];}
\DoxyCodeLine{01330\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01331\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01332\ \ \ \ \ \}}
\DoxyCodeLine{01333\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01334\ \ \ \}}
\DoxyCodeLine{01335\ }
\DoxyCodeLine{01336\ \ \ \textcolor{comment}{//\ tear\_down\ the\ invoke}}
\DoxyCodeLine{01337\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a17fe8e0f32892cf2848611bca7566378}{\_tear\_down\_invoke}}(worker,\ node);}
\DoxyCodeLine{01338\ }
\DoxyCodeLine{01339\ \ \ \textcolor{comment}{//\ perform\ tail\ recursion\ elimination\ for\ the\ right-\/most\ child\ to\ reduce}}
\DoxyCodeLine{01340\ \ \ \textcolor{comment}{//\ the\ number\ of\ expensive\ pop/push\ operations\ through\ the\ task\ queue}}
\DoxyCodeLine{01341\ \ \ \textcolor{keywordflow}{if}(cache)\ \{}
\DoxyCodeLine{01342\ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}\ =\ cache;}
\DoxyCodeLine{01343\ \ \ \ \ \textcolor{comment}{//node-\/>\_state.fetch\_or(Node::READY,\ std::memory\_order\_release);}}
\DoxyCodeLine{01344\ \ \ \ \ \textcolor{keywordflow}{goto}\ invoke\_prologue;}
\DoxyCodeLine{01345\ \ \ \}}
\DoxyCodeLine{01346\ \}}
\DoxyCodeLine{01347\ }
\DoxyCodeLine{01348\ \textcolor{comment}{//\ Procedure:\ \_tear\_down\_async}}
\DoxyCodeLine{01349\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a42e7db3fc43e1c5479e30e8d83da9e74}{Executor::\_tear\_down\_async}}(\mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node)\ \{}
\DoxyCodeLine{01350\ \ \ \textcolor{keywordflow}{if}(node-\/>\_parent)\ \{}
\DoxyCodeLine{01351\ \ \ \ \ node-\/>\_parent-\/>\_join\_counter.fetch\_sub(1);}
\DoxyCodeLine{01352\ \ \ \}}
\DoxyCodeLine{01353\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01354\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a08945917285cd57d33efc99530fbd384}{\_decrement\_topology\_and\_notify}}();}
\DoxyCodeLine{01355\ \ \ \}}
\DoxyCodeLine{01356\ \ \ node\_pool.recycle(node);}
\DoxyCodeLine{01357\ \}}
\DoxyCodeLine{01358\ }
\DoxyCodeLine{01359\ \textcolor{comment}{//\ Proecdure:\ \_tear\_down\_invoke}}
\DoxyCodeLine{01360\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a17fe8e0f32892cf2848611bca7566378}{Executor::\_tear\_down\_invoke}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ worker,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node)\ \{}
\DoxyCodeLine{01361\ \ \ \textcolor{comment}{//\ we\ must\ check\ parent\ first\ before\ substracting\ the\ join\ counter,}}
\DoxyCodeLine{01362\ \ \ \textcolor{comment}{//\ or\ it\ can\ introduce\ data\ race}}
\DoxyCodeLine{01363\ \ \ \textcolor{keywordflow}{if}(\textcolor{keyword}{auto}\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}\ =\ node-\/>\_parent;\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{01364\ \ \ \ \ \textcolor{keywordflow}{if}(node-\/>\_topology-\/>\_join\_counter.fetch\_sub(1)\ ==\ 1)\ \{}
\DoxyCodeLine{01365\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a76be884d38d1bb8f9b8bba488c901b4b}{\_tear\_down\_topology}}(worker,\ node-\/>\_topology);}
\DoxyCodeLine{01366\ \ \ \ \ \}}
\DoxyCodeLine{01367\ \ \ \}}
\DoxyCodeLine{01368\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01369\ \ \ \ \ \textcolor{comment}{//\ prefetch\ the\ deferred\ status,\ as\ subtracting\ the\ join\ counter\ can}}
\DoxyCodeLine{01370\ \ \ \ \ \textcolor{comment}{//\ immediately\ cause\ the\ other\ worker\ to\ release\ the\ subflow}}
\DoxyCodeLine{01371\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacesource__module_1_1render_a3931afb09a030d18e73ddd6f9098cbc6a43fff3df3fc0b3417c86dc3040fb2d86}{deferred}}\ =\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}-\/>\_state.load(std::memory\_order\_relaxed)\ \&\ Node::DEFERRED;}
\DoxyCodeLine{01372\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}}-\/>\_join\_counter.fetch\_sub(1)\ ==\ 1\ \&\&\ deferred)\ \{}
\DoxyCodeLine{01373\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(worker,\ \mbox{\hyperlink{ittnotify__static_8h_ab242ec323769be8fbbf53617a69d14ff}{parent}});}
\DoxyCodeLine{01374\ \ \ \ \ \}}
\DoxyCodeLine{01375\ \ \ \}}
\DoxyCodeLine{01376\ \}}
\DoxyCodeLine{01377\ }
\DoxyCodeLine{01378\ \textcolor{comment}{//\ Procedure:\ \_cancel\_invoke}}
\DoxyCodeLine{01379\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a3a7524f412f7c7c328774135077f0498}{Executor::\_cancel\_invoke}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ worker,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node)\ \{}
\DoxyCodeLine{01380\ }
\DoxyCodeLine{01381\ \ \ \textcolor{keywordflow}{switch}(node-\/>\_handle.index())\ \{}
\DoxyCodeLine{01382\ \ \ \ \ \textcolor{comment}{//\ async\ task\ needs\ to\ carry\ out\ the\ promise}}
\DoxyCodeLine{01383\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{classtf_1_1_node_a94a2a7c35bacc662a45912d0dfedff09}{Node::ASYNC}}:}
\DoxyCodeLine{01384\ \ \ \ \ \ \ std::get\_if<Node::Async>(\&(node-\/>\_handle))-\/>work(\textcolor{keyword}{true});}
\DoxyCodeLine{01385\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a42e7db3fc43e1c5479e30e8d83da9e74}{\_tear\_down\_async}}(node);}
\DoxyCodeLine{01386\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01387\ }
\DoxyCodeLine{01388\ \ \ \ \ \textcolor{comment}{//\ silent\ async\ doesn't\ need\ to\ carry\ out\ the\ promise}}
\DoxyCodeLine{01389\ \ \ \ \ \textcolor{keywordflow}{case}\ Node::SILENT\_ASYNC:}
\DoxyCodeLine{01390\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a42e7db3fc43e1c5479e30e8d83da9e74}{\_tear\_down\_async}}(node);}
\DoxyCodeLine{01391\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01392\ }
\DoxyCodeLine{01393\ \ \ \ \ \textcolor{comment}{//\ tear\ down\ topology\ if\ the\ node\ is\ the\ last\ leaf}}
\DoxyCodeLine{01394\ \ \ \ \ \textcolor{keywordflow}{default}:\ \{}
\DoxyCodeLine{01395\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a17fe8e0f32892cf2848611bca7566378}{\_tear\_down\_invoke}}(worker,\ node);}
\DoxyCodeLine{01396\ \ \ \ \ \}}
\DoxyCodeLine{01397\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01398\ \ \ \}}
\DoxyCodeLine{01399\ \}}
\DoxyCodeLine{01400\ }
\DoxyCodeLine{01401\ \textcolor{comment}{//\ Procedure:\ \_observer\_prologue}}
\DoxyCodeLine{01402\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ae023614977a19def9e04cf7212eab65b}{Executor::\_observer\_prologue}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ worker,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node)\ \{}
\DoxyCodeLine{01403\ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\&\ \mbox{\hyperlink{test__basics_8cpp_ae362ef40752341c76d5edd1d99e46918}{observer}}\ :\ \mbox{\hyperlink{classtf_1_1_executor_a2065a53dc5cf19e0d12ff73ef8dd6a6a}{\_observers}})\ \{}
\DoxyCodeLine{01404\ \ \ \ \ \mbox{\hyperlink{test__basics_8cpp_ae362ef40752341c76d5edd1d99e46918}{observer}}-\/>on\_entry(\mbox{\hyperlink{classtf_1_1_worker_view}{WorkerView}}(worker),\ \mbox{\hyperlink{classtf_1_1_task_view}{TaskView}}(*node));}
\DoxyCodeLine{01405\ \ \ \}}
\DoxyCodeLine{01406\ \}}
\DoxyCodeLine{01407\ }
\DoxyCodeLine{01408\ \textcolor{comment}{//\ Procedure:\ \_observer\_epilogue}}
\DoxyCodeLine{01409\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a9cd8c1a72af4477bc0f9575b68ffb16a}{Executor::\_observer\_epilogue}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ worker,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node)\ \{}
\DoxyCodeLine{01410\ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\&\ \mbox{\hyperlink{test__basics_8cpp_ae362ef40752341c76d5edd1d99e46918}{observer}}\ :\ \mbox{\hyperlink{classtf_1_1_executor_a2065a53dc5cf19e0d12ff73ef8dd6a6a}{\_observers}})\ \{}
\DoxyCodeLine{01411\ \ \ \ \ \mbox{\hyperlink{test__basics_8cpp_ae362ef40752341c76d5edd1d99e46918}{observer}}-\/>on\_exit(WorkerView(worker),\ TaskView(*node));}
\DoxyCodeLine{01412\ \ \ \}}
\DoxyCodeLine{01413\ \}}
\DoxyCodeLine{01414\ }
\DoxyCodeLine{01415\ \textcolor{comment}{//\ Procedure:\ \_invoke\_static\_task}}
\DoxyCodeLine{01416\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ac243d2a08b5a4a75dd440dc063b886ce}{Executor::\_invoke\_static\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ worker,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node)\ \{}
\DoxyCodeLine{01417\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ae023614977a19def9e04cf7212eab65b}{\_observer\_prologue}}(worker,\ node);}
\DoxyCodeLine{01418\ \ \ std::get\_if<Node::Static>(\&\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_handle)-\/>work();}
\DoxyCodeLine{01419\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a9cd8c1a72af4477bc0f9575b68ffb16a}{\_observer\_epilogue}}(worker,\ node);}
\DoxyCodeLine{01420\ \}}
\DoxyCodeLine{01421\ }
\DoxyCodeLine{01422\ \textcolor{comment}{//\ Procedure:\ \_invoke\_dynamic\_task}}
\DoxyCodeLine{01423\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a4a000baf70b108201e3787787309c272}{Executor::\_invoke\_dynamic\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node)\ \{}
\DoxyCodeLine{01424\ }
\DoxyCodeLine{01425\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ae023614977a19def9e04cf7212eab65b}{\_observer\_prologue}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ node);}
\DoxyCodeLine{01426\ }
\DoxyCodeLine{01427\ \ \ \textcolor{keyword}{auto}\ handle\ =\ std::get\_if<Node::Dynamic>(\&node-\/>\_handle);}
\DoxyCodeLine{01428\ }
\DoxyCodeLine{01429\ \ \ handle-\/>subgraph.\_clear();}
\DoxyCodeLine{01430\ }
\DoxyCodeLine{01431\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a16f3b433d11b0607ff9824676c178027}{Subflow}}\ sf(*\textcolor{keyword}{this},\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ node,\ handle-\/>subgraph);}
\DoxyCodeLine{01432\ }
\DoxyCodeLine{01433\ \ \ handle-\/>work(sf);}
\DoxyCodeLine{01434\ }
\DoxyCodeLine{01435\ \ \ \textcolor{keywordflow}{if}(sf.\_joinable)\ \{}
\DoxyCodeLine{01436\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a5a5888a261a5cead22913beddfa7fa82}{\_invoke\_dynamic\_task\_internal}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ node,\ handle-\/>subgraph);}
\DoxyCodeLine{01437\ \ \ \}}
\DoxyCodeLine{01438\ }
\DoxyCodeLine{01439\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a9cd8c1a72af4477bc0f9575b68ffb16a}{\_observer\_epilogue}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ node);}
\DoxyCodeLine{01440\ \}}
\DoxyCodeLine{01441\ }
\DoxyCodeLine{01442\ \textcolor{comment}{//\ Procedure:\ \_invoke\_dynamic\_task\_external}}
\DoxyCodeLine{01443\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_afdd10d937c907e5a2801724b7a7acda7}{Executor::\_invoke\_dynamic\_task\_external}}(}
\DoxyCodeLine{01444\ \ \ \mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{classtf_1_1_graph}{Graph}}\&\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ \textcolor{keywordtype}{bool}\ detach}
\DoxyCodeLine{01445\ )\ \{}
\DoxyCodeLine{01446\ }
\DoxyCodeLine{01447\ \ \ \textcolor{comment}{//\ graph\ is\ empty\ and\ has\ no\ async\ tasks}}
\DoxyCodeLine{01448\ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.empty()\ \&\&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>\_join\_counter\ ==\ 0)\ \{}
\DoxyCodeLine{01449\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01450\ \ \ \}}
\DoxyCodeLine{01451\ }
\DoxyCodeLine{01452\ \ \ \mbox{\hyperlink{classtf_1_1_small_vector}{SmallVector<Node*>}}\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}};}
\DoxyCodeLine{01453\ }
\DoxyCodeLine{01454\ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ :\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.\_nodes)\ \{}
\DoxyCodeLine{01455\ }
\DoxyCodeLine{01456\ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>\_topology\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>\_topology;}
\DoxyCodeLine{01457\ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>\_state.store(0,\ std::memory\_order\_relaxed);}
\DoxyCodeLine{01458\ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>\_set\_up\_join\_counter();}
\DoxyCodeLine{01459\ }
\DoxyCodeLine{01460\ \ \ \ \ \textcolor{keywordflow}{if}(detach)\ \{}
\DoxyCodeLine{01461\ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>\_parent\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01462\ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>\_state.fetch\_or(Node::DETACHED,\ std::memory\_order\_relaxed);}
\DoxyCodeLine{01463\ \ \ \ \ \}}
\DoxyCodeLine{01464\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01465\ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>\_parent\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{01466\ \ \ \ \ \}}
\DoxyCodeLine{01467\ }
\DoxyCodeLine{01468\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>num\_dependents()\ ==\ 0)\ \{}
\DoxyCodeLine{01469\ \ \ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.push\_back(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{01470\ \ \ \ \ \}}
\DoxyCodeLine{01471\ \ \ \}}
\DoxyCodeLine{01472\ }
\DoxyCodeLine{01473\ \ \ \textcolor{comment}{//\ detach\ here}}
\DoxyCodeLine{01474\ \ \ \textcolor{keywordflow}{if}(detach)\ \{}
\DoxyCodeLine{01475\ }
\DoxyCodeLine{01476\ \ \ \ \ \{}
\DoxyCodeLine{01477\ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>\_topology-\/>\_taskflow.\_mutex);}
\DoxyCodeLine{01478\ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>\_topology-\/>\_taskflow.\_graph.\_merge(std::move(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}));}
\DoxyCodeLine{01479\ \ \ \ \ \}}
\DoxyCodeLine{01480\ }
\DoxyCodeLine{01481\ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>\_topology-\/>\_join\_counter.fetch\_add(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.size());}
\DoxyCodeLine{01482\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}});}
\DoxyCodeLine{01483\ \ \ \}}
\DoxyCodeLine{01484\ \ \ \textcolor{comment}{//\ join\ here}}
\DoxyCodeLine{01485\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01486\ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>\_join\_counter.fetch\_add(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.size());}
\DoxyCodeLine{01487\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}});}
\DoxyCodeLine{01488\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a2e81517a3d0a9d0c7fc706e181e03bc2}{\_consume\_task}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}});}
\DoxyCodeLine{01489\ \ \ \}}
\DoxyCodeLine{01490\ \}}
\DoxyCodeLine{01491\ }
\DoxyCodeLine{01492\ \textcolor{comment}{//\ Procedure:\ \_invoke\_dynamic\_task\_internal}}
\DoxyCodeLine{01493\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a5a5888a261a5cead22913beddfa7fa82}{Executor::\_invoke\_dynamic\_task\_internal}}(}
\DoxyCodeLine{01494\ \ \ \mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{classtf_1_1_graph}{Graph}}\&\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}}
\DoxyCodeLine{01495\ )\ \{}
\DoxyCodeLine{01496\ }
\DoxyCodeLine{01497\ \ \ \textcolor{comment}{//\ graph\ is\ empty\ and\ has\ no\ async\ tasks}}
\DoxyCodeLine{01498\ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.empty()\ \&\&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>\_join\_counter\ ==\ 0)\ \{}
\DoxyCodeLine{01499\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01500\ \ \ \}}
\DoxyCodeLine{01501\ }
\DoxyCodeLine{01502\ \ \ \mbox{\hyperlink{classtf_1_1_small_vector}{SmallVector<Node*>}}\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}};}
\DoxyCodeLine{01503\ }
\DoxyCodeLine{01504\ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ :\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.\_nodes)\ \{}
\DoxyCodeLine{01505\ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>\_topology\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>\_topology;}
\DoxyCodeLine{01506\ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>\_state.store(0,\ std::memory\_order\_relaxed);}
\DoxyCodeLine{01507\ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>\_set\_up\_join\_counter();}
\DoxyCodeLine{01508\ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>\_parent\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{01509\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>num\_dependents()\ ==\ 0)\ \{}
\DoxyCodeLine{01510\ \ \ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.push\_back(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{01511\ \ \ \ \ \}}
\DoxyCodeLine{01512\ \ \ \}}
\DoxyCodeLine{01513\ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>\_join\_counter.fetch\_add(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.size());}
\DoxyCodeLine{01514\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}});}
\DoxyCodeLine{01515\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a2e81517a3d0a9d0c7fc706e181e03bc2}{\_consume\_task}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}});}
\DoxyCodeLine{01516\ \}}
\DoxyCodeLine{01517\ }
\DoxyCodeLine{01518\ \textcolor{comment}{//\ Procedure:\ \_invoke\_module\_task\_internal}}
\DoxyCodeLine{01519\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a7338106d893b2b7cc223376878a48d64}{Executor::\_invoke\_module\_task\_internal}}(}
\DoxyCodeLine{01520\ \ \ \mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{classtf_1_1_graph}{Graph}}\&\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}},\ \textcolor{keywordtype}{bool}\&\ deferred}
\DoxyCodeLine{01521\ )\ \{}
\DoxyCodeLine{01522\ }
\DoxyCodeLine{01523\ \ \ \textcolor{comment}{//\ graph\ is\ empty\ and\ has\ no\ async\ tasks}}
\DoxyCodeLine{01524\ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.empty())\ \{}
\DoxyCodeLine{01525\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01526\ \ \ \}}
\DoxyCodeLine{01527\ }
\DoxyCodeLine{01528\ \ \ \textcolor{comment}{//\ set\ deferred}}
\DoxyCodeLine{01529\ \ \ deferred\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01530\ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>\_state.fetch\_or(Node::DEFERRED,\ std::memory\_order\_relaxed);}
\DoxyCodeLine{01531\ }
\DoxyCodeLine{01532\ \ \ \mbox{\hyperlink{classtf_1_1_small_vector}{SmallVector<Node*>}}\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}};}
\DoxyCodeLine{01533\ }
\DoxyCodeLine{01534\ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ :\ \mbox{\hyperlink{offscreen_8c_a8cf17d727651616de6f2b79ef32170cd}{g}}.\_nodes)\ \{}
\DoxyCodeLine{01535\ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>\_topology\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>\_topology;}
\DoxyCodeLine{01536\ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>\_state.store(0,\ std::memory\_order\_relaxed);}
\DoxyCodeLine{01537\ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>\_set\_up\_join\_counter();}
\DoxyCodeLine{01538\ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>\_parent\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{01539\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>num\_dependents()\ ==\ 0)\ \{}
\DoxyCodeLine{01540\ \ \ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.push\_back(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{01541\ \ \ \ \ \}}
\DoxyCodeLine{01542\ \ \ \}}
\DoxyCodeLine{01543\ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>\_join\_counter.fetch\_add(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.size());}
\DoxyCodeLine{01544\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}});}
\DoxyCodeLine{01545\ \}}
\DoxyCodeLine{01546\ }
\DoxyCodeLine{01547\ \textcolor{comment}{//\ Procedure:\ \_invoke\_condition\_task}}
\DoxyCodeLine{01548\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_afa6be6aab23ff4b2a293a2245818916d}{Executor::\_invoke\_condition\_task}}(}
\DoxyCodeLine{01549\ \ \ \mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ worker,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node,\ \mbox{\hyperlink{classtf_1_1_small_vector}{SmallVector<int>}}\&\ conds}
\DoxyCodeLine{01550\ )\ \{}
\DoxyCodeLine{01551\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ae023614977a19def9e04cf7212eab65b}{\_observer\_prologue}}(worker,\ node);}
\DoxyCodeLine{01552\ \ \ conds\ =\ \{\ std::get\_if<Node::Condition>(\&node-\/>\_handle)-\/>work()\ \};}
\DoxyCodeLine{01553\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a9cd8c1a72af4477bc0f9575b68ffb16a}{\_observer\_epilogue}}(worker,\ node);}
\DoxyCodeLine{01554\ \}}
\DoxyCodeLine{01555\ }
\DoxyCodeLine{01556\ \textcolor{comment}{//\ Procedure:\ \_invoke\_multi\_condition\_task}}
\DoxyCodeLine{01557\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a19b3f10d4eab40143d3f76b946ded252}{Executor::\_invoke\_multi\_condition\_task}}(}
\DoxyCodeLine{01558\ \ \ \mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ worker,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node,\ \mbox{\hyperlink{classtf_1_1_small_vector}{SmallVector<int>}}\&\ conds}
\DoxyCodeLine{01559\ )\ \{}
\DoxyCodeLine{01560\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ae023614977a19def9e04cf7212eab65b}{\_observer\_prologue}}(worker,\ node);}
\DoxyCodeLine{01561\ \ \ conds\ =\ std::get\_if<Node::MultiCondition>(\&\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_handle)-\/>work();}
\DoxyCodeLine{01562\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a9cd8c1a72af4477bc0f9575b68ffb16a}{\_observer\_epilogue}}(worker,\ node);}
\DoxyCodeLine{01563\ \}}
\DoxyCodeLine{01564\ }
\DoxyCodeLine{01565\ \textcolor{comment}{//\ Procedure:\ \_invoke\_cudaflow\_task}}
\DoxyCodeLine{01566\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ae4be3b787a3c6eaaf18589a25e9c844f}{Executor::\_invoke\_cudaflow\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ worker,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node)\ \{}
\DoxyCodeLine{01567\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ae023614977a19def9e04cf7212eab65b}{\_observer\_prologue}}(worker,\ node);}
\DoxyCodeLine{01568\ \ \ std::get\_if<Node::cudaFlow>(\&node-\/>\_handle)-\/>work(*\textcolor{keyword}{this},\ node);}
\DoxyCodeLine{01569\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a9cd8c1a72af4477bc0f9575b68ffb16a}{\_observer\_epilogue}}(worker,\ node);}
\DoxyCodeLine{01570\ \}}
\DoxyCodeLine{01571\ }
\DoxyCodeLine{01572\ \textcolor{comment}{//\ Procedure:\ \_invoke\_syclflow\_task}}
\DoxyCodeLine{01573\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ae7254966d36c26cdf59a11bc7bd4d43f}{Executor::\_invoke\_syclflow\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ worker,\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node)\ \{}
\DoxyCodeLine{01574\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ae023614977a19def9e04cf7212eab65b}{\_observer\_prologue}}(worker,\ node);}
\DoxyCodeLine{01575\ \ \ std::get\_if<Node::syclFlow>(\&node-\/>\_handle)-\/>work(*\textcolor{keyword}{this},\ node);}
\DoxyCodeLine{01576\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a9cd8c1a72af4477bc0f9575b68ffb16a}{\_observer\_epilogue}}(worker,\ node);}
\DoxyCodeLine{01577\ \}}
\DoxyCodeLine{01578\ }
\DoxyCodeLine{01579\ \textcolor{comment}{//\ Procedure:\ \_invoke\_module\_task}}
\DoxyCodeLine{01580\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a429fed7f063b23a633e1657a43f1fd0e}{Executor::\_invoke\_module\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node,\ \textcolor{keywordtype}{bool}\&\ deferred)\ \{}
\DoxyCodeLine{01581\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ae023614977a19def9e04cf7212eab65b}{\_observer\_prologue}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ node);}
\DoxyCodeLine{01582\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a7338106d893b2b7cc223376878a48d64}{\_invoke\_module\_task\_internal}}(}
\DoxyCodeLine{01583\ \ \ \ \ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ node,\ std::get\_if<Node::Module>(\&node-\/>\_handle)-\/>graph,\ deferred}
\DoxyCodeLine{01584\ \ \ );}
\DoxyCodeLine{01585\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a9cd8c1a72af4477bc0f9575b68ffb16a}{\_observer\_epilogue}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ node);}
\DoxyCodeLine{01586\ \}}
\DoxyCodeLine{01587\ }
\DoxyCodeLine{01588\ \textcolor{comment}{//\ Procedure:\ \_invoke\_async\_task}}
\DoxyCodeLine{01589\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a1d1b9bf8ed24dffff65d860ef1627ef3}{Executor::\_invoke\_async\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node)\ \{}
\DoxyCodeLine{01590\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ae023614977a19def9e04cf7212eab65b}{\_observer\_prologue}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ node);}
\DoxyCodeLine{01591\ \ \ std::get\_if<Node::Async>(\&node-\/>\_handle)-\/>work(\textcolor{keyword}{false});}
\DoxyCodeLine{01592\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a9cd8c1a72af4477bc0f9575b68ffb16a}{\_observer\_epilogue}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ node);}
\DoxyCodeLine{01593\ \}}
\DoxyCodeLine{01594\ }
\DoxyCodeLine{01595\ \textcolor{comment}{//\ Procedure:\ \_invoke\_silent\_async\_task}}
\DoxyCodeLine{01596\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ae2bb8ef1456ec6414e46d7ed77628bd9}{Executor::\_invoke\_silent\_async\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node)\ \{}
\DoxyCodeLine{01597\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ae023614977a19def9e04cf7212eab65b}{\_observer\_prologue}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ node);}
\DoxyCodeLine{01598\ \ \ std::get\_if<Node::SilentAsync>(\&node-\/>\_handle)-\/>work();}
\DoxyCodeLine{01599\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a9cd8c1a72af4477bc0f9575b68ffb16a}{\_observer\_epilogue}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ node);}
\DoxyCodeLine{01600\ \}}
\DoxyCodeLine{01601\ }
\DoxyCodeLine{01602\ \textcolor{comment}{//\ Procedure:\ \_invoke\_runtime\_task}}
\DoxyCodeLine{01603\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a324dfe88e4b227fce0fdc76b667c40ce}{Executor::\_invoke\_runtime\_task}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \mbox{\hyperlink{classtf_1_1_node}{Node}}*\ node)\ \{}
\DoxyCodeLine{01604\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ae023614977a19def9e04cf7212eab65b}{\_observer\_prologue}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ node);}
\DoxyCodeLine{01605\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a5b17fd70021887be0e396dd96f9dd5e3}{Runtime}}\ rt(*\textcolor{keyword}{this},\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ node);}
\DoxyCodeLine{01606\ \ \ std::get\_if<Node::Runtime>(\&node-\/>\_handle)-\/>work(rt);}
\DoxyCodeLine{01607\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a9cd8c1a72af4477bc0f9575b68ffb16a}{\_observer\_epilogue}}(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ node);}
\DoxyCodeLine{01608\ \}}
\DoxyCodeLine{01609\ }
\DoxyCodeLine{01610\ \textcolor{comment}{//\ Function:\ run}}
\DoxyCodeLine{01611\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classtf_1_1_future}{tf::Future<void>}}\ \mbox{\hyperlink{classtf_1_1_executor_a519777f5783981d534e9e53b99712069}{Executor::run}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\ \{}
\DoxyCodeLine{01612\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a6d0617eebc9421f1ba1f82ce6dd02c00}{run\_n}}(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ 1,\ []()\{\});}
\DoxyCodeLine{01613\ \}}
\DoxyCodeLine{01614\ }
\DoxyCodeLine{01615\ \textcolor{comment}{//\ Function:\ run}}
\DoxyCodeLine{01616\ \textcolor{keyword}{inline}\ tf::Future<void>\ \mbox{\hyperlink{classtf_1_1_executor_a519777f5783981d534e9e53b99712069}{Executor::run}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\ \{}
\DoxyCodeLine{01617\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a6d0617eebc9421f1ba1f82ce6dd02c00}{run\_n}}(std::move(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}),\ 1,\ []()\{\});}
\DoxyCodeLine{01618\ \}}
\DoxyCodeLine{01619\ }
\DoxyCodeLine{01620\ \textcolor{comment}{//\ Function:\ run}}
\DoxyCodeLine{01621\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ C>}
\DoxyCodeLine{01622\ tf::Future<void>\ \mbox{\hyperlink{classtf_1_1_executor_a519777f5783981d534e9e53b99712069}{Executor::run}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\&\&\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}})\ \{}
\DoxyCodeLine{01623\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a6d0617eebc9421f1ba1f82ce6dd02c00}{run\_n}}(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ 1,\ std::forward<C>(\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}));}
\DoxyCodeLine{01624\ \}}
\DoxyCodeLine{01625\ }
\DoxyCodeLine{01626\ \textcolor{comment}{//\ Function:\ run}}
\DoxyCodeLine{01627\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ C>}
\DoxyCodeLine{01628\ tf::Future<void>\ \mbox{\hyperlink{classtf_1_1_executor_a519777f5783981d534e9e53b99712069}{Executor::run}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\&\&\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}})\ \{}
\DoxyCodeLine{01629\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a6d0617eebc9421f1ba1f82ce6dd02c00}{run\_n}}(std::move(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}),\ 1,\ std::forward<C>(\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}));}
\DoxyCodeLine{01630\ \}}
\DoxyCodeLine{01631\ }
\DoxyCodeLine{01632\ \textcolor{comment}{//\ Function:\ run\_n}}
\DoxyCodeLine{01633\ \textcolor{keyword}{inline}\ tf::Future<void>\ \mbox{\hyperlink{classtf_1_1_executor_a6d0617eebc9421f1ba1f82ce6dd02c00}{Executor::run\_n}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{keywordtype}{size\_t}\ repeat)\ \{}
\DoxyCodeLine{01634\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a6d0617eebc9421f1ba1f82ce6dd02c00}{run\_n}}(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ repeat,\ []()\{\});}
\DoxyCodeLine{01635\ \}}
\DoxyCodeLine{01636\ }
\DoxyCodeLine{01637\ \textcolor{comment}{//\ Function:\ run\_n}}
\DoxyCodeLine{01638\ \textcolor{keyword}{inline}\ tf::Future<void>\ \mbox{\hyperlink{classtf_1_1_executor_a6d0617eebc9421f1ba1f82ce6dd02c00}{Executor::run\_n}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{keywordtype}{size\_t}\ repeat)\ \{}
\DoxyCodeLine{01639\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a6d0617eebc9421f1ba1f82ce6dd02c00}{run\_n}}(std::move(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}),\ repeat,\ []()\{\});}
\DoxyCodeLine{01640\ \}}
\DoxyCodeLine{01641\ }
\DoxyCodeLine{01642\ \textcolor{comment}{//\ Function:\ run\_n}}
\DoxyCodeLine{01643\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ C>}
\DoxyCodeLine{01644\ tf::Future<void>\ \mbox{\hyperlink{classtf_1_1_executor_a6d0617eebc9421f1ba1f82ce6dd02c00}{Executor::run\_n}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{keywordtype}{size\_t}\ repeat,\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\&\&\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}})\ \{}
\DoxyCodeLine{01645\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a0f52e9dd64b65aba32ca0e13c1ed300a}{run\_until}}(}
\DoxyCodeLine{01646\ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ [repeat]()\ \textcolor{keyword}{mutable}\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespace_catch_1_1_generators_a510cc0d72a7bab8f967827e695b981ba}{repeat}}-\/-\/\ ==\ 0;\ \},\ std::forward<C>(\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}})}
\DoxyCodeLine{01647\ \ \ );}
\DoxyCodeLine{01648\ \}}
\DoxyCodeLine{01649\ }
\DoxyCodeLine{01650\ \textcolor{comment}{//\ Function:\ run\_n}}
\DoxyCodeLine{01651\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ C>}
\DoxyCodeLine{01652\ tf::Future<void>\ \mbox{\hyperlink{classtf_1_1_executor_a6d0617eebc9421f1ba1f82ce6dd02c00}{Executor::run\_n}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{keywordtype}{size\_t}\ repeat,\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\&\&\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}})\ \{}
\DoxyCodeLine{01653\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a0f52e9dd64b65aba32ca0e13c1ed300a}{run\_until}}(}
\DoxyCodeLine{01654\ \ \ \ \ std::move(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}),\ [repeat]()\ \textcolor{keyword}{mutable}\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespace_catch_1_1_generators_a510cc0d72a7bab8f967827e695b981ba}{repeat}}-\/-\/\ ==\ 0;\ \},\ std::forward<C>(\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}})}
\DoxyCodeLine{01655\ \ \ );}
\DoxyCodeLine{01656\ \}}
\DoxyCodeLine{01657\ }
\DoxyCodeLine{01658\ \textcolor{comment}{//\ Function:\ run\_until}}
\DoxyCodeLine{01659\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ P>}
\DoxyCodeLine{01660\ tf::Future<void>\ \mbox{\hyperlink{classtf_1_1_executor_a0f52e9dd64b65aba32ca0e13c1ed300a}{Executor::run\_until}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ P\&\&\ pred)\ \{}
\DoxyCodeLine{01661\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a0f52e9dd64b65aba32ca0e13c1ed300a}{run\_until}}(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ std::forward<P>(pred),\ []()\{\});}
\DoxyCodeLine{01662\ \}}
\DoxyCodeLine{01663\ }
\DoxyCodeLine{01664\ \textcolor{comment}{//\ Function:\ run\_until}}
\DoxyCodeLine{01665\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ P>}
\DoxyCodeLine{01666\ tf::Future<void>\ \mbox{\hyperlink{classtf_1_1_executor_a0f52e9dd64b65aba32ca0e13c1ed300a}{Executor::run\_until}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ P\&\&\ pred)\ \{}
\DoxyCodeLine{01667\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a0f52e9dd64b65aba32ca0e13c1ed300a}{run\_until}}(std::move(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}),\ std::forward<P>(pred),\ []()\{\});}
\DoxyCodeLine{01668\ \}}
\DoxyCodeLine{01669\ }
\DoxyCodeLine{01670\ \textcolor{comment}{//\ Function:\ run\_until}}
\DoxyCodeLine{01671\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ P,\ \textcolor{keyword}{typename}\ C>}
\DoxyCodeLine{01672\ tf::Future<void>\ \mbox{\hyperlink{classtf_1_1_executor_a0f52e9dd64b65aba32ca0e13c1ed300a}{Executor::run\_until}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ P\&\&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\&\&\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}})\ \{}
\DoxyCodeLine{01673\ }
\DoxyCodeLine{01674\ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab85dc42b3e9b18e4b975bd5e9a8c5e72}{\_increment\_topology}}();}
\DoxyCodeLine{01675\ }
\DoxyCodeLine{01676\ \ \ \textcolor{comment}{//\ Need\ to\ check\ the\ empty\ under\ the\ lock\ since\ dynamic\ task\ may}}
\DoxyCodeLine{01677\ \ \ \textcolor{comment}{//\ define\ detached\ blocks\ that\ modify\ the\ taskflow\ at\ the\ same\ time}}
\DoxyCodeLine{01678\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacectll_afaf902ffaf3fd6dc870d0f2070795039}{empty}};}
\DoxyCodeLine{01679\ \ \ \{}
\DoxyCodeLine{01680\ \ \ \ \ std::lock\_guard<std::mutex>\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}.\_mutex);}
\DoxyCodeLine{01681\ \ \ \ \ \mbox{\hyperlink{namespacectll_afaf902ffaf3fd6dc870d0f2070795039}{empty}}\ =\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}.empty();}
\DoxyCodeLine{01682\ \ \ \}}
\DoxyCodeLine{01683\ }
\DoxyCodeLine{01684\ \ \ \textcolor{comment}{//\ No\ need\ to\ create\ a\ real\ topology\ but\ returns\ an\ dummy\ future}}
\DoxyCodeLine{01685\ \ \ \textcolor{keywordflow}{if}(empty\ ||\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}())\ \{}
\DoxyCodeLine{01686\ \ \ \ \ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}();}
\DoxyCodeLine{01687\ \ \ \ \ std::promise<void>\ promise;}
\DoxyCodeLine{01688\ \ \ \ \ promise.set\_value();}
\DoxyCodeLine{01689\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a08945917285cd57d33efc99530fbd384}{\_decrement\_topology\_and\_notify}}();}
\DoxyCodeLine{01690\ \ \ \ \ \textcolor{keywordflow}{return}\ tf::Future<void>(promise.get\_future(),\ std::monostate\{\});}
\DoxyCodeLine{01691\ \ \ \}}
\DoxyCodeLine{01692\ }
\DoxyCodeLine{01693\ \ \ \textcolor{comment}{//\ create\ a\ topology\ for\ this\ run}}
\DoxyCodeLine{01694\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ std::make\_shared<Topology>(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ std::forward<P>(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}),\ std::forward<C>(\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}));}
\DoxyCodeLine{01695\ }
\DoxyCodeLine{01696\ \ \ \textcolor{comment}{//\ need\ to\ create\ future\ before\ the\ topology\ got\ torn\ down\ quickly}}
\DoxyCodeLine{01697\ \ \ tf::Future<void>\ \mbox{\hyperlink{namespaceluisa_1_1fiber_ade0f9c58b88c65b0e9c7be95852327ff}{future}}(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}-\/>\_promise.get\_future(),\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}});}
\DoxyCodeLine{01698\ }
\DoxyCodeLine{01699\ \ \ \textcolor{comment}{//\ modifying\ topology\ needs\ to\ be\ protected\ under\ the\ lock}}
\DoxyCodeLine{01700\ \ \ \{}
\DoxyCodeLine{01701\ \ \ \ \ std::lock\_guard<std::mutex>\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}.\_mutex);}
\DoxyCodeLine{01702\ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}.\_topologies.push(\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}});}
\DoxyCodeLine{01703\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}.\_topologies.size()\ ==\ 1)\ \{}
\DoxyCodeLine{01704\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a723daf897c5d3d3517583cb4c62654ee}{\_set\_up\_topology}}(\mbox{\hyperlink{classtf_1_1_executor_a941f6e5e9e6141a81c750648c4802b63}{\_this\_worker}}(),\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}.get());}
\DoxyCodeLine{01705\ \ \ \ \ \}}
\DoxyCodeLine{01706\ \ \ \}}
\DoxyCodeLine{01707\ }
\DoxyCodeLine{01708\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceluisa_1_1fiber_ade0f9c58b88c65b0e9c7be95852327ff}{future}};}
\DoxyCodeLine{01709\ \}}
\DoxyCodeLine{01710\ }
\DoxyCodeLine{01711\ \textcolor{comment}{//\ Function:\ run\_until}}
\DoxyCodeLine{01712\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ P,\ \textcolor{keyword}{typename}\ C>}
\DoxyCodeLine{01713\ tf::Future<void>\ \mbox{\hyperlink{classtf_1_1_executor_a0f52e9dd64b65aba32ca0e13c1ed300a}{Executor::run\_until}}(\mbox{\hyperlink{classtf_1_1_taskflow}{Taskflow}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ P\&\&\ pred,\ \mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\&\&\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}})\ \{}
\DoxyCodeLine{01714\ }
\DoxyCodeLine{01715\ \ \ std::list<Taskflow>::iterator\ itr;}
\DoxyCodeLine{01716\ }
\DoxyCodeLine{01717\ \ \ \{}
\DoxyCodeLine{01718\ \ \ \ \ std::scoped\_lock<std::mutex>\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{classtf_1_1_executor_a9707dbbe643016ac2e515aada9ebfcf3}{\_taskflow\_mutex}});}
\DoxyCodeLine{01719\ \ \ \ \ itr\ =\ \mbox{\hyperlink{classtf_1_1_executor_a02aabc31d357937b4aaf46539c5ad129}{\_taskflows}}.emplace(\mbox{\hyperlink{classtf_1_1_executor_a02aabc31d357937b4aaf46539c5ad129}{\_taskflows}}.end(),\ std::move(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}));}
\DoxyCodeLine{01720\ \ \ \ \ itr-\/>\_satellite\ =\ itr;}
\DoxyCodeLine{01721\ \ \ \}}
\DoxyCodeLine{01722\ }
\DoxyCodeLine{01723\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a0f52e9dd64b65aba32ca0e13c1ed300a}{run\_until}}(*itr,\ std::forward<P>(pred),\ std::forward<C>(\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}));}
\DoxyCodeLine{01724\ \}}
\DoxyCodeLine{01725\ }
\DoxyCodeLine{01726\ \textcolor{comment}{//\ Procedure:\ \_increment\_topology}}
\DoxyCodeLine{01727\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ab85dc42b3e9b18e4b975bd5e9a8c5e72}{Executor::\_increment\_topology}}()\ \{}
\DoxyCodeLine{01728\ \ \ std::lock\_guard<std::mutex>\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{classtf_1_1_executor_a8be5571fa0df99784aacb26b01d0f4b4}{\_topology\_mutex}});}
\DoxyCodeLine{01729\ \ \ ++\mbox{\hyperlink{classtf_1_1_executor_a9e38edfbc967dd3f5ca6f7a115f95ed7}{\_num\_topologies}};}
\DoxyCodeLine{01730\ \}}
\DoxyCodeLine{01731\ }
\DoxyCodeLine{01732\ \textcolor{comment}{//\ Procedure:\ \_decrement\_topology\_and\_notify}}
\DoxyCodeLine{01733\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a08945917285cd57d33efc99530fbd384}{Executor::\_decrement\_topology\_and\_notify}}()\ \{}
\DoxyCodeLine{01734\ \ \ std::lock\_guard<std::mutex>\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{classtf_1_1_executor_a8be5571fa0df99784aacb26b01d0f4b4}{\_topology\_mutex}});}
\DoxyCodeLine{01735\ \ \ \textcolor{keywordflow}{if}(-\/-\/\mbox{\hyperlink{classtf_1_1_executor_a9e38edfbc967dd3f5ca6f7a115f95ed7}{\_num\_topologies}}\ ==\ 0)\ \{}
\DoxyCodeLine{01736\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a94357ea08db1859178f855b0b926b3de}{\_topology\_cv}}.notify\_all();}
\DoxyCodeLine{01737\ \ \ \}}
\DoxyCodeLine{01738\ \}}
\DoxyCodeLine{01739\ }
\DoxyCodeLine{01740\ \textcolor{comment}{//\ Procedure:\ \_decrement\_topology}}
\DoxyCodeLine{01741\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a8728f22f6d177fad84ce667e02a7a3b9}{Executor::\_decrement\_topology}}()\ \{}
\DoxyCodeLine{01742\ \ \ std::lock\_guard<std::mutex>\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{classtf_1_1_executor_a8be5571fa0df99784aacb26b01d0f4b4}{\_topology\_mutex}});}
\DoxyCodeLine{01743\ \ \ -\/-\/\mbox{\hyperlink{classtf_1_1_executor_a9e38edfbc967dd3f5ca6f7a115f95ed7}{\_num\_topologies}};}
\DoxyCodeLine{01744\ \}}
\DoxyCodeLine{01745\ }
\DoxyCodeLine{01746\ \textcolor{comment}{//\ Procedure:\ wait\_for\_all}}
\DoxyCodeLine{01747\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_ab9aa252f70e9a40020a1e5a89d485b85}{Executor::wait\_for\_all}}()\ \{}
\DoxyCodeLine{01748\ \ \ std::unique\_lock<std::mutex>\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{classtf_1_1_executor_a8be5571fa0df99784aacb26b01d0f4b4}{\_topology\_mutex}});}
\DoxyCodeLine{01749\ \ \ \mbox{\hyperlink{classtf_1_1_executor_a94357ea08db1859178f855b0b926b3de}{\_topology\_cv}}.wait(\mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}},\ [\&]()\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtf_1_1_executor_a9e38edfbc967dd3f5ca6f7a115f95ed7}{\_num\_topologies}}\ ==\ 0;\ \});}
\DoxyCodeLine{01750\ \}}
\DoxyCodeLine{01751\ }
\DoxyCodeLine{01752\ \textcolor{comment}{//\ Function:\ \_set\_up\_topology}}
\DoxyCodeLine{01753\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a723daf897c5d3d3517583cb4c62654ee}{Executor::\_set\_up\_topology}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}*\ worker,\ \mbox{\hyperlink{classtf_1_1_topology}{Topology}}*\ tpg)\ \{}
\DoxyCodeLine{01754\ }
\DoxyCodeLine{01755\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/\ under\ taskflow\ lock\ -\/-\/-\/-\/}}
\DoxyCodeLine{01756\ }
\DoxyCodeLine{01757\ \ \ tpg-\/>\_sources.clear();}
\DoxyCodeLine{01758\ \ \ tpg-\/>\_taskflow.\_graph.\_clear\_detached();}
\DoxyCodeLine{01759\ }
\DoxyCodeLine{01760\ \ \ \textcolor{comment}{//\ scan\ each\ node\ in\ the\ graph\ and\ build\ up\ the\ links}}
\DoxyCodeLine{01761\ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\ node\ :\ tpg-\/>\_taskflow.\_graph.\_nodes)\ \{}
\DoxyCodeLine{01762\ }
\DoxyCodeLine{01763\ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_topology\ =\ tpg;}
\DoxyCodeLine{01764\ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_state.store(0,\ std::memory\_order\_relaxed);}
\DoxyCodeLine{01765\ }
\DoxyCodeLine{01766\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>num\_dependents()\ ==\ 0)\ \{}
\DoxyCodeLine{01767\ \ \ \ \ \ \ tpg-\/>\_sources.push\_back(node);}
\DoxyCodeLine{01768\ \ \ \ \ \}}
\DoxyCodeLine{01769\ }
\DoxyCodeLine{01770\ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_set\_up\_join\_counter();}
\DoxyCodeLine{01771\ \ \ \}}
\DoxyCodeLine{01772\ }
\DoxyCodeLine{01773\ \ \ tpg-\/>\_join\_counter\ =\ tpg-\/>\_sources.size();}
\DoxyCodeLine{01774\ }
\DoxyCodeLine{01775\ \ \ \textcolor{keywordflow}{if}(worker)\ \{}
\DoxyCodeLine{01776\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(*worker,\ tpg-\/>\_sources);}
\DoxyCodeLine{01777\ \ \ \}}
\DoxyCodeLine{01778\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01779\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(tpg-\/>\_sources);}
\DoxyCodeLine{01780\ \ \ \}}
\DoxyCodeLine{01781\ \}}
\DoxyCodeLine{01782\ }
\DoxyCodeLine{01783\ \textcolor{comment}{//\ Function:\ \_tear\_down\_topology}}
\DoxyCodeLine{01784\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_executor_a76be884d38d1bb8f9b8bba488c901b4b}{Executor::\_tear\_down\_topology}}(\mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ worker,\ \mbox{\hyperlink{classtf_1_1_topology}{Topology}}*\ tpg)\ \{}
\DoxyCodeLine{01785\ }
\DoxyCodeLine{01786\ \ \ \textcolor{keyword}{auto}\ \&\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ =\ tpg-\/>\_taskflow;}
\DoxyCodeLine{01787\ }
\DoxyCodeLine{01788\ \ \ \textcolor{comment}{//assert(\&tpg\ ==\ \&(f.\_topologies.front()));}}
\DoxyCodeLine{01789\ }
\DoxyCodeLine{01790\ \ \ \textcolor{comment}{//\ case\ 1:\ we\ still\ need\ to\ run\ the\ topology\ again}}
\DoxyCodeLine{01791\ \ \ \textcolor{keywordflow}{if}(!tpg-\/>\_is\_cancelled\ \&\&\ !tpg-\/>\_pred())\ \{}
\DoxyCodeLine{01792\ \ \ \ \ \textcolor{comment}{//assert(tpg-\/>\_join\_counter\ ==\ 0);}}
\DoxyCodeLine{01793\ \ \ \ \ std::lock\_guard<std::mutex>\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}.\_mutex);}
\DoxyCodeLine{01794\ \ \ \ \ tpg-\/>\_join\_counter\ =\ tpg-\/>\_sources.size();}
\DoxyCodeLine{01795\ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_ab8d98f12a62d10ad6cf1a4011a4d0034}{\_schedule}}(worker,\ tpg-\/>\_sources);}
\DoxyCodeLine{01796\ \ \ \}}
\DoxyCodeLine{01797\ \ \ \textcolor{comment}{//\ case\ 2:\ the\ final\ run\ of\ this\ topology}}
\DoxyCodeLine{01798\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01799\ }
\DoxyCodeLine{01800\ \ \ \ \ \textcolor{comment}{//\ TODO:\ if\ the\ topology\ is\ cancelled,\ need\ to\ release\ all\ semaphores}}
\DoxyCodeLine{01801\ }
\DoxyCodeLine{01802\ \ \ \ \ \textcolor{keywordflow}{if}(tpg-\/>\_call\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{01803\ \ \ \ \ \ \ tpg-\/>\_call();}
\DoxyCodeLine{01804\ \ \ \ \ \}}
\DoxyCodeLine{01805\ }
\DoxyCodeLine{01806\ \ \ \ \ \textcolor{comment}{//\ If\ there\ is\ another\ run\ (interleave\ between\ lock)}}
\DoxyCodeLine{01807\ \ \ \ \ \textcolor{keywordflow}{if}(std::unique\_lock<std::mutex>\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}.\_mutex);\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}.\_topologies.size()>1)\ \{}
\DoxyCodeLine{01808\ \ \ \ \ \ \ \textcolor{comment}{//assert(tpg-\/>\_join\_counter\ ==\ 0);}}
\DoxyCodeLine{01809\ }
\DoxyCodeLine{01810\ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ the\ promise}}
\DoxyCodeLine{01811\ \ \ \ \ \ \ tpg-\/>\_promise.set\_value();}
\DoxyCodeLine{01812\ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}.\_topologies.pop();}
\DoxyCodeLine{01813\ \ \ \ \ \ \ tpg\ =\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}.\_topologies.front().get();}
\DoxyCodeLine{01814\ }
\DoxyCodeLine{01815\ \ \ \ \ \ \ \textcolor{comment}{//\ decrement\ the\ topology\ but\ since\ this\ is\ not\ the\ last\ we\ don't\ notify}}
\DoxyCodeLine{01816\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a8728f22f6d177fad84ce667e02a7a3b9}{\_decrement\_topology}}();}
\DoxyCodeLine{01817\ }
\DoxyCodeLine{01818\ \ \ \ \ \ \ \textcolor{comment}{//\ set\ up\ topology\ needs\ to\ be\ under\ the\ lock\ or\ it\ can}}
\DoxyCodeLine{01819\ \ \ \ \ \ \ \textcolor{comment}{//\ introduce\ memory\ order\ error\ with\ pop}}
\DoxyCodeLine{01820\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a723daf897c5d3d3517583cb4c62654ee}{\_set\_up\_topology}}(\&worker,\ tpg);}
\DoxyCodeLine{01821\ \ \ \ \ \}}
\DoxyCodeLine{01822\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01823\ \ \ \ \ \ \ \textcolor{comment}{//assert(f.\_topologies.size()\ ==\ 1);}}
\DoxyCodeLine{01824\ }
\DoxyCodeLine{01825\ \ \ \ \ \ \ \textcolor{comment}{//\ Need\ to\ back\ up\ the\ promise\ first\ here\ becuz\ taskflow\ might\ be}}
\DoxyCodeLine{01826\ \ \ \ \ \ \ \textcolor{comment}{//\ destroy\ soon\ after\ calling\ get}}
\DoxyCodeLine{01827\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ \{std::move(tpg-\/>\_promise)\};}
\DoxyCodeLine{01828\ }
\DoxyCodeLine{01829\ \ \ \ \ \ \ \textcolor{comment}{//\ Back\ up\ lambda\ capture\ in\ case\ it\ has\ the\ topology\ pointer,}}
\DoxyCodeLine{01830\ \ \ \ \ \ \ \textcolor{comment}{//\ to\ avoid\ it\ releasing\ on\ pop\_front\ ahead\ of\ \_mutex.unlock\ \&}}
\DoxyCodeLine{01831\ \ \ \ \ \ \ \textcolor{comment}{//\ \_promise.set\_value.\ Released\ safely\ when\ leaving\ scope.}}
\DoxyCodeLine{01832\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}\ \{std::move(tpg-\/>\_call)\};}
\DoxyCodeLine{01833\ }
\DoxyCodeLine{01834\ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ the\ satellite\ if\ any}}
\DoxyCodeLine{01835\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ \{\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}.\_satellite\};}
\DoxyCodeLine{01836\ }
\DoxyCodeLine{01837\ \ \ \ \ \ \ \textcolor{comment}{//\ Now\ we\ remove\ the\ topology\ from\ this\ taskflow}}
\DoxyCodeLine{01838\ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}.\_topologies.pop();}
\DoxyCodeLine{01839\ }
\DoxyCodeLine{01840\ \ \ \ \ \ \ \textcolor{comment}{//f.\_mutex.unlock();}}
\DoxyCodeLine{01841\ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}.unlock();}
\DoxyCodeLine{01842\ }
\DoxyCodeLine{01843\ \ \ \ \ \ \ \textcolor{comment}{//\ We\ set\ the\ promise\ in\ the\ end\ in\ case\ taskflow\ leaves\ the\ scope.}}
\DoxyCodeLine{01844\ \ \ \ \ \ \ \textcolor{comment}{//\ After\ set\_value,\ the\ caller\ will\ return\ from\ wait}}
\DoxyCodeLine{01845\ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.set\_value();}
\DoxyCodeLine{01846\ }
\DoxyCodeLine{01847\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a08945917285cd57d33efc99530fbd384}{\_decrement\_topology\_and\_notify}}();}
\DoxyCodeLine{01848\ }
\DoxyCodeLine{01849\ \ \ \ \ \ \ \textcolor{comment}{//\ remove\ the\ taskflow\ if\ it\ is\ managed\ by\ the\ executor}}
\DoxyCodeLine{01850\ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ in\ the\ future,\ we\ may\ need\ to\ synchronize\ on\ wait}}
\DoxyCodeLine{01851\ \ \ \ \ \ \ \textcolor{comment}{//\ (which\ means\ the\ following\ code\ should\ the\ moved\ before\ set\_value)}}
\DoxyCodeLine{01852\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}})\ \{}
\DoxyCodeLine{01853\ \ \ \ \ \ \ \ \ std::scoped\_lock<std::mutex>\ \mbox{\hyperlink{ittnotify__static_8h_a46e8be2e3aadb2f6ee62e762a36b9243}{lock}}(\mbox{\hyperlink{classtf_1_1_executor_a9707dbbe643016ac2e515aada9ebfcf3}{\_taskflow\_mutex}});}
\DoxyCodeLine{01854\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_executor_a02aabc31d357937b4aaf46539c5ad129}{\_taskflows}}.erase(*\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}});}
\DoxyCodeLine{01855\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01856\ \ \ \ \ \}}
\DoxyCodeLine{01857\ \ \ \}}
\DoxyCodeLine{01858\ \}}
\DoxyCodeLine{01859\ }
\DoxyCodeLine{01860\ \textcolor{comment}{//\ \#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}}
\DoxyCodeLine{01861\ \textcolor{comment}{//\ Forward\ Declaration:\ Subflow}}
\DoxyCodeLine{01862\ \textcolor{comment}{//\ \#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}}
\DoxyCodeLine{01863\ }
\DoxyCodeLine{01864\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_subflow_a59fcac1323e70d920088dd37bd0be245}{Subflow::join}}()\ \{}
\DoxyCodeLine{01865\ }
\DoxyCodeLine{01866\ \ \ \textcolor{comment}{//\ assert(this\_worker().worker\ ==\ \&\_worker);}}
\DoxyCodeLine{01867\ }
\DoxyCodeLine{01868\ \ \ \textcolor{keywordflow}{if}(!\_joinable)\ \{}
\DoxyCodeLine{01869\ \ \ \ \ \mbox{\hyperlink{error_8hpp_aecd66f17d01de60aeb9cae992c9dd4bf}{TF\_THROW}}(\textcolor{stringliteral}{"{}subflow\ not\ joinable"{}});}
\DoxyCodeLine{01870\ \ \ \}}
\DoxyCodeLine{01871\ }
\DoxyCodeLine{01872\ \ \ \textcolor{comment}{//\ only\ the\ parent\ worker\ can\ join\ the\ subflow}}
\DoxyCodeLine{01873\ \ \ \mbox{\hyperlink{classtf_1_1_subflow_a31a68355e05081fed16fff307b6b4e33}{\_executor}}.\_invoke\_dynamic\_task\_external(\mbox{\hyperlink{classtf_1_1_subflow_ac04dc0e5d4001c6d3f73ea867387b186}{\_worker}},\ \mbox{\hyperlink{classtf_1_1_subflow_a350edd619ad0a3f28c8373b4ee937ebe}{\_parent}},\ \mbox{\hyperlink{classtf_1_1_flow_builder_a9404a57d9d37a4d49d20b686e4e5f68f}{\_graph}},\ \textcolor{keyword}{false});}
\DoxyCodeLine{01874\ \ \ \_joinable\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01875\ \}}
\DoxyCodeLine{01876\ }
\DoxyCodeLine{01877\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_subflow_acfdedc7e9676126e9a38ecf7b5a37864}{Subflow::detach}}()\ \{}
\DoxyCodeLine{01878\ }
\DoxyCodeLine{01879\ \ \ \textcolor{comment}{//\ assert(this\_worker().worker\ ==\ \&\_worker);}}
\DoxyCodeLine{01880\ }
\DoxyCodeLine{01881\ \ \ \textcolor{keywordflow}{if}(!\_joinable)\ \{}
\DoxyCodeLine{01882\ \ \ \ \ \mbox{\hyperlink{error_8hpp_aecd66f17d01de60aeb9cae992c9dd4bf}{TF\_THROW}}(\textcolor{stringliteral}{"{}subflow\ already\ joined\ or\ detached"{}});}
\DoxyCodeLine{01883\ \ \ \}}
\DoxyCodeLine{01884\ }
\DoxyCodeLine{01885\ \ \ \textcolor{comment}{//\ only\ the\ parent\ worker\ can\ detach\ the\ subflow}}
\DoxyCodeLine{01886\ \ \ \mbox{\hyperlink{classtf_1_1_subflow_a31a68355e05081fed16fff307b6b4e33}{\_executor}}.\_invoke\_dynamic\_task\_external(\mbox{\hyperlink{classtf_1_1_subflow_ac04dc0e5d4001c6d3f73ea867387b186}{\_worker}},\ \mbox{\hyperlink{classtf_1_1_subflow_a350edd619ad0a3f28c8373b4ee937ebe}{\_parent}},\ \mbox{\hyperlink{classtf_1_1_flow_builder_a9404a57d9d37a4d49d20b686e4e5f68f}{\_graph}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{01887\ \ \ \_joinable\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01888\ \}}
\DoxyCodeLine{01889\ }
\DoxyCodeLine{01890\ \textcolor{comment}{//\ Function:\ named\_async}}
\DoxyCodeLine{01891\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ \textcolor{keyword}{typename}...\ ArgsT>}
\DoxyCodeLine{01892\ \textcolor{keyword}{auto}\ Subflow::named\_async(\textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}},\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ ArgsT\&\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}})\ \{}
\DoxyCodeLine{01893\ \ \ \textcolor{keywordflow}{return}\ \_named\_async(}
\DoxyCodeLine{01894\ \ \ \ \ *\mbox{\hyperlink{classtf_1_1_subflow_a31a68355e05081fed16fff307b6b4e33}{\_executor}}.\_this\_worker(),\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}},\ std::forward<F>(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}),\ std::forward<ArgsT>(\mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}})...}
\DoxyCodeLine{01895\ \ \ );}
\DoxyCodeLine{01896\ \}}
\DoxyCodeLine{01897\ }
\DoxyCodeLine{01898\ \textcolor{comment}{//\ Function:\ \_named\_async}}
\DoxyCodeLine{01899\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ \textcolor{keyword}{typename}...\ ArgsT>}
\DoxyCodeLine{01900\ \textcolor{keyword}{auto}\ Subflow::\_named\_async(}
\DoxyCodeLine{01901\ \ \ \mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},}
\DoxyCodeLine{01902\ \ \ \textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}},}
\DoxyCodeLine{01903\ \ \ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},}
\DoxyCodeLine{01904\ \ \ ArgsT\&\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}}
\DoxyCodeLine{01905\ )\ \{}
\DoxyCodeLine{01906\ }
\DoxyCodeLine{01907\ \ \ \mbox{\hyperlink{classtf_1_1_subflow_a350edd619ad0a3f28c8373b4ee937ebe}{\_parent}}-\/>\_join\_counter.fetch\_add(1);}
\DoxyCodeLine{01908\ }
\DoxyCodeLine{01909\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ =\ std::invoke\_result\_t<\mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ ArgsT...>;}
\DoxyCodeLine{01910\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{test__broadcast__node_8cpp_a554e63228b946db0d44c4f398b18e212}{R}}\ =\ std::conditional\_t<std::is\_same\_v<T,\ void>,\ \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}},\ std::optional<T>>;}
\DoxyCodeLine{01911\ }
\DoxyCodeLine{01912\ \ \ std::promise<R>\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{01913\ }
\DoxyCodeLine{01914\ \ \ \textcolor{keyword}{auto}\ tpg\ =\ std::make\_shared<AsyncTopology>();}
\DoxyCodeLine{01915\ }
\DoxyCodeLine{01916\ \ \ Future<R>\ fu(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.get\_future(),\ tpg);}
\DoxyCodeLine{01917\ }
\DoxyCodeLine{01918\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}\ =\ node\_pool.animate(}
\DoxyCodeLine{01919\ \ \ \ \ std::in\_place\_type\_t<Node::Async>\{\},}
\DoxyCodeLine{01920\ \ \ \ \ [\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}=\mbox{\hyperlink{namespacetf_a7ddc987133ce85bd85c883b9e113c71b}{make\_moc}}(std::move(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})),\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}=std::forward<F>(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}),\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}...]}
\DoxyCodeLine{01921\ \ \ \ \ (\textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacetbb_1_1internal_a0079fa537b191a596ed128fc55bee8d4a5489cced61186cb8c61c335bb98ce0d5}{cancel}})\ \textcolor{keyword}{mutable}\ \{}
\DoxyCodeLine{01922\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(std::is\_same\_v<R,\ void>)\ \{}
\DoxyCodeLine{01923\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!cancel)\ \{}
\DoxyCodeLine{01924\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(\mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}...);}
\DoxyCodeLine{01925\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01926\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.object.set\_value();}
\DoxyCodeLine{01927\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01928\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01929\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.object.set\_value(cancel\ ?\ std::nullopt\ :\ std::make\_optional(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(\mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}...)));}
\DoxyCodeLine{01930\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01931\ \ \ \ \ \},}
\DoxyCodeLine{01932\ \ \ \ \ std::move(tpg)}
\DoxyCodeLine{01933\ \ \ );}
\DoxyCodeLine{01934\ }
\DoxyCodeLine{01935\ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_name\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}};}
\DoxyCodeLine{01936\ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_topology\ =\ \mbox{\hyperlink{classtf_1_1_subflow_a350edd619ad0a3f28c8373b4ee937ebe}{\_parent}}-\/>\_topology;}
\DoxyCodeLine{01937\ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_parent\ =\ \mbox{\hyperlink{classtf_1_1_subflow_a350edd619ad0a3f28c8373b4ee937ebe}{\_parent}};}
\DoxyCodeLine{01938\ }
\DoxyCodeLine{01939\ \ \ \mbox{\hyperlink{classtf_1_1_subflow_a31a68355e05081fed16fff307b6b4e33}{\_executor}}.\_schedule(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ node);}
\DoxyCodeLine{01940\ }
\DoxyCodeLine{01941\ \ \ \textcolor{keywordflow}{return}\ fu;}
\DoxyCodeLine{01942\ \}}
\DoxyCodeLine{01943\ }
\DoxyCodeLine{01944\ \textcolor{comment}{//\ Function:\ async}}
\DoxyCodeLine{01945\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ \textcolor{keyword}{typename}...\ ArgsT>}
\DoxyCodeLine{01946\ \textcolor{keyword}{auto}\ Subflow::async(\mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ ArgsT\&\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}})\ \{}
\DoxyCodeLine{01947\ \ \ \textcolor{keywordflow}{return}\ named\_async(\textcolor{stringliteral}{"{}"{}},\ std::forward<F>(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}),\ std::forward<ArgsT>(\mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}})...);}
\DoxyCodeLine{01948\ \}}
\DoxyCodeLine{01949\ }
\DoxyCodeLine{01950\ \textcolor{comment}{//\ Function:\ \_named\_silent\_async}}
\DoxyCodeLine{01951\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ \textcolor{keyword}{typename}...\ ArgsT>}
\DoxyCodeLine{01952\ \textcolor{keywordtype}{void}\ Subflow::\_named\_silent\_async(}
\DoxyCodeLine{01953\ \ \ \mbox{\hyperlink{classtf_1_1_worker}{Worker}}\&\ \mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ \textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}},\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ ArgsT\&\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}}
\DoxyCodeLine{01954\ )\ \{}
\DoxyCodeLine{01955\ }
\DoxyCodeLine{01956\ \ \ \mbox{\hyperlink{classtf_1_1_subflow_a350edd619ad0a3f28c8373b4ee937ebe}{\_parent}}-\/>\_join\_counter.fetch\_add(1);}
\DoxyCodeLine{01957\ }
\DoxyCodeLine{01958\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}\ =\ node\_pool.animate(}
\DoxyCodeLine{01959\ \ \ \ \ std::in\_place\_type\_t<Node::SilentAsync>\{\},}
\DoxyCodeLine{01960\ \ \ \ \ [\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}=std::forward<F>(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}),\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}...]\ ()\ \textcolor{keyword}{mutable}\ \{}
\DoxyCodeLine{01961\ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}(\mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}}...);}
\DoxyCodeLine{01962\ \ \ \ \ \}}
\DoxyCodeLine{01963\ \ \ );}
\DoxyCodeLine{01964\ }
\DoxyCodeLine{01965\ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_name\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}};}
\DoxyCodeLine{01966\ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_topology\ =\ \mbox{\hyperlink{classtf_1_1_subflow_a350edd619ad0a3f28c8373b4ee937ebe}{\_parent}}-\/>\_topology;}
\DoxyCodeLine{01967\ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_parent\ =\ \mbox{\hyperlink{classtf_1_1_subflow_a350edd619ad0a3f28c8373b4ee937ebe}{\_parent}};}
\DoxyCodeLine{01968\ }
\DoxyCodeLine{01969\ \ \ \mbox{\hyperlink{classtf_1_1_subflow_a31a68355e05081fed16fff307b6b4e33}{\_executor}}.\_schedule(\mbox{\hyperlink{_matrix__resize__int_8cpp_aab236ce080522c9832217fd5f157541b}{w}},\ node);}
\DoxyCodeLine{01970\ \}}
\DoxyCodeLine{01971\ }
\DoxyCodeLine{01972\ \textcolor{comment}{//\ Function:\ silent\_async}}
\DoxyCodeLine{01973\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ \textcolor{keyword}{typename}...\ ArgsT>}
\DoxyCodeLine{01974\ \textcolor{keywordtype}{void}\ Subflow::named\_silent\_async(\textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}},\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ ArgsT\&\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}})\ \{}
\DoxyCodeLine{01975\ \ \ \_named\_silent\_async(}
\DoxyCodeLine{01976\ \ \ \ \ *\mbox{\hyperlink{classtf_1_1_subflow_a31a68355e05081fed16fff307b6b4e33}{\_executor}}.\_this\_worker(),\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}},\ std::forward<F>(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}),\ std::forward<ArgsT>(\mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}})...}
\DoxyCodeLine{01977\ \ \ );}
\DoxyCodeLine{01978\ \}}
\DoxyCodeLine{01979\ }
\DoxyCodeLine{01980\ \textcolor{comment}{//\ Function:\ named\_silent\_async}}
\DoxyCodeLine{01981\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}},\ \textcolor{keyword}{typename}...\ ArgsT>}
\DoxyCodeLine{01982\ \textcolor{keywordtype}{void}\ Subflow::silent\_async(\mbox{\hyperlink{test__flow__graph_8cpp_a1c83625ec20fd09ecaf0e5b37c75f6f8}{F}}\&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ ArgsT\&\&...\ \mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}})\ \{}
\DoxyCodeLine{01983\ \ \ named\_silent\_async(\textcolor{stringliteral}{"{}"{}},\ std::forward<F>(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}),\ std::forward<ArgsT>(\mbox{\hyperlink{tbbproxy_8cpp_acd08a6295eccfeb30c79985f047e4be5}{args}})...);}
\DoxyCodeLine{01984\ \}}
\DoxyCodeLine{01985\ }
\DoxyCodeLine{01986\ \textcolor{comment}{//\ \#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}}
\DoxyCodeLine{01987\ \textcolor{comment}{//\ Forward\ Declaration:\ Runtime}}
\DoxyCodeLine{01988\ \textcolor{comment}{//\ \#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}}
\DoxyCodeLine{01989\ }
\DoxyCodeLine{01990\ \textcolor{comment}{//\ Procedure:\ schedule}}
\DoxyCodeLine{01991\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtf_1_1_runtime_aa7e72cc0f298475195b252c8f1793343}{Runtime::schedule}}(\mbox{\hyperlink{classtf_1_1_task}{Task}}\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}})\ \{}
\DoxyCodeLine{01992\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}\ =\ \mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}.\_node;}
\DoxyCodeLine{01993\ \ \ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}\ =\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_parent\ ?\ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_parent-\/>\_join\_counter\ :}
\DoxyCodeLine{01994\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1intrusive_1_1msqueue_ab58d6c7c728a671b5b418888d3f055c8}{node}}-\/>\_topology-\/>\_join\_counter;}
\DoxyCodeLine{01995\ \ \ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}.fetch\_add(1);}
\DoxyCodeLine{01996\ \ \ \mbox{\hyperlink{classtf_1_1_runtime_a8074028372bb09946927b1b6ec01c6e1}{\_executor}}.\_schedule(\mbox{\hyperlink{classtf_1_1_runtime_ae9bd2bcb1e004b078f627472fb9e0371}{\_worker}},\ node);}
\DoxyCodeLine{01997\ \}}
\DoxyCodeLine{01998\ }
\DoxyCodeLine{01999\ \textcolor{comment}{//\ Procedure:\ run}}
\DoxyCodeLine{02000\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ C>}
\DoxyCodeLine{02001\ \textcolor{keywordtype}{void}\ Runtime::run(\mbox{\hyperlink{test__buffer__node_8cpp_ac4cf4b2ab929bd23951a8676eeac086b}{C}}\&\&\ callable)\ \{}
\DoxyCodeLine{02002\ }
\DoxyCodeLine{02003\ \ \ \textcolor{comment}{//\ dynamic\ task\ (subflow)}}
\DoxyCodeLine{02004\ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(is\_dynamic\_task\_v<C>)\ \{}
\DoxyCodeLine{02005\ \ \ \ \ Graph\ graph;}
\DoxyCodeLine{02006\ \ \ \ \ Subflow\ sf(\mbox{\hyperlink{classtf_1_1_runtime_a8074028372bb09946927b1b6ec01c6e1}{\_executor}},\ \mbox{\hyperlink{classtf_1_1_runtime_ae9bd2bcb1e004b078f627472fb9e0371}{\_worker}},\ \mbox{\hyperlink{classtf_1_1_runtime_ac040d7410fbb82703ac39ac3b1baf8fd}{\_parent}},\ graph);}
\DoxyCodeLine{02007\ \ \ \ \ callable(sf);}
\DoxyCodeLine{02008\ \ \ \ \ \textcolor{keywordflow}{if}(sf.\_joinable)\ \{}
\DoxyCodeLine{02009\ \ \ \ \ \ \ \mbox{\hyperlink{classtf_1_1_runtime_a8074028372bb09946927b1b6ec01c6e1}{\_executor}}.\_invoke\_dynamic\_task\_internal(\mbox{\hyperlink{classtf_1_1_runtime_ae9bd2bcb1e004b078f627472fb9e0371}{\_worker}},\ \mbox{\hyperlink{classtf_1_1_runtime_ac040d7410fbb82703ac39ac3b1baf8fd}{\_parent}},\ graph);}
\DoxyCodeLine{02010\ \ \ \ \ \}}
\DoxyCodeLine{02011\ \ \ \}}
\DoxyCodeLine{02012\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02013\ \ \ \ \ \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{namespacetf_a036d82b3ab21beea2ed89611e2930db7}{dependent\_false\_v<C>}},\ \textcolor{stringliteral}{"{}unsupported\ task\ callable\ to\ run"{}});}
\DoxyCodeLine{02014\ \ \ \}}
\DoxyCodeLine{02015\ \}}
\DoxyCodeLine{02016\ }
\DoxyCodeLine{02017\ \}\ \ \textcolor{comment}{//\ end\ of\ namespace\ tf\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{02018\ }
\DoxyCodeLine{02019\ }
\DoxyCodeLine{02020\ }
\DoxyCodeLine{02021\ }
\DoxyCodeLine{02022\ }
\DoxyCodeLine{02023\ }
\DoxyCodeLine{02024\ }
\DoxyCodeLine{02025\ }

\end{DoxyCode}
