\doxysection{governor.\+cpp}
\hypertarget{governor_8cpp_source}{}\label{governor_8cpp_source}\index{external/taskflow/3rd-\/party/tbb/src/tbb/governor.cpp@{external/taskflow/3rd-\/party/tbb/src/tbb/governor.cpp}}
\mbox{\hyperlink{governor_8cpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ <stdlib.h>}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{governor_8h}{governor.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{tbb__main_8h}{tbb\_main.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{scheduler_8h}{scheduler.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{market_8h}{market.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{arena_8h}{arena.h}}"{}}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{task__scheduler__init_8h}{tbb/task\_scheduler\_init.h}}"{}}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{dynamic__link_8h}{dynamic\_link.h}}"{}}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb}{tbb}}\ \{}
\DoxyCodeLine{00030\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb_1_1internal}{internal}}\ \{}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00033\ \textcolor{comment}{//\ governor}}
\DoxyCodeLine{00034\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#if\ \_\_TBB\_SURVIVE\_THREAD\_SWITCH}}
\DoxyCodeLine{00037\ \textcolor{comment}{//\ Support\ for\ interoperability\ with\ Intel(R)\ Cilk(TM)\ Plus.}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#define\ CILKLIB\_NAME\ "{}cilkrts20.dll"{}}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#define\ CILKLIB\_NAME\ "{}libcilkrts.so"{}}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00046\ \textcolor{keyword}{static}\ \mbox{\hyperlink{cilk-tbb-interop_8h_ad8ed3a2eb2eb3765312c72ee7ff272a3}{\_\_cilk\_tbb\_retcode}}\ (*watch\_stack\_handler)(\textcolor{keyword}{struct\ }\_\_cilk\_tbb\_unwatch\_thunk*\ \mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2examples_2parallel__for_2seismic_2main_8cpp_a2a671aca47b8db55cef1dd7174adad6f}{u}},}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\_\_cilk\_tbb\_stack\_op\_thunk\ o);}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00050\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ dynamic\_link\_descriptor\ CilkLinkTable[]\ =\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \mbox{\hyperlink{dynamic__link_8h_aa9ada19acd6191dacb9d26c361f8ae52}{DLD\_NOWEAK}}(\mbox{\hyperlink{cilk-tbb-interop_8h_af7923c606a449fb7924cc1414f0d933c}{\_\_cilkrts\_watch\_stack}},\ watch\_stack\_handler)}
\DoxyCodeLine{00052\ \};}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \textcolor{keyword}{static}\ \mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic<do\_once\_state>}}\ cilkrts\_load\_state;}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \textcolor{keywordtype}{bool}\ initialize\_cilk\_interop()\ \{}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{comment}{//\ Pinning\ can\ fail.\ This\ is\ a\ normal\ situation,\ and\ means\ that\ the\ current}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{comment}{//\ thread\ does\ not\ use\ cilkrts\ and\ consequently\ does\ not\ need\ interop.}}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{dynamic__link_8cpp_aca8bbbbc28690d986ae2636bae2754f7}{dynamic\_link}}(\ CILKLIB\_NAME,\ CilkLinkTable,\ 1,\ \ \textcolor{comment}{/*handle=*/}0,\ \mbox{\hyperlink{dynamic__link_8h_a4b4049ae5ac2e79f005302a820133ae7}{DYNAMIC\_LINK\_GLOBAL}}\ );}
\DoxyCodeLine{00060\ \}}
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_SURVIVE\_THREAD\_SWITCH\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetbb_1_1internal_1_1rml}{rml}}\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1tbb__server}{tbb\_server}}*\ \mbox{\hyperlink{namespacetbb_1_1internal_1_1rml_a8ef19f713537ac8030e4de4a1a3fdf26}{make\_private\_server}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1tbb__client}{tbb\_client}}\&\ client\ );}
\DoxyCodeLine{00065\ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a70cfd4f010baf396e4cc09a3021b4c19}{governor::acquire\_resources}}\ ()\ \{}
\DoxyCodeLine{00068\ \textcolor{preprocessor}{\#if\ USE\_PTHREAD}}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordtype}{int}\ status\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a81d27068d49b4902164a87c2eb61f27b}{theTLS}}.create(\mbox{\hyperlink{classtbb_1_1internal_1_1governor_a5fbd38947c75c1e8494bc1bac598a9fe}{auto\_terminate}});}
\DoxyCodeLine{00070\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordtype}{int}\ status\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a81d27068d49b4902164a87c2eb61f27b}{theTLS}}.create();}
\DoxyCodeLine{00072\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordflow}{if}(\ status\ )}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a63370f16962aa553990e43ad197231b9}{handle\_perror}}(status,\ \textcolor{stringliteral}{"{}TBB\ failed\ to\ initialize\ task\ scheduler\ TLS\(\backslash\)n"{}});}
\DoxyCodeLine{00075\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_af45096f35e100c17a7063a353d19aea7}{is\_speculation\_enabled}}\ =\ \mbox{\hyperlink{namespacetbb_1_1internal_abbc9695c3864361824bcb4f7f263bd11}{cpu\_has\_speculation}}();}
\DoxyCodeLine{00076\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a1edf2048c5eb16d02a30f2f9e71006d2}{is\_rethrow\_broken}}\ =\ \mbox{\hyperlink{namespacetbb_1_1internal_a01d042ccf49c2448856834818ebb80cf}{gcc\_rethrow\_exception\_broken}}();}
\DoxyCodeLine{00077\ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a1534625d2863ecea71a35972aee09c6f}{governor::release\_resources}}\ ()\ \{}
\DoxyCodeLine{00080\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_ac66f80ec07a3c5256c641f4aff390cff}{theRMLServerFactory}}.close();}
\DoxyCodeLine{00081\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a609698c4765948334772520edc6fc688}{destroy\_process\_mask}}();}
\DoxyCodeLine{00082\ \textcolor{preprocessor}{\#if\ TBB\_USE\_ASSERT}}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1_____t_b_b___init_once_a3d6e09b5b23edf10600c2ae2e6469659}{\_\_TBB\_InitOnce::initialization\_done}}()\ \&\&\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a81d27068d49b4902164a87c2eb61f27b}{theTLS}}.get()\ )\ }
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__concurrent__hash__map_8cpp_a7de19b53af11a9175c96b42320b1d082}{runtime\_warning}}(\ \textcolor{stringliteral}{"{}TBB\ is\ unloaded\ while\ tbb::task\_scheduler\_init\ object\ is\ alive?"{}}\ );}
\DoxyCodeLine{00085\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordtype}{int}\ status\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a81d27068d49b4902164a87c2eb61f27b}{theTLS}}.destroy();}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordflow}{if}(\ status\ )}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__concurrent__hash__map_8cpp_a7de19b53af11a9175c96b42320b1d082}{runtime\_warning}}(\textcolor{stringliteral}{"{}failed\ to\ destroy\ task\ scheduler\ TLS:\ \%s"{}},\ strerror(status));}
\DoxyCodeLine{00089\ \ \ \ \ \mbox{\hyperlink{dynamic__link_8cpp_ad65fa8b542fd95d199ca5e87ab2885df}{dynamic\_unlink\_all}}();}
\DoxyCodeLine{00090\ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1tbb__server}{rml::tbb\_server}}*\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_aec70bdc2a20ee8377a1676dd3b4c843b}{governor::create\_rml\_server}}\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1tbb__client}{rml::tbb\_client}}\&\ client\ )\ \{}
\DoxyCodeLine{00093\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1rml_1_1tbb__server}{rml::tbb\_server}}*\ server\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classtbb_1_1internal_1_1governor_ad0227786c18290c2822bf2886ffc3c3c}{UsePrivateRML}}\ )\ \{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classrml_1_1factory_a4c1de6c79581a01b37d4ff16340e44c9}{::rml::factory::status\_type}}\ status\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_ac66f80ec07a3c5256c641f4aff390cff}{theRMLServerFactory}}.make\_server(\ server,\ client\ );}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ status\ !=\ \mbox{\hyperlink{classrml_1_1factory_a4c1de6c79581a01b37d4ff16340e44c9ab17cc17f8e8e7c38d2f2504455530c02}{::rml::factory::st\_success}}\ )\ \{}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_ad0227786c18290c2822bf2886ffc3c3c}{UsePrivateRML}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__concurrent__hash__map_8cpp_a7de19b53af11a9175c96b42320b1d082}{runtime\_warning}}(\ \textcolor{stringliteral}{"{}rml::tbb\_factory::make\_server\ failed\ with\ status\ \%x,\ falling\ back\ on\ private\ rml"{}},\ status\ );}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00100\ \ \ \ \ \}}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !server\ )\ \{}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_ad0227786c18290c2822bf2886ffc3c3c}{UsePrivateRML}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ server\ =\ \mbox{\hyperlink{namespacetbb_1_1internal_1_1rml_a8ef19f713537ac8030e4de4a1a3fdf26}{rml::make\_private\_server}}(\ client\ );}
\DoxyCodeLine{00104\ \ \ \ \ \}}
\DoxyCodeLine{00105\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ server,\ \textcolor{stringliteral}{"{}Failed\ to\ create\ RML\ server"{}}\ );}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keywordflow}{return}\ server;}
\DoxyCodeLine{00107\ \}}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ uintptr\_t\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a342eb43ff89d1b0da4cb9aa5417b3965}{governor::tls\_value\_of}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ )\ \{}
\DoxyCodeLine{00111\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ (uintptr\_t(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}})\&1)\ ==\ 0,\ \textcolor{stringliteral}{"{}Bad\ pointer\ to\ the\ scheduler"{}}\ );}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{comment}{//\ LSB\ marks\ the\ scheduler\ initialized\ with\ arena}}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keywordflow}{return}\ uintptr\_t(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}})\ |\ uintptr\_t((\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ \&\&\ (\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_arena\ ||\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>is\_worker()))?\ 1\ :\ 0);}
\DoxyCodeLine{00114\ \}}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_abe1de8df4e3ecce96763951ac97540c6}{governor::assume\_scheduler}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ )\ \{}
\DoxyCodeLine{00117\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a81d27068d49b4902164a87c2eb61f27b}{theTLS}}.set(\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a342eb43ff89d1b0da4cb9aa5417b3965}{tls\_value\_of}}(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}})\ );}
\DoxyCodeLine{00118\ \}}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a14d4453f34a770b1c983c2ed38570e31}{governor::is\_set}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ )\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a81d27068d49b4902164a87c2eb61f27b}{theTLS}}.get()\ ==\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a342eb43ff89d1b0da4cb9aa5417b3965}{tls\_value\_of}}(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}});}
\DoxyCodeLine{00122\ \}}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_ab6b7ba04ea2b541819b659219fc42ae7}{governor::sign\_on}}(\mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}})\ \{}
\DoxyCodeLine{00125\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a14d4453f34a770b1c983c2ed38570e31}{is\_set}}(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \&\&\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00126\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_abe1de8df4e3ecce96763951ac97540c6}{assume\_scheduler}}(\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ );}
\DoxyCodeLine{00127\ \textcolor{preprocessor}{\#if\ \_\_TBB\_SURVIVE\_THREAD\_SWITCH}}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keywordflow}{if}(\ watch\_stack\_handler\ )\ \{}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct____cilk__tbb__stack__op__thunk}{\_\_cilk\_tbb\_stack\_op\_thunk}}\ o;}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ o.\mbox{\hyperlink{struct____cilk__tbb__stack__op__thunk_a3e84ab2e5f4c1712af04ee1c70f72f96}{routine}}\ =\ \&stack\_op\_handler;}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ o.\mbox{\hyperlink{struct____cilk__tbb__stack__op__thunk_a674f007efdd2f466a7b8f533930dd590}{data}}\ =\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}};}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ (*watch\_stack\_handler)(\&\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_cilk\_unwatch\_thunk,\ o)\ )\ \{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Failed\ to\ register\ with\ cilkrts,\ make\ sure\ we\ are\ clean}}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_cilk\_unwatch\_thunk.routine\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00136\ \textcolor{preprocessor}{\#if\ TBB\_USE\_ASSERT}}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_cilk\_state\ =\ generic\_scheduler::cs\_running;}
\DoxyCodeLine{00139\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ TBB\_USE\_ASSERT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00140\ \ \ \ \ \}}
\DoxyCodeLine{00141\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_SURVIVE\_THREAD\_SWITCH\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00142\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a14d4453f34a770b1c983c2ed38570e31}{is\_set}}(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00143\ \}}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a46a6d847486220d3eab529c78bd883ed}{governor::sign\_off}}(\mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}})\ \{}
\DoxyCodeLine{00146\ \ \ \ \ suppress\_unused\_warning(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}});}
\DoxyCodeLine{00147\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a14d4453f34a770b1c983c2ed38570e31}{is\_set}}(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}),\ \textcolor{stringliteral}{"{}attempt\ to\ unregister\ a\ wrong\ scheduler\ instance"{}}\ );}
\DoxyCodeLine{00148\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_abe1de8df4e3ecce96763951ac97540c6}{assume\_scheduler}}(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00149\ \textcolor{preprocessor}{\#if\ \_\_TBB\_SURVIVE\_THREAD\_SWITCH}}
\DoxyCodeLine{00150\ \ \ \ \ \mbox{\hyperlink{struct____cilk__tbb__unwatch__thunk}{\_\_cilk\_tbb\_unwatch\_thunk}}\ \&ut\ =\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_cilk\_unwatch\_thunk;}
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ ut.\mbox{\hyperlink{struct____cilk__tbb__unwatch__thunk_a947c5522a2d1e9a4a42147afcad26162}{routine}}\ )}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ (*ut.\mbox{\hyperlink{struct____cilk__tbb__unwatch__thunk_a947c5522a2d1e9a4a42147afcad26162}{routine}})(ut.\mbox{\hyperlink{struct____cilk__tbb__unwatch__thunk_ac2062c13c32d6b48804bfc7ca089cc3e}{data}});}
\DoxyCodeLine{00153\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_SURVIVE\_THREAD\_SWITCH\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00154\ \}}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_afe9a6e0c86063b682a133234ca3a2f2b}{governor::one\_time\_init}}()\ \{}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classtbb_1_1internal_1_1_____t_b_b___init_once_a3d6e09b5b23edf10600c2ae2e6469659}{\_\_TBB\_InitOnce::initialization\_done}}()\ )}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a66931f1de2fe17bad8867074cc504825}{DoOneTimeInitializations}}();}
\DoxyCodeLine{00159\ \textcolor{preprocessor}{\#if\ \_\_TBB\_SURVIVE\_THREAD\_SWITCH}}
\DoxyCodeLine{00160\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a1082394ca8392ef2aa6795b57a756fa5}{atomic\_do\_once}}(\ \&initialize\_cilk\_interop,\ cilkrts\_load\_state\ );}
\DoxyCodeLine{00161\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_SURVIVE\_THREAD\_SWITCH\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00162\ \}}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a2fb697c689050c0d4f5438b0e29ad41c}{governor::init\_scheduler\_weak}}()\ \{}
\DoxyCodeLine{00165\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_afe9a6e0c86063b682a133234ca3a2f2b}{one\_time\_init}}();}
\DoxyCodeLine{00166\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a14d4453f34a770b1c983c2ed38570e31}{is\_set}}(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}),\ \textcolor{stringliteral}{"{}TLS\ contains\ a\ scheduler?"{}}\ );}
\DoxyCodeLine{00167\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler_ac7fb04a73dbb75dd8db5c9637bfadeae}{generic\_scheduler::create\_master}}(\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );\ \textcolor{comment}{//\ without\ arena}}
\DoxyCodeLine{00168\ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_auto\_initialized\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}};}
\DoxyCodeLine{00170\ \}}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_abf62b8bc4890ad846ff01349f8d46a84}{governor::init\_scheduler}}(\ \textcolor{keywordtype}{int}\ num\_threads,\ \mbox{\hyperlink{namespacetbb_a1a268320974a3357e9609a2f98be5090}{stack\_size\_type}}\ stack\_size,\ \textcolor{keywordtype}{bool}\ auto\_init\ )\ \{}
\DoxyCodeLine{00173\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_afe9a6e0c86063b682a133234ca3a2f2b}{one\_time\_init}}();}
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ uintptr\_t\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a81d27068d49b4902164a87c2eb61f27b}{theTLS}}.get()\ )\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_ac548fe43e4264fc8aa664790ccde3c99}{tls\_scheduler\_of}}(\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ );}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\&1)\ ==\ 0\ )\ \{\ \textcolor{comment}{//\ TLS\ holds\ scheduler\ instance\ without\ arena}}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_ref\_count\ ==\ 1,\ \textcolor{stringliteral}{"{}weakly\ initialized\ scheduler\ must\ have\ refcount\ equal\ to\ 1"{}}\ );}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ !\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_arena,\ \textcolor{stringliteral}{"{}weakly\ initialized\ scheduler\ \ must\ have\ no\ arena"{}}\ );}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_auto\_initialized,\ \textcolor{stringliteral}{"{}weakly\ initialized\ scheduler\ is\ supposed\ to\ be\ auto-\/initialized"{}}\ );}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>attach\_arena(\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_aa73a40282b782676f30f27dcde0ea967}{market::create\_arena}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a87ef607c22c347eb97ddafa4384b4f1d}{default\_num\_threads}}(),\ 1,\ 0\ ),\ 0,\ \textcolor{comment}{/*is\_master*/}\textcolor{keyword}{true}\ );}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_arena\_index\ ==\ 0,\ \textcolor{stringliteral}{"{}Master\ thread\ must\ occupy\ the\ first\ slot\ in\ its\ arena"{}}\ );}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_arena\_slot-\/>my\_scheduler\ =\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}};}
\DoxyCodeLine{00183\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_GROUP\_CONTEXT}}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_arena-\/>my\_default\_ctx\ =\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>default\_context();\ \textcolor{comment}{//\ it\ also\ transfers\ implied\ ownership}}
\DoxyCodeLine{00185\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Mark\ the\ scheduler\ as\ fully\ initialized}}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_abe1de8df4e3ecce96763951ac97540c6}{assume\_scheduler}}(\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ );}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Increment\ refcount\ only\ for\ explicit\ instances\ of\ task\_scheduler\_init.}}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !auto\_init\ )\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_ref\_count\ +=\ 1;}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_arena,\ \textcolor{stringliteral}{"{}scheduler\ is\ not\ initialized\ fully"{}}\ );}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}};}
\DoxyCodeLine{00193\ \ \ \ \ \}}
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{comment}{//\ Create\ new\ scheduler\ instance\ with\ arena}}
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keywordflow}{if}(\ num\_threads\ ==\ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_a945886f5ef48300a8ebff2d077c166b1}{task\_scheduler\_init::automatic}}\ )}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ num\_threads\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a87ef607c22c347eb97ddafa4384b4f1d}{default\_num\_threads}}();}
\DoxyCodeLine{00197\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1arena}{arena}}\ *\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1market_aa73a40282b782676f30f27dcde0ea967}{market::create\_arena}}(\ num\_threads,\ 1,\ stack\_size\ );}
\DoxyCodeLine{00198\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler_ac7fb04a73dbb75dd8db5c9637bfadeae}{generic\_scheduler::create\_master}}(\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ );}
\DoxyCodeLine{00199\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}},\ \textcolor{stringliteral}{"{}Somehow\ a\ local\ scheduler\ creation\ for\ a\ master\ thread\ failed"{}});}
\DoxyCodeLine{00200\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a14d4453f34a770b1c983c2ed38570e31}{is\_set}}(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00201\ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_auto\_initialized\ =\ auto\_init;}
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}};}
\DoxyCodeLine{00203\ \}}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a0962408ba1eaf67d0ad741a0749f3a4e}{governor::terminate\_scheduler}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}},\ \textcolor{keywordtype}{bool}\ blocking\ )\ \{}
\DoxyCodeLine{00206\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{testhelper_8h_a047ea0d874e6802b9b6d08f6b50248e5}{ok}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00207\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a14d4453f34a770b1c983c2ed38570e31}{is\_set}}(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}),\ \textcolor{stringliteral}{"{}Attempt\ to\ terminate\ non-\/local\ scheduler\ instance"{}}\ );}
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keywordflow}{if}\ (0\ ==\ -\/-\/(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_ref\_count))\ \{}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{testhelper_8h_a047ea0d874e6802b9b6d08f6b50248e5}{ok}}\ =\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>cleanup\_master(\ blocking\ );}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a14d4453f34a770b1c983c2ed38570e31}{is\_set}}(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}),\ \textcolor{stringliteral}{"{}cleanup\_master\ has\ not\ cleared\ its\ TLS\ slot"{}}\ );}
\DoxyCodeLine{00211\ \ \ \ \ \}}
\DoxyCodeLine{00212\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{testhelper_8h_a047ea0d874e6802b9b6d08f6b50248e5}{ok}};}
\DoxyCodeLine{00213\ \}}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a5fbd38947c75c1e8494bc1bac598a9fe}{governor::auto\_terminate}}(\textcolor{keywordtype}{void}*\ \mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}})\{}
\DoxyCodeLine{00216\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_ac548fe43e4264fc8aa664790ccde3c99}{tls\_scheduler\_of}}(\ uintptr\_t(\mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}})\ );\ \textcolor{comment}{//\ arg\ is\ equivalent\ to\ theTLS.get()}}
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ \&\&\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_auto\_initialized\ )\ \{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !-\/-\/(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_ref\_count)\ )\ \{}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ the\ TLS\ slot\ is\ already\ cleared\ by\ OS\ or\ underlying\ concurrency}}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ runtime,\ restore\ its\ value.}}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classtbb_1_1internal_1_1governor_a14d4453f34a770b1c983c2ed38570e31}{is\_set}}(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}})\ )}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_abe1de8df4e3ecce96763951ac97540c6}{assume\_scheduler}}(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}});}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>cleanup\_master(\ \textcolor{comment}{/*blocking\_terminate=*/}\textcolor{keyword}{false}\ );}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a14d4453f34a770b1c983c2ed38570e31}{is\_set}}(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}),\ \textcolor{stringliteral}{"{}cleanup\_master\ has\ not\ cleared\ its\ TLS\ slot"{}}\ );}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00226\ \ \ \ \ \}}
\DoxyCodeLine{00227\ \}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a4e8e2653fee2983f5be742e3b038c2bf}{governor::print\_version\_info}}\ ()\ \{}
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_ad0227786c18290c2822bf2886ffc3c3c}{UsePrivateRML}}\ )}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a89891ef24359a1304be463a41071684c}{PrintExtraVersionInfo}}(\ \textcolor{stringliteral}{"{}RML"{}},\ \textcolor{stringliteral}{"{}private"{}}\ );}
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a89891ef24359a1304be463a41071684c}{PrintExtraVersionInfo}}(\ \textcolor{stringliteral}{"{}RML"{}},\ \textcolor{stringliteral}{"{}shared"{}}\ );}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_ac66f80ec07a3c5256c641f4aff390cff}{theRMLServerFactory}}.call\_with\_server\_info(\ \mbox{\hyperlink{namespacetbb_1_1internal_a995966ba7ea91f4a7103184743a7b3bd}{PrintRMLVersionInfo}},\ (\textcolor{keywordtype}{void}*)\textcolor{stringliteral}{"{}"{}}\ );}
\DoxyCodeLine{00235\ \ \ \ \ \}}
\DoxyCodeLine{00236\ \textcolor{preprocessor}{\#if\ \_\_TBB\_SURVIVE\_THREAD\_SWITCH}}
\DoxyCodeLine{00237\ \ \ \ \ \textcolor{keywordflow}{if}(\ watch\_stack\_handler\ )}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a89891ef24359a1304be463a41071684c}{PrintExtraVersionInfo}}(\ \textcolor{stringliteral}{"{}CILK"{}},\ CILKLIB\_NAME\ );}
\DoxyCodeLine{00239\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_SURVIVE\_THREAD\_SWITCH\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00240\ \}}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_adf4717664956deaf011e3bb939ed2e66}{governor::initialize\_rml\_factory}}\ ()\ \{}
\DoxyCodeLine{00243\ \ \ \ \ \mbox{\hyperlink{classrml_1_1factory_a4c1de6c79581a01b37d4ff16340e44c9}{::rml::factory::status\_type}}\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_ac66f80ec07a3c5256c641f4aff390cff}{theRMLServerFactory}}.open();}
\DoxyCodeLine{00244\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_ad0227786c18290c2822bf2886ffc3c3c}{UsePrivateRML}}\ =\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}\ !=\ \mbox{\hyperlink{classrml_1_1factory_a4c1de6c79581a01b37d4ff16340e44c9ab17cc17f8e8e7c38d2f2504455530c02}{::rml::factory::st\_success}};}
\DoxyCodeLine{00245\ \}}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \textcolor{preprocessor}{\#if\ \_\_TBB\_SURVIVE\_THREAD\_SWITCH}}
\DoxyCodeLine{00248\ \mbox{\hyperlink{cilk-tbb-interop_8h_ad8ed3a2eb2eb3765312c72ee7ff272a3}{\_\_cilk\_tbb\_retcode}}\ governor::stack\_op\_handler(\ \mbox{\hyperlink{cilk-tbb-interop_8h_aa86646769ffbe6c6f45cccab84d8ad0a}{\_\_cilk\_tbb\_stack\_op}}\ op,\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}}\ )\ \{}
\DoxyCodeLine{00249\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}},\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00250\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\textcolor{keyword}{>}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a02796e583e939f923a255e43d2c3b177}{data}});}
\DoxyCodeLine{00251\ \textcolor{preprocessor}{\#if\ TBB\_USE\_ASSERT}}
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{keywordtype}{void}*\ current\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a2133659b14313088deef73524bf44f69}{local\_scheduler\_if\_initialized}}();}
\DoxyCodeLine{00253\ \textcolor{preprocessor}{\#if\ \_WIN32||\_WIN64}}
\DoxyCodeLine{00254\ \ \ \ \ uintptr\_t\ \mbox{\hyperlink{sugar_8h_a67af2cba5d35997524b2d5adb0a0e40a}{thread\_id}}\ =\ GetCurrentThreadId();}
\DoxyCodeLine{00255\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00256\ \ \ \ \ uintptr\_t\ \mbox{\hyperlink{sugar_8h_a67af2cba5d35997524b2d5adb0a0e40a}{thread\_id}}\ =\ uintptr\_t(\mbox{\hyperlink{pthread__minport__windows_8h_a31ffbf449d7404f9bb088564190c6bce}{pthread\_self}}());}
\DoxyCodeLine{00257\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00258\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ TBB\_USE\_ASSERT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{keywordflow}{switch}(\ op\ )\ \{}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{cilk-tbb-interop_8h_aa86646769ffbe6c6f45cccab84d8ad0aa9dc34964df7d281ddf8c89b838c01bdb}{CILK\_TBB\_STACK\_ADOPT}}:\ \{}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ !current\ \&\&\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_cilk\_state==generic\_scheduler::cs\_limbo\ ||}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ current==\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ \&\&\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_cilk\_state==generic\_scheduler::cs\_running,\ \textcolor{stringliteral}{"{}invalid\ adoption"{}}\ );}
\DoxyCodeLine{00263\ \textcolor{preprocessor}{\#if\ TBB\_USE\_ASSERT}}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ current==\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ )}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__concurrent__hash__map_8cpp_a7de19b53af11a9175c96b42320b1d082}{runtime\_warning}}(\ \textcolor{stringliteral}{"{}redundant\ adoption\ of\ \%p\ by\ thread\ \%p\(\backslash\)n"{}},\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}},\ (\textcolor{keywordtype}{void}*)\mbox{\hyperlink{sugar_8h_a67af2cba5d35997524b2d5adb0a0e40a}{thread\_id}}\ );}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_cilk\_state\ =\ generic\_scheduler::cs\_running;}
\DoxyCodeLine{00267\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ TBB\_USE\_ASSERT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_abe1de8df4e3ecce96763951ac97540c6}{assume\_scheduler}}(\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ );}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{cilk-tbb-interop_8h_aa86646769ffbe6c6f45cccab84d8ad0aac5555015c172c81795c0092910e24f8c}{CILK\_TBB\_STACK\_ORPHAN}}:\ \{}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ current==\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ \&\&\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_cilk\_state==generic\_scheduler::cs\_running,\ \textcolor{stringliteral}{"{}invalid\ orphaning"{}}\ );}
\DoxyCodeLine{00273\ \textcolor{preprocessor}{\#if\ TBB\_USE\_ASSERT}}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_cilk\_state\ =\ generic\_scheduler::cs\_limbo;}
\DoxyCodeLine{00275\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ TBB\_USE\_ASSERT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_abe1de8df4e3ecce96763951ac97540c6}{assume\_scheduler}}(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{cilk-tbb-interop_8h_aa86646769ffbe6c6f45cccab84d8ad0aa8cb036a8274c26605cb11b442837b95f}{CILK\_TBB\_STACK\_RELEASE}}:\ \{}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(\ !current\ \&\&\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_cilk\_state==generic\_scheduler::cs\_limbo\ ||}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ current==\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ \&\&\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_cilk\_state==generic\_scheduler::cs\_running,\ \textcolor{stringliteral}{"{}invalid\ release"{}}\ );}
\DoxyCodeLine{00282\ \textcolor{preprocessor}{\#if\ TBB\_USE\_ASSERT}}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_cilk\_state\ =\ generic\_scheduler::cs\_freed;}
\DoxyCodeLine{00284\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ TBB\_USE\_ASSERT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>my\_cilk\_unwatch\_thunk.routine\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a5fbd38947c75c1e8494bc1bac598a9fe}{auto\_terminate}}(\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ );}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(0,\ \textcolor{stringliteral}{"{}invalid\ op"{}});}
\DoxyCodeLine{00291\ \ \ \ \ \}}
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00293\ \}}
\DoxyCodeLine{00294\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_SURVIVE\_THREAD\_SWITCH\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \textcolor{preprocessor}{\#if\ \_\_TBB\_NUMA\_SUPPORT}}
\DoxyCodeLine{00297\ }
\DoxyCodeLine{00298\ \textcolor{preprocessor}{\#if\ \_\_TBB\_WEAK\_SYMBOLS\_PRESENT}}
\DoxyCodeLine{00299\ \textcolor{preprocessor}{\#pragma\ weak\ initialize\_numa\_topology}}
\DoxyCodeLine{00300\ \textcolor{preprocessor}{\#pragma\ weak\ allocate\_binding\_handler}}
\DoxyCodeLine{00301\ \textcolor{preprocessor}{\#pragma\ weak\ deallocate\_binding\_handler}}
\DoxyCodeLine{00302\ \textcolor{preprocessor}{\#pragma\ weak\ bind\_to\_node}}
\DoxyCodeLine{00303\ \textcolor{preprocessor}{\#pragma\ weak\ restore\_affinity}}
\DoxyCodeLine{00304\ }
\DoxyCodeLine{00305\ \textcolor{keyword}{extern}\ \textcolor{stringliteral}{"{}C"{}}\ \{}
\DoxyCodeLine{00306\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacetbb_1_1internal_a77bee89b81b4eea070ce7f26842b5b7f}{initialize\_numa\_topology}}(}
\DoxyCodeLine{00307\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ groups\_num,\ \textcolor{keywordtype}{int}\&\ nodes\_count,\ \textcolor{keywordtype}{int}*\&\ indexes\_list,\ \textcolor{keywordtype}{int}*\&\ concurrency\_list\ );}
\DoxyCodeLine{00308\ }
\DoxyCodeLine{00309\ \mbox{\hyperlink{classtbb_1_1internal_1_1binding__handler}{binding\_handler}}*\ \mbox{\hyperlink{namespacetbb_1_1internal_af4f2aa31c87e7e7866031ab504ebebeb}{allocate\_binding\_handler}}(\ \textcolor{keywordtype}{int}\ slot\_num\ );}
\DoxyCodeLine{00310\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacetbb_1_1internal_af00b8a392cc60b2f569b86c7bfdfc9ef}{deallocate\_binding\_handler}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1binding__handler}{binding\_handler}}*\ handler\_ptr\ );}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacetbb_1_1internal_a40510d84a760a403c77b7b6112651e3f}{bind\_to\_node}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1binding__handler}{binding\_handler}}*\ handler\_ptr,\ \textcolor{keywordtype}{int}\ slot\_num,\ \textcolor{keywordtype}{int}\ numa\_id\ );}
\DoxyCodeLine{00313\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacetbb_1_1internal_aebd991542d79483dc6fb3d5b42bf8c57}{restore\_affinity}}(\ \mbox{\hyperlink{classtbb_1_1internal_1_1binding__handler}{binding\_handler}}*\ handler\_ptr,\ \textcolor{keywordtype}{int}\ slot\_num\ );}
\DoxyCodeLine{00314\ \}}
\DoxyCodeLine{00315\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_WEAK\_SYMBOLS\_PRESENT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ \textcolor{comment}{//\ Handlers\ for\ communication\ with\ TBBbind}}
\DoxyCodeLine{00318\ \textcolor{preprocessor}{\#if\ \_WIN32\ ||\ \_WIN64\ ||\ \_\_linux\_\_}}
\DoxyCodeLine{00319\ \textcolor{keyword}{static}\ \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}\ (*initialize\_numa\_topology\_ptr)(}
\DoxyCodeLine{00320\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ groups\_num,\ \textcolor{keywordtype}{int}\&\ nodes\_count,\ \textcolor{keywordtype}{int}*\&\ indexes\_list,\ \textcolor{keywordtype}{int}*\&\ concurrency\_list\ )\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00321\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_WIN32\ ||\ \_WIN64\ ||\ \_\_linux\_\_\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00322\ }
\DoxyCodeLine{00323\ \textcolor{keyword}{static}\ \mbox{\hyperlink{classtbb_1_1internal_1_1binding__handler}{binding\_handler}}*\ (*allocate\_binding\_handler\_ptr)(\ \textcolor{keywordtype}{int}\ slot\_num\ )\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00324\ \textcolor{keyword}{static}\ \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}\ (*deallocate\_binding\_handler\_ptr)(\ \mbox{\hyperlink{classtbb_1_1internal_1_1binding__handler}{binding\_handler}}*\ handler\_ptr\ )\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \textcolor{keyword}{static}\ \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}\ (*bind\_to\_node\_ptr)(\ \mbox{\hyperlink{classtbb_1_1internal_1_1binding__handler}{binding\_handler}}*\ handler\_ptr,\ \textcolor{keywordtype}{int}\ slot\_num,\ \textcolor{keywordtype}{int}\ numa\_id\ )\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00327\ \textcolor{keyword}{static}\ \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}\ (*restore\_affinity\_ptr)(\ \mbox{\hyperlink{classtbb_1_1internal_1_1binding__handler}{binding\_handler}}*\ handler\_ptr,\ \textcolor{keywordtype}{int}\ slot\_num\ )\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \textcolor{preprocessor}{\#if\ \_WIN32\ ||\ \_WIN64\ ||\ \_\_linux\_\_}}
\DoxyCodeLine{00330\ \textcolor{comment}{//\ Table\ describing\ how\ to\ link\ the\ handlers.}}
\DoxyCodeLine{00331\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ dynamic\_link\_descriptor\ TbbBindLinkTable[]\ =\ \{}
\DoxyCodeLine{00332\ \ \ \ \ \mbox{\hyperlink{dynamic__link_8h_a936c2724b498e02f80811f92ee06255a}{DLD}}(\mbox{\hyperlink{namespacetbb_1_1internal_a77bee89b81b4eea070ce7f26842b5b7f}{initialize\_numa\_topology}},\ initialize\_numa\_topology\_ptr),}
\DoxyCodeLine{00333\ \ \ \ \ \mbox{\hyperlink{dynamic__link_8h_a936c2724b498e02f80811f92ee06255a}{DLD}}(\mbox{\hyperlink{namespacetbb_1_1internal_af4f2aa31c87e7e7866031ab504ebebeb}{allocate\_binding\_handler}},\ allocate\_binding\_handler\_ptr),}
\DoxyCodeLine{00334\ \ \ \ \ \mbox{\hyperlink{dynamic__link_8h_a936c2724b498e02f80811f92ee06255a}{DLD}}(\mbox{\hyperlink{namespacetbb_1_1internal_af00b8a392cc60b2f569b86c7bfdfc9ef}{deallocate\_binding\_handler}},\ deallocate\_binding\_handler\_ptr),}
\DoxyCodeLine{00335\ \ \ \ \ \mbox{\hyperlink{dynamic__link_8h_a936c2724b498e02f80811f92ee06255a}{DLD}}(\mbox{\hyperlink{namespacetbb_1_1internal_a40510d84a760a403c77b7b6112651e3f}{bind\_to\_node}},\ bind\_to\_node\_ptr),}
\DoxyCodeLine{00336\ \ \ \ \ \mbox{\hyperlink{dynamic__link_8h_a936c2724b498e02f80811f92ee06255a}{DLD}}(\mbox{\hyperlink{namespacetbb_1_1internal_aebd991542d79483dc6fb3d5b42bf8c57}{restore\_affinity}},\ restore\_affinity\_ptr)}
\DoxyCodeLine{00337\ \};}
\DoxyCodeLine{00338\ }
\DoxyCodeLine{00339\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ LinkTableSize\ =\ 5;}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00341\ \textcolor{preprocessor}{\#if\ TBB\_USE\_DEBUG}}
\DoxyCodeLine{00342\ \textcolor{preprocessor}{\#define\ DEBUG\_SUFFIX\ "{}\_debug"{}}}
\DoxyCodeLine{00343\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00344\ \textcolor{preprocessor}{\#define\ DEBUG\_SUFFIX}}
\DoxyCodeLine{00345\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ TBB\_USE\_DEBUG\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00347\ \textcolor{preprocessor}{\#if\ \_WIN32\ ||\ \_WIN64}}
\DoxyCodeLine{00348\ \textcolor{preprocessor}{\#define\ TBBBIND\_NAME\ "{}tbbbind"{}\ DEBUG\_SUFFIX\ "{}.dll"{}}}
\DoxyCodeLine{00349\ \textcolor{preprocessor}{\#elif\ \_\_linux\_\_}}
\DoxyCodeLine{00350\ \textcolor{preprocessor}{\#define\ TBBBIND\_NAME\ "{}libtbbbind"{}\ DEBUG\_SUFFIX\ \ \_\_TBB\_STRING(.so.TBB\_COMPATIBLE\_INTERFACE\_VERSION)}}
\DoxyCodeLine{00351\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_linux\_\_\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00352\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_WIN32\ ||\ \_WIN64\ ||\ \_\_linux\_\_\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00353\ }
\DoxyCodeLine{00354\ \textcolor{comment}{//\ Stubs\ that\ will\ be\ used\ if\ TBBbind\ library\ is\ unavailable.}}
\DoxyCodeLine{00355\ \textcolor{keyword}{static}\ \mbox{\hyperlink{classtbb_1_1internal_1_1binding__handler}{binding\_handler}}*\ dummy\_allocate\_binding\_handler\ (\ \textcolor{keywordtype}{int}\ )\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};\ \}}
\DoxyCodeLine{00356\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ dummy\_deallocate\_binding\_handler\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1binding__handler}{binding\_handler}}*\ )\ \{\ \}}
\DoxyCodeLine{00357\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ dummy\_bind\_to\_node\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1binding__handler}{binding\_handler}}*,\ \textcolor{keywordtype}{int},\ \textcolor{keywordtype}{int}\ )\ \{\ \}}
\DoxyCodeLine{00358\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ dummy\_restore\_affinity\ (\ \mbox{\hyperlink{classtbb_1_1internal_1_1binding__handler}{binding\_handler}}*,\ \textcolor{keywordtype}{int}\ )\ \{\ \}}
\DoxyCodeLine{00359\ }
\DoxyCodeLine{00360\ \textcolor{comment}{//\ Representation\ of\ NUMA\ topology\ information\ on\ the\ TBB\ side.}}
\DoxyCodeLine{00361\ \textcolor{comment}{//\ NUMA\ topology\ may\ be\ initialized\ by\ third-\/party\ component\ (e.g.\ hwloc)}}
\DoxyCodeLine{00362\ \textcolor{comment}{//\ or\ just\ filled\ by\ default\ stubs\ (1\ NUMA\ node\ with\ 0\ index\ and}}
\DoxyCodeLine{00363\ \textcolor{comment}{//\ default\_num\_threads\ value\ as\ default\_concurrency).}}
\DoxyCodeLine{00364\ \textcolor{keyword}{namespace\ }numa\_topology\ \{}
\DoxyCodeLine{00365\ \textcolor{keyword}{namespace\ }\{}
\DoxyCodeLine{00366\ \textcolor{keywordtype}{int}\ \ numa\_nodes\_count\ =\ 0;}
\DoxyCodeLine{00367\ \textcolor{keywordtype}{int}*\ numa\_indexes\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00368\ \textcolor{keywordtype}{int}*\ default\_concurrency\_list\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00369\ \textcolor{keyword}{static}\ tbb::atomic<do\_once\_state>\ numa\_topology\_init\_state;}
\DoxyCodeLine{00370\ \}\ \textcolor{comment}{//\ internal\ namespace}}
\DoxyCodeLine{00371\ }
\DoxyCodeLine{00372\ \textcolor{comment}{//\ Tries\ to\ load\ TBBbind\ library\ API,\ if\ success,\ gets\ NUMA\ topology\ information\ from\ it,}}
\DoxyCodeLine{00373\ \textcolor{comment}{//\ in\ another\ case,\ fills\ NUMA\ topology\ by\ stubs.}}
\DoxyCodeLine{00374\ \textcolor{comment}{//\ TODO:\ Add\ TBBbind\ loading\ status\ if\ TBB\_VERSION\ is\ set.}}
\DoxyCodeLine{00375\ \textcolor{keywordtype}{void}\ initialization\_impl()\ \{}
\DoxyCodeLine{00376\ \ \ \ \ governor::one\_time\_init();}
\DoxyCodeLine{00377\ }
\DoxyCodeLine{00378\ \textcolor{preprocessor}{\#if\ \_WIN32\ ||\ \_WIN64\ ||\ \_\_linux\_\_}}
\DoxyCodeLine{00379\ \ \ \ \ \textcolor{keywordtype}{bool}\ load\_tbbbind\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00380\ \textcolor{preprocessor}{\#if\ \_WIN32\ \&\&\ !\_WIN64}}
\DoxyCodeLine{00381\ \ \ \ \ \textcolor{comment}{//\ For\ 32-\/bit\ Windows\ applications,\ process\ affinity\ masks\ can\ only\ support\ up\ to\ 32\ logical\ CPUs.}}
\DoxyCodeLine{00382\ \ \ \ \ SYSTEM\_INFO\ si;}
\DoxyCodeLine{00383\ \ \ \ \ GetNativeSystemInfo(\&si);}
\DoxyCodeLine{00384\ \ \ \ \ load\_tbbbind\ =\ si.dwNumberOfProcessors\ <=\ 32;}
\DoxyCodeLine{00385\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_WIN32\ \&\&\ !\_WIN64\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00386\ }
\DoxyCodeLine{00387\ \ \ \ \ \textcolor{keywordflow}{if}\ (load\_tbbbind\ \&\&\ \mbox{\hyperlink{dynamic__link_8cpp_aca8bbbbc28690d986ae2636bae2754f7}{dynamic\_link}}(TBBBIND\_NAME,\ TbbBindLinkTable,\ LinkTableSize))\ \{}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ number\_of\_groups\ =\ 1;}
\DoxyCodeLine{00389\ \textcolor{preprocessor}{\#if\ \_WIN32\ ||\ \_WIN64}}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ number\_of\_groups\ =\ NumberOfProcessorGroups();}
\DoxyCodeLine{00391\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_WIN32\ ||\ \_WIN64\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ initialize\_numa\_topology\_ptr(}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \ \ \ \ number\_of\_groups,\ numa\_nodes\_count,\ numa\_indexes,\ default\_concurrency\_list);}
\DoxyCodeLine{00394\ }
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (numa\_nodes\_count==1\ \&\&\ numa\_indexes[0]\ >=\ 0)\ \{}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(default\_concurrency\_list[numa\_indexes[0]]\ ==\ (\textcolor{keywordtype}{int})governor::default\_num\_threads(),}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}default\_concurrency()\ should\ be\ equal\ to\ governor::default\_num\_threads()\ on\ single"{}}}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}NUMA\ node\ systems."{}});}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00401\ \ \ \ \ \}}
\DoxyCodeLine{00402\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_WIN32\ ||\ \_WIN64\ ||\ \_\_linux\_\_\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00403\ }
\DoxyCodeLine{00404\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ dummy\_index\ =\ -\/1;}
\DoxyCodeLine{00405\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ dummy\_concurrency\ =\ governor::default\_num\_threads();}
\DoxyCodeLine{00406\ }
\DoxyCodeLine{00407\ \ \ \ \ numa\_nodes\_count\ =\ 1;}
\DoxyCodeLine{00408\ \ \ \ \ numa\_indexes\ =\ \&dummy\_index;}
\DoxyCodeLine{00409\ \ \ \ \ default\_concurrency\_list\ =\ \&dummy\_concurrency;}
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00411\ \ \ \ \ allocate\_binding\_handler\_ptr\ =\ dummy\_allocate\_binding\_handler;}
\DoxyCodeLine{00412\ \ \ \ \ deallocate\_binding\_handler\_ptr\ =\ dummy\_deallocate\_binding\_handler;}
\DoxyCodeLine{00413\ }
\DoxyCodeLine{00414\ \ \ \ \ bind\_to\_node\_ptr\ =\ dummy\_bind\_to\_node;}
\DoxyCodeLine{00415\ \ \ \ \ restore\_affinity\_ptr\ =\ dummy\_restore\_affinity;}
\DoxyCodeLine{00416\ \}}
\DoxyCodeLine{00417\ }
\DoxyCodeLine{00418\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{convex__hull__bench_8cpp_a95e22276c8bf0c515dff66661152fd4c}{initialize}}()\ \{}
\DoxyCodeLine{00419\ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a1082394ca8392ef2aa6795b57a756fa5}{atomic\_do\_once}}(initialization\_impl,\ numa\_topology\_init\_state);}
\DoxyCodeLine{00420\ \}}
\DoxyCodeLine{00421\ }
\DoxyCodeLine{00422\ \textcolor{keywordtype}{unsigned}\ nodes\_count()\ \{}
\DoxyCodeLine{00423\ \ \ \ \ \mbox{\hyperlink{convex__hull__bench_8cpp_a95e22276c8bf0c515dff66661152fd4c}{initialize}}();}
\DoxyCodeLine{00424\ \ \ \ \ \textcolor{keywordflow}{return}\ numa\_nodes\_count;}
\DoxyCodeLine{00425\ \}}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00427\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceeastl_a46734ee4d1a924a12ed3d4ca8021925a}{fill}}(\ \textcolor{keywordtype}{int}*\ indexes\_array\ )\ \{}
\DoxyCodeLine{00428\ \ \ \ \ \mbox{\hyperlink{convex__hull__bench_8cpp_a95e22276c8bf0c515dff66661152fd4c}{initialize}}();}
\DoxyCodeLine{00429\ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ numa\_nodes\_count;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++\ )\ \{}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ indexes\_array[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]\ =\ numa\_indexes[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}];}
\DoxyCodeLine{00431\ \ \ \ \ \}}
\DoxyCodeLine{00432\ \}}
\DoxyCodeLine{00433\ }
\DoxyCodeLine{00434\ \textcolor{keywordtype}{int}\ default\_concurrency(\ \textcolor{keywordtype}{int}\ node\_id\ )\ \{}
\DoxyCodeLine{00435\ \ \ \ \ \textcolor{keywordflow}{if}\ (node\_id\ >=\ 0)\ \{}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{convex__hull__bench_8cpp_a95e22276c8bf0c515dff66661152fd4c}{initialize}}();}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ default\_concurrency\_list[node\_id];}
\DoxyCodeLine{00438\ \ \ \ \ \}}
\DoxyCodeLine{00439\ \ \ \ \ \textcolor{keywordflow}{return}\ governor::default\_num\_threads();}
\DoxyCodeLine{00440\ \}}
\DoxyCodeLine{00441\ }
\DoxyCodeLine{00442\ \}\ \textcolor{comment}{//\ namespace\ numa\_topology}}
\DoxyCodeLine{00443\ }
\DoxyCodeLine{00444\ \mbox{\hyperlink{classtbb_1_1internal_1_1binding__handler}{binding\_handler}}*\ construct\_binding\_handler(\textcolor{keywordtype}{int}\ slot\_num)\ \{}
\DoxyCodeLine{00445\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(allocate\_binding\_handler\_ptr,\ \textcolor{stringliteral}{"{}tbbbind\ loading\ was\ not\ perfromed"{}});}
\DoxyCodeLine{00446\ \ \ \ \ \textcolor{keywordflow}{return}\ allocate\_binding\_handler\_ptr(slot\_num);}
\DoxyCodeLine{00447\ \}}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00449\ \textcolor{keywordtype}{void}\ destroy\_binding\_handler(\mbox{\hyperlink{classtbb_1_1internal_1_1binding__handler}{binding\_handler}}*\ handler\_ptr)\ \{}
\DoxyCodeLine{00450\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(deallocate\_binding\_handler\_ptr,\ \textcolor{stringliteral}{"{}tbbbind\ loading\ was\ not\ perfromed"{}});}
\DoxyCodeLine{00451\ \ \ \ \ deallocate\_binding\_handler\_ptr(handler\_ptr);}
\DoxyCodeLine{00452\ \}}
\DoxyCodeLine{00453\ }
\DoxyCodeLine{00454\ \textcolor{keywordtype}{void}\ bind\_thread\_to\_node(\mbox{\hyperlink{classtbb_1_1internal_1_1binding__handler}{binding\_handler}}*\ handler\_ptr,\ \textcolor{keywordtype}{int}\ slot\_num\ ,\ \textcolor{keywordtype}{int}\ numa\_id)\ \{}
\DoxyCodeLine{00455\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(slot\_num\ >=\ 0,\ \textcolor{stringliteral}{"{}Negative\ thread\ index"{}});}
\DoxyCodeLine{00456\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(bind\_to\_node\_ptr,\ \textcolor{stringliteral}{"{}tbbbind\ loading\ was\ not\ perfromed"{}});}
\DoxyCodeLine{00457\ \ \ \ \ bind\_to\_node\_ptr(handler\_ptr,\ slot\_num,\ numa\_id);}
\DoxyCodeLine{00458\ \}}
\DoxyCodeLine{00459\ }
\DoxyCodeLine{00460\ \textcolor{keywordtype}{void}\ restore\_affinity\_mask(\mbox{\hyperlink{classtbb_1_1internal_1_1binding__handler}{binding\_handler}}*\ handler\_ptr,\ \textcolor{keywordtype}{int}\ slot\_num)\ \{}
\DoxyCodeLine{00461\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(slot\_num\ >=\ 0,\ \textcolor{stringliteral}{"{}Negative\ thread\ index"{}});}
\DoxyCodeLine{00462\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(restore\_affinity\_ptr,\ \textcolor{stringliteral}{"{}tbbbind\ loading\ was\ not\ perfromed"{}});}
\DoxyCodeLine{00463\ \ \ \ \ restore\_affinity\_ptr(handler\_ptr,\ slot\_num);}
\DoxyCodeLine{00464\ \}}
\DoxyCodeLine{00465\ }
\DoxyCodeLine{00466\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_NUMA\_SUPPORT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00467\ }
\DoxyCodeLine{00468\ \}\ \textcolor{comment}{//\ namespace\ internal}}
\DoxyCodeLine{00469\ }
\DoxyCodeLine{00470\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00471\ \textcolor{comment}{//\ task\_scheduler\_init}}
\DoxyCodeLine{00472\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00473\ }
\DoxyCodeLine{00474\ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespacetbb_1_1internal}{internal}};}
\DoxyCodeLine{00475\ }
\DoxyCodeLine{00477\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_a22ca8b871fa96e8fed1d2336616662d9}{task\_scheduler\_init::initialize}}(\ \textcolor{keywordtype}{int}\ number\_of\_threads\ )\ \{}
\DoxyCodeLine{00478\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_a22ca8b871fa96e8fed1d2336616662d9}{initialize}}(\ number\_of\_threads,\ 0\ );}
\DoxyCodeLine{00479\ \}}
\DoxyCodeLine{00480\ }
\DoxyCodeLine{00481\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_a22ca8b871fa96e8fed1d2336616662d9}{task\_scheduler\_init::initialize}}(\ \textcolor{keywordtype}{int}\ number\_of\_threads,\ \mbox{\hyperlink{namespacetbb_a1a268320974a3357e9609a2f98be5090}{stack\_size\_type}}\ thread\_stack\_size\ )\ \{}
\DoxyCodeLine{00482\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_GROUP\_CONTEXT\ \&\&\ TBB\_USE\_EXCEPTIONS}}
\DoxyCodeLine{00483\ \ \ \ \ uintptr\_t\ new\_mode\ =\ thread\_stack\_size\ \&\ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_ac1123d7a58449c28bedcfde7d29b8e88a3c73577be5ef443865cee3675e2f7121}{propagation\_mode\_mask}};}
\DoxyCodeLine{00484\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00485\ \ \ \ \ thread\_stack\_size\ \&=\ \string~(\mbox{\hyperlink{namespacetbb_a1a268320974a3357e9609a2f98be5090}{stack\_size\_type}})\mbox{\hyperlink{classtbb_1_1task__scheduler__init_ac1123d7a58449c28bedcfde7d29b8e88a3c73577be5ef443865cee3675e2f7121}{propagation\_mode\_mask}};}
\DoxyCodeLine{00486\ \ \ \ \ \textcolor{keywordflow}{if}(\ number\_of\_threads!=\mbox{\hyperlink{classtbb_1_1task__scheduler__init_af0e49ff2f59a4e53c9c07897b57f084d}{deferred}}\ )\ \{}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a69f490e0a73f64e92a8eac201f760e5e}{\_\_TBB\_ASSERT\_RELEASE}}(\ !\mbox{\hyperlink{classtbb_1_1task__scheduler__init_ac98fef00826dfd6d03191c3e1e92a5cf}{my\_scheduler}},\ \textcolor{stringliteral}{"{}task\_scheduler\_init\ already\ initialized"{}}\ );}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a69f490e0a73f64e92a8eac201f760e5e}{\_\_TBB\_ASSERT\_RELEASE}}(\ number\_of\_threads==\mbox{\hyperlink{classtbb_1_1task__scheduler__init_a945886f5ef48300a8ebff2d077c166b1}{automatic}}\ ||\ number\_of\_threads\ >\ 0,}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}number\_of\_threads\ for\ task\_scheduler\_init\ must\ be\ automatic\ or\ positive"{}}\ );}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{internal::generic\_scheduler}}\ *\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_abf62b8bc4890ad846ff01349f8d46a84}{governor::init\_scheduler}}(\ number\_of\_threads,\ thread\_stack\_size,\ \textcolor{comment}{/*auto\_init=*/}\textcolor{keyword}{false}\ );}
\DoxyCodeLine{00491\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_GROUP\_CONTEXT\ \&\&\ TBB\_USE\_EXCEPTIONS}}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>master\_outermost\_level()\ )\ \{}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \ \ \ \ uintptr\_t\ \&vt\ =\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>default\_context()-\/>my\_version\_and\_traits;}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \ \ \ \ uintptr\_t\ prev\_mode\ =\ vt\ \&\ task\_group\_context::exact\_exception\ ?\ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_ac1123d7a58449c28bedcfde7d29b8e88ad99bf7c90fb5b99305737a290ce71abf}{propagation\_mode\_exact}}\ :\ 0;}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \ \ \ \ vt\ =\ new\_mode\ \&\ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_ac1123d7a58449c28bedcfde7d29b8e88ad99bf7c90fb5b99305737a290ce71abf}{propagation\_mode\_exact}}\ ?\ vt\ |\ task\_group\_context::exact\_exception}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ new\_mode\ \&\ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_ac1123d7a58449c28bedcfde7d29b8e88ae6bd9ea5a3f160fbddcf2c43a79d6468}{propagation\_mode\_captured}}\ ?\ vt\ \&\ \string~task\_group\_context::exact\_exception\ :\ vt;}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Use\ least\ significant\ bit\ of\ the\ scheduler\ pointer\ to\ store\ previous\ mode.}}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ is\ necessary\ when\ components\ compiled\ with\ different\ compilers\ and/or}}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TBB\ versions\ initialize\ the}}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_ac98fef00826dfd6d03191c3e1e92a5cf}{my\_scheduler}}\ =\ \textcolor{keyword}{static\_cast<}scheduler*\textcolor{keyword}{>}((\mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*)((uintptr\_t)\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ |\ prev\_mode));}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00503\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_TASK\_GROUP\_CONTEXT\ \&\&\ TBB\_USE\_EXCEPTIONS\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_ac98fef00826dfd6d03191c3e1e92a5cf}{my\_scheduler}}\ =\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}};}
\DoxyCodeLine{00505\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a69f490e0a73f64e92a8eac201f760e5e}{\_\_TBB\_ASSERT\_RELEASE}}(\ !thread\_stack\_size,\ \textcolor{stringliteral}{"{}deferred\ initialization\ ignores\ stack\ size\ setting"{}}\ );}
\DoxyCodeLine{00507\ \ \ \ \ \}}
\DoxyCodeLine{00508\ \}}
\DoxyCodeLine{00509\ }
\DoxyCodeLine{00510\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_a2647279bff44f88c82eead707d4c7a14}{task\_scheduler\_init::internal\_terminate}}(\ \textcolor{keywordtype}{bool}\ blocking\ )\ \{}
\DoxyCodeLine{00511\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_GROUP\_CONTEXT\ \&\&\ TBB\_USE\_EXCEPTIONS}}
\DoxyCodeLine{00512\ \ \ \ \ uintptr\_t\ prev\_mode\ =\ (uintptr\_t)\mbox{\hyperlink{classtbb_1_1task__scheduler__init_ac98fef00826dfd6d03191c3e1e92a5cf}{my\_scheduler}}\ \&\ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_ac1123d7a58449c28bedcfde7d29b8e88ad99bf7c90fb5b99305737a290ce71abf}{propagation\_mode\_exact}};}
\DoxyCodeLine{00513\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_ac98fef00826dfd6d03191c3e1e92a5cf}{my\_scheduler}}\ =\ (scheduler*)((uintptr\_t)\mbox{\hyperlink{classtbb_1_1task__scheduler__init_ac98fef00826dfd6d03191c3e1e92a5cf}{my\_scheduler}}\ \&\ \string~(uintptr\_t)\mbox{\hyperlink{classtbb_1_1task__scheduler__init_ac1123d7a58449c28bedcfde7d29b8e88ad99bf7c90fb5b99305737a290ce71abf}{propagation\_mode\_exact}});}
\DoxyCodeLine{00514\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_TASK\_GROUP\_CONTEXT\ \&\&\ TBB\_USE\_EXCEPTIONS\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00515\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classtbb_1_1internal_1_1generic__scheduler}{generic\_scheduler}}*\textcolor{keyword}{>}(\mbox{\hyperlink{classtbb_1_1task__scheduler__init_ac98fef00826dfd6d03191c3e1e92a5cf}{my\_scheduler}});}
\DoxyCodeLine{00516\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_ac98fef00826dfd6d03191c3e1e92a5cf}{my\_scheduler}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00517\ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a69f490e0a73f64e92a8eac201f760e5e}{\_\_TBB\_ASSERT\_RELEASE}}(\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}},\ \textcolor{stringliteral}{"{}task\_scheduler\_init::terminate\ without\ corresponding\ task\_scheduler\_init::initialize()"{}});}
\DoxyCodeLine{00518\ \textcolor{preprocessor}{\#if\ \_\_TBB\_TASK\_GROUP\_CONTEXT\ \&\&\ TBB\_USE\_EXCEPTIONS}}
\DoxyCodeLine{00519\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>master\_outermost\_level()\ )\ \{}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ uintptr\_t\ \&vt\ =\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>default\_context()-\/>my\_version\_and\_traits;}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ vt\ =\ prev\_mode\ \&\ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_ac1123d7a58449c28bedcfde7d29b8e88ad99bf7c90fb5b99305737a290ce71abf}{propagation\_mode\_exact}}\ ?\ vt\ |\ task\_group\_context::exact\_exception}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ vt\ \&\ \string~task\_group\_context::exact\_exception;}
\DoxyCodeLine{00523\ \ \ \ \ \}}
\DoxyCodeLine{00524\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_TASK\_GROUP\_CONTEXT\ \&\&\ TBB\_USE\_EXCEPTIONS\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00525\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a0962408ba1eaf67d0ad741a0749f3a4e}{governor::terminate\_scheduler}}(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}},\ blocking);}
\DoxyCodeLine{00526\ \}}
\DoxyCodeLine{00527\ }
\DoxyCodeLine{00528\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_afcd615b84c2f57d7ada13813a8443ecf}{task\_scheduler\_init::terminate}}()\ \{}
\DoxyCodeLine{00529\ \ \ \ \ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_a2647279bff44f88c82eead707d4c7a14}{internal\_terminate}}(\textcolor{comment}{/*blocking\_terminate=*/}\textcolor{keyword}{false});}
\DoxyCodeLine{00530\ \}}
\DoxyCodeLine{00531\ }
\DoxyCodeLine{00532\ \textcolor{preprocessor}{\#if\ \_\_TBB\_SUPPORTS\_WORKERS\_WAITING\_IN\_TERMINATE}}
\DoxyCodeLine{00533\ \textcolor{keywordtype}{bool}\ task\_scheduler\_init::internal\_blocking\_terminate(\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{harness__allocator_8h_a0a41041162081daa0400705f6fa9a3ab}{throwing}}\ )\ \{}
\DoxyCodeLine{00534\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{testhelper_8h_a047ea0d874e6802b9b6d08f6b50248e5}{ok}}\ =\ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_a2647279bff44f88c82eead707d4c7a14}{internal\_terminate}}(\ \textcolor{comment}{/*blocking\_terminate=*/}\textcolor{keyword}{true}\ );}
\DoxyCodeLine{00535\ \textcolor{preprocessor}{\#if\ TBB\_USE\_EXCEPTIONS}}
\DoxyCodeLine{00536\ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{harness__allocator_8h_a0a41041162081daa0400705f6fa9a3ab}{throwing}}\ \&\&\ !\mbox{\hyperlink{testhelper_8h_a047ea0d874e6802b9b6d08f6b50248e5}{ok}}\ )}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a61a681f9fd15fdb055f7725d6416ddf4}{throw\_exception}}(\ eid\_blocking\_thread\_join\_impossible\ );}
\DoxyCodeLine{00538\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00539\ \ \ \ \ suppress\_unused\_warning(\ \mbox{\hyperlink{harness__allocator_8h_a0a41041162081daa0400705f6fa9a3ab}{throwing}}\ );}
\DoxyCodeLine{00540\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00541\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{testhelper_8h_a047ea0d874e6802b9b6d08f6b50248e5}{ok}};}
\DoxyCodeLine{00542\ \}}
\DoxyCodeLine{00543\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_TBB\_SUPPORTS\_WORKERS\_WAITING\_IN\_TERMINATE}}
\DoxyCodeLine{00544\ }
\DoxyCodeLine{00545\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classtbb_1_1task__scheduler__init_a7177e341a66163cbed948013dbe86c56}{task\_scheduler\_init::default\_num\_threads}}()\ \{}
\DoxyCodeLine{00546\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classtbb_1_1internal_1_1governor_a87ef607c22c347eb97ddafa4384b4f1d}{governor::default\_num\_threads}}();}
\DoxyCodeLine{00547\ \}}
\DoxyCodeLine{00548\ }
\DoxyCodeLine{00549\ \}\ \textcolor{comment}{//\ namespace\ tbb}}

\end{DoxyCode}
