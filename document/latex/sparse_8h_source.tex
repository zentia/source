\doxysection{sparse.\+h}
\hypertarget{sparse_8h_source}{}\label{sparse_8h_source}\index{external/taskflow/3rd-\/party/eigen-\/3.3.7/test/sparse.h@{external/taskflow/3rd-\/party/eigen-\/3.3.7/test/sparse.h}}
\mbox{\hyperlink{sparse_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ This\ file\ is\ part\ of\ Eigen,\ a\ lightweight\ C++\ template\ library}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ for\ linear\ algebra.}}
\DoxyCodeLine{00003\ \textcolor{comment}{//}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ Copyright\ (C)\ 2008-\/2011\ Gael\ Guennebaud\ <gael.guennebaud@inria.fr>}}
\DoxyCodeLine{00005\ \textcolor{comment}{//}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ This\ Source\ Code\ Form\ is\ subject\ to\ the\ terms\ of\ the\ Mozilla}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ Public\ License\ v.\ 2.0.\ If\ a\ copy\ of\ the\ MPL\ was\ not\ distributed}}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ with\ this\ file,\ You\ can\ obtain\ one\ at\ http://mozilla.org/MPL/2.0/.}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#ifndef\ EIGEN\_TESTSPARSE\_H}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#define\ EIGEN\_TESTSPARSE\_H}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#define\ EIGEN\_YES\_I\_KNOW\_SPARSE\_MODULE\_IS\_NOT\_STABLE\_YET}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{taskflow_23rd-party_2eigen-3_83_87_2test_2main_8h}{main.h}}"{}}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#if\ EIGEN\_GNUC\_AT\_LEAST(4,0)\ \&\&\ !defined\ \_\_ICC\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#ifdef\ min}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#undef\ min}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#ifdef\ max}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#undef\ max}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ <tr1/unordered\_map>}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#define\ EIGEN\_UNORDERED\_MAP\_SUPPORT}}
\DoxyCodeLine{00029\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacestd}{std}}\ \{}
\DoxyCodeLine{00030\ \ \ \textcolor{keyword}{using\ }std::tr1::unordered\_map;}
\DoxyCodeLine{00031\ \}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#ifdef\ EIGEN\_GOOGLEHASH\_SUPPORT}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\ \ \#include\ <google/sparse\_hash\_map>}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#include\ <Eigen/Cholesky>}}
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#include\ <Eigen/LU>}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#include\ <Eigen/Sparse>}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00043\ \ \ \mbox{\hyperlink{sparse_8h_aaa0e0961d8919f4b744f64c200ed99fdac57c7eb0d864246e4402f4710e5be051}{ForceNonZeroDiag}}\ =\ 1,}
\DoxyCodeLine{00044\ \ \ \mbox{\hyperlink{sparse_8h_aaa0e0961d8919f4b744f64c200ed99fdaf322de553f94d59a8ffe7249efc9322d}{MakeLowerTriangular}}\ =\ 2,}
\DoxyCodeLine{00045\ \ \ \mbox{\hyperlink{sparse_8h_aaa0e0961d8919f4b744f64c200ed99fdaca9b0a1f2b332c59c1922038fe8f74d5}{MakeUpperTriangular}}\ =\ 4,}
\DoxyCodeLine{00046\ \ \ \mbox{\hyperlink{sparse_8h_aaa0e0961d8919f4b744f64c200ed99fdaacfb9e8ff089599c25d8d6dd4c23ca2e}{ForceRealDiag}}\ =\ 8}
\DoxyCodeLine{00047\ \};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \textcolor{comment}{/*\ Initializes\ both\ a\ sparse\ and\ dense\ matrix\ with\ same\ random\ values,}}
\DoxyCodeLine{00050\ \textcolor{comment}{\ *\ and\ a\ ratio\ of\ \(\backslash\)a\ density\ non\ zero\ entries.}}
\DoxyCodeLine{00051\ \textcolor{comment}{\ *\ \(\backslash\)param\ flags\ is\ a\ union\ of\ ForceNonZeroDiag,\ MakeLowerTriangular\ and\ MakeUpperTriangular}}
\DoxyCodeLine{00052\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ allowing\ to\ control\ the\ shape\ of\ the\ matrix.}}
\DoxyCodeLine{00053\ \textcolor{comment}{\ *\ \(\backslash\)param\ zeroCoords\ and\ nonzeroCoords\ allows\ to\ get\ the\ coordinate\ lists\ of\ the\ non\ zero,}}
\DoxyCodeLine{00054\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ and\ zero\ coefficients\ respectively.}}
\DoxyCodeLine{00055\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00056\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Scalar,\textcolor{keywordtype}{int}\ Opt1,\textcolor{keywordtype}{int}\ Opt2,\textcolor{keyword}{typename}\ StorageIndex>\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00057\ \mbox{\hyperlink{sparse_8h_a3ba4abd21a1ace3122406c3b3b27fc5b}{initSparse}}(\textcolor{keywordtype}{double}\ density,}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_matrix}{Matrix<Scalar,Dynamic,Dynamic,Opt1>}}\&\ refMat,}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_sparse_matrix}{SparseMatrix<Scalar,Opt2,StorageIndex>}}\&\ sparseMat,}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{test__split__node_8cpp_afea5520dffc22c33fbcc0eb5f7e3d448}{flags}}\ =\ 0,}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ std::vector<\mbox{\hyperlink{class_eigen_1_1_matrix}{Matrix<StorageIndex,2,1>}}\ >*\ zeroCoords\ =\ 0,}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ std::vector<\mbox{\hyperlink{class_eigen_1_1_matrix}{Matrix<StorageIndex,2,1>}}\ >*\ nonzeroCoords\ =\ 0)}
\DoxyCodeLine{00063\ \{}
\DoxyCodeLine{00064\ \ \ \textcolor{keyword}{enum}\ \{\ IsRowMajor\ =\ \mbox{\hyperlink{class_sparse_matrix_ac5930a1eafa237523d217881086cba9b}{SparseMatrix<Scalar,Opt2,StorageIndex>::IsRowMajor}}\ \};}
\DoxyCodeLine{00065\ \ \ sparseMat.\mbox{\hyperlink{class_eigen_1_1_sparse_matrix_ad3c7416090f913e8685523cb3ab7c2f7}{setZero}}();}
\DoxyCodeLine{00066\ \ \ \textcolor{comment}{//sparseMat.reserve(int(refMat.rows()*refMat.cols()*density));}}
\DoxyCodeLine{00067\ \ \ sparseMat.\mbox{\hyperlink{class_eigen_1_1_sparse_matrix_a1518e58ac49bed0e2385b722a034f7d3}{reserve}}(VectorXi::Constant(IsRowMajor\ ?\ refMat.\mbox{\hyperlink{class_eigen_1_1_plain_object_base_aba7a925ce36c08ba2a08c90086f34718}{rows}}()\ :\ refMat.\mbox{\hyperlink{class_eigen_1_1_plain_object_base_a10b8b33b7587da564415561aa246f78f}{cols}}(),\ \textcolor{keywordtype}{int}((1.5*density)*(IsRowMajor?refMat.\mbox{\hyperlink{class_eigen_1_1_plain_object_base_a10b8b33b7587da564415561aa246f78f}{cols}}():refMat.\mbox{\hyperlink{class_eigen_1_1_plain_object_base_aba7a925ce36c08ba2a08c90086f34718}{rows}}()))));}
\DoxyCodeLine{00068\ \ \ }
\DoxyCodeLine{00069\ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{class_eigen_1_1_tensor}{Index}}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}=0;\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}<sparseMat.\mbox{\hyperlink{class_eigen_1_1_sparse_matrix_a4e5f706cfae14d2eaec1ea1e234905f1}{outerSize}}();\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}++)}
\DoxyCodeLine{00070\ \ \ \{}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{comment}{//sparseMat.startVec(j);}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{class_eigen_1_1_tensor}{Index}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<sparseMat.\mbox{\hyperlink{class_eigen_1_1_sparse_matrix_a0f42824d4a06ee1d1f6afbc4551c5896}{innerSize}}();\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++)}
\DoxyCodeLine{00073\ \ \ \ \ \{}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_tensor}{Index}}\ ai(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}),\ aj(\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}});}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(IsRowMajor)}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacestd_a3acbe51b6415e9284430194bf04944e1}{std::swap}}(ai,aj);}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ (internal::random<double>(0,1)\ <\ density)\ ?\ internal::random<Scalar>()\ :\ \mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}(0);}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{test__split__node_8cpp_afea5520dffc22c33fbcc0eb5f7e3d448}{flags}}\&\mbox{\hyperlink{sparse_8h_aaa0e0961d8919f4b744f64c200ed99fdac57c7eb0d864246e4402f4710e5be051}{ForceNonZeroDiag}})\ \&\&\ (\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}==\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}))}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ FIXME:\ the\ following\ is\ too\ conservative}}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ internal::random<Scalar>()*\mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}(3.);}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}*\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}};}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(numext::real(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})>0)\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ +=\ \mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}(5);}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ -\/=\ \mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}(5);}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{test__split__node_8cpp_afea5520dffc22c33fbcc0eb5f7e3d448}{flags}}\ \&\ \mbox{\hyperlink{sparse_8h_aaa0e0961d8919f4b744f64c200ed99fdaf322de553f94d59a8ffe7249efc9322d}{MakeLowerTriangular}})\ \&\&\ aj>ai)}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ \mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}(0);}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{test__split__node_8cpp_afea5520dffc22c33fbcc0eb5f7e3d448}{flags}}\ \&\ \mbox{\hyperlink{sparse_8h_aaa0e0961d8919f4b744f64c200ed99fdaca9b0a1f2b332c59c1922038fe8f74d5}{MakeUpperTriangular}})\ \&\&\ aj<ai)}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ \mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}(0);}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{test__split__node_8cpp_afea5520dffc22c33fbcc0eb5f7e3d448}{flags}}\&\mbox{\hyperlink{sparse_8h_aaa0e0961d8919f4b744f64c200ed99fdaacfb9e8ff089599c25d8d6dd4c23ca2e}{ForceRealDiag}})\ \&\&\ (\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}==\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}))}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ numext::real(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}});}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}!=\mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}(0))}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \textcolor{comment}{//sparseMat.insertBackByOuterInner(j,i)\ =\ v;}}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ sparseMat.\mbox{\hyperlink{class_eigen_1_1_sparse_matrix_acb1508292a88a951943c98b314782909}{insertByOuterInner}}(\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}},\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ =\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}};}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nonzeroCoords)}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ nonzeroCoords-\/>push\_back(\mbox{\hyperlink{class_eigen_1_1_matrix}{Matrix<StorageIndex,2,1>}}\ (ai,aj));}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (zeroCoords)}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ zeroCoords-\/>push\_back(\mbox{\hyperlink{class_eigen_1_1_matrix}{Matrix<StorageIndex,2,1>}}\ (ai,aj));}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00105\ \ \ \ \ \ \ refMat(ai,aj)\ =\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}};}
\DoxyCodeLine{00106\ \ \ \ \ \}}
\DoxyCodeLine{00107\ \ \ \}}
\DoxyCodeLine{00108\ \ \ \textcolor{comment}{//sparseMat.finalize();}}
\DoxyCodeLine{00109\ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Scalar,\textcolor{keywordtype}{int}\ Opt1,\textcolor{keywordtype}{int}\ Opt2,\textcolor{keyword}{typename}\ Index>\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00112\ \mbox{\hyperlink{sparse_8h_a3ba4abd21a1ace3122406c3b3b27fc5b}{initSparse}}(\textcolor{keywordtype}{double}\ density,}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_matrix}{Matrix<Scalar,Dynamic,Dynamic,\ Opt1>}}\&\ refMat,}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_dynamic_sparse_matrix}{DynamicSparseMatrix<Scalar,\ Opt2,\ Index>}}\&\ sparseMat,}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{test__split__node_8cpp_afea5520dffc22c33fbcc0eb5f7e3d448}{flags}}\ =\ 0,}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ std::vector<\mbox{\hyperlink{class_eigen_1_1_matrix}{Matrix<Index,2,1>}}\ >*\ zeroCoords\ =\ 0,}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ std::vector<\mbox{\hyperlink{class_eigen_1_1_matrix}{Matrix<Index,2,1>}}\ >*\ nonzeroCoords\ =\ 0)}
\DoxyCodeLine{00118\ \{}
\DoxyCodeLine{00119\ \ \ \textcolor{keyword}{enum}\ \{\ IsRowMajor\ =\ \mbox{\hyperlink{class_eigen_1_1_dynamic_sparse_matrix_a37eaf46ebd55406ec1b2026177f715f2}{DynamicSparseMatrix<Scalar,Opt2,Index>::IsRowMajor}}\ \};}
\DoxyCodeLine{00120\ \ \ sparseMat.\mbox{\hyperlink{class_eigen_1_1_dynamic_sparse_matrix_a2fed9a448bebd78ec98c30c3d2ec5407}{setZero}}();}
\DoxyCodeLine{00121\ \ \ sparseMat.\mbox{\hyperlink{class_eigen_1_1_dynamic_sparse_matrix_a20a85be37e667a2c639ae99ee58443cf}{reserve}}(\textcolor{keywordtype}{int}(refMat.\mbox{\hyperlink{class_eigen_1_1_plain_object_base_aba7a925ce36c08ba2a08c90086f34718}{rows}}()*refMat.\mbox{\hyperlink{class_eigen_1_1_plain_object_base_a10b8b33b7587da564415561aa246f78f}{cols}}()*density));}
\DoxyCodeLine{00122\ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}=0;\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}<sparseMat.\mbox{\hyperlink{class_eigen_1_1_dynamic_sparse_matrix_aa9fdcceaa71e86fb918ddcf47720bd6f}{outerSize}}();\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}++)}
\DoxyCodeLine{00123\ \ \ \{}
\DoxyCodeLine{00124\ \ \ \ \ sparseMat.\mbox{\hyperlink{class_eigen_1_1_dynamic_sparse_matrix_a294b998a50cc01859425e5e7c23d6108}{startVec}}(\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}});\ \textcolor{comment}{//\ not\ needed\ for\ DynamicSparseMatrix}}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<sparseMat.\mbox{\hyperlink{class_eigen_1_1_dynamic_sparse_matrix_a03877f41d99fd28f24a3f9bb97695ec2}{innerSize}}();\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++)}
\DoxyCodeLine{00126\ \ \ \ \ \{}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ ai(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}),\ aj(\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}});}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(IsRowMajor)}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacestd_a3acbe51b6415e9284430194bf04944e1}{std::swap}}(ai,aj);}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ (internal::random<double>(0,1)\ <\ density)\ ?\ internal::random<Scalar>()\ :\ \mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}(0);}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{test__split__node_8cpp_afea5520dffc22c33fbcc0eb5f7e3d448}{flags}}\&\mbox{\hyperlink{sparse_8h_aaa0e0961d8919f4b744f64c200ed99fdac57c7eb0d864246e4402f4710e5be051}{ForceNonZeroDiag}})\ \&\&\ (\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}==\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}))}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ internal::random<Scalar>()*\mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}(3.);}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}*\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ +\ \mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}(5.);}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{test__split__node_8cpp_afea5520dffc22c33fbcc0eb5f7e3d448}{flags}}\ \&\ \mbox{\hyperlink{sparse_8h_aaa0e0961d8919f4b744f64c200ed99fdaf322de553f94d59a8ffe7249efc9322d}{MakeLowerTriangular}})\ \&\&\ aj>ai)}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ \mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}(0);}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{test__split__node_8cpp_afea5520dffc22c33fbcc0eb5f7e3d448}{flags}}\ \&\ \mbox{\hyperlink{sparse_8h_aaa0e0961d8919f4b744f64c200ed99fdaca9b0a1f2b332c59c1922038fe8f74d5}{MakeUpperTriangular}})\ \&\&\ aj<ai)}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ \mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}(0);}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{test__split__node_8cpp_afea5520dffc22c33fbcc0eb5f7e3d448}{flags}}\&\mbox{\hyperlink{sparse_8h_aaa0e0961d8919f4b744f64c200ed99fdaacfb9e8ff089599c25d8d6dd4c23ca2e}{ForceRealDiag}})\ \&\&\ (\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}==\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}))}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ numext::real(\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}});}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}!=\mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}(0))}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ sparseMat.\mbox{\hyperlink{class_eigen_1_1_dynamic_sparse_matrix_a2e1ed0a9a793beebe56b99a6da3fc589}{insertBackByOuterInner}}(\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}},\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ =\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}};}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nonzeroCoords)}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ nonzeroCoords-\/>push\_back(\mbox{\hyperlink{class_eigen_1_1_matrix}{Matrix<Index,2,1>}}\ (ai,aj));}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (zeroCoords)}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ zeroCoords-\/>push\_back(\mbox{\hyperlink{class_eigen_1_1_matrix}{Matrix<Index,2,1>}}\ (ai,aj));}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00154\ \ \ \ \ \ \ refMat(ai,aj)\ =\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}};}
\DoxyCodeLine{00155\ \ \ \ \ \}}
\DoxyCodeLine{00156\ \ \ \}}
\DoxyCodeLine{00157\ \ \ sparseMat.\mbox{\hyperlink{class_eigen_1_1_dynamic_sparse_matrix_aa0abc0e4565143f103f0d7373bd4a125}{finalize}}();}
\DoxyCodeLine{00158\ \}}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Scalar,\textcolor{keywordtype}{int}\ Options,\textcolor{keyword}{typename}\ Index>\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00161\ \mbox{\hyperlink{sparse_8h_a3ba4abd21a1ace3122406c3b3b27fc5b}{initSparse}}(\textcolor{keywordtype}{double}\ density,}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_matrix}{Matrix<Scalar,Dynamic,1>}}\&\ refVec,}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_sparse_vector}{SparseVector<Scalar,Options,Index>}}\&\ sparseVec,}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ std::vector<int>*\ zeroCoords\ =\ 0,}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ std::vector<int>*\ nonzeroCoords\ =\ 0)}
\DoxyCodeLine{00166\ \{}
\DoxyCodeLine{00167\ \ \ sparseVec.\mbox{\hyperlink{class_eigen_1_1_sparse_vector_a594675dd305845e55edcab61c1b21d33}{reserve}}(\textcolor{keywordtype}{int}(refVec.size()*density));}
\DoxyCodeLine{00168\ \ \ sparseVec.\mbox{\hyperlink{class_eigen_1_1_sparse_vector_ac36267ff08f2ac0d884189086acf2b44}{setZero}}();}
\DoxyCodeLine{00169\ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<refVec.size();\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++)}
\DoxyCodeLine{00170\ \ \ \{}
\DoxyCodeLine{00171\ \ \ \ \ \mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ (internal::random<double>(0,1)\ <\ density)\ ?\ internal::random<Scalar>()\ :\ \mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}(0);}
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}!=\mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}(0))}
\DoxyCodeLine{00173\ \ \ \ \ \{}
\DoxyCodeLine{00174\ \ \ \ \ \ \ sparseVec.\mbox{\hyperlink{class_eigen_1_1_sparse_vector_ac540e2d1bff5e8565523367fd4da2ed7}{insertBack}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ =\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}};}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nonzeroCoords)}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ nonzeroCoords-\/>push\_back(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{00177\ \ \ \ \ \}}
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (zeroCoords)}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ zeroCoords-\/>push\_back(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{00180\ \ \ \ \ refVec[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]\ =\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}};}
\DoxyCodeLine{00181\ \ \ \}}
\DoxyCodeLine{00182\ \}}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Scalar,\textcolor{keywordtype}{int}\ Options,\textcolor{keyword}{typename}\ Index>\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00185\ \mbox{\hyperlink{sparse_8h_a3ba4abd21a1ace3122406c3b3b27fc5b}{initSparse}}(\textcolor{keywordtype}{double}\ density,}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_matrix}{Matrix<Scalar,1,Dynamic>}}\&\ refVec,}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_sparse_vector}{SparseVector<Scalar,Options,Index>}}\&\ sparseVec,}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ std::vector<int>*\ zeroCoords\ =\ 0,}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ std::vector<int>*\ nonzeroCoords\ =\ 0)}
\DoxyCodeLine{00190\ \{}
\DoxyCodeLine{00191\ \ \ sparseVec.\mbox{\hyperlink{class_eigen_1_1_sparse_vector_a594675dd305845e55edcab61c1b21d33}{reserve}}(\textcolor{keywordtype}{int}(refVec.size()*density));}
\DoxyCodeLine{00192\ \ \ sparseVec.\mbox{\hyperlink{class_eigen_1_1_sparse_vector_ac36267ff08f2ac0d884189086acf2b44}{setZero}}();}
\DoxyCodeLine{00193\ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<refVec.size();\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++)}
\DoxyCodeLine{00194\ \ \ \{}
\DoxyCodeLine{00195\ \ \ \ \ \mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ =\ (internal::random<double>(0,1)\ <\ density)\ ?\ internal::random<Scalar>()\ :\ \mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}(0);}
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}!=\mbox{\hyperlink{bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar}}(0))}
\DoxyCodeLine{00197\ \ \ \ \ \{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ sparseVec.\mbox{\hyperlink{class_eigen_1_1_sparse_vector_ac540e2d1bff5e8565523367fd4da2ed7}{insertBack}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ =\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}};}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nonzeroCoords)}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ nonzeroCoords-\/>push\_back(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{00201\ \ \ \ \ \}}
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (zeroCoords)}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ zeroCoords-\/>push\_back(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{00204\ \ \ \ \ refVec[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]\ =\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}};}
\DoxyCodeLine{00205\ \ \ \}}
\DoxyCodeLine{00206\ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \textcolor{preprocessor}{\#include\ <unsupported/Eigen/SparseExtra>}}
\DoxyCodeLine{00210\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ EIGEN\_TESTSPARSE\_H}}

\end{DoxyCode}
