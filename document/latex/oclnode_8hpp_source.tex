\doxysection{oclnode.\+hpp}
\hypertarget{oclnode_8hpp_source}{}\label{oclnode_8hpp_source}\index{external/taskflow/3rd-\/party/ff/oclnode.hpp@{external/taskflow/3rd-\/party/ff/oclnode.hpp}}
\mbox{\hyperlink{oclnode_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ -\/*-\/\ Mode:\ C++;\ tab-\/width:\ 2;\ c-\/basic-\/offset:\ 4;\ indent-\/tabs-\/mode:\ nil\ -\/*-\/\ */}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{comment}{/*\ ***************************************************************************}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ \ FastFlow\ is\ free\ software;\ you\ can\ redistribute\ it\ and/or\ modify\ it}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *\ \ under\ the\ terms\ of\ the\ GNU\ Lesser\ General\ Public\ License\ version\ 3\ as}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ \ published\ by\ the\ Free\ Software\ Foundation.}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ \ Starting\ from\ version\ 3.0.1\ FastFlow\ is\ dual\ licensed\ under\ the\ GNU\ LGPLv3}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ \ or\ MIT\ License\ (https://github.com/ParaGroup/WindFlow/blob/vers3.x/LICENSE.MIT)}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ *\ \ This\ program\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,\ but\ WITHOUT}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ *\ \ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of\ MERCHANTABILITY\ or}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ *\ \ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the\ GNU\ Lesser\ General\ Public}}
\DoxyCodeLine{00024\ \textcolor{comment}{\ *\ \ License\ for\ more\ details.}}
\DoxyCodeLine{00025\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00026\ \textcolor{comment}{\ *\ \ You\ should\ have\ received\ a\ copy\ of\ the\ GNU\ Lesser\ General\ Public\ License}}
\DoxyCodeLine{00027\ \textcolor{comment}{\ *\ \ along\ with\ this\ program;\ if\ not,\ write\ to\ the\ Free\ Software\ Foundation,}}
\DoxyCodeLine{00028\ \textcolor{comment}{\ *\ \ Inc.,\ 59\ Temple\ Place\ -\/\ Suite\ 330,\ Boston,\ MA\ 02111-\/1307,\ USA.}}
\DoxyCodeLine{00029\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00030\ \textcolor{comment}{\ ****************************************************************************}}
\DoxyCodeLine{00031\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{comment}{/*\ \ Mehdi\ Goli:\ \ \ \ \ \ \ \ \ \ \ \ m.goli@rgu.ac.uk\ \ \ \ goli.mehdi@gmail.com}}
\DoxyCodeLine{00034\ \textcolor{comment}{\ *\ \ Massimo\ Torquati:\ \ \ \ \ \ torquati@di.unipi.it}}
\DoxyCodeLine{00035\ \textcolor{comment}{\ *\ \ Marco\ Aldinucci}}
\DoxyCodeLine{00036\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00037\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#ifndef\ FF\_OCLNODE\_HPP}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#define\ FF\_OCLNODE\_HPP}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{cl_environment_8hpp}{ff/ocl/clEnvironment.hpp}}>}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{node_8hpp}{ff/node.hpp}}>}}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceff}{ff}}\{}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00059\ \ \ \ \ }
\DoxyCodeLine{00060\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classff_1_1ff__ocl_node_abd0bb3c1a2059cb10939f0d31022ed91}{ff\_oclNode}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classff_1_1ff__node_a53ab8b2244539766bdea3eb65cb04f9b}{ff\_node}}\ \{}
\DoxyCodeLine{00061\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00062\ \textcolor{comment}{/*\ cl\_device\_type\ -\/\ bitfield\ }}
\DoxyCodeLine{00063\ \textcolor{comment}{\ \ \ \#define\ CL\_DEVICE\_TYPE\_DEFAULT\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (1\ <<\ 0)}}
\DoxyCodeLine{00064\ \textcolor{comment}{\ \ \ \#define\ CL\_DEVICE\_TYPE\_CPU\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (1\ <<\ 1)}}
\DoxyCodeLine{00065\ \textcolor{comment}{\ \ \ \#define\ CL\_DEVICE\_TYPE\_GPU\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (1\ <<\ 2)}}
\DoxyCodeLine{00066\ \textcolor{comment}{\ \ \ \#define\ CL\_DEVICE\_TYPE\_ACCELERATOR\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (1\ <<\ 3)}}
\DoxyCodeLine{00067\ \textcolor{comment}{\ \ \ \#define\ CL\_DEVICE\_TYPE\_CUSTOM\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (1\ <<\ 4)}}
\DoxyCodeLine{00068\ \textcolor{comment}{\ \ \ \#define\ CL\_DEVICE\_TYPE\_ALL\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0xFFFFFFFF}}
\DoxyCodeLine{00069\ \textcolor{comment}{*/}}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{comment}{//\ returns\ the\ kind\ of\ node}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{virtual}\ fftype\ \mbox{\hyperlink{classff_1_1ff__ocl_node_af56d9e3297d974d301f2700f175a0868}{getFFType}}()\textcolor{keyword}{\ const\ \ \ }\{\ \textcolor{keywordflow}{return}\ OCL\_WORKER;\ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1ff__ocl_node_a0440cb7cc28331a7185e916ad940bec4}{setDeviceId}}(cl\_device\_id\ \textcolor{keywordtype}{id})\ \ \{\ \mbox{\hyperlink{classff_1_1ff__ocl_node_a6843f7938ec73a551a0390146a194dad}{deviceId}}\ =\ \mbox{\hyperlink{cocoa__platform_8h_acf00cd75f37488e1d4ac463303ccfec4}{id}};\ \}}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1ff__ocl_node_a053679b5a2e16300051e06ab6db3f58e}{setDeviceType}}(cl\_device\_type\ \mbox{\hyperlink{boing_8c_a03e28be41881b703c836edbfe9b51b17}{dt}}\ =\ CL\_DEVICE\_TYPE\_ALL)\ \{\ \mbox{\hyperlink{classff_1_1ff__ocl_node_aee0a6b21dc9e3b19918d18f47a348dd1}{dtype}}\ =\ \mbox{\hyperlink{boing_8c_a03e28be41881b703c836edbfe9b51b17}{dt}};\ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ cl\_device\_id\ \ \ \mbox{\hyperlink{classff_1_1ff__ocl_node_a72cfa8b7662e7af2496905d3a299e302}{getDeviceId}}()\textcolor{keyword}{\ \ const\ \ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__ocl_node_a6843f7938ec73a551a0390146a194dad}{deviceId}};\ \}}
\DoxyCodeLine{00078\ \ \ \ \ cl\_device\_type\ \mbox{\hyperlink{classff_1_1ff__ocl_node_a3a85b301eec65713e2f4bafe1a124182}{getDeviceType}}()\textcolor{keyword}{\ const\ }\{\textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__ocl_node_aee0a6b21dc9e3b19918d18f47a348dd1}{dtype}};\}}
\DoxyCodeLine{00079\ \ \ \ \ }
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classff_1_1ff__ocl_node_ab263f2b121186338ba3095cfe44a99d6}{getOCLID}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classff_1_1ff__ocl_node_ae9cfa504ba099e67073dad8cc895684c}{oclId}};\ \}}
\DoxyCodeLine{00081\ \ \ \ \ }
\DoxyCodeLine{00082\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00089\ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__ocl_node_abd0bb3c1a2059cb10939f0d31022ed91}{ff\_oclNode}}():\mbox{\hyperlink{classff_1_1ff__ocl_node_ae9cfa504ba099e67073dad8cc895684c}{oclId}}(-\/1),\mbox{\hyperlink{classff_1_1ff__ocl_node_a6843f7938ec73a551a0390146a194dad}{deviceId}}(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}),\ \ \mbox{\hyperlink{classff_1_1ff__ocl_node_aee0a6b21dc9e3b19918d18f47a348dd1}{dtype}}(CL\_DEVICE\_TYPE\_ALL)\ \{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1cl_environment_a36e5bae395a1b515fa7f5b5fe8c48390}{clEnvironment::instance}}();}
\DoxyCodeLine{00091\ \ \ \ \ \};}
\DoxyCodeLine{00092\ \ \ }
\DoxyCodeLine{00093\ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__ocl_node_a066e5d12567ebed677a03faf07f9b843}{\string~ff\_oclNode}}()\ \{\ \}}
\DoxyCodeLine{00094\ \ \ \ }
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classff_1_1ff__ocl_node_a5e9f09d6932e3dbc94288af96b582eb3}{svc\_init}}()\ \{}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__ocl_node_ae9cfa504ba099e67073dad8cc895684c}{oclId}}\ <\ 0)\ \mbox{\hyperlink{classff_1_1ff__ocl_node_ae9cfa504ba099e67073dad8cc895684c}{oclId}}\ =\ \mbox{\hyperlink{classff_1_1cl_environment_a36e5bae395a1b515fa7f5b5fe8c48390}{clEnvironment::instance}}()-\/>getOCLID();}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ user\ has\ set\ a\ specific\ device}}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classff_1_1ff__ocl_node_a6843f7938ec73a551a0390146a194dad}{deviceId}}\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\mbox{\hyperlink{classff_1_1ff__ocl_node_aee0a6b21dc9e3b19918d18f47a348dd1}{dtype}})\ \{}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ CL\_DEVICE\_TYPE\_ALL:\ \{}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ no\ user\ choice,\ a\ static\ greedy\ algorithm\ is\ used\ to\ allocate\ openCL\ components}}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ GPUdevId\ =\mbox{\hyperlink{classff_1_1cl_environment_a36e5bae395a1b515fa7f5b5fe8c48390}{clEnvironment::instance}}()-\/>getGPUDeviceRR();}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ (GPUdevId\ !=-\/1)\ \&\&\ (\ \mbox{\hyperlink{classff_1_1ff__ocl_node_ae9cfa504ba099e67073dad8cc895684c}{oclId}}\ <\ \mbox{\hyperlink{classff_1_1cl_environment_a36e5bae395a1b515fa7f5b5fe8c48390}{clEnvironment::instance}}()-\/>getNumGPU()))\ \{\ }
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{printf_8h_aee3ed3a831f25f07e7be3919fff2203a}{printf}}(\textcolor{stringliteral}{"{}\%d:\ Allocated\ a\ GPU\ device,\ the\ id\ is\ \%ld\(\backslash\)n"{}},\ \mbox{\hyperlink{classff_1_1ff__ocl_node_ae9cfa504ba099e67073dad8cc895684c}{oclId}},\ GPUdevId);}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__ocl_node_a6843f7938ec73a551a0390146a194dad}{deviceId}}=\mbox{\hyperlink{classff_1_1cl_environment_a36e5bae395a1b515fa7f5b5fe8c48390}{clEnvironment::instance}}()-\/>getDevice(GPUdevId);}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ fall\ back\ to\ CPU\ either\ GPU\ has\ reached\ its\ max\ or\ there\ is\ no\ GPU\ available}}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ CPUdevId\ =\mbox{\hyperlink{classff_1_1cl_environment_a36e5bae395a1b515fa7f5b5fe8c48390}{clEnvironment::instance}}()-\/>getCPUDevice();}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (CPUdevId\ !=\ -\/1)\ \{}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{printf_8h_aee3ed3a831f25f07e7be3919fff2203a}{printf}}(\textcolor{stringliteral}{"{}\%d:\ Allocated\ a\ CPU\ device\ as\ either\ no\ GPU\ device\ is\ available\ or\ no\ GPU\ slot\ is\ available\ (cpuId=\%ld)\(\backslash\)n"{}},\mbox{\hyperlink{classff_1_1ff__ocl_node_ae9cfa504ba099e67073dad8cc895684c}{oclId}},\ CPUdevId);}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__ocl_node_a6843f7938ec73a551a0390146a194dad}{deviceId}}=\mbox{\hyperlink{classff_1_1cl_environment_a36e5bae395a1b515fa7f5b5fe8c48390}{clEnvironment::instance}}()-\/>getDevice(CPUdevId);}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{printf_8h_aee3ed3a831f25f07e7be3919fff2203a}{printf}}(\textcolor{stringliteral}{"{}\%d:\ cannot\ allocate\ neither\ a\ GPU\ nor\ a\ CPU\ device\(\backslash\)n"{}},\ \mbox{\hyperlink{classff_1_1ff__ocl_node_ae9cfa504ba099e67073dad8cc895684c}{oclId}});\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ CL\_DEVICE\_TYPE\_GPU:\ \{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ GPUdevId\ =\mbox{\hyperlink{classff_1_1cl_environment_a36e5bae395a1b515fa7f5b5fe8c48390}{clEnvironment::instance}}()-\/>getGPUDeviceRR();}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ (GPUdevId\ !=-\/1)\ \&\&\ (\ \mbox{\hyperlink{classff_1_1ff__ocl_node_ae9cfa504ba099e67073dad8cc895684c}{oclId}}\ <\ \mbox{\hyperlink{classff_1_1cl_environment_a36e5bae395a1b515fa7f5b5fe8c48390}{clEnvironment::instance}}()-\/>getNumGPU()))\ \{\ }
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{printf_8h_aee3ed3a831f25f07e7be3919fff2203a}{printf}}(\textcolor{stringliteral}{"{}\%d:\ Allocated\ a\ GPU\ device,\ the\ id\ is\ \%ld\(\backslash\)n"{}},\ \mbox{\hyperlink{classff_1_1ff__ocl_node_ae9cfa504ba099e67073dad8cc895684c}{oclId}},\ GPUdevId);}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__ocl_node_a6843f7938ec73a551a0390146a194dad}{deviceId}}=\mbox{\hyperlink{classff_1_1cl_environment_a36e5bae395a1b515fa7f5b5fe8c48390}{clEnvironment::instance}}()-\/>getDevice(GPUdevId);}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{printf_8h_aee3ed3a831f25f07e7be3919fff2203a}{printf}}(\textcolor{stringliteral}{"{}\%d:\ cannot\ allocate\ a\ GPU\ device\(\backslash\)n"{}},\ \mbox{\hyperlink{classff_1_1ff__ocl_node_ae9cfa504ba099e67073dad8cc895684c}{oclId}});\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ CL\_DEVICE\_TYPE\_CPU:\ \{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ CPUdevId\ =\mbox{\hyperlink{classff_1_1cl_environment_a36e5bae395a1b515fa7f5b5fe8c48390}{clEnvironment::instance}}()-\/>getCPUDevice();}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (CPUdevId\ !=\ -\/1)\ \{}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{printf_8h_aee3ed3a831f25f07e7be3919fff2203a}{printf}}(\textcolor{stringliteral}{"{}\%d:\ Allocated\ a\ CPU\ device\ (cpuId=\%ld)\(\backslash\)n"{}},\mbox{\hyperlink{classff_1_1ff__ocl_node_ae9cfa504ba099e67073dad8cc895684c}{oclId}},\ CPUdevId);}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__ocl_node_a6843f7938ec73a551a0390146a194dad}{deviceId}}=\mbox{\hyperlink{classff_1_1cl_environment_a36e5bae395a1b515fa7f5b5fe8c48390}{clEnvironment::instance}}()-\/>getDevice(CPUdevId);\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{printf_8h_aee3ed3a831f25f07e7be3919fff2203a}{printf}}(\textcolor{stringliteral}{"{}\%d:\ cannot\ allocate\ a\ CPU\ device\(\backslash\)n"{}},\ \mbox{\hyperlink{classff_1_1ff__ocl_node_ae9cfa504ba099e67073dad8cc895684c}{oclId}});}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}}\ :\ std::cerr\ <<\ \textcolor{stringliteral}{"{}Unknown/not\ supported\ device\ type\(\backslash\)n"{}};}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00145\ \ \ \ \ \}\ }
\DoxyCodeLine{00146\ \ \ \ \ }
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classff_1_1ff__ocl_node_a51d41dee81dd5137c972bb12e7aefe5b}{svc\_end}}()\ \{\}}
\DoxyCodeLine{00148\ \ \ \ \ }
\DoxyCodeLine{00149\ \textcolor{keyword}{protected}:\ \ \ \ }
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__ocl_node_ae9cfa504ba099e67073dad8cc895684c}{oclId}};\ \ \ \ \ \ \textcolor{comment}{//\ the\ OpenCL\ node\ id}}
\DoxyCodeLine{00151\ \ \ \ \ cl\_device\_id\ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__ocl_node_a6843f7938ec73a551a0390146a194dad}{deviceId}};\ \ \ \textcolor{comment}{//\ is\ the\ id\ which\ is\ provided\ for\ user}}
\DoxyCodeLine{00152\ \ \ \ \ cl\_device\_type\ \ \ \ \mbox{\hyperlink{classff_1_1ff__ocl_node_aee0a6b21dc9e3b19918d18f47a348dd1}{dtype}};}
\DoxyCodeLine{00153\ \};}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ \ \ }
\DoxyCodeLine{00164\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ IN,\ \textcolor{keyword}{typename}\ OUT=IN>}
\DoxyCodeLine{00165\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structff_1_1ff__ocl_node__t_a4437af44c38546a1916416158b21c873}{ff\_oclNode\_t}}:\ \mbox{\hyperlink{classff_1_1ff__ocl_node_abd0bb3c1a2059cb10939f0d31022ed91}{ff\_oclNode}}\ \{}
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{namespaceff_a91df18abf7d6691c8105a2b7c1ba35d1a6d63cdf74ea036769a07e68c154a6cdf}{IN}}\ \ \mbox{\hyperlink{structff_1_1ff__ocl_node__t_acf876a822e3ac175dc02218fe2e8856b}{in\_type}};}
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{namespaceff_a91df18abf7d6691c8105a2b7c1ba35d1af50853f77202053b8f9d22d63119fdee}{OUT}}\ \mbox{\hyperlink{structff_1_1ff__ocl_node__t_a3eddce13e639c1a7ddbfecb9820479db}{out\_type}};}
\DoxyCodeLine{00168\ \ \ \ \ \mbox{\hyperlink{structff_1_1ff__ocl_node__t_a4437af44c38546a1916416158b21c873}{ff\_oclNode\_t}}():}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1ff__ocl_node__t_a9d8041611453de23e474a8f125d500aa}{GO\_ON}}((\mbox{\hyperlink{namespaceff_a91df18abf7d6691c8105a2b7c1ba35d1af50853f77202053b8f9d22d63119fdee}{OUT}}*)\mbox{\hyperlink{namespaceff_a0d49fe9ae339a6ea515d87ade60b6d08}{FF\_GO\_ON}}),}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1ff__ocl_node__t_a9c53d8058d1e2d0391203c11607b2af7}{EOS}}((\mbox{\hyperlink{namespaceff_a91df18abf7d6691c8105a2b7c1ba35d1af50853f77202053b8f9d22d63119fdee}{OUT}}*)\mbox{\hyperlink{namespaceff_acff372aed4435a709bb5ecce348b14b9}{FF\_EOS}}),}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1ff__ocl_node__t_a25cc504b964065b04cf1d4623314a024}{GO\_OUT}}((\mbox{\hyperlink{namespaceff_a91df18abf7d6691c8105a2b7c1ba35d1af50853f77202053b8f9d22d63119fdee}{OUT}}*)\mbox{\hyperlink{namespaceff_a87d1455fcd512edda2f88c16618c6424}{FF\_GO\_OUT}}),}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1ff__ocl_node__t_af8ea6f0308cfa4ced832915f0a8131b7}{EOS\_NOFREEZE}}((\mbox{\hyperlink{namespaceff_a91df18abf7d6691c8105a2b7c1ba35d1af50853f77202053b8f9d22d63119fdee}{OUT}}*)\mbox{\hyperlink{namespaceff_a661e583b7cfd15175d071187d6a6ace2}{FF\_EOS\_NOFREEZE}})\ \{\}}
\DoxyCodeLine{00173\ \ \ \ \ \mbox{\hyperlink{namespaceff_a91df18abf7d6691c8105a2b7c1ba35d1af50853f77202053b8f9d22d63119fdee}{OUT}}\ *\mbox{\hyperlink{structff_1_1ff__ocl_node__t_a9d8041611453de23e474a8f125d500aa}{GO\_ON}},\ *\mbox{\hyperlink{structff_1_1ff__ocl_node__t_a9c53d8058d1e2d0391203c11607b2af7}{EOS}},\ *\mbox{\hyperlink{structff_1_1ff__ocl_node__t_a25cc504b964065b04cf1d4623314a024}{GO\_OUT}},\ *\mbox{\hyperlink{structff_1_1ff__ocl_node__t_af8ea6f0308cfa4ced832915f0a8131b7}{EOS\_NOFREEZE}};}
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{structff_1_1ff__ocl_node__t_afea0e0286e2c7d38bb82a9691f378e44}{\string~ff\_oclNode\_t}}()\ \ \{\}}
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{namespaceff_a91df18abf7d6691c8105a2b7c1ba35d1af50853f77202053b8f9d22d63119fdee}{OUT}}*\ \mbox{\hyperlink{structff_1_1ff__ocl_node__t_a5dccaf2ed522ebfb381347cb1f34f6d3}{svc}}(\mbox{\hyperlink{namespaceff_a91df18abf7d6691c8105a2b7c1ba35d1a6d63cdf74ea036769a07e68c154a6cdf}{IN}}*)=0;}
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{keyword}{inline}\ \ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{structff_1_1ff__ocl_node__t_a756ae3b6b2d2f6e2f87dd11995639800}{svc}}(\textcolor{keywordtype}{void}\ *\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}})\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structff_1_1ff__ocl_node__t_a756ae3b6b2d2f6e2f87dd11995639800}{svc}}(\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{namespaceff_a91df18abf7d6691c8105a2b7c1ba35d1a6d63cdf74ea036769a07e68c154a6cdf}{IN}}*\textcolor{keyword}{>}(\mbox{\hyperlink{test__partitioner__whitebox_8h_a5c4cf3d37a4eee22275de22cb9619863}{task}}));\};}
\DoxyCodeLine{00177\ \};}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \}}
\DoxyCodeLine{00180\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ FF\_OCLNODE\_HPP\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
