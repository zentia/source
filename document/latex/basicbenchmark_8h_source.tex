\doxysection{basicbenchmark.\+h}
\hypertarget{basicbenchmark_8h_source}{}\label{basicbenchmark_8h_source}\index{external/taskflow/3rd-\/party/eigen-\/3.3.7/bench/basicbenchmark.h@{external/taskflow/3rd-\/party/eigen-\/3.3.7/bench/basicbenchmark.h}}
\mbox{\hyperlink{basicbenchmark_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#ifndef\ EIGEN\_BENCH\_BASICBENCH\_H}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#define\ EIGEN\_BENCH\_BASICBENCH\_H}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{keyword}{enum}\ \{\mbox{\hyperlink{basicbenchmark_8h_a4455cb5a734fb3086c1ae307d782053fa30cde7b50b5941beda6b7dea598fb45e}{LazyEval}},\ \mbox{\hyperlink{basicbenchmark_8h_a4455cb5a734fb3086c1ae307d782053fa99ff3a06f19b0aae4020d949ab705c44}{EarlyEval}},\ \mbox{\hyperlink{basicbenchmark_8h_a4455cb5a734fb3086c1ae307d782053faf4e2f3a2fba10c5e0457feec6264eb80}{OmpEval}}\};}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{keyword}{template}<\textcolor{keywordtype}{int}\ Mode,\ \textcolor{keyword}{typename}\ MatrixType>}
\DoxyCodeLine{00008\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{basicbenchmark_8h_ab2852ae2df55f670c62297f69779f7d8}{benchBasic\_loop}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{benchmark-blocking-sizes_8cpp_af5fcaa2ea9f565466ca96c2992ea0771}{MatrixType}}\&\ I,\ \mbox{\hyperlink{benchmark-blocking-sizes_8cpp_af5fcaa2ea9f565466ca96c2992ea0771}{MatrixType}}\&\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}},\ \textcolor{keywordtype}{int}\ iterations)\ \mbox{\hyperlink{bench__reverse_8cpp_af57f208bfabc394dd45616e63728dce0}{\_\_attribute\_\_}}((noinline));}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{template}<\textcolor{keywordtype}{int}\ Mode,\ \textcolor{keyword}{typename}\ MatrixType>}
\DoxyCodeLine{00011\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{basicbenchmark_8h_ab2852ae2df55f670c62297f69779f7d8}{benchBasic\_loop}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{benchmark-blocking-sizes_8cpp_af5fcaa2ea9f565466ca96c2992ea0771}{MatrixType}}\&\ I,\ \mbox{\hyperlink{benchmark-blocking-sizes_8cpp_af5fcaa2ea9f565466ca96c2992ea0771}{MatrixType}}\&\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}},\ \textcolor{keywordtype}{int}\ iterations)}
\DoxyCodeLine{00012\ \{}
\DoxyCodeLine{00013\ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ =\ 0;\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ <\ iterations;\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}++)}
\DoxyCodeLine{00014\ \ \ \{}
\DoxyCodeLine{00015\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{monitors_8c_a46c8a310cf4c094f8c80e1cb8dc1f911}{Mode}}==\mbox{\hyperlink{basicbenchmark_8h_a4455cb5a734fb3086c1ae307d782053fa30cde7b50b5941beda6b7dea598fb45e}{LazyEval}})}
\DoxyCodeLine{00016\ \ \ \ \ \{}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \textcolor{keyword}{asm}(\textcolor{stringliteral}{"{}\#begin\_bench\_loop\ LazyEval"{}});}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (MatrixType::SizeAtCompileTime!=\mbox{\hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Eigen::Dynamic}})\ \textcolor{keyword}{asm}(\textcolor{stringliteral}{"{}\#fixedsize"{}});}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}\ =\ (I\ +\ 0.00005\ *\ (\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}\ +\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}.lazy()\ *\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}})).eval();}
\DoxyCodeLine{00020\ \ \ \ \ \}}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{monitors_8c_a46c8a310cf4c094f8c80e1cb8dc1f911}{Mode}}==\mbox{\hyperlink{basicbenchmark_8h_a4455cb5a734fb3086c1ae307d782053faf4e2f3a2fba10c5e0457feec6264eb80}{OmpEval}})}
\DoxyCodeLine{00022\ \ \ \ \ \{}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \textcolor{keyword}{asm}(\textcolor{stringliteral}{"{}\#begin\_bench\_loop\ OmpEval"{}});}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (MatrixType::SizeAtCompileTime!=\mbox{\hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Eigen::Dynamic}})\ \textcolor{keyword}{asm}(\textcolor{stringliteral}{"{}\#fixedsize"{}});}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}\ =\ (I\ +\ 0.00005\ *\ (\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}\ +\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}.lazy()\ *\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}})).evalOMP();}
\DoxyCodeLine{00026\ \ \ \ \ \}}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00028\ \ \ \ \ \{}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \textcolor{keyword}{asm}(\textcolor{stringliteral}{"{}\#begin\_bench\_loop\ EarlyEval"{}});}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (MatrixType::SizeAtCompileTime!=\mbox{\hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Eigen::Dynamic}})\ \textcolor{keyword}{asm}(\textcolor{stringliteral}{"{}\#fixedsize"{}});}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}\ =\ I\ +\ 0.00005\ *\ (\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}\ +\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}\ *\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}});}
\DoxyCodeLine{00032\ \ \ \ \ \}}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keyword}{asm}(\textcolor{stringliteral}{"{}\#end\_bench\_loop"{}});}
\DoxyCodeLine{00034\ \ \ \}}
\DoxyCodeLine{00035\ \}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{keyword}{template}<\textcolor{keywordtype}{int}\ Mode,\ \textcolor{keyword}{typename}\ MatrixType>}
\DoxyCodeLine{00038\ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{basicbenchmark_8h_a89db298323dddcb5d63adea904e9fdab}{benchBasic}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{benchmark-blocking-sizes_8cpp_af5fcaa2ea9f565466ca96c2992ea0771}{MatrixType}}\&\ \mbox{\hyperlink{_tutorial___advanced_initialization___comma_temporary_8cpp_a5d2ded7a4c8830608d7b218f5f27c0a0}{mat}},\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}},\ \textcolor{keywordtype}{int}\ tries)\ \mbox{\hyperlink{bench__reverse_8cpp_af57f208bfabc394dd45616e63728dce0}{\_\_attribute\_\_}}((noinline));}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{template}<\textcolor{keywordtype}{int}\ Mode,\ \textcolor{keyword}{typename}\ MatrixType>}
\DoxyCodeLine{00041\ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{basicbenchmark_8h_a89db298323dddcb5d63adea904e9fdab}{benchBasic}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{benchmark-blocking-sizes_8cpp_af5fcaa2ea9f565466ca96c2992ea0771}{MatrixType}}\&\ \mbox{\hyperlink{_tutorial___advanced_initialization___comma_temporary_8cpp_a5d2ded7a4c8830608d7b218f5f27c0a0}{mat}},\ \textcolor{keywordtype}{int}\ iterations,\ \textcolor{keywordtype}{int}\ tries)}
\DoxyCodeLine{00042\ \{}
\DoxyCodeLine{00043\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_tutorial__commainit__02_8cpp_a061459acc9e078fa4699e0e349887215}{rows}}\ =\ \mbox{\hyperlink{_tutorial___advanced_initialization___comma_temporary_8cpp_a5d2ded7a4c8830608d7b218f5f27c0a0}{mat}}.rows();}
\DoxyCodeLine{00044\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_tutorial__commainit__02_8cpp_a4407a60bc4387adae24cee658711f2d9}{cols}}\ =\ \mbox{\hyperlink{_tutorial___advanced_initialization___comma_temporary_8cpp_a5d2ded7a4c8830608d7b218f5f27c0a0}{mat}}.cols();}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \mbox{\hyperlink{benchmark-blocking-sizes_8cpp_af5fcaa2ea9f565466ca96c2992ea0771}{MatrixType}}\ I(\mbox{\hyperlink{_tutorial__commainit__02_8cpp_a061459acc9e078fa4699e0e349887215}{rows}},\mbox{\hyperlink{_tutorial__commainit__02_8cpp_a4407a60bc4387adae24cee658711f2d9}{cols}});}
\DoxyCodeLine{00047\ \ \ \mbox{\hyperlink{benchmark-blocking-sizes_8cpp_af5fcaa2ea9f565466ca96c2992ea0771}{MatrixType}}\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}(\mbox{\hyperlink{_tutorial__commainit__02_8cpp_a061459acc9e078fa4699e0e349887215}{rows}},\mbox{\hyperlink{_tutorial__commainit__02_8cpp_a4407a60bc4387adae24cee658711f2d9}{cols}});}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \mbox{\hyperlink{_bench_util_8h_aaca223bd1c2ca240cbceda872c77b21c}{initMatrix\_identity}}(I);}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \mbox{\hyperlink{class_eigen_1_1_bench_timer}{Eigen::BenchTimer}}\ \mbox{\hyperlink{util_8h_ab887afc9c355ad12d21903f5e9b03642}{timer}};}
\DoxyCodeLine{00052\ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{sugar_8h_ad46b2ebcd4c426b06cda147ddc1001e7}{uint}}\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}=0;\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}<tries;\ ++\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}})}
\DoxyCodeLine{00053\ \ \ \{}
\DoxyCodeLine{00054\ \ \ \ \ \mbox{\hyperlink{_bench_util_8h_af03059ceff46160bbce9dc56d5758686}{initMatrix\_random}}(\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}});}
\DoxyCodeLine{00055\ \ \ \ \ \mbox{\hyperlink{util_8h_ab887afc9c355ad12d21903f5e9b03642}{timer}}.start();}
\DoxyCodeLine{00056\ \ \ \ \ \mbox{\hyperlink{basicbenchmark_8h_ab2852ae2df55f670c62297f69779f7d8}{benchBasic\_loop<Mode>}}(I,\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}},\ iterations);}
\DoxyCodeLine{00057\ \ \ \ \ \mbox{\hyperlink{util_8h_ab887afc9c355ad12d21903f5e9b03642}{timer}}.stop();}
\DoxyCodeLine{00058\ \ \ \ \ cerr\ <<\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}};}
\DoxyCodeLine{00059\ \ \ \}}
\DoxyCodeLine{00060\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{util_8h_ab887afc9c355ad12d21903f5e9b03642}{timer}}.value();}
\DoxyCodeLine{00061\ \};}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ EIGEN\_BENCH\_BASICBENCH\_H}}

\end{DoxyCode}
