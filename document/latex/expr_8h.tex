\doxysection{runtime/dsl/expr.h 文件参考}
\hypertarget{expr_8h}{}\label{expr_8h}\index{runtime/dsl/expr.h@{runtime/dsl/expr.h}}
{\ttfamily \#include $<$array$>$}\newline
{\ttfamily \#include $<$string\+\_\+view$>$}\newline
{\ttfamily \#include $<$runtime/runtime/image.\+h$>$}\newline
{\ttfamily \#include $<$runtime/runtime/volume.\+h$>$}\newline
{\ttfamily \#include $<$runtime/runtime/buffer.\+h$>$}\newline
{\ttfamily \#include $<$runtime/runtime/bindless\+\_\+array.\+h$>$}\newline
{\ttfamily \#include $<$runtime/ast/function\+\_\+builder.\+h$>$}\newline
{\ttfamily \#include $<$runtime/dsl/expr\+\_\+traits.\+h$>$}\newline
{\ttfamily \#include $<$runtime/dsl/arg.\+h$>$}\newline
{\ttfamily \#include $<$runtime/dsl/swizzle\+\_\+2.\+inl.\+h$>$}\newline
{\ttfamily \#include $<$runtime/dsl/swizzle\+\_\+3.\+inl.\+h$>$}\newline
{\ttfamily \#include $<$runtime/dsl/swizzle\+\_\+4.\+inl.\+h$>$}\newline
expr.\+h 的引用(Include)关系图\+:
% FIG 0
此图展示该文件被哪些文件直接或间接地引用了\+:
% FIG 1
\doxysubsubsection*{类}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structluisa_1_1compute_1_1_expr}{luisa\+::compute\+::\+Expr$<$ T $>$}}
\begin{DoxyCompactList}\small\item\em Class of Expr$<$\+T$>$. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structluisa_1_1compute_1_1_expr_3_01std_1_1array_3_01_t_00_01_n_01_4_01_4}{luisa\+::compute\+::\+Expr$<$ std\+::array$<$ T, N $>$ $>$}}
\begin{DoxyCompactList}\small\item\em Class of \doxylink{structluisa_1_1compute_1_1_expr_3_01std_1_1array_3_01_t_00_01_n_01_4_01_4}{Expr$<$std\+::array$<$\+T, N$>$$>$} \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structluisa_1_1compute_1_1_expr_3_01_t_0f_n_0e_4}{luisa\+::compute\+::\+Expr$<$ T\mbox{[}\+N\mbox{]}$>$}}
\begin{DoxyCompactList}\small\item\em Class of \doxylink{structluisa_1_1compute_1_1_expr_3_01_t_0f_n_0e_4}{Expr$<$\+T\mbox{[}\+N\mbox{]}$>$} \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structluisa_1_1compute_1_1_expr_3_01_matrix_3_01_n_01_4_01_4}{luisa\+::compute\+::\+Expr$<$ Matrix$<$ N $>$ $>$}}
\begin{DoxyCompactList}\small\item\em Class of Expr$<$\+Matrix$>$$<$\+N$>$\texorpdfstring{$>$}{>}. Can be constructed from Matrix$<$\+N$>$ \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structluisa_1_1compute_1_1_expr_3_01std_1_1tuple_3_01_t_8_8_8_01_4_01_4}{luisa\+::compute\+::\+Expr$<$ std\+::tuple$<$ T... $>$ $>$}}
\item 
struct \mbox{\hyperlink{structluisa_1_1compute_1_1_expr_3_01_vector_3_01_t_00_012_01_4_01_4}{luisa\+::compute\+::\+Expr$<$ Vector$<$ T, 2 $>$ $>$}}
\begin{DoxyCompactList}\small\item\em Class of \doxylink{structluisa_1_1compute_1_1_expr_3_01_vector_3_01_t_00_012_01_4_01_4}{Expr$<$\+Vector$<$\+T, 2$>$$>$}. Can be constructed from Vector$<$\+T, 2$>$. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structluisa_1_1compute_1_1_expr_3_01_vector_3_01_t_00_013_01_4_01_4}{luisa\+::compute\+::\+Expr$<$ Vector$<$ T, 3 $>$ $>$}}
\begin{DoxyCompactList}\small\item\em Class of \doxylink{structluisa_1_1compute_1_1_expr_3_01_vector_3_01_t_00_013_01_4_01_4}{Expr$<$\+Vector$<$\+T, 3$>$$>$}. Can be constructed from Vector$<$\+T, 3$>$. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structluisa_1_1compute_1_1_expr_3_01_vector_3_01_t_00_014_01_4_01_4}{luisa\+::compute\+::\+Expr$<$ Vector$<$ T, 4 $>$ $>$}}
\begin{DoxyCompactList}\small\item\em Class of \doxylink{structluisa_1_1compute_1_1_expr_3_01_vector_3_01_t_00_014_01_4_01_4}{Expr$<$\+Vector$<$\+T, 4$>$$>$}. Can be constructed from Vector$<$\+T, 4$>$. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1_expr_enable_static_cast}{luisa\+::compute\+::detail\+::\+Expr\+Enable\+Static\+Cast$<$ T $>$}}
\begin{DoxyCompactList}\small\item\em Enable static cast to type Dest \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1_expr_enable_bitwise_cast}{luisa\+::compute\+::detail\+::\+Expr\+Enable\+Bitwise\+Cast$<$ T $>$}}
\begin{DoxyCompactList}\small\item\em Enable bitwise cast to type Dest \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1_expr_enable_subscript_access}{luisa\+::compute\+::detail\+::\+Expr\+Enable\+Subscript\+Access$<$ T $>$}}
\begin{DoxyCompactList}\small\item\em Enable subscript access \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1_expr_enable_get_member_by_index}{luisa\+::compute\+::detail\+::\+Expr\+Enable\+Get\+Member\+By\+Index$<$ T $>$}}
\begin{DoxyCompactList}\small\item\em Enable get member by index \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{命名空间}
\begin{DoxyCompactItemize}
\item 
namespace \mbox{\hyperlink{namespaceluisa}{luisa}}
\item 
namespace \mbox{\hyperlink{namespaceluisa_1_1compute}{luisa\+::compute}}
\item 
namespace \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl}{luisa\+::compute\+::dsl}}
\item 
namespace \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail}{luisa\+::compute\+::detail}}
\begin{DoxyCompactList}\small\item\em 1D kernel. Kernel$<$1, Args...$>$ \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{宏定义}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{expr_8h_a961f39cc235ce2e4eafb30141f01784d}{LUISA\+\_\+\+EXPR\+\_\+\+COMMON}}(...)
\begin{DoxyCompactList}\small\item\em Expr common definition \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{expr_8h_a3c8009b77bee68e6191c37baa4cab206}{LUISA\+\_\+\+EXPR\+\_\+\+FROM\+\_\+\+LITERAL}}(...)
\begin{DoxyCompactList}\small\item\em Construct Expr from literal value \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{expr_8h_ac906f3bf272bed0c6ba2875d4b220e41}{LUISA\+\_\+\+RESOURCE\+\_\+\+PROXY\+\_\+\+AVOID\+\_\+\+CONSTRUCTION}}(Class)
\end{DoxyCompactItemize}
\doxysubsubsection*{函数}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename T$>$ }\\auto \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_a63bd1694ec4866a8bf57921ab34e967f}{luisa\+::compute\+::dsl\+::def}} (const \mbox{\hyperlink{classluisa_1_1compute_1_1_expression}{Expression}} \texorpdfstring{$\ast$}{*}expr) noexcept -\/$>$ \mbox{\hyperlink{structluisa_1_1compute_1_1_var}{Var}}$<$ \mbox{\hyperlink{namespaceluisa_1_1compute_a97a30acfe72da21925e80a2861d53c9b}{expr\+\_\+value\+\_\+t}}$<$ T $>$ $>$
\begin{DoxyCompactList}\small\item\em Define a var using expression \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T$>$ }\\auto \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_a2e6114f576014c3d3020bb94dd881851}{luisa\+::compute\+::dsl\+::def}} (T \&\&\mbox{\hyperlink{offscreen_8c_ad0da36b2558901e21e7a30f6c227a45e}{x}}) noexcept -\/$>$ \mbox{\hyperlink{structluisa_1_1compute_1_1_var}{Var}}$<$ \mbox{\hyperlink{namespaceluisa_1_1compute_a97a30acfe72da21925e80a2861d53c9b}{expr\+\_\+value\+\_\+t}}$<$ T $>$ $>$
\begin{DoxyCompactList}\small\item\em Define a var using rvalue \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T$>$ }\\auto \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_af5ea7b87d6c0847255b35710ebc5579f}{luisa\+::compute\+::detail\+::extract\+\_\+expression}} (T \&\&v) noexcept -\/$>$ const \mbox{\hyperlink{classluisa_1_1compute_1_1_expression}{Expression}} \texorpdfstring{$\ast$}{*}
\begin{DoxyCompactList}\small\item\em Extract or construct expression from given data \end{DoxyCompactList}\item 
{\footnotesize template$<$typename... T, size\+\_\+t... i$>$ }\\auto \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a042bf2c1c4fbf6f361bcac0b87e6b0f5}{luisa\+::compute\+::detail\+::compose\+\_\+impl}} (std\+::tuple$<$ T... $>$ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}, std\+::index\+\_\+sequence$<$ i... $>$) noexcept
\item 
{\footnotesize template$<$typename T, size\+\_\+t... i$>$ }\\auto \mbox{\hyperlink{namespaceluisa_1_1compute_1_1detail_a2f8672d46fafad4a91bf5431ec849284}{luisa\+::compute\+::detail\+::decompose\+\_\+impl}} (\mbox{\hyperlink{structluisa_1_1compute_1_1_expr}{Expr}}$<$ T $>$ \mbox{\hyperlink{offscreen_8c_ad0da36b2558901e21e7a30f6c227a45e}{x}}, std\+::index\+\_\+sequence$<$ i... $>$) noexcept
\item 
{\footnotesize template$<$typename... T$>$ }\\auto \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_a4ef720876f2fbe12247325f795f83db0}{luisa\+::compute\+::dsl\+::compose}} (std\+::tuple$<$ T... $>$ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}) noexcept
\begin{DoxyCompactList}\small\item\em Compose tuple of values to var of tuple \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T$>$ }\\auto \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_a4d15725d3757a2ecb5486a6b7e4b3ac8}{luisa\+::compute\+::dsl\+::compose}} (T \&\&v) noexcept
\begin{DoxyCompactList}\small\item\em Do nothing \end{DoxyCompactList}\item 
{\footnotesize template$<$typename... T$>$ }\\auto \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_a4ed873abec368d205a55f4a21b5720db}{luisa\+::compute\+::dsl\+::compose}} (T \&\&...v) noexcept
\begin{DoxyCompactList}\small\item\em Compose values to var of tuple \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T$>$ }\\auto \mbox{\hyperlink{namespaceluisa_1_1compute_1_1dsl_a35b8a4fc8ca619ec1f25dafa29cb99da}{luisa\+::compute\+::dsl\+::decompose}} (T \&\&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}) noexcept
\begin{DoxyCompactList}\small\item\em Decompose var of tuple to tuple \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T$>$ }\\\mbox{\hyperlink{namespaceluisa_1_1compute_aafdfe7904210a6734c3f219401025d1e}{luisa\+::compute\+::\+Expr}} (Expr$<$ T $>$) -\/$>$ Expr$<$ T $>$
\item 
{\footnotesize template$<$typename T$>$ }\\\mbox{\hyperlink{namespaceluisa_1_1compute_ad0f3a87646d3de5a58b7b09e21a1dba8}{luisa\+::compute\+::\+Expr}} (const \mbox{\hyperlink{structluisa_1_1compute_1_1_var}{Var}}$<$ T $>$ \&) -\/$>$ Expr$<$ T $>$
\item 
{\footnotesize template$<$typename T$>$ }\\\mbox{\hyperlink{namespaceluisa_1_1compute_a8e7992f505b262beb94c9a6fe2666e51}{luisa\+::compute\+::\+Expr}} (\mbox{\hyperlink{structluisa_1_1compute_1_1detail_1_1_ref}{detail\+::\+Ref}}$<$ T $>$) -\/$>$ Expr$<$ T $>$
\item 
{\footnotesize template$<$concepts\+::basic T$>$ }\\\mbox{\hyperlink{namespaceluisa_1_1compute_a08d4f0aafb9e5b23a400b85933fc0f93}{luisa\+::compute\+::\+Expr}} (T) -\/$>$ Expr$<$ T $>$
\end{DoxyCompactItemize}


\doxysubsection{宏定义说明}
\Hypertarget{expr_8h_a961f39cc235ce2e4eafb30141f01784d}\index{expr.h@{expr.h}!LUISA\_EXPR\_COMMON@{LUISA\_EXPR\_COMMON}}
\index{LUISA\_EXPR\_COMMON@{LUISA\_EXPR\_COMMON}!expr.h@{expr.h}}
\doxysubsubsection{\texorpdfstring{LUISA\_EXPR\_COMMON}{LUISA\_EXPR\_COMMON}}
{\footnotesize\ttfamily \label{expr_8h_a961f39cc235ce2e4eafb30141f01784d} 
\#define LUISA\+\_\+\+EXPR\+\_\+\+COMMON(\begin{DoxyParamCaption}\item[{}]{}...{}\end{DoxyParamCaption})}

{\bfseries 值\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{private}:\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{const}\ Expression\ *\_expression;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\textcolor{keyword}{public}:\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{explicit}\ Expr(\textcolor{keyword}{const}\ Expression\ *expr)\ noexcept\ :\ \_expression\{expr\}\ \{\}\ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ expression()\ const\ noexcept\ \{\ \textcolor{keywordflow}{return}\ this-\/>\_expression;\ \}\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ Expr(Expr\ \&\&another)\ \textcolor{keyword}{noexcept}\ =\ \textcolor{keywordflow}{default};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ Expr(\textcolor{keyword}{const}\ Expr\ \&another)\ \textcolor{keyword}{noexcept}\ =\ \textcolor{keywordflow}{default};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{namespaceluisa_1_1compute_a7edfb3d2207f7bb8ae18ef540c3d0cb8}{Expr}}\ \&operator=(Expr)\ \textcolor{keyword}{noexcept}\ =\ \textcolor{keyword}{delete};}

\end{DoxyCode}


Expr common definition 

\Hypertarget{expr_8h_a3c8009b77bee68e6191c37baa4cab206}\index{expr.h@{expr.h}!LUISA\_EXPR\_FROM\_LITERAL@{LUISA\_EXPR\_FROM\_LITERAL}}
\index{LUISA\_EXPR\_FROM\_LITERAL@{LUISA\_EXPR\_FROM\_LITERAL}!expr.h@{expr.h}}
\doxysubsubsection{\texorpdfstring{LUISA\_EXPR\_FROM\_LITERAL}{LUISA\_EXPR\_FROM\_LITERAL}}
{\footnotesize\ttfamily \label{expr_8h_a3c8009b77bee68e6191c37baa4cab206} 
\#define LUISA\+\_\+\+EXPR\+\_\+\+FROM\+\_\+\+LITERAL(\begin{DoxyParamCaption}\item[{}]{}...{}\end{DoxyParamCaption})}

{\bfseries 值\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ U>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keyword}{requires}\ std::same\_as<U,\ \_\_VA\_ARGS\_\_>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ Expr(U\ literal)\ noexcept\ :\ Expr\{detail::FunctionBuilder::current()-\/>literal(\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Type::of<U>(),\ literal)\}\ \{\}}

\end{DoxyCode}


Construct Expr from literal value 

\Hypertarget{expr_8h_ac906f3bf272bed0c6ba2875d4b220e41}\index{expr.h@{expr.h}!LUISA\_RESOURCE\_PROXY\_AVOID\_CONSTRUCTION@{LUISA\_RESOURCE\_PROXY\_AVOID\_CONSTRUCTION}}
\index{LUISA\_RESOURCE\_PROXY\_AVOID\_CONSTRUCTION@{LUISA\_RESOURCE\_PROXY\_AVOID\_CONSTRUCTION}!expr.h@{expr.h}}
\doxysubsubsection{\texorpdfstring{LUISA\_RESOURCE\_PROXY\_AVOID\_CONSTRUCTION}{LUISA\_RESOURCE\_PROXY\_AVOID\_CONSTRUCTION}}
{\footnotesize\ttfamily \label{expr_8h_ac906f3bf272bed0c6ba2875d4b220e41} 
\#define LUISA\+\_\+\+RESOURCE\+\_\+\+PROXY\+\_\+\+AVOID\+\_\+\+CONSTRUCTION(\begin{DoxyParamCaption}\item[{}]{Class}{}\end{DoxyParamCaption})}

{\bfseries 值\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ Class()\ noexcept\ =\ delete;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ Class(Class\ \&\&)\ noexcept\ =\ delete;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ Class(const\ Class\ \&)\ noexcept\ =\ delete;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ Class\ \&operator=(Class\ \&\&)\ noexcept\ =\ delete;\ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ Class\ \&operator=(const\ Class\ \&)\ noexcept\ =\ delete;\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \string~Class()\ noexcept\ =\ delete;}

\end{DoxyCode}
