\doxysection{read.\+hpp}
\hypertarget{avro_2read_8hpp_source}{}\label{avro_2read_8hpp_source}\index{external/reflect-\/cpp/include/rfl/avro/read.hpp@{external/reflect-\/cpp/include/rfl/avro/read.hpp}}
\mbox{\hyperlink{avro_2read_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ RFL\_AVRO\_READ\_HPP\_}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ RFL\_AVRO\_READ\_HPP\_}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <avro.h>}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <bit>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <istream>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <type\_traits>}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_processors_8hpp}{../Processors.hpp}}"{}}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{wrap__in__rfl__array__t_8hpp}{../internal/wrap\_in\_rfl\_array\_t.hpp}}"{}}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{avro_2_parser_8hpp}{Parser.hpp}}"{}}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{avro_2_reader_8hpp}{Reader.hpp}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{avro_2_schema_8hpp}{Schema.hpp}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{avro_2to__schema_8hpp}{to\_schema.hpp}}"{}}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacerfl_1_1avro}{rfl::avro}}\ \{}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespacerfl_1_1avro_a912d5818c6c05fc5ea6268fba009a59f}{InputObjectType}}\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structrfl_1_1avro_1_1_reader_a60f5f4396d85ab6f5116aab80e55e24a}{Reader::InputObjectType}};}
\DoxyCodeLine{00021\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespacerfl_1_1avro_a1b87f8b534d31b79c6cdcb844cc0ff8f}{InputVarType}}\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structrfl_1_1avro_1_1_reader_ae67566ca289350e6b97ae98e6f4240a0}{Reader::InputVarType}};}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class\ }\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{class}...\ Ps>}
\DoxyCodeLine{00025\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacerfl_1_1avro_aea11cfdc519efbaee04bd766ce499db1}{read}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{namespacerfl_1_1avro_a1b87f8b534d31b79c6cdcb844cc0ff8f}{InputVarType}}\&\ \_obj)\ \{}
\DoxyCodeLine{00026\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ \mbox{\hyperlink{structrfl_1_1avro_1_1_reader}{Reader}}();}
\DoxyCodeLine{00027\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacerfl_1_1avro_acadb0f0e6c2e9fa2b06ccfb4ceb873d0}{Parser}}<\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \mbox{\hyperlink{structrfl_1_1_processors}{Processors}}<Ps...>>\mbox{\hyperlink{namespacerfl_1_1avro_aea11cfdc519efbaee04bd766ce499db1}{::read}}(\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}},\ \_obj);}
\DoxyCodeLine{00028\ \}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00031\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class\ }\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{class}...\ Ps>}
\DoxyCodeLine{00032\ \mbox{\hyperlink{classrfl_1_1_result}{Result<internal::wrap\_in\_rfl\_array\_t<T>}}>\ \mbox{\hyperlink{namespacerfl_1_1avro_aea11cfdc519efbaee04bd766ce499db1}{read}}(}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \_bytes,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \_size,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema}{Schema<T>}}\&\ \_schema)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00034\ \ \ avro\_reader\_t\ avro\_reader\ =\ avro\_reader\_memory(\_bytes,\ \_size);}
\DoxyCodeLine{00035\ \ \ avro\_value\_t\ root;}
\DoxyCodeLine{00036\ \ \ avro\_generic\_value\_new(\_schema.iface(),\ \&root);}
\DoxyCodeLine{00037\ \ \ \textcolor{keyword}{auto}\ err\ =\ avro\_value\_read(avro\_reader,\ \&root);}
\DoxyCodeLine{00038\ \ \ \textcolor{keywordflow}{if}\ (err)\ \{}
\DoxyCodeLine{00039\ \ \ \ \ avro\_value\_decref(\&root);}
\DoxyCodeLine{00040\ \ \ \ \ avro\_reader\_free(avro\_reader);}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacerfl_a6625864c6c297dfdc3d3c3ee3181dd8c}{error}}(std::string(\textcolor{stringliteral}{"{}Could\ not\ read\ root\ value:\ "{}})\ +\ avro\_strerror());}
\DoxyCodeLine{00042\ \ \ \}}
\DoxyCodeLine{00043\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}}\ =\ \mbox{\hyperlink{namespacerfl_1_1avro_aea11cfdc519efbaee04bd766ce499db1}{read}}<\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ Ps...>(\mbox{\hyperlink{namespacerfl_1_1avro_a1b87f8b534d31b79c6cdcb844cc0ff8f}{InputVarType}}\{\&root\});}
\DoxyCodeLine{00044\ \ \ avro\_value\_decref(\&root);}
\DoxyCodeLine{00045\ \ \ avro\_reader\_free(avro\_reader);}
\DoxyCodeLine{00046\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aa7f56a70231ed8bc64f97aa7c37fcb19}{result}};}
\DoxyCodeLine{00047\ \}}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00050\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class\ }\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{class}...\ Ps>}
\DoxyCodeLine{00051\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacerfl_1_1avro_aea11cfdc519efbaee04bd766ce499db1}{read}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \_bytes,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \_size)\ \{}
\DoxyCodeLine{00052\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacerfl_1_1avro_1_1schema}{schema}}\ =\ \mbox{\hyperlink{namespacerfl_1_1avro_ab4e4299e148b02882cde0a081a19d533}{to\_schema<std::remove\_cvref\_t<T>}},\ Ps...>();}
\DoxyCodeLine{00053\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacerfl_1_1avro_aea11cfdc519efbaee04bd766ce499db1}{read}}<\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ Ps...>(\_bytes,\ \_size,\ \mbox{\hyperlink{namespacerfl_1_1avro_1_1schema}{schema}});}
\DoxyCodeLine{00054\ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00057\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class\ }\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{class}...\ Ps>}
\DoxyCodeLine{00058\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacerfl_1_1avro_aea11cfdc519efbaee04bd766ce499db1}{read}}(\textcolor{keyword}{const}\ std::vector<char>\&\ \_bytes,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classrfl_1_1avro_1_1_schema}{Schema<T>}}\&\ \_schema)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00059\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacerfl_1_1avro_aea11cfdc519efbaee04bd766ce499db1}{read}}<\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ Ps...>(\_bytes.data(),\ \_bytes.size(),\ \_schema);}
\DoxyCodeLine{00060\ \}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00063\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class\ }\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{class}...\ Ps>}
\DoxyCodeLine{00064\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacerfl_1_1avro_aea11cfdc519efbaee04bd766ce499db1}{read}}(\textcolor{keyword}{const}\ std::vector<char>\&\ \_bytes)\ \{}
\DoxyCodeLine{00065\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacerfl_1_1avro_aea11cfdc519efbaee04bd766ce499db1}{read}}<\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ Ps...>(\_bytes.data(),\ \_bytes.size());}
\DoxyCodeLine{00066\ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00069\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class\ }\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ \textcolor{keyword}{class}...\ Ps>}
\DoxyCodeLine{00070\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacerfl_1_1avro_aea11cfdc519efbaee04bd766ce499db1}{read}}(std::istream\&\ \_stream)\ \{}
\DoxyCodeLine{00071\ \ \ std::istreambuf\_iterator<char>\ \mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}}(\_stream),\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}};}
\DoxyCodeLine{00072\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structbytes}{bytes}}\ =\ std::vector<char>(\mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}},\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}});}
\DoxyCodeLine{00073\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacerfl_1_1avro_aea11cfdc519efbaee04bd766ce499db1}{read}}<\mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}},\ Ps...>(\mbox{\hyperlink{structbytes}{bytes}}.\mbox{\hyperlink{structbytes_ae91a5605d84aee2211330e166635bd4e}{data}}(),\ \mbox{\hyperlink{structbytes}{bytes}}.size());}
\DoxyCodeLine{00074\ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \}\ \ \textcolor{comment}{//\ namespace\ rfl::avro}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
