\doxysection{rml\+::internal\+::thread\+\_\+monitor类 参考}
\hypertarget{classrml_1_1internal_1_1thread__monitor}{}\label{classrml_1_1internal_1_1thread__monitor}\index{rml::internal::thread\_monitor@{rml::internal::thread\_monitor}}


Monitor with limited two-\/phase commit form of wait.  




{\ttfamily \#include $<$thread\+\_\+monitor.\+h$>$}



类 rml\+::internal\+::thread\+\_\+monitor 继承关系图\+:
% FIG 0


rml\+::internal\+::thread\+\_\+monitor 的协作图\+:
% FIG 1
\doxysubsubsection*{类}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_1_1cookie}{cookie}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_a1d1d08892a5d2579349514f1b05794d2}{thread\+\_\+monitor}} ()
\item 
\mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_a241d859d55e1b0179a88f8fef3ee57cb}{\texorpdfstring{$\sim$}{\string~}thread\+\_\+monitor}} ()
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_a3d1ae1d2476f27d49814bedd78bca43a}{notify}} ()
\begin{DoxyCompactList}\small\item\em If a thread is waiting or started a two-\/phase wait, notify it. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_aa70a8ea008c6fbf2edfc1282a6926fb8}{prepare\+\_\+wait}} (\mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_1_1cookie}{cookie}} \&\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}})
\begin{DoxyCompactList}\small\item\em Begin two-\/phase wait. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_aade3c809fbe1271d73a0a68a56987c84}{commit\+\_\+wait}} (\mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_1_1cookie}{cookie}} \&\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}})
\begin{DoxyCompactList}\small\item\em Complete a two-\/phase wait and wait until notification occurs after the earlier prepare\+\_\+wait. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_aaeb8faebaa89d96f89d537bd9c2782b7}{cancel\+\_\+wait}} ()
\begin{DoxyCompactList}\small\item\em Cancel a two-\/phase wait. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{静态 Public 成员函数}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_a5c286f93f53ec2ac4f0d70650ba32b92}{yield}} ()
\begin{DoxyCompactList}\small\item\em Yield control to OS \end{DoxyCompactList}\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_a2be9fe6a3ec89c83442b2acd31d87df7}{join}} (\mbox{\hyperlink{test__task__group_8cpp_a9bb7223a34ff955bbd9fee3f589d5b50}{handle\+\_\+type}} handle)
\begin{DoxyCompactList}\small\item\em Join thread \end{DoxyCompactList}\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_aaec978fb92f21dd1823401f7fd1d6f24}{detach\+\_\+thread}} (\mbox{\hyperlink{test__task__group_8cpp_a9bb7223a34ff955bbd9fee3f589d5b50}{handle\+\_\+type}} handle)
\begin{DoxyCompactList}\small\item\em Detach thread \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private 属性}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_1_1cookie}{cookie}} \mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_a33a6e090f0a01eb4d6b09548f564662a}{my\+\_\+cookie}}
\item 
tbb\+::atomic$<$ \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} $>$ \mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_a91ca48315604ce2a205d1820ac425a33}{in\+\_\+wait}}
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_a45633e48f8bff652149d43198efcc6af}{skipped\+\_\+wakeup}}
\item 
\mbox{\hyperlink{classtbb_1_1internal_1_1binary__semaphore}{tbb\+::internal\+::binary\+\_\+semaphore}} \mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_a7b0b6b9522adee2282b6f8343e991748}{my\+\_\+sema}}
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
Monitor with limited two-\/phase commit form of wait. 

At most one thread should wait on an instance at a time. 

\doxysubsection{构造及析构函数说明}
\Hypertarget{classrml_1_1internal_1_1thread__monitor_a1d1d08892a5d2579349514f1b05794d2}\index{rml::internal::thread\_monitor@{rml::internal::thread\_monitor}!thread\_monitor@{thread\_monitor}}
\index{thread\_monitor@{thread\_monitor}!rml::internal::thread\_monitor@{rml::internal::thread\_monitor}}
\doxysubsubsection{\texorpdfstring{thread\_monitor()}{thread\_monitor()}}
{\footnotesize\ttfamily \label{classrml_1_1internal_1_1thread__monitor_a1d1d08892a5d2579349514f1b05794d2} 
rml\+::internal\+::thread\+\_\+monitor\+::thread\+\_\+monitor (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\Hypertarget{classrml_1_1internal_1_1thread__monitor_a241d859d55e1b0179a88f8fef3ee57cb}\index{rml::internal::thread\_monitor@{rml::internal::thread\_monitor}!````~thread\_monitor@{\texorpdfstring{$\sim$}{\string~}thread\_monitor}}
\index{````~thread\_monitor@{\texorpdfstring{$\sim$}{\string~}thread\_monitor}!rml::internal::thread\_monitor@{rml::internal::thread\_monitor}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}thread\_monitor()}{\string~thread\_monitor()}}
{\footnotesize\ttfamily \label{classrml_1_1internal_1_1thread__monitor_a241d859d55e1b0179a88f8fef3ee57cb} 
rml\+::internal\+::thread\+\_\+monitor\+::\texorpdfstring{$\sim$}{\string~}thread\+\_\+monitor (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



\doxysubsection{成员函数说明}
\Hypertarget{classrml_1_1internal_1_1thread__monitor_aaeb8faebaa89d96f89d537bd9c2782b7}\index{rml::internal::thread\_monitor@{rml::internal::thread\_monitor}!cancel\_wait@{cancel\_wait}}
\index{cancel\_wait@{cancel\_wait}!rml::internal::thread\_monitor@{rml::internal::thread\_monitor}}
\doxysubsubsection{\texorpdfstring{cancel\_wait()}{cancel\_wait()}}
{\footnotesize\ttfamily \label{classrml_1_1internal_1_1thread__monitor_aaeb8faebaa89d96f89d537bd9c2782b7} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} rml\+::internal\+::thread\+\_\+monitor\+::cancel\+\_\+wait (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Cancel a two-\/phase wait. 

\Hypertarget{classrml_1_1internal_1_1thread__monitor_aade3c809fbe1271d73a0a68a56987c84}\index{rml::internal::thread\_monitor@{rml::internal::thread\_monitor}!commit\_wait@{commit\_wait}}
\index{commit\_wait@{commit\_wait}!rml::internal::thread\_monitor@{rml::internal::thread\_monitor}}
\doxysubsubsection{\texorpdfstring{commit\_wait()}{commit\_wait()}}
{\footnotesize\ttfamily \label{classrml_1_1internal_1_1thread__monitor_aade3c809fbe1271d73a0a68a56987c84} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} rml\+::internal\+::thread\+\_\+monitor\+::commit\+\_\+wait (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_1_1cookie}{cookie}} \&}]{c}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Complete a two-\/phase wait and wait until notification occurs after the earlier prepare\+\_\+wait. 

函数调用图\+:
% FIG 2
\Hypertarget{classrml_1_1internal_1_1thread__monitor_aaec978fb92f21dd1823401f7fd1d6f24}\index{rml::internal::thread\_monitor@{rml::internal::thread\_monitor}!detach\_thread@{detach\_thread}}
\index{detach\_thread@{detach\_thread}!rml::internal::thread\_monitor@{rml::internal::thread\_monitor}}
\doxysubsubsection{\texorpdfstring{detach\_thread()}{detach\_thread()}}
{\footnotesize\ttfamily \label{classrml_1_1internal_1_1thread__monitor_aaec978fb92f21dd1823401f7fd1d6f24} 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} rml\+::internal\+::thread\+\_\+monitor\+::detach\+\_\+thread (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{test__task__group_8cpp_a9bb7223a34ff955bbd9fee3f589d5b50}{handle\+\_\+type}}}]{handle}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Detach thread 

\Hypertarget{classrml_1_1internal_1_1thread__monitor_a2be9fe6a3ec89c83442b2acd31d87df7}\index{rml::internal::thread\_monitor@{rml::internal::thread\_monitor}!join@{join}}
\index{join@{join}!rml::internal::thread\_monitor@{rml::internal::thread\_monitor}}
\doxysubsubsection{\texorpdfstring{join()}{join()}}
{\footnotesize\ttfamily \label{classrml_1_1internal_1_1thread__monitor_a2be9fe6a3ec89c83442b2acd31d87df7} 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} rml\+::internal\+::thread\+\_\+monitor\+::join (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{test__task__group_8cpp_a9bb7223a34ff955bbd9fee3f589d5b50}{handle\+\_\+type}}}]{handle}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Join thread 

\Hypertarget{classrml_1_1internal_1_1thread__monitor_a3d1ae1d2476f27d49814bedd78bca43a}\index{rml::internal::thread\_monitor@{rml::internal::thread\_monitor}!notify@{notify}}
\index{notify@{notify}!rml::internal::thread\_monitor@{rml::internal::thread\_monitor}}
\doxysubsubsection{\texorpdfstring{notify()}{notify()}}
{\footnotesize\ttfamily \label{classrml_1_1internal_1_1thread__monitor_a3d1ae1d2476f27d49814bedd78bca43a} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} rml\+::internal\+::thread\+\_\+monitor\+::notify (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



If a thread is waiting or started a two-\/phase wait, notify it. 

Can be called by any thread. \Hypertarget{classrml_1_1internal_1_1thread__monitor_aa70a8ea008c6fbf2edfc1282a6926fb8}\index{rml::internal::thread\_monitor@{rml::internal::thread\_monitor}!prepare\_wait@{prepare\_wait}}
\index{prepare\_wait@{prepare\_wait}!rml::internal::thread\_monitor@{rml::internal::thread\_monitor}}
\doxysubsubsection{\texorpdfstring{prepare\_wait()}{prepare\_wait()}}
{\footnotesize\ttfamily \label{classrml_1_1internal_1_1thread__monitor_aa70a8ea008c6fbf2edfc1282a6926fb8} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} rml\+::internal\+::thread\+\_\+monitor\+::prepare\+\_\+wait (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_1_1cookie}{cookie}} \&}]{c}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Begin two-\/phase wait. 

Should only be called by thread that owns the monitor. The caller must either complete the wait or cancel it. \Hypertarget{classrml_1_1internal_1_1thread__monitor_a5c286f93f53ec2ac4f0d70650ba32b92}\index{rml::internal::thread\_monitor@{rml::internal::thread\_monitor}!yield@{yield}}
\index{yield@{yield}!rml::internal::thread\_monitor@{rml::internal::thread\_monitor}}
\doxysubsubsection{\texorpdfstring{yield()}{yield()}}
{\footnotesize\ttfamily \label{classrml_1_1internal_1_1thread__monitor_a5c286f93f53ec2ac4f0d70650ba32b92} 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} rml\+::internal\+::thread\+\_\+monitor\+::yield (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Yield control to OS 

Affects the calling thread. 

\doxysubsection{类成员变量说明}
\Hypertarget{classrml_1_1internal_1_1thread__monitor_a91ca48315604ce2a205d1820ac425a33}\index{rml::internal::thread\_monitor@{rml::internal::thread\_monitor}!in\_wait@{in\_wait}}
\index{in\_wait@{in\_wait}!rml::internal::thread\_monitor@{rml::internal::thread\_monitor}}
\doxysubsubsection{\texorpdfstring{in\_wait}{in\_wait}}
{\footnotesize\ttfamily \label{classrml_1_1internal_1_1thread__monitor_a91ca48315604ce2a205d1820ac425a33} 
tbb\+::atomic$<$\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}$>$ rml\+::internal\+::thread\+\_\+monitor\+::in\+\_\+wait\hspace{0.3cm}{\ttfamily [private]}}

\Hypertarget{classrml_1_1internal_1_1thread__monitor_a33a6e090f0a01eb4d6b09548f564662a}\index{rml::internal::thread\_monitor@{rml::internal::thread\_monitor}!my\_cookie@{my\_cookie}}
\index{my\_cookie@{my\_cookie}!rml::internal::thread\_monitor@{rml::internal::thread\_monitor}}
\doxysubsubsection{\texorpdfstring{my\_cookie}{my\_cookie}}
{\footnotesize\ttfamily \label{classrml_1_1internal_1_1thread__monitor_a33a6e090f0a01eb4d6b09548f564662a} 
\mbox{\hyperlink{classrml_1_1internal_1_1thread__monitor_1_1cookie}{cookie}} rml\+::internal\+::thread\+\_\+monitor\+::my\+\_\+cookie\hspace{0.3cm}{\ttfamily [private]}}

\Hypertarget{classrml_1_1internal_1_1thread__monitor_a7b0b6b9522adee2282b6f8343e991748}\index{rml::internal::thread\_monitor@{rml::internal::thread\_monitor}!my\_sema@{my\_sema}}
\index{my\_sema@{my\_sema}!rml::internal::thread\_monitor@{rml::internal::thread\_monitor}}
\doxysubsubsection{\texorpdfstring{my\_sema}{my\_sema}}
{\footnotesize\ttfamily \label{classrml_1_1internal_1_1thread__monitor_a7b0b6b9522adee2282b6f8343e991748} 
\mbox{\hyperlink{classtbb_1_1internal_1_1binary__semaphore}{tbb\+::internal\+::binary\+\_\+semaphore}} rml\+::internal\+::thread\+\_\+monitor\+::my\+\_\+sema\hspace{0.3cm}{\ttfamily [private]}}

\Hypertarget{classrml_1_1internal_1_1thread__monitor_a45633e48f8bff652149d43198efcc6af}\index{rml::internal::thread\_monitor@{rml::internal::thread\_monitor}!skipped\_wakeup@{skipped\_wakeup}}
\index{skipped\_wakeup@{skipped\_wakeup}!rml::internal::thread\_monitor@{rml::internal::thread\_monitor}}
\doxysubsubsection{\texorpdfstring{skipped\_wakeup}{skipped\_wakeup}}
{\footnotesize\ttfamily \label{classrml_1_1internal_1_1thread__monitor_a45633e48f8bff652149d43198efcc6af} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} rml\+::internal\+::thread\+\_\+monitor\+::skipped\+\_\+wakeup\hspace{0.3cm}{\ttfamily [private]}}



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/taskflow/3rd-\/party/tbb/src/rml/server/\mbox{\hyperlink{thread__monitor_8h}{thread\+\_\+monitor.\+h}}\end{DoxyCompactItemize}
