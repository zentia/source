\doxysection{os.\+c}
\hypertarget{os_8c_source}{}\label{os_8c_source}\index{runtime/EASTL/packages/mimalloc/src/os.c@{runtime/EASTL/packages/mimalloc/src/os.c}}
\mbox{\hyperlink{os_8c}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00002\ \textcolor{comment}{Copyright\ (c)\ 2018-\/2023,\ Microsoft\ Research,\ Daan\ Leijen}}
\DoxyCodeLine{00003\ \textcolor{comment}{This\ is\ free\ software;\ you\ can\ redistribute\ it\ and/or\ modify\ it\ under\ the}}
\DoxyCodeLine{00004\ \textcolor{comment}{terms\ of\ the\ MIT\ license.\ A\ copy\ of\ the\ license\ can\ be\ found\ in\ the\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{"{}LICENSE"{}\ at\ the\ root\ of\ this\ distribution.}}
\DoxyCodeLine{00006\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{mimalloc_8h}{mimalloc.h}}"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h}{mimalloc/internal.h}}"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2atomic_8h}{mimalloc/atomic.h}}"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{prim_8h}{mimalloc/prim.h}}"{}}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ Initialization.}}
\DoxyCodeLine{00014\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#ifndef\ MI\_DEFAULT\_PHYSICAL\_MEMORY\_IN\_KIB}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#if\ MI\_INTPTR\_SIZE\ <\ 8}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#define\ MI\_DEFAULT\_PHYSICAL\_MEMORY\_IN\_KIB\ \ \ 4*MI\_MiB\ \ \ \ }\textcolor{comment}{//\ 4\ GiB}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#define\ MI\_DEFAULT\_PHYSICAL\_MEMORY\_IN\_KIB\ \ \ 32*MI\_MiB\ \ \ }\textcolor{comment}{//\ 32\ GiB}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{static}\ \mbox{\hyperlink{prim_8h_a1eff7306f3d00df9d9b62d3d8a6a26f1}{mi\_os\_mem\_config\_t}}\ \mbox{\hyperlink{os_8c_a3ef37df92388e9cdcfd240feccf24bf0}{mi\_os\_mem\_config}}\ =\ \{}
\DoxyCodeLine{00024\ \ \ 4096,\ \ \ \ \ \textcolor{comment}{//\ page\ size}}
\DoxyCodeLine{00025\ \ \ 0,\ \ \ \ \ \ \ \ \textcolor{comment}{//\ large\ page\ size\ (usually\ 2MiB)}}
\DoxyCodeLine{00026\ \ \ 4096,\ \ \ \ \ \textcolor{comment}{//\ allocation\ granularity}}
\DoxyCodeLine{00027\ \ \ \mbox{\hyperlink{os_8c_a95897d78d503fd33fb48f8e3fcb87fa8}{MI\_DEFAULT\_PHYSICAL\_MEMORY\_IN\_KIB}},}
\DoxyCodeLine{00028\ \ \ \mbox{\hyperlink{bits_8h_a190208470803b31accc591275a699228}{MI\_MAX\_VABITS}},\ \textcolor{comment}{//\ in\ \`{}bits.h`}}
\DoxyCodeLine{00029\ \ \ \textcolor{keyword}{true},\ \ \ \ \ \textcolor{comment}{//\ has\ overcommit?\ \ (if\ true\ we\ use\ MAP\_NORESERVE\ on\ mmap\ systems)}}
\DoxyCodeLine{00030\ \ \ \textcolor{keyword}{false},\ \ \ \ \textcolor{comment}{//\ can\ we\ partially\ free\ allocated\ blocks?\ (on\ mmap\ systems\ we\ can\ free\ anywhere\ in\ a\ mapped\ range,\ but\ on\ Windows\ we\ must\ free\ the\ entire\ span)}}
\DoxyCodeLine{00031\ \ \ \textcolor{keyword}{true}\ \ \ \ \ \ \textcolor{comment}{//\ has\ virtual\ reserve?\ (if\ true\ we\ can\ reserve\ virtual\ address\ space\ without\ using\ commit\ or\ physical\ memory)}}
\DoxyCodeLine{00032\ \};}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_ab15bd169082d58502da1d18e7ae61044}{\_mi\_os\_has\_overcommit}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{00035\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{os_8c_a3ef37df92388e9cdcfd240feccf24bf0}{mi\_os\_mem\_config}}.has\_overcommit;}
\DoxyCodeLine{00036\ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_a1870a8960093cd6e641f26e60b60ed5a}{\_mi\_os\_has\_virtual\_reserve}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{00039\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{os_8c_a3ef37df92388e9cdcfd240feccf24bf0}{mi\_os\_mem\_config}}.has\_virtual\_reserve;}
\DoxyCodeLine{00040\ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{comment}{//\ OS\ (small)\ page\ size}}
\DoxyCodeLine{00044\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{os_8c_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{00045\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{os_8c_a3ef37df92388e9cdcfd240feccf24bf0}{mi\_os\_mem\_config}}.page\_size;}
\DoxyCodeLine{00046\ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \textcolor{comment}{//\ if\ large\ OS\ pages\ are\ supported\ (2\ or\ 4MiB),\ then\ return\ the\ size,\ otherwise\ return\ the\ small\ page\ size\ (4KiB)}}
\DoxyCodeLine{00049\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{os_8c_a7dcadbfdf83d72eca344f128fca39fd8}{\_mi\_os\_large\_page\_size}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{00050\ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{os_8c_a3ef37df92388e9cdcfd240feccf24bf0}{mi\_os\_mem\_config}}.large\_page\_size\ !=\ 0\ ?\ \mbox{\hyperlink{os_8c_a3ef37df92388e9cdcfd240feccf24bf0}{mi\_os\_mem\_config}}.large\_page\_size\ :\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}());}
\DoxyCodeLine{00051\ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{os_8c_a92837b7960d16ef8d3e038784b1c95df}{\_mi\_os\_guard\_page\_size}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{00054\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ gsize\ =\ \mbox{\hyperlink{os_8c_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}();}
\DoxyCodeLine{00055\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_af04c7a87bc1c69ef3e763a580f47a418}{mi\_assert}}(gsize\ <=\ (\mbox{\hyperlink{types_8h_a6ed338e789aacda04b6656865139ebc2}{MI\_ARENA\_SLICE\_SIZE}}/8));}
\DoxyCodeLine{00056\ \ \ \textcolor{keywordflow}{return}\ gsize;}
\DoxyCodeLine{00057\ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{os_8c_a3625eaddd0c4f3dfeabb056283f70737}{\_mi\_os\_virtual\_address\_bits}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{00060\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ vbits\ =\ \mbox{\hyperlink{os_8c_a3ef37df92388e9cdcfd240feccf24bf0}{mi\_os\_mem\_config}}.virtual\_address\_bits;}
\DoxyCodeLine{00061\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_af04c7a87bc1c69ef3e763a580f47a418}{mi\_assert}}(vbits\ <=\ \mbox{\hyperlink{bits_8h_a190208470803b31accc591275a699228}{MI\_MAX\_VABITS}});}
\DoxyCodeLine{00062\ \ \ \textcolor{keywordflow}{return}\ vbits;}
\DoxyCodeLine{00063\ \}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_a6b00bb2f9c5d978099d20ddbd439d153}{\_mi\_os\_use\_large\_page}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{size\_t}\ alignment)\ \{}
\DoxyCodeLine{00066\ \ \ \textcolor{comment}{//\ if\ we\ have\ access,\ check\ the\ size\ and\ alignment\ requirements}}
\DoxyCodeLine{00067\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{os_8c_a3ef37df92388e9cdcfd240feccf24bf0}{mi\_os\_mem\_config}}.large\_page\_size\ ==\ 0\ ||\ !\mbox{\hyperlink{group__options_ga459ad98f18b3fc9275474807fe0ca188}{mi\_option\_is\_enabled}}(\mbox{\hyperlink{group__options_ggacf0af9f50d2fca76b4e158d611bc930ba7cc4804ced69004fa42a9a136a9ba556}{mi\_option\_allow\_large\_os\_pages}}))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00068\ \ \ \textcolor{keywordflow}{return}\ ((\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ \%\ \mbox{\hyperlink{os_8c_a3ef37df92388e9cdcfd240feccf24bf0}{mi\_os\_mem\_config}}.large\_page\_size)\ ==\ 0\ \&\&\ (alignment\ \%\ \mbox{\hyperlink{os_8c_a3ef37df92388e9cdcfd240feccf24bf0}{mi\_os\_mem\_config}}.large\_page\_size)\ ==\ 0);}
\DoxyCodeLine{00069\ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \textcolor{comment}{//\ round\ to\ a\ good\ OS\ allocation\ size\ (bounded\ by\ max\ 12.5\%\ waste)}}
\DoxyCodeLine{00072\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{os_8c_aa30b56bf7b30da1c4f35323cfccce4f1}{\_mi\_os\_good\_alloc\_size}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}})\ \{}
\DoxyCodeLine{00073\ \ \ \textcolor{keywordtype}{size\_t}\ align\_size;}
\DoxyCodeLine{00074\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ <\ 512*\mbox{\hyperlink{bits_8h_adbafbf7fe5512b55fb47ea52426a2b63}{MI\_KiB}})\ align\_size\ =\ \mbox{\hyperlink{os_8c_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}();}
\DoxyCodeLine{00075\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ <\ 2*\mbox{\hyperlink{bits_8h_a2957d2f636a8bafeb4873446283d10bf}{MI\_MiB}})\ align\_size\ =\ 64*\mbox{\hyperlink{bits_8h_adbafbf7fe5512b55fb47ea52426a2b63}{MI\_KiB}};}
\DoxyCodeLine{00076\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ <\ 8*\mbox{\hyperlink{bits_8h_a2957d2f636a8bafeb4873446283d10bf}{MI\_MiB}})\ align\_size\ =\ 256*\mbox{\hyperlink{bits_8h_adbafbf7fe5512b55fb47ea52426a2b63}{MI\_KiB}};}
\DoxyCodeLine{00077\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ <\ 32*\mbox{\hyperlink{bits_8h_a2957d2f636a8bafeb4873446283d10bf}{MI\_MiB}})\ align\_size\ =\ 1*\mbox{\hyperlink{bits_8h_a2957d2f636a8bafeb4873446283d10bf}{MI\_MiB}};}
\DoxyCodeLine{00078\ \ \ \textcolor{keywordflow}{else}\ align\_size\ =\ 4*\mbox{\hyperlink{bits_8h_a2957d2f636a8bafeb4873446283d10bf}{MI\_MiB}};}
\DoxyCodeLine{00079\ \ \ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{bits_8h_a13767b1803a4c31c40d896e9c08bc8a3}{mi\_unlikely}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ >=\ (SIZE\_MAX\ -\/\ align\_size))\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}};\ \textcolor{comment}{//\ possible\ overflow?}}
\DoxyCodeLine{00080\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a7f35944d44d8a16365072023dd19e0da}{\_mi\_align\_up}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ align\_size);}
\DoxyCodeLine{00081\ \}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{os_8c_a01926e5fc23db557b912d0f3a9b09944}{\_mi\_os\_init}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{00084\ \ \ \mbox{\hyperlink{prim_8h_a5f95deaa4c625e888392c68c62b5b8de}{\_mi\_prim\_mem\_init}}(\&\mbox{\hyperlink{os_8c_a3ef37df92388e9cdcfd240feccf24bf0}{mi\_os\_mem\_config}});}
\DoxyCodeLine{00085\ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00089\ \textcolor{comment}{\ \ Util}}
\DoxyCodeLine{00090\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00091\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_a7de6e2fbee441aa290e54d81f512e662}{\_mi\_os\_decommit}}(\textcolor{keywordtype}{void}*\ addr,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00092\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_acef931ae1be3c3ddb6ee125a8267a84e}{\_mi\_os\_commit}}(\textcolor{keywordtype}{void}*\ addr,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{bool}*\ is\_zero);}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{os_8c_a91db0c766bc3be65860971d827244f70}{\_mi\_os\_get\_aligned\_hint}}(\textcolor{keywordtype}{size\_t}\ try\_alignment,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}})\ \{}
\DoxyCodeLine{00095\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ab7467946e27cd6bb4af911805cc5db26}{MI\_UNUSED}}(try\_alignment);\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ab7467946e27cd6bb4af911805cc5db26}{MI\_UNUSED}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00096\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00097\ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \textcolor{comment}{//\ In\ secure\ mode,\ return\ the\ size\ of\ a\ guard\ page,\ otherwise\ 0}}
\DoxyCodeLine{00100\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{os_8c_a2daf38bcf9e1a42db5038d237354fbe2}{\_mi\_os\_secure\_guard\_page\_size}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{00101\ \textcolor{preprocessor}{\ \ \#if\ MI\_SECURE\ >\ 0}}
\DoxyCodeLine{00102\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{os_8c_a92837b7960d16ef8d3e038784b1c95df}{\_mi\_os\_guard\_page\_size}}();}
\DoxyCodeLine{00103\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{00104\ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00105\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00106\ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \textcolor{comment}{//\ In\ secure\ mode,\ try\ to\ decommit\ an\ area\ and\ output\ a\ warning\ if\ this\ fails.}}
\DoxyCodeLine{00109\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_ab8a90f7c45f09eeb46adb1677f438827}{\_mi\_os\_secure\_guard\_page\_set\_at}}(\textcolor{keywordtype}{void}*\ addr,\ \textcolor{keywordtype}{bool}\ is\_pinned)\ \{}
\DoxyCodeLine{00110\ \ \ \textcolor{keywordflow}{if}\ (addr\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00111\ \textcolor{preprocessor}{\ \ \#if\ MI\_SECURE\ >\ 0}}
\DoxyCodeLine{00112\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{testhelper_8h_a047ea0d874e6802b9b6d08f6b50248e5}{ok}}\ =\ (is\_pinned\ ?\ false\ :\ \mbox{\hyperlink{os_8c_a7de6e2fbee441aa290e54d81f512e662}{\_mi\_os\_decommit}}(addr,\ \mbox{\hyperlink{os_8c_a2daf38bcf9e1a42db5038d237354fbe2}{\_mi\_os\_secure\_guard\_page\_size}}()));}
\DoxyCodeLine{00113\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{testhelper_8h_a047ea0d874e6802b9b6d08f6b50248e5}{ok}})\ \{}
\DoxyCodeLine{00114\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2atomic_8h_a2bebc073bcaac71658e57bb260c2e426}{\_mi\_error\_message}}(\mbox{\hyperlink{types_8h_a2d1678d5a7cc8ce499643f3b8957def4}{EINVAL}},\ \textcolor{stringliteral}{"{}secure\ level\ \%d,\ but\ failed\ to\ commit\ guard\ page\ (at\ \%p\ of\ size\ \%zu)\(\backslash\)n"{}},\ \mbox{\hyperlink{types_8h_a16192d28dac241d44aa4ff272d2a29a5}{MI\_SECURE}},\ addr,\ \mbox{\hyperlink{os_8c_a2daf38bcf9e1a42db5038d237354fbe2}{\_mi\_os\_secure\_guard\_page\_size}}());}
\DoxyCodeLine{00115\ \ \ \}}
\DoxyCodeLine{00116\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{testhelper_8h_a047ea0d874e6802b9b6d08f6b50248e5}{ok}};}
\DoxyCodeLine{00117\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{00118\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ab7467946e27cd6bb4af911805cc5db26}{MI\_UNUSED}}(is\_pinned);}
\DoxyCodeLine{00119\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00120\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00121\ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \textcolor{comment}{//\ In\ secure\ mode,\ try\ to\ decommit\ an\ area\ and\ output\ a\ warning\ if\ this\ fails.}}
\DoxyCodeLine{00124\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_aac8deca2b283afa161d538be5b073e23}{\_mi\_os\_secure\_guard\_page\_set\_before}}(\textcolor{keywordtype}{void}*\ addr,\ \textcolor{keywordtype}{bool}\ is\_pinned)\ \{}
\DoxyCodeLine{00125\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{os_8c_ab8a90f7c45f09eeb46adb1677f438827}{\_mi\_os\_secure\_guard\_page\_set\_at}}((\mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*)addr\ -\/\ \mbox{\hyperlink{os_8c_a2daf38bcf9e1a42db5038d237354fbe2}{\_mi\_os\_secure\_guard\_page\_size}}(),\ is\_pinned);}
\DoxyCodeLine{00126\ \}}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \textcolor{comment}{//\ In\ secure\ mode,\ try\ to\ recommit\ an\ area}}
\DoxyCodeLine{00129\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_a8523f19c27b397670402ec9135e14926}{\_mi\_os\_secure\_guard\_page\_reset\_at}}(\textcolor{keywordtype}{void}*\ addr)\ \{}
\DoxyCodeLine{00130\ \ \ \textcolor{keywordflow}{if}\ (addr\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00131\ \textcolor{preprocessor}{\ \ \#if\ MI\_SECURE\ >\ 0}}
\DoxyCodeLine{00132\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{os_8c_acef931ae1be3c3ddb6ee125a8267a84e}{\_mi\_os\_commit}}(addr,\ \mbox{\hyperlink{os_8c_a2daf38bcf9e1a42db5038d237354fbe2}{\_mi\_os\_secure\_guard\_page\_size}}(),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00133\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{00134\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00135\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00136\ \}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \textcolor{comment}{//\ In\ secure\ mode,\ try\ to\ recommit\ an\ area}}
\DoxyCodeLine{00139\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_a38495bcffe21853c689afaf71f868e57}{\_mi\_os\_secure\_guard\_page\_reset\_before}}(\textcolor{keywordtype}{void}*\ addr)\ \{}
\DoxyCodeLine{00140\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{os_8c_a8523f19c27b397670402ec9135e14926}{\_mi\_os\_secure\_guard\_page\_reset\_at}}((\mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*)addr\ -\/\ \mbox{\hyperlink{os_8c_a2daf38bcf9e1a42db5038d237354fbe2}{\_mi\_os\_secure\_guard\_page\_size}}());}
\DoxyCodeLine{00141\ \}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00144\ \textcolor{comment}{\ \ Free\ memory}}
\DoxyCodeLine{00145\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{os_8c_aa0a58080699361b65ccbf1a97f99edee}{mi\_os\_free\_huge\_os\_pages}}(\textcolor{keywordtype}{void}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{os_8c_a52be3cf3bbf0a792b75a16e6d8c54a6e}{mi\_os\_prim\_free}}(\textcolor{keywordtype}{void}*\ addr,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{size\_t}\ commit\_size)\ \{}
\DoxyCodeLine{00150\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}((\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ \%\ \mbox{\hyperlink{os_8c_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}())\ ==\ 0);}
\DoxyCodeLine{00151\ \ \ \textcolor{keywordflow}{if}\ (addr\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ ||\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ ==\ 0)\ \textcolor{keywordflow}{return};\ \textcolor{comment}{//\ ||\ \_mi\_os\_is\_huge\_reserved(addr)}}
\DoxyCodeLine{00152\ \ \ \textcolor{keywordtype}{int}\ err\ =\ \mbox{\hyperlink{prim_8h_a709e08e93548cbede90a196d306ab4f9}{\_mi\_prim\_free}}(addr,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00153\ \ \ \textcolor{keywordflow}{if}\ (err\ !=\ 0)\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac253cac2ca24fb63be7f4937ac620dc4}{\_mi\_warning\_message}}(\textcolor{stringliteral}{"{}unable\ to\ free\ OS\ memory\ (error:\ \%d\ (0x\%x),\ size:\ 0x\%zx\ bytes,\ address:\ \%p)\(\backslash\)n"{}},\ err,\ err,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ addr);}
\DoxyCodeLine{00155\ \ \ \}}
\DoxyCodeLine{00156\ \ \ \textcolor{keywordflow}{if}\ (commit\_size\ >\ 0)\ \{}
\DoxyCodeLine{00157\ \ \ \ \ \mbox{\hyperlink{types_8h_a2174684a7162240290003823f436c87e}{mi\_os\_stat\_decrease}}(committed,\ commit\_size);}
\DoxyCodeLine{00158\ \ \ \}}
\DoxyCodeLine{00159\ \ \ \mbox{\hyperlink{types_8h_a2174684a7162240290003823f436c87e}{mi\_os\_stat\_decrease}}(reserved,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00160\ \}}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{os_8c_aeadf7a5475ecac072880a4c415d85c75}{\_mi\_os\_free\_ex}}(\textcolor{keywordtype}{void}*\ addr,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{bool}\ still\_committed,\ \mbox{\hyperlink{types_8h_a56a2cb6eed720cdd1fa4b9907c44d7d0}{mi\_memid\_t}}\ memid)\ \{}
\DoxyCodeLine{00163\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{types_8h_a7b53315c793e6a0934fb369cfb0dc388}{mi\_memkind\_is\_os}}(memid.\mbox{\hyperlink{structmi__memid__s_a6f3573b226287cf7875980e33029e0d9}{memkind}}))\ \{}
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ csize\ =\ memid.\mbox{\hyperlink{structmi__memid__s_af2f5c4ffe67f2c97781d5c15346de01a}{mem}}.\mbox{\hyperlink{structmi__memid__s_a0d25b7fe835ace64c0d7a48985226b2a}{os}}.\mbox{\hyperlink{structmi__memid__os__info_aa2d631565042826758012d35e55ce465}{size}};}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keywordflow}{if}\ (csize==0)\ \{\ \mbox{\hyperlink{os_8c_aa30b56bf7b30da1c4f35323cfccce4f1}{\_mi\_os\_good\_alloc\_size}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});\ \}}
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ commit\_size\ =\ (still\_committed\ ?\ csize\ :\ 0);}
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{keywordtype}{void}*\ base\ =\ addr;}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{comment}{//\ different\ base?\ (due\ to\ alignment)}}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordflow}{if}\ (memid.\mbox{\hyperlink{structmi__memid__s_af2f5c4ffe67f2c97781d5c15346de01a}{mem}}.\mbox{\hyperlink{structmi__memid__s_a0d25b7fe835ace64c0d7a48985226b2a}{os}}.\mbox{\hyperlink{structmi__memid__os__info_a7800011c14b5cc138b934345cf4d0dab}{base}}\ !=\ base)\ \{}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_af04c7a87bc1c69ef3e763a580f47a418}{mi\_assert}}(memid.\mbox{\hyperlink{structmi__memid__s_af2f5c4ffe67f2c97781d5c15346de01a}{mem}}.\mbox{\hyperlink{structmi__memid__s_a0d25b7fe835ace64c0d7a48985226b2a}{os}}.\mbox{\hyperlink{structmi__memid__os__info_a7800011c14b5cc138b934345cf4d0dab}{base}}\ <=\ addr);}
\DoxyCodeLine{00171\ \ \ \ \ \ \ base\ =\ memid.\mbox{\hyperlink{structmi__memid__s_af2f5c4ffe67f2c97781d5c15346de01a}{mem}}.\mbox{\hyperlink{structmi__memid__s_a0d25b7fe835ace64c0d7a48985226b2a}{os}}.\mbox{\hyperlink{structmi__memid__os__info_a7800011c14b5cc138b934345cf4d0dab}{base}};}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ diff\ =\ (\mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*)addr\ -\/\ (\mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*)memid.\mbox{\hyperlink{structmi__memid__s_af2f5c4ffe67f2c97781d5c15346de01a}{mem}}.\mbox{\hyperlink{structmi__memid__s_a0d25b7fe835ace64c0d7a48985226b2a}{os}}.\mbox{\hyperlink{structmi__memid__os__info_a7800011c14b5cc138b934345cf4d0dab}{base}};}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (memid.\mbox{\hyperlink{structmi__memid__s_af2f5c4ffe67f2c97781d5c15346de01a}{mem}}.\mbox{\hyperlink{structmi__memid__s_a0d25b7fe835ace64c0d7a48985226b2a}{os}}.\mbox{\hyperlink{structmi__memid__os__info_aa2d631565042826758012d35e55ce465}{size}}==0)\ \{}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ csize\ +=\ diff;}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (still\_committed)\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ commit\_size\ -\/=\ diff;\ \ \textcolor{comment}{//\ the\ (addr-\/base)\ part\ was\ already\ un-\/committed}}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00179\ \ \ \ \ \}}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{comment}{//\ free\ it}}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keywordflow}{if}\ (memid.\mbox{\hyperlink{structmi__memid__s_a6f3573b226287cf7875980e33029e0d9}{memkind}}\ ==\ \mbox{\hyperlink{types_8h_ac6c1ef0bff44bbd4da79dae9914f40faa1827ef3f939d8e7285a61adabf6d824e}{MI\_MEM\_OS\_HUGE}})\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_af04c7a87bc1c69ef3e763a580f47a418}{mi\_assert}}(memid.\mbox{\hyperlink{structmi__memid__s_ac91743de3a74ed0c22ff2cbeddd265eb}{is\_pinned}});}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \mbox{\hyperlink{os_8c_aa0a58080699361b65ccbf1a97f99edee}{mi\_os\_free\_huge\_os\_pages}}(base,\ csize);}
\DoxyCodeLine{00184\ \ \ \ \ \}}
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \mbox{\hyperlink{os_8c_a52be3cf3bbf0a792b75a16e6d8c54a6e}{mi\_os\_prim\_free}}(base,\ csize,\ (still\_committed\ ?\ commit\_size\ :\ 0));}
\DoxyCodeLine{00187\ \ \ \ \ \}}
\DoxyCodeLine{00188\ \ \ \}}
\DoxyCodeLine{00189\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{comment}{//\ nothing\ to\ do}}
\DoxyCodeLine{00191\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_af04c7a87bc1c69ef3e763a580f47a418}{mi\_assert}}(memid.\mbox{\hyperlink{structmi__memid__s_a6f3573b226287cf7875980e33029e0d9}{memkind}}\ <\ \mbox{\hyperlink{types_8h_ac6c1ef0bff44bbd4da79dae9914f40faa3624937a706def54155dfc0a7fb015d7}{MI\_MEM\_OS}});}
\DoxyCodeLine{00192\ \ \ \}}
\DoxyCodeLine{00193\ \}}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \textcolor{keywordtype}{void}\ \ \mbox{\hyperlink{os_8c_aef12a26764ff4aae64a1df9116452428}{\_mi\_os\_free}}(\textcolor{keywordtype}{void}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \mbox{\hyperlink{types_8h_a56a2cb6eed720cdd1fa4b9907c44d7d0}{mi\_memid\_t}}\ memid)\ \{}
\DoxyCodeLine{00196\ \ \ \mbox{\hyperlink{os_8c_aeadf7a5475ecac072880a4c415d85c75}{\_mi\_os\_free\_ex}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keyword}{true},\ memid);}
\DoxyCodeLine{00197\ \}}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00201\ \textcolor{comment}{\ \ \ Primitive\ allocation\ from\ the\ OS.}}
\DoxyCodeLine{00202\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \textcolor{comment}{//\ Note:\ the\ \`{}try\_alignment`\ is\ just\ a\ hint\ and\ the\ returned\ pointer\ is\ not\ guaranteed\ to\ be\ aligned.}}
\DoxyCodeLine{00205\ \textcolor{comment}{//\ Also\ \`{}hint\_addr`\ is\ a\ hint\ and\ may\ be\ ignored.}}
\DoxyCodeLine{00206\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{os_8c_a9daeea34d1dbfa39bfbcdf8e8ba299b8}{mi\_os\_prim\_alloc\_at}}(\textcolor{keywordtype}{void}*\ hint\_addr,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{size\_t}\ try\_alignment,\ \textcolor{keywordtype}{bool}\ commit,\ \textcolor{keywordtype}{bool}\ allow\_large,\ \textcolor{keywordtype}{bool}*\ is\_large,\ \textcolor{keywordtype}{bool}*\ is\_zero)\ \{}
\DoxyCodeLine{00207\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ >\ 0\ \&\&\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ \%\ \mbox{\hyperlink{os_8c_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}())\ ==\ 0);}
\DoxyCodeLine{00208\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(is\_zero\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00209\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(is\_large\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00210\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ ==\ 0)\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00211\ \ \ \textcolor{keywordflow}{if}\ (!commit)\ \{\ allow\_large\ =\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00212\ \ \ \textcolor{keywordflow}{if}\ (try\_alignment\ ==\ 0)\ \{\ try\_alignment\ =\ 1;\ \}\ \textcolor{comment}{//\ avoid\ 0\ to\ ensure\ there\ will\ be\ no\ divide\ by\ zero\ when\ aligning}}
\DoxyCodeLine{00213\ \ \ *is\_zero\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00214\ \ \ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00215\ \ \ \textcolor{keywordtype}{int}\ err\ =\ \mbox{\hyperlink{prim_8h_af6b664f566e88b730b416f6d7cc715ae}{\_mi\_prim\_alloc}}(hint\_addr,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ try\_alignment,\ commit,\ allow\_large,\ is\_large,\ is\_zero,\ \&\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}});}
\DoxyCodeLine{00216\ \ \ \textcolor{keywordflow}{if}\ (err\ !=\ 0)\ \{}
\DoxyCodeLine{00217\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac253cac2ca24fb63be7f4937ac620dc4}{\_mi\_warning\_message}}(\textcolor{stringliteral}{"{}unable\ to\ allocate\ OS\ memory\ (error:\ \%d\ (0x\%x),\ addr:\ \%p,\ size:\ 0x\%zx\ bytes,\ align:\ 0x\%zx,\ commit:\ \%d,\ allow\ large:\ \%d)\(\backslash\)n"{}},\ err,\ err,\ hint\_addr,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ try\_alignment,\ commit,\ allow\_large);}
\DoxyCodeLine{00218\ \ \ \}}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \mbox{\hyperlink{types_8h_a133367c739f1796271a6f0d75dc02b53}{mi\_os\_stat\_counter\_increase}}(mmap\_calls,\ 1);}
\DoxyCodeLine{00221\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{}
\DoxyCodeLine{00222\ \ \ \ \ \mbox{\hyperlink{types_8h_abb91d78f53dbe13e695cf4f5ce9377e6}{mi\_os\_stat\_increase}}(reserved,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00223\ \ \ \ \ \textcolor{keywordflow}{if}\ (commit)\ \{}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \mbox{\hyperlink{types_8h_abb91d78f53dbe13e695cf4f5ce9377e6}{mi\_os\_stat\_increase}}(committed,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \textcolor{comment}{//\ seems\ needed\ for\ asan\ (or\ \`{}mimalloc-\/test-\/api`\ fails)}}
\DoxyCodeLine{00226\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ MI\_TRACK\_ASAN}}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (*is\_zero)\ \{\ \mbox{\hyperlink{track_8h_a6e155ed879c074c60f2d2656be414b04}{mi\_track\_mem\_defined}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});\ \}}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{\ \mbox{\hyperlink{track_8h_a435f7a1a6faaef4b17d9d9359a9a8cff}{mi\_track\_mem\_undefined}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});\ \}}
\DoxyCodeLine{00229\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00230\ \ \ \ \ \}}
\DoxyCodeLine{00231\ \ \ \}}
\DoxyCodeLine{00232\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00233\ \}}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{os_8c_ac50f6ac4cacc85db44bcdfbe89f941b8}{mi\_os\_prim\_alloc}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{size\_t}\ try\_alignment,\ \textcolor{keywordtype}{bool}\ commit,\ \textcolor{keywordtype}{bool}\ allow\_large,\ \textcolor{keywordtype}{bool}*\ is\_large,\ \textcolor{keywordtype}{bool}*\ is\_zero)\ \{}
\DoxyCodeLine{00236\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{os_8c_a9daeea34d1dbfa39bfbcdf8e8ba299b8}{mi\_os\_prim\_alloc\_at}}(\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ try\_alignment,\ commit,\ allow\_large,\ is\_large,\ is\_zero);}
\DoxyCodeLine{00237\ \}}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ \textcolor{comment}{//\ Primitive\ aligned\ allocation\ from\ the\ OS.}}
\DoxyCodeLine{00241\ \textcolor{comment}{//\ This\ function\ guarantees\ the\ allocated\ memory\ is\ aligned.}}
\DoxyCodeLine{00242\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{os_8c_a661fb4f8ebc2ec073a2652b6eb21698b}{mi\_os\_prim\_alloc\_aligned}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{size\_t}\ alignment,\ \textcolor{keywordtype}{bool}\ commit,\ \textcolor{keywordtype}{bool}\ allow\_large,\ \textcolor{keywordtype}{bool}*\ is\_large,\ \textcolor{keywordtype}{bool}*\ is\_zero,\ \textcolor{keywordtype}{void}**\ base)\ \{}
\DoxyCodeLine{00243\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(alignment\ >=\ \mbox{\hyperlink{os_8c_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}()\ \&\&\ ((alignment\ \&\ (alignment\ -\/\ 1))\ ==\ 0));}
\DoxyCodeLine{00244\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ >\ 0\ \&\&\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ \%\ \mbox{\hyperlink{os_8c_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}())\ ==\ 0);}
\DoxyCodeLine{00245\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(is\_large\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00246\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(is\_zero\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00247\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(base\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00248\ \ \ \textcolor{keywordflow}{if}\ (!commit)\ allow\_large\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00249\ \ \ \textcolor{keywordflow}{if}\ (!(alignment\ >=\ \mbox{\hyperlink{os_8c_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}()\ \&\&\ ((alignment\ \&\ (alignment\ -\/\ 1))\ ==\ 0)))\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00250\ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a7f35944d44d8a16365072023dd19e0da}{\_mi\_align\_up}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \mbox{\hyperlink{os_8c_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}());}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \textcolor{comment}{//\ try\ a\ direct\ allocation\ if\ the\ alignment\ is\ below\ the\ default,\ or\ if\ larger\ than\ 1/8\ fraction\ of\ the\ size.}}
\DoxyCodeLine{00253\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ try\_direct\_alloc\ =\ (alignment\ <=\ \mbox{\hyperlink{os_8c_a3ef37df92388e9cdcfd240feccf24bf0}{mi\_os\_mem\_config}}.alloc\_granularity\ ||\ alignment\ >\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}/8);}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \ \ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00256\ \ \ \textcolor{keywordflow}{if}\ (try\_direct\_alloc)\ \{}
\DoxyCodeLine{00257\ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{os_8c_ac50f6ac4cacc85db44bcdfbe89f941b8}{mi\_os\_prim\_alloc}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ alignment,\ commit,\ allow\_large,\ is\_large,\ is\_zero);}
\DoxyCodeLine{00258\ \ \ \}}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00260\ \ \ \textcolor{comment}{//\ aligned\ already?}}
\DoxyCodeLine{00261\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ \&\&\ ((uintptr\_t)\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ \%\ alignment)\ ==\ 0)\ \{}
\DoxyCodeLine{00262\ \ \ \ \ *base\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00263\ \ \ \}}
\DoxyCodeLine{00264\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00265\ \ \ \ \ \textcolor{comment}{//\ if\ not\ aligned,\ free\ it,\ overallocate,\ and\ unmap\ around\ it}}
\DoxyCodeLine{00266\ \textcolor{preprocessor}{\ \ \ \ \#if\ !MI\_TRACK\_ASAN}}
\DoxyCodeLine{00267\ \ \ \ \ \textcolor{keywordflow}{if}\ (try\_direct\_alloc)\ \{}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac253cac2ca24fb63be7f4937ac620dc4}{\_mi\_warning\_message}}(\textcolor{stringliteral}{"{}unable\ to\ allocate\ aligned\ OS\ memory\ directly,\ fall\ back\ to\ over-\/allocation\ (size:\ 0x\%zx\ bytes,\ address:\ \%p,\ alignment:\ 0x\%zx,\ commit:\ \%d)\(\backslash\)n"{}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ alignment,\ commit);}
\DoxyCodeLine{00269\ \ \ \ \ \}}
\DoxyCodeLine{00270\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00271\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{\ \mbox{\hyperlink{os_8c_a52be3cf3bbf0a792b75a16e6d8c54a6e}{mi\_os\_prim\_free}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ (commit\ ?\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ :\ 0));\ \}}
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ >=\ (SIZE\_MAX\ -\/\ alignment))\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};\ \textcolor{comment}{//\ overflow}}
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ over\_size\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ +\ alignment;}
\DoxyCodeLine{00274\ }
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{os_8c_a3ef37df92388e9cdcfd240feccf24bf0}{mi\_os\_mem\_config}}.has\_partial\_free)\ \{\ \ \textcolor{comment}{//\ win32\ virtualAlloc\ cannot\ free\ parts\ of\ an\ allocated\ block}}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \textcolor{comment}{//\ over-\/allocate\ uncommitted\ (virtual)\ memory}}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{os_8c_ac50f6ac4cacc85db44bcdfbe89f941b8}{mi\_os\_prim\_alloc}}(over\_size,\ 1\ \textcolor{comment}{/*alignment*/},\ \textcolor{keyword}{false}\ \textcolor{comment}{/*\ commit?\ */},\ \textcolor{keyword}{false}\ \textcolor{comment}{/*\ allow\_large\ */},\ is\_large,\ is\_zero);}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \ \ \ \ \ \ \textcolor{comment}{//\ set\ p\ to\ the\ aligned\ part\ in\ the\ full\ region}}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \textcolor{comment}{//\ note:\ on\ Windows\ VirtualFree\ needs\ the\ actual\ base\ pointer}}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \textcolor{comment}{//\ this\ is\ handledby\ having\ the\ \`{}base`\ field\ in\ the\ memid.}}
\DoxyCodeLine{00283\ \ \ \ \ \ \ *base\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};\ \textcolor{comment}{//\ remember\ the\ base}}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac76001cb6de6586632eb7fb6c1795a77}{\_mi\_align\_up\_ptr}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ alignment);}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00286\ \ \ \ \ \ \ \textcolor{comment}{//\ explicitly\ commit\ only\ the\ aligned\ part}}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (commit)\ \{}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{os_8c_acef931ae1be3c3ddb6ee125a8267a84e}{\_mi\_os\_commit}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00290\ \ \ \ \ \}}
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{keywordflow}{else}\ \ \{\ \textcolor{comment}{//\ mmap\ can\ free\ inside\ an\ allocation}}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \textcolor{comment}{//\ overallocate...}}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{os_8c_ac50f6ac4cacc85db44bcdfbe89f941b8}{mi\_os\_prim\_alloc}}(over\_size,\ 1,\ commit,\ \textcolor{keyword}{false},\ is\_large,\ is\_zero);}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \ \ \ \ \ \ \textcolor{comment}{//\ and\ selectively\ unmap\ parts\ around\ the\ over-\/allocated\ area.}}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ aligned\_p\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac76001cb6de6586632eb7fb6c1795a77}{\_mi\_align\_up\_ptr}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ alignment);}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ pre\_size\ =\ (\mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*)aligned\_p\ -\/\ (\mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*)\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ mid\_size\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a7f35944d44d8a16365072023dd19e0da}{\_mi\_align\_up}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \mbox{\hyperlink{os_8c_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}());}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ post\_size\ =\ over\_size\ -\/\ pre\_size\ -\/\ mid\_size;}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(pre\_size\ <\ over\_size\&\&\ post\_size\ <\ over\_size\&\&\ mid\_size\ >=\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pre\_size\ >\ 0)\ \ \{\ \mbox{\hyperlink{os_8c_a52be3cf3bbf0a792b75a16e6d8c54a6e}{mi\_os\_prim\_free}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ pre\_size,\ (commit\ ?\ pre\_size\ :\ 0));\ \}}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (post\_size\ >\ 0)\ \{\ \mbox{\hyperlink{os_8c_a52be3cf3bbf0a792b75a16e6d8c54a6e}{mi\_os\_prim\_free}}((\mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*)aligned\_p\ +\ mid\_size,\ post\_size,\ (commit\ ?\ post\_size\ :\ 0));\ \}}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \textcolor{comment}{//\ we\ can\ return\ the\ aligned\ pointer\ on\ \`{}mmap`\ systems}}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ aligned\_p;}
\DoxyCodeLine{00306\ \ \ \ \ \ \ *base\ =\ aligned\_p;\ \textcolor{comment}{//\ since\ we\ freed\ the\ pre\ part,\ \`{}*base\ ==\ p`.}}
\DoxyCodeLine{00307\ \ \ \ \ \}}
\DoxyCodeLine{00308\ \ \ \}}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ ||\ (\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ \&\&\ *base\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ \&\&\ ((uintptr\_t)\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ \%\ alignment)\ ==\ 0));}
\DoxyCodeLine{00311\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00312\ \}}
\DoxyCodeLine{00313\ }
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00316\ \textcolor{comment}{\ \ OS\ API:\ alloc\ and\ alloc\_aligned}}
\DoxyCodeLine{00317\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00318\ }
\DoxyCodeLine{00319\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{os_8c_adda37bbacbf064719f3398bc4c8de08f}{\_mi\_os\_alloc}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \mbox{\hyperlink{types_8h_a56a2cb6eed720cdd1fa4b9907c44d7d0}{mi\_memid\_t}}*\ memid)\ \{}
\DoxyCodeLine{00320\ \ \ *memid\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a130091d8591ac82c587dace216eca4d2}{\_mi\_memid\_none}}();}
\DoxyCodeLine{00321\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ ==\ 0)\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00322\ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ =\ \mbox{\hyperlink{os_8c_aa30b56bf7b30da1c4f35323cfccce4f1}{\_mi\_os\_good\_alloc\_size}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00323\ \ \ \textcolor{keywordtype}{bool}\ os\_is\_large\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00324\ \ \ \textcolor{keywordtype}{bool}\ os\_is\_zero\ \ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00325\ \ \ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{os_8c_ac50f6ac4cacc85db44bcdfbe89f941b8}{mi\_os\_prim\_alloc}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ 0,\ \textcolor{keyword}{true},\ \textcolor{keyword}{false},\ \&os\_is\_large,\ \&os\_is\_zero);}
\DoxyCodeLine{00326\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{}
\DoxyCodeLine{00327\ \ \ \ \ *memid\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a09383ef9229fc236d59aadf1acc9268c}{\_mi\_memid\_create\_os}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keyword}{true},\ os\_is\_zero,\ os\_is\_large);}
\DoxyCodeLine{00328\ \ \ \}}
\DoxyCodeLine{00329\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00330\ \}}
\DoxyCodeLine{00331\ }
\DoxyCodeLine{00332\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{os_8c_afce7c8636aa29141d98edb847cd6f859}{\_mi\_os\_alloc\_aligned}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{size\_t}\ alignment,\ \textcolor{keywordtype}{bool}\ commit,\ \textcolor{keywordtype}{bool}\ allow\_large,\ \mbox{\hyperlink{types_8h_a56a2cb6eed720cdd1fa4b9907c44d7d0}{mi\_memid\_t}}*\ memid)}
\DoxyCodeLine{00333\ \{}
\DoxyCodeLine{00334\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ab7467946e27cd6bb4af911805cc5db26}{MI\_UNUSED}}(\&\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a91db0c766bc3be65860971d827244f70}{\_mi\_os\_get\_aligned\_hint}});\ \textcolor{comment}{//\ suppress\ unused\ warnings}}
\DoxyCodeLine{00335\ \ \ *memid\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a130091d8591ac82c587dace216eca4d2}{\_mi\_memid\_none}}();}
\DoxyCodeLine{00336\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ ==\ 0)\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00337\ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ =\ \mbox{\hyperlink{os_8c_aa30b56bf7b30da1c4f35323cfccce4f1}{\_mi\_os\_good\_alloc\_size}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00338\ \ \ alignment\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a7f35944d44d8a16365072023dd19e0da}{\_mi\_align\_up}}(alignment,\ \mbox{\hyperlink{os_8c_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}());}
\DoxyCodeLine{00339\ }
\DoxyCodeLine{00340\ \ \ \textcolor{keywordtype}{bool}\ os\_is\_large\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00341\ \ \ \textcolor{keywordtype}{bool}\ os\_is\_zero\ \ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00342\ \ \ \textcolor{keywordtype}{void}*\ os\_base\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00343\ \ \ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{os_8c_a661fb4f8ebc2ec073a2652b6eb21698b}{mi\_os\_prim\_alloc\_aligned}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ alignment,\ commit,\ allow\_large,\ \&os\_is\_large,\ \&os\_is\_zero,\ \&os\_base);}
\DoxyCodeLine{00344\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{}
\DoxyCodeLine{00345\ \ \ \ \ *memid\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a09383ef9229fc236d59aadf1acc9268c}{\_mi\_memid\_create\_os}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ commit,\ os\_is\_zero,\ os\_is\_large);}
\DoxyCodeLine{00346\ \ \ \ \ memid-\/>\mbox{\hyperlink{structmi__memid__s_af2f5c4ffe67f2c97781d5c15346de01a}{mem}}.\mbox{\hyperlink{structmi__memid__s_a0d25b7fe835ace64c0d7a48985226b2a}{os}}.\mbox{\hyperlink{structmi__memid__os__info_a7800011c14b5cc138b934345cf4d0dab}{base}}\ =\ os\_base;}
\DoxyCodeLine{00347\ \ \ \ \ \textcolor{comment}{//\ memid-\/>mem.os.alignment\ =\ alignment;}}
\DoxyCodeLine{00348\ \ \ \ \ memid-\/>\mbox{\hyperlink{structmi__memid__s_af2f5c4ffe67f2c97781d5c15346de01a}{mem}}.\mbox{\hyperlink{structmi__memid__s_a0d25b7fe835ace64c0d7a48985226b2a}{os}}.\mbox{\hyperlink{structmi__memid__os__info_aa2d631565042826758012d35e55ce465}{size}}\ +=\ ((\mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*)\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ -\/\ (\mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*)os\_base);\ \ \textcolor{comment}{//\ todo:\ return\ from\ prim\_alloc\_aligned}}
\DoxyCodeLine{00349\ \ \ \}}
\DoxyCodeLine{00350\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00351\ \}}
\DoxyCodeLine{00352\ }
\DoxyCodeLine{00353\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{os_8c_ad8d9f97986c219a284b042738dffc14c}{\_mi\_os\_zalloc}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \mbox{\hyperlink{types_8h_a56a2cb6eed720cdd1fa4b9907c44d7d0}{mi\_memid\_t}}*\ memid)\ \{}
\DoxyCodeLine{00354\ \ \ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{os_8c_adda37bbacbf064719f3398bc4c8de08f}{\_mi\_os\_alloc}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ memid);}
\DoxyCodeLine{00355\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00357\ \ \ \textcolor{comment}{//\ zero\ the\ OS\ memory\ if\ needed}}
\DoxyCodeLine{00358\ \ \ \textcolor{keywordflow}{if}\ (!memid-\/>\mbox{\hyperlink{structmi__memid__s_a6e612a9fceb896ba741a1b171bf81a4d}{initially\_zero}})\ \{}
\DoxyCodeLine{00359\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_aa1d3beee9d492fc175ac2584e50fd8ea}{\_mi\_memzero\_aligned}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00360\ \ \ \ \ memid-\/>\mbox{\hyperlink{structmi__memid__s_a6e612a9fceb896ba741a1b171bf81a4d}{initially\_zero}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00361\ \ \ \}}
\DoxyCodeLine{00362\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00363\ \}}
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00365\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00366\ \textcolor{comment}{\ \ OS\ aligned\ allocation\ with\ an\ offset.\ This\ is\ used}}
\DoxyCodeLine{00367\ \textcolor{comment}{\ \ for\ large\ alignments\ >\ MI\_BLOCK\_ALIGNMENT\_MAX.\ We\ use\ a\ large\ mimalloc}}
\DoxyCodeLine{00368\ \textcolor{comment}{\ \ page\ where\ the\ object\ can\ be\ aligned\ at\ an\ offset\ from\ the\ start\ of\ the\ segment.}}
\DoxyCodeLine{00369\ \textcolor{comment}{\ \ As\ we\ may\ need\ to\ overallocate,\ we\ need\ to\ free\ such\ pointers\ using\ \`{}mi\_free\_aligned`}}
\DoxyCodeLine{00370\ \textcolor{comment}{\ \ to\ use\ the\ actual\ start\ of\ the\ memory\ region.}}
\DoxyCodeLine{00371\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00373\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{os_8c_afeb64a9df305d444e693494ba5ca3d1d}{\_mi\_os\_alloc\_aligned\_at\_offset}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{size\_t}\ alignment,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae1b92ae085ddef4b1cdca7d749339fb0}{offset}},\ \textcolor{keywordtype}{bool}\ commit,\ \textcolor{keywordtype}{bool}\ allow\_large,\ \mbox{\hyperlink{types_8h_a56a2cb6eed720cdd1fa4b9907c44d7d0}{mi\_memid\_t}}*\ memid)\ \{}
\DoxyCodeLine{00374\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_af04c7a87bc1c69ef3e763a580f47a418}{mi\_assert}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae1b92ae085ddef4b1cdca7d749339fb0}{offset}}\ <=\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00375\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_af04c7a87bc1c69ef3e763a580f47a418}{mi\_assert}}((alignment\ \%\ \mbox{\hyperlink{os_8c_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}())\ ==\ 0);}
\DoxyCodeLine{00376\ \ \ *memid\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a130091d8591ac82c587dace216eca4d2}{\_mi\_memid\_none}}();}
\DoxyCodeLine{00377\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae1b92ae085ddef4b1cdca7d749339fb0}{offset}}\ ==\ 0)\ \{}
\DoxyCodeLine{00378\ \ \ \ \ \textcolor{comment}{//\ regular\ aligned\ allocation}}
\DoxyCodeLine{00379\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{os_8c_afce7c8636aa29141d98edb847cd6f859}{\_mi\_os\_alloc\_aligned}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ alignment,\ commit,\ allow\_large,\ memid);}
\DoxyCodeLine{00380\ \ \ \}}
\DoxyCodeLine{00381\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00382\ \ \ \ \ \textcolor{comment}{//\ overallocate\ to\ align\ at\ an\ offset}}
\DoxyCodeLine{00383\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ extra\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a7f35944d44d8a16365072023dd19e0da}{\_mi\_align\_up}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae1b92ae085ddef4b1cdca7d749339fb0}{offset}},\ alignment)\ -\/\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae1b92ae085ddef4b1cdca7d749339fb0}{offset}};}
\DoxyCodeLine{00384\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ oversize\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ +\ extra;}
\DoxyCodeLine{00385\ \ \ \ \ \textcolor{keywordtype}{void}*\ \textcolor{keyword}{const}\ start\ =\ \mbox{\hyperlink{os_8c_afce7c8636aa29141d98edb847cd6f859}{\_mi\_os\_alloc\_aligned}}(oversize,\ alignment,\ commit,\ allow\_large,\ memid);}
\DoxyCodeLine{00386\ \ \ \ \ \textcolor{keywordflow}{if}\ (start\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00387\ }
\DoxyCodeLine{00388\ \ \ \ \ \textcolor{keywordtype}{void}*\ \textcolor{keyword}{const}\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ (\mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*)start\ +\ extra;}
\DoxyCodeLine{00389\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_af04c7a87bc1c69ef3e763a580f47a418}{mi\_assert}}(\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ad446ae4d82cbdbd78dfbe46fa2330555}{\_mi\_is\_aligned}}((\mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*)\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ +\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae1b92ae085ddef4b1cdca7d749339fb0}{offset}},\ alignment));}
\DoxyCodeLine{00390\ \ \ \ \ \textcolor{comment}{//\ decommit\ the\ overallocation\ at\ the\ start}}
\DoxyCodeLine{00391\ \ \ \ \ \textcolor{keywordflow}{if}\ (commit\ \&\&\ extra\ >\ \mbox{\hyperlink{os_8c_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}())\ \{}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \mbox{\hyperlink{os_8c_a7de6e2fbee441aa290e54d81f512e662}{\_mi\_os\_decommit}}(start,\ extra);}
\DoxyCodeLine{00393\ \ \ \ \ \}}
\DoxyCodeLine{00394\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00395\ \ \ \}}
\DoxyCodeLine{00396\ \}}
\DoxyCodeLine{00397\ }
\DoxyCodeLine{00398\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00399\ \textcolor{comment}{\ \ OS\ memory\ API:\ reset,\ commit,\ decommit,\ protect,\ unprotect.}}
\DoxyCodeLine{00400\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00401\ }
\DoxyCodeLine{00402\ \textcolor{comment}{//\ OS\ page\ align\ within\ a\ given\ area,\ either\ conservative\ (pages\ inside\ the\ area\ only),}}
\DoxyCodeLine{00403\ \textcolor{comment}{//\ or\ not\ (straddling\ pages\ outside\ the\ area\ is\ possible)}}
\DoxyCodeLine{00404\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{os_8c_a80d3a0cbc0a50873b1abc39077a6d77e}{mi\_os\_page\_align\_areax}}(\textcolor{keywordtype}{bool}\ conservative,\ \textcolor{keywordtype}{void}*\ addr,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{size\_t}*\ newsize)\ \{}
\DoxyCodeLine{00405\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_af04c7a87bc1c69ef3e763a580f47a418}{mi\_assert}}(addr\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ \&\&\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ >\ 0);}
\DoxyCodeLine{00406\ \ \ \textcolor{keywordflow}{if}\ (newsize\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ *newsize\ =\ 0;}
\DoxyCodeLine{00407\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ ==\ 0\ ||\ addr\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00408\ }
\DoxyCodeLine{00409\ \ \ \textcolor{comment}{//\ page\ align\ conservatively\ within\ the\ range,\ or\ liberally\ straddling\ pages\ outside\ the\ range}}
\DoxyCodeLine{00410\ \ \ \textcolor{keywordtype}{void}*\ start\ =\ (conservative\ ?\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac76001cb6de6586632eb7fb6c1795a77}{\_mi\_align\_up\_ptr}}(addr,\ \mbox{\hyperlink{os_8c_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}())}
\DoxyCodeLine{00411\ \ \ \ \ :\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_adc7ba2f338065541b3513efcf2252795}{mi\_align\_down\_ptr}}(addr,\ \mbox{\hyperlink{os_8c_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}()));}
\DoxyCodeLine{00412\ \ \ \textcolor{keywordtype}{void}*\ end\ =\ (conservative\ ?\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_adc7ba2f338065541b3513efcf2252795}{mi\_align\_down\_ptr}}((\mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*)addr\ +\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \mbox{\hyperlink{os_8c_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}())}
\DoxyCodeLine{00413\ \ \ \ \ :\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac76001cb6de6586632eb7fb6c1795a77}{\_mi\_align\_up\_ptr}}((\mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*)addr\ +\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \mbox{\hyperlink{os_8c_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}()));}
\DoxyCodeLine{00414\ \ \ ptrdiff\_t\ diff\ =\ (\mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*)end\ -\/\ (\mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*)start;}
\DoxyCodeLine{00415\ \ \ \textcolor{keywordflow}{if}\ (diff\ <=\ 0)\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00416\ }
\DoxyCodeLine{00417\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}((conservative\ \&\&\ (\textcolor{keywordtype}{size\_t})diff\ <=\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}})\ ||\ (!conservative\ \&\&\ (\textcolor{keywordtype}{size\_t})diff\ >=\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}));}
\DoxyCodeLine{00418\ \ \ \textcolor{keywordflow}{if}\ (newsize\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ *newsize\ =\ (size\_t)diff;}
\DoxyCodeLine{00419\ \ \ \textcolor{keywordflow}{return}\ start;}
\DoxyCodeLine{00420\ \}}
\DoxyCodeLine{00421\ }
\DoxyCodeLine{00422\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{os_8c_a9a44802f30241b8fda6033df8f0253b1}{mi\_os\_page\_align\_area\_conservative}}(\textcolor{keywordtype}{void}*\ addr,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{size\_t}*\ newsize)\ \{}
\DoxyCodeLine{00423\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{os_8c_a80d3a0cbc0a50873b1abc39077a6d77e}{mi\_os\_page\_align\_areax}}(\textcolor{keyword}{true},\ addr,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ newsize);}
\DoxyCodeLine{00424\ \}}
\DoxyCodeLine{00425\ }
\DoxyCodeLine{00426\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_a3d62d4f2f8c54d1251323be446068194}{\_mi\_os\_commit\_ex}}(\textcolor{keywordtype}{void}*\ addr,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{bool}*\ is\_zero,\ \textcolor{keywordtype}{size\_t}\ stat\_size)\ \{}
\DoxyCodeLine{00427\ \ \ \textcolor{keywordflow}{if}\ (is\_zero\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{\ *is\_zero\ =\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00428\ \ \ \mbox{\hyperlink{types_8h_abb91d78f53dbe13e695cf4f5ce9377e6}{mi\_os\_stat\_increase}}(committed,\ stat\_size);\ \ \textcolor{comment}{//\ use\ size\ for\ precise\ commit\ vs.\ decommit}}
\DoxyCodeLine{00429\ \ \ \mbox{\hyperlink{types_8h_a133367c739f1796271a6f0d75dc02b53}{mi\_os\_stat\_counter\_increase}}(commit\_calls,\ 1);}
\DoxyCodeLine{00430\ }
\DoxyCodeLine{00431\ \ \ \textcolor{comment}{//\ page\ align\ range}}
\DoxyCodeLine{00432\ \ \ \textcolor{keywordtype}{size\_t}\ csize;}
\DoxyCodeLine{00433\ \ \ \textcolor{keywordtype}{void}*\ start\ =\ \mbox{\hyperlink{os_8c_a80d3a0cbc0a50873b1abc39077a6d77e}{mi\_os\_page\_align\_areax}}(\textcolor{keyword}{false}\ \textcolor{comment}{/*\ conservative?\ */},\ addr,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \&csize);}
\DoxyCodeLine{00434\ \ \ \textcolor{keywordflow}{if}\ (csize\ ==\ 0)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00435\ }
\DoxyCodeLine{00436\ \ \ \textcolor{comment}{//\ commit}}
\DoxyCodeLine{00437\ \ \ \textcolor{keywordtype}{bool}\ os\_is\_zero\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00438\ \ \ \textcolor{keywordtype}{int}\ err\ =\ \mbox{\hyperlink{prim_8h_a723c63d8d2b51281ab1ef2bf7e7395d0}{\_mi\_prim\_commit}}(start,\ csize,\ \&os\_is\_zero);}
\DoxyCodeLine{00439\ \ \ \textcolor{keywordflow}{if}\ (err\ !=\ 0)\ \{}
\DoxyCodeLine{00440\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac253cac2ca24fb63be7f4937ac620dc4}{\_mi\_warning\_message}}(\textcolor{stringliteral}{"{}cannot\ commit\ OS\ memory\ (error:\ \%d\ (0x\%x),\ address:\ \%p,\ size:\ 0x\%zx\ bytes)\(\backslash\)n"{}},\ err,\ err,\ start,\ csize);}
\DoxyCodeLine{00441\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00442\ \ \ \}}
\DoxyCodeLine{00443\ \ \ \textcolor{keywordflow}{if}\ (os\_is\_zero\ \&\&\ is\_zero\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{}
\DoxyCodeLine{00444\ \ \ \ \ *is\_zero\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00445\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ab812423812d2dd7af864b7e112055d8e}{mi\_assert\_expensive}}(\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a8391ae55dd6885bd38593f740fd349a4}{mi\_mem\_is\_zero}}(start,\ csize));}
\DoxyCodeLine{00446\ \ \ \}}
\DoxyCodeLine{00447\ \ \ \textcolor{comment}{//\ note:\ the\ following\ seems\ required\ for\ asan\ (otherwise\ \`{}mimalloc-\/test-\/stress`\ fails)}}
\DoxyCodeLine{00448\ \textcolor{preprocessor}{\ \ \#ifdef\ MI\_TRACK\_ASAN}}
\DoxyCodeLine{00449\ \ \ \textcolor{keywordflow}{if}\ (os\_is\_zero)\ \{\ \mbox{\hyperlink{track_8h_a6e155ed879c074c60f2d2656be414b04}{mi\_track\_mem\_defined}}(start,csize);\ \}}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{\ \mbox{\hyperlink{track_8h_a435f7a1a6faaef4b17d9d9359a9a8cff}{mi\_track\_mem\_undefined}}(start,csize);\ \}}
\DoxyCodeLine{00451\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00452\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00453\ \}}
\DoxyCodeLine{00454\ }
\DoxyCodeLine{00455\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_acef931ae1be3c3ddb6ee125a8267a84e}{\_mi\_os\_commit}}(\textcolor{keywordtype}{void}*\ addr,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{bool}*\ is\_zero)\ \{}
\DoxyCodeLine{00456\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{os_8c_a3d62d4f2f8c54d1251323be446068194}{\_mi\_os\_commit\_ex}}(addr,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ is\_zero,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00457\ \}}
\DoxyCodeLine{00458\ }
\DoxyCodeLine{00459\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_a2d79aea45b3da5b2bbd607f65f596398}{mi\_os\_decommit\_ex}}(\textcolor{keywordtype}{void}*\ addr,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{bool}*\ needs\_recommit,\ \textcolor{keywordtype}{size\_t}\ stat\_size)\ \{}
\DoxyCodeLine{00460\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(needs\_recommit!=\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00461\ \ \ \mbox{\hyperlink{types_8h_a2174684a7162240290003823f436c87e}{mi\_os\_stat\_decrease}}(committed,\ stat\_size);}
\DoxyCodeLine{00462\ }
\DoxyCodeLine{00463\ \ \ \textcolor{comment}{//\ page\ align}}
\DoxyCodeLine{00464\ \ \ \textcolor{keywordtype}{size\_t}\ csize;}
\DoxyCodeLine{00465\ \ \ \textcolor{keywordtype}{void}*\ start\ =\ \mbox{\hyperlink{os_8c_a9a44802f30241b8fda6033df8f0253b1}{mi\_os\_page\_align\_area\_conservative}}(addr,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \&csize);}
\DoxyCodeLine{00466\ \ \ \textcolor{keywordflow}{if}\ (csize\ ==\ 0)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00467\ }
\DoxyCodeLine{00468\ \ \ \textcolor{comment}{//\ decommit}}
\DoxyCodeLine{00469\ \ \ *needs\_recommit\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00470\ \ \ \textcolor{keywordtype}{int}\ err\ =\ \mbox{\hyperlink{prim_8h_a2acc81743909f52f06f690457ea3dfcb}{\_mi\_prim\_decommit}}(start,csize,needs\_recommit);}
\DoxyCodeLine{00471\ \ \ \textcolor{keywordflow}{if}\ (err\ !=\ 0)\ \{}
\DoxyCodeLine{00472\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac253cac2ca24fb63be7f4937ac620dc4}{\_mi\_warning\_message}}(\textcolor{stringliteral}{"{}cannot\ decommit\ OS\ memory\ (error:\ \%d\ (0x\%x),\ address:\ \%p,\ size:\ 0x\%zx\ bytes)\(\backslash\)n"{}},\ err,\ err,\ start,\ csize);}
\DoxyCodeLine{00473\ \ \ \}}
\DoxyCodeLine{00474\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(err\ ==\ 0);}
\DoxyCodeLine{00475\ \ \ \textcolor{keywordflow}{return}\ (err\ ==\ 0);}
\DoxyCodeLine{00476\ \}}
\DoxyCodeLine{00477\ }
\DoxyCodeLine{00478\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_a7de6e2fbee441aa290e54d81f512e662}{\_mi\_os\_decommit}}(\textcolor{keywordtype}{void}*\ addr,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}})\ \{}
\DoxyCodeLine{00479\ \ \ \textcolor{keywordtype}{bool}\ needs\_recommit;}
\DoxyCodeLine{00480\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{os_8c_a2d79aea45b3da5b2bbd607f65f596398}{mi\_os\_decommit\_ex}}(addr,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \&needs\_recommit,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00481\ \}}
\DoxyCodeLine{00482\ }
\DoxyCodeLine{00483\ }
\DoxyCodeLine{00484\ \textcolor{comment}{//\ Signal\ to\ the\ OS\ that\ the\ address\ range\ is\ no\ longer\ in\ use}}
\DoxyCodeLine{00485\ \textcolor{comment}{//\ but\ may\ be\ used\ later\ again.\ This\ will\ release\ physical\ memory}}
\DoxyCodeLine{00486\ \textcolor{comment}{//\ pages\ and\ reduce\ swapping\ while\ keeping\ the\ memory\ committed.}}
\DoxyCodeLine{00487\ \textcolor{comment}{//\ We\ page\ align\ to\ a\ conservative\ area\ inside\ the\ range\ to\ reset.}}
\DoxyCodeLine{00488\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_a2f3722df585eb4921cdf4fbd0b2f4e88}{\_mi\_os\_reset}}(\textcolor{keywordtype}{void}*\ addr,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}})\ \{}
\DoxyCodeLine{00489\ \ \ \textcolor{comment}{//\ page\ align\ conservatively\ within\ the\ range}}
\DoxyCodeLine{00490\ \ \ \textcolor{keywordtype}{size\_t}\ csize;}
\DoxyCodeLine{00491\ \ \ \textcolor{keywordtype}{void}*\ start\ =\ \mbox{\hyperlink{os_8c_a9a44802f30241b8fda6033df8f0253b1}{mi\_os\_page\_align\_area\_conservative}}(addr,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \&csize);}
\DoxyCodeLine{00492\ \ \ \textcolor{keywordflow}{if}\ (csize\ ==\ 0)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \ \textcolor{comment}{//\ ||\ \_mi\_os\_is\_huge\_reserved(addr)}}
\DoxyCodeLine{00493\ \ \ \mbox{\hyperlink{types_8h_abb91d78f53dbe13e695cf4f5ce9377e6}{mi\_os\_stat\_increase}}(reset,\ csize);}
\DoxyCodeLine{00494\ \ \ \mbox{\hyperlink{types_8h_a133367c739f1796271a6f0d75dc02b53}{mi\_os\_stat\_counter\_increase}}(reset\_calls,\ 1);}
\DoxyCodeLine{00495\ }
\DoxyCodeLine{00496\ \textcolor{preprocessor}{\ \ \#if\ (MI\_DEBUG>1)\ \&\&\ !MI\_SECURE\ \&\&\ !MI\_TRACK\_ENABLED\ }\textcolor{comment}{//\ \&\&\ !MI\_TSAN}}
\DoxyCodeLine{00497\ \ \ memset(start,\ 0,\ csize);\ \textcolor{comment}{//\ pretend\ it\ is\ eagerly\ reset}}
\DoxyCodeLine{00498\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00499\ }
\DoxyCodeLine{00500\ \ \ \textcolor{keywordtype}{int}\ err\ =\ \mbox{\hyperlink{prim_8h_abe3f45858d8d0aa2a4a7deb0c8a49c10}{\_mi\_prim\_reset}}(start,\ csize);}
\DoxyCodeLine{00501\ \ \ \textcolor{keywordflow}{if}\ (err\ !=\ 0)\ \{}
\DoxyCodeLine{00502\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac253cac2ca24fb63be7f4937ac620dc4}{\_mi\_warning\_message}}(\textcolor{stringliteral}{"{}cannot\ reset\ OS\ memory\ (error:\ \%d\ (0x\%x),\ address:\ \%p,\ size:\ 0x\%zx\ bytes)\(\backslash\)n"{}},\ err,\ err,\ start,\ csize);}
\DoxyCodeLine{00503\ \ \ \}}
\DoxyCodeLine{00504\ \ \ \textcolor{keywordflow}{return}\ (err\ ==\ 0);}
\DoxyCodeLine{00505\ \}}
\DoxyCodeLine{00506\ }
\DoxyCodeLine{00507\ }
\DoxyCodeLine{00508\ \textcolor{comment}{//\ either\ resets\ or\ decommits\ memory,\ returns\ true\ if\ the\ memory\ needs}}
\DoxyCodeLine{00509\ \textcolor{comment}{//\ to\ be\ recommitted\ if\ it\ is\ to\ be\ re-\/used\ later\ on.}}
\DoxyCodeLine{00510\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_a48e6c4d87fab4850f199797238f92370}{\_mi\_os\_purge\_ex}}(\textcolor{keywordtype}{void}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{bool}\ allow\_reset,\ \textcolor{keywordtype}{size\_t}\ stat\_size)}
\DoxyCodeLine{00511\ \{}
\DoxyCodeLine{00512\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{group__options_ga7e8af195cc81d3fa64ccf2662caa565a}{mi\_option\_get}}(\mbox{\hyperlink{group__options_ggacf0af9f50d2fca76b4e158d611bc930badd351e615acd8563529c20a347be7290}{mi\_option\_purge\_delay}})\ <\ 0)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \ \textcolor{comment}{//\ is\ purging\ allowed?}}
\DoxyCodeLine{00513\ \ \ \mbox{\hyperlink{types_8h_a133367c739f1796271a6f0d75dc02b53}{mi\_os\_stat\_counter\_increase}}(purge\_calls,\ 1);}
\DoxyCodeLine{00514\ \ \ \mbox{\hyperlink{types_8h_abb91d78f53dbe13e695cf4f5ce9377e6}{mi\_os\_stat\_increase}}(purged,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00515\ }
\DoxyCodeLine{00516\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{group__options_ga459ad98f18b3fc9275474807fe0ca188}{mi\_option\_is\_enabled}}(\mbox{\hyperlink{group__options_ggacf0af9f50d2fca76b4e158d611bc930ba9d15c5e3d2115eef681c17e4dd5ab9a4}{mi\_option\_purge\_decommits}})\ \&\&\ \ \ \textcolor{comment}{//\ should\ decommit?}}
\DoxyCodeLine{00517\ \ \ \ \ !\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_abe10bbb84d6109e4b0a5fcc92cb0cb0e}{\_mi\_preloading}}())\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ don't\ decommit\ during\ preloading\ (unsafe)}}
\DoxyCodeLine{00518\ \ \ \{}
\DoxyCodeLine{00519\ \ \ \ \ \textcolor{keywordtype}{bool}\ needs\_recommit\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00520\ \ \ \ \ \mbox{\hyperlink{os_8c_a2d79aea45b3da5b2bbd607f65f596398}{mi\_os\_decommit\_ex}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \&needs\_recommit,\ stat\_size);}
\DoxyCodeLine{00521\ \ \ \ \ \textcolor{keywordflow}{return}\ needs\_recommit;}
\DoxyCodeLine{00522\ \ \ \}}
\DoxyCodeLine{00523\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00524\ \ \ \ \ \textcolor{keywordflow}{if}\ (allow\_reset)\ \{\ \ \textcolor{comment}{//\ this\ can\ sometimes\ be\ not\ allowed\ if\ the\ range\ is\ not\ fully\ committed\ (on\ Windows,\ we\ cannot\ reset\ uncommitted\ memory)}}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \mbox{\hyperlink{os_8c_a2f3722df585eb4921cdf4fbd0b2f4e88}{\_mi\_os\_reset}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00526\ \ \ \ \ \}}
\DoxyCodeLine{00527\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \ \textcolor{comment}{//\ needs\ no\ recommit}}
\DoxyCodeLine{00528\ \ \ \}}
\DoxyCodeLine{00529\ \}}
\DoxyCodeLine{00530\ }
\DoxyCodeLine{00531\ \textcolor{comment}{//\ either\ resets\ or\ decommits\ memory,\ returns\ true\ if\ the\ memory\ needs}}
\DoxyCodeLine{00532\ \textcolor{comment}{//\ to\ be\ recommitted\ if\ it\ is\ to\ be\ re-\/used\ later\ on.}}
\DoxyCodeLine{00533\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_acb2e5f026747c3f74ecd89b014a0f0b6}{\_mi\_os\_purge}}(\textcolor{keywordtype}{void}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}})\ \{}
\DoxyCodeLine{00534\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{os_8c_a48e6c4d87fab4850f199797238f92370}{\_mi\_os\_purge\_ex}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keyword}{true},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00535\ \}}
\DoxyCodeLine{00536\ }
\DoxyCodeLine{00537\ }
\DoxyCodeLine{00538\ \textcolor{comment}{//\ Protect\ a\ region\ in\ memory\ to\ be\ not\ accessible.}}
\DoxyCodeLine{00539\ \textcolor{keyword}{static}\ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_a968d2c0d8a24ac7aec2a72c031524d5f}{mi\_os\_protectx}}(\textcolor{keywordtype}{void}*\ addr,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{bool}\ protect)\ \{}
\DoxyCodeLine{00540\ \ \ \textcolor{comment}{//\ page\ align\ conservatively\ within\ the\ range}}
\DoxyCodeLine{00541\ \ \ \textcolor{keywordtype}{size\_t}\ csize\ =\ 0;}
\DoxyCodeLine{00542\ \ \ \textcolor{keywordtype}{void}*\ start\ =\ \mbox{\hyperlink{os_8c_a9a44802f30241b8fda6033df8f0253b1}{mi\_os\_page\_align\_area\_conservative}}(addr,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \&csize);}
\DoxyCodeLine{00543\ \ \ \textcolor{keywordflow}{if}\ (csize\ ==\ 0)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00544\ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00545\ \textcolor{comment}{\ \ if\ (\_mi\_os\_is\_huge\_reserved(addr))\ \{}}
\DoxyCodeLine{00546\ \textcolor{comment}{\ \ \ \ \ \ \_mi\_warning\_message("{}cannot\ mprotect\ memory\ allocated\ in\ huge\ OS\ pages\(\backslash\)n"{});}}
\DoxyCodeLine{00547\ \textcolor{comment}{\ \ \}}}
\DoxyCodeLine{00548\ \textcolor{comment}{\ \ */}}
\DoxyCodeLine{00549\ \ \ \textcolor{keywordtype}{int}\ err\ =\ \mbox{\hyperlink{prim_8h_a26d6836cdf59dd0534f1a348fb5bfeb0}{\_mi\_prim\_protect}}(start,csize,protect);}
\DoxyCodeLine{00550\ \ \ \textcolor{keywordflow}{if}\ (err\ !=\ 0)\ \{}
\DoxyCodeLine{00551\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac253cac2ca24fb63be7f4937ac620dc4}{\_mi\_warning\_message}}(\textcolor{stringliteral}{"{}cannot\ \%s\ OS\ memory\ (error:\ \%d\ (0x\%x),\ address:\ \%p,\ size:\ 0x\%zx\ bytes)\(\backslash\)n"{}},\ (protect\ ?\ \textcolor{stringliteral}{"{}protect"{}}\ :\ \textcolor{stringliteral}{"{}unprotect"{}}),\ err,\ err,\ start,\ csize);}
\DoxyCodeLine{00552\ \ \ \}}
\DoxyCodeLine{00553\ \ \ \textcolor{keywordflow}{return}\ (err\ ==\ 0);}
\DoxyCodeLine{00554\ \}}
\DoxyCodeLine{00555\ }
\DoxyCodeLine{00556\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_a8f4b61245f6887f27dc994b5ca924e5e}{\_mi\_os\_protect}}(\textcolor{keywordtype}{void}*\ addr,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}})\ \{}
\DoxyCodeLine{00557\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{os_8c_a968d2c0d8a24ac7aec2a72c031524d5f}{mi\_os\_protectx}}(addr,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00558\ \}}
\DoxyCodeLine{00559\ }
\DoxyCodeLine{00560\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{os_8c_a51771404981128b8f401f9d17bcae520}{\_mi\_os\_unprotect}}(\textcolor{keywordtype}{void}*\ addr,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}})\ \{}
\DoxyCodeLine{00561\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{os_8c_a968d2c0d8a24ac7aec2a72c031524d5f}{mi\_os\_protectx}}(addr,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00562\ \}}
\DoxyCodeLine{00563\ }
\DoxyCodeLine{00564\ }
\DoxyCodeLine{00565\ }
\DoxyCodeLine{00566\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00567\ \textcolor{comment}{Support\ for\ allocating\ huge\ OS\ pages\ (1Gib)\ that\ are\ reserved\ up-\/front}}
\DoxyCodeLine{00568\ \textcolor{comment}{and\ possibly\ associated\ with\ a\ specific\ NUMA\ node.\ (use\ \`{}numa\_node>=0`)}}
\DoxyCodeLine{00569\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00570\ \textcolor{preprocessor}{\#define\ MI\_HUGE\_OS\_PAGE\_SIZE\ \ (MI\_GiB)}}
\DoxyCodeLine{00571\ }
\DoxyCodeLine{00572\ }
\DoxyCodeLine{00573\ \textcolor{preprocessor}{\#if\ (MI\_INTPTR\_SIZE\ >=\ 8)}}
\DoxyCodeLine{00574\ \textcolor{comment}{//\ To\ ensure\ proper\ alignment,\ use\ our\ own\ area\ for\ huge\ OS\ pages}}
\DoxyCodeLine{00575\ \textcolor{keyword}{static}\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a20085eb7375f2a033238c2456b23e8b8}{mi\_decl\_cache\_align}}\ \mbox{\hyperlink{os_8c_a3698b02ffe69aa3e139d9c3452d66615}{\_Atomic}}(uintptr\_t)\ \ mi\_huge\_start;\ \textcolor{comment}{//\ =\ 0}}
\DoxyCodeLine{00576\ }
\DoxyCodeLine{00577\ \textcolor{comment}{//\ Claim\ an\ aligned\ address\ range\ for\ huge\ pages}}
\DoxyCodeLine{00578\ \textcolor{keyword}{static}\ \mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*\ \mbox{\hyperlink{os_8c_a25e422698313283d7afbf39582361fea}{mi\_os\_claim\_huge\_pages}}(\textcolor{keywordtype}{size\_t}\ pages,\ \textcolor{keywordtype}{size\_t}*\ total\_size)\ \{}
\DoxyCodeLine{00579\ \ \ \textcolor{keywordflow}{if}\ (total\_size\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ *total\_size\ =\ 0;}
\DoxyCodeLine{00580\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ =\ pages\ *\ \mbox{\hyperlink{os_8c_aeac5603d536ed0b2a300c6691c6f12ff}{MI\_HUGE\_OS\_PAGE\_SIZE}};}
\DoxyCodeLine{00581\ }
\DoxyCodeLine{00582\ \ \ uintptr\_t\ start\ =\ 0;}
\DoxyCodeLine{00583\ \ \ uintptr\_t\ end\ =\ 0;}
\DoxyCodeLine{00584\ \ \ uintptr\_t\ huge\_start\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2atomic_8h_ae060cc1d6be8764ac2170e1a0d91dd5e}{mi\_atomic\_load\_relaxed}}(\&mi\_huge\_start);}
\DoxyCodeLine{00585\ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00586\ \ \ \ \ start\ =\ huge\_start;}
\DoxyCodeLine{00587\ \ \ \ \ \textcolor{keywordflow}{if}\ (start\ ==\ 0)\ \{}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \textcolor{comment}{//\ Initialize\ the\ start\ address\ after\ the\ 32TiB\ area}}
\DoxyCodeLine{00589\ \ \ \ \ \ \ start\ =\ ((uintptr\_t)8\ <<\ 40);\ \ \ \textcolor{comment}{//\ 8TiB\ virtual\ start\ address}}
\DoxyCodeLine{00590\ \textcolor{preprocessor}{\ \ \ \ \#if\ (MI\_SECURE>0\ ||\ MI\_DEBUG==0)\ \ }\textcolor{comment}{//\ security:\ randomize\ start\ of\ huge\ pages\ unless\ in\ debug\ mode}}
\DoxyCodeLine{00591\ \ \ \ \ \ \ uintptr\_t\ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a68ddb5f2c595ea9d4e8d450342b4713c}{\_mi\_heap\_random\_next}}(\mbox{\hyperlink{prim_8h_a986e62564728229db3ccecbd6e97fd98}{mi\_prim\_get\_default\_heap}}());}
\DoxyCodeLine{00592\ \ \ \ \ \ \ start\ =\ start\ +\ ((uintptr\_t)\mbox{\hyperlink{os_8c_aeac5603d536ed0b2a300c6691c6f12ff}{MI\_HUGE\_OS\_PAGE\_SIZE}}\ *\ ((\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}>>17)\ \&\ 0x0FFF));\ \ \textcolor{comment}{//\ (randomly\ 12bits)*1GiB\ ==\ between\ 0\ to\ 4TiB}}
\DoxyCodeLine{00593\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00594\ \ \ \ \ \}}
\DoxyCodeLine{00595\ \ \ \ \ end\ =\ start\ +\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}};}
\DoxyCodeLine{00596\ \ \ \}\ \textcolor{keywordflow}{while}\ (!\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2atomic_8h_a04332d02087d9b0e7ad9197c34358177}{mi\_atomic\_cas\_weak\_acq\_rel}}(\&mi\_huge\_start,\ \&huge\_start,\ end));}
\DoxyCodeLine{00597\ }
\DoxyCodeLine{00598\ \ \ \textcolor{keywordflow}{if}\ (total\_size\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ *total\_size\ =\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}};}
\DoxyCodeLine{00599\ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*)start;}
\DoxyCodeLine{00600\ \}}
\DoxyCodeLine{00601\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00602\ \textcolor{keyword}{static}\ \mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*\ \mbox{\hyperlink{os_8c_a25e422698313283d7afbf39582361fea}{mi\_os\_claim\_huge\_pages}}(\textcolor{keywordtype}{size\_t}\ pages,\ \textcolor{keywordtype}{size\_t}*\ total\_size)\ \{}
\DoxyCodeLine{00603\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ab7467946e27cd6bb4af911805cc5db26}{MI\_UNUSED}}(pages);}
\DoxyCodeLine{00604\ \ \ \textcolor{keywordflow}{if}\ (total\_size\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ *total\_size\ =\ 0;}
\DoxyCodeLine{00605\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00606\ \}}
\DoxyCodeLine{00607\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00608\ }
\DoxyCodeLine{00609\ \textcolor{comment}{//\ Allocate\ MI\_ARENA\_SLICE\_ALIGN\ aligned\ huge\ pages}}
\DoxyCodeLine{00610\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{os_8c_ad542ce903bbc2d32f69722f298471af5}{\_mi\_os\_alloc\_huge\_os\_pages}}(\textcolor{keywordtype}{size\_t}\ pages,\ \textcolor{keywordtype}{int}\ numa\_node,\ \mbox{\hyperlink{types_8h_af67e75b6480efa6e87b2a3a118e58031}{mi\_msecs\_t}}\ max\_msecs,\ \textcolor{keywordtype}{size\_t}*\ pages\_reserved,\ \textcolor{keywordtype}{size\_t}*\ psize,\ \mbox{\hyperlink{types_8h_a56a2cb6eed720cdd1fa4b9907c44d7d0}{mi\_memid\_t}}*\ memid)\ \{}
\DoxyCodeLine{00611\ \ \ *memid\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a130091d8591ac82c587dace216eca4d2}{\_mi\_memid\_none}}();}
\DoxyCodeLine{00612\ \ \ \textcolor{keywordflow}{if}\ (psize\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ *psize\ =\ 0;}
\DoxyCodeLine{00613\ \ \ \textcolor{keywordflow}{if}\ (pages\_reserved\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ *pages\_reserved\ =\ 0;}
\DoxyCodeLine{00614\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ =\ 0;}
\DoxyCodeLine{00615\ \ \ \mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*\ start\ =\ \mbox{\hyperlink{os_8c_a25e422698313283d7afbf39582361fea}{mi\_os\_claim\_huge\_pages}}(pages,\ \&\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00616\ \ \ \textcolor{keywordflow}{if}\ (start\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};\ \textcolor{comment}{//\ or\ 32-\/bit\ systems}}
\DoxyCodeLine{00617\ }
\DoxyCodeLine{00618\ \ \ \textcolor{comment}{//\ Allocate\ one\ page\ at\ the\ time\ but\ try\ to\ place\ them\ contiguously}}
\DoxyCodeLine{00619\ \ \ \textcolor{comment}{//\ We\ allocate\ one\ page\ at\ the\ time\ to\ be\ able\ to\ abort\ if\ it\ takes\ too\ long}}
\DoxyCodeLine{00620\ \ \ \textcolor{comment}{//\ or\ to\ at\ least\ allocate\ as\ many\ as\ available\ on\ the\ system.}}
\DoxyCodeLine{00621\ \ \ \mbox{\hyperlink{types_8h_af67e75b6480efa6e87b2a3a118e58031}{mi\_msecs\_t}}\ start\_t\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a3b13638e7aabe56a25fcdf09deefee42}{\_mi\_clock\_start}}();}
\DoxyCodeLine{00622\ \ \ \textcolor{keywordtype}{size\_t}\ page\ =\ 0;}
\DoxyCodeLine{00623\ \ \ \textcolor{keywordtype}{bool}\ all\_zero\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00624\ \ \ \textcolor{keywordflow}{while}\ (page\ <\ pages)\ \{}
\DoxyCodeLine{00625\ \ \ \ \ \textcolor{comment}{//\ allocate\ a\ page}}
\DoxyCodeLine{00626\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_zero\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00627\ \ \ \ \ \textcolor{keywordtype}{void}*\ addr\ =\ start\ +\ (page\ *\ \mbox{\hyperlink{os_8c_aeac5603d536ed0b2a300c6691c6f12ff}{MI\_HUGE\_OS\_PAGE\_SIZE}});}
\DoxyCodeLine{00628\ \ \ \ \ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00629\ \ \ \ \ \textcolor{keywordtype}{int}\ err\ =\ \mbox{\hyperlink{prim_8h_a13fac5d38adde1e627f69b7ad9123d5e}{\_mi\_prim\_alloc\_huge\_os\_pages}}(addr,\ \mbox{\hyperlink{os_8c_aeac5603d536ed0b2a300c6691c6f12ff}{MI\_HUGE\_OS\_PAGE\_SIZE}},\ numa\_node,\ \&is\_zero,\ \&\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}});}
\DoxyCodeLine{00630\ \ \ \ \ \textcolor{keywordflow}{if}\ (!is\_zero)\ \{\ all\_zero\ =\ \textcolor{keyword}{false};\ \ \}}
\DoxyCodeLine{00631\ \ \ \ \ \textcolor{keywordflow}{if}\ (err\ !=\ 0)\ \{}
\DoxyCodeLine{00632\ \ \ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac253cac2ca24fb63be7f4937ac620dc4}{\_mi\_warning\_message}}(\textcolor{stringliteral}{"{}unable\ to\ allocate\ huge\ OS\ page\ (error:\ \%d\ (0x\%x),\ address:\ \%p,\ size:\ \%zx\ bytes)\(\backslash\)n"{}},\ err,\ err,\ addr,\ \mbox{\hyperlink{os_8c_aeac5603d536ed0b2a300c6691c6f12ff}{MI\_HUGE\_OS\_PAGE\_SIZE}});}
\DoxyCodeLine{00633\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00634\ \ \ \ \ \}}
\DoxyCodeLine{00635\ }
\DoxyCodeLine{00636\ \ \ \ \ \textcolor{comment}{//\ Did\ we\ succeed\ at\ a\ contiguous\ address?}}
\DoxyCodeLine{00637\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ !=\ addr)\ \{}
\DoxyCodeLine{00638\ \ \ \ \ \ \ \textcolor{comment}{//\ no\ success,\ issue\ a\ warning\ and\ break}}
\DoxyCodeLine{00639\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{}
\DoxyCodeLine{00640\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac253cac2ca24fb63be7f4937ac620dc4}{\_mi\_warning\_message}}(\textcolor{stringliteral}{"{}could\ not\ allocate\ contiguous\ huge\ OS\ page\ \%zu\ at\ \%p\(\backslash\)n"{}},\ page,\ addr);}
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{os_8c_a52be3cf3bbf0a792b75a16e6d8c54a6e}{mi\_os\_prim\_free}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{os_8c_aeac5603d536ed0b2a300c6691c6f12ff}{MI\_HUGE\_OS\_PAGE\_SIZE}},\ \mbox{\hyperlink{os_8c_aeac5603d536ed0b2a300c6691c6f12ff}{MI\_HUGE\_OS\_PAGE\_SIZE}});}
\DoxyCodeLine{00642\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00643\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00644\ \ \ \ \ \}}
\DoxyCodeLine{00645\ }
\DoxyCodeLine{00646\ \ \ \ \ \textcolor{comment}{//\ success,\ record\ it}}
\DoxyCodeLine{00647\ \ \ \ \ page++;\ \ \textcolor{comment}{//\ increase\ before\ timeout\ check\ (see\ issue\ \#711)}}
\DoxyCodeLine{00648\ \ \ \ \ \mbox{\hyperlink{types_8h_abb91d78f53dbe13e695cf4f5ce9377e6}{mi\_os\_stat\_increase}}(committed,\ \mbox{\hyperlink{os_8c_aeac5603d536ed0b2a300c6691c6f12ff}{MI\_HUGE\_OS\_PAGE\_SIZE}});}
\DoxyCodeLine{00649\ \ \ \ \ \mbox{\hyperlink{types_8h_abb91d78f53dbe13e695cf4f5ce9377e6}{mi\_os\_stat\_increase}}(reserved,\ \mbox{\hyperlink{os_8c_aeac5603d536ed0b2a300c6691c6f12ff}{MI\_HUGE\_OS\_PAGE\_SIZE}});}
\DoxyCodeLine{00650\ }
\DoxyCodeLine{00651\ \ \ \ \ \textcolor{comment}{//\ check\ for\ timeout}}
\DoxyCodeLine{00652\ \ \ \ \ \textcolor{keywordflow}{if}\ (max\_msecs\ >\ 0)\ \{}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \mbox{\hyperlink{types_8h_af67e75b6480efa6e87b2a3a118e58031}{mi\_msecs\_t}}\ elapsed\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a67d113bcb7d0664568ce17e263ddcdae}{\_mi\_clock\_end}}(start\_t);}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (page\ >=\ 1)\ \{}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{types_8h_af67e75b6480efa6e87b2a3a118e58031}{mi\_msecs\_t}}\ estimate\ =\ ((elapsed\ /\ (page+1))\ *\ pages);}
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (estimate\ >\ 2*max\_msecs)\ \{\ \textcolor{comment}{//\ seems\ like\ we\ are\ going\ to\ timeout,\ break}}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \ \ elapsed\ =\ max\_msecs\ +\ 1;}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (elapsed\ >\ max\_msecs)\ \{}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac253cac2ca24fb63be7f4937ac620dc4}{\_mi\_warning\_message}}(\textcolor{stringliteral}{"{}huge\ OS\ page\ allocation\ timed\ out\ (after\ allocating\ \%zu\ page(s))\(\backslash\)n"{}},\ page);}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00664\ \ \ \ \ \}}
\DoxyCodeLine{00665\ \ \ \}}
\DoxyCodeLine{00666\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(page*\mbox{\hyperlink{os_8c_aeac5603d536ed0b2a300c6691c6f12ff}{MI\_HUGE\_OS\_PAGE\_SIZE}}\ <=\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00667\ \ \ \textcolor{keywordflow}{if}\ (pages\_reserved\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{\ *pages\_reserved\ =\ page;\ \}}
\DoxyCodeLine{00668\ \ \ \textcolor{keywordflow}{if}\ (psize\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{\ *psize\ =\ page\ *\ \mbox{\hyperlink{os_8c_aeac5603d536ed0b2a300c6691c6f12ff}{MI\_HUGE\_OS\_PAGE\_SIZE}};\ \}}
\DoxyCodeLine{00669\ \ \ \textcolor{keywordflow}{if}\ (page\ !=\ 0)\ \{}
\DoxyCodeLine{00670\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_af04c7a87bc1c69ef3e763a580f47a418}{mi\_assert}}(start\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00671\ \ \ \ \ *memid\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a09383ef9229fc236d59aadf1acc9268c}{\_mi\_memid\_create\_os}}(start,\ *psize,\ \textcolor{keyword}{true}\ \textcolor{comment}{/*\ is\ committed\ */},\ all\_zero,\ \textcolor{keyword}{true}\ \textcolor{comment}{/*\ is\_large\ */});}
\DoxyCodeLine{00672\ \ \ \ \ memid-\/>\mbox{\hyperlink{structmi__memid__s_a6f3573b226287cf7875980e33029e0d9}{memkind}}\ =\ \mbox{\hyperlink{types_8h_ac6c1ef0bff44bbd4da79dae9914f40faa1827ef3f939d8e7285a61adabf6d824e}{MI\_MEM\_OS\_HUGE}};}
\DoxyCodeLine{00673\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_af04c7a87bc1c69ef3e763a580f47a418}{mi\_assert}}(memid-\/>\mbox{\hyperlink{structmi__memid__s_ac91743de3a74ed0c22ff2cbeddd265eb}{is\_pinned}});}
\DoxyCodeLine{00674\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ MI\_TRACK\_ASAN}}
\DoxyCodeLine{00675\ \ \ \ \ \textcolor{keywordflow}{if}\ (all\_zero)\ \{\ \mbox{\hyperlink{track_8h_a6e155ed879c074c60f2d2656be414b04}{mi\_track\_mem\_defined}}(start,\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});\ \}}
\DoxyCodeLine{00676\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00677\ \ \ \}}
\DoxyCodeLine{00678\ \ \ \textcolor{keywordflow}{return}\ (page\ ==\ 0\ ?\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ :\ start);}
\DoxyCodeLine{00679\ \}}
\DoxyCodeLine{00680\ }
\DoxyCodeLine{00681\ \textcolor{comment}{//\ free\ every\ huge\ page\ in\ a\ range\ individually\ (as\ we\ allocated\ per\ page)}}
\DoxyCodeLine{00682\ \textcolor{comment}{//\ note:\ needed\ with\ VirtualAlloc\ but\ could\ potentially\ be\ done\ in\ one\ go\ on\ mmap'd\ systems.}}
\DoxyCodeLine{00683\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{os_8c_aa0a58080699361b65ccbf1a97f99edee}{mi\_os\_free\_huge\_os\_pages}}(\textcolor{keywordtype}{void}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}})\ \{}
\DoxyCodeLine{00684\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}==\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ ||\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}==0)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00685\ \ \ \mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*\ base\ =\ (\mbox{\hyperlink{eabase_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*)\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00686\ \ \ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ >=\ \mbox{\hyperlink{os_8c_aeac5603d536ed0b2a300c6691c6f12ff}{MI\_HUGE\_OS\_PAGE\_SIZE}})\ \{}
\DoxyCodeLine{00687\ \ \ \ \ \mbox{\hyperlink{os_8c_a52be3cf3bbf0a792b75a16e6d8c54a6e}{mi\_os\_prim\_free}}(base,\ \mbox{\hyperlink{os_8c_aeac5603d536ed0b2a300c6691c6f12ff}{MI\_HUGE\_OS\_PAGE\_SIZE}},\ \mbox{\hyperlink{os_8c_aeac5603d536ed0b2a300c6691c6f12ff}{MI\_HUGE\_OS\_PAGE\_SIZE}});}
\DoxyCodeLine{00688\ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ -\/=\ \mbox{\hyperlink{os_8c_aeac5603d536ed0b2a300c6691c6f12ff}{MI\_HUGE\_OS\_PAGE\_SIZE}};}
\DoxyCodeLine{00689\ \ \ \ \ base\ +=\ \mbox{\hyperlink{os_8c_aeac5603d536ed0b2a300c6691c6f12ff}{MI\_HUGE\_OS\_PAGE\_SIZE}};}
\DoxyCodeLine{00690\ \ \ \}}
\DoxyCodeLine{00691\ \}}
\DoxyCodeLine{00692\ }
\DoxyCodeLine{00693\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00694\ \textcolor{comment}{Support\ NUMA\ aware\ allocation}}
\DoxyCodeLine{00695\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00696\ }
\DoxyCodeLine{00697\ \textcolor{keyword}{static}\ \mbox{\hyperlink{os_8c_a3698b02ffe69aa3e139d9c3452d66615}{\_Atomic}}(\textcolor{keywordtype}{int})\ \ \_mi\_numa\_node\_count;\ \textcolor{comment}{//\ =\ 0\ \ \ //\ cache\ the\ node\ count}}
\DoxyCodeLine{00698\ }
\DoxyCodeLine{00699\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a7104e74ef3302f691be1cca5120f1349}{\_mi\_os\_numa\_node\_count}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{00700\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a619bc20e8198de3bd3f3d7fc34de66b2}{count}}\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2atomic_8h_afd6e6e0fbd3a1be232115b5617ca2f65}{mi\_atomic\_load\_acquire}}(\&\_mi\_numa\_node\_count);}
\DoxyCodeLine{00701\ \ \ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{bits_8h_a13767b1803a4c31c40d896e9c08bc8a3}{mi\_unlikely}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a619bc20e8198de3bd3f3d7fc34de66b2}{count}}\ <=\ 0)\ \{}
\DoxyCodeLine{00702\ \ \ \ \ \textcolor{keywordtype}{long}\ ncount\ =\ \mbox{\hyperlink{group__options_ga7e8af195cc81d3fa64ccf2662caa565a}{mi\_option\_get}}(\mbox{\hyperlink{group__options_ggacf0af9f50d2fca76b4e158d611bc930ba0ac33a18f6b659fcfaf44efb0bab1b74}{mi\_option\_use\_numa\_nodes}});\ \textcolor{comment}{//\ given\ explicitly?}}
\DoxyCodeLine{00703\ \ \ \ \ \textcolor{keywordflow}{if}\ (ncount\ >\ 0\ \&\&\ ncount\ <\ INT\_MAX)\ \{}
\DoxyCodeLine{00704\ \ \ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a619bc20e8198de3bd3f3d7fc34de66b2}{count}}\ =\ (\mbox{\hyperlink{sugar_8h_ae88a82478e3818cade3f598c25437904}{int}})ncount;}
\DoxyCodeLine{00705\ \ \ \ \ \}}
\DoxyCodeLine{00706\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00707\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ n\ =\ \mbox{\hyperlink{prim_8h_a82cc1dc0b2e542453248153dfbff0ef1}{\_mi\_prim\_numa\_node\_count}}();\ \textcolor{comment}{//\ or\ detect\ dynamically}}
\DoxyCodeLine{00708\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ ==\ 0\ ||\ n\ >\ INT\_MAX)\ \{\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a619bc20e8198de3bd3f3d7fc34de66b2}{count}}\ =\ 1;\ \}}
\DoxyCodeLine{00709\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a619bc20e8198de3bd3f3d7fc34de66b2}{count}}\ =\ (\mbox{\hyperlink{sugar_8h_ae88a82478e3818cade3f598c25437904}{int}})n;\ \}}
\DoxyCodeLine{00710\ \ \ \ \ \}}
\DoxyCodeLine{00711\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2atomic_8h_a1ee5baaa0004b9c737a03d48d77a0194}{mi\_atomic\_store\_release}}(\&\_mi\_numa\_node\_count,\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a619bc20e8198de3bd3f3d7fc34de66b2}{count}});\ \textcolor{comment}{//\ save\ it}}
\DoxyCodeLine{00712\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ab9890036c5acb25eacd13bec3a6b0c68}{\_mi\_verbose\_message}}(\textcolor{stringliteral}{"{}using\ \%zd\ numa\ regions\(\backslash\)n"{}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a619bc20e8198de3bd3f3d7fc34de66b2}{count}});}
\DoxyCodeLine{00713\ \ \ \}}
\DoxyCodeLine{00714\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a619bc20e8198de3bd3f3d7fc34de66b2}{count}};}
\DoxyCodeLine{00715\ \}}
\DoxyCodeLine{00716\ }
\DoxyCodeLine{00717\ }
\DoxyCodeLine{00718\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{os_8c_a951856b6c151081805f4216eb8de02df}{mi\_os\_numa\_node\_get}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{00719\ \ \ \textcolor{keywordtype}{int}\ numa\_count\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a7104e74ef3302f691be1cca5120f1349}{\_mi\_os\_numa\_node\_count}}();}
\DoxyCodeLine{00720\ \ \ \textcolor{keywordflow}{if}\ (numa\_count<=1)\ \textcolor{keywordflow}{return}\ 0;\ \textcolor{comment}{//\ optimize\ on\ single\ numa\ node\ systems:\ always\ node\ 0}}
\DoxyCodeLine{00721\ \ \ \textcolor{comment}{//\ never\ more\ than\ the\ node\ count\ and\ >=\ 0}}
\DoxyCodeLine{00722\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ n\ =\ \mbox{\hyperlink{prim_8h_a933262d22f5d4ebb70599b45c3104236}{\_mi\_prim\_numa\_node}}();}
\DoxyCodeLine{00723\ \ \ \textcolor{keywordtype}{int}\ numa\_node\ =\ (n\ <\ INT\_MAX\ ?\ (\mbox{\hyperlink{sugar_8h_ae88a82478e3818cade3f598c25437904}{int}})n\ :\ 0);}
\DoxyCodeLine{00724\ \ \ \textcolor{keywordflow}{if}\ (numa\_node\ >=\ numa\_count)\ \{\ numa\_node\ =\ numa\_node\ \%\ numa\_count;\ \}}
\DoxyCodeLine{00725\ \ \ \textcolor{keywordflow}{return}\ numa\_node;}
\DoxyCodeLine{00726\ \}}
\DoxyCodeLine{00727\ }
\DoxyCodeLine{00728\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{os_8c_a87bf5dee86fa26ec1cfb519539d1c7aa}{\_mi\_os\_numa\_node}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{00729\ \ \ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{bits_8h_a7b29eabf31d4ddb28a16267045384e03}{mi\_likely}}(\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2atomic_8h_ae060cc1d6be8764ac2170e1a0d91dd5e}{mi\_atomic\_load\_relaxed}}(\&\_mi\_numa\_node\_count)\ ==\ 1)\ \{\ \textcolor{keywordflow}{return}\ 0;\ \}}
\DoxyCodeLine{00730\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{os_8c_a951856b6c151081805f4216eb8de02df}{mi\_os\_numa\_node\_get}}();}
\DoxyCodeLine{00731\ \}}
\DoxyCodeLine{00732\ }
\DoxyCodeLine{00733\ }
\DoxyCodeLine{00734\ }
\DoxyCodeLine{00735\ }
\DoxyCodeLine{00736\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00737\ \textcolor{comment}{\ \ Public\ API}}
\DoxyCodeLine{00738\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00739\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{00740\ \mbox{\hyperlink{mimalloc_8h_a19c83f9861b67bdf3a3229436d4dc366}{mi\_decl\_export}}\ \textcolor{keywordtype}{void}*\ mi\_os\_alloc(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{bool}\ commit,\ \textcolor{keywordtype}{size\_t}*\ full\_size)\ \{}
\DoxyCodeLine{00741\ \ \ \textcolor{keywordflow}{return}\ mi\_os\_alloc\_aligned(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \mbox{\hyperlink{os_8c_a3ef37df92388e9cdcfd240feccf24bf0}{mi\_os\_mem\_config}}.alloc\_granularity,\ commit,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ full\_size);}
\DoxyCodeLine{00742\ \}}
\DoxyCodeLine{00743\ }
\DoxyCodeLine{00744\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}*\ mi\_os\_alloc\_aligned\_ex(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{size\_t}\ alignment,\ \textcolor{keywordtype}{bool}\ commit,\ \textcolor{keywordtype}{bool}\ allow\_large,\ \textcolor{keywordtype}{bool}*\ is\_committed,\ \textcolor{keywordtype}{bool}*\ is\_pinned,\ \textcolor{keywordtype}{void}**\ base,\ \textcolor{keywordtype}{size\_t}*\ full\_size)\ \{}
\DoxyCodeLine{00745\ \ \ \mbox{\hyperlink{types_8h_a56a2cb6eed720cdd1fa4b9907c44d7d0}{mi\_memid\_t}}\ memid\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a130091d8591ac82c587dace216eca4d2}{\_mi\_memid\_none}}();}
\DoxyCodeLine{00746\ \ \ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{os_8c_afce7c8636aa29141d98edb847cd6f859}{\_mi\_os\_alloc\_aligned}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ alignment,\ commit,\ allow\_large,\ \&memid);}
\DoxyCodeLine{00747\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00748\ \ \ \textcolor{keywordflow}{if}\ (is\_committed\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{\ *is\_committed\ =\ memid.\mbox{\hyperlink{structmi__memid__s_a8cc880466e89310084c27af2c0dc3e3e}{initially\_committed}};\ \ \}}
\DoxyCodeLine{00749\ \ \ \textcolor{keywordflow}{if}\ (is\_pinned\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{\ *is\_pinned\ =\ memid.\mbox{\hyperlink{structmi__memid__s_ac91743de3a74ed0c22ff2cbeddd265eb}{is\_pinned}};\ \ \}}
\DoxyCodeLine{00750\ \ \ \textcolor{keywordflow}{if}\ (base\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{\ *\mbox{\hyperlink{namespacegenerate__swizzles_a33071bf5d2c3f89ecf3c8ffc45fbac64}{base}}\ =\ memid.\mbox{\hyperlink{structmi__memid__s_af2f5c4ffe67f2c97781d5c15346de01a}{mem}}.\mbox{\hyperlink{structmi__memid__s_a0d25b7fe835ace64c0d7a48985226b2a}{os}}.\mbox{\hyperlink{structmi__memid__os__info_a7800011c14b5cc138b934345cf4d0dab}{base}};\ \ \}}
\DoxyCodeLine{00751\ \ \ \textcolor{keywordflow}{if}\ (full\_size\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{\ *full\_size\ =\ memid.\mbox{\hyperlink{structmi__memid__s_af2f5c4ffe67f2c97781d5c15346de01a}{mem}}.\mbox{\hyperlink{structmi__memid__s_a0d25b7fe835ace64c0d7a48985226b2a}{os}}.\mbox{\hyperlink{structmi__memid__os__info_aa2d631565042826758012d35e55ce465}{size}};\ \ \}}
\DoxyCodeLine{00752\ \ \ \textcolor{keywordflow}{if}\ (!memid.\mbox{\hyperlink{structmi__memid__s_a6e612a9fceb896ba741a1b171bf81a4d}{initially\_zero}}\ \&\&\ memid.\mbox{\hyperlink{structmi__memid__s_a8cc880466e89310084c27af2c0dc3e3e}{initially\_committed}})\ \{}
\DoxyCodeLine{00753\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_aa1d3beee9d492fc175ac2584e50fd8ea}{\_mi\_memzero\_aligned}}(memid.\mbox{\hyperlink{structmi__memid__s_af2f5c4ffe67f2c97781d5c15346de01a}{mem}}.\mbox{\hyperlink{structmi__memid__s_a0d25b7fe835ace64c0d7a48985226b2a}{os}}.\mbox{\hyperlink{structmi__memid__os__info_a7800011c14b5cc138b934345cf4d0dab}{base}},\ memid.\mbox{\hyperlink{structmi__memid__s_af2f5c4ffe67f2c97781d5c15346de01a}{mem}}.\mbox{\hyperlink{structmi__memid__s_a0d25b7fe835ace64c0d7a48985226b2a}{os}}.\mbox{\hyperlink{structmi__memid__os__info_aa2d631565042826758012d35e55ce465}{size}});}
\DoxyCodeLine{00754\ \ \ \}}
\DoxyCodeLine{00755\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00756\ \}}
\DoxyCodeLine{00757\ }
\DoxyCodeLine{00758\ \mbox{\hyperlink{mimalloc_8h_a19c83f9861b67bdf3a3229436d4dc366}{mi\_decl\_export}}\ \textcolor{keywordtype}{void}*\ mi\_os\_alloc\_aligned(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{size\_t}\ alignment,\ \textcolor{keywordtype}{bool}\ commit,\ \textcolor{keywordtype}{void}**\ base,\ \textcolor{keywordtype}{size\_t}*\ full\_size)\ \{}
\DoxyCodeLine{00759\ \ \ \textcolor{keywordflow}{return}\ mi\_os\_alloc\_aligned\_ex(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ alignment,\ commit,\ \textcolor{keyword}{false},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ base,\ full\_size);}
\DoxyCodeLine{00760\ \}}
\DoxyCodeLine{00761\ }
\DoxyCodeLine{00762\ \mbox{\hyperlink{mimalloc_8h_a19c83f9861b67bdf3a3229436d4dc366}{mi\_decl\_export}}\ \textcolor{keywordtype}{void}*\ mi\_os\_alloc\_aligned\_allow\_large(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keywordtype}{size\_t}\ alignment,\ \textcolor{keywordtype}{bool}\ commit,\ \textcolor{keywordtype}{bool}*\ is\_committed,\ \textcolor{keywordtype}{bool}*\ is\_pinned,\ \textcolor{keywordtype}{void}**\ base,\ \textcolor{keywordtype}{size\_t}*\ full\_size)\ \{}
\DoxyCodeLine{00763\ \ \ \textcolor{keywordflow}{return}\ mi\_os\_alloc\_aligned\_ex(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ alignment,\ commit,\ \textcolor{keyword}{true},\ is\_committed,\ is\_pinned,\ base,\ full\_size);}
\DoxyCodeLine{00764\ \}}
\DoxyCodeLine{00765\ }
\DoxyCodeLine{00766\ \mbox{\hyperlink{mimalloc_8h_a19c83f9861b67bdf3a3229436d4dc366}{mi\_decl\_export}}\ \textcolor{keywordtype}{void}\ \ mi\_os\_free(\textcolor{keywordtype}{void}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}})\ \{}
\DoxyCodeLine{00767\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}==\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ ||\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ ==\ 0)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00768\ \ \ \mbox{\hyperlink{types_8h_a56a2cb6eed720cdd1fa4b9907c44d7d0}{mi\_memid\_t}}\ memid\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a09383ef9229fc236d59aadf1acc9268c}{\_mi\_memid\_create\_os}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \textcolor{keyword}{true},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00769\ \ \ \mbox{\hyperlink{os_8c_aef12a26764ff4aae64a1df9116452428}{\_mi\_os\_free}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ memid);}
\DoxyCodeLine{00770\ \}}
\DoxyCodeLine{00771\ }
\DoxyCodeLine{00772\ \mbox{\hyperlink{mimalloc_8h_a19c83f9861b67bdf3a3229436d4dc366}{mi\_decl\_export}}\ \textcolor{keywordtype}{void}\ \ mi\_os\_commit(\textcolor{keywordtype}{void}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}})\ \{}
\DoxyCodeLine{00773\ \ \ \mbox{\hyperlink{os_8c_acef931ae1be3c3ddb6ee125a8267a84e}{\_mi\_os\_commit}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00774\ \}}
\DoxyCodeLine{00775\ }
\DoxyCodeLine{00776\ \mbox{\hyperlink{mimalloc_8h_a19c83f9861b67bdf3a3229436d4dc366}{mi\_decl\_export}}\ \textcolor{keywordtype}{void}\ \ mi\_os\_decommit(\textcolor{keywordtype}{void}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}})\ \{}
\DoxyCodeLine{00777\ \ \ \mbox{\hyperlink{os_8c_a7de6e2fbee441aa290e54d81f512e662}{\_mi\_os\_decommit}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00778\ \}}
\DoxyCodeLine{00779\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
