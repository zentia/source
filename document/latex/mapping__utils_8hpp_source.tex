\doxysection{mapping\+\_\+utils.\+hpp}
\hypertarget{mapping__utils_8hpp_source}{}\label{mapping__utils_8hpp_source}\index{external/taskflow/3rd-\/party/ff/mapping\_utils.hpp@{external/taskflow/3rd-\/party/ff/mapping\_utils.hpp}}
\mbox{\hyperlink{mapping__utils_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ -\/*-\/\ Mode:\ C++;\ tab-\/width:\ 4;\ c-\/basic-\/offset:\ 4;\ indent-\/tabs-\/mode:\ nil\ -\/*-\/\ */}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{comment}{/*\ ***************************************************************************}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ \ FastFlow\ is\ free\ software;\ you\ can\ redistribute\ it\ and/or\ modify\ it}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *\ \ under\ the\ terms\ of\ the\ GNU\ Lesser\ General\ Public\ License\ version\ 3\ as}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ \ published\ by\ the\ Free\ Software\ Foundation.}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ \ Starting\ from\ version\ 3.0.1\ FastFlow\ is\ dual\ licensed\ under\ the\ GNU\ LGPLv3}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ \ or\ MIT\ License\ (https://github.com/ParaGroup/WindFlow/blob/vers3.x/LICENSE.MIT)}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ *\ \ This\ program\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,\ but\ WITHOUT}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ *\ \ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of\ MERCHANTABILITY\ or}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ *\ \ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the\ GNU\ Lesser\ General\ Public}}
\DoxyCodeLine{00024\ \textcolor{comment}{\ *\ \ License\ for\ more\ details.}}
\DoxyCodeLine{00025\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00026\ \textcolor{comment}{\ *\ \ You\ should\ have\ received\ a\ copy\ of\ the\ GNU\ Lesser\ General\ Public\ License}}
\DoxyCodeLine{00027\ \textcolor{comment}{\ *\ \ along\ with\ this\ program;\ if\ not,\ write\ to\ the\ Free\ Software\ Foundation,}}
\DoxyCodeLine{00028\ \textcolor{comment}{\ *\ \ Inc.,\ 59\ Temple\ Place\ -\/\ Suite\ 330,\ Boston,\ MA\ 02111-\/1307,\ USA.}}
\DoxyCodeLine{00029\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00030\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00031\ \textcolor{comment}{\ ****************************************************************************}}
\DoxyCodeLine{00032\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{comment}{/*}}
\DoxyCodeLine{00035\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00036\ \textcolor{comment}{\ *\ Author:\ Marco\ Aldinucci,\ Massimo\ Torquati}}
\DoxyCodeLine{00037\ \textcolor{comment}{\ *\ Date:\ Oct\ 5,\ 2010:\ basic\ linux\ and\ apple}}
\DoxyCodeLine{00038\ \textcolor{comment}{\ *\ Date:\ Mar\ 27,\ 2011:\ some\ win\ platform\ support}}
\DoxyCodeLine{00039\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00040\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00041\ \ }
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#ifndef\ FF\_MAPPING\_UTILS\_HPP}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#define\ FF\_MAPPING\_UTILS\_HPP}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\#include\ <climits>}}
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\#include\ <set>}}
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#include\ <iosfwd>}}
\DoxyCodeLine{00049\ \textcolor{preprocessor}{\#include\ <errno.h>}}
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{config_8hpp}{ff/config.hpp}}>}}
\DoxyCodeLine{00051\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{utils_8hpp}{ff/utils.hpp}}>}}
\DoxyCodeLine{00052\ \textcolor{preprocessor}{\#if\ defined(\_\_linux\_\_)}}
\DoxyCodeLine{00053\ \textcolor{preprocessor}{\ \#include\ <sched.h>}}
\DoxyCodeLine{00054\ \textcolor{preprocessor}{\ \#include\ <sys/types.h>}}
\DoxyCodeLine{00055\ \textcolor{preprocessor}{\ \#include\ <sys/resource.h>}}
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\ \#include\ <asm/unistd.h>}}
\DoxyCodeLine{00057\ \textcolor{preprocessor}{\ \#include\ <stdio.h>}}
\DoxyCodeLine{00058\ \textcolor{preprocessor}{\ \#include\ <unistd.h>}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ ff\_gettid()\ \{\ \textcolor{keywordflow}{return}\ syscall(\_\_NR\_gettid);\}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \textcolor{preprocessor}{\#if\ defined(MAMMUT)}}
\DoxyCodeLine{00063\ \textcolor{preprocessor}{\#include\ <mammut/mammut.hpp>}}
\DoxyCodeLine{00064\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \textcolor{preprocessor}{\#elif\ defined(\_\_APPLE\_\_)}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \textcolor{preprocessor}{\ \#include\ <sys/types.h>}}
\DoxyCodeLine{00069\ \textcolor{preprocessor}{\ \#include\ <sys/sysctl.h>}}
\DoxyCodeLine{00070\ \textcolor{preprocessor}{\ \#include\ <sys/syscall.h>}}
\DoxyCodeLine{00071\ \textcolor{preprocessor}{\ \#include\ <mach/mach.h>}\ }
\DoxyCodeLine{00072\ \textcolor{preprocessor}{\ \#include\ <mach/mach\_init.h>}}
\DoxyCodeLine{00073\ \textcolor{preprocessor}{\ \#include\ <mach/thread\_policy.h>}\ }
\DoxyCodeLine{00074\ \ \textcolor{comment}{//\ If\ you\ don't\ include\ mach/mach.h,\ it\ doesn't\ work.}}
\DoxyCodeLine{00075\ \ \textcolor{comment}{//\ In\ theory\ mach/thread\_policy.h\ should\ be\ enough}}
\DoxyCodeLine{00076\ \textcolor{preprocessor}{\#elif\ defined(\_WIN32)}}
\DoxyCodeLine{00077\ \textcolor{preprocessor}{\ \#include\ <\mbox{\hyperlink{external_2taskflow_23rd-party_2ff_2platforms_2_platform_8h}{ff/platforms/platform.h}}>}}
\DoxyCodeLine{00078\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00079\ \textcolor{preprocessor}{\#if\ defined(\_\_APPLE\_\_)\ \&\&\ MAC\_OS\_X\_HAS\_AFFINITY}}
\DoxyCodeLine{00080\ \textcolor{preprocessor}{\#include<vector>}\ }
\DoxyCodeLine{00081\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00093\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{mapping__utils_8hpp_a9ad3de6d54a3007e35640df5381ef52b}{ff\_getThreadID}}()\ \{}
\DoxyCodeLine{00094\ \textcolor{preprocessor}{\#if\ (defined(\_\_GNUC\_\_)\ \&\&\ defined(\_\_linux))}}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordflow}{return}\ \ ff\_gettid();}
\DoxyCodeLine{00096\ \textcolor{preprocessor}{\#elif\ defined(\_\_APPLE\_\_)\ \&\&\ MAC\_OS\_X\_HAS\_AFFINITY}}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{comment}{//uint64\_t\ tid;}}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{comment}{//\ pthread\_getthreadid\_np(NULL,\ \&tid);\ //\ MA:\ for\ some\ reasons\ does\ nto\ works\ (it\ was\ working)}}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{comment}{//return\ (long)\ tid;\ //\ >\ 10.6\ only}}
\DoxyCodeLine{00100\ \textcolor{preprocessor}{\#elif\ defined(\_WIN32)}}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordflow}{return}\ GetCurrentThreadId();}
\DoxyCodeLine{00102\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00104\ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00114\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{mapping__utils_8hpp_ad62ea0ed16dfa3ca9241fabcede65b61}{ff\_getCpuFreq}}()\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ 0;}
\DoxyCodeLine{00116\ \textcolor{preprocessor}{\#if\ defined(\_\_linux\_\_)}}
\DoxyCodeLine{00117\ \ \ \ \ FILE\ \ \ \ \ \ \ *\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}};}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ mhz;}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ =\ popen(\textcolor{stringliteral}{"{}cat\ /proc/cpuinfo\ |grep\ MHz\ |head\ -\/1|sed\ 's/\string^.*:\ //'"{}},\ \textcolor{stringliteral}{"{}r"{}});}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keywordflow}{if}\ (fscanf(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{stringliteral}{"{}\%f"{}},\ \&mhz)\ ==\ EOF)\ \{pclose(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}};\}}
\DoxyCodeLine{00122\ \ \ \ \ \mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}}\ =\ (\textcolor{keywordtype}{unsigned}\ long)(mhz\ *\ 1000000);}
\DoxyCodeLine{00123\ \ \ \ \ pclose(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});}
\DoxyCodeLine{00124\ \textcolor{preprocessor}{\#elif\ defined(\_\_APPLE\_\_)\ \&\&\ MAC\_OS\_X\_HAS\_AFFINITY}}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}}\ =\ 8;}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordflow}{if}\ (sysctlbyname(\textcolor{stringliteral}{"{}hw.cpufrequency"{}},\ \&\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}},\ \&\mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ 0)\ !=\ 0)\ \{}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}sysctl"{}});}
\DoxyCodeLine{00128\ \ \ \ \ \}}
\DoxyCodeLine{00129\ \textcolor{preprocessor}{\#elif\ defined(\_WIN32)}}
\DoxyCodeLine{00130\ \textcolor{comment}{//SYSTEM\_POWER\_CAPABILITIES\ pow;}}
\DoxyCodeLine{00131\ \textcolor{comment}{//GetPwrCapabilities(\&pow);}}
\DoxyCodeLine{00132\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00133\ \textcolor{comment}{//\#warning\ "{}Cannot\ detect\ CPU\ frequency"{}}}
\DoxyCodeLine{00134\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{boing_8c_a87accd1af8e0aff4b818d891374f7cec}{t}});}
\DoxyCodeLine{00136\ \}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00147\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ \mbox{\hyperlink{mapping__utils_8hpp_a92c07f85b45e7d7730ddd6b45d2f3d75}{ff\_numCores}}()\ \{}
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{config_8hpp_a3ac70b97a335fc71b3e6050065a3e30d}{FF\_NUM\_CORES}}\ !=\ -\/1)\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{config_8hpp_a3ac70b97a335fc71b3e6050065a3e30d}{FF\_NUM\_CORES}};}
\DoxyCodeLine{00149\ \ \ \ \ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}=-\/1;}
\DoxyCodeLine{00150\ \textcolor{preprocessor}{\#if\ defined(\_\_linux\_\_)\ \ \ \ }}
\DoxyCodeLine{00151\ \textcolor{preprocessor}{\#if\ defined(MAMMUT)}}
\DoxyCodeLine{00152\ \ \ \ \ mammut::Mammut\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}};}
\DoxyCodeLine{00153\ \ \ \ \ std::vector<mammut::topology::Cpu*>\ cpus\ =\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}.getInstanceTopology()-\/>getCpus();}
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{keywordflow}{if}\ (cpus.size()>0\ \&\&\ cpus[0]-\/>getPhysicalCores().size()>0)\ \{}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ =\ 0;}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ cpus.size();\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++)\{}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<mammut::topology::PhysicalCore*>\ phyCores\ \ =\ cpus.at(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})-\/>getPhysicalCores();}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<mammut::topology::VirtualCore*>\ \ virtCores\ =\ phyCores.at(0)-\/>getVirtualCores();}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}+=\ phyCores.size()*virtCores.size();}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00161\ \ \ \ \ \}}
\DoxyCodeLine{00162\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00163\ \textcolor{preprocessor}{\#if\ defined(HAVE\_PTHREAD\_SETAFFINITY\_NP)}}
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{comment}{//\ trying\ to\ understand\ which\ are\ the\ cores\ on\ which\ the\ thread\ can\ be\ executed}}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{comment}{//\ so\ that\ we\ obtain\ only\ the\ cores\ that\ are\ currently\ online}}
\DoxyCodeLine{00166\ \ \ \ \ cpu\_set\_t\ cpuset;}
\DoxyCodeLine{00167\ \ \ \ \ CPU\_ZERO(\&cpuset);}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pthread\_getaffinity\_np(\mbox{\hyperlink{pthread__minport__windows_8h_a31ffbf449d7404f9bb088564190c6bce}{pthread\_self}}(),\ \textcolor{keyword}{sizeof}(cpu\_set\_t),\ \&cpuset)\ !=\ 0)\ }
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00171\ \textcolor{preprocessor}{\#if\ defined(CPU\_COUNT\_S)}}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ =\ CPU\_COUNT\_S(\textcolor{keyword}{sizeof}(cpu\_set\_t),\ \&cpuset);}
\DoxyCodeLine{00173\ \textcolor{preprocessor}{\#elif\ defined(CPU\_COUNT)}}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ =\ CPU\_COUNT(\&cpuset);}
\DoxyCodeLine{00175\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}=0;}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\textcolor{keyword}{sizeof}(cpu\_set\_t);++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (CPU\_ISSET(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ \&cpuset))\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}};}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00180\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}};}
\DoxyCodeLine{00182\ \ \ \ \ \}\ \textcolor{keywordflow}{while}(0);}
\DoxyCodeLine{00183\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ HAVE\_PTHREAD\_SETAFFINITY\_NP\ */}\textcolor{preprocessor}{\ \ \ }}
\DoxyCodeLine{00184\ \ \ \ \ FILE\ \ \ \ \ \ \ *\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}};\ \ \ \ }
\DoxyCodeLine{00185\ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ =\ popen(\textcolor{stringliteral}{"{}cat\ /proc/cpuinfo\ |grep\ processor\ |\ wc\ -\/l"{}},\ \textcolor{stringliteral}{"{}r"{}});}
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{keywordflow}{if}\ (fscanf(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{stringliteral}{"{}\%ld"{}},\ \&\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}})\ ==\ EOF)\ \{\ pclose(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}};\}}
\DoxyCodeLine{00187\ \ \ \ \ pclose(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});}
\DoxyCodeLine{00188\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ MAMMUT}}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \textcolor{preprocessor}{\#elif\ defined(\_\_APPLE\_\_)\ }\textcolor{comment}{//\ BSD}}
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{keywordtype}{int}\ nn;}
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}}\ =\ \textcolor{keyword}{sizeof}(nn);}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keywordflow}{if}\ (sysctlbyname(\textcolor{stringliteral}{"{}hw.logicalcpu"{}},\ \&nn,\ \&\mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ 0)\ ==\ -\/1)}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}sysctl"{}});}
\DoxyCodeLine{00195\ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ =\ nn;}
\DoxyCodeLine{00196\ \textcolor{preprocessor}{\#elif\ defined(\_WIN32)}}
\DoxyCodeLine{00197\ \ \ \ \ SYSTEM\_INFO\ sysinfo;}
\DoxyCodeLine{00198\ \ \ \ \ GetSystemInfo(\ \&sysinfo\ );}
\DoxyCodeLine{00199\ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ =\ sysinfo.dwNumberOfProcessors;}
\DoxyCodeLine{00200\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00201\ \textcolor{comment}{//\#warning\ "{}Cannot\ detect\ num.\ of\ cores."{}}}
\DoxyCodeLine{00202\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}};}
\DoxyCodeLine{00204\ \}}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ }
\DoxyCodeLine{00215\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ \mbox{\hyperlink{mapping__utils_8hpp_a48b4561032da858d15d02cb7179b0b53}{ff\_realNumCores}}()\ \{}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{config_8hpp_ae4f2dc350661eff7e9533451544c4046}{FF\_NUM\_REAL\_CORES}}\ !=\ -\/1)\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{config_8hpp_ae4f2dc350661eff7e9533451544c4046}{FF\_NUM\_REAL\_CORES}};}
\DoxyCodeLine{00217\ \ \ \ \ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}=-\/1;}
\DoxyCodeLine{00218\ \textcolor{preprocessor}{\#if\ defined(\_WIN32)}}
\DoxyCodeLine{00219\ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ =\ 2;\ \textcolor{comment}{//\ Not\ yet\ implemented}}
\DoxyCodeLine{00220\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00221\ \textcolor{preprocessor}{\#if\ defined(\_\_linux\_\_)}}
\DoxyCodeLine{00222\ \textcolor{preprocessor}{\#if\ defined(MAMMUT)}}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \ \ mammut::Mammut\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}};}
\DoxyCodeLine{00225\ \ \ \ \ std::vector<mammut::topology::Cpu*>\ cpus\ =\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}.getInstanceTopology()-\/>getCpus();}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keywordflow}{if}\ (cpus.size()>0\ \&\&\ cpus[0]-\/>getPhysicalCores().size()>0)\ \{}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ =\ 0;}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ cpus.size();\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++)\{}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<mammut::topology::PhysicalCore*>\ phyCores\ \ =\ cpus.at(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})-\/>getPhysicalCores();}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}+=\ phyCores.size();}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00232\ \ \ \ \ \}}
\DoxyCodeLine{00233\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}};\ \ \ \ }
\DoxyCodeLine{00234\ \textcolor{preprocessor}{\#else\ }\textcolor{comment}{//\ MAMMUT}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \textcolor{preprocessor}{\#if\ defined(HAVE\_PTHREAD\_SETAFFINITY\_NP)}}
\DoxyCodeLine{00237\ \ \ \ \ \textcolor{comment}{//\ trying\ to\ understand\ which\ are\ the\ cores\ on\ which\ the\ thread\ can\ be\ executed}}
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{comment}{//\ so\ that\ we\ obtain\ only\ the\ cores\ that\ are\ currently\ online}}
\DoxyCodeLine{00239\ \ \ \ \ cpu\_set\_t\ cpuset;}
\DoxyCodeLine{00240\ \ \ \ \ CPU\_ZERO(\&cpuset);}
\DoxyCodeLine{00241\ \ \ \ \ \textcolor{keywordtype}{int}\ cnt=-\/1;}
\DoxyCodeLine{00242\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pthread\_getaffinity\_np(\mbox{\hyperlink{pthread__minport__windows_8h_a31ffbf449d7404f9bb088564190c6bce}{pthread\_self}}(),\ \textcolor{keyword}{sizeof}(cpu\_set\_t),\ \&cpuset)\ !=\ 0)\ }
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00245\ \textcolor{preprocessor}{\#if\ defined(CPU\_COUNT\_S)}}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ cnt\ =\ CPU\_COUNT\_S(\textcolor{keyword}{sizeof}(cpu\_set\_t),\ \&cpuset);}
\DoxyCodeLine{00247\ \textcolor{preprocessor}{\#elif\ defined(CPU\_COUNT)}}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ cnt\ =\ CPU\_COUNT(\&cpuset);}
\DoxyCodeLine{00249\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ std::set<int>\ \mbox{\hyperlink{ittnotify__static_8h_aa0c5e6692c4ba3a25e31cb65dc5ee3ef}{S}};\ \ \ \ }
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<CHAR\_BIT*\textcolor{keyword}{sizeof}(cpu\_set\_t);++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (CPU\_ISSET(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\ \&cpuset))\ \{}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ str=\textcolor{stringliteral}{"{}cat\ /sys/devices/system/cpu/cpu"{}}+std::to\_string(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})+\textcolor{stringliteral}{"{}/topology/thread\_siblings\_list"{}};}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ buf[64];}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FILE\ \ \ \ \ \ \ *\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ =\ popen(str.c\_str(),\ \textcolor{stringliteral}{"{}r"{}}))!=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (fscanf(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{stringliteral}{"{}\%s"{}},\ buf)\ ==\ EOF)\ \{\ }
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}fscanf"{}});}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pclose(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{\ perror(\textcolor{stringliteral}{"{}popen"{}});\ \textcolor{keywordflow}{return}\ -\/1;\ \}}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\ bufstr(buf);}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ pos\ =\ bufstr.find\_first\_of(\textcolor{charliteral}{'-\/'});}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ first\ =\ std::stoi(bufstr.substr(0,pos));}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{second___n_o_n_e_8f_ae9f971a8b343bd2fcb85c3b16da97f10}{second}}\ =\ std::stoi(bufstr.substr(pos+1));}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ found\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}=first;\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}<=\mbox{\hyperlink{second___n_o_n_e_8f_ae9f971a8b343bd2fcb85c3b16da97f10}{second}};\ ++\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ittnotify__static_8h_aa0c5e6692c4ba3a25e31cb65dc5ee3ef}{S}}.find(\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})\ !=\ \mbox{\hyperlink{ittnotify__static_8h_aa0c5e6692c4ba3a25e31cb65dc5ee3ef}{S}}.end())\ \{}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ found\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!found)\ \mbox{\hyperlink{ittnotify__static_8h_aa0c5e6692c4ba3a25e31cb65dc5ee3ef}{S}}.insert(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (-\/-\/cnt==0)\ \{}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}=0;}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::for\_each(\mbox{\hyperlink{ittnotify__static_8h_aa0c5e6692c4ba3a25e31cb65dc5ee3ef}{S}}.begin(),\ \mbox{\hyperlink{ittnotify__static_8h_aa0c5e6692c4ba3a25e31cb65dc5ee3ef}{S}}.end(),\ [\&\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}](\textcolor{keywordtype}{int}\ \textcolor{keyword}{const}\&)\ \{\ ++n;\});}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}};}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}=0;}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ std::for\_each(\mbox{\hyperlink{ittnotify__static_8h_aa0c5e6692c4ba3a25e31cb65dc5ee3ef}{S}}.begin(),\ \mbox{\hyperlink{ittnotify__static_8h_aa0c5e6692c4ba3a25e31cb65dc5ee3ef}{S}}.end(),\ [\&\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}](\textcolor{keywordtype}{int}\ \textcolor{keyword}{const}\&)\ \{\ ++n;\});}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}};}
\DoxyCodeLine{00284\ \ \ \ \ \}\ \textcolor{keywordflow}{while}(0);}
\DoxyCodeLine{00285\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ HAVE\_PTHREAD\_SETAFFINITY\_NP}}
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{keywordtype}{char}\ inspect[]=\textcolor{stringliteral}{"{}cat\ /proc/cpuinfo|egrep\ 'core\ id|physical\ id'|tr\ -\/d\ '\(\backslash\)n'|sed\ 's/physical/\(\backslash\)\(\backslash\)nphysical/g'|grep\ -\/v\ \string^\$|sort|uniq|wc\ -\/l"{}};}
\DoxyCodeLine{00287\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ Linux}}
\DoxyCodeLine{00288\ \textcolor{preprocessor}{\#elif\ defined(\_\_APPLE\_\_)}}
\DoxyCodeLine{00289\ \ \ \ \ \textcolor{keywordtype}{char}\ inspect[]\ =\ \textcolor{stringliteral}{"{}sysctl\ hw.physicalcpu\ |\ awk\ '\{print\ \$2\}'"{}};}
\DoxyCodeLine{00290\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{keywordtype}{char}\ inspect[]=\textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00292\ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}=1;}
\DoxyCodeLine{00293\ \textcolor{preprocessor}{\#pragma\ message\ ("{}ff\_realNumCores\ not\ supported\ on\ this\ platform"{})}}
\DoxyCodeLine{00294\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00295\ \ \ \ \ \textcolor{keywordflow}{if}\ (strlen(inspect))\ \{}
\DoxyCodeLine{00296\ \ \ \ \ \ \ FILE\ *\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}};}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ =\ popen(inspect,\ \textcolor{stringliteral}{"{}r"{}});}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\ \{}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (fscanf(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{stringliteral}{"{}\%ld"{}},\ \&\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}})\ ==\ EOF)\ \{}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}fscanf"{}});}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ pclose(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}popen"{}});}
\DoxyCodeLine{00305\ \ \ \ \ \}}
\DoxyCodeLine{00306\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_WIN32}}
\DoxyCodeLine{00307\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}};}
\DoxyCodeLine{00308\ \}}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00317\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ \mbox{\hyperlink{mapping__utils_8hpp_a21963081ae577016cbc22119795ec588}{ff\_numSockets}}()\ \{}
\DoxyCodeLine{00318\ \ \ \ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}=-\/1;}
\DoxyCodeLine{00319\ \textcolor{preprocessor}{\#if\ defined(\_WIN32)}}
\DoxyCodeLine{00320\ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ =\ 1;}
\DoxyCodeLine{00321\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00322\ \textcolor{preprocessor}{\#if\ defined(\_\_linux\_\_)}}
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{keywordtype}{char}\ inspect[]=\textcolor{stringliteral}{"{}cat\ /proc/cpuinfo|grep\ 'physical\ id'|sort|uniq|wc\ -\/l"{}};}
\DoxyCodeLine{00324\ \textcolor{preprocessor}{\#if\ defined(MAMMUT)}}
\DoxyCodeLine{00325\ \ \ \ \ mammut::Mammut\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}};}
\DoxyCodeLine{00326\ \ \ \ \ std::vector<mammut::topology::Cpu*>\ cpus\ =\ \mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}.getInstanceTopology()-\/>getCpus();}
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{keywordflow}{if}\ (cpus.size()>0)\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}\ =\ cpus.size();}
\DoxyCodeLine{00328\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}};\ \ \ \ }
\DoxyCodeLine{00329\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ MAMMUT}}
\DoxyCodeLine{00330\ \textcolor{preprocessor}{\#elif\ defined\ (\_\_APPLE\_\_)}}
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{keywordtype}{char}\ inspect[]=\textcolor{stringliteral}{"{}sysctl\ hw.packages\ |\ awk\ '\{print\ \$2\}'"{}};}
\DoxyCodeLine{00332\ \textcolor{preprocessor}{\#else\ }}
\DoxyCodeLine{00333\ \ \ \ \ \textcolor{keywordtype}{char}\ inspect[]=\textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00334\ \ \ \ \ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}=1;}
\DoxyCodeLine{00335\ \textcolor{preprocessor}{\#pragma\ message\ ("{}ff\_realNumCores\ not\ supported\ on\ this\ platform"{})}}
\DoxyCodeLine{00336\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00337\ \ \ \ \ FILE\ \ \ \ \ \ \ *\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}};\ }
\DoxyCodeLine{00338\ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ =\ popen(inspect,\ \textcolor{stringliteral}{"{}r"{}});}
\DoxyCodeLine{00339\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\ \{}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (fscanf(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},\ \textcolor{stringliteral}{"{}\%ld"{}},\ \&\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}})\ ==\ EOF)\ \{\ }
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}fscanf"{}});}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ pclose(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});}
\DoxyCodeLine{00344\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ perror(\textcolor{stringliteral}{"{}popen"{}});}
\DoxyCodeLine{00345\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_WIN32}}
\DoxyCodeLine{00346\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}};}
\DoxyCodeLine{00347\ \}}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00366\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ \mbox{\hyperlink{mapping__utils_8hpp_af6c2611909d539e99b2a6c3e54d7c806}{ff\_setPriority}}(\mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ priority\_level=0)\ \{}
\DoxyCodeLine{00367\ \ \ \ \ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ \mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}}=0;}
\DoxyCodeLine{00368\ \textcolor{preprocessor}{\#if\ (defined(\_\_GNUC\_\_)\ \&\&\ defined(\_\_linux))}}
\DoxyCodeLine{00369\ \ \ \ \ \textcolor{comment}{//if\ (priority\_level)\ \{}}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (setpriority(PRIO\_PROCESS,\ ff\_gettid(),\ priority\_level)\ !=\ 0)\ \{}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}setpriority:"{}});}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}}\ =\ \mbox{\hyperlink{runtime_2_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2types_8h_a2d1678d5a7cc8ce499643f3b8957def4}{EINVAL}};}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00374\ \ \ \ \ \textcolor{comment}{//\}}}
\DoxyCodeLine{00375\ \textcolor{preprocessor}{\#elif\ defined(\_\_APPLE\_\_)\ }}
\DoxyCodeLine{00376\ \ \ \ \ \textcolor{keywordflow}{if}\ (setpriority(PRIO\_PROCESS,\ 0\ \textcolor{comment}{/*myself\ */}\ ,priority\_level)\ !=\ 0)\ \{}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}setpriority:"{}});}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}}\ =\ \mbox{\hyperlink{runtime_2_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2types_8h_a2d1678d5a7cc8ce499643f3b8957def4}{EINVAL}};}
\DoxyCodeLine{00379\ \ \ \ \ \}}
\DoxyCodeLine{00380\ \textcolor{preprocessor}{\#elif\ defined(\_WIN32)}}
\DoxyCodeLine{00381\ \ \ \ \ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ pri\ =\ (priority\_level\ +\ 20)/10;}
\DoxyCodeLine{00382\ \ \ \ \ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ subpri\ =\ ((priority\_level\ +\ 20)\%10)/2;}
\DoxyCodeLine{00383\ \ \ \ \ \textcolor{keywordflow}{switch}\ (pri)\ \{}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:\ \mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}}\ =\ !(SetPriorityClass(GetCurrentThread(),HIGH\_PRIORITY\_CLASS));}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ \mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}}\ =\ !(SetPriorityClass(GetCurrentThread(),ABOVE\_NORMAL\_PRIORITY\_CLASS));}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ \mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}}\ =\ !(SetPriorityClass(GetCurrentThread(),NORMAL\_PRIORITY\_CLASS));}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ \mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}}\ =\ !(SetPriorityClass(GetCurrentThread(),BELOW\_NORMAL\_PRIORITY\_CLASS));}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ \mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}}\ =\ \mbox{\hyperlink{runtime_2_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2types_8h_a2d1678d5a7cc8ce499643f3b8957def4}{EINVAL}};}
\DoxyCodeLine{00393\ \ \ \ \ \}}
\DoxyCodeLine{00394\ }
\DoxyCodeLine{00395\ \ \ \ \ \textcolor{keywordflow}{switch}\ (pri)\ \{}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:\ \mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}}\ |=\ !(SetThreadPriority(GetCurrentThread(),THREAD\_PRIORITY\_HIGHEST));}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ \mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}}\ |=\ !(SetThreadPriority(GetCurrentThread(),THREAD\_PRIORITY\_ABOVE\_NORMAL));}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ \mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}}\ |=\ !(SetThreadPriority(GetCurrentThread(),THREAD\_PRIORITY\_NORMAL));}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ \mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}}\ |=\ !(SetThreadPriority(GetCurrentThread(),THREAD\_PRIORITY\_BELOW\_NORMAL));}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:\ \mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}}\ |=\ !(SetThreadPriority(GetCurrentThread(),THREAD\_PRIORITY\_LOWEST));}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ \mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}}\ =\ \mbox{\hyperlink{runtime_2_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2types_8h_a2d1678d5a7cc8ce499643f3b8957def4}{EINVAL}};}
\DoxyCodeLine{00407\ \}}
\DoxyCodeLine{00408\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00409\ \textcolor{comment}{//\ do\ nothing}}
\DoxyCodeLine{00410\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00411\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}}!=0)\ perror(\textcolor{stringliteral}{"{}ff\_setPriority"{}});}
\DoxyCodeLine{00412\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{level1__impl_8h_afb8d513d0298d2695018eb494b092786}{ret}};}
\DoxyCodeLine{00413\ \}}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00424\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ \mbox{\hyperlink{mapping__utils_8hpp_af980d56e02e55d063feeb81d8b74462a}{ff\_getMyCore}}()\ \{}
\DoxyCodeLine{00425\ \textcolor{preprocessor}{\#if\ defined(\_\_linux\_\_)\ \&\&\ defined(CPU\_SET)}}
\DoxyCodeLine{00426\ \ \ \ \ cpu\_set\_t\ \mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}};}
\DoxyCodeLine{00427\ \ \ \ \ CPU\_ZERO(\&\mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}});}
\DoxyCodeLine{00428\ \ \ \ \ \textcolor{keywordflow}{if}\ (sched\_getaffinity(ff\_gettid(),\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}}),\ \&\mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}})\ !=\ 0)\ \{}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}sched\_getaffinity"{}});}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{runtime_2_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2types_8h_a2d1678d5a7cc8ce499643f3b8957def4}{EINVAL}};}
\DoxyCodeLine{00431\ \ \ \ \ \}}
\DoxyCodeLine{00432\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<CPU\_SETSIZE;++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ }
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (CPU\_ISSET(\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}},\&\mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}}))\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};}
\DoxyCodeLine{00434\ \textcolor{preprocessor}{\#elif\ defined(\_\_APPLE\_\_)\ \&\&\ MAC\_OS\_X\_HAS\_AFFINITY}}
\DoxyCodeLine{00435\ \ \ \ \ \textcolor{comment}{//\ Not\ tested}}
\DoxyCodeLine{00436\ \ \ \ \ \textcolor{keyword}{struct\ }thread\_affinity\_policy\ mypolicy;}
\DoxyCodeLine{00437\ \ \ \ \ boolean\_t\ get\_default;}
\DoxyCodeLine{00438\ \ \ \ \ mach\_msg\_type\_number\_t\ thread\_info\_count\ =\ THREAD\_AFFINITY\_POLICY\_COUNT;}
\DoxyCodeLine{00439\ \ \ \ \ thread\_policy\_get(mach\_thread\_self(),\ THREAD\_AFFINITY\_POLICY,}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (integer\_t*)\ \&mypolicy,}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&thread\_info\_count,\ \&get\_default);}
\DoxyCodeLine{00442\ \ \ \ \ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}\ =\ mypolicy.affinity\_tag;}
\DoxyCodeLine{00443\ \ \ \ \ \textcolor{keywordflow}{return}(\mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}});}
\DoxyCodeLine{00444\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00445\ \textcolor{preprocessor}{\#if\ \_\_GNUC\_\_}}
\DoxyCodeLine{00446\ \textcolor{preprocessor}{\#warning\ "{}ff\_getMyCpu\ not\ supported"{}}}
\DoxyCodeLine{00447\ \textcolor{preprocessor}{\#else\ }}
\DoxyCodeLine{00448\ \textcolor{preprocessor}{\#pragma\ message(\ "{}ff\_getMyCpu\ not\ supported"{})}}
\DoxyCodeLine{00449\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00450\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00451\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00452\ \}}
\DoxyCodeLine{00453\ \textcolor{comment}{//\ NOTE:\ this\ function\ will\ be\ discarded,\ please\ use\ ff\_getMyCore()\ instead}}
\DoxyCodeLine{00454\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ \mbox{\hyperlink{mapping__utils_8hpp_a957b2602ac60110f970df8a6c5ceaa24}{ff\_getMyCpu}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{mapping__utils_8hpp_af980d56e02e55d063feeb81d8b74462a}{ff\_getMyCore}}();\ \}}
\DoxyCodeLine{00455\ }
\DoxyCodeLine{00468\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{eabase_8h_a831c6b6852c6d34448e30a88c34539fd}{ssize\_t}}\ \mbox{\hyperlink{mapping__utils_8hpp_a55cc056711b4071b978f875d18914b44}{ff\_mapThreadToCpu}}(\textcolor{keywordtype}{int}\ cpu\_id,\ \textcolor{keywordtype}{int}\ priority\_level=0)\ \{}
\DoxyCodeLine{00469\ \textcolor{preprocessor}{\#if\ defined(\_\_linux\_\_)\ \&\&\ defined(CPU\_SET)}}
\DoxyCodeLine{00470\ \ \ \ \ cpu\_set\_t\ \mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}};}
\DoxyCodeLine{00471\ \ \ \ \ CPU\_ZERO(\&\mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}});}
\DoxyCodeLine{00472\ \ \ \ \ CPU\_SET(cpu\_id,\ \&\mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}});}
\DoxyCodeLine{00473\ \ \ \ \ \textcolor{keywordflow}{if}\ (sched\_setaffinity(ff\_gettid(),\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}}),\ \&\mbox{\hyperlink{ittnotify__static_8h_a2dea65f740c088e6408d62d6a9500c9e}{mask}})\ !=\ 0)\ }
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{runtime_2_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2types_8h_a2d1678d5a7cc8ce499643f3b8957def4}{EINVAL}};}
\DoxyCodeLine{00475\ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{mapping__utils_8hpp_af6c2611909d539e99b2a6c3e54d7c806}{ff\_setPriority}}(priority\_level));}
\DoxyCodeLine{00476\ \textcolor{preprocessor}{\#elif\ defined(\_\_APPLE\_\_)\ \&\&\ MAC\_OS\_X\_HAS\_AFFINITY}}
\DoxyCodeLine{00477\ \ \ \ \ \textcolor{comment}{//\ Mac\ OS\ does\ not\ implement\ direct\ pinning\ of\ threads\ onto\ cores.}}
\DoxyCodeLine{00478\ \ \ \ \ \textcolor{comment}{//\ Threads\ can\ be\ organised\ in\ affinity\ set.\ Using\ requested\ CPU}}
\DoxyCodeLine{00479\ \ \ \ \ \textcolor{comment}{//\ tag\ for\ the\ set.\ Cores\ under\ the\ same\ L2\ cache\ are\ not\ distinguished.\ }}
\DoxyCodeLine{00480\ \ \ \ \ \textcolor{comment}{//\ Should\ be\ called\ before\ running\ the\ thread.\ \ \ }}
\DoxyCodeLine{00481\ \textcolor{preprocessor}{\#define\ CACHE\_LEVELS\ 3}}
\DoxyCodeLine{00482\ \textcolor{preprocessor}{\#define\ CACHE\_L2\ \ \ \ \ 2}}
\DoxyCodeLine{00483\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}};}
\DoxyCodeLine{00484\ }
\DoxyCodeLine{00485\ \ \ \ \ \textcolor{keywordflow}{if}\ (sysctlbyname(\textcolor{stringliteral}{"{}hw.cacheconfig"{}},\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \&\mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ 0)\ !=\ 0)\ \{}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}sysctl"{}});}
\DoxyCodeLine{00487\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ std::vector<int64\_t>\ cacheconfig(\mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}});}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sysctlbyname(\textcolor{stringliteral}{"{}hw.cacheconfig"{}},\ \&cacheconfig[0],\ \&\mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}},\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ 0)\ !=\ 0)}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}sysctl:\ unable\ to\ get\ hw.cacheconfig"{}});}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00493\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ for\ (size\_t\ i=0;i<CACHE\_LEVELS;i++)}}
\DoxyCodeLine{00494\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ "{}\ Cache\ "{}\ <<\ i\ <<\ "{}\ shared\ by\ "{}\ <<\ \ cacheconfig[i]\ <<\ "{}\ cores\(\backslash\)n"{};}}
\DoxyCodeLine{00495\ \textcolor{comment}{\ \ \ \ \ \ */}}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \textcolor{keyword}{struct\ }thread\_affinity\_policy\ mypolicy;}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \textcolor{comment}{//\ Define\ sets\ taking\ in\ account\ pinning\ is\ performed\ on\ L2}}
\DoxyCodeLine{00498\ \ \ \ \ \ \ mypolicy.affinity\_tag\ =\ cpu\_id/cacheconfig[CACHE\_L2];}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ thread\_policy\_set(mach\_thread\_self(),\ THREAD\_AFFINITY\_POLICY,\ (integer\_t*)\ \&mypolicy,\ THREAD\_AFFINITY\_POLICY\_COUNT)\ !=\ KERN\_SUCCESS\ )\ \{}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}thread\_policy\_set:\ unable\ to\ set\ affinity\ of\ thread"{}});}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{runtime_2_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2types_8h_a2d1678d5a7cc8ce499643f3b8957def4}{EINVAL}};}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \}\ \textcolor{comment}{//\ else\ \{}}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ std::cerr\ <<\ "{}Sucessfully\ set\ affinity\ of\ thread\ ("{}\ <<\ }}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ mach\_thread\_self()\ <<\ "{})\ to\ core\ "{}\ <<\ cpu\_id/cacheconfig[CACHE\_L2]\ <<\ "{}\(\backslash\)n"{};}}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \textcolor{comment}{//\ \}}}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00507\ \ \ \ \}}
\DoxyCodeLine{00508\ \ \ \ \ \textcolor{keywordflow}{return}(\mbox{\hyperlink{mapping__utils_8hpp_af6c2611909d539e99b2a6c3e54d7c806}{ff\_setPriority}}(priority\_level));}
\DoxyCodeLine{00509\ \textcolor{preprocessor}{\#elif\ defined(\_WIN32)}}
\DoxyCodeLine{00510\ \ \ \ \ \textcolor{keywordflow}{if}\ (-\/1==SetThreadIdealProcessor(GetCurrentThread(),cpu\_id))\ \{}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}ff\_mapThreadToCpu:SetThreadIdealProcessor"{}});}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{runtime_2_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2types_8h_a2d1678d5a7cc8ce499643f3b8957def4}{EINVAL}};}
\DoxyCodeLine{00513\ \ \ \ \ \}}
\DoxyCodeLine{00514\ \ \ \ \ \textcolor{comment}{//std::cerr\ <<\ "{}Successfully\ set\ affinity\ of\ thread\ "{}\ <<\ GetCurrentThreadId()\ <<\ "{}\ to\ core\ "{}\ <<\ cpu\_id\ <<\ "{}\(\backslash\)n"{};}}
\DoxyCodeLine{00515\ \textcolor{preprocessor}{\#else\ }}
\DoxyCodeLine{00516\ \textcolor{preprocessor}{\#warning\ "{}CPU\_SET\ not\ defined,\ cannot\ map\ thread\ to\ specific\ CPU"{}}}
\DoxyCodeLine{00517\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00518\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00519\ \}}
\DoxyCodeLine{00520\ }
\DoxyCodeLine{00521\ \textcolor{comment}{//\ Author:\ Nick\ Strupat}}
\DoxyCodeLine{00522\ \textcolor{comment}{//\ Date:\ October\ 29,\ 2010}}
\DoxyCodeLine{00523\ \textcolor{comment}{//\ Returns\ the\ cache\ line\ size\ (in\ bytes)\ of\ the\ processor,\ or\ 0\ on\ failure}}
\DoxyCodeLine{00524\ }
\DoxyCodeLine{00525\ \textcolor{preprocessor}{\#include\ <stddef.h>}}
\DoxyCodeLine{00526\ }
\DoxyCodeLine{00527\ \textcolor{preprocessor}{\#if\ defined(\_\_APPLE\_\_)}}
\DoxyCodeLine{00528\ \textcolor{comment}{//\#include\ <sys/sysctl.h>}}
\DoxyCodeLine{00536\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ cache\_line\_size()\ \{}
\DoxyCodeLine{00537\ }
\DoxyCodeLine{00538\ \ \ \ \ u\_int64\_t\ \mbox{\hyperlink{test__enumerable__thread__specific_8cpp_aeda6e5e890eb884f1bccf8e647ae1ca8}{line\_size}}\ =\ 0;}
\DoxyCodeLine{00539\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ sizeof\_line\_size\ =\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{test__enumerable__thread__specific_8cpp_aeda6e5e890eb884f1bccf8e647ae1ca8}{line\_size}});}
\DoxyCodeLine{00540\ \ \ \ \ \textcolor{keywordflow}{if}\ (sysctlbyname(\textcolor{stringliteral}{"{}hw.cachelinesize"{}},\ \&\mbox{\hyperlink{test__enumerable__thread__specific_8cpp_aeda6e5e890eb884f1bccf8e647ae1ca8}{line\_size}},\ \&sizeof\_line\_size,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ 0)\ !=0)\ \{}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}cachelinesize:"{}});}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__enumerable__thread__specific_8cpp_aeda6e5e890eb884f1bccf8e647ae1ca8}{line\_size}}=0;}
\DoxyCodeLine{00543\ \ \ \ \ \}}
\DoxyCodeLine{00544\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{test__enumerable__thread__specific_8cpp_aeda6e5e890eb884f1bccf8e647ae1ca8}{line\_size}};}
\DoxyCodeLine{00545\ \}}
\DoxyCodeLine{00546\ }
\DoxyCodeLine{00547\ \textcolor{preprocessor}{\#elif\ defined(\_WIN32)}}
\DoxyCodeLine{00548\ \textcolor{comment}{//\#include\ <stdlib.h>}}
\DoxyCodeLine{00549\ \textcolor{comment}{//\#include\ <windows.h>}}
\DoxyCodeLine{00550\ }
\DoxyCodeLine{00558\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ cache\_line\_size()\ \{}
\DoxyCodeLine{00559\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{test__enumerable__thread__specific_8cpp_aeda6e5e890eb884f1bccf8e647ae1ca8}{line\_size}}\ =\ 0;}
\DoxyCodeLine{00560\ \ \ \ \ \mbox{\hyperlink{test__malloc__compliance_8cpp_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ buffer\_size\ =\ 0;}
\DoxyCodeLine{00561\ \ \ \ \ \mbox{\hyperlink{test__malloc__compliance_8cpp_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;}
\DoxyCodeLine{00562\ \ \ \ \ SYSTEM\_LOGICAL\_PROCESSOR\_INFORMATION\ *\ \mbox{\hyperlink{sugar_8h_aaadc06b5dac8070de2c8677210967bdb}{buffer}}\ =\ 0;}
\DoxyCodeLine{00563\ }
\DoxyCodeLine{00564\ \ \ \ \ GetLogicalProcessorInformation(0,\ \&buffer\_size);}
\DoxyCodeLine{00565\ \ \ \ \ \mbox{\hyperlink{sugar_8h_aaadc06b5dac8070de2c8677210967bdb}{buffer}}\ =\ (SYSTEM\_LOGICAL\_PROCESSOR\_INFORMATION\ *)\mbox{\hyperlink{mimalloc-override_8h_a99aa8fd9f4831e1b0fa9e1cdcde3e249}{malloc}}(buffer\_size);}
\DoxyCodeLine{00566\ \ \ \ \ GetLogicalProcessorInformation(\&\mbox{\hyperlink{sugar_8h_aaadc06b5dac8070de2c8677210967bdb}{buffer}}[0],\ \&buffer\_size);}
\DoxyCodeLine{00567\ }
\DoxyCodeLine{00568\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ !=\ buffer\_size\ /\ \textcolor{keyword}{sizeof}(SYSTEM\_LOGICAL\_PROCESSOR\_INFORMATION);\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{sugar_8h_aaadc06b5dac8070de2c8677210967bdb}{buffer}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].Relationship\ ==\ RelationCache\ \&\&\ \mbox{\hyperlink{sugar_8h_aaadc06b5dac8070de2c8677210967bdb}{buffer}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].Cache.Level\ ==\ 1)\ \{}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__enumerable__thread__specific_8cpp_aeda6e5e890eb884f1bccf8e647ae1ca8}{line\_size}}\ =\ \mbox{\hyperlink{sugar_8h_aaadc06b5dac8070de2c8677210967bdb}{buffer}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].Cache.LineSize;}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00573\ \ \ \ \ \}}
\DoxyCodeLine{00574\ }
\DoxyCodeLine{00575\ \ \ \ \ \mbox{\hyperlink{mimalloc-override_8h_a9d4b5df3530d1bc733070a4669ba6ebc}{free}}(\mbox{\hyperlink{sugar_8h_aaadc06b5dac8070de2c8677210967bdb}{buffer}});}
\DoxyCodeLine{00576\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{test__enumerable__thread__specific_8cpp_aeda6e5e890eb884f1bccf8e647ae1ca8}{line\_size}};}
\DoxyCodeLine{00577\ \}}
\DoxyCodeLine{00578\ }
\DoxyCodeLine{00579\ \textcolor{preprocessor}{\#elif\ defined(\_\_linux\_\_)}}
\DoxyCodeLine{00580\ \textcolor{comment}{//\#include\ <stdio.h>}}
\DoxyCodeLine{00581\ }
\DoxyCodeLine{00589\ }
\DoxyCodeLine{00590\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ cache\_line\_size()\ \{}
\DoxyCodeLine{00591\ \ \ \ \ FILE\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ 0;}
\DoxyCodeLine{00592\ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ fopen(\textcolor{stringliteral}{"{}/sys/devices/system/cpu/cpu0/cache/index0/coherency\_line\_size"{}},\ \textcolor{stringliteral}{"{}r"{}});}
\DoxyCodeLine{00593\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;}
\DoxyCodeLine{00594\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})\ \{}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (fscanf(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \textcolor{stringliteral}{"{}\%ud"{}},\ \&\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ ==\ EOF)\ \{\ }
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}fscanf"{}});}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (fclose(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})\ !=\ 0)\ perror(\textcolor{stringliteral}{"{}fclose"{}});\ }
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (fclose(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})\ !=\ 0)\ \{}
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}fclose"{}});}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00604\ \ \ \ \ \}}
\DoxyCodeLine{00605\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};}
\DoxyCodeLine{00606\ \}}
\DoxyCodeLine{00607\ }
\DoxyCodeLine{00608\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00609\ \textcolor{preprocessor}{\#error\ Unrecognized\ platform}}
\DoxyCodeLine{00610\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00611\ }
\DoxyCodeLine{00612\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ FF\_MAPPING\_UTILS\_HPP\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
