\doxysection{proxy\+\_\+overload\+\_\+osx.\+h}
\hypertarget{proxy__overload__osx_8h_source}{}\label{proxy__overload__osx_8h_source}\index{external/taskflow/3rd-\/party/tbb/src/tbbmalloc/proxy\_overload\_osx.h@{external/taskflow/3rd-\/party/tbb/src/tbbmalloc/proxy\_overload\_osx.h}}
\mbox{\hyperlink{proxy__overload__osx_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{comment}{//\ The\ original\ source\ for\ this\ code\ is}}
\DoxyCodeLine{00018\ \textcolor{comment}{//\ Copyright\ (c)\ 2011,\ Google\ Inc.}}
\DoxyCodeLine{00019\ \textcolor{comment}{//\ All\ rights\ reserved.}}
\DoxyCodeLine{00020\ \textcolor{comment}{//}}
\DoxyCodeLine{00021\ \textcolor{comment}{//\ Redistribution\ and\ use\ in\ source\ and\ binary\ forms,\ with\ or\ without}}
\DoxyCodeLine{00022\ \textcolor{comment}{//\ modification,\ are\ permitted\ provided\ that\ the\ following\ conditions\ are}}
\DoxyCodeLine{00023\ \textcolor{comment}{//\ met:}}
\DoxyCodeLine{00024\ \textcolor{comment}{//}}
\DoxyCodeLine{00025\ \textcolor{comment}{//\ \ \ \ \ *\ Redistributions\ of\ source\ code\ must\ retain\ the\ above\ copyright}}
\DoxyCodeLine{00026\ \textcolor{comment}{//\ notice,\ this\ list\ of\ conditions\ and\ the\ following\ disclaimer.}}
\DoxyCodeLine{00027\ \textcolor{comment}{//\ \ \ \ \ *\ Redistributions\ in\ binary\ form\ must\ reproduce\ the\ above}}
\DoxyCodeLine{00028\ \textcolor{comment}{//\ copyright\ notice,\ this\ list\ of\ conditions\ and\ the\ following\ disclaimer}}
\DoxyCodeLine{00029\ \textcolor{comment}{//\ in\ the\ documentation\ and/or\ other\ materials\ provided\ with\ the}}
\DoxyCodeLine{00030\ \textcolor{comment}{//\ distribution.}}
\DoxyCodeLine{00031\ \textcolor{comment}{//\ \ \ \ \ *\ Neither\ the\ name\ of\ Google\ Inc.\ nor\ the\ names\ of\ its}}
\DoxyCodeLine{00032\ \textcolor{comment}{//\ contributors\ may\ be\ used\ to\ endorse\ or\ promote\ products\ derived\ from}}
\DoxyCodeLine{00033\ \textcolor{comment}{//\ this\ software\ without\ specific\ prior\ written\ permission.}}
\DoxyCodeLine{00034\ \textcolor{comment}{//}}
\DoxyCodeLine{00035\ \textcolor{comment}{//\ THIS\ SOFTWARE\ IS\ PROVIDED\ BY\ THE\ COPYRIGHT\ HOLDERS\ AND\ CONTRIBUTORS}}
\DoxyCodeLine{00036\ \textcolor{comment}{//\ "{}AS\ IS"{}\ AND\ ANY\ EXPRESS\ OR\ IMPLIED\ WARRANTIES,\ INCLUDING,\ BUT\ NOT}}
\DoxyCodeLine{00037\ \textcolor{comment}{//\ LIMITED\ TO,\ THE\ IMPLIED\ WARRANTIES\ OF\ MERCHANTABILITY\ AND\ FITNESS\ FOR}}
\DoxyCodeLine{00038\ \textcolor{comment}{//\ A\ PARTICULAR\ PURPOSE\ ARE\ DISCLAIMED.\ IN\ NO\ EVENT\ SHALL\ THE\ COPYRIGHT}}
\DoxyCodeLine{00039\ \textcolor{comment}{//\ OWNER\ OR\ CONTRIBUTORS\ BE\ LIABLE\ FOR\ ANY\ DIRECT,\ INDIRECT,\ INCIDENTAL,}}
\DoxyCodeLine{00040\ \textcolor{comment}{//\ SPECIAL,\ EXEMPLARY,\ OR\ CONSEQUENTIAL\ DAMAGES\ (INCLUDING,\ BUT\ NOT}}
\DoxyCodeLine{00041\ \textcolor{comment}{//\ LIMITED\ TO,\ PROCUREMENT\ OF\ SUBSTITUTE\ GOODS\ OR\ SERVICES;\ LOSS\ OF\ USE,}}
\DoxyCodeLine{00042\ \textcolor{comment}{//\ DATA,\ OR\ PROFITS;\ OR\ BUSINESS\ INTERRUPTION)\ HOWEVER\ CAUSED\ AND\ ON\ ANY}}
\DoxyCodeLine{00043\ \textcolor{comment}{//\ THEORY\ OF\ LIABILITY,\ WHETHER\ IN\ CONTRACT,\ STRICT\ LIABILITY,\ OR\ TORT}}
\DoxyCodeLine{00044\ \textcolor{comment}{//\ (INCLUDING\ NEGLIGENCE\ OR\ OTHERWISE)\ ARISING\ IN\ ANY\ WAY\ OUT\ OF\ THE\ USE}}
\DoxyCodeLine{00045\ \textcolor{comment}{//\ OF\ THIS\ SOFTWARE,\ EVEN\ IF\ ADVISED\ OF\ THE\ POSSIBILITY\ OF\ SUCH\ DAMAGE.}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\#include\ <AvailabilityMacros.h>}}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#include\ <malloc/malloc.h>}}
\DoxyCodeLine{00049\ \textcolor{preprocessor}{\#include\ <mach/mach.h>}}
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\#include\ <stdlib.h>}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \textcolor{keyword}{static}\ kern\_return\_t\ \mbox{\hyperlink{proxy__overload__osx_8h_a53069de59a11da85af66509d17004bef}{enumerator}}(task\_t,\ \textcolor{keywordtype}{void}\ *,\ \textcolor{keywordtype}{unsigned},\ vm\_address\_t,}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ memory\_reader\_t,\ vm\_range\_recorder\_t)}
\DoxyCodeLine{00054\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordflow}{return}\ KERN\_FAILURE;}
\DoxyCodeLine{00056\ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{proxy__overload__osx_8h_aadeeebab3dc2519001679d69234b6691}{good\_size}}(malloc\_zone\_t\ *,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}})}
\DoxyCodeLine{00059\ \{}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}};}
\DoxyCodeLine{00061\ \}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \textcolor{keyword}{static}\ boolean\_t\ \mbox{\hyperlink{proxy__overload__osx_8h_a34edfe5c4b33033fd1a02b6f1406fd59}{zone\_check}}(malloc\_zone\_t\ *)\ \textcolor{comment}{/*\ Consistency\ checker\ */}}
\DoxyCodeLine{00064\ \{}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00066\ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{proxy__overload__osx_8h_a3c409bd16fcb99caf38327c0906210a8}{zone\_print}}(malloc\_zone\_t\ *,\ boolean\_t)\ \{\ \}}
\DoxyCodeLine{00069\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{proxy__overload__osx_8h_ade98989429a4307967e007cc55fc249e}{zone\_log}}(malloc\_zone\_t\ *,\ \textcolor{keywordtype}{void}\ *)\ \{\}}
\DoxyCodeLine{00070\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{proxy__overload__osx_8h_a794482ddf2d0512a680e86da6997c8d3}{zone\_force\_lock}}(malloc\_zone\_t\ *)\ \{\}}
\DoxyCodeLine{00071\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{proxy__overload__osx_8h_a41e90f369430fb4309e6cd22dd71cd2b}{zone\_force\_unlock}}(malloc\_zone\_t\ *)\ \{\}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{proxy__overload__osx_8h_a4db16c4012ffccf6c42453e6f1a4cabd}{zone\_statistics}}(malloc\_zone\_t\ *,\ malloc\_statistics\_t\ *\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}})}
\DoxyCodeLine{00074\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>blocks\_in\_use\ =\ 0;}
\DoxyCodeLine{00076\ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>size\_in\_use\ =\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>max\_size\_in\_use\ =\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}-\/>size\_allocated\ =\ 0;}
\DoxyCodeLine{00077\ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \textcolor{keyword}{static}\ boolean\_t\ \mbox{\hyperlink{proxy__overload__osx_8h_a6bed2b6f1cc96f26a73747a5fe5a2c11}{zone\_locked}}(malloc\_zone\_t\ *)}
\DoxyCodeLine{00080\ \{}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00082\ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \textcolor{keyword}{static}\ boolean\_t\ \mbox{\hyperlink{proxy__overload__osx_8h_ab816678be47b90b261e074e01ad2e5af}{impl\_zone\_enable\_discharge\_checking}}(malloc\_zone\_t\ *)}
\DoxyCodeLine{00085\ \{}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00087\ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{proxy__overload__osx_8h_a0ebc08714841f0218fa539f1488751ea}{impl\_zone\_disable\_discharge\_checking}}(malloc\_zone\_t\ *)\ \{\}}
\DoxyCodeLine{00090\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{proxy__overload__osx_8h_aef2ed47c645baf67528efccecd797224}{impl\_zone\_discharge}}(malloc\_zone\_t\ *,\ \textcolor{keywordtype}{void}\ *)\ \{\}}
\DoxyCodeLine{00091\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{proxy__overload__osx_8h_a730a9c8ae7c8f2a8aec1ec7f8b883b99}{impl\_zone\_destroy}}(\textcolor{keyword}{struct}\ \_malloc\_zone\_t\ *)\ \{\}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \textcolor{comment}{/*\ note:\ impl\_malloc\_usable\_size()\ is\ called\ for\ each\ free()\ call,\ so\ it\ must\ be\ fast\ */}}
\DoxyCodeLine{00094\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{proxy__overload__osx_8h_aa93464696fe9218f19f0be3b46b41aa6}{impl\_malloc\_usable\_size}}(\textcolor{keyword}{struct}\ \_malloc\_zone\_t\ *,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}})}
\DoxyCodeLine{00095\ \{}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{comment}{//\ malloc\_usable\_size()\ is\ used\ by\ macOS*\ to\ recognize\ which\ memory\ manager}}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{comment}{//\ allocated\ the\ address,\ so\ our\ wrapper\ must\ not\ redirect\ to\ the\ original\ function.}}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{frontend_8cpp_a1880626319a708ab26ef0d5af087fbef}{\_\_TBB\_malloc\_safer\_msize}}(\textcolor{keyword}{const\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00099\ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{proxy__overload__osx_8h_aec425f8b43936493cb0867f72d601701}{impl\_malloc}}(\textcolor{keyword}{struct}\ \_malloc\_zone\_t\ *,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00102\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{proxy__overload__osx_8h_a2dfbff272054be7b2b7abb2fa3ef6448}{impl\_calloc}}(\textcolor{keyword}{struct}\ \_malloc\_zone\_t\ *,\ \textcolor{keywordtype}{size\_t}\ num\_items,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00103\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{proxy__overload__osx_8h_a71b4b3ef22a5a166d5c429d037ecc232}{impl\_valloc}}(\textcolor{keyword}{struct}\ \_malloc\_zone\_t\ *,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00104\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{proxy__overload__osx_8h_a84ddc2a3d925a786181875fc3daab548}{impl\_free}}(\textcolor{keyword}{struct}\ \_malloc\_zone\_t\ *,\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}});}
\DoxyCodeLine{00105\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{proxy__overload__osx_8h_ad6b13daf53f0447a4d5836cc114e1ba9}{impl\_realloc}}(\textcolor{keyword}{struct}\ \_malloc\_zone\_t\ *,\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00106\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{proxy__overload__osx_8h_ad87107e7a667362c8d69eab84f4c81b3}{impl\_memalign}}(\textcolor{keyword}{struct}\ \_malloc\_zone\_t\ *,\ \textcolor{keywordtype}{size\_t}\ alignment,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \textcolor{comment}{/*\ ptr\ is\ in\ zone\ and\ have\ reported\ size\ */}}
\DoxyCodeLine{00109\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{proxy__overload__osx_8h_a33bbc1fc04a024b01da534e690ab52b8}{impl\_free\_definite\_size}}(\textcolor{keyword}{struct}\ \_malloc\_zone\_t*,\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}})}
\DoxyCodeLine{00110\ \{}
\DoxyCodeLine{00111\ \ \ \ \ \_\_TBB\_malloc\_free\_definite\_size(\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}});}
\DoxyCodeLine{00112\ \}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \textcolor{comment}{/*\ Empty\ out\ caches\ in\ the\ face\ of\ memory\ pressure.\ */}}
\DoxyCodeLine{00115\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{proxy__overload__osx_8h_a46a42f36e583f3c95fded09d80bff7c2}{impl\_pressure\_relief}}(\textcolor{keyword}{struct}\ \_malloc\_zone\_t\ *,\ \textcolor{keywordtype}{size\_t}\ goal)}
\DoxyCodeLine{00116\ \{}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00118\ \}}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \textcolor{keyword}{static}\ malloc\_zone\_t\ *\mbox{\hyperlink{proxy__overload__osx_8h_acf82763229a1d366f1ce60decb20f363}{system\_zone}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_do_malloc_replacement_ae382f7847415445cf3faf53bbc681470}{DoMallocReplacement}}\ \{}
\DoxyCodeLine{00123\ \ \ \ \ \mbox{\hyperlink{struct_do_malloc_replacement_ae382f7847415445cf3faf53bbc681470}{DoMallocReplacement}}()\ \{}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ malloc\_introspection\_t\ introspect;}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ memset(\&introspect,\ 0,\ \textcolor{keyword}{sizeof}(malloc\_introspection\_t));}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ malloc\_zone\_t\ zone;}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ memset(\&zone,\ 0,\ \textcolor{keyword}{sizeof}(malloc\_zone\_t));}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ introspect.enumerator\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_a53069de59a11da85af66509d17004bef}{enumerator}};}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ introspect.good\_size\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_aadeeebab3dc2519001679d69234b6691}{good\_size}};}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ introspect.check\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_a34edfe5c4b33033fd1a02b6f1406fd59}{zone\_check}};}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ introspect.print\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_a3c409bd16fcb99caf38327c0906210a8}{zone\_print}};}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ introspect.log\ =\ \mbox{\hyperlink{proxy__overload__osx_8h_ade98989429a4307967e007cc55fc249e}{zone\_log}};}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ introspect.force\_lock\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_a794482ddf2d0512a680e86da6997c8d3}{zone\_force\_lock}};}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ introspect.force\_unlock\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_a41e90f369430fb4309e6cd22dd71cd2b}{zone\_force\_unlock}};}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ introspect.statistics\ =\ \mbox{\hyperlink{proxy__overload__osx_8h_a4db16c4012ffccf6c42453e6f1a4cabd}{zone\_statistics}};}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ introspect.zone\_locked\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_a6bed2b6f1cc96f26a73747a5fe5a2c11}{zone\_locked}};}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ introspect.enable\_discharge\_checking\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_ab816678be47b90b261e074e01ad2e5af}{impl\_zone\_enable\_discharge\_checking}};}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ introspect.disable\_discharge\_checking\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_a0ebc08714841f0218fa539f1488751ea}{impl\_zone\_disable\_discharge\_checking}};}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ introspect.discharge\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_aef2ed47c645baf67528efccecd797224}{impl\_zone\_discharge}};}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ zone.size\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_aa93464696fe9218f19f0be3b46b41aa6}{impl\_malloc\_usable\_size}};}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ zone.malloc\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_aec425f8b43936493cb0867f72d601701}{impl\_malloc}};}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ zone.calloc\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_a2dfbff272054be7b2b7abb2fa3ef6448}{impl\_calloc}};}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ zone.valloc\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_a71b4b3ef22a5a166d5c429d037ecc232}{impl\_valloc}};}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ zone.free\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_a84ddc2a3d925a786181875fc3daab548}{impl\_free}};}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ zone.realloc\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_ad6b13daf53f0447a4d5836cc114e1ba9}{impl\_realloc}};}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ zone.destroy\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_a730a9c8ae7c8f2a8aec1ec7f8b883b99}{impl\_zone\_destroy}};}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ zone.zone\_name\ =\ \textcolor{stringliteral}{"{}tbbmalloc"{}};}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ zone.introspect\ =\ \&introspect;}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ zone.version\ =\ 8;}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ zone.memalign\ =\ \mbox{\hyperlink{proxy__overload__osx_8h_ad87107e7a667362c8d69eab84f4c81b3}{impl\_memalign}};}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ zone.free\_definite\_size\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_a33bbc1fc04a024b01da534e690ab52b8}{impl\_free\_definite\_size}};}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ zone.pressure\_relief\ =\ \&\mbox{\hyperlink{proxy__overload__osx_8h_a46a42f36e583f3c95fded09d80bff7c2}{impl\_pressure\_relief}};}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ make\ sure\ that\ default\ purgeable\ zone\ is\ initialized}}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ malloc\_default\_purgeable\_zone();}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}\ =\ \mbox{\hyperlink{mimalloc-override_8h_a99aa8fd9f4831e1b0fa9e1cdcde3e249}{malloc}}(1);}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ get\ all\ registered\ memory\ zones}}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ zcount\ =\ 0;}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ malloc\_zone\_t**\ zone\_array\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ kern\_return\_t\ errorcode\ =\ malloc\_get\_all\_zones(mach\_task\_self(),\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},(vm\_address\_t**)\&zone\_array,\&zcount);}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!errorcode\ \&\&\ zone\_array\ \&\&\ zcount>0)\ \{}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ find\ the\ zone\ that\ allocated\ ptr}}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<zcount;\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ malloc\_zone\_t*\ z\ =\ zone\_array[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}];}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (z\ \&\&\ z-\/>size(z,\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}})>0)\ \{\ \textcolor{comment}{//\ the\ right\ one\ is\ found}}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{proxy__overload__osx_8h_acf82763229a1d366f1ce60decb20f363}{system\_zone}}\ =\ z;}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mimalloc-override_8h_a9d4b5df3530d1bc733070a4669ba6ebc}{free}}(\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}});}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ malloc\_zone\_register(\&zone);}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{proxy__overload__osx_8h_acf82763229a1d366f1ce60decb20f363}{system\_zone}})\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ after\ unregistration\ of\ the\ system\ zone,\ the\ last\ registered\ (i.e.\ our)\ zone\ becomes\ the\ default}}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ malloc\_zone\_unregister(\mbox{\hyperlink{proxy__overload__osx_8h_acf82763229a1d366f1ce60decb20f363}{system\_zone}});}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ register\ the\ system\ zone\ back}}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ malloc\_zone\_register(\mbox{\hyperlink{proxy__overload__osx_8h_acf82763229a1d366f1ce60decb20f363}{system\_zone}});}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00182\ \ \ \ \ \}}
\DoxyCodeLine{00183\ \};}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_do_malloc_replacement}{DoMallocReplacement}}\ \mbox{\hyperlink{proxy__overload__osx_8h_a15460b7a2ca07230d26f1dbe6a19b2bc}{doMallocReplacement}};}
\DoxyCodeLine{00186\ }

\end{DoxyCode}
