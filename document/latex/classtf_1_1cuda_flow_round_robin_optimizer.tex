\doxysection{tf\+::cuda\+Flow\+Round\+Robin\+Optimizer类 参考}
\hypertarget{classtf_1_1cuda_flow_round_robin_optimizer}{}\label{classtf_1_1cuda_flow_round_robin_optimizer}\index{tf::cudaFlowRoundRobinOptimizer@{tf::cudaFlowRoundRobinOptimizer}}


class to capture a CUDA graph using a round-\/robin algorithm  




{\ttfamily \#include $<$cuda\+\_\+optimizer.\+hpp$>$}



类 tf\+::cuda\+Flow\+Round\+Robin\+Optimizer 继承关系图\+:
% FIG 0


tf\+::cuda\+Flow\+Round\+Robin\+Optimizer 的协作图\+:
% FIG 1
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtf_1_1cuda_flow_round_robin_optimizer_aef646675174ffcab6135fbfb7f0eecfe}{cuda\+Flow\+Round\+Robin\+Optimizer}} ()=\mbox{\hyperlink{sugar_8h_a6face89e97cccad5464dd9bb9c7efd23}{default}}
\begin{DoxyCompactList}\small\item\em constructs a round-\/robin optimizer with 4 streams by default \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtf_1_1cuda_flow_round_robin_optimizer_ab293c8613773baf87ff740d2cec14149}{cuda\+Flow\+Round\+Robin\+Optimizer}} (size\+\_\+t \mbox{\hyperlink{classtf_1_1cuda_flow_round_robin_optimizer_a22fb9667ce393c31d908c3cc4f0ba650}{num\+\_\+streams}})
\begin{DoxyCompactList}\small\item\em constructs a round-\/robin optimizer with the given number of streams \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classtf_1_1cuda_flow_round_robin_optimizer_a22fb9667ce393c31d908c3cc4f0ba650}{num\+\_\+streams}} () const
\begin{DoxyCompactList}\small\item\em queries the number of streams used by the optimizer \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1cuda_flow_round_robin_optimizer_acbd190f22ecc606a8b888953649a5be6}{num\+\_\+streams}} (size\+\_\+t \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}})
\begin{DoxyCompactList}\small\item\em sets the number of streams used by the optimizer \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private 成员函数}
\begin{DoxyCompactItemize}
\item 
cuda\+Graph\+\_\+t \mbox{\hyperlink{classtf_1_1cuda_flow_round_robin_optimizer_ad612d3b6c169a65eebcf300eaca358aa}{\+\_\+optimize}} (cuda\+Flow\+Graph \&graph)
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtf_1_1cuda_flow_round_robin_optimizer_a66a1f7b04965fe6478b0c48a6c69c4a3}{\+\_\+reset}} (std\+::vector$<$ std\+::vector$<$ cuda\+Flow\+Node \texorpdfstring{$\ast$}{*} $>$ $>$ \&graph)
\end{DoxyCompactItemize}
\doxysubsubsection*{Private 属性}
\begin{DoxyCompactItemize}
\item 
size\+\_\+t \mbox{\hyperlink{classtf_1_1cuda_flow_round_robin_optimizer_a1354083daa786bad9df520f4ddb03511}{\+\_\+num\+\_\+streams}} \{4\}
\end{DoxyCompactItemize}
\doxysubsubsection*{友元}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classtf_1_1cuda_flow_round_robin_optimizer_a672b45d300c57d726c203c62f950efbd}{cuda\+Flow\+Capturer}}
\end{DoxyCompactItemize}
\doxysubsubsection*{额外继承的成员函数}
\doxysubsection*{Protected 成员函数 继承自 \mbox{\hyperlink{classtf_1_1cuda_flow_optimizer_base}{tf\+::cuda\+Flow\+Optimizer\+Base}}}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ cuda\+Flow\+Node \texorpdfstring{$\ast$}{*} $>$ \mbox{\hyperlink{classtf_1_1cuda_flow_optimizer_base_a25bb1274b6ab2279e261690a5fe46007}{\+\_\+toposort}} (cuda\+Flow\+Graph \&)
\item 
std\+::vector$<$ std\+::vector$<$ cuda\+Flow\+Node \texorpdfstring{$\ast$}{*} $>$ $>$ \mbox{\hyperlink{classtf_1_1cuda_flow_optimizer_base_ae20d9b88a98439f8d8ee5f6280b15744}{\+\_\+levelize}} (cuda\+Flow\+Graph \&)
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
class to capture a CUDA graph using a round-\/robin algorithm 

\doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} round-\/robin capturing algorithm levelizes the user-\/described graph and assign streams to nodes in a round-\/robin order level by level. The algorithm is based on the following paper published in Euro-\/\+Par 2021\+:
\begin{DoxyItemize}
\item Dian-\/\+Lun Lin and Tsung-\/\+Wei Huang, "{}Efficient GPU Computation using Task \doxylink{classtf_1_1_graph}{Graph} Parallelism,"{} {\itshape European Conference on Parallel and Distributed Computing (Euro-\/\+Par)}, 2021
\end{DoxyItemize}

The round-\/robin optimization algorithm is best suited for large cuda\+Flow graphs that compose hundreds of or thousands of GPU operations (e.\+g., kernels and memory copies) with many of them being able to run in parallel. You can configure the number of streams to the optimizer to adjust the maximum kernel currency in the captured CUDA graph. 

\doxysubsection{构造及析构函数说明}
\Hypertarget{classtf_1_1cuda_flow_round_robin_optimizer_aef646675174ffcab6135fbfb7f0eecfe}\index{tf::cudaFlowRoundRobinOptimizer@{tf::cudaFlowRoundRobinOptimizer}!cudaFlowRoundRobinOptimizer@{cudaFlowRoundRobinOptimizer}}
\index{cudaFlowRoundRobinOptimizer@{cudaFlowRoundRobinOptimizer}!tf::cudaFlowRoundRobinOptimizer@{tf::cudaFlowRoundRobinOptimizer}}
\doxysubsubsection{\texorpdfstring{cudaFlowRoundRobinOptimizer()}{cudaFlowRoundRobinOptimizer()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classtf_1_1cuda_flow_round_robin_optimizer_aef646675174ffcab6135fbfb7f0eecfe} 
tf\+::cuda\+Flow\+Round\+Robin\+Optimizer\+::cuda\+Flow\+Round\+Robin\+Optimizer (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



constructs a round-\/robin optimizer with 4 streams by default 

函数调用图\+:
% FIG 2
\Hypertarget{classtf_1_1cuda_flow_round_robin_optimizer_ab293c8613773baf87ff740d2cec14149}\index{tf::cudaFlowRoundRobinOptimizer@{tf::cudaFlowRoundRobinOptimizer}!cudaFlowRoundRobinOptimizer@{cudaFlowRoundRobinOptimizer}}
\index{cudaFlowRoundRobinOptimizer@{cudaFlowRoundRobinOptimizer}!tf::cudaFlowRoundRobinOptimizer@{tf::cudaFlowRoundRobinOptimizer}}
\doxysubsubsection{\texorpdfstring{cudaFlowRoundRobinOptimizer()}{cudaFlowRoundRobinOptimizer()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classtf_1_1cuda_flow_round_robin_optimizer_ab293c8613773baf87ff740d2cec14149} 
tf\+::cuda\+Flow\+Round\+Robin\+Optimizer\+::cuda\+Flow\+Round\+Robin\+Optimizer (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{num\+\_\+streams}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}



constructs a round-\/robin optimizer with the given number of streams 

函数调用图\+:
% FIG 3


\doxysubsection{成员函数说明}
\Hypertarget{classtf_1_1cuda_flow_round_robin_optimizer_ad612d3b6c169a65eebcf300eaca358aa}\index{tf::cudaFlowRoundRobinOptimizer@{tf::cudaFlowRoundRobinOptimizer}!\_optimize@{\_optimize}}
\index{\_optimize@{\_optimize}!tf::cudaFlowRoundRobinOptimizer@{tf::cudaFlowRoundRobinOptimizer}}
\doxysubsubsection{\texorpdfstring{\_optimize()}{\_optimize()}}
{\footnotesize\ttfamily \label{classtf_1_1cuda_flow_round_robin_optimizer_ad612d3b6c169a65eebcf300eaca358aa} 
cuda\+Graph\+\_\+t tf\+::cuda\+Flow\+Round\+Robin\+Optimizer\+::\+\_\+optimize (\begin{DoxyParamCaption}\item[{cuda\+Flow\+Graph \&}]{graph}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

函数调用图\+:
% FIG 4
\Hypertarget{classtf_1_1cuda_flow_round_robin_optimizer_a66a1f7b04965fe6478b0c48a6c69c4a3}\index{tf::cudaFlowRoundRobinOptimizer@{tf::cudaFlowRoundRobinOptimizer}!\_reset@{\_reset}}
\index{\_reset@{\_reset}!tf::cudaFlowRoundRobinOptimizer@{tf::cudaFlowRoundRobinOptimizer}}
\doxysubsubsection{\texorpdfstring{\_reset()}{\_reset()}}
{\footnotesize\ttfamily \label{classtf_1_1cuda_flow_round_robin_optimizer_a66a1f7b04965fe6478b0c48a6c69c4a3} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tf\+::cuda\+Flow\+Round\+Robin\+Optimizer\+::\+\_\+reset (\begin{DoxyParamCaption}\item[{std\+::vector$<$ std\+::vector$<$ cuda\+Flow\+Node \texorpdfstring{$\ast$}{*} $>$ $>$ \&}]{graph}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

\Hypertarget{classtf_1_1cuda_flow_round_robin_optimizer_a22fb9667ce393c31d908c3cc4f0ba650}\index{tf::cudaFlowRoundRobinOptimizer@{tf::cudaFlowRoundRobinOptimizer}!num\_streams@{num\_streams}}
\index{num\_streams@{num\_streams}!tf::cudaFlowRoundRobinOptimizer@{tf::cudaFlowRoundRobinOptimizer}}
\doxysubsubsection{\texorpdfstring{num\_streams()}{num\_streams()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classtf_1_1cuda_flow_round_robin_optimizer_a22fb9667ce393c31d908c3cc4f0ba650} 
size\+\_\+t tf\+::cuda\+Flow\+Round\+Robin\+Optimizer\+::num\+\_\+streams (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



queries the number of streams used by the optimizer 

\Hypertarget{classtf_1_1cuda_flow_round_robin_optimizer_acbd190f22ecc606a8b888953649a5be6}\index{tf::cudaFlowRoundRobinOptimizer@{tf::cudaFlowRoundRobinOptimizer}!num\_streams@{num\_streams}}
\index{num\_streams@{num\_streams}!tf::cudaFlowRoundRobinOptimizer@{tf::cudaFlowRoundRobinOptimizer}}
\doxysubsubsection{\texorpdfstring{num\_streams()}{num\_streams()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classtf_1_1cuda_flow_round_robin_optimizer_acbd190f22ecc606a8b888953649a5be6} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tf\+::cuda\+Flow\+Round\+Robin\+Optimizer\+::num\+\_\+streams (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{n}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



sets the number of streams used by the optimizer 



\doxysubsection{友元及相关符号说明}
\Hypertarget{classtf_1_1cuda_flow_round_robin_optimizer_a672b45d300c57d726c203c62f950efbd}\index{tf::cudaFlowRoundRobinOptimizer@{tf::cudaFlowRoundRobinOptimizer}!cudaFlowCapturer@{cudaFlowCapturer}}
\index{cudaFlowCapturer@{cudaFlowCapturer}!tf::cudaFlowRoundRobinOptimizer@{tf::cudaFlowRoundRobinOptimizer}}
\doxysubsubsection{\texorpdfstring{cudaFlowCapturer}{cudaFlowCapturer}}
{\footnotesize\ttfamily \label{classtf_1_1cuda_flow_round_robin_optimizer_a672b45d300c57d726c203c62f950efbd} 
friend class \mbox{\hyperlink{classtf_1_1cuda_flow_capturer}{cuda\+Flow\+Capturer}}\hspace{0.3cm}{\ttfamily [friend]}}



\doxysubsection{类成员变量说明}
\Hypertarget{classtf_1_1cuda_flow_round_robin_optimizer_a1354083daa786bad9df520f4ddb03511}\index{tf::cudaFlowRoundRobinOptimizer@{tf::cudaFlowRoundRobinOptimizer}!\_num\_streams@{\_num\_streams}}
\index{\_num\_streams@{\_num\_streams}!tf::cudaFlowRoundRobinOptimizer@{tf::cudaFlowRoundRobinOptimizer}}
\doxysubsubsection{\texorpdfstring{\_num\_streams}{\_num\_streams}}
{\footnotesize\ttfamily \label{classtf_1_1cuda_flow_round_robin_optimizer_a1354083daa786bad9df520f4ddb03511} 
size\+\_\+t tf\+::cuda\+Flow\+Round\+Robin\+Optimizer\+::\+\_\+num\+\_\+streams \{4\}\hspace{0.3cm}{\ttfamily [private]}}



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/taskflow/taskflow/cuda/\mbox{\hyperlink{cuda__optimizer_8hpp}{cuda\+\_\+optimizer.\+hpp}}\end{DoxyCompactItemize}
