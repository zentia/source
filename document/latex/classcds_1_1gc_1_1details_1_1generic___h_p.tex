\doxysection{cds\+::gc\+::details\+::generic\+\_\+\+HP\texorpdfstring{$<$}{<} TLSManager \texorpdfstring{$>$}{>} 模板类 参考}
\hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p}{}\label{classcds_1_1gc_1_1details_1_1generic___h_p}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}


Hazard Pointer SMR (Safe Memory Reclamation)  




{\ttfamily \#include $<$hp.\+h$>$}

\doxysubsubsection*{类}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard}{Guard}}
\begin{DoxyCompactList}\small\item\em Hazard Pointer guard \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1_guard_array}{Guard\+Array}}
\begin{DoxyCompactList}\small\item\em Array of Hazard Pointer guards \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_1_1guarded__ptr}{guarded\+\_\+ptr}}
\begin{DoxyCompactList}\small\item\em Guarded pointer \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public 类型}
\begin{DoxyCompactItemize}
\item 
enum class \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a0a5635876b53d5bec9f710bff2754f40}{scan\+\_\+type}} \{ \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a0a5635876b53d5bec9f710bff2754f40af3d64714d1f6e7f71558d4252e84ab58}{classic}} = hp\+::details\+::classic
, \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a0a5635876b53d5bec9f710bff2754f40a01c945aca5a24bfe4f8568c2619939ec}{inplace}} = hp\+::details\+::inplace
 \}
\begin{DoxyCompactList}\small\item\em {\ttfamily \doxylink{classcds_1_1gc_1_1details_1_1generic___h_p_ad952ddac472dcca9ba99bdbb1f053e41}{scan()}} type \end{DoxyCompactList}\item 
using \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a0673102745e45e2a8f1207d9b66c710f}{tls\+\_\+manager}} = TLSManager
\begin{DoxyCompactList}\small\item\em TLS manager type \end{DoxyCompactList}\item 
typedef hp\+::details\+::hazard\+\_\+ptr \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_ad6a8c7d734afa6d388436fb94c9c348d}{guarded\+\_\+pointer}}
\begin{DoxyCompactList}\small\item\em Native guarded pointer type \end{DoxyCompactList}\item 
{\footnotesize template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ }\\using \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a5432e865039a7c74d1abbd06a5b7e414}{atomic\+\_\+ref}} = atomics\+::atomic$<$\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*}$>$
\begin{DoxyCompactList}\small\item\em Atomic reference \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Marked\+Ptr$>$ }\\using \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a46811f5cefbd082e90adf5283f2013aa}{atomic\+\_\+marked\+\_\+ptr}} = atomics\+::atomic$<$Marked\+Ptr$>$
\begin{DoxyCompactList}\small\item\em Atomic marked pointer \end{DoxyCompactList}\item 
{\footnotesize template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ }\\using \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_ab22ef3c09781316207dfb8fe9eb92243}{atomic\+\_\+type}} = atomics\+::atomic$<$\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$
\begin{DoxyCompactList}\small\item\em Atomic type \end{DoxyCompactList}\item 
typedef \mbox{\hyperlink{classcds_1_1gc_1_1hp_1_1details_1_1not__enough__hazard__ptr}{hp\+::details\+::not\+\_\+enough\+\_\+hazard\+\_\+ptr}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_aab46f6b24e3fe68cdf14c5191f906f91}{not\+\_\+enough\+\_\+hazard\+\_\+ptr\+\_\+exception}}
\begin{DoxyCompactList}\small\item\em Exception "{}\+Not enough Hazard Pointer"{} \end{DoxyCompactList}\item 
typedef \mbox{\hyperlink{structcds_1_1gc_1_1hp_1_1details_1_1stat}{hp\+::details\+::stat}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a1a99d8be92594df644f44c1d9473073d}{stat}}
\begin{DoxyCompactList}\small\item\em Internal statistics \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a2cc2c0d2f12fb490b172b3ca19b62b76}{generic\+\_\+\+HP}} (size\+\_\+t n\+Hazard\+Ptr\+Count=0, size\+\_\+t n\+Max\+Thread\+Count=0, size\+\_\+t n\+Max\+Retired\+Ptr\+Count=0, \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a0a5635876b53d5bec9f710bff2754f40}{scan\+\_\+type}} n\+Scan\+Type=\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a0a5635876b53d5bec9f710bff2754f40a01c945aca5a24bfe4f8568c2619939ec}{scan\+\_\+type\+::inplace}})
\begin{DoxyCompactList}\small\item\em Initializes HP singleton \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a45ba3ae28260bfa1a0240230186b9832}{\texorpdfstring{$\sim$}{\string~}generic\+\_\+\+HP}} ()
\begin{DoxyCompactList}\small\item\em Terminates GC singleton \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{静态 Public 成员函数}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_ad1fe48e45eeefc095692d7514acb3387}{check\+\_\+available\+\_\+guards}} (size\+\_\+t n\+Count\+Needed)
\begin{DoxyCompactList}\small\item\em Checks that required hazard pointer count {\ttfamily n\+Count\+Needed} is less or equal then max hazard pointer count \end{DoxyCompactList}\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a6c30525f9fade032e64785e8fe9e3687}{set\+\_\+memory\+\_\+allocator}} (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}(\texorpdfstring{$\ast$}{*}alloc\+\_\+func)(size\+\_\+t \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}), \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}(\texorpdfstring{$\ast$}{*}free\+\_\+func)(\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}))
\begin{DoxyCompactList}\small\item\em Set memory management functions \end{DoxyCompactList}\item 
static size\+\_\+t \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a302d6710c076873d8dd0bd751de471a3}{max\+\_\+hazard\+\_\+count}} ()
\begin{DoxyCompactList}\small\item\em Returns max Hazard Pointer count \end{DoxyCompactList}\item 
static size\+\_\+t \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_afbb7482607e3e64e5989ec9c6de0c8ac}{max\+\_\+thread\+\_\+count}} ()
\begin{DoxyCompactList}\small\item\em Returns max count of thread \end{DoxyCompactList}\item 
static size\+\_\+t \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a2e1511aa4f13e5c7031a51c179bae483}{retired\+\_\+array\+\_\+capacity}} ()
\begin{DoxyCompactList}\small\item\em Returns capacity of retired pointer array \end{DoxyCompactList}\item 
{\footnotesize template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ }\\static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a79712978a537b908267d2d34180ed096}{retire}} (\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}, \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}(\texorpdfstring{$\ast$}{*}\mbox{\hyperlink{structfunc}{func}})(\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}))
\begin{DoxyCompactList}\small\item\em Retire pointer {\ttfamily p} with function {\ttfamily func} \end{DoxyCompactList}\item 
{\footnotesize template$<$class Disposer, typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ }\\static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a1615ca38fa7c1fc6ba8293d3db66f079}{retire}} (\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})
\begin{DoxyCompactList}\small\item\em Retire pointer {\ttfamily p} with functor of type {\ttfamily Disposer} \end{DoxyCompactList}\item 
static \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a0a5635876b53d5bec9f710bff2754f40}{scan\+\_\+type}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_aa9f8a90ed3e3e80c2809751c3f6cf49e}{get\+Scan\+Type}} ()
\begin{DoxyCompactList}\small\item\em Get current scan strategy \end{DoxyCompactList}\item 
static \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a2d895b45fad67ee610e8ae97a81ef44f}{is\+Used}} ()
\begin{DoxyCompactList}\small\item\em Checks if Hazard Pointer GC is constructed and may be used \end{DoxyCompactList}\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_ad952ddac472dcca9ba99bdbb1f053e41}{scan}} ()
\begin{DoxyCompactList}\small\item\em Forces SMR call for current thread \end{DoxyCompactList}\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a09ad9897d9c940f85afd1ae1ce2fe1d5}{force\+\_\+dispose}} ()
\begin{DoxyCompactList}\small\item\em Synonym for {\ttfamily \doxylink{classcds_1_1gc_1_1details_1_1generic___h_p_ad952ddac472dcca9ba99bdbb1f053e41}{scan()}} \end{DoxyCompactList}\item 
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_ac0f32afb47703e9e222d4042b5038a15}{statistics}} (\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a1a99d8be92594df644f44c1d9473073d}{stat}} \&st)
\begin{DoxyCompactList}\small\item\em Returns internal statistics \end{DoxyCompactList}\item 
static \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a1a99d8be92594df644f44c1d9473073d}{stat}} const \& \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a6e30145dc761362b657b62303918354d}{postmortem\+\_\+statistics}} ()
\begin{DoxyCompactList}\small\item\em Returns post-\/mortem statistics \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
\subsubsection*{template$<$typename TLSManager$>$\newline
class cds\+::gc\+::details\+::generic\+\_\+\+HP$<$ TLSManager $>$}
Hazard Pointer SMR (Safe Memory Reclamation) 

Implementation of classic Hazard Pointer SMR

Sources\+:
\begin{DoxyItemize}
\item \mbox{[}2002\mbox{]} Maged M.\+Michael "{}\+Safe memory reclamation for dynamic lock-\/freeobjects using atomic reads and writes"{}
\item \mbox{[}2003\mbox{]} Maged M.\+Michael "{}\+Hazard Pointers\+: Safe memory reclamation for lock-\/free objects"{}
\item \mbox{[}2004\mbox{]} Andrei Alexandrescy, Maged Michael "{}\+Lock-\/free Data Structures with Hazard Pointers"{}
\end{DoxyItemize}

Hazard Pointer SMR is a singleton. The main user-\/level part of Hazard Pointer schema is {\ttfamily cds\+::gc\+::\+HP} class and its nested classes. Before use any HP-\/related class you must initialize {\ttfamily HP} by contructing {\ttfamily cds\+::gc\+::\+HP} object in beginning of your {\ttfamily \doxylink{main-override-static_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}{main()}}. See \doxylink{defs.h_cds_how_to_use}{How to use} section for details how to apply SMR schema. 

\doxysubsection{成员类型定义说明}
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_a46811f5cefbd082e90adf5283f2013aa}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!atomic\_marked\_ptr@{atomic\_marked\_ptr}}
\index{atomic\_marked\_ptr@{atomic\_marked\_ptr}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{atomic\_marked\_ptr}{atomic\_marked\_ptr}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_a46811f5cefbd082e90adf5283f2013aa} 
template$<$typename TLSManager$>$ \\
template$<$typename Marked\+Ptr$>$ \\
using \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::atomic\+\_\+marked\+\_\+ptr = atomics\+::atomic$<$Marked\+Ptr$>$}



Atomic marked pointer 

\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_a5432e865039a7c74d1abbd06a5b7e414}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!atomic\_ref@{atomic\_ref}}
\index{atomic\_ref@{atomic\_ref}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{atomic\_ref}{atomic\_ref}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_a5432e865039a7c74d1abbd06a5b7e414} 
template$<$typename TLSManager$>$ \\
template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ \\
using \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::atomic\+\_\+ref = atomics\+::atomic$<$\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*}$>$}



Atomic reference 

\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_ab22ef3c09781316207dfb8fe9eb92243}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!atomic\_type@{atomic\_type}}
\index{atomic\_type@{atomic\_type}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{atomic\_type}{atomic\_type}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_ab22ef3c09781316207dfb8fe9eb92243} 
template$<$typename TLSManager$>$ \\
template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ \\
using \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::atomic\+\_\+type = atomics\+::atomic$<$\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$}



Atomic type 

\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_ad6a8c7d734afa6d388436fb94c9c348d}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!guarded\_pointer@{guarded\_pointer}}
\index{guarded\_pointer@{guarded\_pointer}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{guarded\_pointer}{guarded\_pointer}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_ad6a8c7d734afa6d388436fb94c9c348d} 
template$<$typename TLSManager$>$ \\
typedef hp\+::details\+::hazard\+\_\+ptr \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::guarded\+\_\+pointer}



Native guarded pointer type 

\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_aab46f6b24e3fe68cdf14c5191f906f91}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!not\_enough\_hazard\_ptr\_exception@{not\_enough\_hazard\_ptr\_exception}}
\index{not\_enough\_hazard\_ptr\_exception@{not\_enough\_hazard\_ptr\_exception}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{not\_enough\_hazard\_ptr\_exception}{not\_enough\_hazard\_ptr\_exception}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_aab46f6b24e3fe68cdf14c5191f906f91} 
template$<$typename TLSManager$>$ \\
typedef \mbox{\hyperlink{classcds_1_1gc_1_1hp_1_1details_1_1not__enough__hazard__ptr}{hp\+::details\+::not\+\_\+enough\+\_\+hazard\+\_\+ptr}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::not\+\_\+enough\+\_\+hazard\+\_\+ptr\+\_\+exception}



Exception "{}\+Not enough Hazard Pointer"{} 

\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_a1a99d8be92594df644f44c1d9473073d}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!stat@{stat}}
\index{stat@{stat}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{stat}{stat}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_a1a99d8be92594df644f44c1d9473073d} 
template$<$typename TLSManager$>$ \\
typedef \mbox{\hyperlink{structcds_1_1gc_1_1hp_1_1details_1_1stat}{hp\+::details\+::stat}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::stat}



Internal statistics 

\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_a0673102745e45e2a8f1207d9b66c710f}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!tls\_manager@{tls\_manager}}
\index{tls\_manager@{tls\_manager}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{tls\_manager}{tls\_manager}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_a0673102745e45e2a8f1207d9b66c710f} 
template$<$typename TLSManager$>$ \\
using \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::tls\+\_\+manager = TLSManager}



TLS manager type 



\doxysubsection{成员枚举类型说明}
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_a0a5635876b53d5bec9f710bff2754f40}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!scan\_type@{scan\_type}}
\index{scan\_type@{scan\_type}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{scan\_type}{scan\_type}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_a0a5635876b53d5bec9f710bff2754f40} 
template$<$typename TLSManager$>$ \\
enum class \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a0a5635876b53d5bec9f710bff2754f40}{cds\+::gc\+::details\+::generic\+\_\+\+HP\+::scan\+\_\+type}}\hspace{0.3cm}{\ttfamily [strong]}}



{\ttfamily \doxylink{classcds_1_1gc_1_1details_1_1generic___h_p_ad952ddac472dcca9ba99bdbb1f053e41}{scan()}} type 

\begin{DoxyEnumFields}[2]{枚举值}
\raisebox{\heightof{T}}[0pt][0pt]{\index{classic@{classic}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!classic@{classic}}}\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_a0a5635876b53d5bec9f710bff2754f40af3d64714d1f6e7f71558d4252e84ab58}\label{classcds_1_1gc_1_1details_1_1generic___h_p_a0a5635876b53d5bec9f710bff2754f40af3d64714d1f6e7f71558d4252e84ab58} 
classic&classic scan as described in Michael\textquotesingle{}s papers \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{inplace@{inplace}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!inplace@{inplace}}}\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_a0a5635876b53d5bec9f710bff2754f40a01c945aca5a24bfe4f8568c2619939ec}\label{classcds_1_1gc_1_1details_1_1generic___h_p_a0a5635876b53d5bec9f710bff2754f40a01c945aca5a24bfe4f8568c2619939ec} 
inplace&inplace scan without allocation \\
\hline

\end{DoxyEnumFields}


\doxysubsection{构造及析构函数说明}
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_a2cc2c0d2f12fb490b172b3ca19b62b76}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!generic\_HP@{generic\_HP}}
\index{generic\_HP@{generic\_HP}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{generic\_HP()}{generic\_HP()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_a2cc2c0d2f12fb490b172b3ca19b62b76} 
template$<$typename TLSManager$>$ \\
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::generic\+\_\+\+HP (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{n\+Hazard\+Ptr\+Count}{ = {\ttfamily 0}, }\item[{size\+\_\+t}]{n\+Max\+Thread\+Count}{ = {\ttfamily 0}, }\item[{size\+\_\+t}]{n\+Max\+Retired\+Ptr\+Count}{ = {\ttfamily 0}, }\item[{\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a0a5635876b53d5bec9f710bff2754f40}{scan\+\_\+type}}}]{n\+Scan\+Type}{ = {\ttfamily \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a0a5635876b53d5bec9f710bff2754f40a01c945aca5a24bfe4f8568c2619939ec}{scan\+\_\+type\+::inplace}}}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Initializes HP singleton 

The constructor initializes Hazard Pointer SMR singleton with passed parameters. If the instance does not yet exist then the function creates the instance. Otherwise it does nothing.

The Michael\textquotesingle{}s HP reclamation schema depends of three parameters\+:
\begin{DoxyItemize}
\item {\ttfamily n\+Hazard\+Ptr\+Count} -\/ hazard pointer count per thread. Usually it is small number (up to 10) depending from the data structure algorithms. If {\ttfamily n\+Hazard\+Ptr\+Count} = 0, the defaul value 8 is used
\item {\ttfamily n\+Max\+Thread\+Count} -\/ max count of thread with using Hazard Pointer GC in your application. Default is 100.
\item {\ttfamily n\+Max\+Retired\+Ptr\+Count} -\/ capacity of array of retired pointers for each thread. Must be greater than {\ttfamily  n\+Hazard\+Ptr\+Count \texorpdfstring{$\ast$}{*} n\+Max\+Thread\+Count }. Default is {\ttfamily 2 \texorpdfstring{$\ast$}{*} n\+Hazard\+Ptr\+Count \texorpdfstring{$\ast$}{*} n\+Max\+Thread\+Count }. 
\end{DoxyItemize}
\begin{DoxyParams}{参数}
{\em n\+Hazard\+Ptr\+Count} & Hazard pointer count per thread  \\
\hline
{\em n\+Max\+Thread\+Count} & Max count of simultaneous working thread in your application  \\
\hline
{\em n\+Max\+Retired\+Ptr\+Count} & Capacity of the array of retired objects for the thread  \\
\hline
{\em n\+Scan\+Type} & Scan type (see {\ttfamily \doxylink{classcds_1_1gc_1_1details_1_1generic___h_p_a0a5635876b53d5bec9f710bff2754f40}{scan\+\_\+type}} enum) \\
\hline
\end{DoxyParams}
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_a45ba3ae28260bfa1a0240230186b9832}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!````~generic\_HP@{\texorpdfstring{$\sim$}{\string~}generic\_HP}}
\index{````~generic\_HP@{\texorpdfstring{$\sim$}{\string~}generic\_HP}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}generic\_HP()}{\string~generic\_HP()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_a45ba3ae28260bfa1a0240230186b9832} 
template$<$typename TLSManager$>$ \\
\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::\texorpdfstring{$\sim$}{\string~}\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{generic\+\_\+\+HP}} (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Terminates GC singleton 

The destructor destroys HP global object. After calling of this function you may {\bfseries{NOT}} use CDS data structures based on {\ttfamily cds\+::gc\+::\+HP}. Usually, HP object is destroyed at the end of your {\ttfamily \doxylink{main-override-static_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}{main()}}. 

\doxysubsection{成员函数说明}
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_ad1fe48e45eeefc095692d7514acb3387}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!check\_available\_guards@{check\_available\_guards}}
\index{check\_available\_guards@{check\_available\_guards}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{check\_available\_guards()}{check\_available\_guards()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_ad1fe48e45eeefc095692d7514acb3387} 
template$<$typename TLSManager$>$ \\
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::check\+\_\+available\+\_\+guards (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{n\+Count\+Needed}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Checks that required hazard pointer count {\ttfamily n\+Count\+Needed} is less or equal then max hazard pointer count 

If {\ttfamily  n\+Count\+Needed \texorpdfstring{$>$}{>} get\+\_\+hazard\+\_\+ptr\+\_\+count()} then the exception {\ttfamily not\+\_\+enough\+\_\+hazard\+\_\+ptr} is thrown \Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_a09ad9897d9c940f85afd1ae1ce2fe1d5}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!force\_dispose@{force\_dispose}}
\index{force\_dispose@{force\_dispose}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{force\_dispose()}{force\_dispose()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_a09ad9897d9c940f85afd1ae1ce2fe1d5} 
template$<$typename TLSManager$>$ \\
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::force\+\_\+dispose (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Synonym for {\ttfamily \doxylink{classcds_1_1gc_1_1details_1_1generic___h_p_ad952ddac472dcca9ba99bdbb1f053e41}{scan()}} 

\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_aa9f8a90ed3e3e80c2809751c3f6cf49e}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!getScanType@{getScanType}}
\index{getScanType@{getScanType}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{getScanType()}{getScanType()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_aa9f8a90ed3e3e80c2809751c3f6cf49e} 
template$<$typename TLSManager$>$ \\
static \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a0a5635876b53d5bec9f710bff2754f40}{scan\+\_\+type}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::get\+Scan\+Type (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Get current scan strategy 

\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_a2d895b45fad67ee610e8ae97a81ef44f}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!isUsed@{isUsed}}
\index{isUsed@{isUsed}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{isUsed()}{isUsed()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_a2d895b45fad67ee610e8ae97a81ef44f} 
template$<$typename TLSManager$>$ \\
static \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::is\+Used (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Checks if Hazard Pointer GC is constructed and may be used 

\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_a302d6710c076873d8dd0bd751de471a3}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!max\_hazard\_count@{max\_hazard\_count}}
\index{max\_hazard\_count@{max\_hazard\_count}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{max\_hazard\_count()}{max\_hazard\_count()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_a302d6710c076873d8dd0bd751de471a3} 
template$<$typename TLSManager$>$ \\
static size\+\_\+t \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::max\+\_\+hazard\+\_\+count (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Returns max Hazard Pointer count 

\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_afbb7482607e3e64e5989ec9c6de0c8ac}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!max\_thread\_count@{max\_thread\_count}}
\index{max\_thread\_count@{max\_thread\_count}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{max\_thread\_count()}{max\_thread\_count()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_afbb7482607e3e64e5989ec9c6de0c8ac} 
template$<$typename TLSManager$>$ \\
static size\+\_\+t \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::max\+\_\+thread\+\_\+count (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Returns max count of thread 

\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_a6e30145dc761362b657b62303918354d}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!postmortem\_statistics@{postmortem\_statistics}}
\index{postmortem\_statistics@{postmortem\_statistics}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{postmortem\_statistics()}{postmortem\_statistics()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_a6e30145dc761362b657b62303918354d} 
template$<$typename TLSManager$>$ \\
static \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a1a99d8be92594df644f44c1d9473073d}{stat}} const  \& \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::postmortem\+\_\+statistics (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Returns post-\/mortem statistics 

Post-\/mortem statistics is gathered in the {\ttfamily HP} object destructor and can be accessible after destructing the global {\ttfamily HP} object.

\begin{DoxyNote}{注解}
Internal statistics is available only if you compile {\ttfamily libcds} and your program with {\ttfamily -\/DCDS\+\_\+\+ENABLE\+\_\+\+HPSTAT}.
\end{DoxyNote}
Usage\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ \mbox{\hyperlink{main-override-static_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}{main}}()}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{namespacecds_ae14cc7bb67e75ea6ed18a82f3380d2c0}{cds::Initialize}}();}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Initialize\ HP\ SMR}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacecds_1_1gc_af0523881f089593a7559d194ee2b5dd9}{cds::gc::HP}}\ hp;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{comment}{//\ deal\ with\ HP-\/based\ data\ structured}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{comment}{//\ ...}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ HP\ object\ destroyed}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Get\ total\ post-\/mortem\ statistics}}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a1a99d8be92594df644f44c1d9473073d}{cds::gc::HP::stat}}\ \textcolor{keyword}{const}\&\ st\ =\ \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a6e30145dc761362b657b62303918354d}{cds::gc::HP::postmortem\_statistics}}();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{printf_8h_aee3ed3a831f25f07e7be3919fff2203a}{printf}}(\ \textcolor{stringliteral}{"{}HP\ statistics:\(\backslash\)n"{}}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ \ thread\ count\ \ \ \ \ \ \ \ \ \ \ =\ \%llu\(\backslash\)n"{}}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ \ guard\ allocated\ \ \ \ \ \ \ \ =\ \%llu\(\backslash\)n"{}}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ \ guard\ freed\ \ \ \ \ \ \ \ \ \ \ \ =\ \%llu\(\backslash\)n"{}}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ \ retired\ data\ count\ \ \ \ \ =\ \%llu\(\backslash\)n"{}}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ \ free\ data\ count\ \ \ \ \ \ \ \ =\ \%llu\(\backslash\)n"{}}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ \ scan()\ call\ count\ \ \ \ \ \ =\ \%llu\(\backslash\)n"{}}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ \ help\_scan()\ call\ count\ =\ \%llu\(\backslash\)n"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ st.\mbox{\hyperlink{structcds_1_1gc_1_1hp_1_1details_1_1stat_abc474710de827175f1323483d55aca29}{thread\_rec\_count}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ st.\mbox{\hyperlink{structcds_1_1gc_1_1hp_1_1details_1_1stat_a1c4964b58a400c91a8f1d5af73ee10ea}{guard\_allocated}},\ st.\mbox{\hyperlink{structcds_1_1gc_1_1hp_1_1details_1_1stat_ab6f59061867c793f877a667fce28708c}{guard\_freed}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ st.\mbox{\hyperlink{structcds_1_1gc_1_1hp_1_1details_1_1stat_add0a3db50f538fc2407e80171fafd6e6}{retired\_count}},\ st.\mbox{\hyperlink{structcds_1_1gc_1_1hp_1_1details_1_1stat_ab64008d9d287aedae687f86ed1cfdec3}{free\_count}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ st.\mbox{\hyperlink{structcds_1_1gc_1_1hp_1_1details_1_1stat_aaf3d406a96b8e0894b65a9973cb28725}{scan\_count}},\ st.\mbox{\hyperlink{structcds_1_1gc_1_1hp_1_1details_1_1stat_ae9f5389202cdbd86ac99848c13294fde}{help\_scan\_count}}}
\DoxyCodeLine{\ \ \ \ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{namespacecds_a9ca275d587d2b0b11ded25220718a049}{cds::Terminate}}();}
\DoxyCodeLine{\}}

\end{DoxyCode}
 \Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_a1615ca38fa7c1fc6ba8293d3db66f079}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!retire@{retire}}
\index{retire@{retire}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{retire()}{retire()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_a1615ca38fa7c1fc6ba8293d3db66f079} 
template$<$typename TLSManager$>$ \\
template$<$class Disposer, typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ \\
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::retire (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*}}]{p}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Retire pointer {\ttfamily p} with functor of type {\ttfamily Disposer} 

The function places pointer {\ttfamily p} to array of pointers ready for removing. (so called retired pointer array). The pointer can be safely removed when no hazard pointer points to it.

Deleting the pointer is an invocation of some object of type {\ttfamily Disposer}; the interface of {\ttfamily Disposer} is\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\textcolor{keyword}{struct\ }disposer\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ operator()(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ \ \ \ ;\ \ \ \textcolor{comment}{//\ disposing\ operator}}
\DoxyCodeLine{\};}

\end{DoxyCode}
 Since the functor call can happen at any time after {\ttfamily \doxylink{classcds_1_1gc_1_1details_1_1generic___h_p_a79712978a537b908267d2d34180ed096}{retire()}} call, additional restrictions are imposed to {\ttfamily Disposer} type\+:
\begin{DoxyItemize}
\item it should be stateless functor
\item it should be default-\/constructible
\item the result of functor call with argument {\ttfamily p} should not depend on where the functor will be called.
\end{DoxyItemize}

\begin{DoxyParagraph}{Examples\+:}
Operator {\ttfamily delete} functor\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\textcolor{keyword}{struct\ }disposer\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ operator\ ()(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ How\ to\ call\ HP::retire\ method}}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ ...\ use\ p\ in\ lock-\/free\ manner}}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a79712978a537b908267d2d34180ed096}{cds::gc::HP::retire<disposer>}}(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ ;\ \ \ \textcolor{comment}{//\ place\ p\ to\ retired\ pointer\ array\ of\ HP\ GC}}

\end{DoxyCode}

\end{DoxyParagraph}
\doxylink{struct_functor}{Functor} based on {\ttfamily std\+::allocator} \+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Alloc\ =\ std::allocator<\textcolor{keywordtype}{int}>\ >}
\DoxyCodeLine{\textcolor{keyword}{struct\ }disposer\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ operator()(\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ Alloc::templare\ rebind<T>::other\ alloc\_t;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ alloc\_t\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}};}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}.destroy(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ );}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}.deallocate(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ 1\ );}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\};}

\end{DoxyCode}
 \Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_a79712978a537b908267d2d34180ed096}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!retire@{retire}}
\index{retire@{retire}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{retire()}{retire()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_a79712978a537b908267d2d34180ed096} 
template$<$typename TLSManager$>$ \\
template$<$typename \mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}}$>$ \\
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::retire (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_tutorial__sparse__example_8cpp_af639fb96631ba0018f0b2259fc95edfb}{T}} \texorpdfstring{$\ast$}{*}}]{p}{, }\item[{\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}(\texorpdfstring{$\ast$}{*}}]{func~}{)(\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*})}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Retire pointer {\ttfamily p} with function {\ttfamily func} 

The function places pointer {\ttfamily p} to array of pointers ready for removing. (so called retired pointer array). The pointer can be safely removed when no hazard pointer points to it. {\ttfamily func} is a disposer\+: when {\ttfamily p} can be safely removed, {\ttfamily func} is called. \Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_a2e1511aa4f13e5c7031a51c179bae483}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!retired\_array\_capacity@{retired\_array\_capacity}}
\index{retired\_array\_capacity@{retired\_array\_capacity}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{retired\_array\_capacity()}{retired\_array\_capacity()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_a2e1511aa4f13e5c7031a51c179bae483} 
template$<$typename TLSManager$>$ \\
static size\+\_\+t \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::retired\+\_\+array\+\_\+capacity (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Returns capacity of retired pointer array 

\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_ad952ddac472dcca9ba99bdbb1f053e41}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!scan@{scan}}
\index{scan@{scan}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{scan()}{scan()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_ad952ddac472dcca9ba99bdbb1f053e41} 
template$<$typename TLSManager$>$ \\
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::scan (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Forces SMR call for current thread 

Usually, this function should not be called directly. \Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_a6c30525f9fade032e64785e8fe9e3687}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!set\_memory\_allocator@{set\_memory\_allocator}}
\index{set\_memory\_allocator@{set\_memory\_allocator}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{set\_memory\_allocator()}{set\_memory\_allocator()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_a6c30525f9fade032e64785e8fe9e3687} 
template$<$typename TLSManager$>$ \\
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::set\+\_\+memory\+\_\+allocator (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}(\texorpdfstring{$\ast$}{*}}]{alloc\+\_\+func~}{)(size\+\_\+t \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}), }\item[{\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}}(\texorpdfstring{$\ast$}{*}}]{free\+\_\+func~}{)(\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Set memory management functions 

\begin{DoxyNote}{注解}
This function may be called {\bfseries{BEFORE}} creating an instance of Hazard Pointer SMR
\end{DoxyNote}
SMR object allocates some memory for thread-\/specific data and for creating SMR object. By default, a standard {\ttfamily new} and {\ttfamily delete} operators are used for this. 
\begin{DoxyParams}{参数}
{\em alloc\+\_\+func} & {\ttfamily \doxylink{mimalloc-override_8h_a99aa8fd9f4831e1b0fa9e1cdcde3e249}{malloc()}} function  \\
\hline
{\em free\+\_\+func} & {\ttfamily \doxylink{mimalloc-override_8h_a9d4b5df3530d1bc733070a4669ba6ebc}{free()}} function \\
\hline
\end{DoxyParams}
\Hypertarget{classcds_1_1gc_1_1details_1_1generic___h_p_ac0f32afb47703e9e222d4042b5038a15}\index{cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}!statistics@{statistics}}
\index{statistics@{statistics}!cds::gc::details::generic\_HP$<$ TLSManager $>$@{cds::gc::details::generic\_HP$<$ TLSManager $>$}}
\doxysubsubsection{\texorpdfstring{statistics()}{statistics()}}
{\footnotesize\ttfamily \label{classcds_1_1gc_1_1details_1_1generic___h_p_ac0f32afb47703e9e222d4042b5038a15} 
template$<$typename TLSManager$>$ \\
static \mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p}{cds\+::gc\+::details\+::generic\+\_\+\+HP}}$<$ TLSManager $>$\+::statistics (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcds_1_1gc_1_1details_1_1generic___h_p_a1a99d8be92594df644f44c1d9473073d}{stat}} \&}]{st}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Returns internal statistics 

The function clears {\ttfamily st} before gathering statistics.

\begin{DoxyNote}{注解}
Internal statistics is available only if you compile {\ttfamily libcds} and your program with {\ttfamily -\/DCDS\+\_\+\+ENABLE\+\_\+\+HPSTAT}. 
\end{DoxyNote}


该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/libcds/cds/gc/\mbox{\hyperlink{hp_8h}{hp.\+h}}\end{DoxyCompactItemize}
