\chapter{Enums}
\hypertarget{md_external_2reflect-cpp_2docs_2enums}{}\label{md_external_2reflect-cpp_2docs_2enums}\index{Enums@{Enums}}
\label{md_external_2reflect-cpp_2docs_2enums_autotoc_md571}%
\Hypertarget{md_external_2reflect-cpp_2docs_2enums_autotoc_md571}%


reflect-\/cpp supports scoped enumerations. They can either come in the form of normal enumerations or flag enums.\hypertarget{md_external_2reflect-cpp_2docs_2enums_autotoc_md572}{}\doxysection{\texorpdfstring{Normal enumerations}{Normal enumerations}}\label{md_external_2reflect-cpp_2docs_2enums_autotoc_md572}
Example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{external_2magic__enum_2example_2example_8cpp_a692f5062ca261bdb3a62a63faddfd27f}{Color}}\ \{\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203cabda9643ac6601722a28f238714274da4}{red}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aef30e4e3dccbffce99b7509d5366faef}{green}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab4fcc6ff520ae4d9de259c8468a5cd93}{blue}},\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203cad487dd0b55dfcacdd920ccbdaeafa351}{yellow}}\ \};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{struct\ }Circle\ \{}
\DoxyCodeLine{\ \ \textcolor{keywordtype}{float}\ radius;}
\DoxyCodeLine{\ \ \mbox{\hyperlink{external_2magic__enum_2example_2example_8cpp_a692f5062ca261bdb3a62a63faddfd27f}{Color}}\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203c}{color}};}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ circle\ =\ Circle\{.radius\ =\ 2.0,\ .color\ =\ Color::green\};}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{namespacerfl_1_1json_af39a23539424555b8c970d12a58e547f}{rfl::json::write}}(circle);}

\end{DoxyCode}


This results in the following JSON string\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\{"{}radius"{}:2.0,"{}color"{}:"{}green"{}\}}

\end{DoxyCode}


However, some limitations apply\+:


\begin{DoxyEnumerate}
\item They must be scoped enumerations.


\begin{DoxyCode}{0}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{enum\ class}\ Color1\ \{\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203cabda9643ac6601722a28f238714274da4}{red}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aef30e4e3dccbffce99b7509d5366faef}{green}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab4fcc6ff520ae4d9de259c8468a5cd93}{blue}},\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203cad487dd0b55dfcacdd920ccbdaeafa351}{yellow}}\ \};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{enum\ struct}\ Color2\ \{\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203cabda9643ac6601722a28f238714274da4}{red}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aef30e4e3dccbffce99b7509d5366faef}{green}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab4fcc6ff520ae4d9de259c8468a5cd93}{blue}},\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203cad487dd0b55dfcacdd920ccbdaeafa351}{yellow}}\ \};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{enum}\ Color3\ \{\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203cabda9643ac6601722a28f238714274da4}{red}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aef30e4e3dccbffce99b7509d5366faef}{green}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab4fcc6ff520ae4d9de259c8468a5cd93}{blue}},\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203cad487dd0b55dfcacdd920ccbdaeafa351}{yellow}}\ \};}

\end{DoxyCode}

\item Enum values must be in the range {\ttfamily \mbox{[}RFL\+\_\+\+ENUM\+\_\+\+RANGE\+\_\+\+MIN, RFL\+\_\+\+ENUM\+\_\+\+RANGE\+\_\+\+MAX\mbox{]}}. If the range is not specified, the default range is {\ttfamily \mbox{[}0, 127\mbox{]}}.
\begin{DoxyItemize}
\item You can specify a custom range for the all enum values by defining {\ttfamily RFL\+\_\+\+ENUM\+\_\+\+RANGE\+\_\+\+MIN} and {\ttfamily RFL\+\_\+\+ENUM\+\_\+\+RANGE\+\_\+\+MAX} before including the reflect-\/cpp header\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ RFL\_ENUM\_RANGE\_MIN\ -\/128}}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ RFL\_ENUM\_RANGE\_MAX\ 128}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{rfl_8hpp}{rfl.hpp}}>}}

\end{DoxyCode}

\item You can specify a custom range for a specific enum by defining the specialization {\ttfamily \doxylink{structrfl_1_1config_1_1enum__range}{rfl\+::config\+::enum\+\_\+range}} for the enum type \+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{external_2magic__enum_2example_2example_8cpp_a692f5062ca261bdb3a62a63faddfd27f}{Color}}\ \{\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203cad487dd0b55dfcacdd920ccbdaeafa351}{yellow}}\ =\ 200,\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203cabb7aedfa61007447dd6efaf9f37641e3}{purple}}\ =\ 300,\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203cafe01d67a002dfa0f3ac084298142eccd}{orange}}\ =\ 400\ \};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}\ <>}
\DoxyCodeLine{\textcolor{keyword}{struct\ }\mbox{\hyperlink{structrfl_1_1config_1_1enum__range}{rfl::config::enum\_range}}<\mbox{\hyperlink{external_2magic__enum_2example_2example_8cpp_a692f5062ca261bdb3a62a63faddfd27f}{Color}}>\ \{}
\DoxyCodeLine{\ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structrfl_1_1config_1_1enum__range_a0a71411cbde29fe2cbc61cdbc4f9c435}{min}}\ =\ 200;}
\DoxyCodeLine{\ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structrfl_1_1config_1_1enum__range_a2c8d7b8e1b05e3c4c32956f63b0f5682}{max}}\ =\ 400;}
\DoxyCodeLine{\};}

\end{DoxyCode}

\end{DoxyItemize}
\end{DoxyEnumerate}\hypertarget{md_external_2reflect-cpp_2docs_2enums_autotoc_md573}{}\doxysection{\texorpdfstring{Flag enums}{Flag enums}}\label{md_external_2reflect-cpp_2docs_2enums_autotoc_md573}
Sometimes the enumerations are not mutually exclusive -\/ sticking with the metaphor of colors, it is perfectly possible for things to have more than one color. C++ programmers sometimes like to model this using a flag enum.

Flag enums work as follows\+:


\begin{DoxyEnumerate}
\item The bitwise OR operator must be defined on them. If an enum has the bitwise OR operator defined on it, it will be treated as a flag enum.
\item The most important values of the enum must be 1 or 2\texorpdfstring{$^\wedge$}{\string^}N, N being a positive integer (in other words 1,2,4,8,16,32,...).
\end{DoxyEnumerate}

Example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ The\ important\ colors\ must\ be\ 1\ or\ 2\string^N}}
\DoxyCodeLine{\textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{external_2magic__enum_2example_2example_8cpp_a692f5062ca261bdb3a62a63faddfd27f}{Color}}\ \{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203cabda9643ac6601722a28f238714274da4}{red}}\ =\ 256,}
\DoxyCodeLine{\ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aef30e4e3dccbffce99b7509d5366faef}{green}}\ =\ 512,}
\DoxyCodeLine{\ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab4fcc6ff520ae4d9de259c8468a5cd93}{blue}}\ =\ 1024,}
\DoxyCodeLine{\ \ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203cad487dd0b55dfcacdd920ccbdaeafa351}{yellow}}\ =\ 2048,}
\DoxyCodeLine{\ \ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203cafe01d67a002dfa0f3ac084298142eccd}{orange}}\ =\ (256\ |\ 2048)\ \ \textcolor{comment}{//\ red\ +\ yellow\ =\ orange}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ The\ bitwise\ OR\ operator\ must\ be\ defined\ -\/\ this\ is\ how\ reflect-\/cpp\ knows\ that}}
\DoxyCodeLine{\textcolor{comment}{//\ this\ is\ a\ flag\ enum.}}
\DoxyCodeLine{\textcolor{keyword}{inline}\ \mbox{\hyperlink{external_2magic__enum_2example_2example_8cpp_a692f5062ca261bdb3a62a63faddfd27f}{Color}}\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a75704297550524aae978bb51b15fbf1b}{operator|}}(\mbox{\hyperlink{external_2magic__enum_2example_2example_8cpp_a692f5062ca261bdb3a62a63faddfd27f}{Color}}\ c1,\ \mbox{\hyperlink{external_2magic__enum_2example_2example_8cpp_a692f5062ca261bdb3a62a63faddfd27f}{Color}}\ c2)\ \{}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{external_2magic__enum_2example_2example_8cpp_a692f5062ca261bdb3a62a63faddfd27f}{Color}}\textcolor{keyword}{>}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(c1)\ |\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(c2));}
\DoxyCodeLine{\}}

\end{DoxyCode}


In this particular example, the important colors red, green, blue and yellow are all in the form of 2\texorpdfstring{$^\wedge$}{\string^}N. Other colors are ok as well, if they are expressed as combinations of the 2\texorpdfstring{$^\wedge$}{\string^}\+N-\/colors.

When something is a flag enum, then you can also do this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ circle\ =}
\DoxyCodeLine{\ \ \ \ Circle\{.radius\ =\ 2.0,\ .color\ =\ Color::blue\ |\ Color::green\};}

\end{DoxyCode}


Which will then be represented as follows\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\{"{}radius"{}:2.0,"{}color"{}:"{}blue|green"{}\}}

\end{DoxyCode}


Using orange is fine as well\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ circle\ =}
\DoxyCodeLine{\ \ \ \ Circle\{.radius\ =\ 2.0,\ .color\ =\ Color::orange\};}

\end{DoxyCode}


But it will be represented in terms of the base colors (which are in the form 2\texorpdfstring{$^\wedge$}{\string^}N)\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\{"{}radius"{}:2.0,"{}color"{}:"{}red|yellow"{}\}}

\end{DoxyCode}


You can also combine orange with another color\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ circle\ =}
\DoxyCodeLine{\ \ \ \ Circle\{.radius\ =\ 2.0,\ .color\ =\ Color::blue\ |\ Color::orange\};}

\end{DoxyCode}


Which will result in this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\{"{}radius"{}:2.0,"{}color"{}:"{}red|blue|yellow"{}\}}

\end{DoxyCode}
\hypertarget{md_external_2reflect-cpp_2docs_2enums_autotoc_md574}{}\doxysection{\texorpdfstring{What happens if an enum cannot be matched?}{What happens if an enum cannot be matched?}}\label{md_external_2reflect-cpp_2docs_2enums_autotoc_md574}
If an enum cannot be matched, it will be written as an integer. This works for both normal enums as well as flag enums.

For instance, if you use the {\ttfamily \doxylink{external_2magic__enum_2example_2example_8cpp_a692f5062ca261bdb3a62a63faddfd27f}{Color}} flag enum as described in the previous section, you can do something like this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Enums\ are\ not\ supposed\ to\ be\ used\ like\ this,\ but\ it\ is\ defined\ behavior\ for\ scoped\ enumerations.}}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ circle\ =\ Circle\{.radius\ =\ 2.0,\ .color\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{external_2magic__enum_2example_2example_8cpp_a692f5062ca261bdb3a62a63faddfd27f}{Color}}\textcolor{keyword}{>}(10000)\};}

\end{DoxyCode}


This will be represented as follows\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\{"{}radius"{}:2.0,"{}color"{}:"{}16|red|green|blue|8192"{}\}}

\end{DoxyCode}


This works, because 16 + 256 + 512 + 1024 + 8192 = 10000. Flag enums are {\itshape always} represented in terms of 2\texorpdfstring{$^\wedge$}{\string^}\+N-\/numbers.\hypertarget{md_external_2reflect-cpp_2docs_2enums_autotoc_md575}{}\doxysection{\texorpdfstring{General-\/purpose enumeration utilities}{General-\/purpose enumeration utilities}}\label{md_external_2reflect-cpp_2docs_2enums_autotoc_md575}
reflect-\/cpp also allows you to directly convert between enumerator values and strings\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{external_2magic__enum_2example_2example_8cpp_a692f5062ca261bdb3a62a63faddfd27f}{Color}}\ \{\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203cabda9643ac6601722a28f238714274da4}{red}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aef30e4e3dccbffce99b7509d5366faef}{green}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab4fcc6ff520ae4d9de259c8468a5cd93}{blue}}\ \};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{auto}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}}\ =\ \mbox{\hyperlink{namespacerfl_a41b4390798709a48210689d0f7e94e30}{rfl::enum\_to\_string}}(Color::red);\ \ \ \ \ \ \ \textcolor{comment}{//\ "{}red"{}}}
\DoxyCodeLine{\textcolor{keyword}{auto}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abe8e049f756b5ba547bda825af81b645}{value}}\ =\ \mbox{\hyperlink{namespacerfl_aa726030311286ff78fb683688312747a}{rfl::string\_to\_enum<Color>}}(\textcolor{stringliteral}{"{}red"{}});\ \ \ \ \textcolor{comment}{//\ result\ containing\ Color::red}}
\DoxyCodeLine{\textcolor{keyword}{auto}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abe8e049f756b5ba547bda825af81b645}{value}}\ =\ \mbox{\hyperlink{namespacerfl_aa726030311286ff78fb683688312747a}{rfl::string\_to\_enum<Color>}}(\textcolor{stringliteral}{"{}greem"{}});\ \ \textcolor{comment}{//\ error\ result}}

\end{DoxyCode}


This works with normal and flag enums, and behaves just like serialization of types containing enumerations as described above.

You can also inspect the defined enumerators of an enum type (including at compile-\/time)\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{external_2magic__enum_2example_2example_8cpp_a692f5062ca261bdb3a62a63faddfd27f}{Color}}\ \{\ \mbox{\hyperlink{runtime_2spdlog_2include_2spdlog_2fmt_2bundled_2color_8h_a80d1dc5f416b97f92939a4166d41203cabda9643ac6601722a28f238714274da4}{red}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aef30e4e3dccbffce99b7509d5366faef}{green}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ab4fcc6ff520ae4d9de259c8468a5cd93}{blue}}\ \};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ This\ produces\ a\ named\ tuple\ where\ the\ keys\ are\ "{}red"{},\ "{}green"{},\ and\ "{}blue"{},\ with\ corresponding}}
\DoxyCodeLine{\textcolor{comment}{//\ values\ Color::red,\ Color::green,\ and\ Color::blue.}}
\DoxyCodeLine{\textcolor{keyword}{auto}\ enumerators\_named\_tuple\ =\ \mbox{\hyperlink{namespacerfl_ab4b348f6c5ab4777fc4b8c4041173921}{rfl::get\_enumerators<Color>}}();}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ You\ can\ iterate\ over\ the\ enumerators\ like\ this:}}
\DoxyCodeLine{enumerators\_named\_tuple.apply([\&](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ field)\ \{}
\DoxyCodeLine{\ \ \textcolor{comment}{//\ field.name()\ will\ be\ "{}red"{},\ "{}green"{},\ "{}blue"{}}}
\DoxyCodeLine{\ \ \textcolor{comment}{//\ field.value()\ will\ be\ Color::red,\ Color::green,\ Color::blue}}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ This\ produces\ the\ same\ data\ as\ an\ std::array\ containing\ std::pair<std::string\_view,\ Color>,}}
\DoxyCodeLine{\textcolor{comment}{//\ which\ can\ be\ inspected\ at\ compile-\/time.}}
\DoxyCodeLine{\textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ enumerator\_array\ =\ \mbox{\hyperlink{namespacerfl_a6f93e733506dbf340e0cd1ba17c29072}{rfl::get\_enumerator\_array<Color>}}();}

\end{DoxyCode}


In case it\textquotesingle{}s more convenient to get the enumerator values as values of the enum\textquotesingle{}s underlying type rather than values of the enum type itself, there is also {\ttfamily \doxylink{namespacerfl_a0b4b323c9efdc86aad656af503c416eb}{rfl\+::get\+\_\+underlying\+\_\+enumerators}\texorpdfstring{$<$}{<}Enum\+Type\texorpdfstring{$>$}{>}()} and {\ttfamily \doxylink{namespacerfl_a369c9528ec00297e9d71d04f84c7f906}{rfl\+::get\+\_\+underlying\+\_\+enumerator\+\_\+array}\texorpdfstring{$<$}{<}Enum\+Type\texorpdfstring{$>$}{>}()}. 