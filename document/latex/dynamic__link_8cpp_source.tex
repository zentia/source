\doxysection{dynamic\+\_\+link.\+cpp}
\hypertarget{dynamic__link_8cpp_source}{}\label{dynamic__link_8cpp_source}\index{external/taskflow/3rd-\/party/tbb/src/tbb/dynamic\_link.cpp@{external/taskflow/3rd-\/party/tbb/src/tbb/dynamic\_link.cpp}}
\mbox{\hyperlink{dynamic__link_8cpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{dynamic__link_8h}{dynamic\_link.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{tbb__config_8h}{tbb/tbb\_config.h}}"{}}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{comment}{/*}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ \ \ \ This\ file\ is\ used\ by\ both\ TBB\ and\ OpenMP\ RTL.\ Do\ not\ use\ \_\_TBB\_ASSERT()\ macro}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ \ \ \ and\ runtime\_warning()\ function\ because\ they\ are\ not\ available\ in\ OpenMP.\ Use}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ \ \ \ LIBRARY\_ASSERT\ and\ DYNAMIC\_LINK\_WARNING\ instead.}}
\DoxyCodeLine{00024\ \textcolor{comment}{*/}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <cstdarg>}\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ va\_list\ etc.}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\ \ \ \ \#include\ <malloc.h>}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{comment}{//\ Unify\ system\ calls}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\ \ \ \ \#define\ dlopen(\ name,\ flags\ )\ \ \ LoadLibrary(\ name\ )}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\ \ \ \ \#define\ dlsym(\ handle,\ name\ )\ \ \ GetProcAddress(\ handle,\ name\ )}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\ \ \ \ \#define\ dlclose(\ handle\ )\ \ \ \ \ \ \ (\ !\ FreeLibrary(\ handle\ )\ )}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\ \ \ \ \#define\ dlerror()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GetLastError()}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#ifndef\ PATH\_MAX}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\ \ \ \ \#define\ PATH\_MAX\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MAX\_PATH}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#else\ }\textcolor{comment}{/*\ \_WIN32\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\ \ \ \ \#include\ <dlfcn.h>}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\ \ \ \ \#include\ <\mbox{\hyperlink{string_8h}{string.h}}>}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\ \ \ \ \#include\ <unistd.h>}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\ \ \ \ \#include\ <limits.h>}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\ \ \ \ \#include\ <stdlib.h>}}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_WIN32\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\#if\ \_\_TBB\_WEAK\_SYMBOLS\_PRESENT\ \&\&\ !\_\_TBB\_DYNAMIC\_LOAD\_ENABLED}}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{comment}{//TODO:\ use\ function\ attribute\ for\ weak\ symbols\ instead\ of\ the\ pragma.}}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ weak\ dlopen}}
\DoxyCodeLine{00049\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ weak\ dlsym}}
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ weak\ dlclose}}
\DoxyCodeLine{00051\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_WEAK\_SYMBOLS\_PRESENT\ \&\&\ !\_\_TBB\_DYNAMIC\_LOAD\_ENABLED\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{tbb__misc_8h}{tbb\_misc.h}}"{}}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \textcolor{preprocessor}{\#define\ \_\_USE\_TBB\_ATOMICS\ \ \ \ \ \ \ (\ !(\_\_linux\_\_\&\&\_\_ia64\_\_)\ ||\ \_\_TBB\_BUILD\ )}}
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\#define\ \_\_USE\_STATIC\_DL\_INIT\ \ \ \ (\ !\_\_ANDROID\_\_\ )}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{preprocessor}{\#if\ !\_\_USE\_TBB\_ATOMICS}}
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{pthread_8h}{pthread.h}}>}}
\DoxyCodeLine{00060\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \textcolor{comment}{/*}}
\DoxyCodeLine{00063\ \textcolor{comment}{dynamic\_link\ is\ a\ common\ interface\ for\ searching\ for\ required\ symbols\ in\ an}}
\DoxyCodeLine{00064\ \textcolor{comment}{executable\ and\ dynamic\ libraries.}}
\DoxyCodeLine{00065\ \textcolor{comment}{}}
\DoxyCodeLine{00066\ \textcolor{comment}{dynamic\_link\ provides\ certain\ guarantees:}}
\DoxyCodeLine{00067\ \textcolor{comment}{\ \ 1.\ Either\ all\ or\ none\ of\ the\ requested\ symbols\ are\ resolved.\ Moreover,\ if}}
\DoxyCodeLine{00068\ \textcolor{comment}{\ \ symbols\ are\ not\ resolved,\ the\ dynamic\_link\_descriptor\ table\ is\ not\ modified;}}
\DoxyCodeLine{00069\ \textcolor{comment}{\ \ 2.\ All\ returned\ symbols\ have\ secured\ lifetime:\ this\ means\ that\ none\ of\ them}}
\DoxyCodeLine{00070\ \textcolor{comment}{\ \ can\ be\ invalidated\ until\ dynamic\_unlink\ is\ called;}}
\DoxyCodeLine{00071\ \textcolor{comment}{\ \ 3.\ Any\ loaded\ library\ is\ loaded\ only\ via\ the\ full\ path.\ The\ full\ path\ is\ that}}
\DoxyCodeLine{00072\ \textcolor{comment}{\ \ from\ which\ the\ runtime\ itself\ was\ loaded.\ (This\ is\ done\ to\ avoid\ security}}
\DoxyCodeLine{00073\ \textcolor{comment}{\ \ issues\ caused\ by\ loading\ libraries\ from\ insecure\ paths).}}
\DoxyCodeLine{00074\ \textcolor{comment}{}}
\DoxyCodeLine{00075\ \textcolor{comment}{dynamic\_link\ searches\ for\ the\ requested\ symbols\ in\ three\ stages,\ stopping\ as}}
\DoxyCodeLine{00076\ \textcolor{comment}{soon\ as\ all\ of\ the\ symbols\ have\ been\ resolved.}}
\DoxyCodeLine{00077\ \textcolor{comment}{}}
\DoxyCodeLine{00078\ \textcolor{comment}{\ \ 1.\ Search\ the\ global\ scope:}}
\DoxyCodeLine{00079\ \textcolor{comment}{\ \ \ \ a.\ On\ Windows:\ dynamic\_link\ tries\ to\ obtain\ the\ handle\ of\ the\ requested}}
\DoxyCodeLine{00080\ \textcolor{comment}{\ \ \ \ library\ and\ if\ it\ succeeds\ it\ resolves\ the\ symbols\ via\ that\ handle.}}
\DoxyCodeLine{00081\ \textcolor{comment}{\ \ \ \ b.\ On\ Linux:\ dynamic\_link\ tries\ to\ search\ for\ the\ symbols\ in\ the\ global}}
\DoxyCodeLine{00082\ \textcolor{comment}{\ \ \ \ scope\ via\ the\ main\ program\ handle.\ If\ the\ symbols\ are\ present\ in\ the\ global}}
\DoxyCodeLine{00083\ \textcolor{comment}{\ \ \ \ scope\ their\ lifetime\ is\ not\ guaranteed\ (since\ dynamic\_link\ does\ not\ know}}
\DoxyCodeLine{00084\ \textcolor{comment}{\ \ \ \ anything\ about\ the\ library\ from\ which\ they\ are\ exported).\ Therefore\ it}}
\DoxyCodeLine{00085\ \textcolor{comment}{\ \ \ \ tries\ to\ "{}pin"{}\ the\ symbols\ by\ obtaining\ the\ library\ name\ and\ reopening\ it.}}
\DoxyCodeLine{00086\ \textcolor{comment}{\ \ \ \ dlopen\ may\ fail\ to\ reopen\ the\ library\ in\ two\ cases:}}
\DoxyCodeLine{00087\ \textcolor{comment}{\ \ \ \ \ \ \ i.\ The\ symbols\ are\ exported\ from\ the\ executable.\ Currently\ dynamic\ \_link}}
\DoxyCodeLine{00088\ \textcolor{comment}{\ \ \ \ \ \ cannot\ handle\ this\ situation,\ so\ it\ will\ not\ find\ these\ symbols\ in\ this}}
\DoxyCodeLine{00089\ \textcolor{comment}{\ \ \ \ \ \ step.}}
\DoxyCodeLine{00090\ \textcolor{comment}{\ \ \ \ \ \ ii.\ The\ necessary\ library\ has\ been\ unloaded\ and\ cannot\ be\ reloaded.\ It}}
\DoxyCodeLine{00091\ \textcolor{comment}{\ \ \ \ \ \ seems\ there\ is\ nothing\ that\ can\ be\ done\ in\ this\ case.\ No\ symbols\ are}}
\DoxyCodeLine{00092\ \textcolor{comment}{\ \ \ \ \ \ returned.}}
\DoxyCodeLine{00093\ \textcolor{comment}{}}
\DoxyCodeLine{00094\ \textcolor{comment}{\ \ 2.\ Dynamic\ load:\ an\ attempt\ is\ made\ to\ load\ the\ requested\ library\ via\ the}}
\DoxyCodeLine{00095\ \textcolor{comment}{\ \ full\ path.}}
\DoxyCodeLine{00096\ \textcolor{comment}{\ \ \ \ The\ full\ path\ used\ is\ that\ from\ which\ the\ runtime\ itself\ was\ loaded.\ If\ the}}
\DoxyCodeLine{00097\ \textcolor{comment}{\ \ \ \ library\ can\ be\ loaded,\ then\ an\ attempt\ is\ made\ to\ resolve\ the\ requested}}
\DoxyCodeLine{00098\ \textcolor{comment}{\ \ \ \ symbols\ in\ the\ newly\ loaded\ library.}}
\DoxyCodeLine{00099\ \textcolor{comment}{\ \ \ \ If\ the\ symbols\ are\ not\ found\ the\ library\ is\ unloaded.}}
\DoxyCodeLine{00100\ \textcolor{comment}{}}
\DoxyCodeLine{00101\ \textcolor{comment}{\ \ 3.\ Weak\ symbols:\ if\ weak\ symbols\ are\ available\ they\ are\ returned.}}
\DoxyCodeLine{00102\ \textcolor{comment}{*/}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \mbox{\hyperlink{omp__dynamic__link_8h_aa4991636b18b4275317136882311127f}{OPEN\_INTERNAL\_NAMESPACE}}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \textcolor{preprocessor}{\#if\ \_\_TBB\_WEAK\_SYMBOLS\_PRESENT\ ||\ \_\_TBB\_DYNAMIC\_LOAD\_ENABLED}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \textcolor{preprocessor}{\#if\ !defined(DYNAMIC\_LINK\_WARNING)\ \&\&\ !\_\_TBB\_WIN8UI\_SUPPORT\ \&\&\ \_\_TBB\_DYNAMIC\_LOAD\_ENABLED}}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{comment}{//\ Report\ runtime\ errors\ and\ continue.}}
\DoxyCodeLine{00110\ \textcolor{preprocessor}{\ \ \ \ \#define\ DYNAMIC\_LINK\_WARNING\ dynamic\_link\_warning}}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ dynamic\_link\_warning(\ \mbox{\hyperlink{dynamic__link_8h_a5b9b27e8cd42534836372ad00f3cfcc9}{dynamic\_link\_error\_t}}\ code,\ ...\ )\ \{}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}})\ code;}
\DoxyCodeLine{00113\ \ \ \ \ \}\ \textcolor{comment}{//\ library\_warning}}
\DoxyCodeLine{00114\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ !defined(DYNAMIC\_LINK\_WARNING)\ \&\&\ !\_\_TBB\_WIN8UI\_SUPPORT\ \&\&\ \_\_TBB\_DYNAMIC\_LOAD\_ENABLED\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ resolve\_symbols(\ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}\ module,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdynamic__link__descriptor}{dynamic\_link\_descriptor}}\ descriptors[],\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}}\ )}
\DoxyCodeLine{00117\ \ \ \ \ \{}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !module\ )}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ !\_\_TBB\_DYNAMIC\_LOAD\_ENABLED\ }\textcolor{comment}{/*\ only\ \_\_TBB\_WEAK\_SYMBOLS\_PRESENT\ is\ defined\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !dlsym\ )\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00123\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif\ }\textcolor{comment}{/*\ !\_\_TBB\_DYNAMIC\_LOAD\_ENABLED\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ n\_desc=20;\ \textcolor{comment}{//\ Usually\ we\ don't\ have\ more\ than\ 20\ descriptors\ per\ library}}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{library__assert_8h_ae67ecef216a66c1cb60fdae8ea75918c}{LIBRARY\_ASSERT}}(\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}}\ <=\ n\_desc,\ \textcolor{stringliteral}{"{}Too\ many\ descriptors\ is\ required"{}}\ );}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}}\ >\ n\_desc\ )\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dynamic__link_8h_a1f2f13bc7b065579fe007dc32e4bdeb7}{pointer\_to\_handler}}\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}[n\_desc];}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keywordtype}{size\_t}\ k\ =\ 0;\ k\ <\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}};\ ++k\ )\ \{}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdynamic__link__descriptor}{dynamic\_link\_descriptor}}\ \textcolor{keyword}{const}\ \&\ desc\ =\ descriptors[k];}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dynamic__link_8h_a1f2f13bc7b065579fe007dc32e4bdeb7}{pointer\_to\_handler}}\ \mbox{\hyperlink{ittnotify__static_8h_a5a45e81e22c3c12a69b24c775466de97}{addr}}\ =\ (\mbox{\hyperlink{dynamic__link_8h_a1f2f13bc7b065579fe007dc32e4bdeb7}{pointer\_to\_handler}})dlsym(\ module,\ desc.\mbox{\hyperlink{structdynamic__link__descriptor_a45c4a4684f69a28783fed7fc8bf92ded}{name}}\ );}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !\mbox{\hyperlink{ittnotify__static_8h_a5a45e81e22c3c12a69b24c775466de97}{addr}}\ )\ \{}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}[k]\ =\ \mbox{\hyperlink{ittnotify__static_8h_a5a45e81e22c3c12a69b24c775466de97}{addr}};}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Commit\ the\ entry\ points.}}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Cannot\ use\ memset\ here,\ because\ the\ writes\ must\ be\ atomic.}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keywordtype}{size\_t}\ k\ =\ 0;\ k\ <\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}};\ ++k\ )}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ *descriptors[k].handler\ =\ \mbox{\hyperlink{ittnotify__static_8h_ae68700d2ebda197674e2fdd0f916f00c}{h}}[k];}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00144\ \ \ \ \ \}}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \textcolor{preprocessor}{\#if\ \_\_TBB\_WIN8UI\_SUPPORT}}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{dynamic__link_8cpp_aca8bbbbc28690d986ae2636bae2754f7}{dynamic\_link}}(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \ library,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdynamic__link__descriptor}{dynamic\_link\_descriptor}}\ descriptors[],\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}},\ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}*,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{test__split__node_8cpp_afea5520dffc22c33fbcc0eb5f7e3d448}{flags}}\ )\ \{}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}\ tmp\_handle\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{runtime_2_base_core_2_platform_8h_aa210391d3ca6f2708b990eae12f16926}{TCHAR}}\ wlibrary[256];}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ MultiByteToWideChar(CP\_UTF8,\ 0,\ library,\ -\/1,\ wlibrary,\ 255)\ ==\ 0\ )\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{test__split__node_8cpp_afea5520dffc22c33fbcc0eb5f7e3d448}{flags}}\ \&\ \mbox{\hyperlink{dynamic__link_8h_a2f392c831bb8ae62465e8ff3679e4014}{DYNAMIC\_LINK\_LOAD}}\ )}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ tmp\_handle\ =\ LoadPackagedLibrary(\ wlibrary,\ 0\ );}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tmp\_handle\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ resolve\_symbols(tmp\_handle,\ descriptors,\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}});}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00158\ \ \ \ \ \}}
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{dynamic__link_8cpp_a25fd917902eaf363a17de44aead45093}{dynamic\_unlink}}(\ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}\ )\ \{\}}
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{dynamic__link_8cpp_ad65fa8b542fd95d199ca5e87ab2885df}{dynamic\_unlink\_all}}()\ \{\}}
\DoxyCodeLine{00161\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00162\ \textcolor{preprocessor}{\#if\ \_\_TBB\_DYNAMIC\_LOAD\_ENABLED}}
\DoxyCodeLine{00163\ \textcolor{comment}{/*}}
\DoxyCodeLine{00164\ \textcolor{comment}{\ \ \ \ There\ is\ a\ security\ issue\ on\ Windows:\ LoadLibrary()\ may\ load\ and\ execute\ malicious\ code.}}
\DoxyCodeLine{00165\ \textcolor{comment}{\ \ \ \ See\ http://www.microsoft.com/technet/security/advisory/2269637.mspx\ for\ details.}}
\DoxyCodeLine{00166\ \textcolor{comment}{\ \ \ \ To\ avoid\ the\ issue,\ we\ have\ to\ pass\ full\ path\ (not\ just\ library\ name)\ to\ LoadLibrary.\ This}}
\DoxyCodeLine{00167\ \textcolor{comment}{\ \ \ \ function\ constructs\ full\ path\ to\ the\ specified\ library\ (it\ is\ assumed\ the\ library\ located}}
\DoxyCodeLine{00168\ \textcolor{comment}{\ \ \ \ side-\/by-\/side\ with\ the\ tbb.dll.}}
\DoxyCodeLine{00169\ \textcolor{comment}{}}
\DoxyCodeLine{00170\ \textcolor{comment}{\ \ \ \ The\ function\ constructs\ absolute\ path\ for\ given\ relative\ path.\ Important:\ Base\ directory\ is\ not}}
\DoxyCodeLine{00171\ \textcolor{comment}{\ \ \ \ current\ one,\ it\ is\ the\ directory\ tbb.dll\ loaded\ from.}}
\DoxyCodeLine{00172\ \textcolor{comment}{}}
\DoxyCodeLine{00173\ \textcolor{comment}{\ \ \ \ Example:}}
\DoxyCodeLine{00174\ \textcolor{comment}{\ \ \ \ \ \ \ \ Let\ us\ assume\ "{}tbb.dll"{}\ is\ located\ in\ "{}c:\(\backslash\)program\ files\(\backslash\)common\(\backslash\)intel\(\backslash\)"{}\ directory,\ e.\ g.}}
\DoxyCodeLine{00175\ \textcolor{comment}{\ \ \ \ \ \ \ \ absolute\ path\ of\ tbb\ library\ is\ "{}c:\(\backslash\)program\ files\(\backslash\)common\(\backslash\)intel\(\backslash\)tbb.dll"{}.\ Absolute\ path\ for}}
\DoxyCodeLine{00176\ \textcolor{comment}{\ \ \ \ \ \ \ \ "{}tbbmalloc.dll"{}\ would\ be\ "{}c:\(\backslash\)program\ files\(\backslash\)common\(\backslash\)intel\(\backslash\)tbbmalloc.dll"{}.\ Absolute\ path\ for}}
\DoxyCodeLine{00177\ \textcolor{comment}{\ \ \ \ \ \ \ \ "{}malloc\(\backslash\)tbbmalloc.dll"{}\ would\ be\ "{}c:\(\backslash\)program\ files\(\backslash\)common\(\backslash\)intel\(\backslash\)malloc\(\backslash\)tbbmalloc.dll"{}.}}
\DoxyCodeLine{00178\ \textcolor{comment}{*/}}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{comment}{//\ Struct\ handle\_storage\ is\ used\ by\ dynamic\_link\ routine\ to\ store\ handles\ of}}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{comment}{//\ all\ loaded\ or\ pinned\ dynamic\ libraries.\ When\ TBB\ is\ shut\ down,\ it\ calls}}
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{comment}{//\ dynamic\_unlink\_all()\ that\ unloads\ modules\ referenced\ by\ handle\_storage.}}
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{comment}{//\ This\ struct\ should\ not\ have\ any\ constructors\ since\ it\ may\ be\ used\ before}}
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{comment}{//\ the\ constructor\ is\ called.}}
\DoxyCodeLine{00185\ \textcolor{preprocessor}{\ \ \ \ \#define\ MAX\_LOADED\_MODULES\ 8\ }\textcolor{comment}{//\ The\ number\ of\ maximum\ possible\ modules\ which\ can\ be\ loaded}}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \textcolor{preprocessor}{\#if\ \_\_USE\_TBB\_ATOMICS}}
\DoxyCodeLine{00188\ \ \ \ \ typedef\ ::tbb::atomic<size\_t>\ atomic\_incrementer;}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keywordtype}{void}\ init\_atomic\_incrementer(\ atomic\_incrementer\ \&\ )\ \{\}}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ atomic\_once(\ \textcolor{keywordtype}{void}(\ *\mbox{\hyperlink{structfunc}{func}}\ )\ (\textcolor{keywordtype}{void}),\ tbb::atomic<\ tbb::internal::do\_once\_state\ >\ \&once\_state\ )\ \{}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetbb_1_1internal_a1082394ca8392ef2aa6795b57a756fa5}{tbb::internal::atomic\_do\_once}}(\ \mbox{\hyperlink{structfunc}{func}},\ once\_state\ );}
\DoxyCodeLine{00193\ \ \ \ \ \}}
\DoxyCodeLine{00194\ \textcolor{preprocessor}{\ \ \ \ \#define\ ATOMIC\_ONCE\_DECL(\ var\ )\ tbb::atomic<\ tbb::internal::do\_once\_state\ >\ var}}
\DoxyCodeLine{00195\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ pthread\_assert(\ \textcolor{keywordtype}{int}\ error\_code,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ msg\ )\ \{}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{library__assert_8h_ae67ecef216a66c1cb60fdae8ea75918c}{LIBRARY\_ASSERT}}(\ error\_code\ ==\ 0,\ msg\ );}
\DoxyCodeLine{00198\ \ \ \ \ \}}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{keyword}{class\ }atomic\_incrementer\ \{}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ my\_val;}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ pthread\_spinlock\_t\ my\_lock;}
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init}}()\ \{}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ my\_val\ =\ 0;}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ pthread\_assert(\ pthread\_spin\_init(\ \&my\_lock,\ PTHREAD\_PROCESS\_PRIVATE\ ),\ \textcolor{stringliteral}{"{}pthread\_spin\_init\ failed"{}}\ );}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ operator++(\textcolor{keywordtype}{int})\ \{}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ pthread\_assert(\ pthread\_spin\_lock(\ \&my\_lock\ ),\ \textcolor{stringliteral}{"{}pthread\_spin\_lock\ failed"{}}\ );}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ prev\_val\ =\ my\_val++;}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ pthread\_assert(\ pthread\_spin\_unlock(\ \&my\_lock\ ),\ \textcolor{stringliteral}{"{}pthread\_spin\_unlock\ failed"{}}\ );}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ prev\_val;}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{keyword}{operator}\ \mbox{\hyperlink{namespacemap_a0eee77b0927f0a32275daa00d1a418ac}{size\_t}}()\ \{}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ pthread\_assert(\ pthread\_spin\_lock(\ \&my\_lock\ ),\ \textcolor{stringliteral}{"{}pthread\_spin\_lock\ failed"{}}\ );}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ val\ =\ my\_val;}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ pthread\_assert(\ pthread\_spin\_unlock(\ \&my\_lock\ ),\ \textcolor{stringliteral}{"{}pthread\_spin\_unlock\ failed"{}}\ );}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ val;}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \string~atomic\_incrementer()\ \{}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ pthread\_assert(\ pthread\_spin\_destroy(\ \&my\_lock\ ),\ \textcolor{stringliteral}{"{}pthread\_spin\_destroy\ failed"{}}\ );}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00223\ \ \ \ \ \};}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keywordtype}{void}\ init\_atomic\_incrementer(\ atomic\_incrementer\ \&\mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}\ )\ \{}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a4788d82c901b9367dd5c0daff8a7616b}{r}}.init();}
\DoxyCodeLine{00227\ \ \ \ \ \}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ atomic\_once(\ \textcolor{keywordtype}{void}(\ *\mbox{\hyperlink{structfunc}{func}}\ )\ (),\ pthread\_once\_t\ \&once\_state\ )\ \{}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ pthread\_assert(\ pthread\_once(\ \&once\_state,\ \mbox{\hyperlink{structfunc}{func}}\ ),\ \textcolor{stringliteral}{"{}pthread\_once\ failed"{}}\ );}
\DoxyCodeLine{00231\ \ \ \ \ \}}
\DoxyCodeLine{00232\ \textcolor{preprocessor}{\ \ \ \ \#define\ ATOMIC\_ONCE\_DECL(\ var\ )\ pthread\_once\_t\ var\ =\ PTHREAD\_ONCE\_INIT}}
\DoxyCodeLine{00233\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_USE\_TBB\_ATOMICS\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \ \ \textcolor{keyword}{struct\ }handles\_t\ \{}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ atomic\_incrementer\ my\_size;}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}\ my\_handles[MAX\_LOADED\_MODULES];}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init}}()\ \{}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ init\_atomic\_incrementer(\ my\_size\ );}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{benchmarks_2hetero__traversal_2graph_8hpp_a9836634ebb2ae079fb18b97205218838}{add}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}\ \&handle)\ \{}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ ind\ =\ my\_size++;}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{library__assert_8h_ae67ecef216a66c1cb60fdae8ea75918c}{LIBRARY\_ASSERT}}(\ ind\ <\ MAX\_LOADED\_MODULES,\ \textcolor{stringliteral}{"{}Too\ many\ modules\ are\ loaded"{}}\ );}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ my\_handles[ind]\ =\ handle;}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{mimalloc-override_8h_a9d4b5df3530d1bc733070a4669ba6ebc}{free}}()\ \{}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}\ =\ my\_size;}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}};\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dynamic__link_8cpp_a25fd917902eaf363a17de44aead45093}{dynamic\_unlink}}(\ my\_handles[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]\ );}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00254\ \ \ \ \ \}\ handles;}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \ \ ATOMIC\_ONCE\_DECL(\ init\_dl\_data\_state\ );}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{struct\ }ap\_data\_t\ \{}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ \_path[\mbox{\hyperlink{ittnotify__static_8c_ae688d728e1acdfe5988c7db45d6f0166}{PATH\_MAX}}+1];}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \_len;}
\DoxyCodeLine{00261\ \ \ \ \ \}\ ap\_data;}
\DoxyCodeLine{00262\ }
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ init\_ap\_data()\ \{}
\DoxyCodeLine{00264\ \textcolor{preprocessor}{\ \ \ \ \#if\ \_WIN32}}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ handle\ of\ our\ DLL\ first.}}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ HMODULE\ handle;}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ BOOL\ brc\ =\ GetModuleHandleEx(}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ GET\_MODULE\_HANDLE\_EX\_FLAG\_FROM\_ADDRESS\ |\ GET\_MODULE\_HANDLE\_EX\_FLAG\_UNCHANGED\_REFCOUNT,}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ (LPCSTR)(\ \&\ \mbox{\hyperlink{dynamic__link_8cpp_aca8bbbbc28690d986ae2636bae2754f7}{dynamic\_link}}\ ),\ \textcolor{comment}{//\ any\ function\ inside\ the\ library\ can\ be\ used\ for\ the\ address}}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \&\ handle}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !brc\ )\ \{\ \textcolor{comment}{//\ Error\ occurred.}}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacespdlog_1_1level_a335eabf5eff13482903eb26be08f3861a4d723e295b98a75c1263d85fc165045f}{err}}\ =\ GetLastError();}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ DYNAMIC\_LINK\_WARNING(\ \mbox{\hyperlink{dynamic__link_8h_a5b9b27e8cd42534836372ad00f3cfcc9a43f710eafcad9f33c78272b831300b99}{dl\_sys\_fail}},\ \textcolor{stringliteral}{"{}GetModuleHandleEx"{}},\ err\ );}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Now\ get\ path\ to\ our\ DLL.}}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__malloc__compliance_8cpp_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ drc\ =\ GetModuleFileName(\ handle,\ ap\_data.\_path,\ \textcolor{keyword}{static\_cast<}\ \mbox{\hyperlink{test__malloc__compliance_8cpp_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ \textcolor{keyword}{>}(\ \mbox{\hyperlink{ittnotify__static_8c_ae688d728e1acdfe5988c7db45d6f0166}{PATH\_MAX}}\ )\ );}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ drc\ ==\ 0\ )\ \{\ \textcolor{comment}{//\ Error\ occurred.}}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacespdlog_1_1level_a335eabf5eff13482903eb26be08f3861a4d723e295b98a75c1263d85fc165045f}{err}}\ =\ GetLastError();}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ DYNAMIC\_LINK\_WARNING(\ \mbox{\hyperlink{dynamic__link_8h_a5b9b27e8cd42534836372ad00f3cfcc9a43f710eafcad9f33c78272b831300b99}{dl\_sys\_fail}},\ \textcolor{stringliteral}{"{}GetModuleFileName"{}},\ err\ );}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ drc\ >=\ \mbox{\hyperlink{ittnotify__static_8c_ae688d728e1acdfe5988c7db45d6f0166}{PATH\_MAX}}\ )\ \{\ \textcolor{comment}{//\ Buffer\ too\ short.}}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ DYNAMIC\_LINK\_WARNING(\ \mbox{\hyperlink{dynamic__link_8h_a5b9b27e8cd42534836372ad00f3cfcc9acd3109ab7299a9305e0fe9c9117d7db2}{dl\_buff\_too\_small}}\ );}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Find\ the\ position\ of\ the\ last\ backslash.}}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ *backslash\ =\ strrchr(\ ap\_data.\_path,\ \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}\ );}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !backslash\ )\ \{\ \ \ \ \textcolor{comment}{//\ Backslash\ not\ found.}}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{library__assert_8h_ae67ecef216a66c1cb60fdae8ea75918c}{LIBRARY\_ASSERT}}(\ backslash!=\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \textcolor{stringliteral}{"{}Unbelievable."{}});}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{library__assert_8h_ae67ecef216a66c1cb60fdae8ea75918c}{LIBRARY\_ASSERT}}(\ backslash\ >=\ ap\_data.\_path,\ \textcolor{stringliteral}{"{}Unbelievable."{}});}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ ap\_data.\_len\ =\ (\mbox{\hyperlink{namespacemap_a0eee77b0927f0a32275daa00d1a418ac}{size\_t}})(backslash\ -\/\ ap\_data.\_path)\ +\ 1;}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ *(backslash+1)\ =\ 0;}
\DoxyCodeLine{00298\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ the\ library\ path}}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ Dl\_info\ dlinfo;}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}\ =\ dladdr(\ (\textcolor{keywordtype}{void}*)\&\mbox{\hyperlink{dynamic__link_8cpp_aca8bbbbc28690d986ae2636bae2754f7}{dynamic\_link}},\ \&dlinfo\ );\ \textcolor{comment}{//\ any\ function\ inside\ the\ library\ can\ be\ used\ for\ the\ address}}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !\mbox{\hyperlink{_partial_redux__count_8cpp_acbe60897559b79afc28b79b0687b5f29}{res}}\ )\ \{}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ \textcolor{keyword}{const}\ *\ \mbox{\hyperlink{namespacespdlog_1_1level_a335eabf5eff13482903eb26be08f3861a4d723e295b98a75c1263d85fc165045f}{err}}\ =\ dlerror();}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ DYNAMIC\_LINK\_WARNING(\ \mbox{\hyperlink{dynamic__link_8h_a5b9b27e8cd42534836372ad00f3cfcc9a43f710eafcad9f33c78272b831300b99}{dl\_sys\_fail}},\ \textcolor{stringliteral}{"{}dladdr"{}},\ err\ );}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{library__assert_8h_ae67ecef216a66c1cb60fdae8ea75918c}{LIBRARY\_ASSERT}}(\ dlinfo.dli\_fname!=\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \textcolor{stringliteral}{"{}Unbelievable."{}}\ );}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ \textcolor{keyword}{const}\ *slash\ =\ strrchr(\ dlinfo.dli\_fname,\ \textcolor{charliteral}{'/'}\ );}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ fname\_len=0;}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ slash\ )\ \{}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{library__assert_8h_ae67ecef216a66c1cb60fdae8ea75918c}{LIBRARY\_ASSERT}}(\ slash\ >=\ dlinfo.dli\_fname,\ \textcolor{stringliteral}{"{}Unbelievable."{}});}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ fname\_len\ =\ (\mbox{\hyperlink{namespacemap_a0eee77b0927f0a32275daa00d1a418ac}{size\_t}})(slash\ -\/\ dlinfo.dli\_fname)\ +\ 1;}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ rc;}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ dlinfo.dli\_fname[0]==\textcolor{charliteral}{'/'}\ )\ \{}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ library\ path\ is\ absolute}}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ rc\ =\ 0;}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ ap\_data.\_len\ =\ 0;}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ library\ path\ is\ relative\ so\ get\ the\ current\ working\ directory}}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !getcwd(\ ap\_data.\_path,\ \textcolor{keyword}{sizeof}(ap\_data.\_path)/\textcolor{keyword}{sizeof}(ap\_data.\_path[0])\ )\ )\ \{}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DYNAMIC\_LINK\_WARNING(\ \mbox{\hyperlink{dynamic__link_8h_a5b9b27e8cd42534836372ad00f3cfcc9acd3109ab7299a9305e0fe9c9117d7db2}{dl\_buff\_too\_small}}\ );}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \ \ \ \ ap\_data.\_len\ =\ strlen(\ ap\_data.\_path\ );}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \ \ \ \ ap\_data.\_path[ap\_data.\_len++]=\textcolor{charliteral}{'/'};}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \ \ \ \ rc\ =\ ap\_data.\_len;}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ fname\_len>0\ )\ \{}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ ap\_data.\_len>\mbox{\hyperlink{ittnotify__static_8c_ae688d728e1acdfe5988c7db45d6f0166}{PATH\_MAX}}\ )\ \{}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DYNAMIC\_LINK\_WARNING(\ \mbox{\hyperlink{dynamic__link_8h_a5b9b27e8cd42534836372ad00f3cfcc9acd3109ab7299a9305e0fe9c9117d7db2}{dl\_buff\_too\_small}}\ );}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ap\_data.\_len=0;}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \ \ \ \ strncpy(\ ap\_data.\_path+rc,\ dlinfo.dli\_fname,\ fname\_len\ );}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \ \ \ \ ap\_data.\_len\ +=\ fname\_len;}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ ap\_data.\_path[ap\_data.\_len]=0;}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00343\ \textcolor{preprocessor}{\ \ \ \ \#endif\ }\textcolor{comment}{/*\ \_WIN32\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00344\ \ \ \ \ \}}
\DoxyCodeLine{00345\ }
\DoxyCodeLine{00346\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ init\_dl\_data()\ \{}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ handles.init();}
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ init\_ap\_data();}
\DoxyCodeLine{00349\ \ \ \ \ \}}
\DoxyCodeLine{00350\ }
\DoxyCodeLine{00351\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00352\ \textcolor{comment}{\ \ \ \ \ \ \ \ The\ function\ constructs\ absolute\ path\ for\ given\ relative\ path.\ Important:\ Base\ directory\ is\ not}}
\DoxyCodeLine{00353\ \textcolor{comment}{\ \ \ \ \ \ \ \ current\ one,\ it\ is\ the\ directory\ libtbb.so\ loaded\ from.}}
\DoxyCodeLine{00354\ \textcolor{comment}{}}
\DoxyCodeLine{00355\ \textcolor{comment}{\ \ \ \ \ \ \ \ Arguments:}}
\DoxyCodeLine{00356\ \textcolor{comment}{\ \ \ \ \ \ \ \ in\ \ name\ -\/-\/\ Name\ of\ a\ file\ (may\ be\ with\ relative\ path;\ it\ must\ not\ be\ an\ absolute\ one).}}
\DoxyCodeLine{00357\ \textcolor{comment}{\ \ \ \ \ \ \ \ out\ path\ -\/-\/\ Buffer\ to\ save\ result\ (absolute\ path)\ to.}}
\DoxyCodeLine{00358\ \textcolor{comment}{\ \ \ \ \ \ \ \ in\ \ len\ \ -\/-\/\ Size\ of\ buffer.}}
\DoxyCodeLine{00359\ \textcolor{comment}{\ \ \ \ \ \ \ \ ret\ \ \ \ \ \ -\/-\/\ 0\ \ \ \ \ \ \ \ \ -\/-\/\ Error\ occurred.}}
\DoxyCodeLine{00360\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ >\ len\ \ \ \ \ -\/-\/\ Buffer\ too\ short,\ required\ size\ returned.}}
\DoxyCodeLine{00361\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ otherwise\ -\/-\/\ Ok,\ number\ of\ characters\ (incl.\ terminating\ null)\ written\ to\ buffer.}}
\DoxyCodeLine{00362\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{00363\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ abs\_path(\ \textcolor{keywordtype}{char}\ \textcolor{keyword}{const}\ *\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}},\ \textcolor{keywordtype}{char}\ *\ \mbox{\hyperlink{ittnotify__static_8h_a7016119bc831a22d1a351d56128518ed}{path}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}}\ )\ \{}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ ap\_data.\_len\ ==\ 0\ )}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ name\_len\ =\ strlen(\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}}\ );}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ full\_len\ =\ name\_len+ap\_data.\_len;}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ full\_len\ <\ \mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}}\ )\ \{}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tbb__stddef_8h_a7b58d28a34a1717e2ddb591f00658b10}{\_\_TBB\_ASSERT}}(ap\_data.\_path[ap\_data.\_len]\ ==\ 0,\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ strcpy(\ \mbox{\hyperlink{ittnotify__static_8h_a7016119bc831a22d1a351d56128518ed}{path}},\ ap\_data.\_path\ );}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ strcat(\ \mbox{\hyperlink{ittnotify__static_8h_a7016119bc831a22d1a351d56128518ed}{path}},\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aab18cfce5ee7c6881ae04f18be70d94a}{name}}\ );}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ full\_len+1;\ \textcolor{comment}{//\ +1\ for\ null\ character}}
\DoxyCodeLine{00375\ \ \ \ \ \}}
\DoxyCodeLine{00376\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ \_\_TBB\_DYNAMIC\_LOAD\_ENABLED}}
\DoxyCodeLine{00377\ }
\DoxyCodeLine{00378\ \ \ \ \ \textcolor{keywordtype}{void}\ init\_dynamic\_link\_data()\ \{}
\DoxyCodeLine{00379\ \textcolor{preprocessor}{\ \ \ \ \#if\ \_\_TBB\_DYNAMIC\_LOAD\_ENABLED}}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ atomic\_once(\ \&init\_dl\_data,\ init\_dl\_data\_state\ );}
\DoxyCodeLine{00381\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00382\ \ \ \ \ \}}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00384\ \textcolor{preprocessor}{\ \ \ \ \#if\ \_\_USE\_STATIC\_DL\_INIT}}
\DoxyCodeLine{00385\ \ \ \ \ \textcolor{comment}{//\ ap\_data\ structure\ is\ initialized\ with\ current\ directory\ on\ Linux.}}
\DoxyCodeLine{00386\ \ \ \ \ \textcolor{comment}{//\ So\ it\ should\ be\ initialized\ as\ soon\ as\ possible\ since\ the\ current\ directory\ may\ be\ changed.}}
\DoxyCodeLine{00387\ \ \ \ \ \textcolor{comment}{//\ static\_init\_ap\_data\ object\ provides\ this\ initialization\ during\ library\ loading.}}
\DoxyCodeLine{00388\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{struct\ }static\_init\_dl\_data\_t\ \{}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ static\_init\_dl\_data\_t()\ \{}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \ \ \ \ init\_dynamic\_link\_data();}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00392\ \ \ \ \ \}\ static\_init\_dl\_data;}
\DoxyCodeLine{00393\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00394\ }
\DoxyCodeLine{00395\ \textcolor{preprocessor}{\ \ \ \ \#if\ \_\_TBB\_WEAK\_SYMBOLS\_PRESENT}}
\DoxyCodeLine{00396\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ weak\_symbol\_link(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdynamic__link__descriptor}{dynamic\_link\_descriptor}}\ descriptors[],\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}}\ )}
\DoxyCodeLine{00397\ \ \ \ \ \{}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ if\ the\ required\ entries\ are\ present\ in\ what\ was\ loaded\ into\ our\ process.}}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keywordtype}{size\_t}\ k\ =\ 0;\ k\ <\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}};\ ++k\ )}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !descriptors[k].\mbox{\hyperlink{yyjson_8h_a26c622783fa717b24fe0bbd3e060f74a}{ptr}}\ )}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Commit\ the\ entry\ points.}}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keywordtype}{size\_t}\ k\ =\ 0;\ k\ <\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}};\ ++k\ )}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \ \ \ \ *descriptors[k].handler\ =\ (\mbox{\hyperlink{dynamic__link_8h_a1f2f13bc7b065579fe007dc32e4bdeb7}{pointer\_to\_handler}})\ descriptors[k].ptr;}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00406\ \ \ \ \ \}}
\DoxyCodeLine{00407\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{00408\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ weak\_symbol\_link(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdynamic__link__descriptor}{dynamic\_link\_descriptor}}[],\ \textcolor{keywordtype}{size\_t}\ )\ \{}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00410\ \ \ \ \ \}}
\DoxyCodeLine{00411\ \textcolor{preprocessor}{\ \ \ \ \#endif\ }\textcolor{comment}{/*\ \_\_TBB\_WEAK\_SYMBOLS\_PRESENT\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00413\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{dynamic__link_8cpp_a25fd917902eaf363a17de44aead45093}{dynamic\_unlink}}(\ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}\ handle\ )\ \{}
\DoxyCodeLine{00414\ \textcolor{preprocessor}{\ \ \ \ \#if\ !\_\_TBB\_DYNAMIC\_LOAD\_ENABLED\ }\textcolor{comment}{/*\ only\ \_\_TBB\_WEAK\_SYMBOLS\_PRESENT\ is\ defined\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00415\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !dlclose\ )\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00416\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ handle\ )\ \{}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \ \ \ \ dlclose(\ handle\ );}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00420\ \ \ \ \ \}}
\DoxyCodeLine{00421\ }
\DoxyCodeLine{00422\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{dynamic__link_8cpp_ad65fa8b542fd95d199ca5e87ab2885df}{dynamic\_unlink\_all}}()\ \{}
\DoxyCodeLine{00423\ \textcolor{preprocessor}{\ \ \ \ \#if\ \_\_TBB\_DYNAMIC\_LOAD\_ENABLED}}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ handles.free();}
\DoxyCodeLine{00425\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00426\ \ \ \ \ \}}
\DoxyCodeLine{00427\ }
\DoxyCodeLine{00428\ \textcolor{preprocessor}{\#if\ !\_WIN32}}
\DoxyCodeLine{00429\ \textcolor{preprocessor}{\#if\ \_\_TBB\_DYNAMIC\_LOAD\_ENABLED}}
\DoxyCodeLine{00430\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}\ pin\_symbols(\ \mbox{\hyperlink{structdynamic__link__descriptor}{dynamic\_link\_descriptor}}\ desc,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdynamic__link__descriptor}{dynamic\_link\_descriptor}}*\ descriptors,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}}\ )\ \{}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ It\ is\ supposed\ that\ all\ symbols\ are\ from\ the\ only\ one\ library}}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ library\ has\ been\ loaded\ by\ another\ module\ and\ contains\ at\ least\ one\ requested\ symbol.}}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ But\ after\ we\ obtained\ the\ symbol\ the\ library\ can\ be\ unloaded\ by\ another\ thread}}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ invalidating\ our\ symbol.\ Therefore\ we\ need\ to\ pin\ the\ library\ in\ memory.}}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}\ library\_handle\ =\ 0;}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ Dl\_info\ \mbox{\hyperlink{eigen-3_83_87_2lapack_2cholesky_8cpp_a19e186475eb822b276da4b357d68140d}{info}};}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ library's\ name\ from\ earlier\ found\ symbol}}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ dladdr(\ (\textcolor{keywordtype}{void}*)*desc.\mbox{\hyperlink{structdynamic__link__descriptor_a11964964baf1be8d33f8e0bc753880d8}{handler}},\ \&\mbox{\hyperlink{eigen-3_83_87_2lapack_2cholesky_8cpp_a19e186475eb822b276da4b357d68140d}{info}}\ )\ )\ \{}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Pin\ the\ library}}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \ \ \ \ library\_handle\ =\ dlopen(\ \mbox{\hyperlink{eigen-3_83_87_2lapack_2cholesky_8cpp_a19e186475eb822b276da4b357d68140d}{info}}.dli\_fname,\ RTLD\_LAZY\ );}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ library\_handle\ )\ \{}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ original\ library\ was\ unloaded\ before\ we\ pinned\ it}}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ and\ then\ another\ module\ loaded\ in\ its\ place,\ the\ earlier}}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ found\ symbol\ would\ become\ invalid.\ So\ revalidate\ them.}}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !resolve\_symbols(\ library\_handle,\ descriptors,\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}}\ )\ )\ \{}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Wrong\ library.}}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dynamic__link_8cpp_a25fd917902eaf363a17de44aead45093}{dynamic\_unlink}}(library\_handle);}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ library\_handle\ =\ 0;}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ \textcolor{keyword}{const}\ *\ \mbox{\hyperlink{namespacespdlog_1_1level_a335eabf5eff13482903eb26be08f3861a4d723e295b98a75c1263d85fc165045f}{err}}\ =\ dlerror();}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DYNAMIC\_LINK\_WARNING(\ \mbox{\hyperlink{dynamic__link_8h_a5b9b27e8cd42534836372ad00f3cfcc9a3a6dcba4f1afd3040184a5e909fcc7c1}{dl\_lib\_not\_found}},\ \mbox{\hyperlink{eigen-3_83_87_2lapack_2cholesky_8cpp_a19e186475eb822b276da4b357d68140d}{info}}.dli\_fname,\ err\ );}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ else\ the\ library\ has\ been\ unloaded\ by\ another\ thread}}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ library\_handle;}
\DoxyCodeLine{00457\ \ \ \ \ \}}
\DoxyCodeLine{00458\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_DYNAMIC\_LOAD\_ENABLED\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00459\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ !\_WIN32\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00460\ }
\DoxyCodeLine{00461\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}\ global\_symbols\_link(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ library,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdynamic__link__descriptor}{dynamic\_link\_descriptor}}\ descriptors[],\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}}\ )\ \{}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ ::tbb::internal::suppress\_unused\_warning(\ library\ );}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}\ library\_handle;}
\DoxyCodeLine{00464\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ GetModuleHandleEx(\ 0,\ library,\ \&library\_handle\ )\ )\ \{}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ resolve\_symbols(\ library\_handle,\ descriptors,\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}}\ )\ )}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ library\_handle;}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FreeLibrary(\ library\_handle\ );}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00471\ \textcolor{preprocessor}{\#else\ }\textcolor{comment}{/*\ \_WIN32\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00472\ \textcolor{preprocessor}{\ \ \ \ \#if\ !\_\_TBB\_DYNAMIC\_LOAD\_ENABLED\ }\textcolor{comment}{/*\ only\ \_\_TBB\_WEAK\_SYMBOLS\_PRESENT\ is\ defined\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !dlopen\ )\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00474\ \textcolor{preprocessor}{\ \ \ \ \#endif\ }\textcolor{comment}{/*\ !\_\_TBB\_DYNAMIC\_LOAD\_ENABLED\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ library\_handle\ =\ dlopen(\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ RTLD\_LAZY\ );}
\DoxyCodeLine{00476\ \textcolor{preprocessor}{\ \ \ \ \#if\ !\_\_ANDROID\_\_}}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ On\ Android\ dlopen(\ NULL\ )\ returns\ NULL\ if\ it\ is\ called\ during\ dynamic\ module\ initialization.}}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{library__assert_8h_ae67ecef216a66c1cb60fdae8ea75918c}{LIBRARY\_ASSERT}}(\ library\_handle,\ \textcolor{stringliteral}{"{}The\ handle\ for\ the\ main\ program\ is\ NULL"{}}\ );}
\DoxyCodeLine{00479\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00480\ \textcolor{preprocessor}{\ \ \ \ \#if\ \_\_TBB\_DYNAMIC\_LOAD\_ENABLED}}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ existence\ of\ the\ first\ symbol\ only,\ then\ use\ it\ to\ find\ the\ library\ and\ load\ all\ necessary\ symbols.}}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dynamic__link_8h_a1f2f13bc7b065579fe007dc32e4bdeb7}{pointer\_to\_handler}}\ handler;}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdynamic__link__descriptor}{dynamic\_link\_descriptor}}\ desc;}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ desc.\mbox{\hyperlink{structdynamic__link__descriptor_a45c4a4684f69a28783fed7fc8bf92ded}{name}}\ =\ descriptors[0].\mbox{\hyperlink{structdynamic__link__descriptor_a45c4a4684f69a28783fed7fc8bf92ded}{name}};}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ desc.\mbox{\hyperlink{structdynamic__link__descriptor_a11964964baf1be8d33f8e0bc753880d8}{handler}}\ =\ \&handler;}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ resolve\_symbols(\ library\_handle,\ \&desc,\ 1\ )\ )\ \{}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dynamic__link_8cpp_a25fd917902eaf363a17de44aead45093}{dynamic\_unlink}}(\ library\_handle\ );}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pin\_symbols(\ desc,\ descriptors,\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}}\ );}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00490\ \textcolor{preprocessor}{\ \ \ \ \#else\ \ }\textcolor{comment}{/*\ only\ \_\_TBB\_WEAK\_SYMBOLS\_PRESENT\ is\ defined\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ resolve\_symbols(\ library\_handle,\ descriptors,\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}}\ )\ )}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ library\_handle;}
\DoxyCodeLine{00493\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dynamic__link_8cpp_a25fd917902eaf363a17de44aead45093}{dynamic\_unlink}}(\ library\_handle\ );}
\DoxyCodeLine{00495\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_WIN32\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00497\ \ \ \ \ \}}
\DoxyCodeLine{00498\ }
\DoxyCodeLine{00499\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ save\_library\_handle(\ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}\ *\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}\ )\ \{}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{library__assert_8h_ae67ecef216a66c1cb60fdae8ea75918c}{LIBRARY\_ASSERT}}(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}},\ \textcolor{stringliteral}{"{}The\ library\ handle\ to\ store\ must\ be\ non-\/zero"{}}\ );}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}\ )}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \ \ \ \ *\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}\ =\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}};}
\DoxyCodeLine{00503\ \textcolor{preprocessor}{\ \ \ \ \#if\ \_\_TBB\_DYNAMIC\_LOAD\_ENABLED}}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \ \ \ \ handles.add(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}\ );}
\DoxyCodeLine{00506\ \textcolor{preprocessor}{\ \ \ \ \#endif\ }\textcolor{comment}{/*\ \_\_TBB\_DYNAMIC\_LOAD\_ENABLED\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00507\ \ \ \ \ \}}
\DoxyCodeLine{00508\ }
\DoxyCodeLine{00509\ \ \ \ \ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}\ dynamic\_load(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ library,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdynamic__link__descriptor}{dynamic\_link\_descriptor}}\ descriptors[],\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}}\ )\ \{}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ ::tbb::internal::suppress\_unused\_warning(\ library,\ descriptors,\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}}\ );}
\DoxyCodeLine{00511\ \textcolor{preprocessor}{\#if\ \_\_TBB\_DYNAMIC\_LOAD\_ENABLED}}
\DoxyCodeLine{00512\ }
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}}\ =\ \mbox{\hyperlink{ittnotify__static_8c_ae688d728e1acdfe5988c7db45d6f0166}{PATH\_MAX}}\ +\ 1;}
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{ittnotify__static_8h_a7016119bc831a22d1a351d56128518ed}{path}}[\ \mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}}\ ];}
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ rc\ =\ abs\_path(\ library,\ \mbox{\hyperlink{ittnotify__static_8h_a7016119bc831a22d1a351d56128518ed}{path}},\ \mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}}\ );}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ 0\ <\ rc\ \&\&\ rc\ <=\ \mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}}\ )\ \{}
\DoxyCodeLine{00517\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Prevent\ Windows\ from\ displaying\ silly\ message\ boxes\ if\ it\ fails\ to\ load\ library}}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ (e.g.\ because\ of\ MS\ runtime\ problems\ -\/\ one\ of\ those\ crazy\ manifest\ related\ ones)}}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__malloc__compliance_8cpp_a36cb3b01d81ffd844bbbfb54003e06ec}{UINT}}\ prev\_mode\ =\ SetErrorMode\ (SEM\_FAILCRITICALERRORS);}
\DoxyCodeLine{00521\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_WIN32\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}\ library\_handle\ =\ dlopen(\ \mbox{\hyperlink{ittnotify__static_8h_a7016119bc831a22d1a351d56128518ed}{path}},\ RTLD\_LAZY\ );}
\DoxyCodeLine{00523\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \ \ \ \ SetErrorMode\ (prev\_mode);}
\DoxyCodeLine{00525\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_WIN32\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ library\_handle\ )\ \{}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !resolve\_symbols(\ library\_handle,\ descriptors,\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}}\ )\ )\ \{}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ loaded\ library\ does\ not\ contain\ all\ the\ expected\ entry\ points}}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dynamic__link_8cpp_a25fd917902eaf363a17de44aead45093}{dynamic\_unlink}}(\ library\_handle\ );}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ library\_handle\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DYNAMIC\_LINK\_WARNING(\ \mbox{\hyperlink{dynamic__link_8h_a5b9b27e8cd42534836372ad00f3cfcc9a3a6dcba4f1afd3040184a5e909fcc7c1}{dl\_lib\_not\_found}},\ \mbox{\hyperlink{ittnotify__static_8h_a7016119bc831a22d1a351d56128518ed}{path}},\ dlerror()\ );}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ library\_handle;}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ rc>\mbox{\hyperlink{yyjson_8h_ac16e956eac9f5c3180afa8e80d4f098c}{len}}\ )}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DYNAMIC\_LINK\_WARNING(\ \mbox{\hyperlink{dynamic__link_8h_a5b9b27e8cd42534836372ad00f3cfcc9acd3109ab7299a9305e0fe9c9117d7db2}{dl\_buff\_too\_small}}\ );}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ rc\ ==\ 0\ means\ failing\ of\ init\_ap\_data\ so\ the\ warning\ has\ already\ been\ issued.}}
\DoxyCodeLine{00538\ }
\DoxyCodeLine{00539\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_DYNAMIC\_LOAD\_ENABLED\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00541\ \ \ \ \ \}}
\DoxyCodeLine{00542\ }
\DoxyCodeLine{00543\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{dynamic__link_8cpp_aca8bbbbc28690d986ae2636bae2754f7}{dynamic\_link}}(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ library,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdynamic__link__descriptor}{dynamic\_link\_descriptor}}\ descriptors[],\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}},\ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}\ *handle,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{test__split__node_8cpp_afea5520dffc22c33fbcc0eb5f7e3d448}{flags}}\ )\ \{}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ init\_dynamic\_link\_data();}
\DoxyCodeLine{00545\ }
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ May\ global\_symbols\_link\ find\ weak\ symbols?}}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}\ library\_handle\ =\ (\ \mbox{\hyperlink{test__split__node_8cpp_afea5520dffc22c33fbcc0eb5f7e3d448}{flags}}\ \&\ \mbox{\hyperlink{dynamic__link_8h_a4b4049ae5ac2e79f005302a820133ae7}{DYNAMIC\_LINK\_GLOBAL}}\ )\ ?\ global\_symbols\_link(\ library,\ descriptors,\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}}\ )\ :\ 0;}
\DoxyCodeLine{00548\ }
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !library\_handle\ \&\&\ (\ \mbox{\hyperlink{test__split__node_8cpp_afea5520dffc22c33fbcc0eb5f7e3d448}{flags}}\ \&\ \mbox{\hyperlink{dynamic__link_8h_a2f392c831bb8ae62465e8ff3679e4014}{DYNAMIC\_LINK\_LOAD}}\ )\ )}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \ \ \ \ library\_handle\ =\ dynamic\_load(\ library,\ descriptors,\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}}\ );}
\DoxyCodeLine{00551\ }
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !library\_handle\ \&\&\ (\ \mbox{\hyperlink{test__split__node_8cpp_afea5520dffc22c33fbcc0eb5f7e3d448}{flags}}\ \&\ \mbox{\hyperlink{dynamic__link_8h_aae08197c9f1936970593cd86b27a47fc}{DYNAMIC\_LINK\_WEAK}}\ )\ )}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ weak\_symbol\_link(\ descriptors,\ \mbox{\hyperlink{test__tbb__version_8cpp_a24f5b267393bc143788c08f4641a1830a4f6fc19321f5eedb3b03f420dfa7244c}{required}}\ );}
\DoxyCodeLine{00554\ }
\DoxyCodeLine{00555\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ library\_handle\ )\ \{}
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \ \ \ \ save\_library\_handle(\ library\_handle,\ handle\ );}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00560\ \ \ \ \ \}}
\DoxyCodeLine{00561\ }
\DoxyCodeLine{00562\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\_\_TBB\_WIN8UI\_SUPPORT*/}\textcolor{preprocessor}{}}
\DoxyCodeLine{00563\ \textcolor{preprocessor}{\#else\ }\textcolor{comment}{/*\ \_\_TBB\_WEAK\_SYMBOLS\_PRESENT\ ||\ \_\_TBB\_DYNAMIC\_LOAD\_ENABLED\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00564\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{dynamic__link_8cpp_aca8bbbbc28690d986ae2636bae2754f7}{dynamic\_link}}(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdynamic__link__descriptor}{dynamic\_link\_descriptor}}*,\ \textcolor{keywordtype}{size\_t},\ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}\ *handle,\ \textcolor{keywordtype}{int}\ )\ \{}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ handle\ )}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \ \ \ \ *handle=0;}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00568\ \ \ \ \ \}}
\DoxyCodeLine{00569\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{dynamic__link_8cpp_a25fd917902eaf363a17de44aead45093}{dynamic\_unlink}}(\ \mbox{\hyperlink{dynamic__link_8h_a36d1edf80a31c32c95dfa6c191b3d2dc}{dynamic\_link\_handle}}\ )\ \{\}}
\DoxyCodeLine{00570\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{dynamic__link_8cpp_ad65fa8b542fd95d199ca5e87ab2885df}{dynamic\_unlink\_all}}()\ \{\}}
\DoxyCodeLine{00571\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_WEAK\_SYMBOLS\_PRESENT\ ||\ \_\_TBB\_DYNAMIC\_LOAD\_ENABLED\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00572\ }
\DoxyCodeLine{00573\ \mbox{\hyperlink{omp__dynamic__link_8h_a44450fbc430b2b9e4031bf2ad8f86146}{CLOSE\_INTERNAL\_NAMESPACE}}}

\end{DoxyCode}
