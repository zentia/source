\doxysection{matrix\+\_\+multiplication.\+hpp}
\hypertarget{matrix__multiplication_8hpp_source}{}\label{matrix__multiplication_8hpp_source}\index{external/taskflow/benchmarks/matrix\_multiplication/matrix\_multiplication.hpp@{external/taskflow/benchmarks/matrix\_multiplication/matrix\_multiplication.hpp}}
\mbox{\hyperlink{matrix__multiplication_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ <cassert>}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <cstdio>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <chrono>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <iomanip>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <thread>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <random>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <cmath>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <atomic>}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}};}
\DoxyCodeLine{00013\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{double}\ **\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}},\ **\mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}},\ **\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}};}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ std::chrono::microseconds\ \mbox{\hyperlink{matrix__multiplication_8hpp_a63a8de22ed5476ad1218a3f119591467}{measure\_time\_taskflow}}(\textcolor{keywordtype}{unsigned});}
\DoxyCodeLine{00016\ std::chrono::microseconds\ \mbox{\hyperlink{matrix__multiplication_8hpp_abe421200f1c54cf2b0a27284582d4260}{measure\_time\_tbb}}(\textcolor{keywordtype}{unsigned});}
\DoxyCodeLine{00017\ std::chrono::microseconds\ \mbox{\hyperlink{matrix__multiplication_8hpp_ae328e8d87a5e59838f281a480902a5f0}{measure\_time\_omp}}(\textcolor{keywordtype}{unsigned});}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{matrix__multiplication_8hpp_ac2008160ca71d890d70063dd33590246}{allocate\_matrix}}()\ \{}
\DoxyCodeLine{00020\ \ \ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}**\textcolor{keyword}{>}(std::malloc(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double}*)));}
\DoxyCodeLine{00021\ \ \ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}**\textcolor{keyword}{>}(std::malloc(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double}*)));}
\DoxyCodeLine{00022\ \ \ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}**\textcolor{keyword}{>}(std::malloc(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double}*)));}
\DoxyCodeLine{00023\ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}};\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00024\ \ \ \ \ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}*\textcolor{keyword}{>}(std::malloc(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double})));}
\DoxyCodeLine{00025\ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}*\textcolor{keyword}{>}(std::malloc(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double})));}
\DoxyCodeLine{00026\ \ \ \ \ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}*\textcolor{keyword}{>}(std::malloc(\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double})));}
\DoxyCodeLine{00027\ \ \ \}}
\DoxyCodeLine{00028\ \}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{matrix__multiplication_8hpp_ac4508ddc412c14ee2c0003c122495e82}{deallocate\_matrix}}()\ \{}
\DoxyCodeLine{00031\ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}};\ ++\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}})\ \{}
\DoxyCodeLine{00032\ \ \ \ \ std::free(\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00033\ \ \ \ \ std::free(\mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00034\ \ \ \ \ std::free(\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]);}
\DoxyCodeLine{00035\ \ \ \}}
\DoxyCodeLine{00036\ \ \ std::free(\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}});}
\DoxyCodeLine{00037\ \ \ std::free(\mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}});}
\DoxyCodeLine{00038\ \ \ std::free(\mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}});}
\DoxyCodeLine{00039\ \}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{eabase_8h_adec1df1b8b51cb32b77e5b86fff46471}{int64\_t}}\ \mbox{\hyperlink{matrix__multiplication_8hpp_aa925a0c00292252d55931dddb50c9adb}{reduce\_sum}}()\ \{}
\DoxyCodeLine{00042\ \ \ \mbox{\hyperlink{eabase_8h_adec1df1b8b51cb32b77e5b86fff46471}{int64\_t}}\ \mbox{\hyperlink{test__parallel__for__each_8cpp_a539b07c7f86d3a9854ed81da50a4fb7d}{sum}}\ \{0\};}
\DoxyCodeLine{00043\ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}=0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}};\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++)\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}=0;\ \mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}<\mbox{\hyperlink{main-override-static_8c_a0240ac851181b84ac374872dc5434ee4}{N}};\ ++\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}})\ \{}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \mbox{\hyperlink{test__parallel__for__each_8cpp_a539b07c7f86d3a9854ed81da50a4fb7d}{sum}}\ +=\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}][\mbox{\hyperlink{tut__arithmetic__redux__minmax_8cpp_a39513f0f8d942bf9ef17b2e87ac6d34e}{j}}];}
\DoxyCodeLine{00046\ \ \ \ \ \}}
\DoxyCodeLine{00047\ \ \ \}}
\DoxyCodeLine{00048\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{test__parallel__for__each_8cpp_a539b07c7f86d3a9854ed81da50a4fb7d}{sum}};}
\DoxyCodeLine{00049\ \}}
\DoxyCodeLine{00050\ }

\end{DoxyCode}
