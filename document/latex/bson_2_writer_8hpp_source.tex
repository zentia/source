\doxysection{Writer.\+hpp}
\hypertarget{bson_2_writer_8hpp_source}{}\label{bson_2_writer_8hpp_source}\index{external/reflect-\/cpp/include/rfl/bson/Writer.hpp@{external/reflect-\/cpp/include/rfl/bson/Writer.hpp}}
\mbox{\hyperlink{bson_2_writer_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ RFL\_BSON\_WRITER\_HPP\_}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ RFL\_BSON\_WRITER\_HPP\_}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <bson/bson.h>}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <cstddef>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <exception>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <map>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <sstream>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <stdexcept>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <string\_view>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <type\_traits>}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <variant>}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_box_8hpp}{../Box.hpp}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_bytestring_8hpp}{../Bytestring.hpp}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_ref_8hpp}{../Ref.hpp}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_result_8hpp}{../Result.hpp}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{always__false_8hpp}{../always\_false.hpp}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ptr__cast_8hpp}{../internal/ptr\_cast.hpp}}"{}}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacerfl}{rfl}}\ \{}
\DoxyCodeLine{00025\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacerfl_1_1bson}{bson}}\ \{}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00028\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classrfl_1_1bson_1_1_writer_ac0980cb2ad1fd6565b38d74c60979c9e}{Writer}}\ \{}
\DoxyCodeLine{00029\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_b_s_o_n_type}{BSONType}}\ \{}
\DoxyCodeLine{00030\ \ \ \ \ bson\_t\ \mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_b_s_o_n_type_a4ff4f4c6952614c45ad949b850229532}{val\_}};}
\DoxyCodeLine{00031\ \ \ \};}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_is_array}{IsArray}}\ \{}
\DoxyCodeLine{00034\ \ \ \ \ bson\_array\_builder\_t*\ \mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_is_array_a232493ce18fffa1ef68def5dd97cda1e}{ptr\_}};}
\DoxyCodeLine{00035\ \ \ \};}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_is_object}{IsObject}}\ \{}
\DoxyCodeLine{00038\ \ \ \ \ bson\_t*\ \mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_is_object_a1bb32b2eb1a43a131451f9fc0067143c}{ptr\_}};}
\DoxyCodeLine{00039\ \ \ \};}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_is_root}{IsRoot}}\ \{\};}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classrfl_1_1bson_1_1_writer_aa3ea2d1bb1fa4095c58a3f3df907ed7b}{ParentType}}\ =\ std::variant<IsArray,\ IsObject,\ IsRoot>;}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00046\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_b_s_o_n_output_array_a5816e995be52419893a0699a033373ff}{BSONOutputArray}}\ \{}
\DoxyCodeLine{00047\ \ \ \ \ \mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_b_s_o_n_output_array_a5816e995be52419893a0699a033373ff}{BSONOutputArray}}(bson\_array\_builder\_t*\ \_val,\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_aa3ea2d1bb1fa4095c58a3f3df907ed7b}{ParentType}}\ \_parent)}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_b_s_o_n_output_array_a69c1c58bdcb2ae1500314b89cceaa093}{parent\_}}(\_parent),\ \mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_b_s_o_n_output_array_abdaeef7c6238cc60e5903dd498857374}{val\_}}(\_val)\ \{\}}
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_aa3ea2d1bb1fa4095c58a3f3df907ed7b}{ParentType}}\ \mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_b_s_o_n_output_array_a69c1c58bdcb2ae1500314b89cceaa093}{parent\_}};}
\DoxyCodeLine{00050\ \ \ \ \ bson\_array\_builder\_t*\ \mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_b_s_o_n_output_array_abdaeef7c6238cc60e5903dd498857374}{val\_}};}
\DoxyCodeLine{00051\ \ \ \};}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_b_s_o_n_output_object_a1e9512598f738262897469e487175415}{BSONOutputObject}}\ \{}
\DoxyCodeLine{00054\ \ \ \ \ \mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_b_s_o_n_output_object_a1e9512598f738262897469e487175415}{BSONOutputObject}}(bson\_t*\ \_val,\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_aa3ea2d1bb1fa4095c58a3f3df907ed7b}{ParentType}}\ \_parent)}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_b_s_o_n_output_object_a081cc4a095a4ed8f734de7aad3f60851}{parent\_}}(\_parent),\ \mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_b_s_o_n_output_object_abdc71e0ba10c2089e823a17db88e4c75}{val\_}}(\_val)\ \{\}}
\DoxyCodeLine{00056\ \ \ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_aa3ea2d1bb1fa4095c58a3f3df907ed7b}{ParentType}}\ \mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_b_s_o_n_output_object_a081cc4a095a4ed8f734de7aad3f60851}{parent\_}};}
\DoxyCodeLine{00057\ \ \ \ \ bson\_t*\ \mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_b_s_o_n_output_object_abdc71e0ba10c2089e823a17db88e4c75}{val\_}};}
\DoxyCodeLine{00058\ \ \ \};}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_b_s_o_n_output_var}{BSONOutputVar}}\ \{\};}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classrfl_1_1bson_1_1_writer_abad45e780d7d7e790ff1775ad63d5749}{OutputArrayType}}\ =\ \mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_b_s_o_n_output_array}{BSONOutputArray}};}
\DoxyCodeLine{00063\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a7759dda89d9d3f9b8b87d675358bb9e5}{OutputObjectType}}\ =\ \mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_b_s_o_n_output_object}{BSONOutputObject}};}
\DoxyCodeLine{00064\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a3cf819240f1cb3f397a9079b64545870}{OutputVarType}}\ =\ \mbox{\hyperlink{structrfl_1_1bson_1_1_writer_1_1_b_s_o_n_output_var}{BSONOutputVar}};}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_ac0980cb2ad1fd6565b38d74c60979c9e}{Writer}}(bson\_t*\ \_doc);}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a50c05fc47766c7d783bff1552112122d}{\string~Writer}}();}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_abad45e780d7d7e790ff1775ad63d5749}{OutputArrayType}}\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_add5f444ad31d5a49c79c9a1d697a8610}{array\_as\_root}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \_size)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a7759dda89d9d3f9b8b87d675358bb9e5}{OutputObjectType}}\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a2cfada81b1d7bbb9eb8f968f80c24403}{object\_as\_root}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \_size)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a3cf819240f1cb3f397a9079b64545870}{OutputVarType}}\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a716ff2c8b24ddbcd1b0763aa5ce68a39}{null\_as\_root}}()\ const\ noexcept;}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ template\ <class\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}>}
\DoxyCodeLine{00077\ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a3cf819240f1cb3f397a9079b64545870}{OutputVarType}}\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a15ff0e87efc670177b8684558241126d}{value\_as\_root}}(const\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \_var)\ const\ noexcept\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{namespacerfl_a31e80cea0068eae493065be48bba8d04}{rfl::always\_false\_v<T>}},}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}BSON\ only\ allows\ arrays\ or\ objects\ as\ its\ root."{}});}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a3cf819240f1cb3f397a9079b64545870}{OutputVarType}}\{\};}
\DoxyCodeLine{00081\ \ \ \}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_abad45e780d7d7e790ff1775ad63d5749}{OutputArrayType}}\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a7ec5a2f79b82184c92c12a2a6bcce212}{add\_array\_to\_array}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \_size,}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_abad45e780d7d7e790ff1775ad63d5749}{OutputArrayType}}*\ \_parent)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_abad45e780d7d7e790ff1775ad63d5749}{OutputArrayType}}\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_af1464f68f685ca08f1334af79535d3d6}{add\_array\_to\_object}}(\textcolor{keyword}{const}\ std::string\_view\&\ \_name,}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \_size,}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a7759dda89d9d3f9b8b87d675358bb9e5}{OutputObjectType}}*\ \_parent)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a7759dda89d9d3f9b8b87d675358bb9e5}{OutputObjectType}}\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a7fb85a276a8f86b6650fb1ae798961ed}{add\_object\_to\_array}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \_size,}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_abad45e780d7d7e790ff1775ad63d5749}{OutputArrayType}}*\ \_parent)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a7759dda89d9d3f9b8b87d675358bb9e5}{OutputObjectType}}\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a667ef3b3cc2ba91d7c47d92e2575a3f6}{add\_object\_to\_object}}(}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\_view\&\ \_name,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \_size,}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a7759dda89d9d3f9b8b87d675358bb9e5}{OutputObjectType}}*\ \_parent)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ T>}
\DoxyCodeLine{00098\ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a3cf819240f1cb3f397a9079b64545870}{OutputVarType}}\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_abcd7db2e39cf19e5e7707c8c7e025558}{add\_value\_to\_array}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \_var,}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_abad45e780d7d7e790ff1775ad63d5749}{OutputArrayType}}*\ \_parent)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same<std::remove\_cvref\_t<T>,\ std::string>())\ \{}
\DoxyCodeLine{00101\ \ \ \ \ \ \ bson\_array\_builder\_append\_utf8(\_parent-\/>val\_,\ \_var.c\_str(),}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\_var.size()));}
\DoxyCodeLine{00103\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same<std::remove\_cvref\_t<T>,}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerfl_ae134e12037ae435ba35e99a44abfb9d8}{rfl::Bytestring}}>())\ \{}
\DoxyCodeLine{00105\ \ \ \ \ \ \ bson\_array\_builder\_append\_binary(}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \_parent-\/>val\_,\ BSON\_SUBTYPE\_BINARY,}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerfl_1_1internal_a0e3f14355090a86bc6064dff6368347b}{internal::ptr\_cast<const\ uint8\_t*>}}(\_var.c\_str()),}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\textcolor{keyword}{>}(\_var.size()));}
\DoxyCodeLine{00109\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same<std::remove\_cvref\_t<T>,\ \textcolor{keywordtype}{bool}>())\ \{}
\DoxyCodeLine{00110\ \ \ \ \ \ \ bson\_array\_builder\_append\_bool(\_parent-\/>val\_,\ \_var);}
\DoxyCodeLine{00111\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_floating\_point<std::remove\_cvref\_t<T>>())\ \{}
\DoxyCodeLine{00112\ \ \ \ \ \ \ bson\_array\_builder\_append\_double(\_parent-\/>val\_,}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(\_var));}
\DoxyCodeLine{00114\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_integral<std::remove\_cvref\_t<T>>())\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ bson\_array\_builder\_append\_int64(\_parent-\/>val\_,}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}std::int64\_t\textcolor{keyword}{>}(\_var));}
\DoxyCodeLine{00117\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same<std::remove\_cvref\_t<T>,\ bson\_oid\_t>())\ \{}
\DoxyCodeLine{00118\ \ \ \ \ \ \ bson\_array\_builder\_append\_oid(\_parent-\/>val\_,\ \&\_var);}
\DoxyCodeLine{00119\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{namespacerfl_a31e80cea0068eae493065be48bba8d04}{rfl::always\_false\_v<T>}},\ \textcolor{stringliteral}{"{}Unsupported\ type."{}});}
\DoxyCodeLine{00121\ \ \ \ \ \}}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a3cf819240f1cb3f397a9079b64545870}{OutputVarType}}\{\};}
\DoxyCodeLine{00123\ \ \ \}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ T>}
\DoxyCodeLine{00126\ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a3cf819240f1cb3f397a9079b64545870}{OutputVarType}}\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a7fbec28bb3fd057c75087a90e5b396bb}{add\_value\_to\_object}}(\textcolor{keyword}{const}\ std::string\_view\&\ \_name,}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \_var,}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a7759dda89d9d3f9b8b87d675358bb9e5}{OutputObjectType}}*\ \_parent)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same<std::remove\_cvref\_t<T>,\ std::string>())\ \{}
\DoxyCodeLine{00130\ \ \ \ \ \ \ bson\_append\_utf8(\_parent-\/>val\_,\ \_name.data(),}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\_name.size()),\ \_var.c\_str(),}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\_var.size()));}
\DoxyCodeLine{00133\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same<std::remove\_cvref\_t<T>,}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerfl_ae134e12037ae435ba35e99a44abfb9d8}{rfl::Bytestring}}>())\ \{}
\DoxyCodeLine{00135\ \ \ \ \ \ \ bson\_append\_binary(\_parent-\/>val\_,\ \_name.data(),}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\_name.size()),\ BSON\_SUBTYPE\_BINARY,}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacerfl_1_1internal_a0e3f14355090a86bc6064dff6368347b}{internal::ptr\_cast<const\ uint8\_t*>}}(\_var.c\_str()),}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{eabase_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\textcolor{keyword}{>}(\_var.size()));}
\DoxyCodeLine{00139\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same<std::remove\_cvref\_t<T>,\ \textcolor{keywordtype}{bool}>())\ \{}
\DoxyCodeLine{00140\ \ \ \ \ \ \ bson\_append\_bool(\_parent-\/>val\_,\ \_name.data(),}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\_name.size()),\ \_var);}
\DoxyCodeLine{00142\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_floating\_point<std::remove\_cvref\_t<T>>())\ \{}
\DoxyCodeLine{00143\ \ \ \ \ \ \ bson\_append\_double(\_parent-\/>val\_,\ \_name.data(),}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\_name.size()),}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(\_var));}
\DoxyCodeLine{00146\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_integral<std::remove\_cvref\_t<T>>())\ \{}
\DoxyCodeLine{00147\ \ \ \ \ \ \ bson\_append\_int64(\_parent-\/>val\_,\ \_name.data(),}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\_name.size()),}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}std::int64\_t\textcolor{keyword}{>}(\_var));}
\DoxyCodeLine{00150\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same<std::remove\_cvref\_t<T>,\ bson\_oid\_t>())\ \{}
\DoxyCodeLine{00151\ \ \ \ \ \ \ bson\_append\_oid(\_parent-\/>val\_,\ \_name.data(),}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\_name.size()),\ \&\_var);}
\DoxyCodeLine{00153\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{namespacerfl_a31e80cea0068eae493065be48bba8d04}{rfl::always\_false\_v<T>}},\ \textcolor{stringliteral}{"{}Unsupported\ type."{}});}
\DoxyCodeLine{00155\ \ \ \ \ \}}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a3cf819240f1cb3f397a9079b64545870}{OutputVarType}}\{\};}
\DoxyCodeLine{00157\ \ \ \}}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a3cf819240f1cb3f397a9079b64545870}{OutputVarType}}\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_adf8772758d773be677b69a821fb44fc3}{add\_null\_to\_array}}(\mbox{\hyperlink{classrfl_1_1bson_1_1_writer_abad45e780d7d7e790ff1775ad63d5749}{OutputArrayType}}*\ \_parent)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a3cf819240f1cb3f397a9079b64545870}{OutputVarType}}\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a56e5fb610661f004439cbefe4a928a9d}{add\_null\_to\_object}}(\textcolor{keyword}{const}\ std::string\_view\&\ \_name,}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a7759dda89d9d3f9b8b87d675358bb9e5}{OutputObjectType}}*\ \_parent)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a3ddce24fa70ec934a949aeb5abacea8f}{end\_array}}(\mbox{\hyperlink{classrfl_1_1bson_1_1_writer_abad45e780d7d7e790ff1775ad63d5749}{OutputArrayType}}*\ \_arr)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a70b35fd8220da91fee717201a342f0e5}{end\_object}}(\mbox{\hyperlink{classrfl_1_1bson_1_1_writer_a7759dda89d9d3f9b8b87d675358bb9e5}{OutputObjectType}}*\ \_obj)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00171\ \ \ bson\_t*\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_aa032ab442cf0ff96b8d6c3dbaf40c9b6}{doc\_}};}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00174\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classrfl_1_1_ref}{rfl::Ref<std::vector<rfl::Box<BSONType>}}>>\ \mbox{\hyperlink{classrfl_1_1bson_1_1_writer_afcf8b06efd601dcad2b511a181e0eff2}{subdocs\_}};}
\DoxyCodeLine{00175\ \};}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \}\ \ \textcolor{comment}{//\ namespace\ bson}}
\DoxyCodeLine{00178\ \}\ \ \textcolor{comment}{//\ namespace\ rfl}}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
