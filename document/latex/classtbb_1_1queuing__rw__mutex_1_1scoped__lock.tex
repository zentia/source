\doxysection{tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock类 参考}
\hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock}{}\label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}


The scoped locking pattern  




{\ttfamily \#include $<$queuing\+\_\+rw\+\_\+mutex.\+h$>$}



类 tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock 继承关系图\+:
% FIG 0


tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock 的协作图\+:
% FIG 1
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a1ae3792726dcff8da1f2c5366fb2b754}{scoped\+\_\+lock}} ()
\begin{DoxyCompactList}\small\item\em Construct lock that has not acquired a mutex. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_af1b55ca1839c9c7c2cd779cd2dd9c474}{scoped\+\_\+lock}} (\mbox{\hyperlink{classtbb_1_1queuing__rw__mutex}{queuing\+\_\+rw\+\_\+mutex}} \&\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}, \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{json_2write__and__read_8hpp_a8d72d49ed34d37da786334a55f22b909}{write}}=\mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}})
\begin{DoxyCompactList}\small\item\em Acquire lock on given mutex. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a6cb16cc55f884bbbd5a69430c47b288f}{\texorpdfstring{$\sim$}{\string~}scoped\+\_\+lock}} ()
\begin{DoxyCompactList}\small\item\em Release lock (if lock is held). \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_ab4bf2fb86d6a418f9ea36474eb8893f9}{acquire}} (\mbox{\hyperlink{classtbb_1_1queuing__rw__mutex}{queuing\+\_\+rw\+\_\+mutex}} \&\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}, \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{json_2write__and__read_8hpp_a8d72d49ed34d37da786334a55f22b909}{write}}=\mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}})
\begin{DoxyCompactList}\small\item\em Acquire lock on given mutex. \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a4843d40dddc37c1aa3444e27d35d2433}{try\+\_\+acquire}} (\mbox{\hyperlink{classtbb_1_1queuing__rw__mutex}{queuing\+\_\+rw\+\_\+mutex}} \&\mbox{\hyperlink{_angle_axis__mimic__euler_8cpp_ab3cd915d758008bd19d0f2428fbb354a}{m}}, \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{json_2write__and__read_8hpp_a8d72d49ed34d37da786334a55f22b909}{write}}=\mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}})
\begin{DoxyCompactList}\small\item\em Acquire lock on given mutex if free (i.\+e. non-\/blocking) \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a50fb02b77f02a01c74754d163157ec77}{release}} ()
\begin{DoxyCompactList}\small\item\em Release lock. \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_ae0f28ecfbbc5f8b3024cd47048b72b5b}{upgrade\+\_\+to\+\_\+writer}} ()
\begin{DoxyCompactList}\small\item\em Upgrade reader to become a writer. \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_af0af63035147a3d8422f8c8d7b8d2629}{downgrade\+\_\+to\+\_\+reader}} ()
\begin{DoxyCompactList}\small\item\em Downgrade writer to become a reader. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private 类型}
\begin{DoxyCompactItemize}
\item 
typedef unsigned char \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a353247a87ec975f8fe8f1b0559fb5eca}{state\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Private 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a080c26691aad8bac8947724114e5f664}{initialize}} ()
\begin{DoxyCompactList}\small\item\em Initialize fields to mean "{}no lock held"{}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a3513272129edcdae064da95d71315af5}{acquire\+\_\+internal\+\_\+lock}} ()
\begin{DoxyCompactList}\small\item\em Acquire the internal lock \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a497dd2f219507fdd2d32ea91d44c5ac8}{try\+\_\+acquire\+\_\+internal\+\_\+lock}} ()
\begin{DoxyCompactList}\small\item\em Try to acquire the internal lock \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_aca691e3a0f5debfe5965b071357bddcd}{release\+\_\+internal\+\_\+lock}} ()
\begin{DoxyCompactList}\small\item\em Release the internal lock \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a61d83842c6eacfbc63fa2da05ebe9973}{wait\+\_\+for\+\_\+release\+\_\+of\+\_\+internal\+\_\+lock}} ()
\begin{DoxyCompactList}\small\item\em Wait for internal lock to be released \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_abbfa06c642501544d508864ad072e883}{unblock\+\_\+or\+\_\+wait\+\_\+on\+\_\+internal\+\_\+lock}} (uintptr\+\_\+t)
\begin{DoxyCompactList}\small\item\em \doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} helper function \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private 属性}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtbb_1_1queuing__rw__mutex}{queuing\+\_\+rw\+\_\+mutex}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_afb13f1f084f62193988095893cdc6093}{my\+\_\+mutex}}
\begin{DoxyCompactList}\small\item\em The pointer to the mutex owned, or NULL if not holding a mutex. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock}{scoped\+\_\+lock}} \texorpdfstring{$\ast$}{*}\+\_\+\+\_\+\+TBB\+\_\+atomic \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_ae5468283fd60c1c4283f6a4efab419ab}{my\+\_\+prev}}
\begin{DoxyCompactList}\small\item\em The pointer to the previous and next competitors for a mutex \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock}{scoped\+\_\+lock}} \texorpdfstring{$\ast$}{*}\+\_\+\+\_\+\+TBB\+\_\+atomic \texorpdfstring{$\ast$}{*}\+\_\+\+\_\+\+TBB\+\_\+atomic \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a50cf5dff00f6644f6608cb2fb37b4733}{my\+\_\+next}}
\item 
\mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic}}$<$ \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a353247a87ec975f8fe8f1b0559fb5eca}{state\+\_\+t}} $>$ \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a63577549e9bb49d85d9979b62d06f956}{my\+\_\+state}}
\begin{DoxyCompactList}\small\item\em \doxylink{struct_state}{State} of the request\+: reader, writer, active reader, other service states \end{DoxyCompactList}\item 
unsigned char \+\_\+\+\_\+\+TBB\+\_\+atomic \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_acaf818b6b0a341e93e1ad99eacf75128}{my\+\_\+going}}
\begin{DoxyCompactList}\small\item\em The local spin-\/wait variable \end{DoxyCompactList}\item 
unsigned char \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_aa4f5cc6aa669484f354d547bcff217b4}{my\+\_\+internal\+\_\+lock}}
\begin{DoxyCompactList}\small\item\em \doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} tiny internal lock \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
The scoped locking pattern 

It helps to avoid the common problem of forgetting to release lock. It also nicely provides the "{}node"{} for queuing locks. 

\doxysubsection{成员类型定义说明}
\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a353247a87ec975f8fe8f1b0559fb5eca}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!state\_t@{state\_t}}
\index{state\_t@{state\_t}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{state\_t}{state\_t}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a353247a87ec975f8fe8f1b0559fb5eca} 
typedef unsigned char \mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a353247a87ec975f8fe8f1b0559fb5eca}{tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::state\+\_\+t}}\hspace{0.3cm}{\ttfamily [private]}}



\doxysubsection{构造及析构函数说明}
\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a1ae3792726dcff8da1f2c5366fb2b754}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!scoped\_lock@{scoped\_lock}}
\index{scoped\_lock@{scoped\_lock}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{scoped\_lock()}{scoped\_lock()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a1ae3792726dcff8da1f2c5366fb2b754} 
tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::scoped\+\_\+lock (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Construct lock that has not acquired a mutex. 

Equivalent to zero-\/initialization of \texorpdfstring{$\ast$}{*}this. 函数调用图\+:
% FIG 2
\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_af1b55ca1839c9c7c2cd779cd2dd9c474}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!scoped\_lock@{scoped\_lock}}
\index{scoped\_lock@{scoped\_lock}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{scoped\_lock()}{scoped\_lock()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_af1b55ca1839c9c7c2cd779cd2dd9c474} 
tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::scoped\+\_\+lock (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtbb_1_1queuing__rw__mutex}{queuing\+\_\+rw\+\_\+mutex}} \&}]{m}{, }\item[{\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}}]{write}{ = {\ttfamily \mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}}}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Acquire lock on given mutex. 

函数调用图\+:
% FIG 3
\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a6cb16cc55f884bbbd5a69430c47b288f}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!````~scoped\_lock@{\texorpdfstring{$\sim$}{\string~}scoped\_lock}}
\index{````~scoped\_lock@{\texorpdfstring{$\sim$}{\string~}scoped\_lock}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}scoped\_lock()}{\string~scoped\_lock()}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a6cb16cc55f884bbbd5a69430c47b288f} 
tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::\texorpdfstring{$\sim$}{\string~}scoped\+\_\+lock (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Release lock (if lock is held). 

函数调用图\+:
% FIG 4


\doxysubsection{成员函数说明}
\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_ab4bf2fb86d6a418f9ea36474eb8893f9}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!acquire@{acquire}}
\index{acquire@{acquire}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{acquire()}{acquire()}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_ab4bf2fb86d6a418f9ea36474eb8893f9} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::acquire (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtbb_1_1queuing__rw__mutex}{queuing\+\_\+rw\+\_\+mutex}} \&}]{m}{, }\item[{\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}}]{write}{ = {\ttfamily \mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}}}}\end{DoxyParamCaption})}



Acquire lock on given mutex. 

\doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} method to acquire \doxylink{classtbb_1_1queuing__rw__mutex}{queuing\+\_\+rw\+\_\+mutex} lock 函数调用图\+:
% FIG 5
\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a3513272129edcdae064da95d71315af5}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!acquire\_internal\_lock@{acquire\_internal\_lock}}
\index{acquire\_internal\_lock@{acquire\_internal\_lock}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{acquire\_internal\_lock()}{acquire\_internal\_lock()}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a3513272129edcdae064da95d71315af5} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::acquire\+\_\+internal\+\_\+lock (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Acquire the internal lock 

函数调用图\+:
% FIG 6
\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_af0af63035147a3d8422f8c8d7b8d2629}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!downgrade\_to\_reader@{downgrade\_to\_reader}}
\index{downgrade\_to\_reader@{downgrade\_to\_reader}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{downgrade\_to\_reader()}{downgrade\_to\_reader()}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_af0af63035147a3d8422f8c8d7b8d2629} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::downgrade\+\_\+to\+\_\+reader (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Downgrade writer to become a reader. 

函数调用图\+:
% FIG 7
\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a080c26691aad8bac8947724114e5f664}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!initialize@{initialize}}
\index{initialize@{initialize}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{initialize()}{initialize()}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a080c26691aad8bac8947724114e5f664} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::initialize (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Initialize fields to mean "{}no lock held"{}. 

\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a50fb02b77f02a01c74754d163157ec77}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!release@{release}}
\index{release@{release}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{release()}{release()}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a50fb02b77f02a01c74754d163157ec77} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::release (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Release lock. 

\doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} method to release \doxylink{classtbb_1_1queuing__rw__mutex}{queuing\+\_\+rw\+\_\+mutex} lock 函数调用图\+:
% FIG 8
\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_aca691e3a0f5debfe5965b071357bddcd}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!release\_internal\_lock@{release\_internal\_lock}}
\index{release\_internal\_lock@{release\_internal\_lock}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{release\_internal\_lock()}{release\_internal\_lock()}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_aca691e3a0f5debfe5965b071357bddcd} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::release\+\_\+internal\+\_\+lock (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Release the internal lock 

\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a4843d40dddc37c1aa3444e27d35d2433}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!try\_acquire@{try\_acquire}}
\index{try\_acquire@{try\_acquire}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{try\_acquire()}{try\_acquire()}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a4843d40dddc37c1aa3444e27d35d2433} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::try\+\_\+acquire (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtbb_1_1queuing__rw__mutex}{queuing\+\_\+rw\+\_\+mutex}} \&}]{m}{, }\item[{\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}}]{write}{ = {\ttfamily \mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}}}}\end{DoxyParamCaption})}



Acquire lock on given mutex if free (i.\+e. non-\/blocking) 

\doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} method to acquire \doxylink{classtbb_1_1queuing__rw__mutex}{queuing\+\_\+rw\+\_\+mutex} if it is free 函数调用图\+:
% FIG 9
\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a497dd2f219507fdd2d32ea91d44c5ac8}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!try\_acquire\_internal\_lock@{try\_acquire\_internal\_lock}}
\index{try\_acquire\_internal\_lock@{try\_acquire\_internal\_lock}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{try\_acquire\_internal\_lock()}{try\_acquire\_internal\_lock()}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a497dd2f219507fdd2d32ea91d44c5ac8} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::try\+\_\+acquire\+\_\+internal\+\_\+lock (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Try to acquire the internal lock 

Returns true if lock was successfully acquired. 函数调用图\+:
% FIG 10
\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_abbfa06c642501544d508864ad072e883}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!unblock\_or\_wait\_on\_internal\_lock@{unblock\_or\_wait\_on\_internal\_lock}}
\index{unblock\_or\_wait\_on\_internal\_lock@{unblock\_or\_wait\_on\_internal\_lock}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{unblock\_or\_wait\_on\_internal\_lock()}{unblock\_or\_wait\_on\_internal\_lock()}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_abbfa06c642501544d508864ad072e883} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::unblock\+\_\+or\+\_\+wait\+\_\+on\+\_\+internal\+\_\+lock (\begin{DoxyParamCaption}\item[{uintptr\+\_\+t}]{flag}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



\doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} helper function 

函数调用图\+:
% FIG 11
\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_ae0f28ecfbbc5f8b3024cd47048b72b5b}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!upgrade\_to\_writer@{upgrade\_to\_writer}}
\index{upgrade\_to\_writer@{upgrade\_to\_writer}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{upgrade\_to\_writer()}{upgrade\_to\_writer()}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_ae0f28ecfbbc5f8b3024cd47048b72b5b} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::upgrade\+\_\+to\+\_\+writer (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Upgrade reader to become a writer. 

Returns whether the upgrade happened without releasing and re-\/acquiring the lock 函数调用图\+:
% FIG 12
\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a61d83842c6eacfbc63fa2da05ebe9973}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!wait\_for\_release\_of\_internal\_lock@{wait\_for\_release\_of\_internal\_lock}}
\index{wait\_for\_release\_of\_internal\_lock@{wait\_for\_release\_of\_internal\_lock}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{wait\_for\_release\_of\_internal\_lock()}{wait\_for\_release\_of\_internal\_lock()}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a61d83842c6eacfbc63fa2da05ebe9973} 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::wait\+\_\+for\+\_\+release\+\_\+of\+\_\+internal\+\_\+lock (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Wait for internal lock to be released 



\doxysubsection{类成员变量说明}
\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_acaf818b6b0a341e93e1ad99eacf75128}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!my\_going@{my\_going}}
\index{my\_going@{my\_going}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{my\_going}{my\_going}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_acaf818b6b0a341e93e1ad99eacf75128} 
unsigned char \+\_\+\+\_\+\+TBB\+\_\+atomic tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::my\+\_\+going\hspace{0.3cm}{\ttfamily [private]}}



The local spin-\/wait variable 

Corresponds to "{}spin"{} in the pseudocode but inverted for the sake of zero-\/initialization \Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_aa4f5cc6aa669484f354d547bcff217b4}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!my\_internal\_lock@{my\_internal\_lock}}
\index{my\_internal\_lock@{my\_internal\_lock}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{my\_internal\_lock}{my\_internal\_lock}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_aa4f5cc6aa669484f354d547bcff217b4} 
unsigned char tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::my\+\_\+internal\+\_\+lock\hspace{0.3cm}{\ttfamily [private]}}



\doxylink{bench__gemm_8cpp_addc86e8508f14411ec98f521c520f875}{A} tiny internal lock 

\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_afb13f1f084f62193988095893cdc6093}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!my\_mutex@{my\_mutex}}
\index{my\_mutex@{my\_mutex}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{my\_mutex}{my\_mutex}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_afb13f1f084f62193988095893cdc6093} 
\mbox{\hyperlink{classtbb_1_1queuing__rw__mutex}{queuing\+\_\+rw\+\_\+mutex}}\texorpdfstring{$\ast$}{*} tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::my\+\_\+mutex\hspace{0.3cm}{\ttfamily [private]}}



The pointer to the mutex owned, or NULL if not holding a mutex. 

\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a50cf5dff00f6644f6608cb2fb37b4733}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!my\_next@{my\_next}}
\index{my\_next@{my\_next}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{my\_next}{my\_next}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a50cf5dff00f6644f6608cb2fb37b4733} 
\mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock}{scoped\+\_\+lock}}\texorpdfstring{$\ast$}{*} \+\_\+\+\_\+\+TBB\+\_\+atomic \texorpdfstring{$\ast$}{*} \+\_\+\+\_\+\+TBB\+\_\+atomic tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::my\+\_\+next\hspace{0.3cm}{\ttfamily [private]}}

\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_ae5468283fd60c1c4283f6a4efab419ab}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!my\_prev@{my\_prev}}
\index{my\_prev@{my\_prev}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{my\_prev}{my\_prev}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_ae5468283fd60c1c4283f6a4efab419ab} 
\mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock}{scoped\+\_\+lock}}\texorpdfstring{$\ast$}{*} \+\_\+\+\_\+\+TBB\+\_\+atomic tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::my\+\_\+prev\hspace{0.3cm}{\ttfamily [private]}}



The pointer to the previous and next competitors for a mutex 

\Hypertarget{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a63577549e9bb49d85d9979b62d06f956}\index{tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}!my\_state@{my\_state}}
\index{my\_state@{my\_state}!tbb::queuing\_rw\_mutex::scoped\_lock@{tbb::queuing\_rw\_mutex::scoped\_lock}}
\doxysubsubsection{\texorpdfstring{my\_state}{my\_state}}
{\footnotesize\ttfamily \label{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a63577549e9bb49d85d9979b62d06f956} 
\mbox{\hyperlink{sugar_8h_a48f1c51623545bd4f58fbab2fa6091d0}{atomic}}$<$\mbox{\hyperlink{classtbb_1_1queuing__rw__mutex_1_1scoped__lock_a353247a87ec975f8fe8f1b0559fb5eca}{state\+\_\+t}}$>$ tbb\+::queuing\+\_\+rw\+\_\+mutex\+::scoped\+\_\+lock\+::my\+\_\+state\hspace{0.3cm}{\ttfamily [private]}}



\doxylink{struct_state}{State} of the request\+: reader, writer, active reader, other service states 



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/taskflow/3rd-\/party/tbb/include/tbb/\mbox{\hyperlink{queuing__rw__mutex_8h}{queuing\+\_\+rw\+\_\+mutex.\+h}}\item 
external/taskflow/3rd-\/party/tbb/src/tbb/\mbox{\hyperlink{queuing__rw__mutex_8cpp}{queuing\+\_\+rw\+\_\+mutex.\+cpp}}\end{DoxyCompactItemize}
