\doxysection{Heap Introspection}
\hypertarget{group__analysis}{}\label{group__analysis}\index{Heap Introspection@{Heap Introspection}}
\doxysubsubsection*{类}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structmi__heap__area__s}{mi\+\_\+heap\+\_\+area\+\_\+s}}
\end{DoxyCompactItemize}
\doxysubsubsection*{类型定义}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{structmi__heap__area__s}{mi\+\_\+heap\+\_\+area\+\_\+s}} \mbox{\hyperlink{group__analysis_gaf02b9aae093aa115fe44e6ee130b09c7}{mi\+\_\+heap\+\_\+area\+\_\+t}}
\item 
typedef \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{group__analysis_ga8255dc9371e6b299d9802a610c4e34ec}{mi\+\_\+block\+\_\+visit\+\_\+fun}}(const \mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\+\_\+heap\+\_\+t}} \texorpdfstring{$\ast$}{*}heap, const \mbox{\hyperlink{group__analysis_gaf02b9aae093aa115fe44e6ee130b09c7}{mi\+\_\+heap\+\_\+area\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{mimalloc_8h_adf0fdf81d937dd5a837e95aff8fc0a49}{area}}, \mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{mimalloc_8h_a840cb394e7433c7fe0c4875a3030c955}{block}}, size\+\_\+t \mbox{\hyperlink{mimalloc_8h_ad313afb4b08c7ea8d6b06416db616f63}{block\+\_\+size}}, \mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}})
\end{DoxyCompactItemize}
\doxysubsubsection*{函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{group__analysis_gaa862aa8ed8d57d84cae41fc1022d71af}{mi\+\_\+heap\+\_\+contains\+\_\+block}} (\mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\+\_\+heap\+\_\+t}} \texorpdfstring{$\ast$}{*}heap, const \mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{group__analysis_ga0d67c1789faaa15ff366c024fcaf6377}{mi\+\_\+heap\+\_\+check\+\_\+owned}} (\mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\+\_\+heap\+\_\+t}} \texorpdfstring{$\ast$}{*}heap, const \mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{group__analysis_ga628c237489c2679af84a4d0d143b3dd5}{mi\+\_\+check\+\_\+owned}} (const \mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{group__analysis_ga70c46687dc6e9dc98b232b02646f8bed}{mi\+\_\+heap\+\_\+visit\+\_\+blocks}} (const \mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\+\_\+heap\+\_\+t}} \texorpdfstring{$\ast$}{*}heap, \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} visit\+\_\+all\+\_\+blocks, \mbox{\hyperlink{group__analysis_ga8255dc9371e6b299d9802a610c4e34ec}{mi\+\_\+block\+\_\+visit\+\_\+fun}} \texorpdfstring{$\ast$}{*}visitor, \mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}})
\item 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} \mbox{\hyperlink{group__analysis_ga6a4865a887b2ec5247854af61562503c}{mi\+\_\+abandoned\+\_\+visit\+\_\+blocks}} (\mbox{\hyperlink{group__extended_ga8c0bcd1fee27c7641e9c3c0d991b3b7d}{mi\+\_\+subproc\+\_\+id\+\_\+t}} subproc\+\_\+id, \mbox{\hyperlink{sugar_8h_ae88a82478e3818cade3f598c25437904}{int}} heap\+\_\+tag, \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} visit\+\_\+blocks, \mbox{\hyperlink{group__analysis_ga8255dc9371e6b299d9802a610c4e34ec}{mi\+\_\+block\+\_\+visit\+\_\+fun}} \texorpdfstring{$\ast$}{*}visitor, \mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}})
\begin{DoxyCompactList}\small\item\em Visit all areas and blocks in abandoned heaps. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
Inspect the heap at runtime. 

\doxysubsection{类型定义说明}
\Hypertarget{group__analysis_ga8255dc9371e6b299d9802a610c4e34ec}\index{Heap Introspection@{Heap Introspection}!mi\_block\_visit\_fun@{mi\_block\_visit\_fun}}
\index{mi\_block\_visit\_fun@{mi\_block\_visit\_fun}!Heap Introspection@{Heap Introspection}}
\doxysubsubsection{\texorpdfstring{mi\_block\_visit\_fun}{mi\_block\_visit\_fun}}
{\footnotesize\ttfamily \label{group__analysis_ga8255dc9371e6b299d9802a610c4e34ec} 
typedef \mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} mi\+\_\+block\+\_\+visit\+\_\+fun(const \mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\+\_\+heap\+\_\+t}} \texorpdfstring{$\ast$}{*}heap, const \mbox{\hyperlink{group__analysis_gaf02b9aae093aa115fe44e6ee130b09c7}{mi\+\_\+heap\+\_\+area\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{mimalloc_8h_adf0fdf81d937dd5a837e95aff8fc0a49}{area}}, \mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{mimalloc_8h_a840cb394e7433c7fe0c4875a3030c955}{block}}, size\+\_\+t \mbox{\hyperlink{mimalloc_8h_ad313afb4b08c7ea8d6b06416db616f63}{block\+\_\+size}}, \mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}})}

Visitor function passed to \doxylink{group__analysis_ga70c46687dc6e9dc98b232b02646f8bed}{mi\+\_\+heap\+\_\+visit\+\_\+blocks()} \begin{DoxyReturn}{返回}
{\itshape true} if ok, {\itshape false} to stop visiting (i.\+e. break)
\end{DoxyReturn}
This function is always first called for every {\itshape area} with {\itshape block} as a {\itshape NULL} pointer. If {\itshape visit\+\_\+all\+\_\+blocks} was {\itshape true}, the function is then called for every allocated block in that area. \Hypertarget{group__analysis_gaf02b9aae093aa115fe44e6ee130b09c7}\index{Heap Introspection@{Heap Introspection}!mi\_heap\_area\_t@{mi\_heap\_area\_t}}
\index{mi\_heap\_area\_t@{mi\_heap\_area\_t}!Heap Introspection@{Heap Introspection}}
\doxysubsubsection{\texorpdfstring{mi\_heap\_area\_t}{mi\_heap\_area\_t}}
{\footnotesize\ttfamily \label{group__analysis_gaf02b9aae093aa115fe44e6ee130b09c7} 
typedef struct \mbox{\hyperlink{structmi__heap__area__s}{mi\+\_\+heap\+\_\+area\+\_\+s}} \mbox{\hyperlink{group__analysis_gaf02b9aae093aa115fe44e6ee130b09c7}{mi\+\_\+heap\+\_\+area\+\_\+t}}}

An area of heap space contains blocks of a single size. The bytes in freed blocks are {\ttfamily committed -\/ used}. 

\doxysubsection{函数说明}
\Hypertarget{group__analysis_ga6a4865a887b2ec5247854af61562503c}\index{Heap Introspection@{Heap Introspection}!mi\_abandoned\_visit\_blocks@{mi\_abandoned\_visit\_blocks}}
\index{mi\_abandoned\_visit\_blocks@{mi\_abandoned\_visit\_blocks}!Heap Introspection@{Heap Introspection}}
\doxysubsubsection{\texorpdfstring{mi\_abandoned\_visit\_blocks()}{mi\_abandoned\_visit\_blocks()}}
{\footnotesize\ttfamily \label{group__analysis_ga6a4865a887b2ec5247854af61562503c} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} mi\+\_\+abandoned\+\_\+visit\+\_\+blocks (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__extended_ga8c0bcd1fee27c7641e9c3c0d991b3b7d}{mi\+\_\+subproc\+\_\+id\+\_\+t}}}]{subproc\+\_\+id}{, }\item[{\mbox{\hyperlink{sugar_8h_ae88a82478e3818cade3f598c25437904}{int}}}]{heap\+\_\+tag}{, }\item[{\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}}]{visit\+\_\+blocks}{, }\item[{\mbox{\hyperlink{group__analysis_ga8255dc9371e6b299d9802a610c4e34ec}{mi\+\_\+block\+\_\+visit\+\_\+fun}} \texorpdfstring{$\ast$}{*}}]{visitor}{, }\item[{\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*}}]{arg}{}\end{DoxyParamCaption})}



Visit all areas and blocks in abandoned heaps. 


\begin{DoxyParams}{参数}
{\em subproc\+\_\+id} & The sub-\/process id associated with the abandoned heaps. \\
\hline
{\em heap\+\_\+tag} & Visit only abandoned memory with the specified heap tag, use -\/1 to visit all abandoned memory. \\
\hline
{\em visit\+\_\+blocks} & If {\itshape true} visits all allocated blocks, otherwise {\itshape visitor} is only called for every heap area. \\
\hline
{\em visitor} & This function is called for every area in the heap (with {\itshape block} as {\itshape NULL}). If {\itshape visit\+\_\+all\+\_\+blocks} is {\itshape true}, {\itshape visitor} is also called for every allocated block in every area (with {\ttfamily block!=NULL}). return {\itshape false} from this function to stop visiting early. \\
\hline
{\em arg} & extra argument passed to the {\itshape visitor}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
{\itshape true} if all areas and blocks were visited.
\end{DoxyReturn}
Note\+: requires the option {\ttfamily mi\+\_\+option\+\_\+visit\+\_\+abandoned} to be set at the start of the program. 函数调用图\+:
% FIG 0
\Hypertarget{group__analysis_ga628c237489c2679af84a4d0d143b3dd5}\index{Heap Introspection@{Heap Introspection}!mi\_check\_owned@{mi\_check\_owned}}
\index{mi\_check\_owned@{mi\_check\_owned}!Heap Introspection@{Heap Introspection}}
\doxysubsubsection{\texorpdfstring{mi\_check\_owned()}{mi\_check\_owned()}}
{\footnotesize\ttfamily \label{group__analysis_ga628c237489c2679af84a4d0d143b3dd5} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} mi\+\_\+check\+\_\+owned (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*}}]{p}{}\end{DoxyParamCaption})}

Check safely if any pointer is part of the default heap of this thread. 
\begin{DoxyParams}{参数}
{\em p} & Any pointer -- not required to be previously allocated by us. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
{\itshape true} if {\itshape p} points to a block in default heap of this thread.
\end{DoxyReturn}
Note\+: expensive function, linear in the pages in the heap. \begin{DoxySeeAlso}{参见}
\doxylink{group__analysis_gaa862aa8ed8d57d84cae41fc1022d71af}{mi\+\_\+heap\+\_\+contains\+\_\+block()} 

\doxylink{group__heap_ga14c667a6e2c5d28762d8cb7d4e057909}{mi\+\_\+heap\+\_\+get\+\_\+default()} 
\end{DoxySeeAlso}
函数调用图\+:
% FIG 1
\Hypertarget{group__analysis_ga0d67c1789faaa15ff366c024fcaf6377}\index{Heap Introspection@{Heap Introspection}!mi\_heap\_check\_owned@{mi\_heap\_check\_owned}}
\index{mi\_heap\_check\_owned@{mi\_heap\_check\_owned}!Heap Introspection@{Heap Introspection}}
\doxysubsubsection{\texorpdfstring{mi\_heap\_check\_owned()}{mi\_heap\_check\_owned()}}
{\footnotesize\ttfamily \label{group__analysis_ga0d67c1789faaa15ff366c024fcaf6377} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} mi\+\_\+heap\+\_\+check\+\_\+owned (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\+\_\+heap\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{heap}{, }\item[{const \mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*}}]{p}{}\end{DoxyParamCaption})}

Check safely if any pointer is part of a heap. 
\begin{DoxyParams}{参数}
{\em heap} & The heap. \\
\hline
{\em p} & Any pointer -- not required to be previously allocated by us. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
{\itshape true} if {\itshape p} points to a block in {\itshape heap}.
\end{DoxyReturn}
Note\+: expensive function, linear in the pages in the heap. \begin{DoxySeeAlso}{参见}
\doxylink{group__analysis_gaa862aa8ed8d57d84cae41fc1022d71af}{mi\+\_\+heap\+\_\+contains\+\_\+block()} 

\doxylink{group__heap_ga14c667a6e2c5d28762d8cb7d4e057909}{mi\+\_\+heap\+\_\+get\+\_\+default()} 
\end{DoxySeeAlso}
函数调用图\+:
% FIG 2
\Hypertarget{group__analysis_gaa862aa8ed8d57d84cae41fc1022d71af}\index{Heap Introspection@{Heap Introspection}!mi\_heap\_contains\_block@{mi\_heap\_contains\_block}}
\index{mi\_heap\_contains\_block@{mi\_heap\_contains\_block}!Heap Introspection@{Heap Introspection}}
\doxysubsubsection{\texorpdfstring{mi\_heap\_contains\_block()}{mi\_heap\_contains\_block()}}
{\footnotesize\ttfamily \label{group__analysis_gaa862aa8ed8d57d84cae41fc1022d71af} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} mi\+\_\+heap\+\_\+contains\+\_\+block (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\+\_\+heap\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{heap}{, }\item[{const \mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*}}]{p}{}\end{DoxyParamCaption})}

Does a heap contain a pointer to a previously allocated block? 
\begin{DoxyParams}{参数}
{\em heap} & The heap. \\
\hline
{\em p} & Pointer to a previously allocated block (in any heap)-- cannot be some random pointer! \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
{\itshape true} if the block pointed to by {\itshape p} is in the {\itshape heap}. 
\end{DoxyReturn}
\begin{DoxySeeAlso}{参见}
\doxylink{group__analysis_ga0d67c1789faaa15ff366c024fcaf6377}{mi\+\_\+heap\+\_\+check\+\_\+owned()} 
\end{DoxySeeAlso}
函数调用图\+:
% FIG 3
\Hypertarget{group__analysis_ga70c46687dc6e9dc98b232b02646f8bed}\index{Heap Introspection@{Heap Introspection}!mi\_heap\_visit\_blocks@{mi\_heap\_visit\_blocks}}
\index{mi\_heap\_visit\_blocks@{mi\_heap\_visit\_blocks}!Heap Introspection@{Heap Introspection}}
\doxysubsubsection{\texorpdfstring{mi\_heap\_visit\_blocks()}{mi\_heap\_visit\_blocks()}}
{\footnotesize\ttfamily \label{group__analysis_ga70c46687dc6e9dc98b232b02646f8bed} 
\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}} mi\+\_\+heap\+\_\+visit\+\_\+blocks (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\+\_\+heap\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{heap}{, }\item[{\mbox{\hyperlink{sugar_8h_abb452686968e48b67397da5f97445f5b}{bool}}}]{visit\+\_\+all\+\_\+blocks}{, }\item[{\mbox{\hyperlink{group__analysis_ga8255dc9371e6b299d9802a610c4e34ec}{mi\+\_\+block\+\_\+visit\+\_\+fun}} \texorpdfstring{$\ast$}{*}}]{visitor}{, }\item[{\mbox{\hyperlink{mimalloc_8h_a9d6d8aef94ac19034a5f163606f84830}{void}} \texorpdfstring{$\ast$}{*}}]{arg}{}\end{DoxyParamCaption})}

Visit all areas and blocks in a heap. 
\begin{DoxyParams}{参数}
{\em heap} & The heap to visit. \\
\hline
{\em visit\+\_\+all\+\_\+blocks} & If {\itshape true} visits all allocated blocks, otherwise {\itshape visitor} is only called for every heap area. \\
\hline
{\em visitor} & This function is called for every area in the heap (with {\itshape block} as {\itshape NULL}). If {\itshape visit\+\_\+all\+\_\+blocks} is {\itshape true}, {\itshape visitor} is also called for every allocated block in every area (with {\ttfamily block!=NULL}). return {\itshape false} from this function to stop visiting early. \\
\hline
{\em arg} & Extra argument passed to {\itshape visitor}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
{\itshape true} if all areas and blocks were visited. 
\end{DoxyReturn}
函数调用图\+:
% FIG 4
