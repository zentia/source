\doxysection{cds\+::algo\+::flat\+\_\+combining\+::kernel\texorpdfstring{$<$}{<} Publication\+Record, Traits \texorpdfstring{$>$}{>} 模板类 参考}
\hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel}{}\label{classcds_1_1algo_1_1flat__combining_1_1kernel}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}


The kernel of flat combining  




{\ttfamily \#include $<$kernel.\+h$>$}



cds\+::algo\+::flat\+\_\+combining\+::kernel\texorpdfstring{$<$}{<} Publication\+Record, Traits \texorpdfstring{$>$}{>} 的协作图\+:
% FIG 0
\doxysubsubsection*{类}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator}{iterator}}
\begin{DoxyCompactList}\small\item\em Publication list iterator \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public 类型}
\begin{DoxyCompactItemize}
\item 
typedef Traits \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ade4e41238a9f99263bdd442387fc8d61}{traits}}
\begin{DoxyCompactList}\small\item\em \doxylink{ir__common_8h_a1ac75f8fee198af783521627f1fecfbc}{Type} traits \end{DoxyCompactList}\item 
typedef \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a1fc60b5ab59e7b724abfc04c50eef837}{traits\+::lock\+\_\+type}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a94350076b24b7dfdeac0fe92074ba4d8}{global\+\_\+lock\+\_\+type}}
\begin{DoxyCompactList}\small\item\em Global lock type \end{DoxyCompactList}\item 
typedef \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a46467ac9f63058d2808229931226a933}{traits\+::wait\+\_\+strategy}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a8fecf7f51590ee89857440f9ff992cc3}{wait\+\_\+strategy}}
\begin{DoxyCompactList}\small\item\em Wait strategy type \end{DoxyCompactList}\item 
typedef \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a444fc3e7fe1f7d7fcc8a7640d542c56a}{traits\+::allocator}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a944158ddcd40624fd0eaa496659239be}{allocator}}
\begin{DoxyCompactList}\small\item\em Allocator type (used for allocating \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\+\_\+record\+\_\+type} data) \end{DoxyCompactList}\item 
typedef \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a4a23d9d64a3c6427a6961b040470580c}{traits\+::stat}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a6337b9f0a55cf88b19db003b9abf20c4}{stat}}
\begin{DoxyCompactList}\small\item\em Internal statistics \end{DoxyCompactList}\item 
typedef \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a7d9d7bbc26ad63ce9a29dcdbeb21c0b3}{traits\+::memory\+\_\+model}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a5f2464c66c34f1f4803b94675a802b1a}{memory\+\_\+model}}
\begin{DoxyCompactList}\small\item\em C++ memory model \end{DoxyCompactList}\item 
typedef wait\+\_\+strategy\+::template make\+\_\+publication\+\_\+record$<$ Publication\+Record $>$\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{\+::type}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\+\_\+record\+\_\+type}}
\begin{DoxyCompactList}\small\item\em Publication record type \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a312a50b33d7552f4b63358587a7656ab}{kernel}} ()
\begin{DoxyCompactList}\small\item\em Initializes the object \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a27320060ac864e064f12a6363e5e8404}{kernel}} (unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} n\+Compact\+Factor, unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} n\+Combine\+Pass\+Count)
\begin{DoxyCompactList}\small\item\em Initializes the object \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a46f0529d4e295863d9d0506c47fdd590}{\texorpdfstring{$\sim$}{\string~}kernel}} ()
\begin{DoxyCompactList}\small\item\em Destroys the object and all publication records \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\+\_\+record\+\_\+type}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_adae70f9c40562915a7727f22e48a7caa}{acquire\+\_\+record}} ()
\begin{DoxyCompactList}\small\item\em Gets publication list record for the current thread \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a1428e6380c86b2df6529979ecb8bdb48}{release\+\_\+record}} (\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\+\_\+record\+\_\+type}} \texorpdfstring{$\ast$}{*}p\+Rec)
\begin{DoxyCompactList}\small\item\em Marks publication record for the current thread as empty \end{DoxyCompactList}\item 
{\footnotesize template$<$class Container$>$ }\\\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_acc134e6838d8bafb1c4103c58d5e8068}{combine}} (unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} n\+Op\+Id, \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\+\_\+record\+\_\+type}} \texorpdfstring{$\ast$}{*}p\+Rec, Container \&owner)
\begin{DoxyCompactList}\small\item\em Trying to execute operation {\ttfamily n\+Op\+Id} \end{DoxyCompactList}\item 
{\footnotesize template$<$class Container$>$ }\\\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a7c2576d01d01136fbe81d74a0b995537}{batch\+\_\+combine}} (unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} n\+Op\+Id, \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\+\_\+record\+\_\+type}} \texorpdfstring{$\ast$}{*}p\+Rec, Container \&owner)
\begin{DoxyCompactList}\small\item\em Trying to execute operation {\ttfamily n\+Op\+Id} in batch-\/combine mode \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Func$>$ }\\\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a9f06c948bee3d6e51cfb3b144de0ef27}{invoke\+\_\+exclusive}} (Func \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})
\begin{DoxyCompactList}\small\item\em Invokes {\ttfamily Func} in exclusive mode \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ab3a34ae8d428e4842a1594f49dff4493}{operation\+\_\+done}} (\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1publication__record}{publication\+\_\+record}} \&rec)
\begin{DoxyCompactList}\small\item\em Marks {\ttfamily rec} as executed \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a6337b9f0a55cf88b19db003b9abf20c4}{stat}} const \& \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a19758bfc1bbc59e1e9026a6a3985bd37}{statistics}} () const
\begin{DoxyCompactList}\small\item\em Internal statistics \end{DoxyCompactList}\item 
unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a0d6bcb16b1942b4d9d54bbeb57d7a6c1}{compact\+\_\+factor}} () const
\begin{DoxyCompactList}\small\item\em Returns the compact factor \end{DoxyCompactList}\item 
unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a439d4444675e3c2ad369ef01427858b8}{combine\+\_\+pass\+\_\+count}} () const
\begin{DoxyCompactList}\small\item\em Returns number of combining passes for combiner thread \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator}{iterator}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a264c85eb975cbf8a4291a4a6990037b5}{begin}} ()
\begin{DoxyCompactList}\small\item\em Returns an iterator to the first active publication record \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator}{iterator}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a4fe99f56ca4a251210c1903b049d7566}{end}} ()
\begin{DoxyCompactList}\small\item\em Returns an iterator to the end of publication list. Should not be dereferenced. \end{DoxyCompactList}\item 
\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aa236c38a87a13b798b834b4d21116412}{get\+\_\+operation}} (\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1publication__record}{publication\+\_\+record}} \&rec)
\begin{DoxyCompactList}\small\item\em Gets current value of {\ttfamily rec.\+n\+Request} \end{DoxyCompactList}\item 
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a426db68559fe3e8839b4cb2a3c9b594b}{wakeup\+\_\+any}} ()
\begin{DoxyCompactList}\small\item\em Wakes up any waiting thread \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected 属性}
\begin{DoxyCompactItemize}
\item 
atomics\+::atomic$<$ unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} $>$ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a39d5d1adf8681d3fb43a81a822d0d15e}{m\+\_\+n\+Count}}
\begin{DoxyCompactList}\small\item\em Total count of combining passes. Used as an age. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\+\_\+record\+\_\+type}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a4ce5a05f11bb9c9926ab8996e7fb703e}{m\+\_\+p\+Head}}
\begin{DoxyCompactList}\small\item\em Head of active publication list \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\+\_\+record\+\_\+type}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aa8fa60f69995e85e3aadb4f117d825db}{m\+\_\+p\+Allocated\+Head}}
\begin{DoxyCompactList}\small\item\em Head of allocated publication list \end{DoxyCompactList}\item 
boost\+::thread\+\_\+specific\+\_\+ptr$<$ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\+\_\+record\+\_\+type}} $>$ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a2f86249aa6d3a73f546e45902bf9d39f}{m\+\_\+p\+Thread\+Rec}}
\begin{DoxyCompactList}\small\item\em Thread-\/local publication record \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a94350076b24b7dfdeac0fe92074ba4d8}{global\+\_\+lock\+\_\+type}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a211358613097d2ca01d3da7ad4f15a7b}{m\+\_\+\+Mutex}}
\begin{DoxyCompactList}\small\item\em Global mutex \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a6337b9f0a55cf88b19db003b9abf20c4}{stat}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\+\_\+\+Stat}}
\begin{DoxyCompactList}\small\item\em Internal statistics \end{DoxyCompactList}\item 
unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} const \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a8f3451ab0e2f65801250852a847ece5f}{m\+\_\+n\+Compact\+Factor}}
\begin{DoxyCompactList}\small\item\em Publication list compacting factor (the list will be compacted through {\ttfamily m\+\_\+n\+Compact\+Factor} combining passes) \end{DoxyCompactList}\item 
unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} const \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_addeb326bec25f11c22f9774c3b787c22}{m\+\_\+n\+Combine\+Pass\+Count}}
\begin{DoxyCompactList}\small\item\em \doxylink{test__concurrent__vector__v2_8cpp_a36bc74cc1ee36b525959509e2a81c81e}{Number} of combining passes \end{DoxyCompactList}\item 
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a8fecf7f51590ee89857440f9ff992cc3}{wait\+\_\+strategy}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae713b05f5336ae35d39a7d7dc30e5a6a}{m\+\_\+wait\+Strategy}}
\begin{DoxyCompactList}\small\item\em Wait strategy \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
\subsubsection*{template$<$typename Publication\+Record, typename Traits = traits$>$\newline
class cds\+::algo\+::flat\+\_\+combining\+::kernel$<$ Publication\+Record, Traits $>$}
The kernel of flat combining 

Template parameters\+:
\begin{DoxyItemize}
\item {\ttfamily Publication\+Record} -\/ a type derived from \doxylink{structcds_1_1algo_1_1flat__combining_1_1publication__record}{publication\+\_\+record}
\item {\ttfamily Traits} -\/ a type traits of flat combining, default is {\ttfamily \doxylink{structcds_1_1algo_1_1flat__combining_1_1traits}{flat\+\_\+combining\+::traits}}. \doxylink{structcds_1_1algo_1_1flat__combining_1_1make__traits}{make\+\_\+traits} metafunction can be used to create type traits
\end{DoxyItemize}

The kernel object should be a member of a container class. The container cooperates with flat combining kernel object. There are two ways to interact with the kernel\+:
\begin{DoxyItemize}
\item One-\/by-\/one processing the active records of the publication list. This mode provides by {\ttfamily \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_acc134e6838d8bafb1c4103c58d5e8068}{combine()}} function\+: the container acquires its publication record by {\ttfamily \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_adae70f9c40562915a7727f22e48a7caa}{acquire\+\_\+record()}}, fills its fields and calls {\ttfamily \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_acc134e6838d8bafb1c4103c58d5e8068}{combine()}} function of its kernel object. If the current thread becomes a combiner, the kernel calls {\ttfamily fc\+\_\+apply()} function of the container for each active non-\/empty record. Then, the container should release its publication record by {\ttfamily \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_a1428e6380c86b2df6529979ecb8bdb48}{release\+\_\+record()}}. Only one pass through the publication list is possible.
\item Batch processing -\/ {\ttfamily \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_a7c2576d01d01136fbe81d74a0b995537}{batch\+\_\+combine()}} function. It this mode the container obtains access to entire publication list. This mode allows the container to perform an elimination, for example, the stack can collide {\ttfamily \doxylink{test__concurrent__queue_8cpp_a262227aa72b9cc1db7b9a80d7f295211}{push()}} and {\ttfamily pop()} requests. The sequence of invocations is the following\+: the container acquires its publication record by {\ttfamily \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_adae70f9c40562915a7727f22e48a7caa}{acquire\+\_\+record()}}, fills its field and call {\ttfamily \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_a7c2576d01d01136fbe81d74a0b995537}{batch\+\_\+combine()}} function of its kernel object. If the current thread becomes a combiner, the kernel calls {\ttfamily fc\+\_\+process()} function of the container passing two iterators pointing to the begin and the end of publication list (see \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator}{iterator} class). The iterators allow multiple pass through active records of publication list. For each processed record the container should call {\ttfamily \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_ab3a34ae8d428e4842a1594f49dff4493}{operation\+\_\+done()}} function. On the end, the container should release its record by {\ttfamily \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_a1428e6380c86b2df6529979ecb8bdb48}{release\+\_\+record()}}. 
\end{DoxyItemize}

\doxysubsection{成员类型定义说明}
\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a944158ddcd40624fd0eaa496659239be}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!allocator@{allocator}}
\index{allocator@{allocator}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{allocator}{allocator}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a944158ddcd40624fd0eaa496659239be} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
typedef \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a444fc3e7fe1f7d7fcc8a7640d542c56a}{traits\+::allocator}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::allocator}



Allocator type (used for allocating \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\+\_\+record\+\_\+type} data) 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a94350076b24b7dfdeac0fe92074ba4d8}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!global\_lock\_type@{global\_lock\_type}}
\index{global\_lock\_type@{global\_lock\_type}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{global\_lock\_type}{global\_lock\_type}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a94350076b24b7dfdeac0fe92074ba4d8} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
typedef \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a1fc60b5ab59e7b724abfc04c50eef837}{traits\+::lock\+\_\+type}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::global\+\_\+lock\+\_\+type}



Global lock type 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a5f2464c66c34f1f4803b94675a802b1a}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!memory\_model@{memory\_model}}
\index{memory\_model@{memory\_model}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{memory\_model}{memory\_model}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a5f2464c66c34f1f4803b94675a802b1a} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
typedef \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a7d9d7bbc26ad63ce9a29dcdbeb21c0b3}{traits\+::memory\+\_\+model}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::memory\+\_\+model}



C++ memory model 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!publication\_record\_type@{publication\_record\_type}}
\index{publication\_record\_type@{publication\_record\_type}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{publication\_record\_type}{publication\_record\_type}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
typedef wait\+\_\+strategy\+::template make\+\_\+publication\+\_\+record$<$Publication\+Record$>$\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{\+::type}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::publication\+\_\+record\+\_\+type}



Publication record type 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a6337b9f0a55cf88b19db003b9abf20c4}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!stat@{stat}}
\index{stat@{stat}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{stat}{stat}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a6337b9f0a55cf88b19db003b9abf20c4} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
typedef \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a4a23d9d64a3c6427a6961b040470580c}{traits\+::stat}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::stat}



Internal statistics 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_ade4e41238a9f99263bdd442387fc8d61}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!traits@{traits}}
\index{traits@{traits}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{traits}{traits}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_ade4e41238a9f99263bdd442387fc8d61} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
typedef Traits \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::traits}



\doxylink{ir__common_8h_a1ac75f8fee198af783521627f1fecfbc}{Type} traits 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a8fecf7f51590ee89857440f9ff992cc3}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!wait\_strategy@{wait\_strategy}}
\index{wait\_strategy@{wait\_strategy}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{wait\_strategy}{wait\_strategy}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a8fecf7f51590ee89857440f9ff992cc3} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
typedef \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a46467ac9f63058d2808229931226a933}{traits\+::wait\+\_\+strategy}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::wait\+\_\+strategy}



Wait strategy type 



\doxysubsection{构造及析构函数说明}
\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a312a50b33d7552f4b63358587a7656ab}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!kernel@{kernel}}
\index{kernel@{kernel}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{kernel()}{kernel()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a312a50b33d7552f4b63358587a7656ab} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::kernel (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Initializes the object 

Compact factor = 1024

Combiner pass count = 8 \Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a27320060ac864e064f12a6363e5e8404}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!kernel@{kernel}}
\index{kernel@{kernel}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{kernel()}{kernel()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a27320060ac864e064f12a6363e5e8404} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::kernel (\begin{DoxyParamCaption}\item[{unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{n\+Compact\+Factor}{, }\item[{unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{n\+Combine\+Pass\+Count}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Initializes the object 


\begin{DoxyParams}{参数}
{\em n\+Compact\+Factor} & Publication list compacting factor (the list will be compacted through {\ttfamily n\+Compact\+Factor} combining passes)  \\
\hline
{\em n\+Combine\+Pass\+Count} & \doxylink{test__concurrent__vector__v2_8cpp_a36bc74cc1ee36b525959509e2a81c81e}{Number} of combining passes for combiner thread \\
\hline
\end{DoxyParams}
\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a46f0529d4e295863d9d0506c47fdd590}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!````~kernel@{\texorpdfstring{$\sim$}{\string~}kernel}}
\index{````~kernel@{\texorpdfstring{$\sim$}{\string~}kernel}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}kernel()}{\string~kernel()}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a46f0529d4e295863d9d0506c47fdd590} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::\texorpdfstring{$\sim$}{\string~}\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{kernel}} (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Destroys the object and all publication records 



\doxysubsection{成员函数说明}
\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_adae70f9c40562915a7727f22e48a7caa}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!acquire\_record@{acquire\_record}}
\index{acquire\_record@{acquire\_record}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{acquire\_record()}{acquire\_record()}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_adae70f9c40562915a7727f22e48a7caa} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\+\_\+record\+\_\+type}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::acquire\+\_\+record (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Gets publication list record for the current thread 

If there is no publication record for the current thread the function allocates it. \Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a7c2576d01d01136fbe81d74a0b995537}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!batch\_combine@{batch\_combine}}
\index{batch\_combine@{batch\_combine}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{batch\_combine()}{batch\_combine()}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a7c2576d01d01136fbe81d74a0b995537} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
template$<$class Container$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::batch\+\_\+combine (\begin{DoxyParamCaption}\item[{unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{n\+Op\+Id}{, }\item[{\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\+\_\+record\+\_\+type}} \texorpdfstring{$\ast$}{*}}]{p\+Rec}{, }\item[{Container \&}]{owner}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Trying to execute operation {\ttfamily n\+Op\+Id} in batch-\/combine mode 

{\ttfamily p\+Rec} is the publication record acquiring by {\ttfamily \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_adae70f9c40562915a7727f22e48a7caa}{acquire\+\_\+record()}} earlier. {\ttfamily owner} is a container that owns flat combining kernel object. As a result the current thread can become a combiner or can wait for another combiner performs {\ttfamily p\+Rec} operation.

If the thread becomes a combiner, the kernel calls {\ttfamily owner.\+fc\+\_\+process()} giving the container the full access over publication list. This function is useful for an elimination technique if the container supports any kind of that. The container can perform multiple pass through publication list.

{\ttfamily owner.\+fc\+\_\+process()} has two arguments -\/ forward iterators on begin and end of publication list, see \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator}{iterator} class. For each processed record the container should call {\ttfamily \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_ab3a34ae8d428e4842a1594f49dff4493}{operation\+\_\+done()}} function to mark the record as processed.

On the end of {\ttfamily batch\+\_\+combine} the {\ttfamily \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_acc134e6838d8bafb1c4103c58d5e8068}{combine()}} function is called to process rest of publication records. \Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a264c85eb975cbf8a4291a4a6990037b5}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!begin@{begin}}
\index{begin@{begin}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{begin()}{begin()}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a264c85eb975cbf8a4291a4a6990037b5} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator}{iterator}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::begin (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Returns an iterator to the first active publication record 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_acc134e6838d8bafb1c4103c58d5e8068}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!combine@{combine}}
\index{combine@{combine}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{combine()}{combine()}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_acc134e6838d8bafb1c4103c58d5e8068} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
template$<$class Container$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::combine (\begin{DoxyParamCaption}\item[{unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}}]{n\+Op\+Id}{, }\item[{\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\+\_\+record\+\_\+type}} \texorpdfstring{$\ast$}{*}}]{p\+Rec}{, }\item[{Container \&}]{owner}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Trying to execute operation {\ttfamily n\+Op\+Id} 

{\ttfamily p\+Rec} is the publication record acquiring by \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_adae70f9c40562915a7727f22e48a7caa}{acquire\+\_\+record} earlier. {\ttfamily owner} is a container that is owner of flat combining kernel object. As a result the current thread can become a combiner or can wait for another combiner performs {\ttfamily p\+Rec} operation.

If the thread becomes a combiner, the kernel calls {\ttfamily owner.\+fc\+\_\+apply} for each active non-\/empty publication record. \Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a439d4444675e3c2ad369ef01427858b8}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!combine\_pass\_count@{combine\_pass\_count}}
\index{combine\_pass\_count@{combine\_pass\_count}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{combine\_pass\_count()}{combine\_pass\_count()}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a439d4444675e3c2ad369ef01427858b8} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::combine\+\_\+pass\+\_\+count (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Returns number of combining passes for combiner thread 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a0d6bcb16b1942b4d9d54bbeb57d7a6c1}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!compact\_factor@{compact\_factor}}
\index{compact\_factor@{compact\_factor}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{compact\_factor()}{compact\_factor()}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a0d6bcb16b1942b4d9d54bbeb57d7a6c1} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::compact\+\_\+factor (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Returns the compact factor 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a4fe99f56ca4a251210c1903b049d7566}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!end@{end}}
\index{end@{end}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{end()}{end()}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a4fe99f56ca4a251210c1903b049d7566} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator}{iterator}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::end (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Returns an iterator to the end of publication list. Should not be dereferenced. 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_aa236c38a87a13b798b834b4d21116412}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!get\_operation@{get\_operation}}
\index{get\_operation@{get\_operation}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{get\_operation()}{get\_operation()}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_aa236c38a87a13b798b834b4d21116412} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
\mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::get\+\_\+operation (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1publication__record}{publication\+\_\+record}} \&}]{rec}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Gets current value of {\ttfamily rec.\+n\+Request} 

This function is intended for invoking from a wait strategy \Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a9f06c948bee3d6e51cfb3b144de0ef27}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!invoke\_exclusive@{invoke\_exclusive}}
\index{invoke\_exclusive@{invoke\_exclusive}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{invoke\_exclusive()}{invoke\_exclusive()}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a9f06c948bee3d6e51cfb3b144de0ef27} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
template$<$typename Func$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::invoke\+\_\+exclusive (\begin{DoxyParamCaption}\item[{Func}]{f}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Invokes {\ttfamily Func} in exclusive mode 

Some operation in flat combining containers should be called in exclusive mode i.\+e the current thread should become the combiner to process the operation. The typical example is {\ttfamily empty()} function.

{\ttfamily invoke\+\_\+exclusive}() allows do that\+: the current thread becomes the combiner, invokes {\ttfamily f} exclusively but unlike a typical usage the thread does not process any pending request. Instead, after end of {\ttfamily f} call the current thread wakes up a pending thread if any. \Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_ab3a34ae8d428e4842a1594f49dff4493}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!operation\_done@{operation\_done}}
\index{operation\_done@{operation\_done}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{operation\_done()}{operation\_done()}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_ab3a34ae8d428e4842a1594f49dff4493} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::operation\+\_\+done (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1publication__record}{publication\+\_\+record}} \&}]{rec}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Marks {\ttfamily rec} as executed 

This function should be called by container if {\ttfamily \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_a7c2576d01d01136fbe81d74a0b995537}{batch\+\_\+combine()}} mode is used. For usual combining (see {\ttfamily \doxylink{classcds_1_1algo_1_1flat__combining_1_1kernel_acc134e6838d8bafb1c4103c58d5e8068}{combine()}}) this function is excess. \Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a1428e6380c86b2df6529979ecb8bdb48}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!release\_record@{release\_record}}
\index{release\_record@{release\_record}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{release\_record()}{release\_record()}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a1428e6380c86b2df6529979ecb8bdb48} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::release\+\_\+record (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\+\_\+record\+\_\+type}} \texorpdfstring{$\ast$}{*}}]{p\+Rec}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Marks publication record for the current thread as empty 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a19758bfc1bbc59e1e9026a6a3985bd37}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!statistics@{statistics}}
\index{statistics@{statistics}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{statistics()}{statistics()}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a19758bfc1bbc59e1e9026a6a3985bd37} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a6337b9f0a55cf88b19db003b9abf20c4}{stat}} const  \& \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::statistics (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Internal statistics 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a426db68559fe3e8839b4cb2a3c9b594b}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!wakeup\_any@{wakeup\_any}}
\index{wakeup\_any@{wakeup\_any}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{wakeup\_any()}{wakeup\_any()}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a426db68559fe3e8839b4cb2a3c9b594b} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
\mbox{\hyperlink{ittnotify__static_8h_a61af67d9d838a9497ca5b188dabc1aa0}{void}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::wakeup\+\_\+any (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Wakes up any waiting thread 

This function is intended for invoking from a wait strategy 

\doxysubsection{类成员变量说明}
\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a211358613097d2ca01d3da7ad4f15a7b}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!m\_Mutex@{m\_Mutex}}
\index{m\_Mutex@{m\_Mutex}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{m\_Mutex}{m\_Mutex}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a211358613097d2ca01d3da7ad4f15a7b} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a94350076b24b7dfdeac0fe92074ba4d8}{global\+\_\+lock\+\_\+type}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::m\+\_\+\+Mutex\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [protected]}}



Global mutex 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_addeb326bec25f11c22f9774c3b787c22}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!m\_nCombinePassCount@{m\_nCombinePassCount}}
\index{m\_nCombinePassCount@{m\_nCombinePassCount}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{m\_nCombinePassCount}{m\_nCombinePassCount}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_addeb326bec25f11c22f9774c3b787c22} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} const \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::m\+\_\+n\+Combine\+Pass\+Count\hspace{0.3cm}{\ttfamily [protected]}}



\doxylink{test__concurrent__vector__v2_8cpp_a36bc74cc1ee36b525959509e2a81c81e}{Number} of combining passes 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a8f3451ab0e2f65801250852a847ece5f}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!m\_nCompactFactor@{m\_nCompactFactor}}
\index{m\_nCompactFactor@{m\_nCompactFactor}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{m\_nCompactFactor}{m\_nCompactFactor}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a8f3451ab0e2f65801250852a847ece5f} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}} const \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::m\+\_\+n\+Compact\+Factor\hspace{0.3cm}{\ttfamily [protected]}}



Publication list compacting factor (the list will be compacted through {\ttfamily m\+\_\+n\+Compact\+Factor} combining passes) 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a39d5d1adf8681d3fb43a81a822d0d15e}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!m\_nCount@{m\_nCount}}
\index{m\_nCount@{m\_nCount}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{m\_nCount}{m\_nCount}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a39d5d1adf8681d3fb43a81a822d0d15e} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
atomics\+::atomic$<$unsigned \mbox{\hyperlink{sugar_8h_ae4f82344f573c70aa1066a2394bba345}{int}}$>$ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::m\+\_\+n\+Count\hspace{0.3cm}{\ttfamily [protected]}}



Total count of combining passes. Used as an age. 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_aa8fa60f69995e85e3aadb4f117d825db}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!m\_pAllocatedHead@{m\_pAllocatedHead}}
\index{m\_pAllocatedHead@{m\_pAllocatedHead}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{m\_pAllocatedHead}{m\_pAllocatedHead}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_aa8fa60f69995e85e3aadb4f117d825db} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\+\_\+record\+\_\+type}}\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::m\+\_\+p\+Allocated\+Head\hspace{0.3cm}{\ttfamily [protected]}}



Head of allocated publication list 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a4ce5a05f11bb9c9926ab8996e7fb703e}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!m\_pHead@{m\_pHead}}
\index{m\_pHead@{m\_pHead}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{m\_pHead}{m\_pHead}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a4ce5a05f11bb9c9926ab8996e7fb703e} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\+\_\+record\+\_\+type}}\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::m\+\_\+p\+Head\hspace{0.3cm}{\ttfamily [protected]}}



Head of active publication list 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_a2f86249aa6d3a73f546e45902bf9d39f}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!m\_pThreadRec@{m\_pThreadRec}}
\index{m\_pThreadRec@{m\_pThreadRec}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{m\_pThreadRec}{m\_pThreadRec}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_a2f86249aa6d3a73f546e45902bf9d39f} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
boost\+::thread\+\_\+specific\+\_\+ptr$<$ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\+\_\+record\+\_\+type}} $>$ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::m\+\_\+p\+Thread\+Rec\hspace{0.3cm}{\ttfamily [protected]}}



Thread-\/local publication record 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!m\_Stat@{m\_Stat}}
\index{m\_Stat@{m\_Stat}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{m\_Stat}{m\_Stat}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a6337b9f0a55cf88b19db003b9abf20c4}{stat}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::m\+\_\+\+Stat\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [protected]}}



Internal statistics 

\Hypertarget{classcds_1_1algo_1_1flat__combining_1_1kernel_ae713b05f5336ae35d39a7d7dc30e5a6a}\index{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}!m\_waitStrategy@{m\_waitStrategy}}
\index{m\_waitStrategy@{m\_waitStrategy}!cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$@{cds::algo::flat\_combining::kernel$<$ PublicationRecord, Traits $>$}}
\doxysubsubsection{\texorpdfstring{m\_waitStrategy}{m\_waitStrategy}}
{\footnotesize\ttfamily \label{classcds_1_1algo_1_1flat__combining_1_1kernel_ae713b05f5336ae35d39a7d7dc30e5a6a} 
template$<$typename Publication\+Record, typename Traits = traits$>$ \\
\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a8fecf7f51590ee89857440f9ff992cc3}{wait\+\_\+strategy}} \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel}{cds\+::algo\+::flat\+\_\+combining\+::kernel}}$<$ Publication\+Record, Traits $>$\+::m\+\_\+wait\+Strategy\hspace{0.3cm}{\ttfamily [protected]}}



Wait strategy 



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
external/libcds/cds/algo/flat\+\_\+combining/\mbox{\hyperlink{libcds_2cds_2algo_2flat__combining_2kernel_8h}{kernel.\+h}}\end{DoxyCompactItemize}
