\doxysection{kernel.\+h}
\hypertarget{libcds_2cds_2algo_2flat__combining_2kernel_8h_source}{}\label{libcds_2cds_2algo_2flat__combining_2kernel_8h_source}\index{external/libcds/cds/algo/flat\_combining/kernel.h@{external/libcds/cds/algo/flat\_combining/kernel.h}}
\mbox{\hyperlink{libcds_2cds_2algo_2flat__combining_2kernel_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ (c)\ 2006-\/2018\ Maxim\ Khizhinsky}}
\DoxyCodeLine{00002\ \textcolor{comment}{//}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ Distributed\ under\ the\ Boost\ Software\ License,\ Version\ 1.0.\ (See\ accompanying}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ file\ LICENSE\ or\ copy\ at\ http://www.boost.org/LICENSE\_1\_0.txt)}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#ifndef\ CDSLIB\_ALGO\_FLAT\_COMBINING\_KERNEL\_H}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#define\ CDSLIB\_ALGO\_FLAT\_COMBINING\_KERNEL\_H}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{algo_2flat__combining_2defs_8h}{cds/algo/flat\_combining/defs.h}}>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{wait__strategy_8h}{cds/algo/flat\_combining/wait\_strategy.h}}>}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{sync_2spinlock_8h}{cds/sync/spinlock.h}}>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{external_2libcds_2cds_2details_2allocator_8h}{cds/details/allocator.h}}>}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{opt_2options_8h}{cds/opt/options.h}}>}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{int__algo_8h}{cds/algo/int\_algo.h}}>}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds}{cds}}\ \{\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds_1_1algo}{algo}}\ \{}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining}{flat\_combining}}\ \{}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Counter\ =\ cds::atomicity::event\_counter\ >}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat}{stat}}}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_counter}{Counter}}\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a8357feef7f06f749e4d7b1c933d094a2}{counter\_type}};\ \ \ }
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a8357feef7f06f749e4d7b1c933d094a2}{counter\_type}}\ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_ac6434aa4d673705816fdd452cda12368}{m\_nOperationCount}}\ \ \ ;\ \ \ }
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a8357feef7f06f749e4d7b1c933d094a2}{counter\_type}}\ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a3e71511e3c7b6a0b103bb46bbf5b8f5e}{m\_nCombiningCount}}\ \ \ ;\ \ \ }
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a8357feef7f06f749e4d7b1c933d094a2}{counter\_type}}\ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_ad7d22f62746ec04bbb71e34485e52667}{m\_nCompactPublicationList}};\ }
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a8357feef7f06f749e4d7b1c933d094a2}{counter\_type}}\ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a2c1fcdd435b42b89dcf835eccb19e106}{m\_nDeactivatePubRecord}};\ }
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a8357feef7f06f749e4d7b1c933d094a2}{counter\_type}}\ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a9bb52ef2b59053adca9cc11221fc7e7a}{m\_nActivatePubRecord}};\ \ \ }
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a8357feef7f06f749e4d7b1c933d094a2}{counter\_type}}\ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a53f8b3bf10d16f8fa2472e5324e5d6ae}{m\_nPubRecordCreated}}\ ;\ \ \ }
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a8357feef7f06f749e4d7b1c933d094a2}{counter\_type}}\ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_af0ff6e279b6137a5f5ceff232b2f4c57}{m\_nPubRecordDeleted}}\ ;\ \ \ }
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a8357feef7f06f749e4d7b1c933d094a2}{counter\_type}}\ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_af5c1a5e65640616befccab4398c05b9c}{m\_nPassiveWaitCall}};\ \ \ \ \ }
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a8357feef7f06f749e4d7b1c933d094a2}{counter\_type}}\ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a20ea3da11935c6ea5d66d8afc2d8f549}{m\_nPassiveWaitIteration}};}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a8357feef7f06f749e4d7b1c933d094a2}{counter\_type}}\ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_aa43e5ea6f5368b68638a2f016c45ee31}{m\_nPassiveWaitWakeup}};\ \ \ }
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a8357feef7f06f749e4d7b1c933d094a2}{counter\_type}}\ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a2b5c2cd168386f21c73a514cdd7eeb8c}{m\_nInvokeExclusive}};\ \ \ \ \ }
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a8357feef7f06f749e4d7b1c933d094a2}{counter\_type}}\ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a5f20bbd5917af48e12e7499a26815dc7}{m\_nWakeupByNotifying}};\ \ \ }
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a8357feef7f06f749e4d7b1c933d094a2}{counter\_type}}\ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a90b5f4797691230f3f58ea3db08f5ba9}{m\_nPassiveToCombiner}};\ \ \ }
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a9535350bbe3ba7c62b064e31011a3c89}{combining\_factor}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00103\ \textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a3e71511e3c7b6a0b103bb46bbf5b8f5e}{m\_nCombiningCount}}.get()\ ?\ double(\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_ac6434aa4d673705816fdd452cda12368}{m\_nOperationCount}}.get())\ /\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a3e71511e3c7b6a0b103bb46bbf5b8f5e}{m\_nCombiningCount}}.get()\ :\ 0.0;}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onOperation()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_ac6434aa4d673705816fdd452cda12368}{m\_nOperationCount}};\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onCombining()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a3e71511e3c7b6a0b103bb46bbf5b8f5e}{m\_nCombiningCount}};\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onCompactPublicationList()\ \ \{\ ++\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_ad7d22f62746ec04bbb71e34485e52667}{m\_nCompactPublicationList}};\ \ \}}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onDeactivatePubRecord()\ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a2c1fcdd435b42b89dcf835eccb19e106}{m\_nDeactivatePubRecord}};\ \ \ \ \ \}}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onActivatePubRecord()\ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a9bb52ef2b59053adca9cc11221fc7e7a}{m\_nActivatePubRecord}};\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onCreatePubRecord()\ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a53f8b3bf10d16f8fa2472e5324e5d6ae}{m\_nPubRecordCreated}};\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onDeletePubRecord()\ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_af0ff6e279b6137a5f5ceff232b2f4c57}{m\_nPubRecordDeleted}};\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onPassiveWait()\ \ \ \ \ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_af5c1a5e65640616befccab4398c05b9c}{m\_nPassiveWaitCall}};\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onPassiveWaitIteration()\ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a20ea3da11935c6ea5d66d8afc2d8f549}{m\_nPassiveWaitIteration}};\ \ \ \ \}}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onPassiveWaitWakeup()\ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_aa43e5ea6f5368b68638a2f016c45ee31}{m\_nPassiveWaitWakeup}};\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onInvokeExclusive()\ \ \ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a2b5c2cd168386f21c73a514cdd7eeb8c}{m\_nInvokeExclusive}};\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onWakeupByNotifying()\ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a5f20bbd5917af48e12e7499a26815dc7}{m\_nWakeupByNotifying}};\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onPassiveToCombiner()\ \ \ \ \ \ \ \{\ ++\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat_a90b5f4797691230f3f58ea3db08f5ba9}{m\_nPassiveToCombiner}};\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1empty__stat}{empty\_stat}}}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onOperation()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onCombining()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onCompactPublicationList()\textcolor{keyword}{\ \ const\ }\{\}}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onDeactivatePubRecord()\textcolor{keyword}{\ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onActivatePubRecord()\textcolor{keyword}{\ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onCreatePubRecord()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onDeletePubRecord()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onPassiveWait()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onPassiveWaitIteration()\textcolor{keyword}{\ \ \ \ const\ }\{\}}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onPassiveWaitWakeup()\textcolor{keyword}{\ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onInvokeExclusive()\textcolor{keyword}{\ \ \ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onWakeupByNotifying()\textcolor{keyword}{\ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ onPassiveToCombiner()\textcolor{keyword}{\ \ \ \ \ \ \ const\ }\{\}}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits}{traits}}}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{namespacecds_1_1sync_a3d645de2cdf4530abac4f1ba0d293ba6}{cds::sync::spin}}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a1fc60b5ab59e7b724abfc04c50eef837}{lock\_type}};\ \ }
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1wait__strategy_1_1backoff}{cds::algo::flat\_combining::wait\_strategy::backoff<\ cds::backoff::delay\_of<2>}}>\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a46467ac9f63058d2808229931226a933}{wait\_strategy}};\ }
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{external_2libcds_2cds_2user__setup_2allocator_8h_ad5fb7e3cbe8cf24295f0ea3c165a2d82}{CDS\_DEFAULT\_ALLOCATOR}}\ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a444fc3e7fe1f7d7fcc8a7640d542c56a}{allocator}};\ \ }
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1empty__stat}{empty\_stat}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a4a23d9d64a3c6427a6961b040470580c}{stat}};\ \ \ \ \ \ \ }
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structcds_1_1opt_1_1v_1_1relaxed__ordering}{opt::v::relaxed\_ordering}}\ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a7d9d7bbc26ad63ce9a29dcdbeb21c0b3}{memory\_model}};\ }
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}...\ Options>}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1make__traits}{make\_traits}}\ \{}
\DoxyCodeLine{00173\ \textcolor{preprocessor}{\#\ \ \ ifdef\ CDS\_DOXYGEN\_INVOKED}}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ implementation\_defined\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1make__traits_aa577f0ed2b6d27cd753682fa7c106419}{type}}\ ;\ \ \ }
\DoxyCodeLine{00175\ \textcolor{preprocessor}{\#\ \ \ else}}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structcds_1_1opt_1_1make__options}{cds::opt::make\_options}}<}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structcds_1_1opt_1_1find__type__traits}{cds::opt::find\_type\_traits}}<\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits}{traits}},\ Options...\ >\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1make__traits_aa577f0ed2b6d27cd753682fa7c106419}{::type}}}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ,Options...}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ >\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1make__traits_aa577f0ed2b6d27cd753682fa7c106419}{::type}}\ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1make__traits_aa577f0ed2b6d27cd753682fa7c106419}{type}};}
\DoxyCodeLine{00180\ \textcolor{preprocessor}{\#\ \ \ endif}}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ PublicationRecord}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ ,\textcolor{keyword}{typename}\ Traits\ =\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits}{traits}}}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ >}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a312a50b33d7552f4b63358587a7656ab}{kernel}}}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ Traits\ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ade4e41238a9f99263bdd442387fc8d61}{traits}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a1fc60b5ab59e7b724abfc04c50eef837}{traits::lock\_type}}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a94350076b24b7dfdeac0fe92074ba4d8}{global\_lock\_type}};\ \ \ }
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a46467ac9f63058d2808229931226a933}{traits::wait\_strategy}}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a8fecf7f51590ee89857440f9ff992cc3}{wait\_strategy}};\ \ }
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a444fc3e7fe1f7d7fcc8a7640d542c56a}{traits::allocator}}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a944158ddcd40624fd0eaa496659239be}{allocator}};\ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a4a23d9d64a3c6427a6961b040470580c}{traits::stat}}\ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a6337b9f0a55cf88b19db003b9abf20c4}{stat}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1traits_a7d9d7bbc26ad63ce9a29dcdbeb21c0b3}{traits::memory\_model}}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a5f2464c66c34f1f4803b94675a802b1a}{memory\_model}};\ \ \ \ }
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ wait\_strategy::template\ make\_publication\_record<PublicationRecord>::type\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}};\ }
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classcds_1_1details_1_1_allocator}{cds::details::Allocator<\ publication\_record\_type,\ allocator\ >}}\ \ \ cxx11\_allocator;\ }
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ std::lock\_guard<global\_lock\_type>\ lock\_guard;}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ atomics::atomic<unsigned\ int>\ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a39d5d1adf8681d3fb43a81a822d0d15e}{m\_nCount}};\ \ \ \ }
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}*\ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a4ce5a05f11bb9c9926ab8996e7fb703e}{m\_pHead}};\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}*\ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aa8fa60f69995e85e3aadb4f117d825db}{m\_pAllocatedHead}};\ }
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ boost::thread\_specific\_ptr<\ publication\_record\_type\ >\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a2f86249aa6d3a73f546e45902bf9d39f}{m\_pThreadRec}};\ \ \ }
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{mutable}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a94350076b24b7dfdeac0fe92074ba4d8}{global\_lock\_type}}\ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a211358613097d2ca01d3da7ad4f15a7b}{m\_Mutex}};\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{mutable}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a6337b9f0a55cf88b19db003b9abf20c4}{stat}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}};\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \textcolor{keyword}{const}\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a8f3451ab0e2f65801250852a847ece5f}{m\_nCompactFactor}};\ \ \ \ }
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \textcolor{keyword}{const}\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_addeb326bec25f11c22f9774c3b787c22}{m\_nCombinePassCount}};\ }
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a8fecf7f51590ee89857440f9ff992cc3}{wait\_strategy}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae713b05f5336ae35d39a7d7dc30e5a6a}{m\_waitStrategy}};\ \ \ \ \ \ }
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a312a50b33d7552f4b63358587a7656ab}{kernel}}()}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a312a50b33d7552f4b63358587a7656ab}{kernel}}(\ 1024,\ 8\ )}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a27320060ac864e064f12a6363e5e8404}{kernel}}(}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ nCompactFactor\ \ }
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ,\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ nCombinePassCount\ }
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a39d5d1adf8681d3fb43a81a822d0d15e}{m\_nCount}}(0)}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ,\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a4ce5a05f11bb9c9926ab8996e7fb703e}{m\_pHead}}(\ nullptr\ )}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ,\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aa8fa60f69995e85e3aadb4f117d825db}{m\_pAllocatedHead}}(\ nullptr\ )}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ,\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a2f86249aa6d3a73f546e45902bf9d39f}{m\_pThreadRec}}(\ tls\_cleanup\ )}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ,\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a8f3451ab0e2f65801250852a847ece5f}{m\_nCompactFactor}}(\ static\_cast<unsigned>(\ \mbox{\hyperlink{namespacecds}{cds}}::\mbox{\hyperlink{namespacecds_1_1beans}{beans}}::ceil2(\ static\_cast<size\_t>(\ nCompactFactor\ ))\ -\/\ 1\ ))\ \ \ \textcolor{comment}{//\ binary\ mask}}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ,\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_addeb326bec25f11c22f9774c3b787c22}{m\_nCombinePassCount}}(\ nCombinePassCount\ )}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a2f86249aa6d3a73f546e45902bf9d39f}{m\_pThreadRec}}.get()\ ==\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}*\ pRec\ =\ cxx11\_allocator().New();}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aa8fa60f69995e85e3aadb4f117d825db}{m\_pAllocatedHead}}\ =}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a4ce5a05f11bb9c9926ab8996e7fb703e}{m\_pHead}}\ =\ pRec;}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a2f86249aa6d3a73f546e45902bf9d39f}{m\_pThreadRec}}.reset(\ pRec\ );}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}}.onCreatePubRecord();}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a46f0529d4e295863d9d0506c47fdd590}{\string~kernel}}()}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a2f86249aa6d3a73f546e45902bf9d39f}{m\_pThreadRec}}.reset();\ \ \ \textcolor{comment}{//\ calls\ tls\_cleanup()}}
\DoxyCodeLine{00277\ }
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ delete\ all\ publication\ records}}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1publication__record}{publication\_record}}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aa8fa60f69995e85e3aadb4f117d825db}{m\_pAllocatedHead}};\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};\ )\ \{}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1publication__record}{publication\_record}}\ *\ pRec\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>pNextAllocated.load(\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ free\_publication\_record(\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}\ *\textcolor{keyword}{>}(\ pRec\ ));}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}\ *\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_adae70f9c40562915a7727f22e48a7caa}{acquire\_record}}()}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}\ *\ pRec\ =\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a2f86249aa6d3a73f546e45902bf9d39f}{m\_pThreadRec}}.get();}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !pRec\ )\ \{}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Allocate\ new\ publication\ record}}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRec\ =\ cxx11\_allocator().New();}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a2f86249aa6d3a73f546e45902bf9d39f}{m\_pThreadRec}}.reset(\ pRec\ );}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}}.onCreatePubRecord();}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Insert\ in\ allocated\ list}}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aa8fa60f69995e85e3aadb4f117d825db}{m\_pAllocatedHead}}\ !=\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1publication__record}{publication\_record}}*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aa8fa60f69995e85e3aadb4f117d825db}{m\_pAllocatedHead}}-\/>pNextAllocated.load(\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRec-\/>pNextAllocated.store(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ !\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aa8fa60f69995e85e3aadb4f117d825db}{m\_pAllocatedHead}}-\/>pNextAllocated.compare\_exchange\_weak(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ pRec,\ memory\_model::memory\_order\_release,\ atomics::memory\_order\_acquire\ ));}
\DoxyCodeLine{00306\ }
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ publish(\ pRec\ );}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ pRec-\/>nState.load(\ memory\_model::memory\_order\_acquire\ )\ !=\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a551f49e9d311e395a72a90798295f499a40ab14630f2d297efa2f6b97783f2c5d}{active}}\ )}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ publish(\ pRec\ );}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pRec-\/>op()\ ==\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a31e4c17b353f2cab92b34d79a37a12a0a050462e27eb65c3ca981b2609af319f1}{req\_EmptyRecord}}\ );}
\DoxyCodeLine{00313\ }
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pRec;}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a1428e6380c86b2df6529979ecb8bdb48}{release\_record}}(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}\ *\ pRec\ )}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pRec-\/>is\_done());}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRec-\/>nRequest.store(\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a31e4c17b353f2cab92b34d79a37a12a0a050462e27eb65c3ca981b2609af319f1}{req\_EmptyRecord}},\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Container>}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_acc134e6838d8bafb1c4103c58d5e8068}{combine}}(\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ nOpId,\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}\ *\ pRec,\ Container\&\ owner\ )}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ nOpId\ >=\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a31e4c17b353f2cab92b34d79a37a12a0ae0863b6d1beee7e247871637e285fc95}{req\_Operation}}\ );}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pRec\ );}
\DoxyCodeLine{00339\ }
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRec-\/>nRequest.store(\ nOpId,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}}.onOperation();}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ try\_combining(\ owner,\ pRec\ );}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00345\ }
\DoxyCodeLine{00347\ }
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Container>}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a7c2576d01d01136fbe81d74a0b995537}{batch\_combine}}(\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ nOpId,\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}*\ pRec,\ Container\&\ owner\ )}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ nOpId\ >=\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a31e4c17b353f2cab92b34d79a37a12a0ae0863b6d1beee7e247871637e285fc95}{req\_Operation}}\ );}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pRec\ );}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRec-\/>nRequest.store(\ nOpId,\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}}.onOperation();}
\DoxyCodeLine{00373\ }
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ try\_batch\_combining(\ owner,\ pRec\ );}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00376\ }
\DoxyCodeLine{00378\ }
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a9f06c948bee3d6e51cfb3b144de0ef27}{invoke\_exclusive}}(\ Func\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}\ )}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lock\_guard\ l(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a211358613097d2ca01d3da7ad4f15a7b}{m\_Mutex}}\ );}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}();}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae713b05f5336ae35d39a7d7dc30e5a6a}{m\_waitStrategy}}.wakeup(\ *\textcolor{keyword}{this}\ );}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}}.onInvokeExclusive();}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00397\ }
\DoxyCodeLine{00399\ }
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ab3a34ae8d428e4842a1594f49dff4493}{operation\_done}}(\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1publication__record}{publication\_record}}\&\ rec\ )}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rec.\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1publication__record_ab60a5289163c835df8ed1618b8da74d0}{nRequest}}.store(\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a31e4c17b353f2cab92b34d79a37a12a0acc4350b0fb18cbd1b94e4879fcc9b655}{req\_Response}},\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae713b05f5336ae35d39a7d7dc30e5a6a}{m\_waitStrategy}}.notify(\ *\textcolor{keyword}{this},\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}\&\textcolor{keyword}{>}(\ rec\ ));}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00408\ }
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a6337b9f0a55cf88b19db003b9abf20c4}{stat}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a19758bfc1bbc59e1e9026a6a3985bd37}{statistics}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00411\ \textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}};}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00415\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ For\ container\ classes\ based\ on\ flat\ combining}}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1stat}{stat}}\&\ internal\_statistics()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00418\ \textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}};}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00422\ }
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a0d6bcb16b1942b4d9d54bbeb57d7a6c1}{compact\_factor}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00425\ \textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a8f3451ab0e2f65801250852a847ece5f}{m\_nCompactFactor}}\ +\ 1;}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00428\ }
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a439d4444675e3c2ad369ef01427858b8}{combine\_pass\_count}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00431\ \textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_addeb326bec25f11c22f9774c3b787c22}{m\_nCombinePassCount}};}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00434\ }
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00437\ }
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator_a5f53358c2ce04dae125667ad2ec3494d}{iterator}}}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a312a50b33d7552f4b63358587a7656ab}{kernel}};}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}\ *\ m\_pRec;}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator_a5f53358c2ce04dae125667ad2ec3494d}{iterator}}(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}\ *\ pRec\ )}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ m\_pRec(\ pRec\ )}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ skip\_inactive();}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ skip\_inactive()}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ m\_pRec\ \&\&\ (m\_pRec-\/>nState.load(\ memory\_model::memory\_order\_acquire\ )\ !=\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a551f49e9d311e395a72a90798295f499a40ab14630f2d297efa2f6b97783f2c5d}{active}}}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ m\_pRec-\/>op(\ memory\_model::memory\_order\_relaxed)\ <\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a31e4c17b353f2cab92b34d79a37a12a0ae0863b6d1beee7e247871637e285fc95}{req\_Operation}}\ ))}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_pRec\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}*\textcolor{keyword}{>}(m\_pRec-\/>pNext.load(\ memory\_model::memory\_order\_acquire\ ));}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator_a5f53358c2ce04dae125667ad2ec3494d}{iterator}}()}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ m\_pRec(\ nullptr\ )}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00472\ }
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator_aa5f4fe1db04624d8c4004a875bcb02dd}{iterator}}(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator_a5f53358c2ce04dae125667ad2ec3494d}{iterator}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}\ )}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ m\_pRec(\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.m\_pRec\ )}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00477\ }
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator_a5f53358c2ce04dae125667ad2ec3494d}{iterator}}\&\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator_a36002e9ae99cc44743e971deeaf9242b}{operator++}}()}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ m\_pRec\ );}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_pRec\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}\ *\textcolor{keyword}{>}(\ m\_pRec-\/>pNext.load(\ memory\_model::memory\_order\_acquire\ ));}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ skip\_inactive();}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00486\ }
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator_a5f53358c2ce04dae125667ad2ec3494d}{iterator}}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator_a781679ed8f4869b25b625ae46cdc05c0}{operator++}}(\textcolor{keywordtype}{int})}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ m\_pRec\ );}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator_a5f53358c2ce04dae125667ad2ec3494d}{iterator}}\ it(*\textcolor{keyword}{this});}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++(*this);}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ it;}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00495\ }
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}*\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator_aa7be1dcdfc3c17320f8e108ea937b57d}{operator\ -\/>}}()}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_pRec;}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00501\ }
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}\&\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator_ade32fb42038c389ac2fdd005251c7506}{operator*}}()}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ m\_pRec\ );}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *m\_pRec;}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00508\ }
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator_ae887d598403c586aba56e387a7b0ecdf}{operator==}}(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator_a5f53358c2ce04dae125667ad2ec3494d}{iterator}}\ it1,\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator_a5f53358c2ce04dae125667ad2ec3494d}{iterator}}\ it2\ )}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ it1.m\_pRec\ ==\ it2.m\_pRec;}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00514\ }
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator_a3bc8329f46e209e19967f945b6a934cd}{operator!=}}(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator_a5f53358c2ce04dae125667ad2ec3494d}{iterator}}\ it1,\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_1_1iterator_a5f53358c2ce04dae125667ad2ec3494d}{iterator}}\ it2\ )}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ !(\ it1\ ==\ it2\ );}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00521\ }
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \ \ \ \ iterator\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a264c85eb975cbf8a4291a4a6990037b5}{begin}}()\ \ \ \ \{\ \textcolor{keywordflow}{return}\ iterator(\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a4ce5a05f11bb9c9926ab8996e7fb703e}{m\_pHead}});\ \}}
\DoxyCodeLine{00524\ }
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \ \ \ \ iterator\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a4fe99f56ca4a251210c1903b049d7566}{end}}()\ \ \ \ \ \ \{\ \textcolor{keywordflow}{return}\ iterator();\ \}}
\DoxyCodeLine{00527\ }
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00530\ }
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aa236c38a87a13b798b834b4d21116412}{get\_operation}}(\ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1publication__record}{publication\_record}}\&\ rec\ )}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rec.\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1publication__record_a120a22408392b98469a2fc0f6c6d4370}{op}}(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00537\ }
\DoxyCodeLine{00539\ }
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a426db68559fe3e8839b4cb2a3c9b594b}{wakeup\_any}}()}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1publication__record}{publication\_record}}*\ pRec\ =\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a4ce5a05f11bb9c9926ab8996e7fb703e}{m\_pHead}};}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ pRec\ )\ \{}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pRec-\/>\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1publication__record_a6a0a02763d17528bcfd6646c49d4b5fc}{nState}}.load(\ memory\_model::memory\_order\_acquire\ )\ ==\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a551f49e9d311e395a72a90798295f499a40ab14630f2d297efa2f6b97783f2c5d}{active}}}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ pRec-\/>\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1publication__record_a120a22408392b98469a2fc0f6c6d4370}{op}}(\ memory\_model::memory\_order\_acquire\ )\ >=\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a31e4c17b353f2cab92b34d79a37a12a0ae0863b6d1beee7e247871637e285fc95}{req\_Operation}}\ )}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae713b05f5336ae35d39a7d7dc30e5a6a}{m\_waitStrategy}}.notify(\ *\textcolor{keyword}{this},\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}\&\textcolor{keyword}{>}(\ *pRec\ ));}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRec\ =\ pRec-\/>\mbox{\hyperlink{structcds_1_1algo_1_1flat__combining_1_1publication__record_a38d69731401648dd7e6cb5d32cbd8a61}{pNext}}.load(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00554\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00555\ }
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ tls\_cleanup(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}*\ pRec\ )}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Thread\ done}}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ pRec\ that\ is\ TLS\ data\ should\ be\ excluded\ from\ publication\ list}}
\DoxyCodeLine{00562\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRec-\/>nState.store(\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a551f49e9d311e395a72a90798295f499ac21d0f05db7d58c8d35bdd5f81a73536}{removed}},\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00564\ }
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ free\_publication\_record(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}*\ pRec\ )}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cxx11\_allocator().Delete(\ pRec\ );}
\DoxyCodeLine{00568\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}}.onDeletePubRecord();}
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00570\ }
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ publish(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}*\ pRec\ )}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pRec-\/>nState.load(\ memory\_model::memory\_order\_relaxed\ )\ ==\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a551f49e9d311e395a72a90798295f499a2d24be2b807c915aa68e80a090a8a5de}{inactive}}\ );}
\DoxyCodeLine{00574\ }
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRec-\/>nAge.store(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a39d5d1adf8681d3fb43a81a822d0d15e}{m\_nCount}}.load(memory\_model::memory\_order\_relaxed),\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRec-\/>nState.store(\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a551f49e9d311e395a72a90798295f499a40ab14630f2d297efa2f6b97783f2c5d}{active}},\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{00577\ }
\DoxyCodeLine{00578\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Insert\ record\ to\ publication\ list}}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a4ce5a05f11bb9c9926ab8996e7fb703e}{m\_pHead}}\ !=\ \textcolor{keyword}{static\_cast<}publication\_record\ *\textcolor{keyword}{>}(pRec))\ \{}
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ publication\_record\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a4ce5a05f11bb9c9926ab8996e7fb703e}{m\_pHead}}-\/>pNext.load(\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ !=\ \textcolor{keyword}{static\_cast<}publication\_record\ *\textcolor{keyword}{>}(\ pRec\ ))\ \{}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRec-\/>pNext.store(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Failed\ CAS\ changes\ p}}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ !\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a4ce5a05f11bb9c9926ab8996e7fb703e}{m\_pHead}}-\/>pNext.compare\_exchange\_weak(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ \textcolor{keyword}{static\_cast<}publication\_record\ *\textcolor{keyword}{>}(pRec),}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ memory\_model::memory\_order\_release,\ atomics::memory\_order\_acquire\ ));}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}}.onActivatePubRecord();}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00591\ }
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ republish(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}*\ pRec\ )}
\DoxyCodeLine{00593\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pRec-\/>nState.load(\ memory\_model::memory\_order\_relaxed\ )\ !=\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a551f49e9d311e395a72a90798295f499a40ab14630f2d297efa2f6b97783f2c5d}{active}}\ )\ \{}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ record\ has\ been\ excluded\ from\ publication\ list.\ Reinsert\ it}}
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ publish(\ pRec\ );}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00599\ }
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Container>}
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ try\_combining(\ Container\&\ owner,\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}*\ pRec\ )}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a211358613097d2ca01d3da7ad4f15a7b}{m\_Mutex}}.try\_lock())\ \{}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ thread\ becomes\ a\ combiner}}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lock\_guard\ l(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a211358613097d2ca01d3da7ad4f15a7b}{m\_Mutex}},\ std::adopt\_lock\_t());}
\DoxyCodeLine{00606\ }
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ record\ pRec\ can\ be\ excluded\ from\ publication\ list.\ Re-\/publish\ it}}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ republish(\ pRec\ );}
\DoxyCodeLine{00609\ }
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ combining(\ owner\ );}
\DoxyCodeLine{00611\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pRec-\/>op(\ memory\_model::memory\_order\_relaxed\ )\ ==\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a31e4c17b353f2cab92b34d79a37a12a0acc4350b0fb18cbd1b94e4879fcc9b655}{req\_Response}}\ );}
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00614\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ There\ is\ another\ combiner,\ wait\ while\ it\ executes\ our\ request}}
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !wait\_for\_combining(\ pRec\ ))\ \{}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ thread\ becomes\ a\ combiner}}
\DoxyCodeLine{00617\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lock\_guard\ l(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a211358613097d2ca01d3da7ad4f15a7b}{m\_Mutex}},\ std::adopt\_lock\_t());}
\DoxyCodeLine{00618\ }
\DoxyCodeLine{00619\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ record\ pRec\ can\ be\ excluded\ from\ publication\ list.\ Re-\/publish\ it}}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ republish(\ pRec\ );}
\DoxyCodeLine{00621\ }
\DoxyCodeLine{00622\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ combining(\ owner\ );}
\DoxyCodeLine{00623\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pRec-\/>op(\ memory\_model::memory\_order\_relaxed\ )\ ==\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a31e4c17b353f2cab92b34d79a37a12a0acc4350b0fb18cbd1b94e4879fcc9b655}{req\_Response}}\ );}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00625\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00626\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00627\ }
\DoxyCodeLine{00628\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Container>}
\DoxyCodeLine{00629\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ try\_batch\_combining(\ Container\&\ owner,\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}\ *\ pRec\ )}
\DoxyCodeLine{00630\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a211358613097d2ca01d3da7ad4f15a7b}{m\_Mutex}}.try\_lock())\ \{}
\DoxyCodeLine{00632\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ thread\ becomes\ a\ combiner}}
\DoxyCodeLine{00633\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lock\_guard\ l(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a211358613097d2ca01d3da7ad4f15a7b}{m\_Mutex}},\ std::adopt\_lock\_t());}
\DoxyCodeLine{00634\ }
\DoxyCodeLine{00635\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ record\ pRec\ can\ be\ excluded\ from\ publication\ list.\ Re-\/publish\ it}}
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ republish(\ pRec\ );}
\DoxyCodeLine{00637\ }
\DoxyCodeLine{00638\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ batch\_combining(\ owner\ );}
\DoxyCodeLine{00639\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pRec-\/>op(\ memory\_model::memory\_order\_relaxed\ )\ ==\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a31e4c17b353f2cab92b34d79a37a12a0acc4350b0fb18cbd1b94e4879fcc9b655}{req\_Response}}\ );}
\DoxyCodeLine{00640\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00642\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ There\ is\ another\ combiner,\ wait\ while\ it\ executes\ our\ request}}
\DoxyCodeLine{00643\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !wait\_for\_combining(\ pRec\ ))\ \{}
\DoxyCodeLine{00644\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ thread\ becomes\ a\ combiner}}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lock\_guard\ l(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a211358613097d2ca01d3da7ad4f15a7b}{m\_Mutex}},\ std::adopt\_lock\_t());}
\DoxyCodeLine{00646\ }
\DoxyCodeLine{00647\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ record\ pRec\ can\ be\ excluded\ from\ publication\ list.\ Re-\/publish\ it}}
\DoxyCodeLine{00648\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ republish(\ pRec\ );}
\DoxyCodeLine{00649\ }
\DoxyCodeLine{00650\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ batch\_combining(\ owner\ );}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pRec-\/>op(\ memory\_model::memory\_order\_relaxed\ )\ ==\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a31e4c17b353f2cab92b34d79a37a12a0acc4350b0fb18cbd1b94e4879fcc9b655}{req\_Response}}\ );}
\DoxyCodeLine{00652\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00655\ }
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Container>}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ combining(\ Container\&\ owner\ )}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ thread\ is\ a\ combiner}}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ !\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a211358613097d2ca01d3da7ad4f15a7b}{m\_Mutex}}.try\_lock());}
\DoxyCodeLine{00661\ }
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \textcolor{keyword}{const}\ nCurAge\ =\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a39d5d1adf8681d3fb43a81a822d0d15e}{m\_nCount}}.fetch\_add(\ 1,\ memory\_model::memory\_order\_relaxed\ )\ +\ 1;}
\DoxyCodeLine{00663\ }
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ nEmptyPassCount\ =\ 0;}
\DoxyCodeLine{00665\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ nUsefulPassCount\ =\ 0;}
\DoxyCodeLine{00666\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ nPass\ =\ 0;\ nPass\ <\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_addeb326bec25f11c22f9774c3b787c22}{m\_nCombinePassCount}};\ ++nPass\ )\ \{}
\DoxyCodeLine{00667\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ combining\_pass(\ owner,\ nCurAge\ ))}
\DoxyCodeLine{00668\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++nUsefulPassCount;}
\DoxyCodeLine{00669\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ ++nEmptyPassCount\ >\ nUsefulPassCount\ )}
\DoxyCodeLine{00670\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00671\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00672\ }
\DoxyCodeLine{00673\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}}.onCombining();}
\DoxyCodeLine{00674\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ nCurAge\ \&\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a8f3451ab0e2f65801250852a847ece5f}{m\_nCompactFactor}}\ )\ ==\ 0\ )}
\DoxyCodeLine{00675\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ compact\_list(\ nCurAge\ );}
\DoxyCodeLine{00676\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00677\ }
\DoxyCodeLine{00678\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Container>}
\DoxyCodeLine{00679\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ combining\_pass(\ Container\&\ owner,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ nCurAge\ )}
\DoxyCodeLine{00680\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00681\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ publication\_record*\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a4ce5a05f11bb9c9926ab8996e7fb703e}{m\_pHead}};}
\DoxyCodeLine{00682\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ bOpDone\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00683\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ )\ \{}
\DoxyCodeLine{00684\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>nState.load(\ memory\_model::memory\_order\_acquire\ ))\ \{}
\DoxyCodeLine{00685\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a551f49e9d311e395a72a90798295f499a40ab14630f2d297efa2f6b97783f2c5d}{active}}:}
\DoxyCodeLine{00686\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>op(\ memory\_model::memory\_order\_acquire\ )\ >=\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a31e4c17b353f2cab92b34d79a37a12a0ae0863b6d1beee7e247871637e285fc95}{req\_Operation}}\ )\ \{}
\DoxyCodeLine{00687\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>nAge.store(\ nCurAge,\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{00688\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ owner.fc\_apply(\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}*\textcolor{keyword}{>}(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ ));}
\DoxyCodeLine{00689\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ab3a34ae8d428e4842a1594f49dff4493}{operation\_done}}(\ *\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ );}
\DoxyCodeLine{00690\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bOpDone\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00691\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00692\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00693\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a551f49e9d311e395a72a90798295f499a2d24be2b807c915aa68e80a090a8a5de}{inactive}}:}
\DoxyCodeLine{00694\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00695\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a551f49e9d311e395a72a90798295f499ac21d0f05db7d58c8d35bdd5f81a73536}{removed}}:}
\DoxyCodeLine{00696\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Such\ record\ will\ be\ removed\ on\ compacting\ phase}}
\DoxyCodeLine{00697\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00698\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00700\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ \textcolor{keyword}{false}\ );}
\DoxyCodeLine{00701\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00702\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>pNext.load(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{00703\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00704\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ bOpDone;}
\DoxyCodeLine{00705\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00706\ }
\DoxyCodeLine{00707\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Container>}
\DoxyCodeLine{00708\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ batch\_combining(\ Container\&\ owner\ )}
\DoxyCodeLine{00709\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00710\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ thread\ is\ a\ combiner}}
\DoxyCodeLine{00711\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ !\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a211358613097d2ca01d3da7ad4f15a7b}{m\_Mutex}}.try\_lock());}
\DoxyCodeLine{00712\ }
\DoxyCodeLine{00713\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \textcolor{keyword}{const}\ nCurAge\ =\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a39d5d1adf8681d3fb43a81a822d0d15e}{m\_nCount}}.fetch\_add(\ 1,\ memory\_model::memory\_order\_relaxed\ )\ +\ 1;}
\DoxyCodeLine{00714\ }
\DoxyCodeLine{00715\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ nPass\ =\ 0;\ nPass\ <\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_addeb326bec25f11c22f9774c3b787c22}{m\_nCombinePassCount}};\ ++nPass\ )}
\DoxyCodeLine{00716\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ owner.fc\_process(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a264c85eb975cbf8a4291a4a6990037b5}{begin}}(),\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a4fe99f56ca4a251210c1903b049d7566}{end}}());}
\DoxyCodeLine{00717\ }
\DoxyCodeLine{00718\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ combining\_pass(\ owner,\ nCurAge\ );}
\DoxyCodeLine{00719\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}}.onCombining();}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ nCurAge\ \&\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a8f3451ab0e2f65801250852a847ece5f}{m\_nCompactFactor}}\ )\ ==\ 0\ )}
\DoxyCodeLine{00721\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ compact\_list(\ nCurAge\ );}
\DoxyCodeLine{00722\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00723\ }
\DoxyCodeLine{00724\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ wait\_for\_combining(\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}*\ pRec\ )}
\DoxyCodeLine{00725\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00726\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae713b05f5336ae35d39a7d7dc30e5a6a}{m\_waitStrategy}}.prepare(\ *pRec\ );}
\DoxyCodeLine{00727\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}}.onPassiveWait();}
\DoxyCodeLine{00728\ }
\DoxyCodeLine{00729\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ pRec-\/>op(\ memory\_model::memory\_order\_acquire\ )\ !=\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a31e4c17b353f2cab92b34d79a37a12a0acc4350b0fb18cbd1b94e4879fcc9b655}{req\_Response}}\ )\ \{}
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ record\ can\ be\ excluded\ from\ publication\ list.\ Reinsert\ it}}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ republish(\ pRec\ );}
\DoxyCodeLine{00732\ }
\DoxyCodeLine{00733\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}}.onPassiveWaitIteration();}
\DoxyCodeLine{00734\ }
\DoxyCodeLine{00735\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Wait\ while\ operation\ processing}}
\DoxyCodeLine{00736\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae713b05f5336ae35d39a7d7dc30e5a6a}{m\_waitStrategy}}.wait(\ *\textcolor{keyword}{this},\ *pRec\ ))}
\DoxyCodeLine{00737\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}}.onWakeupByNotifying();}
\DoxyCodeLine{00738\ }
\DoxyCodeLine{00739\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a211358613097d2ca01d3da7ad4f15a7b}{m\_Mutex}}.try\_lock())\ \{}
\DoxyCodeLine{00740\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pRec-\/>op(\ memory\_model::memory\_order\_acquire\ )\ ==\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a31e4c17b353f2cab92b34d79a37a12a0acc4350b0fb18cbd1b94e4879fcc9b655}{req\_Response}}\ )\ \{}
\DoxyCodeLine{00741\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Operation\ is\ done}}
\DoxyCodeLine{00742\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a211358613097d2ca01d3da7ad4f15a7b}{m\_Mutex}}.unlock();}
\DoxyCodeLine{00743\ }
\DoxyCodeLine{00744\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Wake\ up\ a\ pending\ threads}}
\DoxyCodeLine{00745\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae713b05f5336ae35d39a7d7dc30e5a6a}{m\_waitStrategy}}.wakeup(\ *\textcolor{keyword}{this}\ );}
\DoxyCodeLine{00746\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}}.onPassiveWaitWakeup();}
\DoxyCodeLine{00747\ }
\DoxyCodeLine{00748\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00749\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00750\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ thread\ becomes\ a\ combiner}}
\DoxyCodeLine{00751\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}}.onPassiveToCombiner();}
\DoxyCodeLine{00752\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00753\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00754\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00755\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00756\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00757\ }
\DoxyCodeLine{00758\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ compact\_list(\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ nCurAge\ )}
\DoxyCodeLine{00759\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00760\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Compacts\ publication\ list}}
\DoxyCodeLine{00761\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ function\ is\ called\ only\ by\ combiner\ thread}}
\DoxyCodeLine{00762\ }
\DoxyCodeLine{00763\ \ \ \ \ \ \ \ \ \ \ \ \ try\_again:}
\DoxyCodeLine{00764\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ publication\_record\ *\ pPrev\ =\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a4ce5a05f11bb9c9926ab8996e7fb703e}{m\_pHead}};}
\DoxyCodeLine{00765\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ publication\_record\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ pPrev-\/>pNext.load(\ memory\_model::memory\_order\_acquire\ );\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};\ )\ \{}
\DoxyCodeLine{00766\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>nState.load(\ memory\_model::memory\_order\_relaxed\ ))\ \{}
\DoxyCodeLine{00767\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a551f49e9d311e395a72a90798295f499a40ab14630f2d297efa2f6b97783f2c5d}{active}}:}
\DoxyCodeLine{00768\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>nAge.load(\ memory\_model::memory\_order\_relaxed\ )\ +\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a8f3451ab0e2f65801250852a847ece5f}{m\_nCompactFactor}}\ <\ nCurAge\ )}
\DoxyCodeLine{00769\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00770\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ publication\_record\ *\ pNext\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>pNext.load(\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{00771\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pPrev-\/>pNext.compare\_exchange\_strong(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ pNext,}
\DoxyCodeLine{00772\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ memory\_model::memory\_order\_acquire,\ atomics::memory\_order\_relaxed\ ))}
\DoxyCodeLine{00773\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00774\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>nState.store(\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a551f49e9d311e395a72a90798295f499a2d24be2b807c915aa68e80a090a8a5de}{inactive}},\ memory\_model::memory\_order\_release\ );}
\DoxyCodeLine{00775\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ pNext;}
\DoxyCodeLine{00776\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}}.onDeactivatePubRecord();}
\DoxyCodeLine{00777\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00778\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00779\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00780\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00781\ }
\DoxyCodeLine{00782\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a551f49e9d311e395a72a90798295f499ac21d0f05db7d58c8d35bdd5f81a73536}{removed}}:}
\DoxyCodeLine{00783\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ publication\_record\ *\ pNext\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>pNext.load(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{00784\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{compiler_2clang_2defs_8h_a62e15ff96566acaad88f2eedc0b7675e}{cds\_likely}}(\ pPrev-\/>pNext.compare\_exchange\_strong(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ pNext,\ memory\_model::memory\_order\_acquire,\ atomics::memory\_order\_relaxed\ )))\ \{}
\DoxyCodeLine{00785\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ pNext;}
\DoxyCodeLine{00786\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00787\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00788\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00789\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ CAS\ can\ be\ failed\ only\ in\ beginning\ of\ list}}
\DoxyCodeLine{00790\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ pPrev\ ==\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_a4ce5a05f11bb9c9926ab8996e7fb703e}{m\_pHead}}\ );}
\DoxyCodeLine{00791\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ try\_again;}
\DoxyCodeLine{00792\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00793\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00794\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pPrev\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00795\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>pNext.load(\ memory\_model::memory\_order\_acquire\ );}
\DoxyCodeLine{00796\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00797\ }
\DoxyCodeLine{00798\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Iterate\ over\ allocated\ list\ to\ find\ removed\ records}}
\DoxyCodeLine{00799\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pPrev\ =\ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aa8fa60f69995e85e3aadb4f117d825db}{m\_pAllocatedHead}};}
\DoxyCodeLine{00800\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ publication\_record\ *\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ pPrev-\/>pNextAllocated.load(\ memory\_model::memory\_order\_acquire\ );\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};\ )\ \{}
\DoxyCodeLine{00801\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>nState.load(\ memory\_model::memory\_order\_relaxed\ )\ ==\ \mbox{\hyperlink{namespacecds_1_1algo_1_1flat__combining_a551f49e9d311e395a72a90798295f499ac21d0f05db7d58c8d35bdd5f81a73536}{removed}}\ )\ \{}
\DoxyCodeLine{00802\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ publication\_record\ *\ pNext\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>pNextAllocated.load(\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{00803\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ pPrev-\/>pNextAllocated.compare\_exchange\_strong(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}},\ pNext,\ memory\_model::memory\_order\_acquire,\ atomics::memory\_order\_relaxed\ ))\ \{}
\DoxyCodeLine{00804\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ free\_publication\_record(\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_ae36e09aaa73e192b79ebb7738bf28fb7}{publication\_record\_type}}\ *\textcolor{keyword}{>}(\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ ));}
\DoxyCodeLine{00805\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ pNext;}
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00807\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00808\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00809\ }
\DoxyCodeLine{00810\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pPrev\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}};}
\DoxyCodeLine{00811\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ =\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}-\/>pNextAllocated.load(\ memory\_model::memory\_order\_relaxed\ );}
\DoxyCodeLine{00812\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00813\ }
\DoxyCodeLine{00814\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcds_1_1algo_1_1flat__combining_1_1kernel_aab0aef252088679d5d97df89efa64110}{m\_Stat}}.onCompactPublicationList();}
\DoxyCodeLine{00815\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00816\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00817\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00818\ }
\DoxyCodeLine{00819\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@cond}}
\DoxyCodeLine{00820\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }container}
\DoxyCodeLine{00821\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00822\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00823\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ PubRecord>}
\DoxyCodeLine{00824\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ fc\_apply(\ PubRecord\ *\ )}
\DoxyCodeLine{00825\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00826\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ \textcolor{keyword}{false}\ );}
\DoxyCodeLine{00827\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00828\ }
\DoxyCodeLine{00829\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Iterator>}
\DoxyCodeLine{00830\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ fc\_process(\ Iterator,\ Iterator\ )}
\DoxyCodeLine{00831\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00832\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(\ \textcolor{keyword}{false}\ );}
\DoxyCodeLine{00833\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00834\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00835\ \ \ \ \ \ \ \ \ \textcolor{comment}{//@endcond}}
\DoxyCodeLine{00836\ }
\DoxyCodeLine{00837\ \ \ \ \ \}\ \textcolor{comment}{//\ namespace\ flat\_combining}}
\DoxyCodeLine{00838\ \}\}\ \textcolor{comment}{//\ namespace\ cds::algo}}
\DoxyCodeLine{00839\ }
\DoxyCodeLine{00840\ \textcolor{comment}{/*}}
\DoxyCodeLine{00841\ \textcolor{comment}{\ \ CppMem\ model\ \ (http://svr-\/pes20-\/cppmem.cl.cam.ac.uk/cppmem/)}}
\DoxyCodeLine{00842\ \textcolor{comment}{}}
\DoxyCodeLine{00843\ \textcolor{comment}{\ \ //\ Combiner\ thread\ -\/\ slave\ (waiting)\ thread}}
\DoxyCodeLine{00844\ \textcolor{comment}{int\ main()\ \{}}
\DoxyCodeLine{00845\ \textcolor{comment}{\ \ \ \ \ \ atomic\_int\ y\ =\ 0;\ \ //\ pRec-\/>op}}
\DoxyCodeLine{00846\ \textcolor{comment}{\ \ \ \ \ \ int\ x\ =\ 0;\ \ \ \ \ \ \ \ \ //\ pRec-\/>data}}
\DoxyCodeLine{00847\ \textcolor{comment}{\ \ \ \{\{\{}}
\DoxyCodeLine{00848\ \textcolor{comment}{\ \ \ \ \ \ \{\ //\ slave\ thread\ (not\ combiner)}}
\DoxyCodeLine{00849\ \textcolor{comment}{\ \ \ \ \ \ \ \ //\ Op\ data}}
\DoxyCodeLine{00850\ \textcolor{comment}{\ \ \ \ \ \ \ \ x\ =\ 1;}}
\DoxyCodeLine{00851\ \textcolor{comment}{\ \ \ \ \ \ \ \ //\ Annotate\ request\ (op)}}
\DoxyCodeLine{00852\ \textcolor{comment}{\ \ \ \ \ \ \ \ y.store(1,\ release);}}
\DoxyCodeLine{00853\ \textcolor{comment}{\ \ \ \ \ \ \ \ //\ Wait\ while\ request\ done}}
\DoxyCodeLine{00854\ \textcolor{comment}{\ \ \ \ \ \ \ \ y.load(acquire).readsvalue(2);}}
\DoxyCodeLine{00855\ \textcolor{comment}{\ \ \ \ \ \ \ \ //\ Read\ result}}
\DoxyCodeLine{00856\ \textcolor{comment}{\ \ \ \ \ \ \ \ r2=x;}}
\DoxyCodeLine{00857\ \textcolor{comment}{\ \ \ \ \ \ \}}}
\DoxyCodeLine{00858\ \textcolor{comment}{\ \ \ |||}}
\DoxyCodeLine{00859\ \textcolor{comment}{\ \ \ \ \ \ \{\ //\ Combiner\ thread}}
\DoxyCodeLine{00860\ \textcolor{comment}{\ \ \ \ \ \ \ \ //\ Read\ request\ (op)}}
\DoxyCodeLine{00861\ \textcolor{comment}{\ \ \ \ \ \ \ \ r1=y.load(acquire).readsvalue(1);}}
\DoxyCodeLine{00862\ \textcolor{comment}{\ \ \ \ \ \ \ \ //\ Execute\ request\ -\/\ change\ request\ data}}
\DoxyCodeLine{00863\ \textcolor{comment}{\ \ \ \ \ \ \ \ x\ =\ 2;}}
\DoxyCodeLine{00864\ \textcolor{comment}{\ \ \ \ \ \ \ \ //\ store\ "{}request\ processed"{}\ flag\ (pRec-\/>op\ :=\ req\_Response)}}
\DoxyCodeLine{00865\ \textcolor{comment}{\ \ \ \ \ \ \ \ y.store(2,\ release);}}
\DoxyCodeLine{00866\ \textcolor{comment}{\ \ \ \ \ \ \}}}
\DoxyCodeLine{00867\ \textcolor{comment}{\ \ \ \}\}\};}}
\DoxyCodeLine{00868\ \textcolor{comment}{\ \ \ return\ 0;}}
\DoxyCodeLine{00869\ \textcolor{comment}{\}}}
\DoxyCodeLine{00870\ \textcolor{comment}{}}
\DoxyCodeLine{00871\ \textcolor{comment}{*/}}
\DoxyCodeLine{00872\ }
\DoxyCodeLine{00873\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \#ifndef\ CDSLIB\_ALGO\_FLAT\_COMBINING\_KERNEL\_H}}

\end{DoxyCode}
