\doxysection{callable\+\_\+library.\+h}
\hypertarget{ast_2callable__library_8h_source}{}\label{ast_2callable__library_8h_source}\index{runtime/ast/callable\_library.h@{runtime/ast/callable\_library.h}}
\mbox{\hyperlink{ast_2callable__library_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{core_2stl_2vector_8h}{runtime/core/stl/vector.h}}>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{string_8h}{runtime/core/stl/string.h}}>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{core_2stl_2unordered__map_8h}{runtime/core/stl/unordered\_map.h}}>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{external__function_8h}{runtime/ast/external\_function.h}}>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{ast_2function_8h}{runtime/ast/function.h}}>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{function__builder_8h}{runtime/ast/function\_builder.h}}>}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceluisa_1_1compute}{luisa::compute}}\ \{}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00013\ \textcolor{keyword}{class\ }\mbox{\hyperlink{namespaceluisa_1_1compute_a1472e14c2d5b6a6a455d322c8a25c86b}{Callable}};}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{template}<\textcolor{keywordtype}{size\_t}\ dim,\ \textcolor{keyword}{typename}...\ T>}
\DoxyCodeLine{00016\ \textcolor{keyword}{class\ }\mbox{\hyperlink{namespaceluisa_1_1compute_1_1ir_ad6190dd8cb3509ba0b14a1463e3bab00a6ff9f4444ac481652f4412b5e1623846}{Kernel}};}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{keyword}{class\ }\mbox{\hyperlink{dll__export_8h_af35f96669b7399486e26bc85317958f8}{LC\_AST\_API}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_afb7af316cb56eb6c130a0057f4b58a14}{CallableLibrary}}\ \{}
\DoxyCodeLine{00019\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_aee5b3424506dec02deef3bfc519d2406}{CallableMap}}\ =\ luisa::unordered\_map<luisa::string,\ luisa::shared\_ptr<const\ detail::FunctionBuilder>>;}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structluisa_1_1compute_1_1_callable_library_1_1_deser_package}{DeserPackage}}\ \{}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_function_builder}{detail::FunctionBuilder}}\ *\mbox{\hyperlink{structluisa_1_1compute_1_1_callable_library_1_1_deser_package_a274d94a6fd49fd71d26863bc98bf6f48}{builder}};}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ luisa::unordered\_map<uint64\_t,\ luisa::shared\_ptr<detail::FunctionBuilder>>\ \mbox{\hyperlink{structluisa_1_1compute_1_1_callable_library_1_1_deser_package_a11796de008a957307ebd3998aa9b8ea5}{callable\_map}};}
\DoxyCodeLine{00026\ \ \ \ \ \};}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_aee5b3424506dec02deef3bfc519d2406}{CallableMap}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_a7f14ede87a287d3631198eb5091f6e08}{\_callables}};}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_a3f93a4b090854a59119fc77acf323acb}{serialize\_func\_builder}}(\mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_function_builder}{detail::FunctionBuilder}}\ \textcolor{keyword}{const}\ \&builder,\ luisa::vector<std::byte>\ \&vec)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_aa80dbb6ca44ac1dd8ed6d719935ef67d}{deserialize\_func\_builder}}(\mbox{\hyperlink{classluisa_1_1compute_1_1detail_1_1_function_builder}{detail::FunctionBuilder}}\ \&builder,\ std::byte\ \textcolor{keyword}{const}\ *\&\mbox{\hyperlink{spdlog_2include_2spdlog_2fmt_2bundled_2format_8h_adb6e274f8eb0b74b2865215e1b49c535}{ptr}},\ \mbox{\hyperlink{structluisa_1_1compute_1_1_callable_library_1_1_deser_package}{DeserPackage}}\ \&pack)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_ae557eed02e608466a8e22d0ee4b45d01}{ser\_value}}(T\ \textcolor{keyword}{const}\ \&t,\ luisa::vector<std::byte>\ \&vec)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keyword}{static}\ T\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_aa46cc4bfca39bf9369ae22a88b727387}{deser\_value}}(std::byte\ \textcolor{keyword}{const}\ *\&\mbox{\hyperlink{spdlog_2include_2spdlog_2fmt_2bundled_2format_8h_adb6e274f8eb0b74b2865215e1b49c535}{ptr}},\ \mbox{\hyperlink{structluisa_1_1compute_1_1_callable_library_1_1_deser_package}{DeserPackage}}\ \&pack)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_ae87f837f20ab3f355b46c02eb303c6c9}{deser\_ptr}}(T\ obj,\ std::byte\ \textcolor{keyword}{const}\ *\&\mbox{\hyperlink{spdlog_2include_2spdlog_2fmt_2bundled_2format_8h_adb6e274f8eb0b74b2865215e1b49c535}{ptr}},\ \mbox{\hyperlink{structluisa_1_1compute_1_1_callable_library_1_1_deser_package}{DeserPackage}}\ \&pack)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00038\ \ \ \ \ [[nodiscard]]\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_ad5d9fb4896aa9980aa4a53cb5c9a7b99}{empty}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_a7f14ede87a287d3631198eb5091f6e08}{\_callables}}.empty();\ \}}
\DoxyCodeLine{00039\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\ \&\mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_a70b228f1c262fec8d6854f2896fe5eb2}{callable\_map}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_a7f14ede87a287d3631198eb5091f6e08}{\_callables}};\ \}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00041\ \ \ \ \ [[nodiscard]]\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable}{Callable<T>}}\ get\_callable(luisa::string\_view\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a5c4947d4516dd7cfa3505ce3a648a4ef}{name}})\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keywordtype}{size\_t}\ dim,\ \textcolor{keyword}{typename}...\ T>}
\DoxyCodeLine{00043\ \ \ \ \ [[nodiscard]]\ \mbox{\hyperlink{classluisa_1_1compute_1_1_kernel}{Kernel}}<dim,\ T...>\ get\_kernel(luisa::string\_view\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a5c4947d4516dd7cfa3505ce3a648a4ef}{name}})\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00044\ \ \ \ \ [[nodiscard]]\ \mbox{\hyperlink{classluisa_1_1compute_1_1_function}{Function}}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_a0514e34794409f17011cea160f6f0bbb}{get\_function}}(luisa::string\_view\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a5c4947d4516dd7cfa3505ce3a648a4ef}{name}})\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00045\ \ \ \ \ [[nodiscard]]\ luisa::shared\_ptr<const\ detail::FunctionBuilder>\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_a9b148d5f7d44cc6653016db4d6f5f07c}{get\_function\_builder}}(luisa::string\_view\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a5c4947d4516dd7cfa3505ce3a648a4ef}{name}})\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00046\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_afb7af316cb56eb6c130a0057f4b58a14}{CallableLibrary}}()\ noexcept;}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_a341e43ca236fe23f707b792d153d10aa}{add\_callable}}(\mbox{\hyperlink{namespaceluisa}{luisa}}::\mbox{\hyperlink{base_8h_a204ca715c2febee035464fa53dfc50c4}{string\_view}}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a5c4947d4516dd7cfa3505ce3a648a4ef}{name}},\ \mbox{\hyperlink{namespaceluisa}{luisa}}::\mbox{\hyperlink{classeastl_1_1shared__ptr}{shared\_ptr}}<const\ \mbox{\hyperlink{namespacedetail}{detail}}::FunctionBuilder>\ callable)\ noexcept;}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_abb411b7bdc9b37338391bb13429e2dca}{load}}(\mbox{\hyperlink{namespaceluisa}{luisa}}::\mbox{\hyperlink{classeastl_1_1span}{span}}<const\ \mbox{\hyperlink{namespacestd}{std}}::\textcolor{keywordtype}{byte}>\ binary)\ noexcept;}
\DoxyCodeLine{00049\ \ \ \ \ [[nodiscard]]\ \mbox{\hyperlink{namespaceluisa}{luisa}}::\mbox{\hyperlink{namespaceluisa_a2c3aa26df5a5ab8ed3d5cc6f00cd0718}{vector}}<\mbox{\hyperlink{namespacestd}{std}}::\textcolor{keywordtype}{byte}>\ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_ab3c0328f6d98bbfa500eae2ae3e1fd9a}{serialize}}()\ const\ noexcept;}
\DoxyCodeLine{00050\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_afb7af316cb56eb6c130a0057f4b58a14}{CallableLibrary}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_afb7af316cb56eb6c130a0057f4b58a14}{CallableLibrary}}\ const\ \&)\ =\ delete;}
\DoxyCodeLine{00051\ \ \ \ \ \mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_afb7af316cb56eb6c130a0057f4b58a14}{CallableLibrary}}(\mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_afb7af316cb56eb6c130a0057f4b58a14}{CallableLibrary}}\ \&\&)\ noexcept;}
\DoxyCodeLine{00052\ \ \ \ \ \string~\mbox{\hyperlink{classluisa_1_1compute_1_1_callable_library_afb7af316cb56eb6c130a0057f4b58a14}{CallableLibrary}}()\ noexcept;}
\DoxyCodeLine{00053\ \};}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \}\textcolor{comment}{//\ namespace\ luisa::compute}}

\end{DoxyCode}
