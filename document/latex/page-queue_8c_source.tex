\doxysection{page-\/queue.c}
\hypertarget{page-queue_8c_source}{}\label{page-queue_8c_source}\index{runtime/EASTL/packages/mimalloc/src/page-\/queue.c@{runtime/EASTL/packages/mimalloc/src/page-\/queue.c}}
\mbox{\hyperlink{page-queue_8c}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00002\ \textcolor{comment}{Copyright\ (c)\ 2018-\/2024,\ Microsoft\ Research,\ Daan\ Leijen}}
\DoxyCodeLine{00003\ \textcolor{comment}{This\ is\ free\ software;\ you\ can\ redistribute\ it\ and/or\ modify\ it\ under\ the}}
\DoxyCodeLine{00004\ \textcolor{comment}{terms\ of\ the\ MIT\ license.\ A\ copy\ of\ the\ license\ can\ be\ found\ in\ the\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{"{}LICENSE"{}\ at\ the\ root\ of\ this\ distribution.}}
\DoxyCodeLine{00006\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ \ Definition\ of\ page\ queues\ for\ each\ block\ size}}
\DoxyCodeLine{00010\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#ifndef\ MI\_IN\_PAGE\_C}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#error\ "{}this\ file\ should\ be\ included\ from\ 'page.c'"{}}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ include\ to\ help\ an\ IDE}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{mimalloc_8h}{mimalloc.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h}{mimalloc/internal.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2atomic_8h}{mimalloc/atomic.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ \ Minimal\ alignment\ in\ machine\ words\ (i.e.\ \`{}sizeof(void*)`)}}
\DoxyCodeLine{00022\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#if\ (MI\_MAX\_ALIGN\_SIZE\ >\ 4*MI\_INTPTR\_SIZE)}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\ \ \#error\ "{}define\ alignment\ for\ more\ than\ 4x\ word\ size\ for\ this\ platform"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#elif\ (MI\_MAX\_ALIGN\_SIZE\ >\ 2*MI\_INTPTR\_SIZE)}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\ \ \#define\ MI\_ALIGN4W\ \ \ }\textcolor{comment}{//\ 4\ machine\ words\ minimal\ alignment}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#elif\ (MI\_MAX\_ALIGN\_SIZE\ >\ MI\_INTPTR\_SIZE)}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\ \ \#define\ MI\_ALIGN2W\ \ \ }\textcolor{comment}{//\ 2\ machine\ words\ minimal\ alignment}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00031\ \ \ \textcolor{comment}{//\ ok,\ default\ alignment\ is\ 1\ word}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00036\ \textcolor{comment}{\ \ Queue\ query}}
\DoxyCodeLine{00037\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{page-queue_8c_a06408445b78873dce28c5c6e29be9153}{mi\_page\_queue\_is\_huge}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ pq)\ \{}
\DoxyCodeLine{00041\ \ \ \textcolor{keywordflow}{return}\ (pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a650100de75005e34566b2d170db7c0e8}{block\_size}}\ ==\ (\mbox{\hyperlink{types_8h_aedfdf546ebfa1e91dcf909b8db7b21dc}{MI\_LARGE\_MAX\_OBJ\_SIZE}}+\textcolor{keyword}{sizeof}(uintptr\_t)));}
\DoxyCodeLine{00042\ \}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{page-queue_8c_a3529cdf6a99d843e38810b5d241982ba}{mi\_page\_queue\_is\_full}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ pq)\ \{}
\DoxyCodeLine{00045\ \ \ \textcolor{keywordflow}{return}\ (pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a650100de75005e34566b2d170db7c0e8}{block\_size}}\ ==\ (\mbox{\hyperlink{types_8h_aedfdf546ebfa1e91dcf909b8db7b21dc}{MI\_LARGE\_MAX\_OBJ\_SIZE}}+(2*\textcolor{keyword}{sizeof}(uintptr\_t))));}
\DoxyCodeLine{00046\ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{page-queue_8c_aef6c208d531125d2a6d63e94020b8b89}{mi\_page\_queue\_is\_special}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ pq)\ \{}
\DoxyCodeLine{00049\ \ \ \textcolor{keywordflow}{return}\ (pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a650100de75005e34566b2d170db7c0e8}{block\_size}}\ >\ \mbox{\hyperlink{types_8h_aedfdf546ebfa1e91dcf909b8db7b21dc}{MI\_LARGE\_MAX\_OBJ\_SIZE}});}
\DoxyCodeLine{00050\ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{page-queue_8c_aea0e6766eb3a6a6d050de636a4aa9c81}{mi\_page\_queue\_count}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ pq)\ \{}
\DoxyCodeLine{00053\ \ \ \textcolor{keywordflow}{return}\ pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a299da47cff98a62bd197dbf283ddedac}{count}};}
\DoxyCodeLine{00054\ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00057\ \textcolor{comment}{\ \ Bins}}
\DoxyCodeLine{00058\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \textcolor{comment}{//\ Return\ the\ bin\ for\ a\ given\ field\ size.}}
\DoxyCodeLine{00061\ \textcolor{comment}{//\ Returns\ MI\_BIN\_HUGE\ if\ the\ size\ is\ too\ large.}}
\DoxyCodeLine{00062\ \textcolor{comment}{//\ We\ use\ \`{}wsize`\ for\ the\ size\ in\ "{}machine\ word\ sizes"{},}}
\DoxyCodeLine{00063\ \textcolor{comment}{//\ i.e.\ byte\ size\ ==\ \`{}wsize*sizeof(void*)`.}}
\DoxyCodeLine{00064\ \textcolor{keyword}{static}\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a0a63ad6116421ea60eb43806f8881a3b}{mi\_decl\_noinline}}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{page-queue_8c_accb1e44eb166c3b6fa8f5567d0acf085}{mi\_bin}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}})\ \{}
\DoxyCodeLine{00065\ \ \ \textcolor{keywordtype}{size\_t}\ wsize\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a7d12fa8e45201ef1ba892c927d3b8ad1}{\_mi\_wsize\_from\_size}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00066\ \textcolor{preprocessor}{\#if\ defined(MI\_ALIGN4W)}}
\DoxyCodeLine{00067\ \ \ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{bits_8h_a7b29eabf31d4ddb28a16267045384e03}{mi\_likely}}(wsize\ <=\ 4)\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordflow}{return}\ (wsize\ <=\ 1\ ?\ 1\ :\ (wsize+1)\&\string~1);\ \textcolor{comment}{//\ round\ to\ double\ word\ sizes}}
\DoxyCodeLine{00069\ \ \ \}}
\DoxyCodeLine{00070\ \textcolor{preprocessor}{\#elif\ defined(MI\_ALIGN2W)}}
\DoxyCodeLine{00071\ \ \ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{bits_8h_a7b29eabf31d4ddb28a16267045384e03}{mi\_likely}}(wsize\ <=\ 8)\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordflow}{return}\ (wsize\ <=\ 1\ ?\ 1\ :\ (wsize+1)\&\string~1);\ \textcolor{comment}{//\ round\ to\ double\ word\ sizes}}
\DoxyCodeLine{00073\ \ \ \}}
\DoxyCodeLine{00074\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00075\ \ \ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{bits_8h_a7b29eabf31d4ddb28a16267045384e03}{mi\_likely}}(wsize\ <=\ 8)\ \{}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordflow}{return}\ (wsize\ ==\ 0\ ?\ 1\ :\ wsize);}
\DoxyCodeLine{00077\ \ \ \}}
\DoxyCodeLine{00078\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00079\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{bits_8h_a13767b1803a4c31c40d896e9c08bc8a3}{mi\_unlikely}}(wsize\ >\ \mbox{\hyperlink{types_8h_a13b93673f163df4acc6553fbb5d07f91}{MI\_LARGE\_MAX\_OBJ\_WSIZE}})\ \{}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{mimalloc-stats_8h_a8068f41e171eeed896f5e9981118874b}{MI\_BIN\_HUGE}};}
\DoxyCodeLine{00081\ \ \ \}}
\DoxyCodeLine{00082\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00083\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(MI\_ALIGN4W)}}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordflow}{if}\ (wsize\ <=\ 16)\ \{\ wsize\ =\ (wsize+3)\&\string~3;\ \}\ \textcolor{comment}{//\ round\ to\ 4x\ word\ sizes}}
\DoxyCodeLine{00085\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00086\ \ \ \ \ wsize-\/-\/;}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{comment}{//\ find\ the\ highest\ bit}}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{offscreen_8c_a83fc1af92e29717b4513d121b0c72c7d}{b}}\ =\ (\mbox{\hyperlink{bits_8h_a23f1b7ccb5e7a348f2bd0abaf2664d0d}{MI\_SIZE\_BITS}}\ -\/\ 1\ -\/\ \mbox{\hyperlink{bits_8h_af432eec4ac40df0b60ba04ea09a103fb}{mi\_clz}}(wsize));\ \ \textcolor{comment}{//\ note:\ wsize\ !=\ 0}}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{comment}{//\ and\ use\ the\ top\ 3\ bits\ to\ determine\ the\ bin\ (\string~12.5\%\ worst\ internal\ fragmentation).}}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{comment}{//\ -\/\ adjust\ with\ 3\ because\ we\ use\ do\ not\ round\ the\ first\ 8\ sizes}}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{comment}{//\ \ \ which\ each\ get\ an\ exact\ bin}}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}}\ =\ ((\mbox{\hyperlink{offscreen_8c_a83fc1af92e29717b4513d121b0c72c7d}{b}}\ <<\ 2)\ +\ ((wsize\ >>\ (\mbox{\hyperlink{offscreen_8c_a83fc1af92e29717b4513d121b0c72c7d}{b}}\ -\/\ 2))\ \&\ 0x03))\ -\/\ 3;}
\DoxyCodeLine{00093\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(\mbox{\hyperlink{base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}}\ >\ 0\ \&\&\ \mbox{\hyperlink{base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}}\ <\ \mbox{\hyperlink{mimalloc-stats_8h_a8068f41e171eeed896f5e9981118874b}{MI\_BIN\_HUGE}});}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}};}
\DoxyCodeLine{00095\ \ \ \}}
\DoxyCodeLine{00096\ \}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00101\ \textcolor{comment}{\ \ Queue\ of\ pages\ with\ free\ blocks}}
\DoxyCodeLine{00102\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{page-queue_8c_a0d92abe27db4a21968468b2fe73473d6}{\_mi\_bin}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}})\ \{}
\DoxyCodeLine{00105\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{page-queue_8c_accb1e44eb166c3b6fa8f5567d0acf085}{mi\_bin}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00106\ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{page-queue_8c_a86f4f784ba679c7ccd06aec087d066a4}{\_mi\_bin\_size}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}})\ \{}
\DoxyCodeLine{00109\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_afa9be93ae7d17a355ce9f4d178257643}{\_mi\_heap\_empty}}.pages[\mbox{\hyperlink{base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}}].block\_size;}
\DoxyCodeLine{00110\ \}}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \textcolor{comment}{//\ Good\ size\ for\ allocation}}
\DoxyCodeLine{00113\ \mbox{\hyperlink{mimalloc_8h_acbaf5f4132fcfb51f0bf40e3b50f0981}{mi\_decl\_nodiscard}}\ \mbox{\hyperlink{mimalloc_8h_a19c83f9861b67bdf3a3229436d4dc366}{mi\_decl\_export}}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{group__extended_gac057927cd06c854b45fe7847e921bd47}{mi\_good\_size}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}})\ \mbox{\hyperlink{mimalloc_8h_a2d1ca113437044da99abaaedd0b36ed8}{mi\_attr\_noexcept}}\ \{}
\DoxyCodeLine{00114\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ <=\ \mbox{\hyperlink{types_8h_aedfdf546ebfa1e91dcf909b8db7b21dc}{MI\_LARGE\_MAX\_OBJ\_SIZE}})\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{page-queue_8c_a86f4f784ba679c7ccd06aec087d066a4}{\_mi\_bin\_size}}(\mbox{\hyperlink{page-queue_8c_accb1e44eb166c3b6fa8f5567d0acf085}{mi\_bin}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ +\ \mbox{\hyperlink{types_8h_a425481b3d9ef67bde1f23889eb9db684}{MI\_PADDING\_SIZE}}));}
\DoxyCodeLine{00116\ \ \ \}}
\DoxyCodeLine{00117\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a7f35944d44d8a16365072023dd19e0da}{\_mi\_align\_up}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ +\ \mbox{\hyperlink{types_8h_a425481b3d9ef67bde1f23889eb9db684}{MI\_PADDING\_SIZE}},\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a723e4c95209d4c6282b53317473e83d5}{\_mi\_os\_page\_size}}());}
\DoxyCodeLine{00119\ \ \ \}}
\DoxyCodeLine{00120\ \}}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \textcolor{preprocessor}{\#if\ (MI\_DEBUG>1)}}
\DoxyCodeLine{00123\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ mi\_page\_queue\_contains(\mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ queue,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}*\ page)\ \{}
\DoxyCodeLine{00124\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(page\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00125\ \ \ \mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}*\ \mbox{\hyperlink{namespaceluisa_afbdbb20de8bb3730f578eaba0e3803b6}{list}}\ =\ \mbox{\hyperlink{namespaceluisa_aa1eb922874c2e5b0b13f4fc9a37747eb}{queue}}-\/>first;}
\DoxyCodeLine{00126\ \ \ \textcolor{keywordflow}{while}\ (list\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{}
\DoxyCodeLine{00127\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(\mbox{\hyperlink{namespaceluisa_afbdbb20de8bb3730f578eaba0e3803b6}{list}}-\/>next\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ ||\ \mbox{\hyperlink{namespaceluisa_afbdbb20de8bb3730f578eaba0e3803b6}{list}}-\/>next-\/>prev\ ==\ list);}
\DoxyCodeLine{00128\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(\mbox{\hyperlink{namespaceluisa_afbdbb20de8bb3730f578eaba0e3803b6}{list}}-\/>prev\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ ||\ \mbox{\hyperlink{namespaceluisa_afbdbb20de8bb3730f578eaba0e3803b6}{list}}-\/>prev-\/>next\ ==\ list);}
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keywordflow}{if}\ (list\ ==\ page)\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00130\ \ \ \ \ \mbox{\hyperlink{namespaceluisa_afbdbb20de8bb3730f578eaba0e3803b6}{list}}\ =\ \mbox{\hyperlink{namespaceluisa_afbdbb20de8bb3730f578eaba0e3803b6}{list}}-\/>next;}
\DoxyCodeLine{00131\ \ \ \}}
\DoxyCodeLine{00132\ \ \ \textcolor{keywordflow}{return}\ (list\ ==\ page);}
\DoxyCodeLine{00133\ \}}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \textcolor{preprocessor}{\#if\ (MI\_DEBUG>1)}}
\DoxyCodeLine{00138\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ mi\_heap\_contains\_queue(\textcolor{keyword}{const}\ \mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\_heap\_t}}*\ heap,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ pq)\ \{}
\DoxyCodeLine{00139\ \ \ \textcolor{keywordflow}{return}\ (pq\ >=\ \&heap-\/>\mbox{\hyperlink{structmi__heap__s_a132c64106a2662761ee57ea5dd4a996b}{pages}}[0]\ \&\&\ pq\ <=\ \&heap-\/>pages[\mbox{\hyperlink{types_8h_ade65859668d2b446caf257fbc8c8d684}{MI\_BIN\_FULL}}]);}
\DoxyCodeLine{00140\ \}}
\DoxyCodeLine{00141\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{page-queue_8c_ae5294035df48c4d1f952578d240effb5}{\_mi\_page\_queue\_is\_valid}}(\mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\_heap\_t}}*\ heap,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ pq)\ \{}
\DoxyCodeLine{00144\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_abe843fae7b0161386d403d8ec7e0b6e0}{MI\_UNUSED\_RELEASE}}(heap);}
\DoxyCodeLine{00145\ \ \ \textcolor{keywordflow}{if}\ (pq==\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00146\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a619bc20e8198de3bd3f3d7fc34de66b2}{count}}\ =\ 0;\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_abe843fae7b0161386d403d8ec7e0b6e0}{MI\_UNUSED\_RELEASE}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a619bc20e8198de3bd3f3d7fc34de66b2}{count}});}
\DoxyCodeLine{00147\ \ \ \mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}*\ prev\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_abe843fae7b0161386d403d8ec7e0b6e0}{MI\_UNUSED\_RELEASE}}(prev);}
\DoxyCodeLine{00148\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}*\ page\ =\ pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}};\ page\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};\ page\ =\ page-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}})\ \{}
\DoxyCodeLine{00149\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(page-\/>\mbox{\hyperlink{structmi__page__s_a5d6c37ca83250fdb2b58cb2767cb0f4c}{prev}}\ ==\ prev);}
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a250f4d0710309fb1cff782cd06644842}{mi\_page\_is\_in\_full}}(page))\ \{}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a7d12fa8e45201ef1ba892c927d3b8ad1}{\_mi\_wsize\_from\_size}}(pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a650100de75005e34566b2d170db7c0e8}{block\_size}})\ ==\ \mbox{\hyperlink{types_8h_a13b93673f163df4acc6553fbb5d07f91}{MI\_LARGE\_MAX\_OBJ\_WSIZE}}\ +\ 2);}
\DoxyCodeLine{00152\ \ \ \ \ \}}
\DoxyCodeLine{00153\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_aebe1b18846bd3fc16de5b52cd2250bec}{mi\_page\_is\_huge}}(page))\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a7d12fa8e45201ef1ba892c927d3b8ad1}{\_mi\_wsize\_from\_size}}(pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a650100de75005e34566b2d170db7c0e8}{block\_size}})\ ==\ \mbox{\hyperlink{types_8h_a13b93673f163df4acc6553fbb5d07f91}{MI\_LARGE\_MAX\_OBJ\_WSIZE}}\ +\ 1);}
\DoxyCodeLine{00155\ \ \ \ \ \}}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a6134893990c1f09da2b40092ceecc780}{mi\_page\_block\_size}}(page)\ ==\ pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a650100de75005e34566b2d170db7c0e8}{block\_size}});}
\DoxyCodeLine{00158\ \ \ \ \ \}}
\DoxyCodeLine{00159\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(page-\/>\mbox{\hyperlink{structmi__page__s_a629f6d941b563c85042782dedf1f6301}{heap}}\ ==\ heap);}
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keywordflow}{if}\ (page-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}}\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}}\ ==\ page);}
\DoxyCodeLine{00162\ \ \ \ \ \}}
\DoxyCodeLine{00163\ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a619bc20e8198de3bd3f3d7fc34de66b2}{count}}++;}
\DoxyCodeLine{00164\ \ \ \ \ prev\ =\ page;}
\DoxyCodeLine{00165\ \ \ \}}
\DoxyCodeLine{00166\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a299da47cff98a62bd197dbf283ddedac}{count}}\ ==\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a619bc20e8198de3bd3f3d7fc34de66b2}{count}});}
\DoxyCodeLine{00167\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00168\ \}}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{page-queue_8c_a9ffcf338faf74ed684dc0859345b4d6e}{mi\_page\_bin}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}*\ page)\ \{}
\DoxyCodeLine{00172\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}}\ =\ (\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a250f4d0710309fb1cff782cd06644842}{mi\_page\_is\_in\_full}}(page)\ ?\ \mbox{\hyperlink{types_8h_ade65859668d2b446caf257fbc8c8d684}{MI\_BIN\_FULL}}\ :\ (\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_aebe1b18846bd3fc16de5b52cd2250bec}{mi\_page\_is\_huge}}(page)\ ?\ \mbox{\hyperlink{mimalloc-stats_8h_a8068f41e171eeed896f5e9981118874b}{MI\_BIN\_HUGE}}\ :\ \mbox{\hyperlink{page-queue_8c_accb1e44eb166c3b6fa8f5567d0acf085}{mi\_bin}}(\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a6134893990c1f09da2b40092ceecc780}{mi\_page\_block\_size}}(page))));}
\DoxyCodeLine{00173\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(\mbox{\hyperlink{base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}}\ <=\ \mbox{\hyperlink{types_8h_ade65859668d2b446caf257fbc8c8d684}{MI\_BIN\_FULL}});}
\DoxyCodeLine{00174\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}};}
\DoxyCodeLine{00175\ \}}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \textcolor{keyword}{static}\ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ \mbox{\hyperlink{page-queue_8c_aa50524f852ac833fcf366b583c9ebfaa}{mi\_heap\_page\_queue\_of}}(\mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\_heap\_t}}*\ heap,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}*\ page)\ \{}
\DoxyCodeLine{00178\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(heap!=\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00179\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}}\ =\ \mbox{\hyperlink{page-queue_8c_a9ffcf338faf74ed684dc0859345b4d6e}{mi\_page\_bin}}(page);}
\DoxyCodeLine{00180\ \ \ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ pq\ =\ \&heap-\/>\mbox{\hyperlink{structmi__heap__s_a132c64106a2662761ee57ea5dd4a996b}{pages}}[\mbox{\hyperlink{base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}}];}
\DoxyCodeLine{00181\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}((\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a6134893990c1f09da2b40092ceecc780}{mi\_page\_block\_size}}(page)\ ==\ pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a650100de75005e34566b2d170db7c0e8}{block\_size}})\ ||}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_aebe1b18846bd3fc16de5b52cd2250bec}{mi\_page\_is\_huge}}(page)\ \&\&\ \mbox{\hyperlink{page-queue_8c_a06408445b78873dce28c5c6e29be9153}{mi\_page\_queue\_is\_huge}}(pq))\ ||}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a250f4d0710309fb1cff782cd06644842}{mi\_page\_is\_in\_full}}(page)\ \&\&\ \mbox{\hyperlink{page-queue_8c_a3529cdf6a99d843e38810b5d241982ba}{mi\_page\_queue\_is\_full}}(pq)));}
\DoxyCodeLine{00184\ \ \ \textcolor{keywordflow}{return}\ pq;}
\DoxyCodeLine{00185\ \}}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \textcolor{keyword}{static}\ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ \mbox{\hyperlink{page-queue_8c_a59942bb22e34833289b85a5c70d81f97}{mi\_page\_queue\_of}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}*\ page)\ \{}
\DoxyCodeLine{00188\ \ \ \mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\_heap\_t}}*\ heap\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a35ba87308ac94f73791017e50d3ab4c7}{mi\_page\_heap}}(page);}
\DoxyCodeLine{00189\ \ \ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ pq\ =\ \mbox{\hyperlink{page-queue_8c_aa50524f852ac833fcf366b583c9ebfaa}{mi\_heap\_page\_queue\_of}}(heap,\ page);}
\DoxyCodeLine{00190\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ab812423812d2dd7af864b7e112055d8e}{mi\_assert\_expensive}}(mi\_page\_queue\_contains(pq,\ page));}
\DoxyCodeLine{00191\ \ \ \textcolor{keywordflow}{return}\ pq;}
\DoxyCodeLine{00192\ \}}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \textcolor{comment}{//\ The\ current\ small\ page\ array\ is\ for\ efficiency\ and\ for\ each}}
\DoxyCodeLine{00195\ \textcolor{comment}{//\ small\ size\ (up\ to\ 256)\ it\ points\ directly\ to\ the\ page\ for\ that}}
\DoxyCodeLine{00196\ \textcolor{comment}{//\ size\ without\ having\ to\ compute\ the\ bin.\ This\ means\ when\ the}}
\DoxyCodeLine{00197\ \textcolor{comment}{//\ current\ free\ page\ queue\ is\ updated\ for\ a\ small\ bin,\ we\ need\ to\ update\ a}}
\DoxyCodeLine{00198\ \textcolor{comment}{//\ range\ of\ entries\ in\ \`{}\_mi\_page\_small\_free`.}}
\DoxyCodeLine{00199\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{page-queue_8c_a490c11a0d3839b4803aa2a8289ca245d}{mi\_heap\_queue\_first\_update}}(\mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\_heap\_t}}*\ heap,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ pq)\ \{}
\DoxyCodeLine{00200\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(mi\_heap\_contains\_queue(heap,pq));}
\DoxyCodeLine{00201\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ =\ pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a650100de75005e34566b2d170db7c0e8}{block\_size}};}
\DoxyCodeLine{00202\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}\ >\ \mbox{\hyperlink{group__extended_ga1ea64283508718d9d645c38efc2f4305}{MI\_SMALL\_SIZE\_MAX}})\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}*\ page\ =\ pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}};}
\DoxyCodeLine{00205\ \ \ \textcolor{keywordflow}{if}\ (pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}}\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ page\ =\ (\mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}*)\&\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a40799c89ba077392c3973651035476aa}{\_mi\_page\_empty}};}
\DoxyCodeLine{00206\ }
\DoxyCodeLine{00207\ \ \ \textcolor{comment}{//\ find\ index\ in\ the\ right\ direct\ page\ array}}
\DoxyCodeLine{00208\ \ \ \textcolor{keywordtype}{size\_t}\ start;}
\DoxyCodeLine{00209\ \ \ \textcolor{keywordtype}{size\_t}\ idx\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a7d12fa8e45201ef1ba892c927d3b8ad1}{\_mi\_wsize\_from\_size}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00210\ \ \ \mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}**\ pages\_free\ =\ heap-\/>\mbox{\hyperlink{structmi__heap__s_a7a6716ebf08933f56921f8e1a582c30e}{pages\_free\_direct}};}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \textcolor{keywordflow}{if}\ (pages\_free[idx]\ ==\ page)\ \textcolor{keywordflow}{return};\ \ \textcolor{comment}{//\ already\ set}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \textcolor{comment}{//\ find\ start\ slot}}
\DoxyCodeLine{00215\ \ \ \textcolor{keywordflow}{if}\ (idx<=1)\ \{}
\DoxyCodeLine{00216\ \ \ \ \ start\ =\ 0;}
\DoxyCodeLine{00217\ \ \ \}}
\DoxyCodeLine{00218\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{comment}{//\ find\ previous\ size;\ due\ to\ minimal\ alignment\ upto\ 3\ previous\ bins\ may\ need\ to\ be\ skipped}}
\DoxyCodeLine{00220\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}}\ =\ \mbox{\hyperlink{page-queue_8c_accb1e44eb166c3b6fa8f5567d0acf085}{mi\_bin}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}});}
\DoxyCodeLine{00221\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ prev\ =\ pq\ -\/\ 1;}
\DoxyCodeLine{00222\ \ \ \ \ \textcolor{keywordflow}{while}(\ \mbox{\hyperlink{base_8h_adfa139c9a1902753b3696794759b2c48ac1111bd512b29e821b120b86446026b8}{bin}}\ ==\ \mbox{\hyperlink{page-queue_8c_accb1e44eb166c3b6fa8f5567d0acf085}{mi\_bin}}(prev-\/>block\_size)\ \&\&\ prev\ >\ \&heap-\/>\mbox{\hyperlink{structmi__heap__s_a132c64106a2662761ee57ea5dd4a996b}{pages}}[0])\ \{}
\DoxyCodeLine{00223\ \ \ \ \ \ \ prev-\/-\/;}
\DoxyCodeLine{00224\ \ \ \ \ \}}
\DoxyCodeLine{00225\ \ \ \ \ start\ =\ 1\ +\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a7d12fa8e45201ef1ba892c927d3b8ad1}{\_mi\_wsize\_from\_size}}(prev-\/>block\_size);}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keywordflow}{if}\ (start\ >\ idx)\ start\ =\ idx;}
\DoxyCodeLine{00227\ \ \ \}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \textcolor{comment}{//\ set\ size\ range\ to\ the\ right\ page}}
\DoxyCodeLine{00230\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_af04c7a87bc1c69ef3e763a580f47a418}{mi\_assert}}(start\ <=\ idx);}
\DoxyCodeLine{00231\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ sz\ =\ start;\ sz\ <=\ idx;\ sz++)\ \{}
\DoxyCodeLine{00232\ \ \ \ \ pages\_free[sz]\ =\ page;}
\DoxyCodeLine{00233\ \ \ \}}
\DoxyCodeLine{00234\ \}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \textcolor{comment}{/*}}
\DoxyCodeLine{00237\ \textcolor{comment}{static\ bool\ mi\_page\_queue\_is\_empty(mi\_page\_queue\_t*\ queue)\ \{}}
\DoxyCodeLine{00238\ \textcolor{comment}{\ \ return\ (queue-\/>first\ ==\ NULL);}}
\DoxyCodeLine{00239\ \textcolor{comment}{\}}}
\DoxyCodeLine{00240\ \textcolor{comment}{*/}}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{page-queue_8c_a01485cfc5cb05536f09df6d4d386fd28}{mi\_page\_queue\_remove}}(\mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ queue,\ \mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}*\ page)\ \{}
\DoxyCodeLine{00243\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(page\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00244\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ab812423812d2dd7af864b7e112055d8e}{mi\_assert\_expensive}}(mi\_page\_queue\_contains(queue,\ page));}
\DoxyCodeLine{00245\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(queue-\/>count\ >=\ 1);}
\DoxyCodeLine{00246\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a6134893990c1f09da2b40092ceecc780}{mi\_page\_block\_size}}(page)\ ==\ queue-\/>block\_size\ ||}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_aebe1b18846bd3fc16de5b52cd2250bec}{mi\_page\_is\_huge}}(page)\ \&\&\ \mbox{\hyperlink{page-queue_8c_a06408445b78873dce28c5c6e29be9153}{mi\_page\_queue\_is\_huge}}(queue))\ ||}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a250f4d0710309fb1cff782cd06644842}{mi\_page\_is\_in\_full}}(page)\ \&\&\ \mbox{\hyperlink{page-queue_8c_a3529cdf6a99d843e38810b5d241982ba}{mi\_page\_queue\_is\_full}}(queue)));}
\DoxyCodeLine{00249\ \ \ \mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\_heap\_t}}*\ heap\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a35ba87308ac94f73791017e50d3ab4c7}{mi\_page\_heap}}(page);}
\DoxyCodeLine{00250\ \ \ \textcolor{keywordflow}{if}\ (page-\/>\mbox{\hyperlink{structmi__page__s_a5d6c37ca83250fdb2b58cb2767cb0f4c}{prev}}\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ page-\/>\mbox{\hyperlink{structmi__page__s_a5d6c37ca83250fdb2b58cb2767cb0f4c}{prev}}-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}}\ =\ page-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}};}
\DoxyCodeLine{00251\ \ \ \textcolor{keywordflow}{if}\ (page-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}}\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ page-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}}-\/>\mbox{\hyperlink{structmi__page__s_a5d6c37ca83250fdb2b58cb2767cb0f4c}{prev}}\ =\ page-\/>\mbox{\hyperlink{structmi__page__s_a5d6c37ca83250fdb2b58cb2767cb0f4c}{prev}};}
\DoxyCodeLine{00252\ \ \ \textcolor{keywordflow}{if}\ (page\ ==\ queue-\/>last)\ \ queue-\/>last\ =\ page-\/>\mbox{\hyperlink{structmi__page__s_a5d6c37ca83250fdb2b58cb2767cb0f4c}{prev}};}
\DoxyCodeLine{00253\ \ \ \textcolor{keywordflow}{if}\ (page\ ==\ queue-\/>first)\ \{}
\DoxyCodeLine{00254\ \ \ \ \ queue-\/>first\ =\ page-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}};}
\DoxyCodeLine{00255\ \ \ \ \ \textcolor{comment}{//\ update\ first}}
\DoxyCodeLine{00256\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(mi\_heap\_contains\_queue(heap,\ queue));}
\DoxyCodeLine{00257\ \ \ \ \ \mbox{\hyperlink{page-queue_8c_a490c11a0d3839b4803aa2a8289ca245d}{mi\_heap\_queue\_first\_update}}(heap,queue);}
\DoxyCodeLine{00258\ \ \ \}}
\DoxyCodeLine{00259\ \ \ heap-\/>\mbox{\hyperlink{structmi__heap__s_a4d139f61ef10d6ef25a0d1f99fcdf18c}{page\_count}}-\/-\/;}
\DoxyCodeLine{00260\ \ \ queue-\/>count-\/-\/;}
\DoxyCodeLine{00261\ \ \ page-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00262\ \ \ page-\/>\mbox{\hyperlink{structmi__page__s_a5d6c37ca83250fdb2b58cb2767cb0f4c}{prev}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00263\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a4b587eab21fd150918b1c57244c17d27}{mi\_page\_set\_in\_full}}(page,\textcolor{keyword}{false});}
\DoxyCodeLine{00264\ \}}
\DoxyCodeLine{00265\ }
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{page-queue_8c_afd208c53e5567aedf31759e91fcaee4c}{mi\_page\_queue\_push}}(\mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\_heap\_t}}*\ heap,\ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ queue,\ \mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}*\ page)\ \{}
\DoxyCodeLine{00268\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a35ba87308ac94f73791017e50d3ab4c7}{mi\_page\_heap}}(page)\ ==\ heap);}
\DoxyCodeLine{00269\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(!mi\_page\_queue\_contains(queue,\ page));}
\DoxyCodeLine{00270\ \textcolor{preprocessor}{\ \ \#if\ MI\_HUGE\_PAGE\_ABANDON}}
\DoxyCodeLine{00271\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(\_mi\_page\_segment(page)-\/>page\_kind\ !=\ MI\_PAGE\_HUGE);}
\DoxyCodeLine{00272\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00273\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a6134893990c1f09da2b40092ceecc780}{mi\_page\_block\_size}}(page)\ ==\ queue-\/>block\_size\ ||}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_aebe1b18846bd3fc16de5b52cd2250bec}{mi\_page\_is\_huge}}(page)\ \&\&\ \mbox{\hyperlink{page-queue_8c_a06408445b78873dce28c5c6e29be9153}{mi\_page\_queue\_is\_huge}}(queue))\ ||}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a250f4d0710309fb1cff782cd06644842}{mi\_page\_is\_in\_full}}(page)\ \&\&\ \mbox{\hyperlink{page-queue_8c_a3529cdf6a99d843e38810b5d241982ba}{mi\_page\_queue\_is\_full}}(queue)));}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a4b587eab21fd150918b1c57244c17d27}{mi\_page\_set\_in\_full}}(page,\ \mbox{\hyperlink{page-queue_8c_a3529cdf6a99d843e38810b5d241982ba}{mi\_page\_queue\_is\_full}}(queue));}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \ \ page-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}}\ =\ queue-\/>first;}
\DoxyCodeLine{00280\ \ \ page-\/>\mbox{\hyperlink{structmi__page__s_a5d6c37ca83250fdb2b58cb2767cb0f4c}{prev}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00281\ \ \ \textcolor{keywordflow}{if}\ (queue-\/>first\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{}
\DoxyCodeLine{00282\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(queue-\/>first-\/>prev\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00283\ \ \ \ \ queue-\/>first-\/>prev\ =\ page;}
\DoxyCodeLine{00284\ \ \ \ \ queue-\/>first\ =\ page;}
\DoxyCodeLine{00285\ \ \ \}}
\DoxyCodeLine{00286\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00287\ \ \ \ \ queue-\/>first\ =\ queue-\/>last\ =\ page;}
\DoxyCodeLine{00288\ \ \ \}}
\DoxyCodeLine{00289\ \ \ queue-\/>count++;}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00291\ \ \ \textcolor{comment}{//\ update\ direct}}
\DoxyCodeLine{00292\ \ \ \mbox{\hyperlink{page-queue_8c_a490c11a0d3839b4803aa2a8289ca245d}{mi\_heap\_queue\_first\_update}}(heap,\ queue);}
\DoxyCodeLine{00293\ \ \ heap-\/>\mbox{\hyperlink{structmi__heap__s_a4d139f61ef10d6ef25a0d1f99fcdf18c}{page\_count}}++;}
\DoxyCodeLine{00294\ \}}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{page-queue_8c_a0d3fb7c2bfbe71e923d25b7fc395e981}{mi\_page\_queue\_push\_at\_end}}(\mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\_heap\_t}}*\ heap,\ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ queue,\ \mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}*\ page)\ \{}
\DoxyCodeLine{00297\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a35ba87308ac94f73791017e50d3ab4c7}{mi\_page\_heap}}(page)\ ==\ heap);}
\DoxyCodeLine{00298\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(!mi\_page\_queue\_contains(queue,\ page));}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a6134893990c1f09da2b40092ceecc780}{mi\_page\_block\_size}}(page)\ ==\ queue-\/>block\_size\ ||}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_aebe1b18846bd3fc16de5b52cd2250bec}{mi\_page\_is\_huge}}(page)\ \&\&\ \mbox{\hyperlink{page-queue_8c_a06408445b78873dce28c5c6e29be9153}{mi\_page\_queue\_is\_huge}}(queue))\ ||}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a250f4d0710309fb1cff782cd06644842}{mi\_page\_is\_in\_full}}(page)\ \&\&\ \mbox{\hyperlink{page-queue_8c_a3529cdf6a99d843e38810b5d241982ba}{mi\_page\_queue\_is\_full}}(queue)));}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00304\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a4b587eab21fd150918b1c57244c17d27}{mi\_page\_set\_in\_full}}(page,\ \mbox{\hyperlink{page-queue_8c_a3529cdf6a99d843e38810b5d241982ba}{mi\_page\_queue\_is\_full}}(queue));}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \ \ page-\/>\mbox{\hyperlink{structmi__page__s_a5d6c37ca83250fdb2b58cb2767cb0f4c}{prev}}\ =\ queue-\/>last;}
\DoxyCodeLine{00307\ \ \ page-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00308\ \ \ \textcolor{keywordflow}{if}\ (queue-\/>last\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{}
\DoxyCodeLine{00309\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(queue-\/>last-\/>next\ ==\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00310\ \ \ \ \ queue-\/>last-\/>next\ =\ page;}
\DoxyCodeLine{00311\ \ \ \ \ queue-\/>last\ =\ page;}
\DoxyCodeLine{00312\ \ \ \}}
\DoxyCodeLine{00313\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00314\ \ \ \ \ queue-\/>first\ =\ queue-\/>last\ =\ page;}
\DoxyCodeLine{00315\ \ \ \}}
\DoxyCodeLine{00316\ \ \ queue-\/>count++;}
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00318\ \ \ \textcolor{comment}{//\ update\ direct}}
\DoxyCodeLine{00319\ \ \ \textcolor{keywordflow}{if}\ (queue-\/>first\ ==\ page)\ \{}
\DoxyCodeLine{00320\ \ \ \ \ \mbox{\hyperlink{page-queue_8c_a490c11a0d3839b4803aa2a8289ca245d}{mi\_heap\_queue\_first\_update}}(heap,\ queue);}
\DoxyCodeLine{00321\ \ \ \}}
\DoxyCodeLine{00322\ \ \ heap-\/>\mbox{\hyperlink{structmi__heap__s_a4d139f61ef10d6ef25a0d1f99fcdf18c}{page\_count}}++;}
\DoxyCodeLine{00323\ \}}
\DoxyCodeLine{00324\ }
\DoxyCodeLine{00325\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{page-queue_8c_a0874094115fbf07a62af03982e6e9463}{mi\_page\_queue\_move\_to\_front}}(\mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\_heap\_t}}*\ heap,\ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ queue,\ \mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}*\ page)\ \{}
\DoxyCodeLine{00326\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a35ba87308ac94f73791017e50d3ab4c7}{mi\_page\_heap}}(page)\ ==\ heap);}
\DoxyCodeLine{00327\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(mi\_page\_queue\_contains(queue,\ page));}
\DoxyCodeLine{00328\ \ \ \textcolor{keywordflow}{if}\ (queue-\/>first\ ==\ page)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00329\ \ \ \mbox{\hyperlink{page-queue_8c_a01485cfc5cb05536f09df6d4d386fd28}{mi\_page\_queue\_remove}}(queue,\ page);}
\DoxyCodeLine{00330\ \ \ \mbox{\hyperlink{page-queue_8c_afd208c53e5567aedf31759e91fcaee4c}{mi\_page\_queue\_push}}(heap,\ queue,\ page);}
\DoxyCodeLine{00331\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(queue-\/>first\ ==\ page);}
\DoxyCodeLine{00332\ \}}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00334\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{page-queue_8c_ae8a9a07f17a46b92a01a0017ac7b9a60}{mi\_page\_queue\_enqueue\_from\_ex}}(\mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ to,\ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ from,\ \textcolor{keywordtype}{bool}\ enqueue\_at\_end,\ \mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}*\ page)\ \{}
\DoxyCodeLine{00335\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(page\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00336\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(from-\/>\mbox{\hyperlink{structmi__page__queue__s_a299da47cff98a62bd197dbf283ddedac}{count}}\ >=\ 1);}
\DoxyCodeLine{00337\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ab812423812d2dd7af864b7e112055d8e}{mi\_assert\_expensive}}(mi\_page\_queue\_contains(from,\ page));}
\DoxyCodeLine{00338\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ab812423812d2dd7af864b7e112055d8e}{mi\_assert\_expensive}}(!mi\_page\_queue\_contains(to,\ page));}
\DoxyCodeLine{00339\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ bsize\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a6134893990c1f09da2b40092ceecc780}{mi\_page\_block\_size}}(page);}
\DoxyCodeLine{00340\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ab7467946e27cd6bb4af911805cc5db26}{MI\_UNUSED}}(bsize);}
\DoxyCodeLine{00341\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}((bsize\ ==\ to-\/>\mbox{\hyperlink{structmi__page__queue__s_a650100de75005e34566b2d170db7c0e8}{block\_size}}\ \&\&\ bsize\ ==\ from-\/>\mbox{\hyperlink{structmi__page__queue__s_a650100de75005e34566b2d170db7c0e8}{block\_size}})\ ||}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (bsize\ ==\ to-\/>\mbox{\hyperlink{structmi__page__queue__s_a650100de75005e34566b2d170db7c0e8}{block\_size}}\ \&\&\ \mbox{\hyperlink{page-queue_8c_a3529cdf6a99d843e38810b5d241982ba}{mi\_page\_queue\_is\_full}}(from))\ ||}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (bsize\ ==\ from-\/>\mbox{\hyperlink{structmi__page__queue__s_a650100de75005e34566b2d170db7c0e8}{block\_size}}\ \&\&\ \mbox{\hyperlink{page-queue_8c_a3529cdf6a99d843e38810b5d241982ba}{mi\_page\_queue\_is\_full}}(to))\ ||}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_aebe1b18846bd3fc16de5b52cd2250bec}{mi\_page\_is\_huge}}(page)\ \&\&\ \mbox{\hyperlink{page-queue_8c_a06408445b78873dce28c5c6e29be9153}{mi\_page\_queue\_is\_huge}}(to))\ ||}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_aebe1b18846bd3fc16de5b52cd2250bec}{mi\_page\_is\_huge}}(page)\ \&\&\ \mbox{\hyperlink{page-queue_8c_a3529cdf6a99d843e38810b5d241982ba}{mi\_page\_queue\_is\_full}}(to)));}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00347\ \ \ \mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\_heap\_t}}*\ heap\ =\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a35ba87308ac94f73791017e50d3ab4c7}{mi\_page\_heap}}(page);}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ \ \ \textcolor{comment}{//\ delete\ from\ \`{}from`}}
\DoxyCodeLine{00350\ \ \ \textcolor{keywordflow}{if}\ (page-\/>\mbox{\hyperlink{structmi__page__s_a5d6c37ca83250fdb2b58cb2767cb0f4c}{prev}}\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ page-\/>\mbox{\hyperlink{structmi__page__s_a5d6c37ca83250fdb2b58cb2767cb0f4c}{prev}}-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}}\ =\ page-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}};}
\DoxyCodeLine{00351\ \ \ \textcolor{keywordflow}{if}\ (page-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}}\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ page-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}}-\/>\mbox{\hyperlink{structmi__page__s_a5d6c37ca83250fdb2b58cb2767cb0f4c}{prev}}\ =\ page-\/>\mbox{\hyperlink{structmi__page__s_a5d6c37ca83250fdb2b58cb2767cb0f4c}{prev}};}
\DoxyCodeLine{00352\ \ \ \textcolor{keywordflow}{if}\ (page\ ==\ from-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}})\ \ from-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}}\ =\ page-\/>\mbox{\hyperlink{structmi__page__s_a5d6c37ca83250fdb2b58cb2767cb0f4c}{prev}};}
\DoxyCodeLine{00353\ \ \ \textcolor{keywordflow}{if}\ (page\ ==\ from-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}})\ \{}
\DoxyCodeLine{00354\ \ \ \ \ from-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}}\ =\ page-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}};}
\DoxyCodeLine{00355\ \ \ \ \ \textcolor{comment}{//\ update\ first}}
\DoxyCodeLine{00356\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(mi\_heap\_contains\_queue(heap,\ from));}
\DoxyCodeLine{00357\ \ \ \ \ \mbox{\hyperlink{page-queue_8c_a490c11a0d3839b4803aa2a8289ca245d}{mi\_heap\_queue\_first\_update}}(heap,\ from);}
\DoxyCodeLine{00358\ \ \ \}}
\DoxyCodeLine{00359\ \ \ from-\/>\mbox{\hyperlink{structmi__page__queue__s_a299da47cff98a62bd197dbf283ddedac}{count}}-\/-\/;}
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00361\ \ \ \textcolor{comment}{//\ insert\ into\ \`{}to`}}
\DoxyCodeLine{00362\ \ \ to-\/>\mbox{\hyperlink{structmi__page__queue__s_a299da47cff98a62bd197dbf283ddedac}{count}}++;}
\DoxyCodeLine{00363\ \ \ \textcolor{keywordflow}{if}\ (enqueue\_at\_end)\ \{}
\DoxyCodeLine{00364\ \ \ \ \ \textcolor{comment}{//\ enqueue\ at\ the\ end}}
\DoxyCodeLine{00365\ \ \ \ \ page-\/>\mbox{\hyperlink{structmi__page__s_a5d6c37ca83250fdb2b58cb2767cb0f4c}{prev}}\ =\ to-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}};}
\DoxyCodeLine{00366\ \ \ \ \ page-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00367\ \ \ \ \ \textcolor{keywordflow}{if}\ (to-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}}\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(heap\ ==\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a35ba87308ac94f73791017e50d3ab4c7}{mi\_page\_heap}}(to-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}}));}
\DoxyCodeLine{00369\ \ \ \ \ \ \ to-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}}-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}}\ =\ page;}
\DoxyCodeLine{00370\ \ \ \ \ \ \ to-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}}\ =\ page;}
\DoxyCodeLine{00371\ \ \ \ \ \}}
\DoxyCodeLine{00372\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00373\ \ \ \ \ \ \ to-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}}\ =\ page;}
\DoxyCodeLine{00374\ \ \ \ \ \ \ to-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}}\ =\ page;}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \mbox{\hyperlink{page-queue_8c_a490c11a0d3839b4803aa2a8289ca245d}{mi\_heap\_queue\_first\_update}}(heap,\ to);}
\DoxyCodeLine{00376\ \ \ \ \ \}}
\DoxyCodeLine{00377\ \ \ \}}
\DoxyCodeLine{00378\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00379\ \ \ \ \ \textcolor{keywordflow}{if}\ (to-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}}\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \textcolor{comment}{//\ enqueue\ at\ 2nd\ place}}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(heap\ ==\ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a35ba87308ac94f73791017e50d3ab4c7}{mi\_page\_heap}}(to-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}}));}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}*\ next\ =\ to-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}}-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}};}
\DoxyCodeLine{00383\ \ \ \ \ \ \ page-\/>\mbox{\hyperlink{structmi__page__s_a5d6c37ca83250fdb2b58cb2767cb0f4c}{prev}}\ =\ to-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}};}
\DoxyCodeLine{00384\ \ \ \ \ \ \ page-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}}\ =\ next;}
\DoxyCodeLine{00385\ \ \ \ \ \ \ to-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}}-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}}\ =\ page;}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (next\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ next-\/>prev\ =\ page;}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ to-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}}\ =\ page;}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00392\ \ \ \ \ \}}
\DoxyCodeLine{00393\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \textcolor{comment}{//\ enqueue\ at\ the\ head\ (singleton\ list)}}
\DoxyCodeLine{00395\ \ \ \ \ \ \ page-\/>\mbox{\hyperlink{structmi__page__s_a5d6c37ca83250fdb2b58cb2767cb0f4c}{prev}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00396\ \ \ \ \ \ \ page-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}}\ =\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{00397\ \ \ \ \ \ \ to-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}}\ =\ page;}
\DoxyCodeLine{00398\ \ \ \ \ \ \ to-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}}\ =\ page;}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \mbox{\hyperlink{page-queue_8c_a490c11a0d3839b4803aa2a8289ca245d}{mi\_heap\_queue\_first\_update}}(heap,\ to);}
\DoxyCodeLine{00400\ \ \ \ \ \}}
\DoxyCodeLine{00401\ \ \ \}}
\DoxyCodeLine{00402\ }
\DoxyCodeLine{00403\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a4b587eab21fd150918b1c57244c17d27}{mi\_page\_set\_in\_full}}(page,\ \mbox{\hyperlink{page-queue_8c_a3529cdf6a99d843e38810b5d241982ba}{mi\_page\_queue\_is\_full}}(to));}
\DoxyCodeLine{00404\ \}}
\DoxyCodeLine{00405\ }
\DoxyCodeLine{00406\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{page-queue_8c_a78d4c34f8649f1bf65a3719e8861e32f}{mi\_page\_queue\_enqueue\_from}}(\mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ to,\ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ from,\ \mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}*\ page)\ \{}
\DoxyCodeLine{00407\ \ \ \mbox{\hyperlink{page-queue_8c_ae8a9a07f17a46b92a01a0017ac7b9a60}{mi\_page\_queue\_enqueue\_from\_ex}}(to,\ from,\ \textcolor{keyword}{true}\ \textcolor{comment}{/*\ enqueue\ at\ the\ end\ */},\ page);}
\DoxyCodeLine{00408\ \}}
\DoxyCodeLine{00409\ }
\DoxyCodeLine{00410\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{page-queue_8c_aa4057c2fc6d8f9e1d6bb30ebbc3123aa}{mi\_page\_queue\_enqueue\_from\_full}}(\mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ to,\ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ from,\ \mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}*\ page)\ \{}
\DoxyCodeLine{00411\ \ \ \textcolor{comment}{//\ note:\ we\ could\ insert\ at\ the\ front\ to\ increase\ reuse,\ but\ it\ slows\ down\ certain\ benchmarks\ (like\ \`{}alloc-\/test`)}}
\DoxyCodeLine{00412\ \ \ \mbox{\hyperlink{page-queue_8c_ae8a9a07f17a46b92a01a0017ac7b9a60}{mi\_page\_queue\_enqueue\_from\_ex}}(to,\ from,\ \textcolor{keyword}{true}\ \textcolor{comment}{/*\ enqueue\ at\ the\ end\ of\ the\ \`{}to`\ queue?\ */},\ page);}
\DoxyCodeLine{00413\ \}}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00415\ \textcolor{comment}{//\ Only\ called\ from\ \`{}mi\_heap\_absorb`.}}
\DoxyCodeLine{00416\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{page-queue_8c_a0c2157391af008a99d375c76bb874c34}{\_mi\_page\_queue\_append}}(\mbox{\hyperlink{group__heap_ga34a47cde5a5b38c29f1aa3c5e76943c2}{mi\_heap\_t}}*\ heap,\ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ pq,\ \mbox{\hyperlink{types_8h_a9646624e7de8587984ec8e8cd5c5d780}{mi\_page\_queue\_t}}*\ append)\ \{}
\DoxyCodeLine{00417\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(mi\_heap\_contains\_queue(heap,pq));}
\DoxyCodeLine{00418\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a650100de75005e34566b2d170db7c0e8}{block\_size}}\ ==\ append-\/>\mbox{\hyperlink{structmi__page__queue__s_a650100de75005e34566b2d170db7c0e8}{block\_size}});}
\DoxyCodeLine{00419\ }
\DoxyCodeLine{00420\ \ \ \textcolor{keywordflow}{if}\ (append-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}}==\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00421\ }
\DoxyCodeLine{00422\ \ \ \textcolor{comment}{//\ set\ append\ pages\ to\ new\ heap\ and\ count}}
\DoxyCodeLine{00423\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a619bc20e8198de3bd3f3d7fc34de66b2}{count}}\ =\ 0;}
\DoxyCodeLine{00424\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{types_8h_a98e3d539b4113aac496ebe3d379ebe5b}{mi\_page\_t}}*\ page\ =\ append-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}};\ page\ !=\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};\ page\ =\ page-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}})\ \{}
\DoxyCodeLine{00425\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_a4f0664d2a3d9c81776a0f90311aef474}{mi\_page\_set\_heap}}(page,\ heap);}
\DoxyCodeLine{00426\ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a619bc20e8198de3bd3f3d7fc34de66b2}{count}}++;}
\DoxyCodeLine{00427\ \ \ \}}
\DoxyCodeLine{00428\ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a619bc20e8198de3bd3f3d7fc34de66b2}{count}}\ ==\ append-\/>\mbox{\hyperlink{structmi__page__queue__s_a299da47cff98a62bd197dbf283ddedac}{count}});}
\DoxyCodeLine{00429\ }
\DoxyCodeLine{00430\ \ \ \textcolor{keywordflow}{if}\ (pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}}==\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ \{}
\DoxyCodeLine{00431\ \ \ \ \ \textcolor{comment}{//\ take\ over\ afresh}}
\DoxyCodeLine{00432\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}}==\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00433\ \ \ \ \ pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}}\ =\ append-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}};}
\DoxyCodeLine{00434\ \ \ \ \ pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}}\ =\ append-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}};}
\DoxyCodeLine{00435\ \ \ \ \ \mbox{\hyperlink{page-queue_8c_a490c11a0d3839b4803aa2a8289ca245d}{mi\_heap\_queue\_first\_update}}(heap,\ pq);}
\DoxyCodeLine{00436\ \ \ \}}
\DoxyCodeLine{00437\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00438\ \ \ \ \ \textcolor{comment}{//\ append\ to\ end}}
\DoxyCodeLine{00439\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}}!=\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00440\ \ \ \ \ \mbox{\hyperlink{_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2internal_8h_ac4a5dfa05acddb18f9bcc3d1505a5906}{mi\_assert\_internal}}(append-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}}!=\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00441\ \ \ \ \ pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}}-\/>\mbox{\hyperlink{structmi__page__s_a3cb74f9debb9c29f48990a6b39ec4233}{next}}\ =\ append-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}};}
\DoxyCodeLine{00442\ \ \ \ \ append-\/>\mbox{\hyperlink{structmi__page__queue__s_a2ac5077507dc4bf25a1a8df36955469a}{first}}-\/>\mbox{\hyperlink{structmi__page__s_a5d6c37ca83250fdb2b58cb2767cb0f4c}{prev}}\ =\ pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}};}
\DoxyCodeLine{00443\ \ \ \ \ pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}}\ =\ append-\/>\mbox{\hyperlink{structmi__page__queue__s_a92703b3d44e0581c4037345a93081446}{last}};}
\DoxyCodeLine{00444\ \ \ \}}
\DoxyCodeLine{00445\ \ \ pq-\/>\mbox{\hyperlink{structmi__page__queue__s_a299da47cff98a62bd197dbf283ddedac}{count}}\ +=\ append-\/>\mbox{\hyperlink{structmi__page__queue__s_a299da47cff98a62bd197dbf283ddedac}{count}};}
\DoxyCodeLine{00446\ }
\DoxyCodeLine{00447\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a619bc20e8198de3bd3f3d7fc34de66b2}{count}};}
\DoxyCodeLine{00448\ \}}

\end{DoxyCode}
