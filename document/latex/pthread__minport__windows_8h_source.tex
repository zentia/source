\doxysection{pthread\+\_\+minport\+\_\+windows.\+h}
\hypertarget{pthread__minport__windows_8h_source}{}\label{pthread__minport__windows_8h_source}\index{external/taskflow/3rd-\/party/ff/platforms/pthread\_minport\_windows.h@{external/taskflow/3rd-\/party/ff/platforms/pthread\_minport\_windows.h}}
\mbox{\hyperlink{pthread__minport__windows_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ ***************************************************************************}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *\ \ FastFlow\ is\ free\ software;\ you\ can\ redistribute\ it\ and/or\ modify\ it}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ \ under\ the\ terms\ of\ the\ GNU\ Lesser\ General\ Public\ License\ version\ 3\ as}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *\ \ published\ by\ the\ Free\ Software\ Foundation.}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ \ Starting\ from\ version\ 3.0.1\ FastFlow\ is\ dual\ licensed\ under\ the\ GNU\ LGPLv3}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *\ \ or\ MIT\ License\ (https://github.com/ParaGroup/WindFlow/blob/vers3.x/LICENSE.MIT)}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ \ This\ program\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ \ but\ WITHOUT\ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ \ MERCHANTABILITY\ or\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *\ \ GNU\ Lesser\ General\ Public\ License\ for\ more\ details.}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ \ You\ should\ have\ received\ a\ copy\ of\ the\ GNU\ Lesser\ General\ Public\ License}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ \ along\ with\ this\ program;\ if\ not,\ write\ to\ the\ Free\ Software}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ \ Foundation,\ Inc.,\ 59\ Temple\ Place\ -\/\ Suite\ 330,\ Boston,\ MA\ 02111-\/1307,\ USA.}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ ****************************************************************************}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{comment}{/*\ **************************************************************************}}
\DoxyCodeLine{00022\ \textcolor{comment}{Ultra-\/minimal\ and\ incomplete\ compatibility\ layer\ for\ pthreads\ on\ Windows\ platform.\ Errors\ are\ not\ managed\ at\ all.\ Designed\ to\ enable\ a\ basic\ porting\ of\ FastFlow\ on\ Windows\ platform,\ if\ you\ plan\ to\ extensively\ use\ pthread\ consider\ to\ install\ a\ full\ pthread\ port\ for\ windows.\ Some\ of\ the\ primitives\ are\ inspired\ to\ Fastflow\ queue\ remix\ by\ Dmitry\ Vyukov\ http://www.1024cores.net/}}
\DoxyCodeLine{00023\ \textcolor{comment}{}}
\DoxyCodeLine{00024\ \textcolor{comment}{March\ 2011\ -\/\ Ver\ 0:\ Basic\ functional\ port,\ tested\ on\ Win\ 7\ x64\ -\/\ Performance\ not\ yet\ extensively\ tested.}}
\DoxyCodeLine{00025\ \textcolor{comment}{}}
\DoxyCodeLine{00026\ \textcolor{comment}{*/}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#ifndef\ FF\_MINPORT\_WIN\_H}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#define\ FF\_MINPORT\_WIN\_H}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{comment}{//\#define\ WIN32\_LEAN\_AND\_MEAN}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00034\ \textcolor{comment}{//\#include\ <WinSock2.h>}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#define\ NOMINMAX}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#include\ <Windows.h>}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#include\ <WinBase.h>}}
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#include\ <process.h>}}
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{intrin_8h}{intrin.h}}>}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{00041\ \textcolor{comment}{//\#include\ <stdint.h>}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#include\ <errno.h>}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#include\ <time.h>}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\#define\ INLINE\ \_\_forceinline}}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#define\ NOINLINE\ \_\_declspec(noinline)}}
\DoxyCodeLine{00049\ \textcolor{preprocessor}{\#define\ RESTRICT\ \_\_declspec()}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \textcolor{comment}{//\ }}
\DoxyCodeLine{00053\ \textcolor{preprocessor}{\#define\ PTHREAD\_CANCEL\_ENABLE\ \ \ \ \ \ \ \ 0x01\ \ }\textcolor{comment}{/*\ Cancel\ takes\ place\ at\ next\ cancellation\ point\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00054\ \textcolor{preprocessor}{\#define\ PTHREAD\_CANCEL\_DISABLE\ \ \ \ \ \ \ 0x00\ \ }\textcolor{comment}{/*\ Cancel\ postponed\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00055\ \textcolor{preprocessor}{\#define\ PTHREAD\_CANCEL\_DEFERRED\ \ \ \ \ \ 0x02\ \ }\textcolor{comment}{/*\ Cancel\ waits\ until\ cancellation\ point\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \textcolor{comment}{//\ MA\ -\/\ pthread\ very\ partial\ windows\ port\ -\/\ for\ fastflow\ usage\ only}}
\DoxyCodeLine{00058\ \textcolor{keyword}{typedef}\ HANDLE\ \mbox{\hyperlink{pthread__minport__windows_8h_ad665cf4bf4a61dd23aab712d9c5e9d81}{pthread\_t}};}
\DoxyCodeLine{00059\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct__opaque__pthread__attr__t}{\_opaque\_pthread\_attr\_t}}\ \{\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{struct__opaque__pthread__attr__t_aea2f4c3c4878c387d9160c11c51ea22f}{\_\_sig}};\ \}\ \mbox{\hyperlink{pthread__minport__windows_8h_ad1483d9532e78abdc68abd50693a3bb6}{pthread\_attr\_t}};}
\DoxyCodeLine{00060\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct__opaque__pthread__mutexattr__t}{\_opaque\_pthread\_mutexattr\_t}}\ \{\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{struct__opaque__pthread__mutexattr__t_a721876f44dda1a3316c8e90ac76c90d8}{\_\_sig}};\ \}\ \mbox{\hyperlink{pthread__minport__windows_8h_abcc3c42c73850f819434536146cbce59}{pthread\_mutexattr\_t}};}
\DoxyCodeLine{00061\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct__opaque__pthread__condattr__t}{\_opaque\_pthread\_condattr\_t}}\ \{\textcolor{keywordtype}{long}\ \mbox{\hyperlink{struct__opaque__pthread__condattr__t_a55391cb7d7830f145e234787d0ee0768}{\_\_sig}};\ \}\ \mbox{\hyperlink{pthread__minport__windows_8h_a118f427ccebfd5683e89f662833d03cd}{pthread\_condattr\_t}};}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{test__malloc__compliance_8cpp_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ \mbox{\hyperlink{pthread__minport__windows_8h_abd9df76622c288b7b7a8a80365b6ddd7}{pthread\_key\_t}};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \textcolor{comment}{//\ Mutex\ and\ cond\ vars}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \textcolor{keyword}{typedef}\ CRITICAL\_SECTION\ \mbox{\hyperlink{pthread__minport__windows_8h_a572a3762cb738984c3957ba91426b08d}{pthread\_mutex\_t}};}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_a6afb84a81a45d337464674b9ff88d41e}{pthread\_create}}(\mbox{\hyperlink{pthread__minport__windows_8h_ad665cf4bf4a61dd23aab712d9c5e9d81}{pthread\_t}}\ \mbox{\hyperlink{pthread__minport__windows_8h_aae3356b63849abbe8789dd41648ee90a}{RESTRICT}}\ *\ thread,}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{pthread__minport__windows_8h_ad1483d9532e78abdc68abd50693a3bb6}{pthread\_attr\_t}}\ \mbox{\hyperlink{pthread__minport__windows_8h_aae3356b63849abbe8789dd41648ee90a}{RESTRICT}}\ *\ attr,\ }
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *(*start\_routine)(\textcolor{keywordtype}{void}\ *),\ }
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{pthread__minport__windows_8h_aae3356b63849abbe8789dd41648ee90a}{RESTRICT}}\ *\ \mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}})\ \{}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//std::cerr\ <<\ "{}Creating\ new\ thread\(\backslash\)n"{};}}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ thread[0]\ =\ (HANDLE)\_beginthreadex(0,\ 0,\ (\textcolor{keywordtype}{unsigned}(\_\_stdcall*)(\textcolor{keywordtype}{void}*))start\_routine,\ \mbox{\hyperlink{mimalloc_8h_ac9ca0390aa991912667416f6baf99e51}{arg}},\ 0,\ 0);}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}(0);\ }
\DoxyCodeLine{00077\ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_ab55b290bca62946e18d5eb3c7a1c5114}{pthread\_join}}(\mbox{\hyperlink{pthread__minport__windows_8h_ad665cf4bf4a61dd23aab712d9c5e9d81}{pthread\_t}}\ thread,\ \textcolor{keywordtype}{void}\ **\mbox{\hyperlink{ittnotify__static_8h_add1d7e7a63354789c1135ed13b4214fb}{value\_ptr}})\ \{}
\DoxyCodeLine{00081\ \ \ \ \ LPDWORD\ exitcode\ =\ 0;}
\DoxyCodeLine{00082\ \ \ \ \ WaitForSingleObject(thread,\ INFINITE);}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ittnotify__static_8h_add1d7e7a63354789c1135ed13b4214fb}{value\_ptr}})\ \ \{}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ GetExitCodeThread(thread,exitcode);}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ *\mbox{\hyperlink{ittnotify__static_8h_add1d7e7a63354789c1135ed13b4214fb}{value\_ptr}}\ =\ exitcode;}
\DoxyCodeLine{00086\ \ \ \ \ \}}
\DoxyCodeLine{00087\ \ \ \ \ CloseHandle(thread);}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordflow}{return}(0);\ \textcolor{comment}{//\ Errors\ are\ not\ (yet)\ managed.\ \ }}
\DoxyCodeLine{00089\ \}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{pthread__minport__windows_8h_acb373fa829d9d1b2faaa79346f5090a7}{pthread\_exit}}(\textcolor{keywordtype}{void}\ *\mbox{\hyperlink{ittnotify__static_8h_add1d7e7a63354789c1135ed13b4214fb}{value\_ptr}})\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ittnotify__static_8h_add1d7e7a63354789c1135ed13b4214fb}{value\_ptr}})}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ ExitThread(*((\mbox{\hyperlink{test__malloc__compliance_8cpp_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ *)\ \mbox{\hyperlink{ittnotify__static_8h_add1d7e7a63354789c1135ed13b4214fb}{value\_ptr}}));}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{else}\ }
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ ExitThread(0);}
\DoxyCodeLine{00096\ \}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_a5c66c9042370b9d9220428bbd0108da0}{pthread\_attr\_init}}(\mbox{\hyperlink{pthread__minport__windows_8h_ad1483d9532e78abdc68abd50693a3bb6}{pthread\_attr\_t}}\ *attr)\ \{}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{comment}{//\ do\ nothing\ currently}}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{keywordflow}{return}(0);}
\DoxyCodeLine{00101\ \}}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_a2836afab79bfa407e60adab6001b0c73}{pthread\_attr\_destroy}}(\mbox{\hyperlink{pthread__minport__windows_8h_ad1483d9532e78abdc68abd50693a3bb6}{pthread\_attr\_t}}\ *attr)\ \{}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{comment}{//\ do\ nothing\ currently}}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keywordflow}{return}(0);}
\DoxyCodeLine{00106\ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_ac9d377e54ad1ed0658f51052f535b9dc}{pthread\_setcancelstate}}(\textcolor{keywordtype}{int}\ state,\ \textcolor{keywordtype}{int}\ *oldstate)\ \{}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{comment}{//\ do\ nothing\ currently}}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keywordflow}{return}(0);}
\DoxyCodeLine{00111\ \}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \textcolor{comment}{//\ This\ requires\ \#define\ \_WIN32\_WINNT\ 0x0403\ to\ be\ stated\ as\ C++\ preprocessor\ option\ (-\/D\_WIN32\_WINNT=0x0403)}}
\DoxyCodeLine{00114\ \textcolor{comment}{//\ MA:\ 26/04/14\ this\ seems\ no\ longer\ true}}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_a06769b1c0f650377fed34ef94ac2a01c}{pthread\_mutex\_init}}(\mbox{\hyperlink{pthread__minport__windows_8h_a572a3762cb738984c3957ba91426b08d}{pthread\_mutex\_t}}\ \ \mbox{\hyperlink{pthread__minport__windows_8h_aae3356b63849abbe8789dd41648ee90a}{RESTRICT}}\ *\ \mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}},}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{pthread__minport__windows_8h_abcc3c42c73850f819434536146cbce59}{pthread\_mutexattr\_t}}\ \mbox{\hyperlink{pthread__minport__windows_8h_aae3356b63849abbe8789dd41648ee90a}{RESTRICT}}\ \ *\ attr)\ \{}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordflow}{if}\ (attr)\ \textcolor{keywordflow}{return}(\mbox{\hyperlink{runtime_2_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2types_8h_a2d1678d5a7cc8ce499643f3b8957def4}{EINVAL}});}
\DoxyCodeLine{00119\ \ \ \ \ InitializeCriticalSectionAndSpinCount(\mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}},\ 1500\ \textcolor{comment}{/*spin\ count\ */});\ \ \ \ }
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordflow}{return}\ (0);\ \textcolor{comment}{//\ Errors\ partially\ managed}}
\DoxyCodeLine{00121\ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_ac24005266439bc710f8d85235c0c9213}{pthread\_mutex\_lock}}(\mbox{\hyperlink{pthread__minport__windows_8h_a572a3762cb738984c3957ba91426b08d}{pthread\_mutex\_t}}\ *\mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}})\ \{}
\DoxyCodeLine{00124\ \ \ \ \ EnterCriticalSection(\mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}});}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keywordflow}{return}(0);\ \textcolor{comment}{//\ Errors\ not\ managed}}
\DoxyCodeLine{00126\ \ \}}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_a9ebcb4bbf90f780d17be7acd63b0e92f}{pthread\_mutex\_unlock}}(\mbox{\hyperlink{pthread__minport__windows_8h_a572a3762cb738984c3957ba91426b08d}{pthread\_mutex\_t}}\ *\mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}})\ \{}
\DoxyCodeLine{00129\ \ \ \ \ LeaveCriticalSection(\mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}});}
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keywordflow}{return}(0);\ \textcolor{comment}{//\ Errors\ not\ managed}}
\DoxyCodeLine{00131\ \ \}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_a733a87c6f8ed4dc0b76662dac0ea4a9a}{pthread\_mutex\_destroy}}(\mbox{\hyperlink{pthread__minport__windows_8h_a572a3762cb738984c3957ba91426b08d}{pthread\_mutex\_t}}\ *\mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}})\ \{}
\DoxyCodeLine{00134\ \ \ \ \ DeleteCriticalSection(\mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}});}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keywordflow}{return}(0);\ \textcolor{comment}{//\ Errors\ not\ managed}}
\DoxyCodeLine{00136\ \ \}}
\DoxyCodeLine{00137\ \ }
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \ \mbox{\hyperlink{pthread__minport__windows_8h_ad665cf4bf4a61dd23aab712d9c5e9d81}{pthread\_t}}\ \mbox{\hyperlink{pthread__minport__windows_8h_a31ffbf449d7404f9bb088564190c6bce}{pthread\_self}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordflow}{return}(GetCurrentThread());}
\DoxyCodeLine{00141\ \}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_aeec8c9fbaa95db94c605152be4dbe088}{pthread\_key\_create}}(\mbox{\hyperlink{pthread__minport__windows_8h_abd9df76622c288b7b7a8a80365b6ddd7}{pthread\_key\_t}}\ *\mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ \textcolor{keywordtype}{void}\ (*destructor)(\textcolor{keywordtype}{void}\ *))\ \{}
\DoxyCodeLine{00144\ \ \ \ \ *\mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}}\ =\ TlsAlloc();}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00146\ \}}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_a20c3a19dc169f60d2b3df87499686ac2}{pthread\_key\_delete}}(\mbox{\hyperlink{pthread__minport__windows_8h_abd9df76622c288b7b7a8a80365b6ddd7}{pthread\_key\_t}}\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}})\ \{}
\DoxyCodeLine{00149\ \ \ \ \ TlsFree(\mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}});}
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00151\ \}}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_a0dbd17094cde9a462d8e04a0741595b2}{pthread\_setspecific}}(\mbox{\hyperlink{pthread__minport__windows_8h_abd9df76622c288b7b7a8a80365b6ddd7}{pthread\_key\_t}}\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abe8e049f756b5ba547bda825af81b645}{value}})\ \{}
\DoxyCodeLine{00154\ \ \ \ \ TlsSetValue(\mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}},\ (\mbox{\hyperlink{dllmain_8cpp_acf9c20c2bdffd2b6a2870e833c78e71f}{LPVOID}})\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_abe8e049f756b5ba547bda825af81b645}{value}});}
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{keywordflow}{return}\ (0);}
\DoxyCodeLine{00156\ \}}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{void}\ *\ \mbox{\hyperlink{pthread__minport__windows_8h_ab064e0f7c4c8e199c99a7617c924931b}{pthread\_getspecific}}(\mbox{\hyperlink{pthread__minport__windows_8h_abd9df76622c288b7b7a8a80365b6ddd7}{pthread\_key\_t}}\ \mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}})\ \{}
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keywordflow}{return}(TlsGetValue(\mbox{\hyperlink{ittnotify__static_8h_aeeaf6235e69da2907f537f67e598fc9d}{key}}));}
\DoxyCodeLine{00160\ \}}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \textcolor{comment}{//\#if\ (\_WIN32\_WINNT\ >=\ \_WIN32\_WINNT\_VISTA)}}
\DoxyCodeLine{00163\ \textcolor{preprocessor}{\#ifndef\ \_FF\_WIN\_XP}}
\DoxyCodeLine{00164\ \textcolor{keyword}{typedef}\ CONDITION\_VARIABLE\ \mbox{\hyperlink{pthread__minport__windows_8h_a9d2915aaebc50f5522abbf7687c32836}{pthread\_cond\_t}};}
\DoxyCodeLine{00165\ \textcolor{comment}{//\#include\ <Windows.h>}}
\DoxyCodeLine{00166\ \textcolor{preprocessor}{\#include\ <WinBase.h>}}
\DoxyCodeLine{00167\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_a71bdb8a20eb782047e084c27fcf7aa65}{pthread\_cond\_init}}(\mbox{\hyperlink{pthread__minport__windows_8h_a9d2915aaebc50f5522abbf7687c32836}{pthread\_cond\_t}}\ \ \mbox{\hyperlink{pthread__minport__windows_8h_aae3356b63849abbe8789dd41648ee90a}{RESTRICT}}\ *\ cond,}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{pthread__minport__windows_8h_a118f427ccebfd5683e89f662833d03cd}{pthread\_condattr\_t}}\ \ \mbox{\hyperlink{pthread__minport__windows_8h_aae3356b63849abbe8789dd41648ee90a}{RESTRICT}}\ *\ attr)\ \{}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordflow}{if}\ (attr)\ \textcolor{keywordflow}{return}(\mbox{\hyperlink{runtime_2_e_a_s_t_l_2packages_2mimalloc_2include_2mimalloc_2types_8h_a2d1678d5a7cc8ce499643f3b8957def4}{EINVAL}});}
\DoxyCodeLine{00170\ \ \ \ \ InitializeConditionVariable(cond);\ \ }
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{keywordflow}{return}\ (0);\ \ \textcolor{comment}{//\ Errors\ not\ managed}}
\DoxyCodeLine{00172\ \ \}}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_af3771cd9bcc377935b42c79ab48a3931}{pthread\_cond\_signal}}(\mbox{\hyperlink{pthread__minport__windows_8h_a9d2915aaebc50f5522abbf7687c32836}{pthread\_cond\_t}}\ *cond)\ \{}
\DoxyCodeLine{00175\ \ \ \ \ WakeConditionVariable(cond);}
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{keywordflow}{return}(0);\ \textcolor{comment}{//\ Errors\ not\ managed}}
\DoxyCodeLine{00177\ \ \}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_a38ac5cf73f6fc412aa3c843782dd0b68}{pthread\_cond\_broadcast}}(\mbox{\hyperlink{pthread__minport__windows_8h_a9d2915aaebc50f5522abbf7687c32836}{pthread\_cond\_t}}\ *cond)\ \{}
\DoxyCodeLine{00180\ \ \ \ \ WakeAllConditionVariable(cond);}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keywordflow}{return}(0);}
\DoxyCodeLine{00182\ \ \}}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_af9530616ca0356931235e064a7063c59}{pthread\_cond\_wait}}(\mbox{\hyperlink{pthread__minport__windows_8h_a9d2915aaebc50f5522abbf7687c32836}{pthread\_cond\_t}}\ \ \mbox{\hyperlink{pthread__minport__windows_8h_aae3356b63849abbe8789dd41648ee90a}{RESTRICT}}\ *\ cond,}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{pthread__minport__windows_8h_a572a3762cb738984c3957ba91426b08d}{pthread\_mutex\_t}}\ \ \mbox{\hyperlink{pthread__minport__windows_8h_aae3356b63849abbe8789dd41648ee90a}{RESTRICT}}\ *\ \mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}})\ \{}
\DoxyCodeLine{00186\ \ \ \ \ SleepConditionVariableCS(cond,\ \mbox{\hyperlink{harness__graph_8h_a7066db3b13dac6171efe89e7c49eb0d0}{mutex}},\ INFINITE);}
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{comment}{//WaitForSingleObject(cond[0],\ INFINITE);\ }}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keywordflow}{return}(0);\ \textcolor{comment}{//\ Errors\ not\ managed}}
\DoxyCodeLine{00189\ \ \}}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_aa195608723fa0adb8478449f3f21e122}{pthread\_cond\_destroy}}(\mbox{\hyperlink{pthread__minport__windows_8h_a9d2915aaebc50f5522abbf7687c32836}{pthread\_cond\_t}}\ *cond)\ \{}
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{comment}{//\ Do\ nothing.\ Did\ not\ find\ a\ Windows\ call\ ....\ }}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keywordflow}{return}\ (0);\ \textcolor{comment}{//\ Errors\ not\ managed}}
\DoxyCodeLine{00194\ \ \}}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \textcolor{comment}{//\ Barrier\ }}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \textcolor{comment}{/*\ MA:}}
\DoxyCodeLine{00199\ \textcolor{comment}{}}
\DoxyCodeLine{00200\ \textcolor{comment}{Starting\ from\ Windows\ 8\ it\ can\ be\ used:}}
\DoxyCodeLine{00201\ \textcolor{comment}{}}
\DoxyCodeLine{00202\ \textcolor{comment}{EnterSynchronizationBarrier}}
\DoxyCodeLine{00203\ \textcolor{comment}{DeleteSynchronizationBarrier}}
\DoxyCodeLine{00204\ \textcolor{comment}{Synchronization\ Barriers}}
\DoxyCodeLine{00205\ \textcolor{comment}{}}
\DoxyCodeLine{00206\ \textcolor{comment}{Not\ supported\ in\ Win\ 7\ -\/\ here\ a\ sketch\ of\ the\ interface}}
\DoxyCodeLine{00207\ \textcolor{comment}{Not\ really\ used\ -\/\ the\ FF\ code\ enable\ an\ alternative\ barrier\ via\ \#ifdef}}
\DoxyCodeLine{00208\ \textcolor{comment}{}}
\DoxyCodeLine{00209\ \textcolor{comment}{typedef\ struct\ \_opaque\_pthread\_barrier\_t\ \{}}
\DoxyCodeLine{00210\ \textcolor{comment}{\ \ \ \ pthread\_mutex\_t\ bar\_lock;}}
\DoxyCodeLine{00211\ \textcolor{comment}{\ \ \ \ pthread\_cond\_t\ bar\_cond;}}
\DoxyCodeLine{00212\ \textcolor{comment}{\ \ \ \ unsigned\ count;}}
\DoxyCodeLine{00213\ \textcolor{comment}{\}\ pthread\_barrier\_t;}}
\DoxyCodeLine{00214\ \textcolor{comment}{}}
\DoxyCodeLine{00215\ \textcolor{comment}{typedef\ struct\ \_opaque\_pthread\_barrierattr\_t\ \{}}
\DoxyCodeLine{00216\ \textcolor{comment}{\ \ \ \ //\ Not\ implemented}}
\DoxyCodeLine{00217\ \textcolor{comment}{\ \ \ \ char\ c;}}
\DoxyCodeLine{00218\ \textcolor{comment}{\}\ pthread\_barrierattr\_t;}}
\DoxyCodeLine{00219\ \textcolor{comment}{}}
\DoxyCodeLine{00220\ \textcolor{comment}{INLINE\ int\ pthread\_barrier\_init(pthread\_barrier\_t\ RESTRICT\ *\ barrier,\ }}
\DoxyCodeLine{00221\ \textcolor{comment}{\ \ \ \ \ \ \ \ const\ pthread\_barrierattr\_t\ RESTRICT\ *\ attr,\ unsigned\ count)\ \{}}
\DoxyCodeLine{00222\ \textcolor{comment}{\ \ \ \ barrier-\/>count\ =\ count;}}
\DoxyCodeLine{00223\ \textcolor{comment}{\ \ \ \ //\ errors\ currently\ not\ managed;}}
\DoxyCodeLine{00224\ \textcolor{comment}{\ \ \ \ return\ 0;}}
\DoxyCodeLine{00225\ \textcolor{comment}{\}}}
\DoxyCodeLine{00226\ \textcolor{comment}{}}
\DoxyCodeLine{00227\ \textcolor{comment}{INLINE\ int\ pthread\_barrier\_destroy(pthread\_barrier\_t\ *barrier)\ \{}}
\DoxyCodeLine{00228\ \textcolor{comment}{\ \ \ \ //\ errors\ currently\ not\ managed;}}
\DoxyCodeLine{00229\ \textcolor{comment}{\ \ \ \ return\ 0;}}
\DoxyCodeLine{00230\ \textcolor{comment}{\}}}
\DoxyCodeLine{00231\ \textcolor{comment}{}}
\DoxyCodeLine{00232\ \textcolor{comment}{INLINE\ int\ pthread\_barrier\_wait(pthread\_barrier\_t\ *barrier)\ \{}}
\DoxyCodeLine{00233\ \textcolor{comment}{\ \ \ \ //\ errors\ currently\ not\ managed;}}
\DoxyCodeLine{00234\ \textcolor{comment}{\ \ \ \ return\ 0;}}
\DoxyCodeLine{00235\ \textcolor{comment}{\}}}
\DoxyCodeLine{00236\ \textcolor{comment}{}}
\DoxyCodeLine{00237\ \textcolor{comment}{*/}}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \textcolor{preprocessor}{\#else\ }}
\DoxyCodeLine{00240\ \textcolor{comment}{//\ Win\ XP\ hasn't\ Condition\ variables!}}
\DoxyCodeLine{00241\ \textcolor{comment}{//}}
\DoxyCodeLine{00242\ \textcolor{comment}{//\ Douglas\ C.\ Schmidt\ and\ Irfan\ Pyarali}}
\DoxyCodeLine{00243\ \textcolor{comment}{//\ Strategies\ for\ Implementing\ POSIX\ Condition\ Variables\ on\ Win32}}
\DoxyCodeLine{00244\ \textcolor{comment}{//\ http://www.cs.wustl.edu/\string~schmidt/win32-\/cv-\/1.html}}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00247\ \{}
\DoxyCodeLine{00248\ \ \ \textcolor{keywordtype}{int}\ waiters\_count\_;}
\DoxyCodeLine{00249\ \ \ \textcolor{comment}{//\ Count\ of\ the\ number\ of\ waiters.}}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \ CRITICAL\_SECTION\ waiters\_count\_lock\_;}
\DoxyCodeLine{00252\ \ \ \textcolor{comment}{//\ Serialize\ access\ to\ <waiters\_count\_>.}}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ \ \ \textcolor{keywordtype}{int}\ release\_count\_;}
\DoxyCodeLine{00255\ \ \ \textcolor{comment}{//\ Number\ of\ threads\ to\ release\ via\ a\ <pthread\_cond\_broadcast>\ or\ a}}
\DoxyCodeLine{00256\ \ \ \textcolor{comment}{//\ <pthread\_cond\_signal>.\ }}
\DoxyCodeLine{00257\ \ \ }
\DoxyCodeLine{00258\ \ \ \textcolor{keywordtype}{int}\ wait\_generation\_count\_;}
\DoxyCodeLine{00259\ \ \ \textcolor{comment}{//\ Keeps\ track\ of\ the\ current\ "{}generation"{}\ so\ that\ we\ don't\ allow}}
\DoxyCodeLine{00260\ \ \ \textcolor{comment}{//\ one\ thread\ to\ steal\ all\ the\ "{}releases"{}\ from\ the\ broadcast.}}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \ \ HANDLE\ event\_;}
\DoxyCodeLine{00263\ \ \ \textcolor{comment}{//\ A\ manual-\/reset\ event\ that's\ used\ to\ block\ and\ release\ waiting}}
\DoxyCodeLine{00264\ \ \ \textcolor{comment}{//\ threads.\ }}
\DoxyCodeLine{00265\ \}\ \mbox{\hyperlink{pthread__minport__windows_8h_a9d2915aaebc50f5522abbf7687c32836}{pthread\_cond\_t}};}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_a71bdb8a20eb782047e084c27fcf7aa65}{pthread\_cond\_init}}(\mbox{\hyperlink{pthread__minport__windows_8h_a9d2915aaebc50f5522abbf7687c32836}{pthread\_cond\_t}}\ \ \mbox{\hyperlink{pthread__minport__windows_8h_aae3356b63849abbe8789dd41648ee90a}{RESTRICT}}\ *\ cv,}
\DoxyCodeLine{00268\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{pthread__minport__windows_8h_a118f427ccebfd5683e89f662833d03cd}{pthread\_condattr\_t}}\ \ \mbox{\hyperlink{pthread__minport__windows_8h_aae3356b63849abbe8789dd41648ee90a}{RESTRICT}}\ *\ attr)\ \{}
\DoxyCodeLine{00269\ \ \ cv-\/>waiters\_count\_\ =\ 0;}
\DoxyCodeLine{00270\ \ \ cv-\/>wait\_generation\_count\_\ =\ 0;}
\DoxyCodeLine{00271\ \ \ cv-\/>release\_count\_\ =\ 0;}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00273\ \ \ \textcolor{comment}{//\ Create\ a\ manual-\/reset\ event.}}
\DoxyCodeLine{00274\ \ \ cv-\/>event\_\ =\ \mbox{\hyperlink{namespaceluisa_1_1compute_a7847a34a0e69b26e787bfab2d054d908a76d511491e72fc60d92ae89dcda09930}{CreateEvent}}\ (\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ \ \textcolor{comment}{//\ no\ security}}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tinycthread_8c_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}},\ \ \textcolor{comment}{//\ manual-\/reset}}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{tinycthread_8c_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}},\ \textcolor{comment}{//\ non-\/signaled\ initially}}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});\ \textcolor{comment}{//\ unnamed}}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \ \ \mbox{\hyperlink{pthread__minport__windows_8h_a06769b1c0f650377fed34ef94ac2a01c}{pthread\_mutex\_init}}(\&cv-\/>waiters\_count\_lock\_,\mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{00280\ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00281\ \}}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_af9530616ca0356931235e064a7063c59}{pthread\_cond\_wait}}(\mbox{\hyperlink{pthread__minport__windows_8h_a9d2915aaebc50f5522abbf7687c32836}{pthread\_cond\_t}}\ \ \mbox{\hyperlink{pthread__minport__windows_8h_aae3356b63849abbe8789dd41648ee90a}{RESTRICT}}\ *\ cv,}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{pthread__minport__windows_8h_a572a3762cb738984c3957ba91426b08d}{pthread\_mutex\_t}}\ \ \mbox{\hyperlink{pthread__minport__windows_8h_aae3356b63849abbe8789dd41648ee90a}{RESTRICT}}\ *\ external\_mutex)\ \{}
\DoxyCodeLine{00285\ \ \ \textcolor{comment}{//\ Avoid\ race\ conditions.}}
\DoxyCodeLine{00286\ \ \ EnterCriticalSection\ (\&cv-\/>waiters\_count\_lock\_);}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \ \ \textcolor{comment}{//\ Increment\ count\ of\ waiters.}}
\DoxyCodeLine{00289\ \ \ cv-\/>waiters\_count\_++;}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00291\ \ \ \textcolor{comment}{//\ Store\ current\ generation\ in\ our\ activation\ record.}}
\DoxyCodeLine{00292\ \ \ \textcolor{keywordtype}{int}\ my\_generation\ =\ cv-\/>wait\_generation\_count\_;}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00294\ \ \ LeaveCriticalSection\ (\&cv-\/>waiters\_count\_lock\_);}
\DoxyCodeLine{00295\ \ \ LeaveCriticalSection\ (external\_mutex);}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{comment}{//\ Wait\ until\ the\ event\ is\ signaled.}}
\DoxyCodeLine{00299\ \ \ \ \ WaitForSingleObject\ (cv-\/>event\_,\ INFINITE);}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00301\ \ \ \ \ EnterCriticalSection\ (\&cv-\/>waiters\_count\_lock\_);}
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{comment}{//\ Exit\ the\ loop\ when\ the\ <cv-\/>event\_>\ is\ signaled\ and}}
\DoxyCodeLine{00303\ \ \ \ \ \textcolor{comment}{//\ there\ are\ still\ waiting\ threads\ from\ this\ <wait\_generation>}}
\DoxyCodeLine{00304\ \ \ \ \ \textcolor{comment}{//\ that\ haven't\ been\ released\ from\ this\ wait\ yet.}}
\DoxyCodeLine{00305\ \ \ \ \ \textcolor{keywordtype}{int}\ wait\_done\ =\ cv-\/>release\_count\_\ >\ 0}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ cv-\/>wait\_generation\_count\_\ !=\ my\_generation;}
\DoxyCodeLine{00307\ \ \ \ \ LeaveCriticalSection\ (\&cv-\/>waiters\_count\_lock\_);}
\DoxyCodeLine{00308\ }
\DoxyCodeLine{00309\ \ \ \ \ \textcolor{keywordflow}{if}\ (wait\_done)}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00311\ \ \ \}}
\DoxyCodeLine{00312\ }
\DoxyCodeLine{00313\ \ \ EnterCriticalSection\ (external\_mutex);}
\DoxyCodeLine{00314\ \ \ EnterCriticalSection\ (\&cv-\/>waiters\_count\_lock\_);}
\DoxyCodeLine{00315\ \ \ cv-\/>waiters\_count\_-\/-\/;}
\DoxyCodeLine{00316\ \ \ cv-\/>release\_count\_-\/-\/;}
\DoxyCodeLine{00317\ \ \ \textcolor{keywordtype}{int}\ last\_waiter\ =\ cv-\/>release\_count\_\ ==\ 0;}
\DoxyCodeLine{00318\ \ \ LeaveCriticalSection\ (\&cv-\/>waiters\_count\_lock\_);}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00320\ \ \ \textcolor{keywordflow}{if}\ (last\_waiter)}
\DoxyCodeLine{00321\ \ \ \ \ \textcolor{comment}{//\ We're\ the\ last\ waiter\ to\ be\ notified,\ so\ reset\ the\ manual\ event.}}
\DoxyCodeLine{00322\ \ \ \ \ ResetEvent\ (cv-\/>event\_);}
\DoxyCodeLine{00323\ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00324\ \}}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_af3771cd9bcc377935b42c79ab48a3931}{pthread\_cond\_signal}}(\mbox{\hyperlink{pthread__minport__windows_8h_a9d2915aaebc50f5522abbf7687c32836}{pthread\_cond\_t}}\ *cv)\ \{}
\DoxyCodeLine{00327\ \ \ EnterCriticalSection\ (\&cv-\/>waiters\_count\_lock\_);}
\DoxyCodeLine{00328\ \ \ \textcolor{keywordflow}{if}\ (cv-\/>waiters\_count\_\ >\ cv-\/>release\_count\_)\ \{}
\DoxyCodeLine{00329\ \ \ \ \ SetEvent\ (cv-\/>event\_);\ \textcolor{comment}{//\ Signal\ the\ manual-\/reset\ event.}}
\DoxyCodeLine{00330\ \ \ \ \ cv-\/>release\_count\_++;}
\DoxyCodeLine{00331\ \ \ \ \ cv-\/>wait\_generation\_count\_++;}
\DoxyCodeLine{00332\ \ \ \}}
\DoxyCodeLine{00333\ \ \ LeaveCriticalSection\ (\&cv-\/>waiters\_count\_lock\_);}
\DoxyCodeLine{00334\ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00335\ \}}
\DoxyCodeLine{00336\ }
\DoxyCodeLine{00337\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_a38ac5cf73f6fc412aa3c843782dd0b68}{pthread\_cond\_broadcast}}(\mbox{\hyperlink{pthread__minport__windows_8h_a9d2915aaebc50f5522abbf7687c32836}{pthread\_cond\_t}}\ *cv)\ \{}
\DoxyCodeLine{00338\ \ \ EnterCriticalSection\ (\&cv-\/>waiters\_count\_lock\_);}
\DoxyCodeLine{00339\ \ \ \textcolor{keywordflow}{if}\ (cv-\/>waiters\_count\_\ >\ 0)\ \{\ \ }
\DoxyCodeLine{00340\ \ \ \ \ SetEvent\ (cv-\/>event\_);}
\DoxyCodeLine{00341\ \ \ \ \ \textcolor{comment}{//\ Release\ all\ the\ threads\ in\ this\ generation.}}
\DoxyCodeLine{00342\ \ \ \ \ cv-\/>release\_count\_\ =\ cv-\/>waiters\_count\_;}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00344\ \ \ \ \ \textcolor{comment}{//\ Start\ a\ new\ generation.}}
\DoxyCodeLine{00345\ \ \ \ \ cv-\/>wait\_generation\_count\_++;}
\DoxyCodeLine{00346\ \ \ \}}
\DoxyCodeLine{00347\ \ \ LeaveCriticalSection\ (\&cv-\/>waiters\_count\_lock\_);}
\DoxyCodeLine{00348\ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00349\ \}}
\DoxyCodeLine{00350\ }
\DoxyCodeLine{00351\ \mbox{\hyperlink{ff__queue_8hpp_a2eb6f9e0395b47b8d5e3eeae4fe0c116}{INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{pthread__minport__windows_8h_aa195608723fa0adb8478449f3f21e122}{pthread\_cond\_destroy}}(\mbox{\hyperlink{pthread__minport__windows_8h_a9d2915aaebc50f5522abbf7687c32836}{pthread\_cond\_t}}\ *cond)\ \{}
\DoxyCodeLine{00352\ \ \ \ \ \textcolor{comment}{//\ Do\ nothing.\ Did\ not\ find\ a\ Windows\ call\ ....\ }}
\DoxyCodeLine{00353\ \ \ \ \ \textcolor{keywordflow}{return}\ (0);\ \textcolor{comment}{//\ Errors\ not\ managed}}
\DoxyCodeLine{00354\ \ \}}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00356\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00358\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ FF\_MINPORT\_WIN\_H\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
