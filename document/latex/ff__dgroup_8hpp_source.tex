\doxysection{ff\+\_\+dgroup.\+hpp}
\hypertarget{ff__dgroup_8hpp_source}{}\label{ff__dgroup_8hpp_source}\index{external/taskflow/3rd-\/party/ff/distributed/ff\_dgroup.hpp@{external/taskflow/3rd-\/party/ff/distributed/ff\_dgroup.hpp}}
\mbox{\hyperlink{ff__dgroup_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ ***************************************************************************}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ \ FastFlow\ is\ free\ software;\ you\ can\ redistribute\ it\ and/or\ modify\ it}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *\ \ under\ the\ terms\ of\ the\ GNU\ Lesser\ General\ Public\ License\ version\ 3\ as}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ \ published\ by\ the\ Free\ Software\ Foundation.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *\ \ Starting\ from\ version\ 3.0.1\ FastFlow\ is\ dual\ licensed\ under\ the\ GNU\ LGPLv3}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ \ or\ MIT\ License\ (https://github.com/ParaGroup/WindFlow/blob/vers3.x/LICENSE.MIT)}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ \ This\ program\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,\ but\ WITHOUT}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ \ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of\ MERCHANTABILITY\ or}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *\ \ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the\ GNU\ Lesser\ General\ Public}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ \ License\ for\ more\ details.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ \ You\ should\ have\ received\ a\ copy\ of\ the\ GNU\ Lesser\ General\ Public\ License}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ \ along\ with\ this\ program;\ if\ not,\ write\ to\ the\ Free\ Software\ Foundation,}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *\ \ Inc.,\ 59\ Temple\ Place\ -\/\ Suite\ 330,\ Boston,\ MA\ 02111-\/1307,\ USA.}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ ****************************************************************************}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{comment}{/*\ Authors:\ }}
\DoxyCodeLine{00022\ \textcolor{comment}{\ *\ \ \ Nicolo'\ Tonci}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ *\ \ \ Massimo\ Torquati}}
\DoxyCodeLine{00024\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#ifndef\ FF\_DGROUP\_H}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#define\ FF\_DGROUP\_H}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{ff_8hpp}{ff/ff.hpp}}>}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{ff__network_8hpp}{ff/distributed/ff\_network.hpp}}>}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{ff__wrappers_8hpp}{ff/distributed/ff\_wrappers.hpp}}>}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{ff__dreceiver_8hpp}{ff/distributed/ff\_dreceiver.hpp}}>}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{ff__dsender_8hpp}{ff/distributed/ff\_dsender.hpp}}>}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{ff__dadapters_8hpp}{ff/distributed/ff\_dadapters.hpp}}>}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#include\ <numeric>}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#ifdef\ DFF\_MPI}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{ff__dreceiver_m_p_i_8hpp}{ff/distributed/ff\_dreceiverMPI.hpp}}>}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{ff__dsender_m_p_i_8hpp}{ff/distributed/ff\_dsenderMPI.hpp}}>}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00046\ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{ff__dgroup_8hpp_a576e26a7335f22effcc94a1fb3a0652c}{getBackAndPop}}(std::vector<T>\&\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\{}
\DoxyCodeLine{00047\ \ \ \ \ \mbox{\hyperlink{test__overwrite__node_8cpp_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}}\ =\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}.back();}
\DoxyCodeLine{00048\ \ \ \ \ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}.pop\_back();}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{offscreen_8c_a846c9667e34d56c560bb7f0ac6e173f6}{b}};}
\DoxyCodeLine{00050\ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceff}{ff}}\{}
\DoxyCodeLine{00053\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classff_1_1d_group_abc68844d22faa14c13e37ec04e1e17d5}{dGroup}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classff_1_1ff__farm}{ff::ff\_farm}}\ \{}
\DoxyCodeLine{00054\ \ \ \ \ }
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ std::unordered\_map<int,\ int>\ \mbox{\hyperlink{classff_1_1d_group_a609834381c2b35c36a4ff4ac19eb028f}{vector2UMap}}(\textcolor{keyword}{const}\ std::vector<int>\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\{}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ std::unordered\_map<int,int>\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}};}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}.size();\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++)\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}}[\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]]\ =\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}};}
\DoxyCodeLine{00059\ \ \ \ \ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ std::map<int,\ int>\ \mbox{\hyperlink{classff_1_1d_group_a42a17d062232867c4c6c6a6df8c28792}{vector2Map}}(\textcolor{keyword}{const}\ std::vector<int>\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}})\{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ std::map<int,int>\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}};}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}.size();\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++)\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}}[\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}[\mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]]\ =\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__step__by__step_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}};}
\DoxyCodeLine{00065\ \ \ \ \ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structff_1_1d_group_1_1_forwarder_node_a3850f0ca526d7e63eba1af7191311a1b}{ForwarderNode}}\ :\ \mbox{\hyperlink{classff_1_1ff__node_a53ab8b2244539766bdea3eb65cb04f9b}{ff\_node}}\ \{\ }
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1d_group_1_1_forwarder_node_a3850f0ca526d7e63eba1af7191311a1b}{ForwarderNode}}(std::function<\textcolor{keywordtype}{bool}(\textcolor{keywordtype}{void}*,\ \mbox{\hyperlink{classdata_buffer}{dataBuffer}}\&)>\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::function<\textcolor{keywordtype}{void}(\textcolor{keywordtype}{void}*)>\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}})\ \{\ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>serializeF\ =\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}};}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>freetaskF\ \ =\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}};}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structff_1_1d_group_1_1_forwarder_node_a6e385785fdfed8eb6c4580eea545bcf1}{ForwarderNode}}(std::function<\textcolor{keywordtype}{void}*(\mbox{\hyperlink{classdata_buffer}{dataBuffer}}\&,\textcolor{keywordtype}{bool}\&)>\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}},}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::function<\textcolor{keywordtype}{void}*(\textcolor{keywordtype}{char}*,\textcolor{keywordtype}{size\_t})>\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}})\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>alloctaskF\ \ \ =\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}};}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>deserializeF\ =\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}};}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{structff_1_1d_group_1_1_forwarder_node_a9ccf6f47500fa4bb8e0918eec03fe34b}{svc}}(\textcolor{keywordtype}{void}*\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}})\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}};\}}
\DoxyCodeLine{00079\ \ \ \ \ \};}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ \mbox{\hyperlink{classff_1_1d_group_af4de306ffb919f4664f1eb9067526857}{buildWrapperIN}}(\mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}})\{}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>isMultiOutput())}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__node_abe64ffac2201bfaef32ab7a7c16ab511}{ff\_comb}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_wrapper_i_n}{WrapperIN}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{structff_1_1d_group_1_1_forwarder_node}{ForwarderNode}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>deserializeF,\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>alloctaskF)),\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}},\ \textcolor{keyword}{true},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_wrapper_i_n}{WrapperIN}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}});}
\DoxyCodeLine{00085\ \ \ \ \ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ \mbox{\hyperlink{classff_1_1d_group_a5ed6105b15667186ef1c0a5d52369b46}{buildWrapperOUT}}(\mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}},\ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id},\ \textcolor{keywordtype}{int}\ outputChannels,\ \textcolor{keywordtype}{int}\ feedbackChannels\ =\ 0)\{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>isMultiInput())\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__node_abe64ffac2201bfaef32ab7a7c16ab511}{ff\_comb}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}},\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_wrapper_o_u_t}{WrapperOUT}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{structff_1_1d_group_1_1_forwarder_node}{ForwarderNode}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>serializeF,\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}}-\/>freetaskF),\ \textcolor{keywordtype}{id},\ outputChannels,\ feedbackChannels,\ \textcolor{keyword}{true}),\ \textcolor{keyword}{false},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_wrapper_o_u_t}{WrapperOUT}}(\mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}},\ \textcolor{keywordtype}{id},\ outputChannels,\ feedbackChannels);}
\DoxyCodeLine{00090\ \ \ \ \ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00093\ \ \ \ \ \mbox{\hyperlink{classff_1_1d_group_abc68844d22faa14c13e37ec04e1e17d5}{dGroup}}(\mbox{\hyperlink{classff_1_1ff___i_r}{ff\_IR}}\&\ ir)\{}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_a810d0e1a2c92625af369515c7ba64548}{isVertical}}())\{}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ outputChannels\ =\ 0;}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ feedbacksChannels\ =\ 0;}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_acddb2ea01f51fed9d97fc8eea796cc02}{hasSender}})\{}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ outputChannels\ =\ std::accumulate(ir.\mbox{\hyperlink{classff_1_1ff___i_r_afc54d23b6031c3c5fc6c94046379809e}{routingTable}}.begin(),\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_afc54d23b6031c3c5fc6c94046379809e}{routingTable}}.end(),\ 0,\ [](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}},\ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\{return\ s+\ (f.second.second\ !=\ ChannelType::FBK\ ?\ f.second.first.size()\ :\ 0);\});}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ feedbacksChannels\ =\ std::accumulate(ir.\mbox{\hyperlink{classff_1_1ff___i_r_afc54d23b6031c3c5fc6c94046379809e}{routingTable}}.begin(),\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_afc54d23b6031c3c5fc6c94046379809e}{routingTable}}.end(),\ 0,\ [](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}},\ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\{return\ s+(f.second.second\ ==\ ChannelType::FBK\ ?\ f.second.first.size()\ :\ 0);\});}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<int>\ reverseOutputIndexes(ir.\mbox{\hyperlink{classff_1_1ff___i_r_a925fa346a6125c908705f72b461198da}{hasLeftChildren}}()\ ?\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_aace800892a4dea8634654638644d351b}{outputL}}.rbegin()\ :\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a183f6e3d45b5f0887e697bb28b7d54ef}{outputR}}.rbegin(),\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a925fa346a6125c908705f72b461198da}{hasLeftChildren}}()\ ?\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_aace800892a4dea8634654638644d351b}{outputL}}.rend()\ :\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a183f6e3d45b5f0887e697bb28b7d54ef}{outputR}}.rend());}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ child:\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_a925fa346a6125c908705f72b461198da}{hasLeftChildren}}()\ ?\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a148d6deb35a544115ca1d2cfce8b1471}{L}}\ :\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a055554b01fb6599212900490234f7d9c}{R}}))\{}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1svector}{ff::svector<ff\_node*>}}\ inputs;\ child-\/>get\_in\_nodes(inputs);}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1svector}{ff::svector<ff\_node*>}}\ outputs;\ child-\/>get\_out\_nodes(outputs);}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ handle\ the\ case\ we\ have\ a\ pipe\ (or\ more\ nested)\ with\ just\ one\ sequential\ stage\ (not\ a\ combine)}}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inputs.\mbox{\hyperlink{classff_1_1svector_a29125256281f793b0808ecfae6ea68ec}{size}}()\ ==\ 1\ \&\&\ outputs.\mbox{\hyperlink{classff_1_1svector_a29125256281f793b0808ecfae6ea68ec}{size}}()\ ==\ 1\ \&\&\ inputs[0]\ ==\ outputs[0])}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ child\ =\ inputs[0];}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a127a8ea7f986448c12db33938a1d9d54}{isSeq}}(child))\{}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ wrapper\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_a48bc7a08d2a06f5d23e888e2c0c126b3}{hasReceiver}}\ \&\&\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_acddb2ea01f51fed9d97fc8eea796cc02}{hasSender}})\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wrapper\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_wrapper_i_n_o_u_t}{WrapperINOUT}}(child,\ \mbox{\hyperlink{ff__dgroup_8hpp_a576e26a7335f22effcc94a1fb3a0652c}{getBackAndPop}}(reverseOutputIndexes),\ 1,\ feedbacksChannels);}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_ab3fc92f157357c4c214a2906229f7dc4}{workers}}.push\_back(wrapper);}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_ad0e85e91067d650dc9b6f3e1daf49897}{isSource}}\ \&\&\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a810d0e1a2c92625af369515c7ba64548}{isVertical}}()\ \&\&\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a925fa346a6125c908705f72b461198da}{hasLeftChildren}}())\ wrapper-\/>\mbox{\hyperlink{classff_1_1ff__node_a949d963e759f57c978bd0d85f89ed1b3}{skipfirstpop}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_a48bc7a08d2a06f5d23e888e2c0c126b3}{hasReceiver}})\ \{}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wrapper\ =\ \mbox{\hyperlink{classff_1_1d_group_af4de306ffb919f4664f1eb9067526857}{buildWrapperIN}}(child);}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_ad0e85e91067d650dc9b6f3e1daf49897}{isSource}}\ \&\&\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a810d0e1a2c92625af369515c7ba64548}{isVertical}}()\ \&\&\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a925fa346a6125c908705f72b461198da}{hasLeftChildren}}())\ wrapper-\/>\mbox{\hyperlink{classff_1_1ff__node_a949d963e759f57c978bd0d85f89ed1b3}{skipfirstpop}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_ab3fc92f157357c4c214a2906229f7dc4}{workers}}.push\_back(wrapper);}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \ \{}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wrapper\ =\ \mbox{\hyperlink{classff_1_1d_group_a5ed6105b15667186ef1c0a5d52369b46}{buildWrapperOUT}}(child,\ \mbox{\hyperlink{ff__dgroup_8hpp_a576e26a7335f22effcc94a1fb3a0652c}{getBackAndPop}}(reverseOutputIndexes),\ outputChannels,\ feedbacksChannels);}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_ab3fc92f157357c4c214a2906229f7dc4}{workers}}.push\_back(wrapper);}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ in\ case\ there\ are\ feedback\ channels\ we\ cannot\ skip\ all\ pops!}}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*if\ (ir.isSource)}}
\DoxyCodeLine{00128\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wrapper-\/>skip(true);*/}}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ in\ case\ there\ are\ feedback\ channels\ we\ cannot\ skip\ all\ pops!}}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ if\ (ir.isSource)}}
\DoxyCodeLine{00133\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ child-\/>skipallpop(true);*/}}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_a48bc7a08d2a06f5d23e888e2c0c126b3}{hasReceiver}})\{}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}}\ :\ inputs)\{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ inputParent\ =\ \mbox{\hyperlink{namespaceff_ae5eeb57e86366ea8a165624cdf0ea34c}{getBB}}(child,\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}});}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inputParent)\ \{}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ wrapper\ =\ \mbox{\hyperlink{classff_1_1d_group_af4de306ffb919f4664f1eb9067526857}{buildWrapperIN}}(\mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ inputParent-\/>\mbox{\hyperlink{classff_1_1ff__node_ad70aa2e45015115075277d96b32e31d4}{change\_node}}(\mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}},\ wrapper,\ \textcolor{keyword}{true});\ \textcolor{comment}{//cleanup??\ removefromcleanuplist??}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_ad0e85e91067d650dc9b6f3e1daf49897}{isSource}}\ \&\&\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a810d0e1a2c92625af369515c7ba64548}{isVertical}}()\ \&\&\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a925fa346a6125c908705f72b461198da}{hasLeftChildren}}())}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ inputParent-\/>\mbox{\hyperlink{classff_1_1ff__node_a949d963e759f57c978bd0d85f89ed1b3}{skipfirstpop}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_acddb2ea01f51fed9d97fc8eea796cc02}{hasSender}})\{}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}}\ :\ outputs)\{}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ outputParent\ =\ \mbox{\hyperlink{namespaceff_ae5eeb57e86366ea8a165624cdf0ea34c}{getBB}}(child,\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}});}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (outputParent)\ outputParent-\/>\mbox{\hyperlink{classff_1_1ff__node_ad70aa2e45015115075277d96b32e31d4}{change\_node}}(\mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}},\ \mbox{\hyperlink{classff_1_1d_group_a5ed6105b15667186ef1c0a5d52369b46}{buildWrapperOUT}}(\mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}},\ \mbox{\hyperlink{ff__dgroup_8hpp_a576e26a7335f22effcc94a1fb3a0652c}{getBackAndPop}}(reverseOutputIndexes),\ outputChannels,\ feedbacksChannels),\ \textcolor{keyword}{true});\ \textcolor{comment}{//\ cleanup??\ removefromcleanuplist??}}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_ab3fc92f157357c4c214a2906229f7dc4}{workers}}.push\_back(child);}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_a48bc7a08d2a06f5d23e888e2c0c126b3}{hasReceiver}})\{}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_af04eaeacd886499f319000f82296be8a}{protocol}}\ ==\ \mbox{\hyperlink{ff__network_8hpp_a935ab6746fea268e5bb60a8755bc3c1eaa040cd7feeb588104634cdadf35abf1c}{Proto::TCP}})}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classff_1_1ff__farm_a6ac3d4cd02f14fcc1e0f0474eea1fa44}{add\_emitter}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{classff__dreceiver}{ff\_dreceiver}}(ir.\mbox{\hyperlink{classff_1_1ff___i_r_ac8f1bf62618d361379613e54b8f1f622}{listenEndpoint}},\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a9ad90566dbbf3c7f9931d62505f9b308}{expectedEOS}},\ \mbox{\hyperlink{classff_1_1d_group_a42a17d062232867c4c6c6a6df8c28792}{vector2Map}}(ir.\mbox{\hyperlink{classff_1_1ff___i_r_a925fa346a6125c908705f72b461198da}{hasLeftChildren}}()\ ?\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_aaa9d0e73ce5c5f6da4a5fb73ed711a81}{inputL}}\ :\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a3f8586f09d308521cd4268c7baa60b97}{inputR}})));}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00162\ \textcolor{preprocessor}{\#ifdef\ DFF\_MPI}}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classff_1_1ff__farm_a6ac3d4cd02f14fcc1e0f0474eea1fa44}{add\_emitter}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{classff__dreceiver_m_p_i}{ff\_dreceiverMPI}}(ir.\mbox{\hyperlink{classff_1_1ff___i_r_a9ad90566dbbf3c7f9931d62505f9b308}{expectedEOS}},\ \mbox{\hyperlink{classff_1_1d_group_a42a17d062232867c4c6c6a6df8c28792}{vector2Map}}(ir.\mbox{\hyperlink{classff_1_1ff___i_r_a925fa346a6125c908705f72b461198da}{hasLeftChildren}}()\ ?\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_aaa9d0e73ce5c5f6da4a5fb73ed711a81}{inputL}}\ :\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a3f8586f09d308521cd4268c7baa60b97}{inputR}})));}
\DoxyCodeLine{00165\ \textcolor{preprocessor}{\#endif\ }}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_acddb2ea01f51fed9d97fc8eea796cc02}{hasSender}})\{}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(ir.\mbox{\hyperlink{classff_1_1ff___i_r_af04eaeacd886499f319000f82296be8a}{protocol}}\ ==\ \mbox{\hyperlink{ff__network_8hpp_a935ab6746fea268e5bb60a8755bc3c1eaa040cd7feeb588104634cdadf35abf1c}{Proto::TCP}})}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classff_1_1ff__farm_ad8117ca2bc937e6be844af50ca6d2b87}{add\_collector}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{classff__dsender}{ff\_dsender}}(ir.\mbox{\hyperlink{classff_1_1ff___i_r_a4dcdd894af35dacaaebb2a35cfab9753}{destinationEndpoints}},\ \&ir.\mbox{\hyperlink{classff_1_1ff___i_r_afc54d23b6031c3c5fc6c94046379809e}{routingTable}},\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_ac8f1bf62618d361379613e54b8f1f622}{listenEndpoint}}.\mbox{\hyperlink{structff__endpoint_a85462f8c786a9759d086fd5fc08df0f6}{groupName}},\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a1ad06fb48d75fbc50a0e5579c5827034}{outBatchSize}},\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a03a77726b1f1ccc796c02b0862c6a8bb}{messageOTF}}),\ \textcolor{keyword}{true});}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00172\ \textcolor{preprocessor}{\#ifdef\ DFF\_MPI}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classff_1_1ff__farm_ad8117ca2bc937e6be844af50ca6d2b87}{add\_collector}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{classff__dsender_m_p_i}{ff\_dsenderMPI}}(ir.\mbox{\hyperlink{classff_1_1ff___i_r_a4dcdd894af35dacaaebb2a35cfab9753}{destinationEndpoints}},\ \&ir.\mbox{\hyperlink{classff_1_1ff___i_r_afc54d23b6031c3c5fc6c94046379809e}{routingTable}},\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_ac8f1bf62618d361379613e54b8f1f622}{listenEndpoint}}.\mbox{\hyperlink{structff__endpoint_a85462f8c786a9759d086fd5fc08df0f6}{groupName}},\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a1ad06fb48d75fbc50a0e5579c5827034}{outBatchSize}},\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a03a77726b1f1ccc796c02b0862c6a8bb}{messageOTF}}),\ \textcolor{keyword}{true});}
\DoxyCodeLine{00175\ \textcolor{preprocessor}{\#endif\ \ \ \ \ \ }}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_aa429d14204d6da2f111e934f985427c1}{hasRightChildren}}()\ \&\&\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a49ab272da0ff843d0fce3dd5a5acff05}{parentBB}}-\/>\mbox{\hyperlink{classff_1_1ff__node_ac8e132cbcab68af6a4ca13bbcccd62f3}{isAll2All}}())\ \{}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__a2a}{ff\_a2a}}\ *a2a\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__a2a}{ff\_a2a}}*\textcolor{keyword}{>}(ir.\mbox{\hyperlink{classff_1_1ff___i_r_a49ab272da0ff843d0fce3dd5a5acff05}{parentBB}});}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (a2a-\/>\mbox{\hyperlink{classff_1_1ff__a2a_a0e4f8c9472db17a1dd0c746cb4d342a9}{ondemand\_buffer}}()\ >\ 0)\ \{}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classff_1_1ff__farm_a259e203b6eaf044985781f0a8668b9ae}{set\_scheduling\_ondemand}}(a2a-\/>\mbox{\hyperlink{classff_1_1ff__a2a_a0e4f8c9472db17a1dd0c746cb4d342a9}{ondemand\_buffer}}());}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{\ \textcolor{comment}{//\ the\ group\ is\ horizontal!}}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__a2a}{ff\_a2a}}*\ innerA2A\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__node_a7542a58b0efa58291c12d2926c2a78d4}{ff\_a2a}}();}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<int>\ reverseLeftOutputIndexes(ir.\mbox{\hyperlink{classff_1_1ff___i_r_aace800892a4dea8634654638644d351b}{outputL}}.rbegin(),\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_aace800892a4dea8634654638644d351b}{outputL}}.rend());}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ std::unordered\_map<int,\ int>\ localRightWorkers\ =\ \mbox{\hyperlink{classff_1_1d_group_a609834381c2b35c36a4ff4ac19eb028f}{vector2UMap}}(ir.\mbox{\hyperlink{classff_1_1ff___i_r_a3f8586f09d308521cd4268c7baa60b97}{inputR}});}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<ff\_node*>\ firstSet;}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ child\ :\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a148d6deb35a544115ca1d2cfce8b1471}{L}})\{}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a127a8ea7f986448c12db33938a1d9d54}{isSeq}}(child))}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_ad0e85e91067d650dc9b6f3e1daf49897}{isSource}})\{}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ wrapped\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_emitter_adapter}{EmitterAdapter}}(child,\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_adca69e32ababf5091191ed9df75acfa4}{rightTotalInputs}},\ \mbox{\hyperlink{ff__dgroup_8hpp_a576e26a7335f22effcc94a1fb3a0652c}{getBackAndPop}}(reverseLeftOutputIndexes)\ ,\ localRightWorkers);}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//if\ (ir.hasReceiver)}}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wrapped-\/>skipallpop(\textcolor{keyword}{true});}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ firstSet.push\_back(wrapped);}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}\ =\ child-\/>getDeserializationFunction();}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ firstSet.push\_back(\textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__node_abe64ffac2201bfaef32ab7a7c16ab511}{ff\_comb}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_wrapper_i_n}{WrapperIN}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{structff_1_1d_group_1_1_forwarder_node}{ForwarderNode}}(\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.first,\mbox{\hyperlink{ittnotify__static_8h_a5f135fd1e66a03efd5275434478e0d97}{d}}.second),\ 1,\ \textcolor{keyword}{true}),\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_emitter_adapter}{EmitterAdapter}}(child,\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_adca69e32ababf5091191ed9df75acfa4}{rightTotalInputs}},\ \mbox{\hyperlink{ff__dgroup_8hpp_a576e26a7335f22effcc94a1fb3a0652c}{getBackAndPop}}(reverseLeftOutputIndexes)\ ,\ localRightWorkers),\ \textcolor{keyword}{true},\ \textcolor{keyword}{true}));}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_ad0e85e91067d650dc9b6f3e1daf49897}{isSource}})\{}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//if\ (ir.hasReceiver)}}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ child-\/>skipallpop(\textcolor{keyword}{true});}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1svector}{ff::svector<ff\_node*>}}\ inputs;\ child-\/>\mbox{\hyperlink{classff_1_1ff__node_a13a611e0875cf7501e1c5cd5ca84411c}{get\_in\_nodes}}(inputs);}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}}\ :\ inputs)\{}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ inputParent\ =\ \mbox{\hyperlink{namespaceff_ae5eeb57e86366ea8a165624cdf0ea34c}{getBB}}(child,\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}});}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inputParent)\ inputParent-\/>\mbox{\hyperlink{classff_1_1ff__node_ad70aa2e45015115075277d96b32e31d4}{change\_node}}(\mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}},\ \mbox{\hyperlink{classff_1_1d_group_af4de306ffb919f4664f1eb9067526857}{buildWrapperIN}}(\mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}}),\ \textcolor{keyword}{true});\ \textcolor{comment}{//\ cleanup???\ remove\_fromcleanuplist??}}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1svector}{ff::svector<ff\_node*>}}\ outputs;\ child-\/>\mbox{\hyperlink{classff_1_1ff__node_ab05d103aca4217e980d99b05778573aa}{get\_out\_nodes}}(outputs);}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}}\ :\ outputs)\{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ outputParent\ =\ \mbox{\hyperlink{namespaceff_ae5eeb57e86366ea8a165624cdf0ea34c}{getBB}}(child,\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}});}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (outputParent)\ outputParent-\/>\mbox{\hyperlink{classff_1_1ff__node_ad70aa2e45015115075277d96b32e31d4}{change\_node}}(\mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}},\ \ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_emitter_adapter}{EmitterAdapter}}(\mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}},\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_adca69e32ababf5091191ed9df75acfa4}{rightTotalInputs}},\ \mbox{\hyperlink{ff__dgroup_8hpp_a576e26a7335f22effcc94a1fb3a0652c}{getBackAndPop}}(reverseLeftOutputIndexes)\ ,\ localRightWorkers)\ ,\ \textcolor{keyword}{true});\ \textcolor{comment}{//\ cleanup???\ remove\_fromcleanuplist??}}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ firstSet.push\_back(child);\ \textcolor{comment}{//ondemand??\ cleanup??}}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ add\ the\ Square\ Box\ Left,\ just\ if\ we\ have\ a\ receiver!}}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_a48bc7a08d2a06f5d23e888e2c0c126b3}{hasReceiver}})}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ firstSet.push\_back(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_square_box_left}{SquareBoxLeft}}(localRightWorkers));\ }
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ std::transform(firstSet.begin(),\ firstSet.end(),\ firstSet.begin(),\ [](\mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}})\ -\/>\ \mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ \{}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (!n-\/>isPipe())}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return\ new\ ff\_Pipe(n);}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return\ n;}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ innerA2A-\/>\mbox{\hyperlink{classff_1_1ff__a2a_aad8fb5f7aafd141da9b6fedfb5a24437}{add\_firstset}}(firstSet,\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classff_1_1ff__a2a}{ff\_a2a}}*\textcolor{keyword}{>}(ir.\mbox{\hyperlink{classff_1_1ff___i_r_a49ab272da0ff843d0fce3dd5a5acff05}{parentBB}})-\/>\mbox{\hyperlink{classff_1_1ff__a2a_a0e4f8c9472db17a1dd0c746cb4d342a9}{ondemand\_buffer}}());\ \textcolor{comment}{//\ note\ the\ ondemand!!}}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ outputChannels\ =\ std::accumulate(ir.\mbox{\hyperlink{classff_1_1ff___i_r_afc54d23b6031c3c5fc6c94046379809e}{routingTable}}.begin(),\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_afc54d23b6031c3c5fc6c94046379809e}{routingTable}}.end(),\ 0,\ [](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}},\ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\{return\ s+\ (f.second.second\ ==\ ChannelType::FWD\ ?\ f.second.first.size()\ :\ 0);\});}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ feedbacksChannels\ =\ std::accumulate(ir.\mbox{\hyperlink{classff_1_1ff___i_r_afc54d23b6031c3c5fc6c94046379809e}{routingTable}}.begin(),\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_afc54d23b6031c3c5fc6c94046379809e}{routingTable}}.end(),\ 0,\ [](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}},\ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\{return\ s+(f.second.second\ ==\ ChannelType::FBK\ ?\ f.second.first.size()\ :\ 0);\});}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<int>\ reverseRightOutputIndexes(ir.\mbox{\hyperlink{classff_1_1ff___i_r_a183f6e3d45b5f0887e697bb28b7d54ef}{outputR}}.rbegin(),\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a183f6e3d45b5f0887e697bb28b7d54ef}{outputR}}.rend());}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<ff\_node*>\ secondSet;}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ child\ :\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a055554b01fb6599212900490234f7d9c}{R}})\{}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceff_a127a8ea7f986448c12db33938a1d9d54}{isSeq}}(child))\ \{}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}\ =\ child-\/>getSerializationFunction();}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ secondSet.push\_back(}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_ae131fe0a76850a36699f2b25f392ca0c}{isSink}})\ ?\ (\mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*)\textcolor{keyword}{new}\ \mbox{\hyperlink{class_collector_adapter}{CollectorAdapter}}(child,\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_aace800892a4dea8634654638644d351b}{outputL}})\ }
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ (\mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*)\textcolor{keyword}{new}\ \mbox{\hyperlink{classff_1_1ff__comb}{ff\_comb}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_collector_adapter}{CollectorAdapter}}(child,\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_aace800892a4dea8634654638644d351b}{outputL}}),\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_wrapper_o_u_t}{WrapperOUT}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{structff_1_1d_group_1_1_forwarder_node}{ForwarderNode}}(\mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}.first,\ \mbox{\hyperlink{main-override_8cpp_a1384e7608274313a9433fa573868557b}{s}}.second),\ \mbox{\hyperlink{ff__dgroup_8hpp_a576e26a7335f22effcc94a1fb3a0652c}{getBackAndPop}}(reverseRightOutputIndexes),\ outputChannels,\ feedbacksChannels,\ \textcolor{keyword}{true}),\ \textcolor{keyword}{true},\ \textcolor{keyword}{true})}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1svector}{ff::svector<ff\_node*>}}\ inputs;\ child-\/>\mbox{\hyperlink{classff_1_1ff__node_a13a611e0875cf7501e1c5cd5ca84411c}{get\_in\_nodes}}(inputs);}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}}\ :\ inputs)\{}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ inputParent\ =\ \mbox{\hyperlink{namespaceff_ae5eeb57e86366ea8a165624cdf0ea34c}{getBB}}(child,\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}});}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inputParent)\ inputParent-\/>\mbox{\hyperlink{classff_1_1ff__node_ad70aa2e45015115075277d96b32e31d4}{change\_node}}(\mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}},\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_collector_adapter}{CollectorAdapter}}(\mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_ab7e6955a695fad0be513586926040b1a}{input}},\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_aace800892a4dea8634654638644d351b}{outputL}}),\ \textcolor{keyword}{true});\ \textcolor{comment}{//cleanup??\ remove\_fromcleanuplist??}}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!ir.\mbox{\hyperlink{classff_1_1ff___i_r_ae131fe0a76850a36699f2b25f392ca0c}{isSink}})\{}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1svector}{ff::svector<ff\_node*>}}\ outputs;\ child-\/>\mbox{\hyperlink{classff_1_1ff__node_ab05d103aca4217e980d99b05778573aa}{get\_out\_nodes}}(outputs);}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}}\ :\ outputs)\{}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ outputParent\ =\ \mbox{\hyperlink{namespaceff_ae5eeb57e86366ea8a165624cdf0ea34c}{getBB}}(child,\ \mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}});}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (outputParent)\ outputParent-\/>\mbox{\hyperlink{classff_1_1ff__node_ad70aa2e45015115075277d96b32e31d4}{change\_node}}(\mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}},\ \mbox{\hyperlink{classff_1_1d_group_a5ed6105b15667186ef1c0a5d52369b46}{buildWrapperOUT}}(\mbox{\hyperlink{benchmarks_2scan_2scan_8hpp_a8390452002ecc7a0dadc5ae0dccc9b6c}{output}},\ \mbox{\hyperlink{ff__dgroup_8hpp_a576e26a7335f22effcc94a1fb3a0652c}{getBackAndPop}}(reverseRightOutputIndexes),\ outputChannels,\ feedbacksChannels),\ \textcolor{keyword}{true});\ \textcolor{comment}{//cleanup??\ removefromcleanuplist?}}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ secondSet.push\_back(child);}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ add\ the\ SQuareBox\ Right,\ iif\ there\ is\ a\ sender!}}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_acddb2ea01f51fed9d97fc8eea796cc02}{hasSender}})}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ secondSet.push\_back(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_square_box_right}{SquareBoxRight}});}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ std::transform(secondSet.begin(),\ secondSet.end(),\ secondSet.begin(),\ [](\mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ \mbox{\hyperlink{_bi_c_g_s_t_a_b__simple_8cpp_a5150192f625f4d7970d61169b9567f39}{n}})\ -\/>\ \mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}*\ \{}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (!n-\/>isPipe())}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return\ new\ ff\_Pipe(n);}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return\ n;}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ innerA2A-\/>\mbox{\hyperlink{classff_1_1ff__a2a_a32fb5256015bab02ecd879cda0b371e5}{add\_secondset}}<\mbox{\hyperlink{classff_1_1ff__node}{ff\_node}}>(secondSet);\ \textcolor{comment}{//\ cleanup??}}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classff_1_1ff__farm_ab3fc92f157357c4c214a2906229f7dc4}{workers}}.push\_back(innerA2A);}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_a48bc7a08d2a06f5d23e888e2c0c126b3}{hasReceiver}})\{}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_af04eaeacd886499f319000f82296be8a}{protocol}}\ ==\ \mbox{\hyperlink{ff__network_8hpp_a935ab6746fea268e5bb60a8755bc3c1eaa040cd7feeb588104634cdadf35abf1c}{Proto::TCP}})}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classff_1_1ff__farm_a6ac3d4cd02f14fcc1e0f0474eea1fa44}{add\_emitter}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{classff__dreceiver_h}{ff\_dreceiverH}}(ir.\mbox{\hyperlink{classff_1_1ff___i_r_ac8f1bf62618d361379613e54b8f1f622}{listenEndpoint}},\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a9ad90566dbbf3c7f9931d62505f9b308}{expectedEOS}},\ \mbox{\hyperlink{classff_1_1d_group_a42a17d062232867c4c6c6a6df8c28792}{vector2Map}}(ir.\mbox{\hyperlink{classff_1_1ff___i_r_aaa9d0e73ce5c5f6da4a5fb73ed711a81}{inputL}})));}
\DoxyCodeLine{00283\ \textcolor{preprocessor}{\#ifdef\ DFF\_MPI}}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classff_1_1ff__farm_a6ac3d4cd02f14fcc1e0f0474eea1fa44}{add\_emitter}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{classff__dreceiver_h_m_p_i}{ff\_dreceiverHMPI}}(ir.\mbox{\hyperlink{classff_1_1ff___i_r_a9ad90566dbbf3c7f9931d62505f9b308}{expectedEOS}},\ \mbox{\hyperlink{classff_1_1d_group_a42a17d062232867c4c6c6a6df8c28792}{vector2Map}}(ir.\mbox{\hyperlink{classff_1_1ff___i_r_aaa9d0e73ce5c5f6da4a5fb73ed711a81}{inputL}})));}
\DoxyCodeLine{00286\ \textcolor{preprocessor}{\#endif\ }}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ir.\mbox{\hyperlink{classff_1_1ff___i_r_acddb2ea01f51fed9d97fc8eea796cc02}{hasSender}})\{}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(ir.\mbox{\hyperlink{classff_1_1ff___i_r_af04eaeacd886499f319000f82296be8a}{protocol}}\ ==\ \mbox{\hyperlink{ff__network_8hpp_a935ab6746fea268e5bb60a8755bc3c1eaa040cd7feeb588104634cdadf35abf1c}{Proto::TCP}})}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classff_1_1ff__farm_ad8117ca2bc937e6be844af50ca6d2b87}{add\_collector}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{classff__dsender_h}{ff\_dsenderH}}(ir.\mbox{\hyperlink{classff_1_1ff___i_r_a4dcdd894af35dacaaebb2a35cfab9753}{destinationEndpoints}},\ \&ir.\mbox{\hyperlink{classff_1_1ff___i_r_afc54d23b6031c3c5fc6c94046379809e}{routingTable}},\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_ac8f1bf62618d361379613e54b8f1f622}{listenEndpoint}}.\mbox{\hyperlink{structff__endpoint_a85462f8c786a9759d086fd5fc08df0f6}{groupName}},\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a1ad06fb48d75fbc50a0e5579c5827034}{outBatchSize}},\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a03a77726b1f1ccc796c02b0862c6a8bb}{messageOTF}},\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_ac28b1660a97b83f5e1651a5f17f87289}{internalMessageOTF}})\ ,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00292\ \textcolor{preprocessor}{\#ifdef\ DFF\_MPI}}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classff_1_1ff__farm_ad8117ca2bc937e6be844af50ca6d2b87}{add\_collector}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{classff__dsender_h_m_p_i}{ff\_dsenderHMPI}}(ir.\mbox{\hyperlink{classff_1_1ff___i_r_a4dcdd894af35dacaaebb2a35cfab9753}{destinationEndpoints}},\ \&ir.\mbox{\hyperlink{classff_1_1ff___i_r_afc54d23b6031c3c5fc6c94046379809e}{routingTable}},\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_ac8f1bf62618d361379613e54b8f1f622}{listenEndpoint}}.\mbox{\hyperlink{structff__endpoint_a85462f8c786a9759d086fd5fc08df0f6}{groupName}},\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a1ad06fb48d75fbc50a0e5579c5827034}{outBatchSize}},\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_a03a77726b1f1ccc796c02b0862c6a8bb}{messageOTF}},\ ir.\mbox{\hyperlink{classff_1_1ff___i_r_ac28b1660a97b83f5e1651a5f17f87289}{internalMessageOTF}}),\ \textcolor{keyword}{true});}
\DoxyCodeLine{00295\ \textcolor{preprocessor}{\#endif\ \ \ }}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \}\ \ }
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>\mbox{\hyperlink{classff_1_1ff__farm_ae6192a38eca0601a767f4c01c93b79d2}{getNWorkers}}()\ ==\ 0)\{}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \textcolor{stringliteral}{"{}The\ farm\ implementing\ the\ distributed\ group\ is\ empty!\ There\ might\ be\ an\ error!\ :(\(\backslash\)n"{}};}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \ \ \ \ abort();}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00303\ \ \ \ \ \}}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \};}
\DoxyCodeLine{00307\ \}}
\DoxyCodeLine{00308\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00309\ }

\end{DoxyCode}
