\doxysection{test\+\_\+container\+\_\+move\+\_\+support.\+h}
\hypertarget{test__container__move__support_8h_source}{}\label{test__container__move__support_8h_source}\index{external/taskflow/3rd-\/party/tbb/src/test/test\_container\_move\_support.h@{external/taskflow/3rd-\/party/tbb/src/test/test\_container\_move\_support.h}}
\mbox{\hyperlink{test__container__move__support_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2005-\/2020\ Intel\ Corporation}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ \ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ \ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{*/}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#ifndef\ \_\_TBB\_test\_container\_move\_support\_H}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#define\ \_\_TBB\_test\_container\_move\_support\_H}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{harness_8h}{harness.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{harness__assert_8h}{harness\_assert.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{harness__allocator_8h}{harness\_allocator.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{harness__state__trackable_8h}{harness\_state\_trackable.h}}"{}}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{external_2taskflow_23rd-party_2tbb_2include_2tbb_2atomic_8h}{tbb/atomic.h}}"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{aligned__space_8h}{tbb/aligned\_space.h}}"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{__allocator__traits_8h}{tbb/internal/\_allocator\_traits.h}}"{}}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ <stdexcept>}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ <functional>}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ tbb::atomic<size\_t>\ \mbox{\hyperlink{test__concurrent__vector__v2_8cpp_a405b4a3f2cf6d7b2b1da1df4cd155af9}{FooCount}};}
\DoxyCodeLine{00034\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{test__container__move__support_8h_a8df4424af58d95cf34e9050ed4107b39}{MaxFooCount}}\ =\ 0;}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00037\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_foo__exception}{Foo\_exception}}\ :\ \textcolor{keyword}{public}\ std::bad\_alloc\ \{}
\DoxyCodeLine{00038\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{class_foo__exception_a440ef0cc4b63f462dce25fb2c5659aff}{what}}()\ \textcolor{keyword}{const}\ throw()\ \_\_TBB\_override\ \{\ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}out\ of\ Foo\ limit"{}};\ \}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{class_foo__exception_a9a99c890ce5ea27deee5fec50e17323f}{\string~Foo\_exception}}()\ throw()\ \{\}}
\DoxyCodeLine{00041\ \};}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_foo_limit_a3543e1be690e8b737deb067b13e95bab}{FooLimit}}\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \mbox{\hyperlink{struct_foo_limit_a3543e1be690e8b737deb067b13e95bab}{FooLimit}}()\{}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{test__container__move__support_8h_a8df4424af58d95cf34e9050ed4107b39}{MaxFooCount}}\ \&\&\ \mbox{\hyperlink{test__container__move__support_8h_af6db0b4a8450edd99d1f8ec217f98f1f}{FooCount}}\ >=\ \mbox{\hyperlink{test__container__move__support_8h_a8df4424af58d95cf34e9050ed4107b39}{MaxFooCount}})}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_TBB\_THROW(\ \mbox{\hyperlink{class_foo__exception}{Foo\_exception}}()\ );}
\DoxyCodeLine{00047\ \ \ \ \ \}}
\DoxyCodeLine{00048\ \};}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ intptr\_t\ \mbox{\hyperlink{test__container__move__support_8h_abef7b19490a87e7f23e80391d4cb37f4}{initial\_value\_of\_bar}}\ =\ 42;}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{namespace_foo}{Foo}}\ :\ \mbox{\hyperlink{struct_foo_limit}{FooLimit}},\ \mbox{\hyperlink{struct_harness_1_1_state_trackable}{Harness::StateTrackable}}<true>\{}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_harness_1_1_state_trackable}{Harness::StateTrackable<true>}}\ \mbox{\hyperlink{struct_foo_ad4b92b1006763962cdf11ea8320a71ce}{StateTrackable}};}
\DoxyCodeLine{00055\ \ \ \ \ intptr\_t\ \mbox{\hyperlink{struct_foo_a7f3808ca9c6d30b5466b7c2e78cde800}{my\_bar}};}
\DoxyCodeLine{00056\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_foo_a85f2dd009f3866cb0218cc2cb4e50348}{is\_valid\_or\_zero}}()\textcolor{keyword}{\ const}\{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_harness_1_1_state_trackable_a82b0d8899c4ff8e40a22aab1a06b5ba7}{is\_valid}}()||(\mbox{\hyperlink{struct_foo_a8c56433483e5554589c76a97e99b3932}{state}}==\mbox{\hyperlink{struct_harness_1_1_state_trackable_base_ab3e365d64f7e88ee99a418da22c3acbca2c8bb28a253eb3ceff6cff5dfc5c8efe}{ZeroInitialized}}\ \&\&\ !\mbox{\hyperlink{struct_foo_a7f3808ca9c6d30b5466b7c2e78cde800}{my\_bar}});}
\DoxyCodeLine{00059\ \ \ \ \ \}}
\DoxyCodeLine{00060\ \ \ \ \ intptr\_t\&\ \mbox{\hyperlink{struct_foo_a155b35c173a2788fc7bdd0252297e98e}{zero\_bar}}()\{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{struct_foo_a85f2dd009f3866cb0218cc2cb4e50348}{is\_valid\_or\_zero}}(),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_foo_a7f3808ca9c6d30b5466b7c2e78cde800}{my\_bar}};}
\DoxyCodeLine{00063\ \ \ \ \ \}}
\DoxyCodeLine{00064\ \ \ \ \ intptr\_t\ \mbox{\hyperlink{struct_foo_aea88fccfb8c0acd23b5b66af15fdce6d}{zero\_bar}}()\textcolor{keyword}{\ const}\{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{struct_foo_a85f2dd009f3866cb0218cc2cb4e50348}{is\_valid\_or\_zero}}(),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_foo_a7f3808ca9c6d30b5466b7c2e78cde800}{my\_bar}};}
\DoxyCodeLine{00067\ \ \ \ \ \}}
\DoxyCodeLine{00068\ \ \ \ \ intptr\_t\&\ \mbox{\hyperlink{struct_foo_a4a1bf394e48a1d41555821a79610a3c9}{bar}}()\{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{struct_harness_1_1_state_trackable_a82b0d8899c4ff8e40a22aab1a06b5ba7}{is\_valid}}(),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_foo_a7f3808ca9c6d30b5466b7c2e78cde800}{my\_bar}};}
\DoxyCodeLine{00071\ \ \ \ \ \}}
\DoxyCodeLine{00072\ \ \ \ \ intptr\_t\ \mbox{\hyperlink{struct_foo_a72ed21dbd3402e3611a723094e1f539a}{bar}}()\textcolor{keyword}{\ const}\{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{struct_harness_1_1_state_trackable_a82b0d8899c4ff8e40a22aab1a06b5ba7}{is\_valid}}(),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_foo_a7f3808ca9c6d30b5466b7c2e78cde800}{my\_bar}};}
\DoxyCodeLine{00075\ \ \ \ \ \}}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keyword}{operator}\ intptr\_t()\textcolor{keyword}{\ const}\{}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>\mbox{\hyperlink{struct_foo_aba200d79720ffcd7e44957f604ba19b7}{bar}}();}
\DoxyCodeLine{00078\ \ \ \ \ \}}
\DoxyCodeLine{00079\ \ \ \ \ \mbox{\hyperlink{struct_foo_a8850cc430f85bfd2d641c8d74d9cb047}{Foo}}(\ intptr\_t\ barr\ ):\ \mbox{\hyperlink{struct_foo_ad4b92b1006763962cdf11ea8320a71ce}{StateTrackable}}(0)\{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_foo_a7f3808ca9c6d30b5466b7c2e78cde800}{my\_bar}}\ =\ barr;}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_af6db0b4a8450edd99d1f8ec217f98f1f}{FooCount}}++;}
\DoxyCodeLine{00082\ \ \ \ \ \}}
\DoxyCodeLine{00083\ \ \ \ \ \mbox{\hyperlink{struct_foo_a56cb370257fd77ed992cdbb0ca1a8dda}{Foo}}()\{}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_foo_a7f3808ca9c6d30b5466b7c2e78cde800}{my\_bar}}\ =\ \mbox{\hyperlink{struct_foo_a29dc2450771534acc358b398442ffeb2}{initial\_value\_of\_bar}};}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_af6db0b4a8450edd99d1f8ec217f98f1f}{FooCount}}++;}
\DoxyCodeLine{00086\ \ \ \ \ \}}
\DoxyCodeLine{00087\ \ \ \ \ \mbox{\hyperlink{struct_foo_aa1c71f4519773fb8357337dfb1a7f73a}{Foo}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespace_foo}{Foo}}\&\ \mbox{\hyperlink{block__nonconst__ctor__on__const__xpr__0_8cpp_ad0f03c4a45448943d9296982de4d6269}{foo}}\ ):\ \mbox{\hyperlink{struct_foo_limit_a3543e1be690e8b737deb067b13e95bab}{FooLimit}}(),\ \mbox{\hyperlink{struct_foo_ad4b92b1006763962cdf11ea8320a71ce}{StateTrackable}}(\mbox{\hyperlink{block__nonconst__ctor__on__const__xpr__0_8cpp_ad0f03c4a45448943d9296982de4d6269}{foo}})\{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_foo_a7f3808ca9c6d30b5466b7c2e78cde800}{my\_bar}}\ =\ \mbox{\hyperlink{block__nonconst__ctor__on__const__xpr__0_8cpp_ad0f03c4a45448943d9296982de4d6269}{foo}}.my\_bar;}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_af6db0b4a8450edd99d1f8ec217f98f1f}{FooCount}}++;}
\DoxyCodeLine{00090\ \ \ \ \ \}}
\DoxyCodeLine{00091\ \textcolor{preprocessor}{\#if\ \_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT}}
\DoxyCodeLine{00092\ \ \ \ \ \mbox{\hyperlink{namespace_foo}{Foo}}(\ \mbox{\hyperlink{namespace_foo}{Foo}}\&\&\ \mbox{\hyperlink{block__nonconst__ctor__on__const__xpr__0_8cpp_ad0f03c4a45448943d9296982de4d6269}{foo}}\ ):\ \mbox{\hyperlink{struct_foo_limit}{FooLimit}}(),\ StateTrackable(\mbox{\hyperlink{namespacestd}{std}}::move(\mbox{\hyperlink{block__nonconst__ctor__on__const__xpr__0_8cpp_ad0f03c4a45448943d9296982de4d6269}{foo}}))\{}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ my\_bar\ =\ \mbox{\hyperlink{block__nonconst__ctor__on__const__xpr__0_8cpp_ad0f03c4a45448943d9296982de4d6269}{foo}}.my\_bar;}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \textcolor{comment}{//TODO:\ consider\ not\ using\ constant\ here,\ instead\ something\ like\ \string~my\_bar}}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{block__nonconst__ctor__on__const__xpr__0_8cpp_ad0f03c4a45448943d9296982de4d6269}{foo}}.my\_bar\ =\ -\/1;}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__concurrent__vector__v2_8cpp_a405b4a3f2cf6d7b2b1da1df4cd155af9}{FooCount}}++;}
\DoxyCodeLine{00097\ \ \ \ \ \}}
\DoxyCodeLine{00098\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00099\ \ \ \ \ \mbox{\hyperlink{struct_foo_a55456c27d4a048baf0cf8acb4bfd1fa0}{\string~Foo}}()\{}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_foo_a7f3808ca9c6d30b5466b7c2e78cde800}{my\_bar}}\ =\ \mbox{\hyperlink{struct_foo_a29dc2450771534acc358b398442ffeb2}{\string~initial\_value\_of\_bar}};}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{struct_foo_a8c56433483e5554589c76a97e99b3932}{state}}\ !=\ \mbox{\hyperlink{struct_harness_1_1_state_trackable_base_ab3e365d64f7e88ee99a418da22c3acbca2c8bb28a253eb3ceff6cff5dfc5c8efe}{ZeroInitialized}})\ -\/-\/\mbox{\hyperlink{test__container__move__support_8h_af6db0b4a8450edd99d1f8ec217f98f1f}{FooCount}};}
\DoxyCodeLine{00102\ \ \ \ \ \}}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_foo_a2e38440e26d83b4f1b2a7488fc00b804}{operator==}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \&lhs,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespace_foo}{Foo}}\ \&\mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}})\ \{}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}}.is\_valid\_or\_zero(),\ \textcolor{stringliteral}{"{}comparing\ invalid\ objects\ ?"{}}\ );}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ lhs\ ==\ \mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}}.my\_bar;}
\DoxyCodeLine{00106\ \ \ \ \ \}}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_foo_ae139dc7a99be057479cef877b3bea9e2}{operator==}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{namespace_foo}{Foo}}\ \&lhs,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \&\mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}})\ \{}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ lhs.\mbox{\hyperlink{struct_foo_a85f2dd009f3866cb0218cc2cb4e50348}{is\_valid\_or\_zero}}(),\ \ \ \textcolor{stringliteral}{"{}comparing\ invalid\ objects\ ?"{}}\ );}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ lhs.\mbox{\hyperlink{struct_foo_a7f3808ca9c6d30b5466b7c2e78cde800}{my\_bar}}\ ==\ \mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}};}
\DoxyCodeLine{00110\ \ \ \ \ \}}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_foo_aa7aee4ff084db38830ff29bb98cbd1b0}{operator==}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{namespace_foo}{Foo}}\ \&lhs,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespace_foo}{Foo}}\ \&\mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}})\ \{}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ lhs.\mbox{\hyperlink{struct_foo_a85f2dd009f3866cb0218cc2cb4e50348}{is\_valid\_or\_zero}}(),\ \ \ \textcolor{stringliteral}{"{}comparing\ invalid\ objects\ ?"{}}\ );}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}}.is\_valid\_or\_zero(),\ \textcolor{stringliteral}{"{}comparing\ invalid\ objects\ ?"{}}\ );}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ lhs.\mbox{\hyperlink{struct_foo_a7f3808ca9c6d30b5466b7c2e78cde800}{my\_bar}}\ ==\ \mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}}.my\_bar;}
\DoxyCodeLine{00115\ \ \ \ \ \}}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_foo_a9394bf5b72d1eeb1b0af928a40308808}{operator<}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{namespace_foo}{Foo}}\ \&lhs,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespace_foo}{Foo}}\ \&\mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}})\ \{}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ lhs.\mbox{\hyperlink{struct_foo_a85f2dd009f3866cb0218cc2cb4e50348}{is\_valid\_or\_zero}}(),\ \ \ \textcolor{stringliteral}{"{}comparing\ invalid\ objects\ ?"{}}\ );}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}}.is\_valid\_or\_zero(),\ \textcolor{stringliteral}{"{}comparing\ invalid\ objects\ ?"{}}\ );}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ lhs.\mbox{\hyperlink{struct_foo_a7f3808ca9c6d30b5466b7c2e78cde800}{my\_bar}}\ <\ \mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}}.my\_bar;}
\DoxyCodeLine{00120\ \ \ \ \ \}}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_foo_a0af5b34e730a5eeb2ac52a64f85f5dfd}{is\_const}}()\textcolor{keyword}{\ const\ }\{\textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\}}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_foo_a2c236bbbc4f98ff079f595200e1cf393}{is\_const}}()\ \{\textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\}}
\DoxyCodeLine{00123\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{struct_foo_a04a9e98be444e478de473945fa787a0a}{reserve}}[1];}
\DoxyCodeLine{00125\ \ \ \ \ \mbox{\hyperlink{namespace_foo}{Foo}}\&\ \mbox{\hyperlink{struct_foo_a3ef94baabf34222bd9254c418a3f4d27}{operator=}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespace_foo}{Foo}}\&\ \mbox{\hyperlink{offscreen_8c_a5fd331c99e778f04762be6d8173eb4d2}{x}}\ )\ \{}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_harness_1_1_state_trackable_af8753f5bdeeedce3cf0e6a3f8192a849}{StateTrackable::operator=}}(\mbox{\hyperlink{offscreen_8c_a5fd331c99e778f04762be6d8173eb4d2}{x}});}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_foo_a7f3808ca9c6d30b5466b7c2e78cde800}{my\_bar}}\ =\ \mbox{\hyperlink{offscreen_8c_a5fd331c99e778f04762be6d8173eb4d2}{x}}.my\_bar;}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00129\ \ \ \ \ \}}
\DoxyCodeLine{00130\ \textcolor{preprocessor}{\#if\ \_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT}}
\DoxyCodeLine{00131\ \ \ \ \ \mbox{\hyperlink{namespace_foo}{Foo}}\&\ operator=(\ \mbox{\hyperlink{namespace_foo}{Foo}}\&\&\ \mbox{\hyperlink{offscreen_8c_a5fd331c99e778f04762be6d8173eb4d2}{x}}\ )\ \{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ \mbox{\hyperlink{offscreen_8c_a5fd331c99e778f04762be6d8173eb4d2}{x}}.is\_valid\_or\_zero(),\ \textcolor{stringliteral}{"{}bad\ source\ for\ assignment"{}}\ );}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\ is\_valid\_or\_zero(),\ \mbox{\hyperlink{eabase_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}\ );}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ StateTrackable::operator=(std::move(\mbox{\hyperlink{offscreen_8c_a5fd331c99e778f04762be6d8173eb4d2}{x}}));}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ my\_bar\ =\ \mbox{\hyperlink{offscreen_8c_a5fd331c99e778f04762be6d8173eb4d2}{x}}.my\_bar;}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{offscreen_8c_a5fd331c99e778f04762be6d8173eb4d2}{x}}.my\_bar\ =\ -\/1;}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00138\ \ \ \ \ \}}
\DoxyCodeLine{00139\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00140\ \};}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{class_foo_with_assign}{FooWithAssign}}:\ \textcolor{keyword}{public}\ \mbox{\hyperlink{namespace_foo}{Foo}}\ \{}
\DoxyCodeLine{00143\ \ \ \ \ \mbox{\hyperlink{class_foo_with_assign_a23ab2cb8515ed12b318f59a2dd9e2ffc}{FooWithAssign}}()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{namespace_foo}{Foo}}()\{\}}
\DoxyCodeLine{00144\ \ \ \ \ \mbox{\hyperlink{class_foo_with_assign_a33d3fab96956a246ebc60a2723241ec6}{FooWithAssign}}(intptr\_t\ barr)\ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{namespace_foo}{Foo}}(barr)\{\}}
\DoxyCodeLine{00145\ \ \ \ \ \mbox{\hyperlink{class_foo_with_assign_a353a5c19759e18045a4c31ef62022c56}{FooWithAssign}}(\mbox{\hyperlink{class_foo_with_assign_a23ab2cb8515ed12b318f59a2dd9e2ffc}{FooWithAssign}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\ :\ \mbox{\hyperlink{namespace_foo}{Foo}}(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\ \{\}}
\DoxyCodeLine{00146\ \ \ \ \ \mbox{\hyperlink{class_foo_with_assign_a23ab2cb8515ed12b318f59a2dd9e2ffc}{FooWithAssign}}\&\ \mbox{\hyperlink{class_foo_with_assign_a9ce624e9f4540304babc87f62be6a1fc}{operator=}}(\mbox{\hyperlink{class_foo_with_assign_a23ab2cb8515ed12b318f59a2dd9e2ffc}{FooWithAssign}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\ \{\ \textcolor{keywordflow}{return}\ \ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_foo_with_assign_a23ab2cb8515ed12b318f59a2dd9e2ffc}{FooWithAssign}}\&\textcolor{keyword}{>}(\mbox{\hyperlink{struct_foo_a507bada3083d138fcf6e30477eae1559}{Foo::operator=}}(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}));\ \}}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \textcolor{preprocessor}{\#if\ \_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT}}
\DoxyCodeLine{00150\ \ \ \ \ \mbox{\hyperlink{class_foo_with_assign_a23ab2cb8515ed12b318f59a2dd9e2ffc}{FooWithAssign}}(\mbox{\hyperlink{class_foo_with_assign}{FooWithAssign}}\ \&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\ \ \ \ \ \ \ :\ \mbox{\hyperlink{namespace_foo}{Foo}}(\mbox{\hyperlink{namespacestd}{std}}::move(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}))\ \{\}}
\DoxyCodeLine{00151\ \ \ \ \ \mbox{\hyperlink{class_foo_with_assign_a23ab2cb8515ed12b318f59a2dd9e2ffc}{FooWithAssign}}\&\ \mbox{\hyperlink{class_foo_with_assign_a670e6a752dd0e0f8f1d40fc6b2f40500}{operator=}}(\mbox{\hyperlink{class_foo_with_assign_a23ab2cb8515ed12b318f59a2dd9e2ffc}{FooWithAssign}}\ \&\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\ \{\ \textcolor{keywordflow}{return}\ \ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_foo_with_assign_a23ab2cb8515ed12b318f59a2dd9e2ffc}{FooWithAssign}}\&\textcolor{keyword}{>}(\mbox{\hyperlink{struct_foo_a507bada3083d138fcf6e30477eae1559}{Foo::operator=}}(std::move(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})));\ \}}
\DoxyCodeLine{00152\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00153\ \};}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ FooIteratorType>}
\DoxyCodeLine{00156\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_foo_iterator_base_af65b3e448bd0bba2670e4d5f7b35109a}{FooIteratorBase}}\ \{}
\DoxyCodeLine{00157\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00158\ \ \ \ \ intptr\_t\ \mbox{\hyperlink{class_foo_iterator_base_a8df7a41b3a2f80df659cf661e66f635f}{x\_bar}};}
\DoxyCodeLine{00159\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00160\ \ \ \ \ FooIteratorType\&\ \mbox{\hyperlink{class_foo_iterator_base_a6944ce80075bbaf4cf7dd9ea8ed97918}{as\_derived}}()\{\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{static\_cast<}FooIteratorType*\textcolor{keyword}{>}(\textcolor{keyword}{this});\}}
\DoxyCodeLine{00161\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00162\ \ \ \ \ \mbox{\hyperlink{class_foo_iterator_base_af65b3e448bd0bba2670e4d5f7b35109a}{FooIteratorBase}}(intptr\_t\ \mbox{\hyperlink{offscreen_8c_a5fd331c99e778f04762be6d8173eb4d2}{x}})\ \{}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_foo_iterator_base_a8df7a41b3a2f80df659cf661e66f635f}{x\_bar}}\ =\ \mbox{\hyperlink{offscreen_8c_a5fd331c99e778f04762be6d8173eb4d2}{x}};}
\DoxyCodeLine{00164\ \ \ \ \ \}}
\DoxyCodeLine{00165\ \ \ \ \ FooIteratorType\ \&\mbox{\hyperlink{class_foo_iterator_base_a062d1df0812d58ef59bcecd0e235a4df}{operator++}}()\ \{}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_foo_iterator_base_a8df7a41b3a2f80df659cf661e66f635f}{x\_bar}}++;\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_foo_iterator_base_a6944ce80075bbaf4cf7dd9ea8ed97918}{as\_derived}}();}
\DoxyCodeLine{00167\ \ \ \ \ \}}
\DoxyCodeLine{00168\ \ \ \ \ FooIteratorType\ \mbox{\hyperlink{class_foo_iterator_base_ad5b9fefb2105c547f68261f139feb93c}{operator++}}(\textcolor{keywordtype}{int})\ \{}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ FooIteratorType\ tmp(\mbox{\hyperlink{class_foo_iterator_base_a6944ce80075bbaf4cf7dd9ea8ed97918}{as\_derived}}());\ \mbox{\hyperlink{class_foo_iterator_base_a8df7a41b3a2f80df659cf661e66f635f}{x\_bar}}++;\ \textcolor{keywordflow}{return}\ tmp;}
\DoxyCodeLine{00170\ \ \ \ \ \}}
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_foo_iterator_base_a55c91277f321d856f10c93136125f57d}{operator==}}(\textcolor{keyword}{const}\ FooIteratorType\ \&\ lhs,\ \textcolor{keyword}{const}\ FooIteratorType\ \&\ \mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}})\{\ \textcolor{keywordflow}{return}\ lhs.x\_bar\ ==\ \mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}}.x\_bar;\ \}}
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_foo_iterator_base_ae917c65b4225e3b8529bb80224f221d2}{operator!=}}(\textcolor{keyword}{const}\ FooIteratorType\ \&\ lhs,\ \textcolor{keyword}{const}\ FooIteratorType\ \&\ \mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}})\{\ \textcolor{keywordflow}{return}\ !(lhs\ ==\ \mbox{\hyperlink{poisson_8cpp_a38c677f5cc4e47bc7505aef707c1bb83}{rhs}});\ \}}
\DoxyCodeLine{00173\ \};}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_foo_iterator_a1ae3a6f65920fd9620da6f6c6bca4d8c}{FooIterator}}:\ \textcolor{keyword}{public}\ std::iterator<std::input\_iterator\_tag,FooWithAssign>,\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_foo_iterator_base_af65b3e448bd0bba2670e4d5f7b35109a}{FooIteratorBase}}<FooIterator>\ \{}
\DoxyCodeLine{00176\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00177\ \ \ \ \ \mbox{\hyperlink{class_foo_iterator_a1ae3a6f65920fd9620da6f6c6bca4d8c}{FooIterator}}(intptr\_t\ \mbox{\hyperlink{offscreen_8c_a5fd331c99e778f04762be6d8173eb4d2}{x}}):\ \mbox{\hyperlink{class_foo_iterator_base_af65b3e448bd0bba2670e4d5f7b35109a}{FooIteratorBase}}<\mbox{\hyperlink{class_foo_iterator_a1ae3a6f65920fd9620da6f6c6bca4d8c}{FooIterator}}>(\mbox{\hyperlink{offscreen_8c_a5fd331c99e778f04762be6d8173eb4d2}{x}})\ \{\}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \ \ \mbox{\hyperlink{class_foo_with_assign}{FooWithAssign}}\ \mbox{\hyperlink{class_foo_iterator_a4d7a65e2d8b2835d459e15ad3770c8ed}{operator*}}()\ \{}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_foo_with_assign}{FooWithAssign}}(\mbox{\hyperlink{class_foo_iterator_base_a8df7a41b3a2f80df659cf661e66f635f}{x\_bar}});}
\DoxyCodeLine{00181\ \ \ \ \ \}}
\DoxyCodeLine{00182\ \};}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_foo_pair_iterator_af08bd73251d8c6f84f27e27f3a8505d1}{FooPairIterator}}:\ \textcolor{keyword}{public}\ std::iterator<std::input\_iterator\_tag,\ std::pair<FooWithAssign,FooWithAssign>\ >,\ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_foo_iterator_base_af65b3e448bd0bba2670e4d5f7b35109a}{FooIteratorBase}}<FooPairIterator>\ \{}
\DoxyCodeLine{00185\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00186\ \ \ \ \ \mbox{\hyperlink{class_foo_pair_iterator_af08bd73251d8c6f84f27e27f3a8505d1}{FooPairIterator}}(intptr\_t\ \mbox{\hyperlink{offscreen_8c_a5fd331c99e778f04762be6d8173eb4d2}{x}}):\ \mbox{\hyperlink{class_foo_iterator_base_af65b3e448bd0bba2670e4d5f7b35109a}{FooIteratorBase}}<\mbox{\hyperlink{class_foo_pair_iterator_af08bd73251d8c6f84f27e27f3a8505d1}{FooPairIterator}}>(\mbox{\hyperlink{offscreen_8c_a5fd331c99e778f04762be6d8173eb4d2}{x}})\ \{\}}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \ \ \ \ std::pair<FooWithAssign,FooWithAssign>\ \mbox{\hyperlink{class_foo_pair_iterator_aa43e160fdcb8c9ef47af6e6183a7d286}{operator*}}()\ \{}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_foo_with_assign}{FooWithAssign}}\ \mbox{\hyperlink{block__nonconst__ctor__on__const__xpr__0_8cpp_ad0f03c4a45448943d9296982de4d6269}{foo}};\ \mbox{\hyperlink{block__nonconst__ctor__on__const__xpr__0_8cpp_ad0f03c4a45448943d9296982de4d6269}{foo}}.bar()\ =\ \mbox{\hyperlink{class_foo_iterator_base_a8df7a41b3a2f80df659cf661e66f635f}{x\_bar}};}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::make\_pair(\mbox{\hyperlink{block__nonconst__ctor__on__const__xpr__0_8cpp_ad0f03c4a45448943d9296982de4d6269}{foo}},\ \mbox{\hyperlink{block__nonconst__ctor__on__const__xpr__0_8cpp_ad0f03c4a45448943d9296982de4d6269}{foo}});}
\DoxyCodeLine{00192\ \ \ \ \ \}}
\DoxyCodeLine{00193\ \};}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_foo_tests}{FooTests}}\{}
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Foo\_type>}
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_foo_tests_ab225453c8a96c7cdab2052c03037bc5b}{TestDefaultConstructor}}()\{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ Foo\_type\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}};}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.state\ ==\ Foo::DefaultInitialized,\ \textcolor{stringliteral}{"{}incorrect\ state\ for\ default\ constructed\ Foo\ (derived)\ ?"{}});}
\DoxyCodeLine{00200\ \ \ \ \ \}}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Foo\_type>}
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_foo_tests_a8e775848dab915f959fad81dccb7b35c}{TestDirectConstructor}}()\{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ Foo\_type\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}(1);}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.state\ ==\ Foo::DirectInitialized,\ \textcolor{stringliteral}{"{}incorrect\ state\ for\ direct\ constructed\ Foo\ (derived)\ ?"{}});}
\DoxyCodeLine{00206\ \ \ \ \ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Foo\_type>}
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_foo_tests_a32571a77fe4caa4ebc3a2dc47ff69b96}{TestCopyConstructor}}()\{}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ Foo\_type\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}};}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ Foo\_type\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}});}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.state\ ==\ Foo::CopyInitialized,\ \textcolor{stringliteral}{"{}incorrect\ state\ for\ Copy\ constructed\ Foo\ ?"{}});}
\DoxyCodeLine{00213\ \ \ \ \ \}}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Foo\_type>}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_foo_tests_a49fe44f3c7e9f2144cfd4c6eca56a062}{TestAssignOperator}}()\{}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ Foo\_type\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}};}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ Foo\_type\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}};}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}\ =\ (\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}});}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.state\ ==\ Foo::Assigned,\ \textcolor{stringliteral}{"{}incorrect\ state\ for\ Assigned\ Foo\ ?"{}});}
\DoxyCodeLine{00222\ \ \ \ \ \}}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \textcolor{preprocessor}{\#if\ \_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT}}
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Foo\_type>}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keywordtype}{void}\ TestMoveConstructor()\{}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ Foo\_type\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}};}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ Foo\_type\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}(std::move(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}));}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.state\ ==\ Foo::MoveInitialized,\ \textcolor{stringliteral}{"{}incorrect\ state\ for\ Move\ constructed\ Foo\ ?"{}});}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.state\ ==\ Foo::MovedFrom,\ \textcolor{stringliteral}{"{}incorrect\ state\ for\ Move\ from\ \ Foo\ ?"{}});}
\DoxyCodeLine{00231\ \ \ \ \ \}}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Foo\_type>}
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{keywordtype}{void}\ TestMoveAssignOperator()\{}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ Foo\_type\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}};}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ Foo\_type\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}};}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}\ =\ std::move(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}});}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.state\ ==\ Foo::MoveAssigned,\ \textcolor{stringliteral}{"{}incorrect\ state\ for\ Move\ Assigned\ Foo\ ?"{}});}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.state\ ==\ Foo::MovedFrom,\ \textcolor{stringliteral}{"{}incorrect\ state\ for\ Moved\ from\ Foo\ ?"{}});}
\DoxyCodeLine{00241\ \ \ \ \ \}}
\DoxyCodeLine{00242\ \textcolor{preprocessor}{\#if\ TBB\_USE\_EXCEPTIONS}}
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{keywordtype}{void}\ TestMoveConstructorException();}
\DoxyCodeLine{00244\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//TBB\_USE\_EXCEPTIONS}}
\DoxyCodeLine{00245\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT}}
\DoxyCodeLine{00246\ \}}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{test__container__move__support_8h_ab4fd58842f12590336910cd87db1ef39}{TestFoo}}()\{}
\DoxyCodeLine{00249\ \ \ \ \ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespace_foo_tests}{FooTests}};}
\DoxyCodeLine{00250\ \ \ \ \ \mbox{\hyperlink{namespace_foo_tests_ab225453c8a96c7cdab2052c03037bc5b}{TestDefaultConstructor<Foo>}}();}
\DoxyCodeLine{00251\ \ \ \ \ \mbox{\hyperlink{namespace_foo_tests_ab225453c8a96c7cdab2052c03037bc5b}{TestDefaultConstructor<FooWithAssign>}}();}
\DoxyCodeLine{00252\ \ \ \ \ \mbox{\hyperlink{namespace_foo_tests_a8e775848dab915f959fad81dccb7b35c}{TestDirectConstructor<Foo>}}();}
\DoxyCodeLine{00253\ \ \ \ \ \mbox{\hyperlink{namespace_foo_tests_a8e775848dab915f959fad81dccb7b35c}{TestDirectConstructor<FooWithAssign>}}();}
\DoxyCodeLine{00254\ \ \ \ \ \mbox{\hyperlink{namespace_foo_tests_a32571a77fe4caa4ebc3a2dc47ff69b96}{TestCopyConstructor<Foo>}}();}
\DoxyCodeLine{00255\ \ \ \ \ \mbox{\hyperlink{namespace_foo_tests_a32571a77fe4caa4ebc3a2dc47ff69b96}{TestCopyConstructor<FooWithAssign>}}();}
\DoxyCodeLine{00256\ \ \ \ \ \mbox{\hyperlink{namespace_foo_tests_a49fe44f3c7e9f2144cfd4c6eca56a062}{TestAssignOperator<FooWithAssign>}}();}
\DoxyCodeLine{00257\ \textcolor{preprocessor}{\#if\ \_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT}}
\DoxyCodeLine{00258\ \ \ \ \ TestMoveConstructor<Foo>();}
\DoxyCodeLine{00259\ \ \ \ \ TestMoveConstructor<FooWithAssign>();}
\DoxyCodeLine{00260\ \ \ \ \ TestMoveAssignOperator<FooWithAssign>();}
\DoxyCodeLine{00261\ \textcolor{preprocessor}{\#if\ TBB\_USE\_EXCEPTIONS\ \&\&\ !\_\_TBB\_CPP11\_EXCEPTION\_IN\_STATIC\_TEST\_BROKEN}}
\DoxyCodeLine{00262\ \ \ \ \ TestMoveConstructorException();}
\DoxyCodeLine{00263\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//TBB\_USE\_EXCEPTIONS}}
\DoxyCodeLine{00264\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT}}
\DoxyCodeLine{00265\ \}}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \textcolor{comment}{//TODO:\ replace\ \_IN\_TEST\ with\ separately\ defined\ macro\ IN\_TEST(msg,test\_name)}}
\DoxyCodeLine{00268\ \textcolor{preprocessor}{\#define\ ASSERT\_IN\_TEST(p,message,test\_name)\ ASSERT(p,\ (std::string(test\_name)\ +\ "{}:\ "{}\ +\ message).c\_str());}}
\DoxyCodeLine{00269\ \textcolor{comment}{//TODO:\ move\ to\ harness\_assert}}
\DoxyCodeLine{00270\ \textcolor{preprocessor}{\#define\ ASSERT\_THROWS\_IN\_TEST(expression,\ exception\_type,\ message,\ test\_name)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00271\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ try\{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00272\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ expression;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00273\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ASSERT\_IN\_TEST(false,\ "{}should\ throw\ an\ exception"{},\ test\_name);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00274\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}catch(exception\_type\ \&)\{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00275\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}catch(...)\{ASSERT\_IN\_TEST(false,\ "{}unexpected\ exception"{},\ test\_name);\}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00276\ \textcolor{preprocessor}{}}
\DoxyCodeLine{00277\ \textcolor{preprocessor}{\#define\ ASSERT\_THROWS(expression,\ exception\_type,\ message)\ \ ASSERT\_THROWS\_IN\_TEST(expression,\ exception\_type,\ message,\ "{}"{})}}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \textcolor{keyword}{template}<Harness::StateTrackableBase::StateValue\ desired\_state,\ \textcolor{keywordtype}{bool}\ allow\_zero\_initialized\_state>}
\DoxyCodeLine{00280\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{test__container__move__support_8h_af07082eea0b73a29c2cec3ad46b70344}{is\_state}}(\mbox{\hyperlink{struct_harness_1_1_state_trackable}{Harness::StateTrackable<allow\_zero\_initialized\_state>}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}}.state\ ==\ desired\_state;\}}
\DoxyCodeLine{00281\ }
\DoxyCodeLine{00282\ \textcolor{keyword}{template}<Harness::StateTrackableBase::StateValue\ desired\_state>}
\DoxyCodeLine{00283\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structis__not__state__f}{is\_not\_state\_f}}\ \{}
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ allow\_zero\_initialized\_state>}
\DoxyCodeLine{00285\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structis__not__state__f_ad7cb7e76f141861c29a90eb0de3ccf4c}{operator()}}(\mbox{\hyperlink{struct_harness_1_1_state_trackable}{Harness::StateTrackable<allow\_zero\_initialized\_state>}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\{\ \textcolor{keywordflow}{return}\ !\mbox{\hyperlink{test__container__move__support_8h_af07082eea0b73a29c2cec3ad46b70344}{is\_state<desired\_state>}}(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});\}}
\DoxyCodeLine{00286\ \};}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \textcolor{keyword}{template}<Harness::StateTrackableBase::StateValue\ desired\_state>}
\DoxyCodeLine{00289\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structis__state__f}{is\_state\_f}}\ \{}
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ allow\_zero\_initialized\_state>}
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structis__state__f_af5fb1bbfabb43af098b72bd659217be6}{operator()}}(\mbox{\hyperlink{struct_harness_1_1_state_trackable}{Harness::StateTrackable<allow\_zero\_initialized\_state>}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}})\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{test__container__move__support_8h_af07082eea0b73a29c2cec3ad46b70344}{is\_state<desired\_state>}}(\mbox{\hyperlink{cxx11__tensor__map_8cpp_a7f507fea02198f6cb81c86640c7b1a4e}{f}});\ \}}
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{comment}{//TODO:\ cu\_map\ defines\ key\ as\ a\ const\ thus\ by\ default\ it\ is\ not\ moved,\ instead\ it\ is\ copied.\ Investigate\ how\ std::unordered\_map\ behaves}}
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T1,\ \textcolor{keyword}{typename}\ T2>}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structis__state__f_a4a2d19a7e2617d67b8b672c9aec50926}{operator()}}(std::pair<T1,\ T2>\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})\{\ \textcolor{keywordflow}{return}\ \textcolor{comment}{/*is\_state<desired\_state>(p.first)\ \&\&\ */}\mbox{\hyperlink{test__container__move__support_8h_af07082eea0b73a29c2cec3ad46b70344}{is\_state<desired\_state>}}(\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}.second);\ \}}
\DoxyCodeLine{00295\ \};}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ iterator,\ \textcolor{keyword}{typename}\ unary\_predicate>}
\DoxyCodeLine{00298\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{test__container__move__support_8h_a4c146b974f38f6dd39c7b6adfbc471b1}{all\_of}}(iterator\ \ \mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}},\ iterator\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}},\ unary\_predicate\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})\{}
\DoxyCodeLine{00299\ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ \mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}}\ !=\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}};\ ++\mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}})\{}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !\mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}(*\mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}}))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00301\ \ \ \ \ \}}
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00303\ \}}
\DoxyCodeLine{00304\ }
\DoxyCodeLine{00305\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ container,\ \textcolor{keyword}{typename}\ unary\_predicate>}
\DoxyCodeLine{00306\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{test__container__move__support_8h_a4c146b974f38f6dd39c7b6adfbc471b1}{all\_of}}(container\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}},\ unary\_predicate\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}})\{}
\DoxyCodeLine{00307\ \ \ \ \ return\ ::all\_of(\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}.begin(),\ \mbox{\hyperlink{bench_vec_add_8cpp_a41689956983587b085f9da3e48f31d99}{c}}.end(),\ \mbox{\hyperlink{main-override_8cpp_a117104b82864d3b23ec174af6d392709}{p}}\ );}
\DoxyCodeLine{00308\ \}}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{test__container__move__support_8h_a04d45b1e95e506843113e731d8ee34ac}{TestAllOf}}()\{}
\DoxyCodeLine{00311\ \ \ \ \ \mbox{\hyperlink{namespace_foo}{Foo}}\ foos[]\ =\ \{\mbox{\hyperlink{namespace_foo}{Foo}}(),\ \mbox{\hyperlink{namespace_foo}{Foo}}(),\ \mbox{\hyperlink{namespace_foo}{Foo}}()\};}
\DoxyCodeLine{00312\ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\mbox{\hyperlink{test__container__move__support_8h_a4c146b974f38f6dd39c7b6adfbc471b1}{::all\_of}}(foos,\ \mbox{\hyperlink{namespace_harness_ab1be15de63e4c94f6f879c6ef290f4a5}{Harness::end}}(foos),\ \mbox{\hyperlink{structis__state__f}{is\_state\_f<Foo::DefaultInitialized>}}()),\ \textcolor{stringliteral}{"{}all\_of\ returned\ false\ while\ true\ expected"{}});}
\DoxyCodeLine{00313\ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(!\ \mbox{\hyperlink{test__container__move__support_8h_a4c146b974f38f6dd39c7b6adfbc471b1}{::all\_of}}(foos,\ \mbox{\hyperlink{namespace_harness_ab1be15de63e4c94f6f879c6ef290f4a5}{Harness::end}}(foos),\ \mbox{\hyperlink{structis__state__f}{is\_state\_f<Foo::CopyInitialized>}}()),\ \textcolor{stringliteral}{"{}all\_of\ returned\ true\ while\ false\ expected\ \ "{}});}
\DoxyCodeLine{00314\ \}}
\DoxyCodeLine{00315\ }
\DoxyCodeLine{00316\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ static\_counter\_allocator\_type>}
\DoxyCodeLine{00317\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtrack__allocator__memory_a67f513a5b53044cdf42e5e275e5ed380}{track\_allocator\_memory}}:\ \mbox{\hyperlink{class_no_copy_a495bdeffea1eda9d33e338e5b5cd2313}{NoCopy}}\{}
\DoxyCodeLine{00318\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ static\_counter\_allocator\_type::counters\_t\ \mbox{\hyperlink{structtrack__allocator__memory_af1f08aa48ec596616909e1ca32d5fe26}{counters\_t}};}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00320\ \ \ \ \ \mbox{\hyperlink{structtrack__allocator__memory_af1f08aa48ec596616909e1ca32d5fe26}{counters\_t}}\ \mbox{\hyperlink{structtrack__allocator__memory_a93b29e464cee5a5f26be2eba5452da0e}{previous\_state}};}
\DoxyCodeLine{00321\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structtrack__allocator__memory_ab0b1b324bb7d2a357ef33c04cbad36c9}{test\_name}};}
\DoxyCodeLine{00322\ \ \ \ \ \mbox{\hyperlink{structtrack__allocator__memory_a67f513a5b53044cdf42e5e275e5ed380}{track\_allocator\_memory}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ a\_test\_name):\ \mbox{\hyperlink{structtrack__allocator__memory_ab0b1b324bb7d2a357ef33c04cbad36c9}{test\_name}}(a\_test\_name)\ \{\ static\_counter\_allocator\_type::init\_counters();\ \}}
\DoxyCodeLine{00323\ \ \ \ \ \mbox{\hyperlink{structtrack__allocator__memory_a6ef3fcbffe15d0ce2bede4ce2eba79be}{\string~track\_allocator\_memory}}()\{\mbox{\hyperlink{structtrack__allocator__memory_a1235634dd66ba70727560a2f579118ca}{verify\_no\_allocator\_memory\_leaks}}();\}}
\DoxyCodeLine{00324\ }
\DoxyCodeLine{00325\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structtrack__allocator__memory_a1235634dd66ba70727560a2f579118ca}{verify\_no\_allocator\_memory\_leaks}}()\textcolor{keyword}{\ const}\{}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(\ static\_counter\_allocator\_type::items\_allocated\ ==\ static\_counter\_allocator\_type::items\_freed,\ \textcolor{stringliteral}{"{}memory\ leak?"{}},\ \mbox{\hyperlink{structtrack__allocator__memory_ab0b1b324bb7d2a357ef33c04cbad36c9}{test\_name}}\ );}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(\ static\_counter\_allocator\_type::allocations\ ==\ static\_counter\_allocator\_type::frees,\ \textcolor{stringliteral}{"{}memory\ leak?"{}},\ \mbox{\hyperlink{structtrack__allocator__memory_ab0b1b324bb7d2a357ef33c04cbad36c9}{test\_name}}\ );}
\DoxyCodeLine{00328\ \ \ \ \ \}}
\DoxyCodeLine{00329\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structtrack__allocator__memory_a4fa2cb1facf8b0d36b5608e5cba261fc}{save\_allocator\_counters}}()\{\ \mbox{\hyperlink{structtrack__allocator__memory_a93b29e464cee5a5f26be2eba5452da0e}{previous\_state}}\ =\ static\_counter\_allocator\_type::counters();\ \}}
\DoxyCodeLine{00330\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structtrack__allocator__memory_add23154b88fc1600298a64143ad79b52}{verify\_no\_more\_than\_x\_memory\_items\_allocated}}(\textcolor{keywordtype}{size\_t}\ \ expected\_number\_of\_items\_to\_allocate)\{}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtrack__allocator__memory_af1f08aa48ec596616909e1ca32d5fe26}{counters\_t}}\ now\ =\ static\_counter\_allocator\_type::counters();}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(\ (now.items\_allocated\ -\/\ \mbox{\hyperlink{structtrack__allocator__memory_a93b29e464cee5a5f26be2eba5452da0e}{previous\_state}}.items\_allocated)\ <=\ expected\_number\_of\_items\_to\_allocate,\ \textcolor{stringliteral}{"{}More\ then\ excepted\ memory\ allocated\ ?"{}},\ \mbox{\hyperlink{structtrack__allocator__memory_ab0b1b324bb7d2a357ef33c04cbad36c9}{test\_name}}\ );}
\DoxyCodeLine{00333\ \ \ \ \ \}}
\DoxyCodeLine{00334\ \};}
\DoxyCodeLine{00335\ }
\DoxyCodeLine{00336\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00337\ \textcolor{keyword}{template}<\textcolor{keywordtype}{int}\ line\_n>}
\DoxyCodeLine{00338\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtrack__foo__count_a3ceec1e913fd76ae6da8a1ed197aacba}{track\_foo\_count}}:\ \mbox{\hyperlink{class_no_copy_a495bdeffea1eda9d33e338e5b5cd2313}{NoCopy}}\{}
\DoxyCodeLine{00339\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structtrack__foo__count_ae4c629aacb39c4e5b9e7d536cb4aedd0}{active}};}
\DoxyCodeLine{00340\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structtrack__foo__count_a25acafd2a249582661c1471e026cead6}{previous\_state}};}
\DoxyCodeLine{00341\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structtrack__foo__count_a55f68574981ddd219e83967dcf699e96}{test\_name}};}
\DoxyCodeLine{00342\ \ \ \ \ \mbox{\hyperlink{structtrack__foo__count_a3ceec1e913fd76ae6da8a1ed197aacba}{track\_foo\_count}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ a\_test\_name):\ \mbox{\hyperlink{structtrack__foo__count_ae4c629aacb39c4e5b9e7d536cb4aedd0}{active}}(\mbox{\hyperlink{yyjson_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}}),\ \mbox{\hyperlink{structtrack__foo__count_a25acafd2a249582661c1471e026cead6}{previous\_state}}(\mbox{\hyperlink{test__container__move__support_8h_af6db0b4a8450edd99d1f8ec217f98f1f}{FooCount}}),\ \mbox{\hyperlink{structtrack__foo__count_a55f68574981ddd219e83967dcf699e96}{test\_name}}(a\_test\_name)\ \{\ \}}
\DoxyCodeLine{00343\ \ \ \ \ \mbox{\hyperlink{structtrack__foo__count_a98311de69f13498849dadfbe6e74fa96}{\string~track\_foo\_count}}()\{}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structtrack__foo__count_ae4c629aacb39c4e5b9e7d536cb4aedd0}{active}})\{}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{structtrack__foo__count_ab1411767cc86657985ef9e4513ba060d}{verify\_no\_undestroyed\_foo\_left\_and\_dismiss}}();}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00347\ \ \ \ \ \}}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{comment}{//TODO:\ ideally\ in\ most\ places\ this\ check\ should\ be\ replaced\ with\ "{}no\ foo\ created\ or\ destroyed"{}}}
\DoxyCodeLine{00350\ \ \ \ \ \textcolor{comment}{//TODO:\ deactivation\ of\ the\ check\ seems\ like\ a\ hack}}
\DoxyCodeLine{00351\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structtrack__foo__count_ab1411767cc86657985ef9e4513ba060d}{verify\_no\_undestroyed\_foo\_left\_and\_dismiss}}()\ \{}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(\ \mbox{\hyperlink{test__container__move__support_8h_af6db0b4a8450edd99d1f8ec217f98f1f}{FooCount}}\ ==\ \mbox{\hyperlink{structtrack__foo__count_a25acafd2a249582661c1471e026cead6}{previous\_state}},\ \textcolor{stringliteral}{"{}Some\ instances\ of\ Foo\ were\ not\ destroyed\ ?"{}},\ \mbox{\hyperlink{structtrack__foo__count_a55f68574981ddd219e83967dcf699e96}{test\_name}}\ );}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtrack__foo__count_ae4c629aacb39c4e5b9e7d536cb4aedd0}{active}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00354\ \ \ \ \ \}}
\DoxyCodeLine{00355\ \};}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00357\ \textcolor{comment}{//TODO:\ inactive\ mode\ in\ these\ limiters\ is\ a\ temporary\ workaround\ for\ usage\ in\ exception\ type\ loop\ of\ TestException}}
\DoxyCodeLine{00358\ }
\DoxyCodeLine{00359\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structlimit__foo__count__in__scope_ac1b6b6bb132155b272f016b6f88c17bd}{limit\_foo\_count\_in\_scope}}:\ \mbox{\hyperlink{class_no_copy_a495bdeffea1eda9d33e338e5b5cd2313}{NoCopy}}\{}
\DoxyCodeLine{00360\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structlimit__foo__count__in__scope_a4e189bd9599f84d1f95dccc38f1912fc}{previous\_state}};}
\DoxyCodeLine{00361\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structlimit__foo__count__in__scope_a09afdada9a35d105ace131dc48a17806}{active}};}
\DoxyCodeLine{00362\ \ \ \ \ \mbox{\hyperlink{structlimit__foo__count__in__scope_ac1b6b6bb132155b272f016b6f88c17bd}{limit\_foo\_count\_in\_scope}}(\textcolor{keywordtype}{size\_t}\ new\_limit,\ \textcolor{keywordtype}{bool}\ an\_active\ =\ \textcolor{keyword}{true}):\ \mbox{\hyperlink{structlimit__foo__count__in__scope_a4e189bd9599f84d1f95dccc38f1912fc}{previous\_state}}(\mbox{\hyperlink{test__container__move__support_8h_a8df4424af58d95cf34e9050ed4107b39}{MaxFooCount}}),\ \mbox{\hyperlink{structlimit__foo__count__in__scope_a09afdada9a35d105ace131dc48a17806}{active}}(an\_active)\ \{}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structlimit__foo__count__in__scope_a09afdada9a35d105ace131dc48a17806}{active}})\{}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a8df4424af58d95cf34e9050ed4107b39}{MaxFooCount}}\ =\ new\_limit;}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00366\ \ \ \ \ \}}
\DoxyCodeLine{00367\ \ \ \ \ \mbox{\hyperlink{structlimit__foo__count__in__scope_ae9e07ef7b2111f348de0ece8bff8e302}{\string~limit\_foo\_count\_in\_scope}}()\{}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structlimit__foo__count__in__scope_a09afdada9a35d105ace131dc48a17806}{active}})\ \{}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a8df4424af58d95cf34e9050ed4107b39}{MaxFooCount}}\ =\ \mbox{\hyperlink{structlimit__foo__count__in__scope_a4e189bd9599f84d1f95dccc38f1912fc}{previous\_state}};}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00371\ \ \ \ \ \}}
\DoxyCodeLine{00372\ \};}
\DoxyCodeLine{00373\ }
\DoxyCodeLine{00374\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ static\_counter\_allocator\_type>}
\DoxyCodeLine{00375\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structlimit__allocated__items__in__scope_aa532b3f74ac27b65912f1db5ce6570f6}{limit\_allocated\_items\_in\_scope}}:\ \mbox{\hyperlink{class_no_copy_a495bdeffea1eda9d33e338e5b5cd2313}{NoCopy}}\{}
\DoxyCodeLine{00376\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structlimit__allocated__items__in__scope_a821a570a778a5016935f6f82591afe1d}{previous\_state}};}
\DoxyCodeLine{00377\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structlimit__allocated__items__in__scope_aaa19a03e475fd408d2dce62b65e3c062}{active}};}
\DoxyCodeLine{00378\ \ \ \ \ \mbox{\hyperlink{structlimit__allocated__items__in__scope_aa532b3f74ac27b65912f1db5ce6570f6}{limit\_allocated\_items\_in\_scope}}(\textcolor{keywordtype}{size\_t}\ new\_limit,\ \textcolor{keywordtype}{bool}\ an\_active\ =\ \textcolor{keyword}{true})\ :\ \mbox{\hyperlink{structlimit__allocated__items__in__scope_a821a570a778a5016935f6f82591afe1d}{previous\_state}}(static\_counter\_allocator\_type::\mbox{\hyperlink{harness__allocator_8h_a808ff7e476907ab66dd50eb462d63e61}{max\_items}}),\ \mbox{\hyperlink{structlimit__allocated__items__in__scope_aaa19a03e475fd408d2dce62b65e3c062}{active}}(an\_active)\ \ \{}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structlimit__allocated__items__in__scope_aaa19a03e475fd408d2dce62b65e3c062}{active}})\{}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ static\_counter\_allocator\_type::set\_limits(new\_limit);}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00382\ \ \ \ \ \}}
\DoxyCodeLine{00383\ \ \ \ \ \mbox{\hyperlink{structlimit__allocated__items__in__scope_a30aede323a8a6754eac8cb46f7258298}{\string~limit\_allocated\_items\_in\_scope}}()\{}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structlimit__allocated__items__in__scope_aaa19a03e475fd408d2dce62b65e3c062}{active}})\ \{}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ static\_counter\_allocator\_type::set\_limits(\mbox{\hyperlink{structlimit__allocated__items__in__scope_a821a570a778a5016935f6f82591afe1d}{previous\_state}});}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00387\ \ \ \ \ \}}
\DoxyCodeLine{00388\ \};}
\DoxyCodeLine{00389\ }
\DoxyCodeLine{00390\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdefault__container__traits}{default\_container\_traits}}\{}
\DoxyCodeLine{00391\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ container\_type,\ \textcolor{keyword}{typename}\ iterator\_type>}
\DoxyCodeLine{00392\ \ \ \ \ \textcolor{keyword}{static}\ container\_type\&\ \mbox{\hyperlink{structdefault__container__traits_a4abc4c6f7634a855d4a4d9a5b081be8f}{construct\_container}}(tbb::aligned\_space<container\_type>\ \&\ storage,\ iterator\_type\ \mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}},\ iterator\_type\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}})\{}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ (storage.begin())\ container\_type(\mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}},\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}});}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *storage.begin();}
\DoxyCodeLine{00395\ \ \ \ \ \}}
\DoxyCodeLine{00396\ }
\DoxyCodeLine{00397\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ container\_type,\ \textcolor{keyword}{typename}\ iterator\_type,\ \textcolor{keyword}{typename}\ allocator\_type>}
\DoxyCodeLine{00398\ \ \ \ \ \textcolor{keyword}{static}\ container\_type\&\ \mbox{\hyperlink{structdefault__container__traits_a3497c29fbeaea3f60b6873837362eeeb}{construct\_container}}(tbb::aligned\_space<container\_type>\ \&\ storage,\ iterator\_type\ \mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}},\ iterator\_type\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}},\ allocator\_type\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}})\{}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ (storage.begin())\ container\_type(\mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}},\ \mbox{\hyperlink{ittnotify__static_8h_a30bf4ccd4623b7a8276bbc7f99e491c7}{end}},\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}});}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *storage.begin();}
\DoxyCodeLine{00401\ \ \ \ \ \}}
\DoxyCodeLine{00402\ \};}
\DoxyCodeLine{00403\ }
\DoxyCodeLine{00404\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structmemory__locations_a7821862acd4f9a7bf1b249edf524ec99}{memory\_locations}}\ \{}
\DoxyCodeLine{00405\ \ \ \ \ std::vector<const\ void*>\ \mbox{\hyperlink{structmemory__locations_ae21ad1fa359386cad8083e11f9f3b81e}{locations}};}
\DoxyCodeLine{00406\ }
\DoxyCodeLine{00407\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ container\_type>}
\DoxyCodeLine{00408\ \ \ \ \ \mbox{\hyperlink{structmemory__locations_a7821862acd4f9a7bf1b249edf524ec99}{memory\_locations}}(container\_type\ \textcolor{keyword}{const}\&\ source)\ :\ \mbox{\hyperlink{structmemory__locations_ae21ad1fa359386cad8083e11f9f3b81e}{locations}}(source.\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}())\{}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{typename}\ container\_type::const\_iterator\ it\ =\ source.begin();\ it\ !=\ source.end();\ ++it)\{locations[std::distance(source.begin(),\ it)]\ =\ \&\ *it;\}}
\DoxyCodeLine{00410\ \ \ \ \ \}}
\DoxyCodeLine{00411\ }
\DoxyCodeLine{00412\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ container\_t>}
\DoxyCodeLine{00413\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structmemory__locations_ac509ecba138e9e94a7338fdf89e041c1}{content\_location\_unchanged}}(container\_t\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}})\{}
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }is\_same\_location\{}
\DoxyCodeLine{00415\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ compare(\textcolor{keyword}{typename}\ container\_t::value\_type\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}},\ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ location)\{\ \textcolor{keywordflow}{return}\ \&\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ ==\ location;\}}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00417\ }
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::equal(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.begin(),\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.end(),\ \mbox{\hyperlink{structmemory__locations_ae21ad1fa359386cad8083e11f9f3b81e}{locations}}.begin(),\ \&is\_same\_location::compare);}
\DoxyCodeLine{00419\ \ \ \ \ \}}
\DoxyCodeLine{00420\ }
\DoxyCodeLine{00421\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ container\_t>}
\DoxyCodeLine{00422\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structmemory__locations_a5b51faa95e3bf3751f25362c91290b63}{content\_location\_changed}}(container\_t\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}})\{}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }is\_not\_same\_location\{}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ compare(\textcolor{keyword}{typename}\ container\_t::value\_type\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}},\ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ location)\{\ \textcolor{keywordflow}{return}\ \&\mbox{\hyperlink{_cwise__arg_8cpp_a49bb5a0db288a22a099643d44c5abbd6}{v}}\ !=\ location;\}}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::equal(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.begin(),\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.end(),\ \mbox{\hyperlink{structmemory__locations_ae21ad1fa359386cad8083e11f9f3b81e}{locations}}.begin(),\ \&is\_not\_same\_location::compare);}
\DoxyCodeLine{00428\ \ \ \ \ \}}
\DoxyCodeLine{00429\ }
\DoxyCodeLine{00430\ \};}
\DoxyCodeLine{00431\ }
\DoxyCodeLine{00432\ \textcolor{preprocessor}{\#if\ \_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT}}
\DoxyCodeLine{00433\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00434\ \textcolor{keywordtype}{void}\ TestMemoryLocaionsHelper()\{}
\DoxyCodeLine{00435\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ test\_sequence\_len\ =\ \ 15;}
\DoxyCodeLine{00436\ \ \ \ \ std::vector<char>\ source(test\_sequence\_len,\ 0);}
\DoxyCodeLine{00437\ \ \ \ \ std::generate\_n(source.begin(),\ source.size(),\ \mbox{\hyperlink{class_harness_1_1_fast_random_body}{Harness::FastRandomBody<char>}}(1));}
\DoxyCodeLine{00438\ }
\DoxyCodeLine{00439\ \ \ \ \ \mbox{\hyperlink{structmemory__locations}{memory\_locations}}\ source\_memory\_locations((source));}
\DoxyCodeLine{00440\ }
\DoxyCodeLine{00441\ \ \ \ \ std::vector<char>\ \mbox{\hyperlink{level1__impl_8h_a7ffc26122ca6f9bec01f9bc5e64f3006}{copy}}((source));}
\DoxyCodeLine{00442\ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(source\_memory\_locations.content\_location\_changed(\mbox{\hyperlink{level1__impl_8h_a7ffc26122ca6f9bec01f9bc5e64f3006}{copy}}),\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00443\ }
\DoxyCodeLine{00444\ \ \ \ \ std::vector<char>\ alias(std::move(source));}
\DoxyCodeLine{00445\ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(source\_memory\_locations.content\_location\_unchanged(alias),\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00446\ \}}
\DoxyCodeLine{00447\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_foo_tests}{FooTests}}\{}
\DoxyCodeLine{00448\ \textcolor{preprocessor}{\#if\ TBB\_USE\_EXCEPTIONS}}
\DoxyCodeLine{00449\ \ \ \ \ \textcolor{keywordtype}{void}\ TestMoveConstructorException()\{}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{bug1213_8cpp_add4cd82fef2db3867de22e0c84c750a1aca2a3a2b2da8e517565fb654a86639b6}{Foo}}\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}};}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_harness_1_1_state_trackable_base_ab3e365d64f7e88ee99a418da22c3acbc}{Foo::StateValue}}\ source\_state\_before\ =\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.state;}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a2ebd02b198ec5d4736f97539d515d476}{ASSERT\_THROWS\_IN\_TEST}}(}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ limit\_foo\_count\_in\_scope\ foo\_limit(\mbox{\hyperlink{test__concurrent__vector__v2_8cpp_a405b4a3f2cf6d7b2b1da1df4cd155af9}{FooCount}});}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{bug1213_8cpp_add4cd82fef2db3867de22e0c84c750a1aca2a3a2b2da8e517565fb654a86639b6}{Foo}}\ \mbox{\hyperlink{parallel__graph__pipeline_8cpp_a20ea9116f00e19915f910ca726f7518f}{f1}}(std::move(\mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}));}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \ \ \ \ std::bad\_alloc,\ \textcolor{stringliteral}{"{}"{}},\ \textcolor{stringliteral}{"{}TestLimitInstancesNumber"{}}}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(source\_state\_before\ ==\ \mbox{\hyperlink{shortpath_8cpp_a8648ffe7342bea77e2698690589da3c1}{src}}.state,\ \textcolor{stringliteral}{"{}state\ of\ source\ changed\ while\ should\ not?"{}});}
\DoxyCodeLine{00460\ \ \ \ \ \}}
\DoxyCodeLine{00461\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//TBB\_USE\_EXCEPTIONS}}
\DoxyCodeLine{00462\ \}}
\DoxyCodeLine{00463\ }
\DoxyCodeLine{00464\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ container\_traits,\ \textcolor{keyword}{typename}\ allocator\_t>}
\DoxyCodeLine{00465\ \textcolor{keyword}{struct\ }move\_fixture\ :\ \mbox{\hyperlink{class_no_copy}{NoCopy}}\{}
\DoxyCodeLine{00466\ \ \ \ \ \textcolor{keyword}{typedef}\ \ \textcolor{keyword}{typename}\ allocator\_t::value\_type\ element\_type;}
\DoxyCodeLine{00467\ \ \ \ \ \textcolor{keyword}{typedef}\ \ \textcolor{keyword}{typename}\ container\_traits::\ template\ apply<element\_type,\ allocator\_t>::type\ container\_t;}
\DoxyCodeLine{00468\ \ \ \ \ \textcolor{keyword}{typedef}\ \ \textcolor{keyword}{typename}\ container\_traits::init\_iterator\_type\ init\_iterator\_type;}
\DoxyCodeLine{00469\ \ \ \ \ \textcolor{keyword}{enum}\ \{default\_container\_size\ =\ 100\};}
\DoxyCodeLine{00470\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \ container\_size;}
\DoxyCodeLine{00471\ \ \ \ \ tbb::aligned\_space<container\_t>\ source\_storage;}
\DoxyCodeLine{00472\ \ \ \ \ container\_t\ \&\ source;}
\DoxyCodeLine{00473\ \ \ \ \ \textcolor{comment}{//check\ that\ location\ of\ \_all\_\ elements\ of\ container\ under\ test\ is\ changed/unchanged}}
\DoxyCodeLine{00474\ \ \ \ \ memory\_locations\ locations;}
\DoxyCodeLine{00475\ }
\DoxyCodeLine{00476\ \ \ \ \ \string~move\_fixture()\{}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ source\_storage.begin()-\/>\string~container\_t();}
\DoxyCodeLine{00478\ \ \ \ \ \}}
\DoxyCodeLine{00479\ }
\DoxyCodeLine{00480\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \textcolor{keyword}{const}\ test\_name;}
\DoxyCodeLine{00481\ \ \ \ \ move\_fixture(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ a\_test\_name,\ \textcolor{keywordtype}{size\_t}\ a\_container\_size\ =\ default\_container\_size\ )}
\DoxyCodeLine{00482\ \ \ \ \ :\ \ \ container\_size(a\_container\_size)}
\DoxyCodeLine{00483\ \ \ \ \ ,\ \ \ source(container\_traits::construct\_container(source\_storage,\ init\_iterator\_type(0),\ init\_iterator\_type(container\_size)))}
\DoxyCodeLine{00484\ \ \ \ \ ,\ \ \ locations(source)}
\DoxyCodeLine{00485\ \ \ \ \ ,\ \ \ test\_name(a\_test\_name)}
\DoxyCodeLine{00486\ \ \ \ \ \{}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init}}(\textcolor{stringliteral}{"{}move\_fixture::move\_fixture()"{}});}
\DoxyCodeLine{00488\ \ \ \ \ \}}
\DoxyCodeLine{00489\ }
\DoxyCodeLine{00490\ \ \ \ \ move\_fixture(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ a\_test\_name,\ allocator\_t\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}},\ \textcolor{keywordtype}{size\_t}\ a\_container\_size\ =\ default\_container\_size)}
\DoxyCodeLine{00491\ \ \ \ \ :\ \ \ container\_size(a\_container\_size)}
\DoxyCodeLine{00492\ \ \ \ \ ,\ \ \ source(container\_traits::construct\_container(source\_storage,\ init\_iterator\_type(0),\ init\_iterator\_type(container\_size),\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}))}
\DoxyCodeLine{00493\ \ \ \ \ ,\ \ \ locations(source)}
\DoxyCodeLine{00494\ \ \ \ \ ,\ \ \ test\_name(a\_test\_name)}
\DoxyCodeLine{00495\ \ \ \ \ \{}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init}}(\textcolor{stringliteral}{"{}move\_fixture::move\_fixture(allocator\_t\ const\&\ a)"{}});}
\DoxyCodeLine{00497\ \ \ \ \ \}}
\DoxyCodeLine{00498\ }
\DoxyCodeLine{00499\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{boing_8c_a2858154e2009b0e6e616f313177762bc}{init}}(\textcolor{keyword}{const}\ std::string\&\ ctor\_name)\{}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ verify\_size(source,\ ctor\_name.c\_str());}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ verify\_content\_equal\_to\_source(source,\ \textcolor{stringliteral}{"{}did\ not\ properly\ initialized\ source?\ Or\ can\ not\ check\ container\ for\ equality\ with\ expected\ ?:\ "{}}\ +\ ctor\_name);}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ verify\_size(locations.\mbox{\hyperlink{structmemory__locations_ae21ad1fa359386cad8083e11f9f3b81e}{locations}},\ \textcolor{stringliteral}{"{}move\_fixture:init\ "{}});}
\DoxyCodeLine{00503\ \ \ \ \ \}}
\DoxyCodeLine{00504\ }
\DoxyCodeLine{00505\ \ \ \ \ \textcolor{keywordtype}{bool}\ content\_location\_unchanged(container\_t\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}})\{}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ locations.\mbox{\hyperlink{structmemory__locations_ac509ecba138e9e94a7338fdf89e041c1}{content\_location\_unchanged}}(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}});}
\DoxyCodeLine{00507\ \ \ \ \ \}}
\DoxyCodeLine{00508\ }
\DoxyCodeLine{00509\ \ \ \ \ \textcolor{keywordtype}{bool}\ content\_location\_changed(container\_t\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}})\{}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ locations.\mbox{\hyperlink{structmemory__locations_a5b51faa95e3bf3751f25362c91290b63}{content\_location\_changed}}(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}});}
\DoxyCodeLine{00511\ \ \ \ \ \}}
\DoxyCodeLine{00512\ }
\DoxyCodeLine{00513\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ container\_type>}
\DoxyCodeLine{00514\ \ \ \ \ \textcolor{keywordtype}{void}\ verify\_size(container\_type\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ a\_test\_name)\{}
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(container\_size\ ==\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.size(),\ \textcolor{stringliteral}{"{}Did\ not\ construct\ all\ the\ elements\ or\ allocate\ enough\ memory?,\ while\ should\ ?"{}},\ a\_test\_name);}
\DoxyCodeLine{00516\ \ \ \ \ \}}
\DoxyCodeLine{00517\ }
\DoxyCodeLine{00518\ \ \ \ \ \textcolor{keywordtype}{void}\ verify\_content\_equal\_to\_source(container\_t\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}},\ \textcolor{keyword}{const}\ std::string\&\ msg)\{}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(\ container\_traits::equal(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}},\ init\_iterator\_type(0),\ init\_iterator\_type(container\_size)),\ msg.c\_str(),\ test\_name);}
\DoxyCodeLine{00520\ \ \ \ \ \}}
\DoxyCodeLine{00521\ }
\DoxyCodeLine{00522\ \ \ \ \ \textcolor{keywordtype}{void}\ verify\_content\_equal\_to\_source(container\_t\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}})\{}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ verify\_content\_equal\_to\_source(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}},\ \textcolor{stringliteral}{"{}content\ changed\ during\ move/copy\ ?"{}});}
\DoxyCodeLine{00524\ \ \ \ \ \}}
\DoxyCodeLine{00525\ }
\DoxyCodeLine{00526\ \ \ \ \ \textcolor{keywordtype}{void}\ verify\_content\_equal\_to\_source(container\_t\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}},\ \textcolor{keywordtype}{size\_t}\ number\_of\_constructed\_items)\{}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(number\_of\_constructed\_items\ <=\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.size(),\ \textcolor{stringliteral}{"{}incorrect\ test\ expectation/input\ parameters?"{}},\ test\_name);}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(std::equal(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.begin(),\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.begin()\ +\ number\_of\_constructed\_items,\ init\_iterator\_type(0)),\ \textcolor{stringliteral}{"{}content\ changed\ during\ move/copy\ ?"{}},\ test\_name);}
\DoxyCodeLine{00529\ \ \ \ \ \}}
\DoxyCodeLine{00530\ }
\DoxyCodeLine{00531\ \ \ \ \ \textcolor{comment}{//TODO:\ better\ name\ ?\ e.g.\ "{}content\_was\_stolen"{}}}
\DoxyCodeLine{00532\ \ \ \ \ \textcolor{keywordtype}{void}\ verify\_content\_shallow\_moved(container\_t\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}})\{}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ verify\_size(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}},\ test\_name);}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(content\_location\_unchanged(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}),\ \textcolor{stringliteral}{"{}container\ move\ constructor\ actually\ changed\ element\ locations,\ while\ should\ not"{}},\ test\_name);}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(source.empty(),\ \textcolor{stringliteral}{"{}Moved\ from\ container\ instance\ should\ not\ contain\ any\ elements"{}},\ test\_name);}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ verify\_content\_equal\_to\_source(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}});}
\DoxyCodeLine{00537\ \ \ \ \ \}}
\DoxyCodeLine{00538\ }
\DoxyCodeLine{00539\ \ \ \ \ \textcolor{comment}{//TODO:\ better\ name\ ?\ e.g.\ "{}element\ move"{}}}
\DoxyCodeLine{00540\ \ \ \ \ \textcolor{keywordtype}{void}\ verify\_content\_deep\_moved(container\_t\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}})\{}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ verify\_size(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}},\ test\_name);}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(content\_location\_changed(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}),\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}container\ actually\ did\ not\ changed\ element\ locations\ for\ unequal\ allocators,\ while\ should"{}},\ test\_name);}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(\mbox{\hyperlink{test__container__move__support_8h_a4c146b974f38f6dd39c7b6adfbc471b1}{all\_of}}(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}},\ is\_state\_f<Foo::MoveInitialized>()),\ \textcolor{stringliteral}{"{}container\ did\ not\ move\ construct\ some\ elements?"{}},\ test\_name);}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(\mbox{\hyperlink{test__container__move__support_8h_a4c146b974f38f6dd39c7b6adfbc471b1}{all\_of}}(source,\ is\_state\_f<Foo::MovedFrom>()),\ \ \ \ \textcolor{stringliteral}{"{}container\ did\ not\ move\ all\ the\ elements?"{}},\ test\_name);}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ verify\_content\_equal\_to\_source(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}});}
\DoxyCodeLine{00546\ \ \ \ \ \}}
\DoxyCodeLine{00547\ }
\DoxyCodeLine{00548\ \ \ \ \ \textcolor{keywordtype}{void}\ verify\_part\_of\_content\_deep\_moved(container\_t\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}},\ \textcolor{keywordtype}{size\_t}\ number\_of\_constructed\_items)\{}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(content\_location\_changed(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}),\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Vector\ actually\ did\ not\ changed\ element\ locations\ for\ unequal\ allocators,\ while\ should"{}},\ test\_name);}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(\mbox{\hyperlink{test__container__move__support_8h_a4c146b974f38f6dd39c7b6adfbc471b1}{::all\_of}}(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.begin(),\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.begin()\ +\ number\_of\_constructed\_items,\ is\_state\_f<Foo::MoveInitialized>()),\ \textcolor{stringliteral}{"{}Vector\ did\ not\ move\ construct\ some\ elements?"{}},\ test\_name);}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.size()\ !=\ number\_of\_constructed\_items)\ \{}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(\mbox{\hyperlink{test__container__move__support_8h_a4c146b974f38f6dd39c7b6adfbc471b1}{::all\_of}}(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.begin()\ +\ number\_of\_constructed\_items,\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.end(),\ is\_state\_f<Foo::ZeroInitialized>()),\ \textcolor{stringliteral}{"{}Failed\ to\ zero-\/initialize\ items\ left\ not\ constructed\ after\ the\ exception?"{}},\ test\_name\ );}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00554\ \ \ \ \ \ \ \ \ verify\_content\_equal\_to\_source(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}},\ number\_of\_constructed\_items);}
\DoxyCodeLine{00555\ }
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(\mbox{\hyperlink{test__container__move__support_8h_a4c146b974f38f6dd39c7b6adfbc471b1}{::all\_of}}(source.begin(),\ source.begin()\ +\ number\_of\_constructed\_items,\ is\_state\_f<Foo::MovedFrom>()),\ \ \textcolor{stringliteral}{"{}Vector\ did\ not\ move\ all\ the\ elements?"{}},\ test\_name);}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(\mbox{\hyperlink{test__container__move__support_8h_a4c146b974f38f6dd39c7b6adfbc471b1}{::all\_of}}(source.begin()\ +\ number\_of\_constructed\_items,\ source.end(),\ is\_not\_state\_f<Foo::MovedFrom>()),\ \ \textcolor{stringliteral}{"{}Vector\ changed\ elements\ in\ source\ after\ exception\ point?"{}},\ test\_name);}
\DoxyCodeLine{00558\ \ \ \ \ \}}
\DoxyCodeLine{00559\ \};}
\DoxyCodeLine{00560\ }
\DoxyCodeLine{00561\ }
\DoxyCodeLine{00562\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ pocma\ =\ Harness::false\_type>}
\DoxyCodeLine{00563\ \textcolor{keyword}{struct\ }arena\_allocator\_fixture\ :\ \mbox{\hyperlink{class_no_copy}{NoCopy}}\{}
\DoxyCodeLine{00564\ \ \ \ \ \textcolor{keyword}{typedef}\ arena<T,\ pocma>\ \ allocator\_t;}
\DoxyCodeLine{00565\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ allocator\_t::arena\_data\_t\ arena\_data\_t;}
\DoxyCodeLine{00566\ }
\DoxyCodeLine{00567\ \ \ \ \ std::vector<tbb::aligned\_space<T,\ 1>\ >\ storage;}
\DoxyCodeLine{00568\ \ \ \ \ arena\_data\_t\ arena\_data;}
\DoxyCodeLine{00569\ \ \ \ \ allocator\_t\ allocator;}
\DoxyCodeLine{00570\ }
\DoxyCodeLine{00571\ \ \ \ \ arena\_allocator\_fixture(\textcolor{keywordtype}{size\_t}\ size\_to\_allocate)}
\DoxyCodeLine{00572\ \ \ \ \ :\ \ \ storage(size\_to\_allocate)}
\DoxyCodeLine{00573\ \ \ \ \ ,\ \ \ arena\_data((*storage.\mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}}()).\mbox{\hyperlink{ittnotify__static_8h_a50deeaccd8b2b4be185e1befc7860258}{begin}}(),\ storage.\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ac42c05b5701aef6bab82675cf3b55fee}{size}}())}
\DoxyCodeLine{00574\ \ \ \ \ ,\ \ \ allocator(arena\_data)}
\DoxyCodeLine{00575\ \ \ \ \ \{\}}
\DoxyCodeLine{00576\ \};}
\DoxyCodeLine{00577\ }
\DoxyCodeLine{00578\ \textcolor{comment}{//TODO:\ add\ ability\ to\ inject\ debug\_allocator\ into\ stateful\_allocator\_fixture::allocator\_t}}
\DoxyCodeLine{00579\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ pocma\ =\ Harness::false\_type>}
\DoxyCodeLine{00580\ \textcolor{keyword}{struct\ }two\_memory\_arenas\_fixture\ :\ \mbox{\hyperlink{class_no_copy}{NoCopy}}\{}
\DoxyCodeLine{00581\ \ \ \ \ \textcolor{keyword}{typedef}\ arena\_allocator\_fixture<T,\ pocma>\ arena\_fixture\_t;}
\DoxyCodeLine{00582\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ arena\_fixture\_t::allocator\_t\ \ allocator\_t;}
\DoxyCodeLine{00583\ }
\DoxyCodeLine{00584\ \ \ \ \ arena\_fixture\_t\ source\_arena\_fixture;}
\DoxyCodeLine{00585\ \ \ \ \ arena\_fixture\_t\ dst\_arena\_fixture;}
\DoxyCodeLine{00586\ }
\DoxyCodeLine{00587\ \ \ \ \ allocator\_t\&\ source\_allocator;}
\DoxyCodeLine{00588\ \ \ \ \ allocator\_t\&\ dst\_allocator;}
\DoxyCodeLine{00589\ }
\DoxyCodeLine{00590\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ test\_name;}
\DoxyCodeLine{00591\ }
\DoxyCodeLine{00592\ \ \ \ \ two\_memory\_arenas\_fixture(\textcolor{keywordtype}{size\_t}\ size\_to\_allocate,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ a\_test\_name)}
\DoxyCodeLine{00593\ \ \ \ \ :\ \ \ source\_arena\_fixture(size\_to\_allocate)}
\DoxyCodeLine{00594\ \ \ \ \ ,\ \ \ dst\_arena\_fixture(size\_to\_allocate)}
\DoxyCodeLine{00595\ \ \ \ \ ,\ \ \ source\_allocator(source\_arena\_fixture.allocator)}
\DoxyCodeLine{00596\ \ \ \ \ ,\ \ \ dst\_allocator(dst\_arena\_fixture.allocator)}
\DoxyCodeLine{00597\ \ \ \ \ ,\ \ \ test\_name(a\_test\_name)}
\DoxyCodeLine{00598\ \ \ \ \ \{}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(\&*source\_arena\_fixture.storage.begin()\ !=\ \&*dst\_arena\_fixture.storage.begin(),\ \textcolor{stringliteral}{"{}source\ and\ destination\ arena\ instances\ should\ use\ different\ memory\ regions"{}},\ test\_name);}
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(source\_allocator\ !=\ dst\_allocator,\ \textcolor{stringliteral}{"{}arenas\ using\ different\ memory\ regions\ should\ not\ compare\ equal"{}},\ test\_name);}
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(pocma::value\ ==\ tbb::internal::allocator\_traits<allocator\_t>::propagate\_on\_container\_move\_assignment::value,\ \textcolor{stringliteral}{"{}This\ test\ require\ proper\ allocator\_traits\ support"{}},\ test\_name);}
\DoxyCodeLine{00602\ }
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Some\ ISO\ C++11\ allocator\ requirements\ enforcement:}}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ allocator\_t\ source\_allocator\_copy(source\_allocator),\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}(dst\_allocator);}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ allocator\_t\ source\_previous\_state(source\_allocator);}
\DoxyCodeLine{00606\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(source\_previous\_state\ ==\ source\_allocator,\ \textcolor{stringliteral}{"{}Copy\ of\ allocator\ should\ compare\ equal\ to\ it's\ source"{}},\ test\_name);}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}\ =\ std::move(source\_allocator\_copy);}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}\ ==\ source\_previous\_state,\ \textcolor{stringliteral}{"{}Move\ initialized\ instance\ of\ allocator\ should\ compare\ equal\ to\ it's\ source\ state\ before\ movement"{}},\ test\_name);}
\DoxyCodeLine{00609\ \ \ \ \ \}}
\DoxyCodeLine{00610\ }
\DoxyCodeLine{00611\ \ \ \ \ \textcolor{keywordtype}{void}\ verify\_allocator\_was\_moved(\textcolor{keyword}{const}\ allocator\_t\&\ result\_allocator)\{}
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ \textcolor{comment}{//TODO:\ add\ assert\ that\ allocator\ move\ constructor/assignment\ operator\ was\ called}}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(result\_allocator\ ==\ source\_allocator,\ \textcolor{stringliteral}{"{}allocator\ was\ not\ moved\ ?"{}},\ test\_name);}
\DoxyCodeLine{00614\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a47ea40fb0a351a3f3ac751772552eaa1}{ASSERT\_IN\_TEST}}(result\_allocator\ !=\ dst\_allocator,\ \ \ \ \textcolor{stringliteral}{"{}allocator\ was\ not\ moved\ ?"{}},\ test\_name);}
\DoxyCodeLine{00615\ \ \ \ \ \}}
\DoxyCodeLine{00616\ }
\DoxyCodeLine{00617\ \textcolor{comment}{//\ \ \ \ template\ <typename\ any\_allocator\_t>}}
\DoxyCodeLine{00618\ \textcolor{comment}{//\ \ \ \ void\ verify\_allocator\_was\_moved(const\ any\_allocator\_t\&\ )\{\}}}
\DoxyCodeLine{00619\ \};}
\DoxyCodeLine{00620\ }
\DoxyCodeLine{00621\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ pocma\ =\ Harness::false\_type>}
\DoxyCodeLine{00622\ \textcolor{keyword}{struct\ }std\_stateful\_allocator\ :\ \mbox{\hyperlink{class_no_copy}{NoCopy}}\ \{}
\DoxyCodeLine{00623\ \ \ \ \ \textcolor{keyword}{typedef}\ stateful\_allocator<FooWithAssign,\ pocma>\ allocator\_t;}
\DoxyCodeLine{00624\ }
\DoxyCodeLine{00625\ \ \ \ \ allocator\_t\ source\_allocator;}
\DoxyCodeLine{00626\ \ \ \ \ allocator\_t\ dst\_allocator;}
\DoxyCodeLine{00627\ }
\DoxyCodeLine{00628\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ test\_name;}
\DoxyCodeLine{00629\ }
\DoxyCodeLine{00630\ \ \ \ \ std\_stateful\_allocator(\textcolor{keywordtype}{size\_t}\ ,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ a\_test\_name)}
\DoxyCodeLine{00631\ \ \ \ \ :\ \ \ test\_name(a\_test\_name)}
\DoxyCodeLine{00632\ \ \ \ \ \{\}}
\DoxyCodeLine{00633\ }
\DoxyCodeLine{00634\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ any\_allocator\_t>}
\DoxyCodeLine{00635\ \ \ \ \ \textcolor{keywordtype}{void}\ verify\_allocator\_was\_moved(\textcolor{keyword}{const}\ any\_allocator\_t\&\ )\{\}}
\DoxyCodeLine{00636\ }
\DoxyCodeLine{00637\ \};}
\DoxyCodeLine{00638\ }
\DoxyCodeLine{00639\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ container\_traits,\ \textcolor{keyword}{typename}\ pocma\ =\ Harness::false\_type,\ \textcolor{keyword}{typename}\ T\ =\ FooWithAssign>}
\DoxyCodeLine{00640\ \textcolor{keyword}{struct\ }default\_stateful\_fixture\_make\_helper\{}
\DoxyCodeLine{00641\ \textcolor{comment}{//\ \ \ \ typedef\ std\_stateful\_allocator<pocma>\ allocator\_fixture\_t;}}
\DoxyCodeLine{00642\ \ \ \ \ \textcolor{keyword}{typedef}\ two\_memory\_arenas\_fixture<T,\ pocma>\ allocator\_fixture\_t;}
\DoxyCodeLine{00643\ \ \ \ \ \textcolor{keyword}{typedef}\ static\_shared\_counting\_allocator<Harness::int\_to\_type<\_\_LINE\_\_>,\ \textcolor{keyword}{typename}\ allocator\_fixture\_t::allocator\_t,\ std::size\_t>\ allocator\_t;}
\DoxyCodeLine{00644\ }
\DoxyCodeLine{00645\ \ \ \ \ \textcolor{keyword}{typedef}\ move\_fixture<container\_traits,\ allocator\_t>\ move\_fixture\_t;}
\DoxyCodeLine{00646\ \ \ \ \ \textcolor{keyword}{typedef}\ track\_allocator\_memory<allocator\_t>\ no\_leaks\_t;}
\DoxyCodeLine{00647\ \ \ \ \ \textcolor{keyword}{typedef}\ track\_foo\_count<\_\_LINE\_\_>\ no\_foo\_leaks\_in\_fixture\_t;}
\DoxyCodeLine{00648\ \ \ \ \ \textcolor{keyword}{typedef}\ track\_foo\_count<\_\_LINE\_\_>\ no\_foo\_leaks\_in\_test\_t;}
\DoxyCodeLine{00649\ }
\DoxyCodeLine{00650\ \ \ \ \ \textcolor{keyword}{struct\ }default\_stateful\_fixture\ :\ no\_leaks\_t,\ \textcolor{keyword}{private}\ no\_foo\_leaks\_in\_fixture\_t,\ allocator\_fixture\_t,\ move\_fixture\_t,\ no\_foo\_leaks\_in\_test\_t\ \{}
\DoxyCodeLine{00651\ }
\DoxyCodeLine{00652\ \ \ \ \ \ \ \ \ default\_stateful\_fixture(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ a\_test\_name)}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ :\ \ \ no\_leaks\_t(a\_test\_name)}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ ,\ \ \ no\_foo\_leaks\_in\_fixture\_t(a\_test\_name)}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \textcolor{comment}{//TODO:\ calculate\ needed\ size\ more\ accurately}}
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \textcolor{comment}{//allocate\ twice\ more\ storage\ to\ handle\ case\ when\ copy\ constructor\ called\ instead\ of\ move\ one}}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ ,\ \ \ allocator\_fixture\_t(2*4\ *\ move\_fixture\_t::default\_container\_size,\ a\_test\_name)}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ ,\ \ \ move\_fixture\_t(a\_test\_name,\ allocator\_fixture\_t::source\_allocator)}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ ,\ \ \ no\_foo\_leaks\_in\_test\_t(a\_test\_name)}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \ \ \ \ no\_leaks\_t::save\_allocator\_counters();}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00663\ }
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ verify\_no\_more\_than\_x\_memory\_items\_allocated()\{}
\DoxyCodeLine{00665\ \ \ \ \ \ \ \ \ \ \ \ \ no\_leaks\_t::verify\_no\_more\_than\_x\_memory\_items\_allocated(container\_traits::expected\_number\_of\_items\_to\_allocate\_for\_steal\_move);}
\DoxyCodeLine{00666\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00667\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }no\_foo\_leaks\_in\_test\_t::verify\_no\_undestroyed\_foo\_left\_and\_dismiss;}
\DoxyCodeLine{00668\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ move\_fixture\_t::container\_t::allocator\_type\ allocator\_t;}
\DoxyCodeLine{00669\ \ \ \ \ \};}
\DoxyCodeLine{00670\ }
\DoxyCodeLine{00671\ \ \ \ \ \textcolor{keyword}{typedef}\ default\_stateful\_fixture\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_ae8396ff85d63082521e3324820df1009}{type}};}
\DoxyCodeLine{00672\ \};}
\DoxyCodeLine{00673\ }
\DoxyCodeLine{00674\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ container\_traits>}
\DoxyCodeLine{00675\ \textcolor{keywordtype}{void}\ TestMoveConstructorSingleArgument()\{}
\DoxyCodeLine{00676\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ default\_stateful\_fixture\_make\_helper<container\_traits>::type\ fixture\_t;}
\DoxyCodeLine{00677\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ fixture\_t::container\_t\ container\_t;}
\DoxyCodeLine{00678\ }
\DoxyCodeLine{00679\ \ \ \ \ fixture\_t\ fixture(\textcolor{stringliteral}{"{}TestMoveConstructorSingleArgument"{}});}
\DoxyCodeLine{00680\ }
\DoxyCodeLine{00681\ \ \ \ \ container\_t\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}(std::move(fixture.source));}
\DoxyCodeLine{00682\ }
\DoxyCodeLine{00683\ \ \ \ \ fixture.verify\_content\_shallow\_moved(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}});}
\DoxyCodeLine{00684\ \ \ \ \ fixture.verify\_allocator\_was\_moved(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.get\_allocator());}
\DoxyCodeLine{00685\ \ \ \ \ fixture.verify\_no\_more\_than\_x\_memory\_items\_allocated();}
\DoxyCodeLine{00686\ \ \ \ \ fixture.verify\_no\_undestroyed\_foo\_left\_and\_dismiss();}
\DoxyCodeLine{00687\ \}}
\DoxyCodeLine{00688\ }
\DoxyCodeLine{00689\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ container\_traits>}
\DoxyCodeLine{00690\ \textcolor{keywordtype}{void}\ TestMoveConstructorWithEqualAllocator()\{}
\DoxyCodeLine{00691\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ default\_stateful\_fixture\_make\_helper<container\_traits>::type\ fixture\_t;}
\DoxyCodeLine{00692\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ fixture\_t::container\_t\ container\_t;}
\DoxyCodeLine{00693\ }
\DoxyCodeLine{00694\ \ \ \ \ fixture\_t\ fixture(\textcolor{stringliteral}{"{}TestMoveConstructorWithEqualAllocator"{}});}
\DoxyCodeLine{00695\ }
\DoxyCodeLine{00696\ \ \ \ \ container\_t\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}(std::move(fixture.source),\ fixture.source.get\_allocator());}
\DoxyCodeLine{00697\ }
\DoxyCodeLine{00698\ \ \ \ \ fixture.verify\_content\_shallow\_moved(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}});}
\DoxyCodeLine{00699\ \ \ \ \ fixture.verify\_no\_more\_than\_x\_memory\_items\_allocated();}
\DoxyCodeLine{00700\ \ \ \ \ fixture.verify\_no\_undestroyed\_foo\_left\_and\_dismiss();}
\DoxyCodeLine{00701\ \}}
\DoxyCodeLine{00702\ }
\DoxyCodeLine{00703\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ container\_traits>}
\DoxyCodeLine{00704\ \textcolor{keywordtype}{void}\ TestMoveConstructorWithUnEqualAllocator()\{}
\DoxyCodeLine{00705\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ default\_stateful\_fixture\_make\_helper<container\_traits>::type\ fixture\_t;}
\DoxyCodeLine{00706\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ fixture\_t::container\_t\ container\_t;}
\DoxyCodeLine{00707\ }
\DoxyCodeLine{00708\ \ \ \ \ fixture\_t\ fixture(\textcolor{stringliteral}{"{}TestMoveConstructorWithUnEqualAllocator"{}});}
\DoxyCodeLine{00709\ }
\DoxyCodeLine{00710\ \ \ \ \ container\_t\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}(std::move(fixture.source),\ fixture.dst\_allocator);}
\DoxyCodeLine{00711\ }
\DoxyCodeLine{00712\ \ \ \ \ fixture.verify\_content\_deep\_moved(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}});}
\DoxyCodeLine{00713\ \}}
\DoxyCodeLine{00714\ }
\DoxyCodeLine{00715\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ container\_traits>}
\DoxyCodeLine{00716\ \textcolor{keywordtype}{void}\ TestMoveConstructor()\{}
\DoxyCodeLine{00717\ \ \ \ \ TestMoveConstructorSingleArgument<container\_traits>();}
\DoxyCodeLine{00718\ \ \ \ \ TestMoveConstructorWithEqualAllocator<container\_traits>();}
\DoxyCodeLine{00719\ \ \ \ \ TestMoveConstructorWithUnEqualAllocator<container\_traits>();}
\DoxyCodeLine{00720\ \}}
\DoxyCodeLine{00721\ }
\DoxyCodeLine{00722\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ container\_traits>}
\DoxyCodeLine{00723\ \textcolor{keywordtype}{void}\ TestMoveAssignOperatorPOCMAStateful()\{}
\DoxyCodeLine{00724\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ default\_stateful\_fixture\_make\_helper<container\_traits,\ Harness::true\_type>::type\ fixture\_t;}
\DoxyCodeLine{00725\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ fixture\_t::container\_t\ container\_t;}
\DoxyCodeLine{00726\ }
\DoxyCodeLine{00727\ \ \ \ \ fixture\_t\ fixture(\textcolor{stringliteral}{"{}TestMoveAssignOperatorPOCMAStateful"{}});}
\DoxyCodeLine{00728\ }
\DoxyCodeLine{00729\ \ \ \ \ container\_t\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}(fixture.dst\_allocator);}
\DoxyCodeLine{00730\ }
\DoxyCodeLine{00731\ \ \ \ \ fixture.save\_allocator\_counters();}
\DoxyCodeLine{00732\ }
\DoxyCodeLine{00733\ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}\ =\ std::move(fixture.source);}
\DoxyCodeLine{00734\ }
\DoxyCodeLine{00735\ \ \ \ \ fixture.verify\_content\_shallow\_moved(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}});}
\DoxyCodeLine{00736\ \ \ \ \ fixture.verify\_allocator\_was\_moved(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.get\_allocator());}
\DoxyCodeLine{00737\ \ \ \ \ fixture.verify\_no\_more\_than\_x\_memory\_items\_allocated();}
\DoxyCodeLine{00738\ \ \ \ \ fixture.verify\_no\_undestroyed\_foo\_left\_and\_dismiss();}
\DoxyCodeLine{00739\ \}}
\DoxyCodeLine{00740\ }
\DoxyCodeLine{00741\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ container\_traits>}
\DoxyCodeLine{00742\ \textcolor{keywordtype}{void}\ TestMoveAssignOperatorPOCMANonStateful()\{}
\DoxyCodeLine{00743\ \ \ \ \ \textcolor{keyword}{typedef}\ std::allocator<FooWithAssign>\ \ allocator\_t;}
\DoxyCodeLine{00744\ }
\DoxyCodeLine{00745\ \ \ \ \ \textcolor{keyword}{typedef}\ move\_fixture<container\_traits,\ allocator\_t>\ fixture\_t;}
\DoxyCodeLine{00746\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ fixture\_t::container\_t\ container\_t;}
\DoxyCodeLine{00747\ }
\DoxyCodeLine{00748\ \ \ \ \ fixture\_t\ fixture(\textcolor{stringliteral}{"{}TestMoveAssignOperatorPOCMANonStateful"{}});}
\DoxyCodeLine{00749\ }
\DoxyCodeLine{00750\ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(fixture.source.get\_allocator()\ ==\ allocator\_t(),\ \textcolor{stringliteral}{"{}Incorrect\ test\ setup:\ allocator\ is\ stateful\ while\ should\ not?"{}});}
\DoxyCodeLine{00751\ }
\DoxyCodeLine{00752\ \ \ \ \ container\_t\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}};}
\DoxyCodeLine{00753\ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}\ =\ std::move(fixture.source);}
\DoxyCodeLine{00754\ }
\DoxyCodeLine{00755\ \ \ \ \ fixture.verify\_content\_shallow\_moved(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}});}
\DoxyCodeLine{00756\ \ \ \ \ \textcolor{comment}{//TODO:\ add\ an\ assert\ that\ allocator\ was\ "{}moved"{}\ when\ POCMA\ is\ set}}
\DoxyCodeLine{00757\ \}}
\DoxyCodeLine{00758\ }
\DoxyCodeLine{00759\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ container\_traits>}
\DoxyCodeLine{00760\ \textcolor{keywordtype}{void}\ TestMoveAssignOperatorNotPOCMAWithUnEqualAllocator()\{}
\DoxyCodeLine{00761\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ default\_stateful\_fixture\_make\_helper<container\_traits>::type\ fixture\_t;}
\DoxyCodeLine{00762\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ fixture\_t::container\_t\ container\_t;}
\DoxyCodeLine{00763\ }
\DoxyCodeLine{00764\ \ \ \ \ fixture\_t\ fixture(\textcolor{stringliteral}{"{}TestMoveAssignOperatorNotPOCMAWithUnEqualAllocator"{}});}
\DoxyCodeLine{00765\ }
\DoxyCodeLine{00766\ \ \ \ \ container\_t\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}(fixture.dst\_allocator);}
\DoxyCodeLine{00767\ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}\ =\ std::move(fixture.source);}
\DoxyCodeLine{00768\ }
\DoxyCodeLine{00769\ \ \ \ \ fixture.verify\_content\_deep\_moved(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}});}
\DoxyCodeLine{00770\ \}}
\DoxyCodeLine{00771\ }
\DoxyCodeLine{00772\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ container\_traits>}
\DoxyCodeLine{00773\ \textcolor{keywordtype}{void}\ TestMoveAssignOperatorNotPOCMAWithEqualAllocator()\{}
\DoxyCodeLine{00774\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ default\_stateful\_fixture\_make\_helper<container\_traits,\ Harness::false\_type>::type\ fixture\_t;}
\DoxyCodeLine{00775\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ fixture\_t::container\_t\ container\_t;}
\DoxyCodeLine{00776\ \ \ \ \ fixture\_t\ fixture(\textcolor{stringliteral}{"{}TestMoveAssignOperatorNotPOCMAWithEqualAllocator"{}});}
\DoxyCodeLine{00777\ }
\DoxyCodeLine{00778\ \ \ \ \ container\_t\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}(fixture.source\_allocator);}
\DoxyCodeLine{00779\ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(fixture.source.get\_allocator()\ ==\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.get\_allocator(),\ \textcolor{stringliteral}{"{}Incorrect\ test\ setup:\ allocators\ are\ not\ equal\ while\ should\ be?"{}});}
\DoxyCodeLine{00780\ }
\DoxyCodeLine{00781\ \ \ \ \ fixture.save\_allocator\_counters();}
\DoxyCodeLine{00782\ }
\DoxyCodeLine{00783\ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}\ =\ std::move(fixture.source);}
\DoxyCodeLine{00784\ }
\DoxyCodeLine{00785\ \ \ \ \ fixture.verify\_content\_shallow\_moved(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}});}
\DoxyCodeLine{00786\ \ \ \ \ fixture.verify\_no\_more\_than\_x\_memory\_items\_allocated();}
\DoxyCodeLine{00787\ \ \ \ \ fixture.verify\_no\_undestroyed\_foo\_left\_and\_dismiss();}
\DoxyCodeLine{00788\ \}}
\DoxyCodeLine{00789\ }
\DoxyCodeLine{00790\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ container\_traits>}
\DoxyCodeLine{00791\ \textcolor{keywordtype}{void}\ TestMoveAssignOperator()\{}
\DoxyCodeLine{00792\ \textcolor{preprocessor}{\#if\ \_\_TBB\_ALLOCATOR\_TRAITS\_PRESENT}}
\DoxyCodeLine{00793\ \ \ \ \ TestMoveAssignOperatorPOCMANonStateful<container\_traits>();}
\DoxyCodeLine{00794\ \ \ \ \ TestMoveAssignOperatorPOCMAStateful<container\_traits>();}
\DoxyCodeLine{00795\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00796\ \ \ \ \ TestMoveAssignOperatorNotPOCMAWithUnEqualAllocator<container\_traits>();}
\DoxyCodeLine{00797\ \ \ \ \ TestMoveAssignOperatorNotPOCMAWithEqualAllocator<container\_traits>();}
\DoxyCodeLine{00798\ \}}
\DoxyCodeLine{00799\ }
\DoxyCodeLine{00800\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ container\_traits>}
\DoxyCodeLine{00801\ \textcolor{keywordtype}{void}\ TestConstructorWithMoveIterators()\{}
\DoxyCodeLine{00802\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ default\_stateful\_fixture\_make\_helper<container\_traits>::type\ fixture\_t;}
\DoxyCodeLine{00803\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ fixture\_t::container\_t\ container\_t;}
\DoxyCodeLine{00804\ }
\DoxyCodeLine{00805\ \ \ \ \ fixture\_t\ fixture(\textcolor{stringliteral}{"{}TestConstructorWithMoveIterators"{}});}
\DoxyCodeLine{00806\ }
\DoxyCodeLine{00807\ \ \ \ \ container\_t\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}(std::make\_move\_iterator(fixture.source.begin()),\ std::make\_move\_iterator(fixture.source.end()),\ fixture.dst\_allocator);}
\DoxyCodeLine{00808\ }
\DoxyCodeLine{00809\ \ \ \ \ fixture.verify\_content\_deep\_moved(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}});}
\DoxyCodeLine{00810\ \}}
\DoxyCodeLine{00811\ }
\DoxyCodeLine{00812\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ container\_traits>}
\DoxyCodeLine{00813\ \textcolor{keywordtype}{void}\ TestAssignWithMoveIterators()\{}
\DoxyCodeLine{00814\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ default\_stateful\_fixture\_make\_helper<container\_traits>::type\ fixture\_t;}
\DoxyCodeLine{00815\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ fixture\_t::container\_t\ container\_t;}
\DoxyCodeLine{00816\ }
\DoxyCodeLine{00817\ \ \ \ \ fixture\_t\ fixture(\textcolor{stringliteral}{"{}TestAssignWithMoveIterators"{}});}
\DoxyCodeLine{00818\ }
\DoxyCodeLine{00819\ \ \ \ \ container\_t\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}(fixture.dst\_allocator);}
\DoxyCodeLine{00820\ \ \ \ \ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}.assign(std::make\_move\_iterator(fixture.source.begin()),\ std::make\_move\_iterator(fixture.source.end()));}
\DoxyCodeLine{00821\ }
\DoxyCodeLine{00822\ \ \ \ \ fixture.verify\_content\_deep\_moved(\mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}});}
\DoxyCodeLine{00823\ \}}
\DoxyCodeLine{00824\ }
\DoxyCodeLine{00825\ \textcolor{preprocessor}{\#if\ \ TBB\_USE\_EXCEPTIONS}}
\DoxyCodeLine{00826\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ container\_traits>}
\DoxyCodeLine{00827\ \textcolor{keywordtype}{void}\ TestExceptionSafetyGuaranteesMoveConstructorWithUnEqualAllocatorMemoryFailure()\{}
\DoxyCodeLine{00828\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ default\_stateful\_fixture\_make\_helper<container\_traits>::type\ fixture\_t;}
\DoxyCodeLine{00829\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ fixture\_t::container\_t\ container\_t;}
\DoxyCodeLine{00830\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ container\_t::allocator\_type\ allocator\_t;}
\DoxyCodeLine{00831\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ test\_name\ =\ \textcolor{stringliteral}{"{}TestExceptionSafetyGuaranteesMoveConstructorWithUnEqualAllocatorMemoryFailure"{}};}
\DoxyCodeLine{00832\ \ \ \ \ fixture\_t\ fixture(test\_name);}
\DoxyCodeLine{00833\ }
\DoxyCodeLine{00834\ \ \ \ \ \mbox{\hyperlink{structlimit__allocated__items__in__scope}{limit\_allocated\_items\_in\_scope<allocator\_t>}}\ allocator\_limit(allocator\_t::items\_allocated\ +\ fixture.container\_size/4);}
\DoxyCodeLine{00835\ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a2ebd02b198ec5d4736f97539d515d476}{ASSERT\_THROWS\_IN\_TEST}}(container\_t\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}(std::move(fixture.source),\ fixture.dst\_allocator),\ std::bad\_alloc,\ \textcolor{stringliteral}{"{}"{}},\ test\_name);}
\DoxyCodeLine{00836\ \}}
\DoxyCodeLine{00837\ }
\DoxyCodeLine{00838\ \textcolor{comment}{//TODO:\ add\ tests\ that\ verify\ that\ stealing\ move\ constructors/assign\ operators\ does\ not\ throw\ exceptions}}
\DoxyCodeLine{00839\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ container\_traits>}
\DoxyCodeLine{00840\ \textcolor{keywordtype}{void}\ TestExceptionSafetyGuaranteesMoveConstructorWithUnEqualAllocatorExceptionInElementCtor()\{}
\DoxyCodeLine{00841\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ default\_stateful\_fixture\_make\_helper<container\_traits>::type\ fixture\_t;}
\DoxyCodeLine{00842\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ fixture\_t::container\_t\ container\_t;}
\DoxyCodeLine{00843\ }
\DoxyCodeLine{00844\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ test\_name\ =\ \textcolor{stringliteral}{"{}TestExceptionSafetyGuaranteesMoveConstructorWithUnEqualAllocatorExceptionInElementCtor"{}};}
\DoxyCodeLine{00845\ \ \ \ \ fixture\_t\ fixture(test\_name);}
\DoxyCodeLine{00846\ }
\DoxyCodeLine{00847\ \ \ \ \ \mbox{\hyperlink{structlimit__foo__count__in__scope}{limit\_foo\_count\_in\_scope}}\ foo\_limit(\mbox{\hyperlink{test__concurrent__vector__v2_8cpp_a405b4a3f2cf6d7b2b1da1df4cd155af9}{FooCount}}\ +\ fixture.container\_size/4);}
\DoxyCodeLine{00848\ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a2ebd02b198ec5d4736f97539d515d476}{ASSERT\_THROWS\_IN\_TEST}}(container\_t\ \mbox{\hyperlink{shortpath_8cpp_a720827d53e80d32b23f708768099d331}{dst}}(std::move(fixture.source),\ fixture.dst\_allocator),\ std::bad\_alloc,\ \textcolor{stringliteral}{"{}"{}},\ test\_name);}
\DoxyCodeLine{00849\ \}}
\DoxyCodeLine{00850\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ TBB\_USE\_EXCEPTIONS\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00851\ \textcolor{preprocessor}{\#endif}\textcolor{comment}{//\_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT}}
\DoxyCodeLine{00852\ }
\DoxyCodeLine{00853\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacehelper__stuff__tests}{helper\_stuff\_tests}}\ \{}
\DoxyCodeLine{00854\ \ \ \ \ \textcolor{keywordtype}{void}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespacehelper__stuff__tests_a18e1af673b1c58bdb0b1b385ecd7e8aa}{TestArena}}()\{}
\DoxyCodeLine{00855\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{int}\ arena\_element;}
\DoxyCodeLine{00856\ }
\DoxyCodeLine{00857\ \ \ \ \ \ \ \ \ arena\_element\ arena\_storage[10]\ =\ \{0\};}
\DoxyCodeLine{00858\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structarena}{arena<arena\_element>}}\ arena\_t;}
\DoxyCodeLine{00859\ }
\DoxyCodeLine{00860\ \ \ \ \ \ \ \ \ arena\_t::arena\_data\_t\ \mbox{\hyperlink{structarena__data}{arena\_data}}(arena\_storage,\mbox{\hyperlink{namespace_harness_ab206cca6eab4aa536242981c7c4f3e3c}{Harness::array\_length}}(arena\_storage));}
\DoxyCodeLine{00861\ \ \ \ \ \ \ \ \ arena\_t\ \mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}(\mbox{\hyperlink{structarena__data}{arena\_data}});}
\DoxyCodeLine{00862\ }
\DoxyCodeLine{00863\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}.allocate(1)\ ==\ arena\_storage,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00864\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}.allocate(2)\ ==\ \&arena\_storage[1],\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00865\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(\mbox{\hyperlink{_cwise__product_8cpp_ad2cbe4616e813eb9af81732dca777b24}{a}}.allocate(2)\ ==\ \&arena\_storage[2+1],\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00866\ \ \ \ \ \}}
\DoxyCodeLine{00867\ }
\DoxyCodeLine{00868\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ static\_counting\_allocator\_type>}
\DoxyCodeLine{00869\ \ \ \ \ \textcolor{keywordtype}{void}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespacehelper__stuff__tests_a35f061d2ec37a114dfe0e8938088d55f}{TestStaticCountingAllocatorRebound}}()\{}
\DoxyCodeLine{00870\ \ \ \ \ \ \ \ \ static\_counting\_allocator\_type::set\_limits(1);}
\DoxyCodeLine{00871\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ static\_counting\_allocator\_type::\ template\ rebind<std::pair<int,int>\ >::other\ rebound\_type;}
\DoxyCodeLine{00872\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(rebound\_type::max\_items\ ==\ static\_counting\_allocator\_type::max\_items,\ \textcolor{stringliteral}{"{}rebound\ allocator\ should\ use\ the\ same\ limits"{}});}
\DoxyCodeLine{00873\ \ \ \ \ \ \ \ \ static\_counting\_allocator\_type::set\_limits(0);}
\DoxyCodeLine{00874\ \ \ \ \ \}}
\DoxyCodeLine{00875\ }
\DoxyCodeLine{00876\ \ \ \ \ \textcolor{keywordtype}{void}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespacehelper__stuff__tests_a80ddc8020aa7a4be3619b0fbb4578fd1}{TestStatefulAllocator}}()\{}
\DoxyCodeLine{00877\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classstateful__allocator}{stateful\_allocator<int>}}\ a1,a2;}
\DoxyCodeLine{00878\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classstateful__allocator}{stateful\_allocator<int>}}\ copy\_of\_a1(a1);}
\DoxyCodeLine{00879\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(a1\ !=\ a2,\textcolor{stringliteral}{"{}non\_equal\_allocator\ are\ designed\ to\ simulate\ stateful\ allocators"{}});}
\DoxyCodeLine{00880\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mini_cpp_unit_8hxx_a092bd7bb2cb7fd9f483b6995cee61bc0}{ASSERT}}(copy\_of\_a1\ ==\ a1,\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00881\ \ \ \ \ \}}
\DoxyCodeLine{00882\ \}}
\DoxyCodeLine{00883\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_test_helper_stuff_a17625ab50cad72c38456178a3d765650}{TestHelperStuff}}\{}
\DoxyCodeLine{00884\ \ \ \ \ \mbox{\hyperlink{struct_test_helper_stuff_a17625ab50cad72c38456178a3d765650}{TestHelperStuff}}()\{}
\DoxyCodeLine{00885\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespacehelper__stuff__tests}{helper\_stuff\_tests}};}
\DoxyCodeLine{00886\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_ab4fd58842f12590336910cd87db1ef39}{TestFoo}}();}
\DoxyCodeLine{00887\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{test__container__move__support_8h_a04d45b1e95e506843113e731d8ee34ac}{TestAllOf}}();}
\DoxyCodeLine{00888\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacehelper__stuff__tests_a18e1af673b1c58bdb0b1b385ecd7e8aa}{TestArena}}();}
\DoxyCodeLine{00889\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacehelper__stuff__tests_a35f061d2ec37a114dfe0e8938088d55f}{TestStaticCountingAllocatorRebound<static\_shared\_counting\_allocator<int,\ arena<int>}}\ >\ >();}
\DoxyCodeLine{00890\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacehelper__stuff__tests_a80ddc8020aa7a4be3619b0fbb4578fd1}{TestStatefulAllocator}}();}
\DoxyCodeLine{00891\ \textcolor{preprocessor}{\#if\ \_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT}}
\DoxyCodeLine{00892\ \ \ \ \ \ \ \ \ TestMemoryLocaionsHelper();}
\DoxyCodeLine{00893\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\_\_TBB\_CPP11\_RVALUE\_REF\_PRESENT}}
\DoxyCodeLine{00894\ \ \ \ \ \}}
\DoxyCodeLine{00895\ \};}
\DoxyCodeLine{00896\ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_test_helper_stuff}{TestHelperStuff}}\ \mbox{\hyperlink{test__container__move__support_8h_ad88a77873ac1bcd9ef2b8b1d9319a8a9}{TestHelperStuff\_s}};}
\DoxyCodeLine{00897\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ \_\_TBB\_test\_container\_move\_support\_H\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
